!function(t){function e(t,e){return t.w('<div class="bots-helper-margin-bottom-20"><label for="').f(e.get(["idPrefix"],!1),e,"h").w('-input-compositebag-entities">').h("i18n",e,{},{key:"entities.landing.configuration.compositeEntities"},"h").w('</label><input id="').f(e.get(["idPrefix"],!1),e,"h").w("-input-compositebag-entities\"data-bind=\"ojComponent: {component: 'ojCombobox', multiple: true,options: $root.entitiesForCompositeBag,value: $root.fieldCompositeBag,translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('intents.messages.required.entityName') } } }\" required/></div>")}return t.register("bots/intents/dialogs/composite.bag",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="form-box bots-helper-padding-left-15"><h2>').h("i18n",e,{},{key:"entities.landing.configuration.title"},"h").w('</h2><div class="bots-helper-margin-top-10 bots-helper-margin-bottom-10"><label for="intentdlg-entity-select-type">').h("i18n",e,{},{key:"entities.landing.description.entityType"},"h").w("</label><select id=\"intentdlg-entity-select-type\"class=\"left intent-name bots-helper-max-width bots-helper-ellipsis\"data-bind=\"ojComponent: { component: 'ojSelect',value: $root.fieldEntityType,rootAttributes: { class: 'bots-name-outer' },help: { source: 'http://www.oracle.com' } },botsHelpPopup: { unikey: 'entities.landing.description.entityTypeHelp' }\" required><option value=\"DERIVED\">").h("i18n",e,{},{key:"entities.landing.description.types.DERIVED"},"h").w('</option><option value="ENUMVALUES">').h("i18n",e,{},{key:"entities.landing.description.types.ENUMVALUES"},"h").w('</option><option value="ENUMENTITIES">').h("i18n",e,{},{key:"entities.landing.description.types.ENUMENTITIES"},"h").w('</option><option value="PATTERNBASED">').h("i18n",e,{},{key:"entities.landing.description.types.PATTERNBASED"},"h").w('</option><option value="COMPOSITEBAG">').h("i18n",e,{},{key:"entities.landing.description.types.COMPOSITEBAG"},"h").w("</option></select></div><!-- ko if: $root.fieldEntityType --><!-- ko if: $root.fieldEntityType()[0] === 'DERIVED' -->").p("bots/intents/dialogs/derived",e,e,{idPrefix:"intEntities"}).w("<!-- /ko --><!-- ko if: $root.fieldEntityType()[0] === 'ENUMVALUES' -->").p("bots/intents/dialogs/values.list",e,e,{idPrefix:"intEntities"}).w("<!-- /ko --><!-- ko if: $root.fieldEntityType()[0] === 'ENUMENTITIES' -->").p("bots/intents/dialogs/entities.list",e,e,{idPrefix:"intEntities"}).w("<!-- /ko --><!-- ko if: $root.fieldEntityType()[0] === 'PATTERNBASED' -->").p("bots/intents/dialogs/pattern.expression",e,e,{idPrefix:"intEntities"}).w("<!-- /ko --><!-- ko if: $root.fieldEntityType()[0] === 'COMPOSITEBAG' -->").p("bots/intents/dialogs/composite.bag",e,e,{idPrefix:"intEntities"}).w("<!-- /ko --><!-- /ko --></div>")}return t.register("bots/intents/dialogs/configuration",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="bots-helper-margin-bottom-20"><label for="').f(e.get(["idPrefix"],!1),e,"h").w('-select-parent">').h("i18n",e,{},{key:"entities.landing.configuration.parent"},"h").w('</label><select id="').f(e.get(["idPrefix"],!1),e,"h").w('-select-parent"class="left intent-name bots-helper-max-width bots-helper-ellipsis"data-bind="ojComponent: {component: \'ojSelect\',placeholder: $root.i18n.translate(\'entities.landing.configuration.selectParentHint\'),value: $root.fieldEntityParent,options:  $root.entitiesForDerivation,optionChange: $root.onParentOptionChanged }" required></select></div><div class="bots-helper-margin-bottom-20"><label for="').f(e.get(["idPrefix"],!1),e,"h").w('-select-rule">').h("i18n",e,{},{key:"entities.landing.configuration.rule"},"h").w('</label><select id="').f(e.get(["idPrefix"],!1),e,"h").w('-select-rule"class="left intent-name bots-helper-max-width bots-helper-ellipsis"data-bind="ojComponent: {component: \'ojSelect\',placeholder: $root.i18n.translate(\'entities.landing.configuration.selectRuleHint\'),value: $root.fieldEntityRule,options: $root.rulesList,optionChange: $root.onRuleOptionChanged }"></select></div><div class="bots-helper-margin-bottom-20"><label for="').f(e.get(["idPrefix"],!1),e,"h").w('-input-phrases">').h("i18n",e,{},{key:"entities.landing.configuration.phrases"},"h").w('</label><input id="').f(e.get(["idPrefix"],!1),e,"h").w('-input-phrases" data-bind="ojComponent: {component: \'ojCombobox\', multiple: true, value: $root.fieldEntityPhrases}"/></div>')}return t.register("bots/intents/dialogs/derived",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="form-box bots-helper-padding-right-15"><h2>').h("i18n",e,{},{key:"entities.landing.description.title"},"h").w('</h2><div class="bots-helper-margin-top-10"><label for="intentdlg-entity-edit-entity-name">').h("i18n",e,{},{key:"entities.landing.description.entityName"},"h").w("</label><input  id=\"intentdlg-entity-edit-entity-name\"class=\"left intent-name bots-helper-max-width bots-helper-ellipsis\"data-bind=\"ojComponent: {component: 'ojInputText',value: $root.fieldEntityName,placeholder: $root.i18n.translate('entities.landing.description.entityNameHint'),rootAttributes: { class: 'bots-helper-max-width' },validators: [ $root.botsValidators.botsOtherNameValidator,$root.uniqueNameValidator ],translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('entities.landing.description.entityNameRequired') } }}\"required/></div><div class=\"bots-helper-margin-top-10\"><label for=\"intentdlg-entity-settings-description\">").h("i18n",e,{},{key:"entities.landing.description.title"},"h").w('</label><textarea id="intentdlg-entity-settings-description" rows="3"data-bind="ojComponent: { component: \'ojTextArea\',value: $root.fieldEntityDescription,validators: [ $root.botsValidators.lengthValidator ],rootAttributes: { class: \'bots-helper-max-width\' } }"></textarea></div></div>')}return t.register("bots/intents/dialogs/description",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="bots-helper-margin-bottom-20"><label for="').f(e.get(["idPrefix"],!1),e,"h").w('-input-enum-entities">').h("i18n",e,{},{key:"entities.landing.configuration.entities"},"h").w('</label><input id="').f(e.get(["idPrefix"],!1),e,"h").w("-input-enum-entities\"data-bind=\"ojComponent: {component: 'ojCombobox', multiple: true,options: $root.entitiesForEnumEntity,value: $root.fieldEntityEnumEntities,translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('intents.messages.required.entityName') } } }\" required/></div>")}return t.register("bots/intents/dialogs/entities.list",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.p("bots/common/asset.picker.popup",e,e,{idPrefix:"intentEntities",selectAssetHandler:"$root.popupIntentEnititySelect",assetDataSource:"$root.entitiesThatCanAddDS",assetTypeIconProvider:"$root.onAssetTypeIconProvider",searchByInputValue:"$root.entityCollection.searchBy",newAssetClickHandler:"$root.popupIntentEnitityNew",beforeClose:"$root.beforeCloseIntentEntityDropDown",newAssetButtonLabel:"$root.i18n.translate('intents.landing.newEntity')",atPosition:"{ horizontal: 'right', vertical: 'bottom' }",myPosition:"{ horizontal: 'right', vertical: 'top' }",tailType:"none"})}return t.register("bots/intents/dialogs/intententities.picker.popup",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"entity-create-dialog",sizeKlazz:"entity-create-dialog",artifKoVarName:"name",validators:"botsValidators.botsOtherNameValidator, uniqueNameValidator",actionHandler:"createEntity"})}function n(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"intents.createEntityDialog.titleLabel"},"h")}function i(t,e){return e=e.shiftBlocks(o),t.w('<div class="oj-flex-bar bots-no-horiz-scroll entity-create-dialog-body"><div class="oj-flex-bar-start oj-flex oj-sm-5 oj-sm-flex-direction-column entity-dialog-divider">').p("bots/intents/dialogs/description",e,e,{}).w('</div><div class="oj-flex-bar-middle oj-flex oj-sm-7 oj-sm-flex-direction-column">').p("bots/intents/dialogs/configuration",e,e,{}).w("</div></div>")}function s(t,e){return e=e.shiftBlocks(o),t.w("'").h("i18n",e,{},{key:"flows.createFlowDialog.createLabel",filter:"j"},"h").w("'")}t.register("bots/intents/dialogs/new.entity.dialog",e);var o={titleLabel:n,bodyHtml:i,actionButtonLabel:s};return e.__dustBody=!0,n.__dustBody=!0,i.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="bots-helper-margin-bottom-20"><label for="').f(e.get(["idPrefix"],!1),e,"h").w('-input-pattern-based">').h("i18n",e,{},{key:"entities.landing.configuration.patternExpression"},"h").w('</label><input id="').f(e.get(["idPrefix"],!1),e,"h").w('-input-pattern-based"class="left intent-name bots-helper-max-width"data-bind="ojComponent: { component: \'ojInputText\',value: $root.fieldPatternExpression,placeholder: $root.i18n.translate(\'entities.landing.description.patternExpressionHint\') }"/></div>')}return t.register("bots/intents/dialogs/pattern.expression",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="value-synonyms-list"><button class="green-button" id="').f(e.get(["idPrefix"],!1),e,"h").w("-add-value-synonym-button\"data-bind=\"ojComponent: { component: 'ojButton',icons: { start: 'bots-svgsprite-cta-icon' },label: $root.i18n.translate('entities.landing.configuration.value') },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_plus_16' },click: $root.onClickAddValue\"></button><div><table id=\"").f(e.get(["idPrefix"],!1),e,"h").w("-value-synonym-list\"data-bind=\"ojComponent: { component: 'ojTable',data: $root.valueSynonymDS,columnsDefault: {sortable: 'none'},columns: [ { headerText: '").h("i18n",e,{},{key:"entities.landing.configuration.value",filter:"j"},"h").w("',field: 'canonicalName',sortable: 'enabled',sortProperty: 'canonicalName',className: 'oj-sm-4'}, { headerText: '").h("i18n",e,{},{key:"entities.landing.configuration.synonyms",filter:"j"},"h").w("',field: 'synonyms'},{className: 'value-synonyms-icon-column'},{className: 'value-synonyms-icon-column'}],rowTemplate: '").f(e.get(["idPrefix"],!1),e,"h").w('-value-synonym-item-template\',rootAttributes: { class: \'bots-helper-margin-top-10 value-synonyms-list\' } }"></table><script type="text/html" id="').f(e.get(["idPrefix"],!1),e,"h").w("-value-synonym-item-template\"><tr data-bind=\"event: { dblclick: $root.onClickEditValueSynonymsRow }\"><td class=\"val-synonym-table-data-cell\" data-bind=\"text: canonicalName\"></td><td class=\"val-synonym-table-data-cell\" data-bind=\"text: $root.formatArray(synonyms)\"></td><td><button tabindex=\"0\"data-bind=\"ojComponent: { component: 'ojButton',chroming: 'half',display: 'icons',icons: { start: 'bots-svgsprite-func-icon' },label: $root.i18n.translate('general.delete'),rootAttributes: { class: 'val-synonym-button bots-no-margin' } },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_edit_16' },click: $root.onClickEditValueSynonymsRow\"></button></td><td><button tabindex=\"0\"data-bind=\"ojComponent: { component: 'ojButton',chroming: 'half',display: 'icons',icons: { start: 'bots-svgsprite-func-icon' },label: $root.i18n.translate('general.delete'),rootAttributes: { class: 'val-synonym-button bots-no-margin' } },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_delete_16' },click: $root.onClickRemoveValueSynonymsRow\"></button></td></tr></script></div></div>")}return t.register("bots/intents/dialogs/values.list",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="intents-landing-conditions" class="oj-row form-box"><h2>').h("i18n",e,{},{key:"intents.landing.conditions.title"},"h").w('<a href="#" class="end-bubble" data-bind="mcsHelpPopup: {summarykey: \'intents.landing.conditions.help\'}"><span class="bots-helper-offscreen">').h("i18n",e,{},{key:"intents.landing.examples.title"},"h").w('</span></a></h2><div class="oj-col oj-sm-11 bots-no-padding"></div></div>')}return t.register("bots/intents/landing/details/conditions",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="intents-landing-description"class="oj-flex bots-helper-margin-top-11 bots-helper-padding-right-20"data-bind="ojComponent: { component: \'ojCollapsible\', expanded: true }"><h2 class="bots-helper-max-width bots-helper-align-collapsible-with-mas-dets">').h("i18n",e,{},{key:"intents.landing.description.title"},"h").w('<a class="right" href="#" data-bind="click: $root.onClickTryOutIntents">').h("i18n",e,{},{key:"intents.landing.description.tryOut"},"h").w('</a></h2><div class="bots-helper-margin-left-20"><div class="bots-helper-margin-bottom-10"><label for="intents-edit-intent-conversation-name">').h("i18n",e,{},{key:"intents.landing.description.intentConversationName"},"h").w('</label><input id="intents-edit-intent-conversation-name"class="left intent-name bots-helper-max-width bots-helper-ellipsis"data-bind="ojComponent: { component: \'ojInputText\',value: $root.fieldIntentConversationName,readOnly: !($root.isDraftVersion() && $root.permissions().BOTS_WRITE),required: $root.isDraftVersion() && $root.permissions().BOTS_WRITE,placeholder: $root.i18n.translate(\'intents.landing.description.intentConversationNameHint\'),validators: [ $root.intentUniqueConversationNameValidator ],translations: { required: { messageSummary: $root.i18n.translate(\'general.notSoFast\'),messageDetail: $root.i18n.translate(\'intents.landing.description.intentConversationNameRequired\') } } }" /></div><div class="bots-helper-margin-bottom-10"><label for="intents-edit-intent-name">').h("i18n",e,{},{key:"intents.landing.description.intentName"},"h").w('</label><input id="intents-edit-intent-name"class="left intent-name bots-helper-max-width bots-helper-ellipsis"data-bind="ojComponent: { component: \'ojInputText\',value: $root.fieldIntentName,readOnly: !($root.isDraftVersion() && $root.permissions().BOTS_WRITE),required: $root.isDraftVersion() && $root.permissions().BOTS_WRITE,placeholder: $root.i18n.translate(\'intents.landing.description.intentNameHint\'),validators: [ $root.botsValidators.botsIntentNameValidator,$root.intentUniqueNameValidator ],translations: { required: { messageSummary: $root.i18n.translate(\'general.notSoFast\'),messageDetail: $root.i18n.translate(\'intents.landing.description.intentNameRequired\') } } }" /></div><div class="bots-helper-margin-bottom-20"><label for="intents-settings-description">').h("i18n",e,{},{key:"intents.landing.description.title"},"h").w('</label><textarea id="intents-settings-description" rows="4"data-bind="ojComponent: { component: \'ojTextArea\',value: $root.fieldIntentDescription,readOnly: !($root.isDraftVersion() && $root.permissions().BOTS_WRITE),validators: [ $root.botsValidators.lengthValidator ],rootAttributes: { class: \'bots-helper-max-width\' } }"></textarea></div></div></div>')}return t.register("bots/intents/landing/details/description",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="intents-landing-examples"class="form-box bots-helper-padding-top-10 bots-helper-padding-right-20"><h2>').h("i18n",e,{},{key:"intents.landing.examples.title"},"h").w('<a href="#" class="suite-helper-margin-left-10"data-bind="botsHelpPopup: { unikey: \'intents.landing.examples.headerHelp\' }"></a></h2><div class="bots-helper-margin-top-10"><div class="examples-partial-box"><div class="oj-flex"><div class="oj-flex-item oj-sm-9 bots-no-padding"><span class="suite-search-filter bots-helper-max-width "><input title="').h("i18n",e,{},{key:"general.filter",filter:"h"},"h").w('" class="oj-inputtext-input oj-autocomplete-widget oj-autocomplete-input no-content bots-helper-max-width"placeholder="').h("i18n",e,{},{key:"general.filter",filter:"h"},"h").w('" autocomplete="off" data-bind="jqueryPlugin: { name: \'suiteSearchFilter\' },value: $root.exampleCollection.searchBy,valueUpdate: \'afterkeydown\'" /></span></div></div><div class="oj-flex-bar oj-sm-align-items-center bots-list-filter-row examples-partial-box"><!-- ko if: $root.hasAnyExampleToShowInUI() --><!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --><div class="oj-flex-bar-middle bots-no-padding"><textarea id="intents-settings-example-edit"class="examples-textarea-input"data-bind="ojComponent: { component: \'ojTextArea\',disabled: !$root.permissions().BOTS_WRITE,value: $root.fieldIntentExamples,placeholder: $root.i18n.translate(\'intents.landing.examples.examplesHint\'),rootAttributes: { class: \'example-text-area-outer suite-helper-margin-bottom-0\' } },attr: { rows: 2 }"></textarea></div><!-- /ko --><div class="oj-flex-bar-end oj-sm-flex-initial"><select id="intents-settings-example-sortBy"data-bind="ojComponent: { component: \'ojSelect\',options: $root.sortOptions,value: $root.sortBy,rootAttributes: { class: \'bots-no-margin bots-helper-padding-left-10\'} }"></select></div><!-- /ko --><!-- ko ifnot: $root.hasAnyExampleToShowInUI() --><!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --><div class="oj-flex-bar-middle bots-no-padding"><textarea id="intents-settings-example-edit"class="examples-textarea-input"data-bind="ojComponent: { component: \'ojTextArea\',disabled: !$root.permissions().BOTS_WRITE,value: $root.fieldIntentExamples,placeholder: $root.i18n.translate(\'intents.landing.examples.examplesHint\'),rootAttributes: { class: \'example-text-area-outer suite-helper-margin-bottom-0\' } },attr: { rows: 8 }"></textarea></div><!-- /ko --><!-- /ko --></div><!-- ko if: $root.hasAnyExampleToShowInUI() --><div class="intents-examples-list"><ul id="intents-examples-list"data-bind="attr: { contextmenu: $root.isDraftVersion() && $root.permissions().BOTS_WRITE ? \'entitiesMenu\' : \'\' },ojComponent: { component: \'ojListView\',data: $root.examplesDS,selectionMode: $root.exampleListSelectionMode,item: { template: \'example-item-template\' },rootAttributes: { class: \'bots-helper-max-width\' } }"></ul><script type="text/html" id="example-item-template"><li><div class="oj-flex oj-sm-flex-wrap-nowrap"><div class="oj-flex-item examples-sentence bots-helper-padding-left-10 examples-normal-mode-item bots-user-select-textt" data-bind="text: sentence,event: { dblclick: $root.isDraftVersion() && $root.permissions().BOTS_WRITE ? $root.onClickEditExample : $.noop }"></div><input  placeholder="').h("i18n",e,{},{key:"intents.landing.examples.examplesHint",filter:"h"},"h").w("\"data-bind=\"ojComponent: { component: 'ojInputText',value: $root.exampleEditValue,rootAttributes: { class: 'oj-flex-item examples-sentence-input bots-helper-max-width examples-edit-mode-item' },translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('intents.landing.examples.exampleRequired') } } },event: { keydown: $root.onKeyDownHandleEscape }\" required /><a class=\"bots-helper-margin-top-3 bots-helper-padding-right-10 bots-helper-padding-top-6 examples-edit-mode-item examples-edit-cancel\"href=\"#\"data-bind=\"text: $root.i18n.translate('general.cancel'),click: $root.onCancelEditExample\"/><button tabindex=\"0\"data-bind=\"ojComponent: { component: 'ojButton',disabled: !$root.permissions().BOTS_WRITE,chroming: 'half',display: 'icons',icons: { start: 'bots-svgsprite-func-icon' },label: $root.i18n.translate('general.edit'),rootAttributes: { class: 'example-button bots-no-margin bots-helper-margin-top-3 examples-normal-mode-item' +(!$root.isDraftVersion() ? ' bots-published' : '') } },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_edit_16' },click: $root.onClickEditExample\"></button><div class=\"oj-flex-item oj-sm-flex-initial right bots-no-padding\">    <button tabindex=\"0\"data-bind=\"ojComponent: { component: 'ojButton',disabled: !$root.permissions().BOTS_WRITE,chroming: 'half',display: 'icons',icons: { start: 'bots-svgsprite-func-icon' },label: $root.i18n.translate('general.delete'),rootAttributes: { class: 'example-button bots-no-margin bots-helper-margin-top-3 examples-normal-mode-item' +(!$root.isDraftVersion() ? ' bots-published' : '') } },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_delete_16' },click: $root.onClickRemoveExample\"></button></div></div></li></script><div class=\"oj-flex\"><div id=\"intents-examples-list-paging-control\"data-bind=\"ojComponent: { component: 'ojPagingControl',data: $root.examplesPager,pageSize: $root.exampleCollection.pageSize(), rootAttributes: { class: 'bots-helper-max-width bots-helper-margin-bottom-10' } }\"></div></div></div><div id=\"entity-menu-container\"><ul id=\"entitiesMenu\" style=\"display:none\"data-bind=\"ojComponent: { component: 'ojMenu', select: $root.menuEnititySelect, rootAttributes: { class: 'suite-context-header-overlay' } }\"><li class=\"oj-menu-item\" data-bind=\"attr: { id: $root.getNewEntityMenuId() + $root.entityIdSuffix }\"><a class=\"intents-entities-menu-item\" href=\"#\" data-bind=\"text: $root.i18n.translate('intents.landing.newEntity')\"/></li><li>---</li><!-- ko foreach: $root.entitiesThatCanAdd --><li class=\"oj-menu-item\" data-bind=\"attr: {id: ko.unwrap(name) + $root.entityIdSuffix, entityId: ko.unwrap(id)}\"><a href=\"#\"><span class=\"oj-menu-item-icon\"data-bind=\"inlinesvg: { width: 16, height: 16, project: 'bots', basename: typeIcon }\" /><span class=\"intents-entities-menu-item\" data-bind=\"text: name\"/></a></li><!-- /ko --></ul></div><!-- /ko --></div></div>    </div>")}return t.register("bots/intents/landing/details/examples",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="intents-landing-intent-entities" class="intent-entities-form-box right-panel-child bots-helper-padding-left-20 bots-helper-padding-right-20"><div class="oj-flex header-box"><div class="oj-flex-item oj-sm-6 bots-helper-margin-top-17"><h2>').h("i18n",e,{},{key:"intents.landing.intentEntities.title"},"h").w('</h2></div><!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --><div class="oj-flex-item oj-sm-6"><div class="add-entity-button bots-helper-margin-top-7 right">').p("bots/common/asset.picker",e,e,{idPrefix:"intentEntities",klazz:"green-button bots-helper-margin-left-3 bots-helper-margin-top-3",baseLabel:"$root.i18n.translate('intents.landing.addEntity')",baseSvgSprite:"func_plus_16"}).w('</div></div><!-- /ko --></div><div class="bots-no-padding intent-entity-list"><!-- ko if: intentEntityCollection.items().length > 0 --><ul id="intent-entity-list"data-bind="ojComponent: { component: \'ojListView\',data: $root.intentEntitiesDS,selectionMode: \'none\',item: { template: \'intent-entity-item-template\' },rootAttributes: { class: \'bots-helper-max-width\' } }"></ul><script type="text/html" id="intent-entity-item-template"><li><div class="oj-flex intent-entities-box asset-box oj-sm-align-items-center"><div class="oj-flex-item oj-sm-10"><a data-bind="click: $root.navigateToEntityLocation" href="#" ><div data-bind="ellipsisTip: entity.name"></div></a></div><!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --><div class="oj-flex-item oj-sm-2"><button tabindex="0"data-bind="ojComponent: { component: \'ojButton\',disabled: !$root.permissions().BOTS_WRITE,chroming: \'half\',display: \'icons\',icons: { start: \'bots-svgsprite-func-icon\' },label: $root.i18n.translate(\'general.delete\'),rootAttributes: { class: \'bots-no-margin right\' } },inlinesvg: { width: 16, height: 16, project: \'bots\', basename: \'func_delete_16\' },click: $root.onClickRemoveIntentEntities"></button></div><!-- /ko --></div></li></script><!-- /ko --><!-- ko if: intentEntityCollection.items().length <= 0 -->').p("bots/intents/landing/details/none.intent.entities",e,e,{}).w("<!-- /ko --><!-- ko nobind -->").p("bots/intents/dialogs/intententities.picker.popup",e,e,{}).w("<!-- /ko --></div></div>")}return t.register("bots/intents/landing/details/intent.entities",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(r),t.b(e.getBlock("no_entities"),e,{block:n},{})}function n(t,e){return e=e.shiftBlocks(r),t.p("bots/common/no_content",e,e,{noContentId:"entitiesNoContent"})}function i(t,e){return e=e.shiftBlocks(r),t.w("<!-- ko inlinesvg: { width: 96, height: 96, project: 'bots', basename: 'qual_entities_96_mono', klazz: 'intents-entities-none-icon',ariaLabel: $root.i18n.translate('intents.landing.associatedEntities.nocontent.title') } --><!-- /ko -->")}function s(t,e){return e=e.shiftBlocks(r),t.w('<div class="oj-col intents-entities-none-title">').h("i18n",e,{},{key:"intents.landing.associatedEntities.nocontent.title"},"h").w("</div>")}function o(t,e){return e=e.shiftBlocks(r),t.w('<div class="oj-col intents-entities-none-description">').h("i18n",e,{},{key:"intents.landing.associatedEntities.nocontent.desc"},"h").w("</div>")}function a(t,e){return e=e.shiftBlocks(r),t.w('<a href="#" data-bind="botsOpenInTab: { unikey: \'intents.landing.associatedEntities.nocontent.tellMeMore\' }"/>')}t.register("bots/intents/landing/details/none.associated.entities",e);var r={noContentImgSection:i,noContentTitle:s,noContentDesc:o,noContentLink:a};return e.__dustBody=!0,n.__dustBody=!0,i.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(r),t.b(e.getBlock("no_entities"),e,{block:n},{})}function n(t,e){return e=e.shiftBlocks(r),t.p("bots/common/no_content",e,e,{noContentId:"intentEntitiesNoContent"})}function i(t,e){return e=e.shiftBlocks(r),t.w("<!-- ko inlinesvg: { width: 96, height: 96, project: 'bots', basename: 'qual_entities_96_mono', klazz: 'intents-entities-none-icon',ariaLabel: $root.i18n.translate('intents.landing.intentEntities.nocontent.title') } --><!-- /ko -->")}function s(t,e){return e=e.shiftBlocks(r),t.w('<div class="oj-col intents-entities-none-title">').h("i18n",e,{},{key:"intents.landing.intentEntities.nocontent.title"},"h").w("</div>")}function o(t,e){return e=e.shiftBlocks(r),t.h("i18n",e,{},{key:"intents.landing.intentEntities.nocontent.desc"},"h")}function a(t,e){return e=e.shiftBlocks(r),t.w('<a href="#" data-bind="botsOpenInTab: { unikey: \'intents.landing.intentEntities.nocontent.tellMeMore\' }"/>')}t.register("bots/intents/landing/details/none.intent.entities",e);var r={noContentImgSection:i,noContentTitle:s,noContentDesc:o,noContentLink:a};return e.__dustBody=!0,n.__dustBody=!0,i.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(c),t.w('<div id="intents-landing-nocontent" class="intents-landing-lv bots-landing-lv oj-flex"data-bind="visible: intentCollection.items().length <= 0 && !isLoading() && !isFiltering() && !isAction()"><div class="bots-helper-max-width">').p("bots/intents/landing/none",e,e,{}).w('</div></div><div id="intents-landing" class="intents-landing-lv intents-landing-lv-content bots-landing-lv oj-flex" data-bind="visible: intentCollection.items().length > 0 || isFiltering() || isAction()"><div class="bots-helper-max-width">').p("bots/common/master.details",e,e,{masDetsIdPrefix:"intents-list",navNewButtonLabelRbKey:"intents.landing.newIntent",navNewButtonHandler:"onClickNewIntent",onNavItemSelection:"selectIntent",navItemsDataSource:"intentsDS",navFilterSearchByInputValue:"$root.intentCollection.searchBy",navSortByOptions:"sortOptionsIntents",navSortBySelectedValue:"sortByIntents",navItemIdAttribute:"id",navItemTextAttribute:"name",navDeleteButtonHandler:"$root.onClickDeleteIntent"}).w("</div>    ").p("bots/common/confirm.dialog",e,e,{dialogId:"intents-delete-dialog",titleKey:"intents.deleteIntentDialog.titleLabel",messageKey:"intents.deleteIntentDialog.confirmQuestion",messageParams:"ko.unwrap(intentToBeDeleted().name)",confirmButtonText:"intents.deleteIntentDialog.deleteLabel",confirmAction:"deleteIntent"}).w("<!-- ko nobind -->").p("bots/intents/dialogs/new.entity.dialog",e,e,{}).p("bots/common/dialog/dialog.value.synonyms",e,e,{typePrefix:"intentEntity"}).w("<!-- /ko --></div>")}function n(t,e){return e=e.shiftBlocks(c),t.p("bots/common/cta.dropdown.button",e,e,{prefix:"intent-import-export",selectAction:"$root.menuSelectMoreAction",label:"$root.i18n.translate('general.more')"}).p("bots/common/button.upload",e,e,{uploadInputTextId:"intentsUploadInputText",uploadButtonId:"intentsUploadButton",uploadButtonText:"$root.i18n.translate('intents.landing.intents')",uploadButtonKlazz:"bots-helper-visibility-hidden import-intents-hidden-width",uploadAccept:".csv",fileuploadConfig:"dataType: 'json', dragover: intentsUpload.dragover, submit: intentsUpload.submit, progress: intentsUpload.progress, success: intentsUpload.success, fail: intentsUpload.fail, done: intentsUpload.done"})}function i(t,e){return e=e.shiftBlocks(c),t.w('<!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --><li id="intends-landing-import-intents" class="oj-menu-item"data-bind="css: { \'oj-disabled\': !$root.permissions().BOTS_WRITE }"><a class="intents-menu-item" href="#" data-bind="text: $root.i18n.translate(\'intents.landing.importIntents\')"/></li><!-- /ko --><li id="intends-landing-export-intents" class="oj-menu-item"><a class="intents-menu-item" href="#" data-bind="text: $root.i18n.translate(\'intents.landing.exportIntents\')"/></li>')}function s(t,e){return e=e.shiftBlocks(c),t.w("intentsUpload.selectUploadAction")}function o(t,e){return e=e.shiftBlocks(c),t.w("intentsUpload.cancelUploadAction")}function a(t,e){return e=e.shiftBlocks(c),t.w("intentsUpload.fileName")}function r(t,e){return e=e.shiftBlocks(c),t.w("{ init: { callback: initializeIntentsUpload } }")}function l(t,e){return e=e.shiftBlocks(c),t.w('<div id="intent-paging-control" class="suite-helper-padding-top-10"data-bind="ojComponent: { component: \'ojPagingControl\',data: pager, pageSize: intentCollection.pageSize(),rootAttributes: { class: \'suite-helper-max-width\' } }"></div>')}function d(t,e){return e=e.shiftBlocks(c),t.w('<div class="oj-form oj-flex-bar bots-helper-margin-left-10 intents-mas-dets-details"><div class="oj-flex-item bots-helper-padding-right-15" data-bind="with: selectedIntent">').p("bots/intents/landing/details/description",e,e,{}).w("<!-- ko if: $root.fieldIntentType --><!-- ko if: $root.fieldIntentType()[0] === 'NLPIntent' -->").p("bots/intents/landing/details/examples",e,e,{}).w("<!-- /ko --><!-- ko if: $root.fieldIntentType()[0] === 'REGULAR_EXPRESSION' -->").p("bots/intents/landing/details/conditions",e,e,{}).w('<!-- /ko --><!-- /ko --></div><div class="oj-flex-end right-panel">').p("bots/intents/landing/details/intent.entities",e,e,{}).w("</div></div>")}t.register("bots/intents/landing/landing",e);var c={menuItems:i,selectFileUploadAction:s,cancelFileUploadAction:o,uploadFileName:a,lifecycleHookConfig:r,masDetsMoreCommands_part:n,masDetsPager_part:l,masDetsDetails_part:d};return e.__dustBody=!0,n.__dustBody=!0,i.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(l),t.b(e.getBlock("no_intents"),e,{block:n},{})}function n(t,e){return e=e.shiftBlocks(l),t.p("bots/common/no_content",e,e,{noContentId:"intentsNoContent"})}function i(t,e){return e=e.shiftBlocks(l),t.w("<!-- ko inlinesvg: { width: 96, height: 96, project: 'bots', basename: 'qual_intents_96_mono', klazz: 'suite-helper-192x192', ariaLabel: $root.i18n.translate('intents.landing.nocontent.title') } --><!-- /ko -->")}function s(t,e){return e=e.shiftBlocks(l),t.h("i18n",e,{},{key:"intents.landing.nocontent.title"},"h")}function o(t,e){return e=e.shiftBlocks(l),t.h("i18n",e,{},{key:"intents.landing.nocontent.desc"},"h")}function a(t,e){return e=e.shiftBlocks(l),t.w('<a href="#" data-bind="botsOpenInTab: { unikey: \'intents.landing.nocontent.tellMeMore\' }"/>')}function r(t,e){return e=e.shiftBlocks(l),
t.w("<!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --><button data-bind=\"ojComponent: { component: 'ojButton',disabled: !$root.permissions().BOTS_WRITE,display: 'all',icons: { start: 'bots-svgsprite-cta-icon' },label: $root.i18n.translate('intents.landing.newIntent') },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_plus_16' },click: onClickNewIntent\"class=\"bots-helper-margin-left-1 green-button\"></button><button data-bind=\"ojComponent: { component: 'ojButton',disabled: !$root.permissions().BOTS_WRITE,display: 'all',label: $root.i18n.translate('intents.landing.importIntents') },click: intentsUpload.selectUploadAction\"class=\"bots-helper-margin-left-10\"></button><!-- /ko -->")}t.register("bots/intents/landing/none",e);var l={noContentImgSection:i,noContentTitle:s,noContentDesc:o,noContentLink:a,noContentButton:r};return e.__dustBody=!0,n.__dustBody=!0,i.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,e}(dust),define("bots.templates/intents",function(){}),define("bots.collection",["mcs.js.framework/class","mcs.js.framework/dataobject","ojs/ojtable","ojs/ojtable-model","ojs/ojpagingcontrol"],function(t,e){var n=function(t){this.config=$.extend(!0,{},this.config,t),this.Init()};return oj.Object.createSubclass(n,oj.TableDataSource,"bots.Collection"),_.extend(n,{EventType:oj.TableDataSource.EventType,decodeParams:function(t){for(var e={},n=(t.split("?")[1]||"").split("&"),i=0;i<n.length;i++){var s=n[i].split("=");try{e[s[0]]=decodeURIComponent(s[1])}catch(t){e[s[0]]=s[1]}}return e},encodeParams:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];null!==i&&void 0!==i&&""!==i&&e.push(n+"="+encodeURIComponent(i))}return e.length?"?"+e.join("&"):""},getPath:function(t,e){var i={};return(e.pageSize||e.limit)&&(i.offset=e.startIndex||e.offset||0,i.limit=e.pageSize||e.limit||20),_.extend(i,_.omit(e,["limit","offset"])),t+n.encodeParams(i)}}),_.extend(n.prototype,{config:{disableFetch:!1,facade:void 0,idAttribute:"id",pageSize:20,orderBy:void 0,searchBy:void 0,filterKeyword:void 0,filterType:[],totalResults:!0,searchByThrottle:750,filterKeywordThrottle:750,filterTypeThrottle:750,dataobjectClass:void 0,extraFields:{},disableExtraFieldsFetch:!1,mode:void 0,selectors:{ojPagingControl:void 0},capabilities:{sort:null},events:{load:{name:"LOAD_X_LIST",data:{}}}},hasMore:void 0,pageSize:void 0,totalSize:void 0,startIndex:void 0,orderBy:void 0,searchBy:void 0,filterKeyword:void 0,filterType:void 0,items:void 0,compoundObjects:[],_isResetting:!1,Init:function(){n.superclass.Init.call(this),this.config.facade=this.config.facade||require("bots.facade"),this.hasMore=ko.observable(!1),this.totalSize=ko.observable(0),this.orderBy=ko.observable(this.config.orderBy),this.orderBy.extend({notify:"always"}),this.searchBy=ko.observable(this.config.searchBy),this.previousSearchBy=this.searchBy(),this.filterKeyword=ko.observable(this.config.filterKeyword),this.previousFilterKeyword=this.filterKeyword(),this.filterType=ko.observableArray(this.config.filterType),this.previousFilterType=this.filterType(),this.startIndex=ko.observable(0),this.pageSize=ko.observable(this.config.pageSize),this.items=ko.observableArray(),this.mode=this.config.mode,this.compoundObjects=[],this.size=ko.computed(_.bind(function(){return(this.items()||[]).length},this)),this.itemsRefreshedCallback=ko.unwrap(this.config.itemsRefreshedCallback),"function"!=typeof this.itemsRefreshedCallback&&(this.itemsRefreshedCallback=void 0),this.throttledSearchBy=ko.computed(this.searchBy).extend({rateLimit:this.config.searchByThrottle}),this.throttledSearchBy.subscribe(function(t){if((""!==t||(this.searchBy(void 0),void 0!==this.previousSearchBy))&&(this.previousSearchBy=t,void 0!==t)){var e=ko.unwrap(this.config.selectors.ojPagingControl);e?$(e).ojPagingControl("firstPage"):this.fetch({reset:!0})}},this),this.throttledFilterKeyword=ko.computed(this.filterKeyword).extend({rateLimit:this.config.filterKeywordThrottle}),this.throttledFilterKeyword.subscribe(function(t){if((""!==t||(this.filterKeyword(void 0),void 0!==this.previousFilterKeyword))&&(this.previousFilterKeyword=t,void 0!==t)){var e=ko.unwrap(this.config.selectors.ojPagingControl);e?$(e).ojPagingControl("firstPage"):this.fetch({reset:!0})}},this),this.throttledFilterType=ko.computed(this.filterType).extend({rateLimit:this.config.filterTypeThrottle}),this.throttledFilterType.subscribe(_.bind(function(t){if((this.previousFilterType||(t||[]).length)&&!_.isEqual(t,this.previousFilterType)){this.previousFilterType=t;var e=ko.unwrap(this.config.selectors.ojPagingControl);e?$(e).ojPagingControl("firstPage"):this.fetch({reset:!0})}},this)),this.orderBy.subscribe(_.bind(function(){this.fetch().then(_.bind(function(){this.handleEvent(n.EventType.SORT,this.orderByEvent())},this))},this)),this.extraFields={};var t=_.bind(function(){if(!this.config.disableExtraFieldsFetch){var t=ko.unwrap(this.config.selectors.ojPagingControl);t?$(t).ojPagingControl("firstPage"):this.fetch({reset:!0})}},this);for(var e in this.config.extraFields){var i=this.config.extraFields[e];this.extraFields[e]=ko.isObservable(i)?i:ko.observable(i),this.extraFields[e].subscribe(t)}this._eventHandlers=[];var s=ko.unwrap(this.config.events);for(var o in s)if("create"===o||"update"===o||"delete"===o){var a={};a[s[o].name]={data:_.bind(this.listeners[o],this)},this.config.facade.listen(a)}},findLink:function(t,e){var n=_.find(t,function(t){return t.rel===e});return n?n.href:void 0},fetch:function(t){t=t||{};var e=ko.unwrap(this.items);if(this._isResetting)return this.resolveEmptyRequest();if(void 0!==t.disableFetch&&(this.config.disableFetch=t.disableFetch,t=_.omit(t,"disableFetch")),this.config.disableFetch)return this.resolveEmptyRequest();var i={},s=this.orderByStringValue(),o=ko.unwrap(this.config.events),a=ko.unwrap(o.load),r=void 0!==t.startIndex?null===t.startIndex?0:t.startIndex:this.startIndex()||0,l=_.extend({orderBy:s,offset:r,limit:t.pageSize||this.pageSize()||this.config.pageSize,q:this.searchBy(),filterKeyword:this.filterKeyword(),filterType:this.filterType().length?this.filterType().join(","):void 0,totalResults:!!this.config.totalResults||void 0},t,a.data||{});for(var d in this.config.extraFields)l[d]=this.extraFields[d]();l=_.omit(l,"pageSize","startIndex","silent","fetchType"),i[a.name]={data:l,permission:a.permission};var c=$.Deferred();this.handleEvent(n.EventType.REQUEST,{startIndex:r});var u={promise:!0};if(this.config.facade.isVisible){var p=this.config.facade;!p.isVisible()||p.bindings&&ko.isObservable(p.bindings.isLoading)&&p.bindings.isLoading()?u.loadingSpinner=!0:u.actionSpinner=!0}return this.config.facade.notify(i,u).always(_.bind(function(i){if(i||(i={status:200,data:{hasMore:!1,items:[],links:[],limit:0,totalResults:0}}),!i.data||i.status&&(i.status<200||i.status>=300))return this.handleEvent(n.EventType.ERROR,i),t.error&&setTimeout(t.error,0),c.reject(i),this.resolveEmptyRequest();var s,o=this.findLink(i.data.links,"self");if(o){var a=o.slice(o.indexOf("?"));s=parseInt(n.decodeParams(a).offset,10)}this.hasMore(!!i.data.hasMore);var l=void 0!==t.startIndex?t.startIndex:s||0,d=[],u=[];this.totalSize(i.data.totalResults);var p;if(i.data.items)for(this.config.dataobjectClass?this.config.dataobjectClass.__static__.fromJS(i.data.items,this.items):this.items(i.data.items),this.compoundObjects.length=0,p=0;p<i.data.items.length;p++)this.compoundObjects.push(this.toSingleCompoundObject(l+p,i.data.items[p])),d.push(i.data.items[p]),u.push(i.data.items[p][this.config.idAttribute]);"loadMore"===this.mode&&r>0&&this.items([].concat(e,this.items())),this.startIndex(l);var h={data:d,keys:u,startIndex:l};c.resolve($.extend(!0,{},h)),this.itemsRefreshedCallback&&this.itemsRefreshedCallback($.extend(!0,{},h)),this.handleEvent(n.EventType.SYNC,h),t.success&&setTimeout(t.success,10),t.reset&&!this._isResetting&&(this._isResetting=!0,this.handleEvent(n.EventType.RESET,{}),this._isResetting=!1)},this)),c},setPageSize:function(t){this.pageSize(t)},at:function(t,e){var n=this.startIndex(),i=n>-1&&this.compoundObjects.length>t-n?this.compoundObjects[t-n]:null;return $.Deferred().resolve(i)},get:function(t){for(var e=this.items(),n=0;n<e.length;n++){var i=ko.unwrap(e[n]);if(i[this.config.idAttribute]===t){var s=this.toSingleCompoundObject(n,i);return $.Deferred().resolve(s)}}return $.Deferred().resolve(null)},getCapability:function(t){return this.config.capabilities[t]||null},sort:function(t){if(t&&t.key){var e=t.key;"ascending"===t.direction?e+=":asc":"descending"===t.direction&&(e+=":desc"),this.orderBy(e)}},orderByStringValue:function(){var t=this.orderBy();return Array.isArray(t)&&t.length&&(t=t[0]),t},orderByEvent:function(){var t=this.orderByStringValue().split(":"),e="none";return"asc"===t[1]?e="ascending":"desc"===t[1]&&(e="descending"),{header:t[0],direction:e}},handleEvent:function(t,e){for(var n=0;n<this._eventHandlers.length;n++){var i=this._eventHandlers[n];i.eventType===t&&i.eventHandlerFunc(e)}},on:function(t,e){if("function"==typeof e){for(var n=!1,i=0;i<this._eventHandlers.length;i++)if(this._eventHandlers[i].eventType===t&&this._eventHandlers[i].eventHandlerFunc===e){n=!0;break}n||this._eventHandlers.push({eventType:t,eventHandlerFunc:e})}},off:function(t,e){for(var n=this._eventHandlers.length-1;n>=0;n--)if(this._eventHandlers[n].eventType===t&&this._eventHandlers[n].eventHandlerFunc===e){this._eventHandlers.splice(n,1);break}},listeners:{create:function(t){var e=t.status>=200&&t.status<300||304===t.status;if(e){var i=this.items(),s=t.data||t,o=s;this.config.dataobjectClass&&(o=new this.config.dataobjectClass(o)),i.unshift(o),i.length>this.config.pageSize&&(this.length=this.config.pageSize),this.items(i),this.compoundObjects.unshift(this.toSingleCompoundObject(this.startIndex(),s)),this.compoundObjects.length>this.config.pageSize&&(this.compoundObjects.length=this.config.pageSize),this.totalSize(this.totalSize()+1),this.handleEvent(n.EventType.ADD,this.toAddRemoveChangeEventObject(this.startIndex(),s))}},update:function(t){var i=t.status>=200&&t.status<300||304===t.status;if(i){var s,o=this.items(),a=this.config.idAttribute,r=[],l=t.data||t;for(s=0;s<o.length;s++){var d,c=o[s];c instanceof e?(d=ko.isObservable(c[a])?c[a]():c[a],d===l[a]&&c.fromJS(l)):"object"==typeof c&&(d=c[a],d===l[a]&&_.extend(c,l)),r.push(c)}for(this.items(r),s=0;s<this.compoundObjects.length;s++){var u=this.compoundObjects[s];if(u.data[a]===l[a]){var p=this.startIndex()+s;this.compoundObjects[s]=this.toSingleCompoundObject(p,l),this.handleEvent(n.EventType.CHANGE,this.toAddRemoveChangeEventObject(p,l));break}}}},delete:function(t){var e=t.status>=200&&t.status<300||304===t.status;e&&this.fetch().then(_.bind(function(t){var e=this.totalSize()>0&&this.startIndex()>=0&&this.startIndex()>=this.totalSize(),n=ko.unwrap(this.config.selectors.ojPagingControl);e&&n&&_.defer(_.bind(function(){$(n).ojPagingControl("previousPage")},this))},this))}},toSingleCompoundObject:function(t,e){return{data:e,key:e[this.config.idAttribute],index:t}},toAddRemoveChangeEventObject:function(t,e){return{data:[e],keys:[e[this.config.idAttribute]],indexes:[t]}},resolveEmptyRequest:function(){return $.Deferred().resolve({data:[],keys:[],startIndex:0})}}),n}),define("bots.package.intents/model.rest",["module","bots.model.rest","bots.i18n","bots.config","bots.collection"],function(t,e,n,i,s){var o=e.__class__.extend({module:t,name:"IntentRestModel"},{__static__:{INTENT_FILE_URI:"/intents"},config:{stringifyObjects:!0,prefix:"/intents",uriParams:{botId:function(){return i.getCurrentBot().id}}},IntentRestModel:function(t){this._super(t)},createIntent:function(t,e){this.restPost(e,this.config.prefix,{data:t})},getIntents:function(t,e){var n=_.pick(t,"orderBy","offset","limit","filterType","totalResults","disableFetch","type","q","exclude");this.restGet(e,this.config.prefix,{stringifyObjects:!1,data:n})},updateIntent:function(t,e){this.restPut(e,this.config.prefix+"/"+t.id,{data:t})},deleteIntent:function(t,e){this.restDelete(e,this.config.prefix+"/"+t.id)},importIntentExamples:function(t,n){var i=new XMLHttpRequest,s=new Blob([t.intentExamples],{type:"text/csv"}),o=new FormData;require("bots.package.util/cache.xhr").forcePurgeAll(),i.open("POST",e.processUrl("/bots/{botId}/intents/import"),!0),o.append("importFile",s),i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&n({status:i.status,data:i.responseText})},i.send(o)},getExamples:function(t,e){var n=_.pick(t,"orderBy","offset","limit","filterType","totalResults","disableFetch","type","q","exclude");this.restGet(e,this.config.prefix+"/{intentId}/examples",{stringifyObjects:!1,data:n,uriParams:{intentId:t.id}})},updateExample:function(t,e){this.restPut(e,this.config.prefix+"/"+t.intentId+"/examples/"+t.example.id,{data:t.example})},deleteExample:function(t,e){this.restDelete(e,this.config.prefix+"/{intentId}/examples/{exampleId}",{uriParams:{intentId:t.intentId,exampleId:t.example.id}})},createIntentEntity:function(t,e){this.restPost(e,this.config.prefix+"/{intentId}/parameters",{data:t.intentEntity,uriParams:{intentId:t.id}})},getIntentEntities:function(t,e){var n=_.pick(t,"orderBy","offset","limit","filterType","totalResults","disableFetch","type","q","exclude");this.restGet(e,this.config.prefix+"/{intentId}/parameters",{stringifyObjects:!1,data:n,uriParams:{intentId:t.id}})},updateIntentEntity:function(t,e){this.restPut(e,this.config.prefix+"/{intentId}/parameters/{intentEntityId}",{data:t.intentEntity,uriParams:{intentId:t.intentId,intentEntityId:t.intentEntity.id}})},deleteIntentEntity:function(t,e){this.restDelete(e,this.config.prefix+"/{intentId}/parameters/{intentEntityId}",{uriParams:{intentId:t.intentId,intentEntityId:t.intentEntity.id}})}});return new o(_.extend({},e.config,{baseUrl:e.config.baseUrl+"/bots/{botId}"}))}),define("bots.package.intents/model",["module","mcs.js.framework/model.util","bots.package.intents/model.rest","moment"],function(t,e,n,i){var s=n.__class__.extend({module:t,name:"FakeRestModel"},{FakeRestModel:function(t){this._super(t)},createIntent:function(t,e){var n=this,i=_().guid(),s={id:i.toString(),name:t.name,type:t.type,description:t.description};_.delay(function(){n.getFakeBotAssets("intents").push(s),e({status:201,data:s})},this.__static__.artificialDelay)},getIntents:function(t,e){var n=this.getFakeBotAssets("intents"),i=_.map(n,function(t,e){return _.clone(t)});e({status:200,data:{items:i}})},updateIntent:function(t,e){var n=this;_.delay(function(){var s=t.id,o=_.find(n.getFakeBotAssets("intents"),function(t){return t.id===s});o&&_.extend(o,t,{modifiedOn:i().format()}),e({status:o?204:404,data:o})},this.__static__.artificialDelay)},deleteIntent:function(t,e){var n=this;_.delay(function(){var i=t.id,s=_.findIndex(n.getFakeBotAssets("intents"),function(t){return t.id===i});s>-1&&n.getFakeBotAssets("intents").splice(s,1),e({status:s>-1?204:404})},this.__static__.artificialDelay)},importIntentExamples:function(t,e){_.delay(e,this.artificialDelay,{status:400,data:void 0})},getExamples:function(t,e){var n=function(n){if(n.length&&t.q&&"string"==typeof t.q){var i=t.q.toLowerCase();n=_.filter(n,function(t){return t.sentence.toLowerCase().indexOf(i)>=0})}e({status:200,data:{items:n}})},i=_.find(this.getFakeBotAssets("intents"),function(e){return e.id===t.id});if(i.examples){var s=_.map(i.examples,function(t,e){return t});n(s)}else{i.examples={};var o={"fa54b77b-c0d2-43a2-bf3f-d07b5d8aed9d":"/botsui/19.1.5-1907122019/mock/json/examples1.json","bdcbe494-7648-487c-bf1e-8d943348e9bb":"/botsui/19.1.5-1907122019/mock/json/examples2.json"},a=o[t.id];a?this.restGet(_.bind(function(t){var e=t.data.items;e.forEach(_.bind(function(t){i.examples[t.id]=t},this)),n(e)},this),"",{url:a}):n([])}},updateExample:function(t,e){var n=_.find(this.getFakeBotAssets("intents"),function(e){return e.id===t.id}),s=n.examples[t.example.id];s&&_.extend(s,t.example,{modifiedOn:i().format()}),_.delay(e,this.artificialDelay,{status:s?204:400,data:s})},deleteExample:function(t,e){var n=_.find(this.getFakeBotAssets("intents"),function(e){return e.id===t.intentId});n.examples=_.omit(n.examples,t.example.id),_.delay(e,this.artificialDelay,{status:204})},createIntentEntity:function(t,e){var n=_().guid(),i={id:n.toString(),entity:t.intentEntity.entity,isRequired:t.intentEntity.isRequired},s=_.find(this.getFakeBotAssets("intents"),function(e){return e.id===t.id});s.intentEntities[n]=i,_.delay(e,this.artificialDelay,{status:200,data:i})},getIntentEntities:function(t,e){var n=function(t){e({status:200,data:{items:t}})},i=_.find(this.getFakeBotAssets("intents"),function(e){return e.id===t.id});if(i.intentEntities){var s=_.map(i.intentEntities,function(t,e){return t});n(s)}else{i.intentEntities={};var o={"fa54b77b-c0d2-43a2-bf3f-d07b5d8aed9d":"/botsui/19.1.5-1907122019/mock/json/intentEntities1.json","bdcbe494-7648-487c-bf1e-8d943348e9bb":"/botsui/19.1.5-1907122019/mock/json/intentEntities2.json"},a=o[t.id];a?this.restGet(_.bind(function(t){var e=t.data.items;e.forEach(_.bind(function(t){i.intentEntities[t.id]=t},this)),n(e)},this),"",{url:a}):n([])}},updateIntentEntity:function(t,e){var n=_.find(this.getFakeBotAssets("intents"),function(e){return e.id===t.intentId}),s=n.intentEntities[t.intentEntity.id];s&&_.extend(s,t.intentEntity,{modifiedOn:i().format()}),_.delay(e,this.artificialDelay,{status:s?204:400,data:s})},deleteIntentEntity:function(t,e){var n=_.find(this.getFakeBotAssets("intents"),function(e){return e.id===t.intentId});n.intentEntities=_.omit(n.intentEntities,t.intentEntity.id),_.delay(e,this.artificialDelay,{status:204})}},e.stubProxy);return new s({baseUrl:n.config.baseUrl})}),define("bots.package.intents/facade",["module","bots.facade","bots.package.intents/model"],function(t,e,n){var i=e.__class__.extend({module:t,name:"Facade"},{__static__:{globalChannels:{}},Facade:function(){this._super();this.register({CREATE_INTENT:{name:"create.intent",handler:function(t){n.createIntent(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_INTENTS:{name:"get.intents",handler:function(t){n.getIntents(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},UPDATE_INTENT:{name:"update.intent",handler:function(t){n.updateIntent(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},DELETE_INTENT:{name:"delete.intent",handler:function(t){n.deleteIntent(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},IMPORT_INTENT_EXAMPLES:{name:"import.intent.examples",handler:function(t){n.importIntentExamples(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_EXAMPLES:{name:"get.examples",handler:function(t){n.getExamples(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},UPDATE_EXAMPLE:{name:"update.example",handler:function(t){n.updateExample(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},DELETE_EXAMPLE:{name:"delete.example",handler:function(t){n.deleteExample(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},CREATE_INTENT_ENTITY:{name:"create.intent.entity",handler:function(t){n.createIntentEntity(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_INTENT_ENTITIES:{name:"get.intent.entities",handler:function(t){n.getIntentEntities(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},UPDATE_INTENT_ENTITY:{name:"update.intent.entity",handler:function(t){n.updateIntentEntity(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},DELETE_INTENT_ENTITY:{name:"delete.intent.entity",handler:function(t){n.deleteIntentEntity(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}}})}});return new i}),define("bots.package.intents/intents.enums",{IntentTypeEnum:{NATURAL_LANGUAGE:"NLPIntent",REGULAR_EXPRESSION:"REGULAR_EXPRESSION"},EntityTypeEnum:{SYSTEM:"SYSTEM",DERIVED:"DERIVED",ENUMVALUES:"ENUMVALUES",ENUMENTITIES:"ENUMENTITIES",PATTERNBASED:"PATTERNBASED",COMPOSITEBAG:"COMPOSITEBAG"}}),define("bots.package.intents/dataobject",["module","bots.i18n","mcs.js.framework/dataobject","bots.package.intents/intents.enums"],function(t,e,n,i){var s=n.extend({module:t,name:"IntentDataObject"},{IntentDataObject:function(t){this.id=ko.observable(),this.name=ko.observable(),this.conversationName=ko.observable(),this.type=ko.observable(),this.description=ko.observable(),this._super(t)},fromJS:function(t,e){this._super(t,e),this.idAttr=this.id()}}),o=n.extend({module:t,name:"ExampleDataObject"},{ExampleDataObject:function(t){this.id=ko.observable(),this.sentence=ko.observable(),this._super(t)},toUpdateJS:function(){var t=this.toJS(),e=_.pick(t,["id","sentence"]);return e},fromJS:function(t,e){this._super(t,e),this.idAttr=this.id()}}),a=n.extend({module:t,name:"IntentEntityDataObject"},{IntentEntityDataObject:function(t){this.id=ko.observable(),this.name=ko.observable(),this.entity=void 0,this.isRequired=ko.observable(),this._super(t)},fromJS:function(t,e){this._super(_.omit(t,"entity"),e),t&&t.entity&&(this.entity=new r(t.entity)),this.idAttr=this.id()},toUpdateJS:function(){var t=this.toJS(),e=_.pick(t,["id","intent","required"]);return e}}),r=n.extend({module:t,name:"SimpleEntityDataObject"},{SimpleEntityDataObject:function(t){this.id=ko.observable(),this.name=ko.observable(),this.description=ko.observable(),this.type=ko.observable(),this._super(t)},fromJS:function(t,e){this._super(_.pick(t,"id","name","description","type"),e),this.idAttr=this.id(),this.typeIcon=t.type===i.EntityTypeEnum.SYSTEM?"qual_system_16_mono":"qual_custom_16_mono"}});return{IntentDataObject:s,ExampleDataObject:o,IntentEntityDataObject:a,SimpleEntityDataObject:r}}),define("bots.package.intents/new.entity",["module","bots.package.view/dialog","bots.i18n","bots.package.shell/validators","bots.package.view/dialog.value.synonyms","bots.package.intents/intents.enums"],function(t,e,n,i,s,o){var a,r=e.extend({module:t,name:"NewEntityPopup"},{config:{type:"ojDialog",valueSynonymsPopupElement:"#intentEntity-value-synonyms-dialog"},bindings:{i18n:n,botsValidators:i,fieldEntityName:{func:ko.observable},fieldEntityDescription:{func:ko.observable},fieldEntityType:{func:ko.observable},fieldEntityParent:{func:ko.observable},fieldEntityRule:{func:ko.observableArray,args:[[]]},fieldEntityPhrases:{func:ko.observableArray},fieldEntityEnumValues:{func:ko.observableArray},fieldEntityEnumEntities:{func:ko.observableArray},fieldCompositeBag:{func:ko.observableArray},fieldPatternExpression:{func:ko.observable},entitiesForDerivation:{func:ko.observableArray},entitiesForEnumEntity:{func:ko.observableArray},entitiesForCompositeBag:{func:ko.observableArray},rulesList:{func:ko.observableArray},uniqueNameValidator:{func:function(){var t=this;return{validate:function(e,i){if(!t.config.parentView.validateEntityName(e))throw new oj.ValidatorError(n.translate("general.validator.summary.duplicateNameFormatIncorrect"),n.translate("general.validator.detail.duplicateName"))}}}},valueSynonymDS:{func:ko.computed,args:[function(){var t=this.bindings.fieldEntityEnumValues()||[];return new oj.ArrayTableDataSource(t,{idAttribute:"canonicalName"})},this,{deferEvaluation:!0}]},valueSynonymsPopup:{func:function(){return new s({baseElement:this.config.valueSynonymsPopupElement,contentElement:this.config.valueSynonymsPopupElement,parentView:this,isSubView:!0})}},onClickAddValue:function(t,e){var n=this;this.bindings.valueSynonymsPopup.open({resetFieldsOnOpen:!0},{duplicateCheckList:this.bindings.fieldEntityEnumValues()}).done(function(t){n.bindings.fieldEntityEnumValues.push(t)})},onClickRemoveValueSynonymsRow:function(t,e){this.bindings.fieldEntityEnumValues.remove(function(e){return ko.unwrap(e.canonicalName)===ko.unwrap(t.canonicalName)})},onClickEditValueSynonymsRow:function(t,e){var n=this,i=this.bindings.fieldEntityEnumValues(),s=_.filter(i,function(e){return e.canonicalName!==t.canonicalName});this.bindings.valueSynonymsPopup.open({resetFieldsOnOpen:!1},{data:t,duplicateCheckList:s}).done(function(e){var s=_.find(i,function(e){return e.canonicalName===t.canonicalName});_.extend(s,e),n.bindings.fieldEntityEnumValues(i)})},createEntity:function(){this.deps.uiComponents.validateFields($(this.config.baseElement),!1,!1,!1)&&(this.enableDefaultButton(!1),this._createEntity())},formatArray:function(t){return t?t.join(", "):t}},NewEntityPopup:function(t){this._super(t)},resetFields:function(t){this._super(t),this.bindings.fieldEntityName(""),this.bindings.fieldEntityDescription(""),this.bindings.fieldEntityType([]),this.bindings.fieldEntityParent([]),this.bindings.fieldEntityRule([]),this.bindings.fieldEntityPhrases([]),this.bindings.fieldEntityEnumValues([]),this.bindings.fieldPatternExpression(""),this.bindings.entitiesForDerivation([])},open:function(){return this._super(),a=$.Deferred(),this.bindings.fieldEntityType([o.EntityTypeEnum.ENUMVALUES]),this._setupParameters(),a},_setupParameters:function(){var t=this.config.parentView.getEntityParameters();this.bindings.entitiesForDerivation(t.entitiesFD),this.bindings.entitiesForEnumEntity(t.entitiesForEnumEntity),this.bindings.entitiesForCompositeBag(t.entitiesForCompositeBag),this.bindings.rulesList(this.config.parentView.bindings.rulesList())},_getEntityDataToSave:function(){var t=this,e={name:this.bindings.fieldEntityName(),type:this.bindings.fieldEntityType()[0],description:this.bindings.fieldEntityDescription()||""};switch(e.type){case o.EntityTypeEnum.ENUMVALUES:e.enumValues=this.bindings.fieldEntityEnumValues();break;case o.EntityTypeEnum.ENUMENTITIES:var n=_.map(this.bindings.fieldEntityEnumEntities(),function(t){return{canonicalName:t}});e.enumValues=n;break;case o.EntityTypeEnum.DERIVED:var i=_.find(this.bindings.entitiesForDerivation(),function(e){return e.value===t.bindings.fieldEntityParent()[0]});e.parentEntity={id:i.id};break;case o.EntityTypeEnum.PATTERNBASED:e.patternExpression=this.bindings.fieldPatternExpression();break;case o.EntityTypeEnum.COMPOSITEBAG:var s=_.map(this.bindings.fieldCompositeBag(),function(t){return{canonicalName:t}});e.enumValues=s}return e},_createEntity:function(){var t=this._getEntityDataToSave();this.notify({CREATE_ENTITY:{data:t}},{actionSpinner:!0}).always(_.bind(function(e){e.status>201?(this.deps.messaging.showI18nError(e,"entities.errors.failedCreate"),a.reject(e)):(t.type===o.EntityTypeEnum.DERIVED&&this.bindings.fieldEntityRule().length&&this.bindings.fieldEntityPhrases().length&&this._createNewEntityRuleParam(e.data.id),a.resolve(e)),this.resetFields(),this.bindings.fieldEntityName(""),this.close(),a=void 0},this))},_createNewEntityRuleParam:function(t){var e=this,n=this.bindings.fieldEntityPhrases().join(","),i={rule:{id:this.bindings.fieldEntityRule()[0]},value:n||"",entityId:t};return this.notify({CREATE_ENTITY_RULE_PARAM:{data:i}},{actionSpinner:!0}).always(_.bind(function(t){t&&t.status>204&&403!==t.status&&412!==t.status&&e.deps.messaging.showI18nError(t,"entities.errors.editEntity")},this))}});return r}),define("bots.package.intents/example.association.helper",["module"],function(t){var e=Class.extend({module:t,name:"ExampleAssociationHelper"},{ExampleAssociationHelper:function(){},getSelectedTextWordPos:function(t){var e=window.getSelection(),n=e.getRangeAt(0),i=e.toString().trim(),s=n.startOffset||t.indexOf(i),o={startPosition:0,endPosition:0};return-1!==s&&(o.startPosition=t.substring(0,s).split(" ").length,o.endPosition=o.startPosition+i.split(" ").length-1),o},getMarkedSentence:function(t,e){var n=t.split(" ");return e.forEach(function(t){var e=ko.unwrap(t.startPosition)-1,i=ko.unwrap(t.endPosition)-1;e===i?n[e]="`"+n[e]+"`":(n[e]="`"+n[e],n[i]=n[i]+"`")}),t=n.join(" ")},getKeywordFromSentence:function(t,e){var n=t.split(" "),i=ko.unwrap(e.startPosition)-1,s=ko.unwrap(e.endPosition),o=n.slice(i,s).join(" ");return o}});return new e}),define("bots.package.intents/router",["module","bots.router"],function(t,e){var n=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"intents",routes:{},routeEvents:{intents:{route:"intents",dom:"#bot-details-tab-intents",template:"bots/intents/landing/landing",container:"#bot-details-tab-intents"}}},Router:function(t){this._super(t)}});return new n({defaultRoute:"intents"})}),define("bots.package.intents/view.landing",["module","suite.package.util/messaging","bots.package.view/view","bots.package.view/view.assetcollection","bots.i18n","bots.collection","bots.config","bots.facade","bots.model.rest","bots.router","bots.package.shell/validators","bots.package.util/fileupload","bots.package.intents/router","bots.package.intents/facade","bots.package.intents/model","bots.package.intents/dataobject","bots.package.intents/intents.enums","bots.package.intents/new.entity","bots.package.intents/example.association.helper"],function(t,e,n,i,s,o,a,r,l,d,c,u,p,h,f,m,b,g,E){var y=i.extend({module:t,name:"IntentsLandingView"},{__static__:{intentSuffixId:1,emptyExampleObj:new m.ExampleDataObject,INTENT_PREFIX:s.translate("intents.landing.newIntent"),EXAMPLE_UPLOAD_FILE_PREFIX:"idExamplesFile",ID_NEW_ENTITY_MENUITEM:"ID_NEW_ENTITY_MENUITEM",HEADERS_HEIGHT:114,ID_IMPORT_INTENT_MENUITEM:"intends-landing-import-intents",ID_EXPORT_INTENT_MENUITEM:"intends-landing-export-intents",STYLE_EXAMPLE_EDIT_MODE:"examples-edit-mode"},config:{facade:h,dataObjectClass:m.IntentDataObject},sortOptions:{nameAsc:{field:"sentence",label:s.translate("general.sort.asc"),direction:"asc"},nameDesc:{field:"sentence",label:s.translate("general.sort.desc"),direction:"desc"}},sortOptionsIntents:{nameAsc:{field:"name",label:s.translate("general.sort.nameAsc"),direction:"asc"},nameDesc:{field:"name",label:s.translate("general.sort.nameDesc"),direction:"desc"},createdOnAsc:{field:"createdOn",label:s.translate("general.sort.createdAsc"),direction:"asc"},createdOnDesc:{field:"createdOn",label:s.translate("general.sort.createdDesc"),direction:"desc"},updatedAtAsc:{field:"updatedOn",label:s.translate("general.sort.lastUpdateAsc"),direction:"asc"},updatedAtDesc:{field:"updatedOn",label:s.translate("general.sort.lastUpdateDesc"),direction:"desc"}},deps:{i18n:s,facade:h,router:p},bindings:{i18n:s,botsValidators:c,sortOptions:{func:function(){return ko.observableArray(_.chain(this.sortOptions).map(function(t,e){return{value:e,label:t.label}}).sortBy(function(t){return t.label}).value())}},sortBy:{func:ko.observable},sortOptionsIntents:{func:function(){return ko.observableArray(_.chain(this.sortOptionsIntents).map(function(t,e){return{value:e,label:t.label}}).sortBy(function(t){return t.label}).value())}},sortByIntents:{func:ko.observable},intentCollection:{func:function(){return this.bindings.assets=new o({facade:this,idAttribute:"id",totalResults:!0,dataobjectClass:m.IntentDataObject,orderBy:"name:asc",disableFetch:!1,filterTypeThrottle:751,pageSize:20,selectors:{ojPagingControl:"#intent-paging-control"},events:{create:{name:"CREATE_INTENT"},load:{name:"LOAD_INTENTS"},delete:{name:"DELETE_INTENT"}},itemsRefreshedCallback:_.bind(function(t){var e=!1;if(this.bindings.intentCollection.searchBy())e=!0;else{var n=ko.unwrap(this.bindings.selectedIntent().name);e=!_.find(this.bindings.intentCollection.items(),function(t){return ko.unwrap(t.name)===n})}if(e){var i=_.first(this.bindings.intentCollection.items());i&&this.bindings.selectedIntent(i)}},this)}),this.bindings.assets}},intentsDS:{func:ko.computed,args:[function(){return new oj.ArrayTableDataSource(this.bindings.intentCollection.items(),{idAttribute:"idAttr"})},this,{deferEvaluation:!0}]},pager:{func:function(){return new oj.PagingTableDataSource(this.bindings.intentCollection)}},intentUniqueNameValidator:{func:function(){return{validate:_.bind(function(t){var e=ko.unwrap(this.bindings.selectedIntent().name),n=e.toUpperCase()!==t.toUpperCase()&&!!this._findIntentFromCollection("name",t);if(n)throw new oj.ValidatorError(s.translate("general.validator.summary.duplicateNameFormatIncorrect"),s.translate("general.validator.detail.duplicateName"))},this)}}},intentUniqueConversationNameValidator:{func:function(){return{validate:_.bind(function(t){var e=ko.unwrap(this.bindings.selectedIntent().conversationName),n=e.toUpperCase()!==t.toUpperCase()&&!!this._findIntentFromCollection("conversationName",t);
if(n)throw new oj.ValidatorError(s.translate("general.validator.summary.duplicateNameFormatIncorrect"),s.translate("general.validator.detail.duplicateName"))},this)}}},selectedIntent:{func:function(){return this.bindings.selectedAsset=ko.observable(this.buildDataObject()),this.bindings.selectedAsset}},selectIntent:function(t,e){var n=e.value&&ko.unwrap(e.value);if("selection"===e.option&&n){var i=this._findIntentFromCollection("id",n);this.bindings.selectedIntent(i)}},getNewEntityMenuId:function(){return this.__static__.ID_NEW_ENTITY_MENUITEM},onClickNewIntent:function(){var t=this._getNextDefaultIntentName();this.notify({CREATE_INTENT:{data:{name:t,type:b.IntentTypeEnum.NATURAL_LANGUAGE,description:""}}},{actionSpinner:!0,autoSave:"intents.messages.createIntentProgress"}).always(_.bind(function(t){t.status>204?e.showI18nError(t,"intents.errors.failedCreate"):this._sendBotTrainingNeededEvent("CREATE_INTENT")},this))},intentToBeDeleted:{func:ko.observable,args:[{}]},onClickDeleteIntent:function(t,e){this.bindings.intentToBeDeleted(t),$("#intents-delete-dialog").ojDialog("open")},deleteIntent:function(){var t=ko.unwrap(this.bindings.intentToBeDeleted().id),n=ko.unwrap(this.bindings.intentToBeDeleted().name);this.bindings.intentToBeDeleted({}),this._resetCurrentIntentId(),$("#intents-delete-dialog").ojDialog("close"),this.notify({DELETE_INTENT:{data:{id:t}}},{actionSpinner:!0}).always(_.bind(function(t){204===t.status?(this._sendBotTrainingNeededEvent("DELETE_INTENT"),e.showConfirmation(s.translate("intents.messages.success.deleteIntent",n))):e.showI18nError(t,"intents.errors.failedDelete")},this))},fieldIntentName:{func:ko.observable},fieldIntentConversationName:{func:ko.observable},fieldIntentDescription:{func:ko.observable},fieldIntentType:{func:ko.observable},fieldIntentExamples:{func:ko.observable},exampleEditValue:{func:ko.observable},exampleListSelectionMode:{func:ko.observable,args:["multiple"]},intentEntityCollection:{func:function(){return new o({facade:this,pageSize:10,idAttribute:"id",totalResults:!0,dataobjectClass:m.IntentEntityDataObject,orderBy:"name:asc",mode:"loadMore",disableFetch:!1,events:{create:{name:"CREATE_INTENT_ENTITY"},load:{name:"LOAD_INTENT_ENTITIES"},update:{name:"UPDATE_INTENT_ENTITY"},delete:{name:"DELETE_INTENT_ENTITY"}}})}},exampleCollection:{func:function(){return new o({facade:this,pageSize:20,idAttribute:"id",totalResults:!0,dataobjectClass:m.ExampleDataObject,orderBy:"sentence:asc",disableFetch:!0,selectors:{ojPagingControl:this.config.examplesPagingElement},events:{load:{name:"LOAD_EXAMPLES"}}})}},examplesDS:{func:ko.computed,args:[function(){return new oj.ArrayTableDataSource(this.bindings.exampleCollection.items(),{idAttribute:"idAttr"})},this,{deferEvaluation:!0}]},examplesPager:{func:function(){return new oj.PagingTableDataSource(this.bindings.exampleCollection)}},intentEntitiesDS:{func:ko.computed,args:[function(){return new oj.ArrayTableDataSource(this.bindings.intentEntityCollection.items()||[],{idAttribute:"idAttr"})},this,{deferEvaluation:!0}]},hasAnyExampleToShowInUI:function(){return this.bindings.exampleCollection.items().length>0||this.bindings.exampleCollection.searchBy()},rulesList:{func:ko.observableArray},onNewExampleEntered:function(t){this._addExamples(t)},onClickRemoveExample:function(t,n){this.notify({DELETE_EXAMPLE:{data:{intentId:ko.unwrap(this.bindings.selectedIntent().id),example:{id:ko.unwrap(t.id)}}}},{actionSpinner:!0}).always(_.bind(function(t){204===t.status?(e.showConfirmation(s.translate("intents.messages.success.deleteExample")),this._sendBotTrainingNeededEvent("DELETE_EXAMPLE")):e.showI18nError(t,"intents.errors.failedDelete")},this))},onClickEditExample:function(t,e){var n=$(e.currentTarget.parentElement);this._closeEditExampleItem(),this._unSubscribeEditExample(),this.bindings.exampleEditValue(ko.unwrap(t.sentence)),this._exampleEditId=ko.unwrap(t.id),this._subscribeEditExample(),this.bindings.exampleListSelectionMode("none"),n.hasClass(this.__static__.STYLE_EXAMPLE_EDIT_MODE)||n.addClass(this.__static__.STYLE_EXAMPLE_EDIT_MODE),_.defer(function(){n.find(".oj-inputtext-input").select()}),this._editableExampleItem=n,this._editExampleCancelled=!1},onCancelEditExample:function(t,e){this._editExampleCancelled=!0,this._closeEditExampleItem()},onKeyDownHandleEscape:function(t,e){var n=e.which?e.which:e.keyCode;return n!==$.ui.keyCode.ESCAPE||(this.bindings.onCancelEditExample(),!1)},entityCollection:{func:function(){return new o({facade:this,idAttribute:"id",totalResults:!0,dataobjectClass:m.SimpleEntityDataObject,orderBy:"name:asc",disableFetch:!0,events:{create:{name:"CREATE_ENTITY"},load:{name:"LOAD_ENTITIES",data:{}}}})}},entitiesThatCanAdd:{func:ko.computed,args:[function(){var t=this.bindings.entityCollection.items(),e=this.bindings.intentEntityCollection.items(),n=_.filter(t,function(t){return!_.find(e,function(e){var n=ko.unwrap(e.entity);return ko.unwrap(n.id)===ko.unwrap(t.id)})});return _.sortBy(n,function(t){return ko.unwrap(t.name).toUpperCase()})},this,{deferEvaluation:!0}]},entitiesThatCanAddDS:{func:ko.computed,args:[function(){return new oj.ArrayTableDataSource(this.bindings.entitiesThatCanAdd,{idAttribute:"idAttr"})},this,{deferEvaluation:!0}]},entityIdSuffix:"_ENTITY_MI",intentEntitiesPickerPopup:{func:function(){return new n({isSubView:!0,baseElement:this.config.intentEntitiesPickerPopupElement,contentElement:this.config.intentEntitiesPickerPopupElement,lightweight:!0,notBotCentric:!0,parentView:!0})}},newEntityPopup:{func:function(){return new g({baseElement:this.config.createEntityPopupElement,contentElement:this.config.createEntityPopupElement,parentView:this,isSubView:!0})}},beforeCloseIntentEntityDropDown:function(){this.bindings.entityCollection.searchBy()&&this.bindings.entityCollection.searchBy("")},onAssetTypeIconProvider:function(t){return{basename:t.typeIcon,viewBoxWidth:16,viewBoxHeight:16}},menuEnititySelect:function(t,e){this._menuEnititySelect(t,e,this.bindings.entityIdSuffix)},popupIntentEnitityNew:function(t,e){this._associateEntityWithThisIntent(null,null,!0)},popupIntentEnititySelect:function(t){var e=_.first(t.value),n=$(_.first(t.items)).text();this._associateEntityWithThisIntent(n,e,!1)},menuSelectMoreAction:function(t,e){this._menuSelectMoreAction(t,e)},onClickRemoveIntentEntities:function(t){this.notify({DELETE_INTENT_ENTITY:{data:{intentId:ko.unwrap(this.bindings.selectedIntent().id),intentEntity:{id:ko.unwrap(t.id)}}}},{actionSpinner:!0,autoSave:!0}).always(_.bind(function(n){204===n.status?e.showConfirmation(s.translate("intents.messages.success.deleteIntentEntity",ko.unwrap(t.name))):e.showI18nError(n,"intents.errors.failedDelete")},this))},navigateToEntityLocation:function(t){if(t&&t.entity){var e=ko.unwrap(t.entity);d.navigate("bot/entities/"+encodeURIComponent(ko.unwrap(e.name)),{trigger:!0})}},initializeIntentsUpload:function(){this.bindings.intentsUpload.invoke("option","url",l.processUrl("/bots/{botId}/intents/import"))},intentsUpload:{func:function(){var e=this,n=u.extend({module:t,name:"IntentsFileUpload"},{prefix:"intents",IntentsFileUpload:function(t){this._super(t)},fail:function(t,n){this.init();var i=n.xhr();if(400===i.status||500===i.status){var s=e.deps.messaging.lookupI18nError(i,"intents.errors.importIntents");e.deps.messaging.showError(s.message)}else e.deps.messaging.showI18nError(t,"intents.errors.importIntents")},done:function(t,n){this.init();var i=n.xhr();200===i.status&&(e.deps.messaging.showConfirmation(e.deps.i18n.translate("intents.messages.success.importIntents")),e.notify({BOTS_INTENTS_MODIFIED:{data:{}}}))}});return new n({actionSpinner:!0})}},onClickTryOutIntents:function(){this.notify({OPEN_SLIDE_OUT_TESTER:{data:{selectTabOrdinal:0}}})}},_currentIntentId:void 0,_exampleEditId:void 0,_editExampleSubscription:void 0,_editableExampleItem:void 0,_editExampleCancelled:!1,_intentsLoaded:!1,_intentNameToBeSelected:"",_exampleToBeAdded:"",selectIntentWithName:function(t){var n=this,i=function(t){var e=_.find(n.bindings.intentCollection.items(),function(e){return ko.unwrap(e.name).toUpperCase()===t.toUpperCase()});return e&&n.bindings.selectedIntent(e),!!e};this._intentsLoaded?i(t)||(e.showWarning(s.translate("intents.messages.warning.filteredResult",t)),this.bindings.intentCollection.searchBy(t)):(eventHandler=function(){var a=i(t);n.bindings.intentCollection.off(o.EventType.SYNC,eventHandler),a||(e.showWarning(s.translate("intents.messages.warning.filteredResult",t)),n.bindings.intentCollection.searchBy(t))},this.bindings.intentCollection.on(o.EventType.SYNC,eventHandler))},_menuEnititySelect:function(t,e,n){var i=$(e.item).attr("id"),s=$(e.item).attr("entityId"),o=i.replace(n,""),a=o===this.bindings.getNewEntityMenuId();this._associateEntityWithThisIntent(o,s,a)},_menuSelectMoreAction:function(t,e){var n=$(e.item).attr("id");switch(n){case this.__static__.ID_IMPORT_INTENT_MENUITEM:this._importIntentFile();break;case this.__static__.ID_EXPORT_INTENT_MENUITEM:this._downloadIntentFile()}},_importIntentFile:function(){this.bindings.intentsUpload.selectUploadAction()},_downloadIntentFile:function(){this.notify({EXPORT_INTENTS:{data:{name:s.translate("intents.landing.intents")}}},{actionSpinner:!0}).always(_.bind(function(t){t.status>200&&this.deps.messaging.showI18nError(t,"bots.bot.errors.exportIntents")},this))},_resetCurrentIntentId:function(){this._currentIntentId=void 0,this.bindings.exampleCollection.config.disableFetch=!0},_findIntentFromCollection:function(t,e){return _.find(this.bindings.intentCollection.items(),function(n){return ko.unwrap(n[t])===e})},_associateEntityWithThisIntent:function(t,n,i){var s=_.bind(function(t,n,i){this.notify({CREATE_INTENT_ENTITY:{data:{id:ko.unwrap(this.bindings.selectedIntent().id),intentEntity:{name:t,entity:{id:n,name:t},isRequired:!0}}}},{actionSpinner:!0,autoSave:!i}).always(_.bind(function(t){t.status>204&&e.showI18nError(t,"intents.errors.failedCreate")},this))},this);i?this.bindings.newEntityPopup.open().done(function(t){s(t.data.name,t.data.id,!0)}):s(t,n)},_updateExample:function(t,n){var i={id:n,sentence:t};return this.notify({UPDATE_EXAMPLE:{data:{intentId:ko.unwrap(this.bindings.selectedIntent().id),example:i}}},{actionSpinner:!0,autoSave:!0}).always(_.bind(function(t){t&&t.status>204&&403!==t.status&&412!==t.status&&e.showI18nError(t,"intents.errors.editExample")},this))},_subscribeEditExample:function(){var t=this;this._editExampleSubscription=this.bindings.exampleEditValue.subscribe(function(e){var n=t._exampleEditId;setTimeout(function(){t._editExampleCancelled||(t._updateExample(e,n),t._closeEditExampleItem())},250)})},_unSubscribeEditExample:function(){this._editExampleSubscription&&(this._editExampleSubscription.dispose(),this._editExampleSubscription=void 0)},_closeEditExampleItem:function(){var t=this._editableExampleItem;this._exampleEditId=void 0,this.bindings.exampleListSelectionMode("multiple"),t&&t.hasClass(this.__static__.STYLE_EXAMPLE_EDIT_MODE)&&(t.removeClass(this.__static__.STYLE_EXAMPLE_EDIT_MODE),this._editableExampleItem=void 0)},_getNextDefaultIntentName:function(){var t,e;do t=this.__static__.INTENT_PREFIX+this.__static__.intentSuffixId,this.__static__.intentSuffixId++,e=this._findIntentFromCollection("name",t);while(e);return t},_updateIntent:function(t){return this.notify({UPDATE_INTENT:{data:_.extend({id:ko.unwrap(this.bindings.selectedIntent().id)},t)}},{actionSpinner:!0,autoSave:!0}).always(_.bind(function(t){t&&t.status>204&&403!==t.status&&412!==t.status?e.showI18nError(t,"intents.errors.editIntent"):this._sendBotTrainingNeededEvent("UPDATE_INTENT")},this))},_addExamples:function(t){var n,i,s;if(t&&(n=t.match(/[^\r\n]+/g))){if(1===n.length)i={ADD_NEW_EXAMPLES:{data:{botId:a.getCurrentBot().id,id:ko.unwrap(this.bindings.selectedIntent().id),examples:{sentence:n[0]}}}};else{var o=["query,topIntent"];_.each(n,_.bind(function(t){o.push(t+","+ko.unwrap(this.bindings.selectedIntent().name))},this)),i={IMPORT_INTENT_EXAMPLES:{data:{intentExamples:o.join("\n")}}}}s=this.bindings.hasAnyExampleToShowInUI(),this.notify(i,{actionSpinner:!0,autoSave:!0}).always(_.bind(function(t){t&&t.status>204&&403!==t.status&&412!==t.status?e.showI18nError(t,"intents.errors.updateExamples"):(this.bindings.fieldIntentExamples(""),s||_.delay(function(){$("#intents-settings-example-edit").focus()},500)),this._exampleToBeAdded=""},this))}},_sortExamples:function(){var t=_.first(this.bindings.sortBy()),e=this.sortOptions[t];this.bindings.exampleCollection.orderBy(e.field+":"+e.direction+(e.extra||""))},_sortIntents:function(){var t=_.first(this.bindings.sortByIntents()),e=this.sortOptionsIntents[t];this.bindings.intentCollection.orderBy(e.field+":"+e.direction)},_disposeSubscriptions:function(){_.each(this.subscriptions,function(t){t.dispose()}),this.subscriptions=[]},_setDataToBindingFields:function(t){this.bindings.fieldIntentName(ko.unwrap(t.name)),this.bindings.fieldIntentConversationName(ko.unwrap(t.conversationName)),this.bindings.fieldIntentDescription(ko.unwrap(t.description));var e=ko.unwrap(t.type);this.bindings.fieldIntentType([e?e:b.IntentTypeEnum.NATURAL_LANGUAGE])},_subscribeIntentFields:function(){var t=this;this.subscriptions.push(this.bindings.fieldIntentName.subscribe(function(e){t._updateIntent({name:e})})),this.subscriptions.push(this.bindings.fieldIntentConversationName.subscribe(function(e){t._updateIntent({conversationName:e})})),this.subscriptions.push(this.bindings.fieldIntentDescription.subscribe(function(e){t._updateIntent({description:e})})),this.subscriptions.push(this.bindings.fieldIntentType.subscribe(function(e){t._updateIntent({type:e[0]})})),this.subscriptions.push(this.bindings.fieldIntentExamples.subscribe(function(e){e&&t._exampleToBeAdded!==e&&(t._exampleToBeAdded=e,t.bindings.onNewExampleEntered(e))}))},validateEntityName:function(t){return!_.some(this.bindings.entityCollection.items(),function(e){return ko.unwrap(e.name)===t})},_synchSelectedItem:function(t){if(t){var e=this;_.defer(function(){$(e.config.navListElement).ojNavigationList("option","selection",e._currentIntentId)})}},_loadRules:function(){var t=$.Deferred();return this.notify({LOAD_RULES:{}},{loadingSpinner:!0}).always(_.bind(function(n){if(200===n.status){var i=[];_.each(n.data.items,function(t){i.push({value:t.id,label:s.translate("entities.landing.configuration.rules."+t.name)})}),this.bindings.rulesList(i)}else e.showI18nError(n,"entities.errors.failedRuleLoad");t.resolve(n)},this)),t},getEntityParameters:function(){var t,e=this.bindings.entityCollection.items(),n=[],i=[],s=[];return _.each(e,function(e){var o=ko.unwrap(e.name),a=ko.unwrap(e.id),r={value:o,label:o,id:a};t=ko.unwrap(e.type),t!==b.EntityTypeEnum.COMPOSITEBAG&&(s.push(r),t!==b.EntityTypeEnum.DERIVED&&(n.push(r),t!==b.EntityTypeEnum.ENUMENTITIES&&i.push(r)))}),{entitiesFD:n,entitiesForEnumEntity:i,entitiesForCompositeBag:s}},IntentsLandingView:function(t){this._super(t)},buildOnRender:function(){var t=this,e=this._super();return _.extend(e,{SUB_ROUTE_DISPLAY:_.bind(function(n){this.__fqclassname__.indexOf(n.subPackage)!==-1&&(this._intentNameToBeSelected=n.extraParams&&n.extraParams.length?n.extraParams[0]:"",_.defer(function(){t._intentNameToBeSelected&&t.selectIntentWithName(t._intentNameToBeSelected)})),e.ROUTE_DISPLAY(n)},this)})},loadModule:function(t){this._resetCurrentIntentId(),this._super(t)&&(this.bindings.entityCollection.fetch({disableFetch:!1}),this._loadRules(),this.bindings.initializeIntentsUpload())},fetchAssets:function(t){this._intentsLoaded=!1,this._super(t)},initModule:function(t){return!!this._super(t)&&void this.listen({CREATE_INTENT:_.bind(function(t){var e=t&&t.data&&t.data.id;this.bindings.selectedIntent(this._findIntentFromCollection("id",e)),_.defer(_.bind(function(){$("#intents-edit-intent-name").select()},this))},this),UPDATE_INTENT:_.bind(function(t){var e=this._findIntentFromCollection("id",t.data.id);e.fromJS(t.data)},this),BOTS_INTENTS_MODIFIED:_.bind(function(t){this._resetCurrentIntentId(),this.bindings.intentCollection.fetch()},this),LOAD_INTENTS:_.bind(function(t){var e=this;_.defer(function(){e._intentsLoaded=!0})},this),IMPORT_INTENT_EXAMPLES:_.bind(function(t){this._fetchExampleCollection(),this._sendBotTrainingNeededEvent("IMPORT_INTENT_EXAMPLES")},this),ADD_NEW_EXAMPLES:_.bind(function(t){this._fetchExampleCollection(),this._sendBotTrainingNeededEvent("ADD_NEW_EXAMPLES")},this),UPDATE_EXAMPLE:_.bind(function(t){this._fetchExampleCollection(),this._sendBotTrainingNeededEvent("UPDATE_EXAMPLE")},this),DELETE_EXAMPLE:_.bind(function(t){this._fetchExampleCollection(),this._sendBotTrainingNeededEvent("DELETE_EXAMPLE")},this),BOT_SELECT:_.bind(function(t){this.__static__.intentSuffixId=1},this)})},_fetchExampleCollection:function(t){this.bindings.exampleCollection.fetch(t||{})},renderView:function(t){this._super(t)},bindView:function(t){this._super(t),_.extend(this.bindings.intentEntitiesPickerPopup.bindings,_.pick(this.bindings,"popupIntentEnititySelect","entitiesThatCanAddDS","onAssetTypeIconProvider","entityCollection","popupIntentEnitityNew","beforeCloseIntentEntityDropDown")),this.bindings.selectedIntent.subscribe(_.bind(function(t){var e=ko.unwrap(t.id);return this._currentIntentId===e?void this._synchSelectedItem(e):(this._currentIntentId=e,this._synchSelectedItem(e),void(this.isVisible()&&(this._disposeSubscriptions(),this._setDataToBindingFields(t),this._subscribeIntentFields(),e&&(this.bindings.exampleCollection.config.events.load.data={id:e},this.bindings.exampleCollection.config.disableFetch=!0,this.bindings.examplesPager.setPage(0).then(_.bind(function(){this._fetchExampleCollection({disableFetch:!1,startIndex:0})},this)),this.bindings.intentEntityCollection.config.events.load.data={id:e},this.bindings.intentEntityCollection.fetch({disableFetch:!1})))))},this)),this.bindings.sortBy.subscribe(this._sortExamples,this),this.bindings.sortByIntents.subscribe(this._sortIntents,this)},_sendBotTrainingNeededEvent:function(t){r.notify({BOT_TRAINING_NEEDED:{data:{id:a.getCurrentBot().id,cause:t}}})}});return new y({baseElement:"#bot-details-tab-intents",contentElement:"#bot-details-tab-intents",baseTemplate:"bots/intents/landing/landing",baseTemplateElement:"#bot-details-tab-intents",navListElement:"#intents-list-nav-list",createEntityPopupElement:"#entity-create-dialog",examplesPagingElement:"#intents-examples-list-paging-control",intentEntitiesPickerPopupElement:"#intentEntities-asset-picker"})}),function(){define("bots.package.intents/package.main",["ojs/ojvalidation","ojs/ojselectcombobox","ojs/ojbutton"]),require(["bots.templates/intents","bots.package.intents/facade","bots.package.intents/model","bots.package.intents/dataobject","bots.package.intents/intents.enums","bots.package.intents/new.entity","bots.package.intents/example.association.helper","bots.package.intents/view.landing"])}(),define("bots.package.intents",["bots.package.intents/package.main"],function(t){return t});