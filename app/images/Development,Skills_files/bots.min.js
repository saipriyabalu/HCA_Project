define("bots.enums",{LifeCycleManagementEnum:{DRAFT:"DRAFT",PUBLISHED:"PUBLISHED",STOREBOUGHT:"STOREBOUGHT",LAST_UPDATED:"lastUpdated",SKILLSTORE:{NEW_VERSION_METADATA:"newVersionMetadata",NEW_VERSION_IMPORT:"newVersionImport"}},TrainingModelEnum:{SAKURA:"Sakura",TAMAO:"Tamao"},TrainingStatusEnum:{NO_DATA:"NO_DATA",ERROR:"ERROR",TRAINED:"TRAINED",TRAINING:"TRAINING"},ValidationStatusEnum:{NO_DATA:"NO_DATA",ERROR:"ERROR",TRAINED:"TRAINED",TRAINING:"TRAINING"},QualityTrainingTypeEnum:{SUGGESTIONS:"suggestions",UQE:"uqe",SIMILARITY:"similarity",SUGGESTEDDATA:"suggesteddata",ALL:"all"},ChannelTypeEnum:{FACEBOOK:{ordinal:1,value:"facebook",textRbKey:"channels.user.channelType.enums.facebook",basename:"messenger_24",viewBoxWidth:24,viewBoxHeight:24,category:"bot"},WEBHOOK:{ordinal:2,value:"webhook",textRbKey:"channels.user.channelType.enums.webhook",basename:"qual_webhook_48_mono",viewBoxWidth:48,viewBoxHeight:48,category:"bot"},WEB:{ordinal:3,value:"web",textRbKey:"channels.user.channelType.enums.web",basename:"qual_web_24_full",viewBoxWidth:24,viewBoxHeight:24,category:"bot"},IOS:{ordinal:4,value:"ios",textRbKey:"channels.user.channelType.enums.ios",basename:"qual_ios_24_full",viewBoxWidth:24,viewBoxHeight:24,category:"bot"},ANDROID:{ordinal:5,value:"android",textRbKey:"channels.user.channelType.enums.android",basename:"qual_android_24_full",viewBoxWidth:24,viewBoxHeight:24,category:"bot"},TWILIO:{ordinal:6,value:"twilio",textRbKey:"channels.user.channelType.enums.twilio",basename:"qual_twilio_24_full",viewBoxWidth:24,viewBoxHeight:24,category:"bot"},WECHAT:{ordinal:7,value:"wechat",textRbKey:"channels.user.channelType.enums.wechat",imgSrc:"/botsui/19.1.5-1907122019/resources/images/wechat_24.svg",category:"bot"},SLACK:{ordinal:8,value:"slack",textRbKey:"channels.user.channelType.enums.slack",basename:"qual_slack_24_full",viewBoxWidth:24,viewBoxHeight:24,category:"bot"},KAKAOTALK:{value:"kakaotalk",textRbKey:"channels.user.channelType.enums.kakaotalk",basename:"qual_kakaotalk_24_full",viewBoxWidth:24,viewBoxHeight:24,category:"bot"},APPLICATION:{value:"application",textRbKey:"channels.user.channelType.enums.application",basename:"applicationschannel_24",viewBoxWidth:24,viewBoxHeight:24,category:"application"},TEST:{value:"test",textRbKey:"channels.user.channelType.enums.web",basename:"qual_system_16_mono",viewBoxWidth:16,viewBoxHeight:16,category:"bot"},SERVICE_CLOUD:{value:"serviceCloud",textRbKey:"channels.user.channelType.enums.serviceCloud",basename:"qual_liveagent_24_mono",viewBoxWidth:24,viewBoxHeight:24,category:"agent"},MSTEAMS:{ordinal:10,value:"msteams",textRbKey:"channels.user.channelType.enums.msteams",basename:"qual_msteams_24_full",viewBoxWidth:24,viewBoxHeight:24,category:"bot"},CORTANA:{ordinal:11,value:"cortana",textRbKey:"channels.user.channelType.enums.cortana",basename:"qual_cortana_24_full",viewBoxWidth:24,viewBoxHeight:24,category:"bot"},SKYPEFORBUSINESS:{ordinal:12,value:"skypeforbusiness",textRbKey:"channels.user.channelType.enums.skypeforbusiness",basename:"qual_skypeforbusiness_24_full",viewBoxWidth:24,viewBoxHeight:24,category:"bot"},getOrderedCreatableChannels:function(){return _.sortBy(_.filter(this,function(t){return t.hasOwnProperty("ordinal")}),"ordinal")},toEnum:function(t){return _.find(this,function(e){return e.value===t})}},ChannelEnum:{CATEGORY_BOT:"bot",CATEGORY_AGENT:"agent",CATEGORY_APPLICATION:"application",APP_SCOPE_CHANNEL:"channel",APP_SCOPE_BOT:"bot",ROUTING_POLICY_CHANNEL:"channel",ROUTING_POLICY_FIXED:"fixed",ROUTING_POLICY_EXTERNAL:"external",FILTER_TYPE_BOT:"categoryBot",FILTER_TYPE_AGENT:"categoryAgent",FILTER_TYPE_APPLICATION:"categoryApplication",FILTER_TYPE_SYSTEM:"categorySystem"},BotConfigTypeEnum:{digital_assistant:"da.",system_conversation:"system.conversation",system_routing:"system.routing"},EntityTypeEnum:{SYSTEM:"SYSTEM",DERIVED:"DERIVED",ENUMVALUES:"ENUMVALUES",ENUMENTITIES:"ENUMENTITIES",PATTERNBASED:"PATTERNBASED",COMPOSITEBAG:"COMPOSITEBAG"},ComponentServiceStatusEnum:{AWAITING_DEPLOYMENT:{value:"awaitingDeployment",width:16,height:16,basename:"spinner_blue",klazz:"bots-helper-24x24",statusRbKey:"components.status.values.awaitingDeployment.label",statusHintRbKey:"components.status.values.awaitingDeployment.labelHelp"},ERROR:{value:"error",width:16,height:16,basename:"qual_error_16",klazz:"bots-helper-24x24",statusRbKey:"components.status.values.error.label",statusHintRbKey:"components.status.values.error.labelHelp"},COMPONENT_LOAD_FAILED:{value:"componentLoadFailed",width:16,height:16,basename:"qual_error_16",klazz:"bots-helper-24x24",statusRbKey:"components.status.values.componentLoadFailed.label",statusHintRbKey:"components.status.values.componentLoadFailed.labelHelp"},CREATED:{value:"created",width:16,height:16,basename:"spinner_blue",klazz:"bots-helper-24x24",statusRbKey:"components.status.values.created.label",statusHintRbKey:"components.status.values.created.labelHelp"},DEPLOYMENT_FAILED:{value:"deploymentFailed",width:16,height:16,basename:"qual_error_16",klazz:"bots-helper-24x24",statusRbKey:"components.status.values.deploymentFailed.label",statusHintRbKey:"components.status.values.deploymentFailed.labelHelp"},READY:{value:"ready",width:16,height:16,basename:"qual_ok_16",klazz:"bots-helper-24x24",statusRbKey:"components.status.values.ready.label",statusHintRbKey:"components.status.values.ready.labelHelp"},toEnum:function(t){return _.find(this,function(e){return e.value===t})}},BotAssetEnum:{DA:{value:"ODA",statusRbKey:"NA",titleRbKey:["bots.tiles.da"],basename:["digital-assistant_24"],viewBox:[{width:24,height:24}],klazz:["bots-da-skill-color bots-helper-32x32"]},SKILL:{value:"USER",statusRbKey:["bots.status.DRAFT","bots.status.PUBLISHED"],titleRbKey:["bots.tiles.draft","bots.tiles.published"],basename:["qual_pagepencil_24","qual_lock_24"],viewBox:[{width:24,height:24},{width:24,height:24}],klazz:["bots-draft-skill-color","bots-published-skill-color"]},STOREBOUGHT:{value:"NA",statusRbKey:["bots.status.STOREBOUGHT","bots.status.UPDATE "],titleRbKey:["bots.tiles.storebought","bots.tiles.storeboughtUpdateAvailable"],basename:["qual_skill_store_24","qual_skill_store_update_32"],viewBox:[{width:24,height:24},{width:32,height:32}],klazz:["bots-store-skill-color","bots-store-skill-color"]},STOREAVAIL:{value:"NA",statusRbKey:["NA","NA","NA"],titleRbKey:["skillStore.tiles.available","skillStore.tiles.availableUpdate","skillStore.tiles.installed"],basename:["qual_skill_store_24","qual_skill_store_update_32","qual_skill_store_installed_32"],viewBox:[{width:24,height:24},{width:32,height:32},{width:32,height:32}],klazz:["bots-store-skill-color","bots-store-skill-color","bots-store-skill-color"]}},ConfigParameterTypes:{string:{type:"string",textRbKey:"settings.configuration.parameters.types.string"},int:{type:"int",textRbKey:"settings.configuration.parameters.types.int"},float:{type:"float",textRbKey:"settings.configuration.parameters.types.float"},boolean:{type:"boolean",textRbKey:"settings.configuration.parameters.types.boolean"}},ARTIFACT_NAME_VERSION_SEPARATOR:" • ",DEFAULT_FAKE_LIMIT:"2147483647",PLACEHOLDER_STRING_1:"_-_-_-_-_-_-_-_-_-_-_-_C O N F I D E N T I A L_-_-_-_-_-_-_-_-_-_-_-_-",PLACEHOLDER_STRING_2:"+=+=+=+=+=+=+=+=+=+=+=+C O N F I D E N T I A L+=+=+=+=+=+=+=+=+=+=+=+="}),define("bots.i18n",["module","mcs.js.framework/i18n","ojs/ojcore","ojs/ojvalidation","ojtranslations/nls/ojtranslations","moment","moment-timezone","moment-locale-de","moment-locale-de-at","moment-locale-en-au","moment-locale-en-ca","moment-locale-en-gb","moment-locale-es","moment-locale-fr","moment-locale-fr-ca","moment-locale-it","moment-locale-ja","moment-locale-ko","moment-locale-pt","moment-locale-zh-cn","moment-locale-zh-tw"],function(t,e,i,n,s,o,a){var r=e.extend({module:t,name:"BaseI18n"},{supportedLanguages:{fr:{code:"fr",direction:"ltr"},it:{code:"it",direction:"ltr"},de:{code:"de",direction:"ltr"},es:{code:"es",direction:"ltr"},pt:{code:"pt",direction:"ltr"},ja:{code:"ja",direction:"ltr"},"zh-Hans":{code:"zh-Hans",direction:"ltr"},"zh-Hant":{code:"zh-Hant",direction:"ltr"},ko:{code:"ko",direction:"ltr"}},supportedMomentsLocales:{de:"de","de-AT":"de-at","en-AU":"en-au","en-CA":"en-ca","en-GB":"en-gb",es:"es",fr:"fr","fr-CA":"fr-ca",it:"it",ja:"ja",ko:"ko",pt:"pt","zh-Hans":"zh-cn","zh-Hant":"zh-tw"},supportedFormatsMSWithTZ:{"zh-Hans":"YY/M/D Z ah:mm:ss.SSS","zh-Hant":"YYYY/M/D ah:mm:ss.SSS [[]Z[]]","zh-Hant-HK":"D/M/YY ah:mm:ss.SSS [[]Z[]]","zh-Hans-SG":"DD/MM/YY Z ah:mm:ss.SSS","zh-Hant-MO":"D/M/YY ah:mm:ss.SSS [[]Z[]]","en-AU":"D/MM/YYYY h:mm:ss.SSS a Z","en-CA":"YYYY-MM-DD h:mm:ss.SSS a Z","en-IN":"DD/MM/YY h:mm:ss.SSS a Z","en-IE":"DD/MM/YYYY h:mm:ss.SSS a Z","en-MT":"DD/MM/YYYY h:mm:ss.SSS a Z","en-NZ":"D/MM/YY h:mm:ss.SSS a Z","en-PH":"DD/MM/YYYY h:mm:ss.SSS a Z","en-SG":"D/M/YY h:mm:ss.SSS a Z","en-ZA":"YYYY/MM/DD h:mm:ss.SSS a Z","en-GB":"DD/MM/YYYY HH:mm:ss.SSS Z",fr:"DD/MM/YYYY HH:mm:ss.SSS Z","fr-BE":"D/MM/YY HH:mm:ss.SSS Z","fr-CA":"YY-MM-DD HH:mm:ss.SSS Z","fr-LU":"DD/MM/YYYY HH:mm:ss.SSS Z","fr-CH":"DD.MM.YY HH:mm:ss.SSS Z",de:"DD.MM.YY HH:mm:ss.SSS Z","de-AT":"DD.MM.YY HH:mm:ss.SSS Z","de-LU":"DD.MM.YY HH:mm:ss.SSS Z","de-CH":"DD.MM.YY HH:mm:ss.SSS Z",it:"DD/MM/YY HH:mm:ss.SSS Z","it-CH":"DD.MM.YY HH:mm:ss.SSS Z",pt:"DD/MM/YY HH:mm:ss.SSS Z",es:"D/M/YY H:mm:ss.SSS Z","es-AR":"D/M/YY h:mm:ss.SSS a Z","es-BO":"D/M/YY h:mm:ss.SSS a Z","es-CL":"DD-MM-YY h:mm:ss.SSS a Z","es-CO":"D/MM/YY h:mm:ss.SSS a Z","es-CR":"D/M/YY h:mm:ss.SSS a Z","es-DO":"D/M/YY h:mm:ss.SSS a Z","es-EC":"D/M/YY h:mm:ss.SSS a Z","es-SV":"D/M/YY h:mm:ss.SSS a Z","es-GT":"D/MM/YY h:mm:ss.SSS a Z","es-HN":"D/M/YY h:mm:ss.SSS a Z","es-MX":"DD/MM/YY h:mm:ss.SSS a Z","es-NI":"D/M/YY h:mm:ss.SSS a Z","es-PA":"MM/DD/YY h:mm:ss.SSS a Z","es-PY":"D/M/YY h:mm:ss.SSS a Z","es-PE":"D/MM/YY h:mm:ss.SSS a Z","es-PR":"MM/DD/YY h:mm:ss.SSS a Z","es-US":"D/M/YY h:mm:ss.SSS a Z","es-UY":"D/M/YY h:mm:ss.SSS a Z","es-VE":"D/M/YY h:mm:ss.SSS a Z",ja:"YYYY/MM/DD H:mm:ss.SSS Z",ko:"YY. M. D. a h시 m분 s.SSS초 Z"},noDataSymbol:"--",BaseI18n:function(t){this._super(t),this.momentFormatStrsMS["en-US"]=this.momentFormatStrsMS["en-CA"]=this.momentFormatStrsMS.en,this.cldrFormatStrsMs["en-US"]=this.cldrFormatStrsMs["en-CA"]=this.cldrFormatStrsMs.en},setLocale:function(t){utils.setCookie("locale",t.key,0),document.location.reload(!0)},getLangHeader:function(){var t=utils.getCookie("locale")||"en";return"en"!==t?t+", en;q=0.5":"en"},guessTimezone:function(){return a.tz.guess()},getAllTimezones:function(){var t=o(),e=a.tz.names(),i=[];return _.each(e,function(e){var n=a.tz.zone(e),s=n.offset(t),o=n.abbr(t);i.push({value:e,text:e.replace("_"," ")+" ("+o+")",offset:s})},this),_.sortBy(i,"text")},formatNumber:function(t,e){if(!_.isNumber(t)||_.isNaN(t))return e&&e.noDataSymbol||this.noDataSymbol;var i,n=require("bots.config").templateData.cldr;return e&&e.scale?t>=1e9?(i="billion",t/=1e9,e.pattern=t>=100?n.int:n.float1):t>=1e6?(i="million",t/=1e6,e.pattern=t>=100?n.int:n.float1):t>=1e3&&(i="thousand",t/=1e3,e.pattern=t>=100?n.int:n.float1):e&&e.percentPrecision&&(100*t<1?e.pattern=n.percent2:100*t<10?e.pattern=n.percent1:e.pattern=e.pattern||n.percent),this._super(t,e)+(i?this.translate("general."+i):"")},formatTime:function(t){return t<60?this.translate("general.duration.seconds",[t]):t/60<60?this.translate("general.duration.minutes",[(t/60).toFixed(1)]):t/3600<24?this.translate("general.duration.hours",[(t/3600).toFixed(1)]):this.translate("general.duration.days",[(t/86400).toFixed(1)])},getFormatTimeObject:function(t){var e={};if(t&&t>=0)if(t<60)e={value:this.getScaledValue(t),unit:"seconds"};else if(t/60<60){var i=t/60;e={value:this.getScaledValue(i),unit:"minutes"}}else if(t/3600<24){var n=t/3600;e={value:this.getScaledValue(n),unit:"hours"}}else{var s=t/86400;e={value:this.getScaledValue(s),unit:"days"}}return e},getScaledValue:function(t){return Number.isInteger(t)?t:parseFloat(t.toFixed(2))},percentConverter:function(){var t=i.Validation.converterFactory("number"),e=t.createConverter({style:"percent",useGrouping:!1,maximumFractionDigits:0});return e},formatDuration:function(t){var e=o(),i=o(t);return e.isAfter(i)?this.translate("general.question"):o.duration(i.diff(e)).humanize()}});return new r}),define("bots.dataobject",["module","bots.i18n","mcs.js.framework/dataobject","moment"],function(t,e,i,n){var s=require("bots.enums"),o={EMPTY_SCALARS:"EMPTY_SCALARS",SCALARS:"SCALARS",OBSERVABLES:"OBSERVABLES"},a=i.extend({module:t,name:"Language"},{__static__:{key:"key"},Language:function(t){this.key=ko.observable(),this.language=ko.observable(),this._super(t)}}),r=i.extend({module:t,name:"Message"},{__static__:{key:"errorCode",INFO:"INFO",WARNING:"WARNING",ERROR:"ERROR"},Message:function(t){this.type=ko.observable(),this.errorCode=ko.observable(),this.errorMessage=ko.observable(),this.errorDetailedMessage=ko.observable(),this.httpStatusCode=ko.observable(),this.httpMessage=ko.observable(),this._super(t)}}),l=i.extend({module:t,name:"Route"},{__static__:{key:"name"},Route:function(t){this.name=ko.observable(),this.iconClass=ko.observable(),this.content=ko.observable(),this.route=ko.observable(),this._super(t)}}),d=i.extend({module:t,name:"BotDO"},{__static__:{key:"id",mappings:{createdOn:null,updatedOn:null}},BotDO:function(t){_.extend(this,c(o.OBSERVABLES)),this._super(t)}}),c=function(t){var e={id:void 0,name:void 0,displayName:void 0,type:void 0,category:void 0,version:void 0,status:void 0,namespace:void 0,description:void 0,trainingStatus:void 0,trainingValidationStatus:void 0,requiresTraining:void 0,createdOn:void 0,updatedOn:void 0,qnas:void 0,intentTrainer:void 0,skillStoreUpdate:void 0};switch(t){case o.EMPTY_SCALARS:e=_.defaults(e,{type:s.BotAssetEnum.SKILL.value,skillStoreUpdate:[]});break;case o.SCALARS:e=_.mapObject(e,function(t,e){switch(e){case"status":return s.LifeCycleManagementEnum.DRAFT;case"type":return s.BotAssetEnum.SKILL.value;case"trainingStatus":return s.TrainingStatusEnum.NO_DATA;case"trainingValidationStatus":return s.ValidationStatusEnum.NO_DATA;case"createdOn":case"updatedOn":return n();case"skillStoreUpdate":return[];default:return""}});break;case o.OBSERVABLES:e=_.mapObject(e,function(t,e){return"skillStoreUpdate"===e?ko.observableArray():"createdOn|modifiedOn".indexOf(e)!==-1?n(""):ko.observable()})}return e},u=function(){return _.keys(c())},h=i.extend({module:t,name:"BotDetails"},{__static__:{key:"id"},BotDetails:function(t){this.id=ko.observable(),this.invocationName=ko.observable(),this.shortDescription=ko.observable(),this.fullDescription=ko.observable(),this.sampleInvocations=ko.observableArray(),this._super(t)}});return{Language:a,Message:r,Route:l,BotDO:d,BotDetails:h,BotMetaFactory:{FillEnum:o,newObject:c,fetchPropList:u}}}),define("bots.collection",["mcs.js.framework/class","mcs.js.framework/dataobject","ojs/ojtable","ojs/ojtable-model","ojs/ojpagingcontrol"],function(t,e){var i=function(t){this.config=$.extend(!0,{},this.config,t),this.Init()};return oj.Object.createSubclass(i,oj.TableDataSource,"bots.Collection"),_.extend(i,{EventType:oj.TableDataSource.EventType,decodeParams:function(t){for(var e={},i=(t.split("?")[1]||"").split("&"),n=0;n<i.length;n++){var s=i[n].split("=");try{e[s[0]]=decodeURIComponent(s[1])}catch(t){e[s[0]]=s[1]}}return e},encodeParams:function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];null!==n&&void 0!==n&&""!==n&&e.push(i+"="+encodeURIComponent(n))}return e.length?"?"+e.join("&"):""},getPath:function(t,e){var n={};return(e.pageSize||e.limit)&&(n.offset=e.startIndex||e.offset||0,n.limit=e.pageSize||e.limit||20),_.extend(n,_.omit(e,["limit","offset"])),t+i.encodeParams(n)}}),_.extend(i.prototype,{config:{disableFetch:!1,facade:void 0,idAttribute:"id",pageSize:20,orderBy:void 0,searchBy:void 0,filterKeyword:void 0,filterType:[],totalResults:!0,searchByThrottle:750,filterKeywordThrottle:750,filterTypeThrottle:750,dataobjectClass:void 0,extraFields:{},disableExtraFieldsFetch:!1,mode:void 0,selectors:{ojPagingControl:void 0},capabilities:{sort:null},events:{load:{name:"LOAD_X_LIST",data:{}}}},hasMore:void 0,pageSize:void 0,totalSize:void 0,startIndex:void 0,orderBy:void 0,searchBy:void 0,filterKeyword:void 0,filterType:void 0,items:void 0,compoundObjects:[],_isResetting:!1,Init:function(){i.superclass.Init.call(this),this.config.facade=this.config.facade||require("bots.facade"),this.hasMore=ko.observable(!1),this.totalSize=ko.observable(0),this.orderBy=ko.observable(this.config.orderBy),this.orderBy.extend({notify:"always"}),this.searchBy=ko.observable(this.config.searchBy),this.previousSearchBy=this.searchBy(),this.filterKeyword=ko.observable(this.config.filterKeyword),this.previousFilterKeyword=this.filterKeyword(),this.filterType=ko.observableArray(this.config.filterType),this.previousFilterType=this.filterType(),this.startIndex=ko.observable(0),this.pageSize=ko.observable(this.config.pageSize),this.items=ko.observableArray(),this.mode=this.config.mode,this.compoundObjects=[],this.size=ko.computed(_.bind(function(){return(this.items()||[]).length},this)),this.itemsRefreshedCallback=ko.unwrap(this.config.itemsRefreshedCallback),"function"!=typeof this.itemsRefreshedCallback&&(this.itemsRefreshedCallback=void 0),this.throttledSearchBy=ko.computed(this.searchBy).extend({rateLimit:this.config.searchByThrottle}),this.throttledSearchBy.subscribe(function(t){if((""!==t||(this.searchBy(void 0),void 0!==this.previousSearchBy))&&(this.previousSearchBy=t,void 0!==t)){var e=ko.unwrap(this.config.selectors.ojPagingControl);e?$(e).ojPagingControl("firstPage"):this.fetch({reset:!0})}},this),this.throttledFilterKeyword=ko.computed(this.filterKeyword).extend({rateLimit:this.config.filterKeywordThrottle}),this.throttledFilterKeyword.subscribe(function(t){if((""!==t||(this.filterKeyword(void 0),void 0!==this.previousFilterKeyword))&&(this.previousFilterKeyword=t,void 0!==t)){var e=ko.unwrap(this.config.selectors.ojPagingControl);e?$(e).ojPagingControl("firstPage"):this.fetch({reset:!0})}},this),this.throttledFilterType=ko.computed(this.filterType).extend({rateLimit:this.config.filterTypeThrottle}),this.throttledFilterType.subscribe(_.bind(function(t){if((this.previousFilterType||(t||[]).length)&&!_.isEqual(t,this.previousFilterType)){this.previousFilterType=t;var e=ko.unwrap(this.config.selectors.ojPagingControl);e?$(e).ojPagingControl("firstPage"):this.fetch({reset:!0})}},this)),this.orderBy.subscribe(_.bind(function(){this.fetch().then(_.bind(function(){this.handleEvent(i.EventType.SORT,this.orderByEvent())},this))},this)),this.extraFields={};var t=_.bind(function(){if(!this.config.disableExtraFieldsFetch){var t=ko.unwrap(this.config.selectors.ojPagingControl);t?$(t).ojPagingControl("firstPage"):this.fetch({reset:!0})}},this);for(var e in this.config.extraFields){var n=this.config.extraFields[e];this.extraFields[e]=ko.isObservable(n)?n:ko.observable(n),this.extraFields[e].subscribe(t)}this._eventHandlers=[];var s=ko.unwrap(this.config.events);for(var o in s)if("create"===o||"update"===o||"delete"===o){var a={};a[s[o].name]={data:_.bind(this.listeners[o],this)},this.config.facade.listen(a)}},findLink:function(t,e){var i=_.find(t,function(t){return t.rel===e});return i?i.href:void 0},fetch:function(t){t=t||{};var e=ko.unwrap(this.items);if(this._isResetting)return this.resolveEmptyRequest();if(void 0!==t.disableFetch&&(this.config.disableFetch=t.disableFetch,t=_.omit(t,"disableFetch")),this.config.disableFetch)return this.resolveEmptyRequest();var n={},s=this.orderByStringValue(),o=ko.unwrap(this.config.events),a=ko.unwrap(o.load),r=void 0!==t.startIndex?null===t.startIndex?0:t.startIndex:this.startIndex()||0,l=_.extend({orderBy:s,offset:r,limit:t.pageSize||this.pageSize()||this.config.pageSize,q:this.searchBy(),filterKeyword:this.filterKeyword(),filterType:this.filterType().length?this.filterType().join(","):void 0,totalResults:!!this.config.totalResults||void 0},t,a.data||{});for(var d in this.config.extraFields)l[d]=this.extraFields[d]();l=_.omit(l,"pageSize","startIndex","silent","fetchType"),n[a.name]={data:l,permission:a.permission};var c=$.Deferred();this.handleEvent(i.EventType.REQUEST,{startIndex:r});var u={promise:!0};if(this.config.facade.isVisible){var h=this.config.facade;!h.isVisible()||h.bindings&&ko.isObservable(h.bindings.isLoading)&&h.bindings.isLoading()?u.loadingSpinner=!0:u.actionSpinner=!0}return this.config.facade.notify(n,u).always(_.bind(function(n){if(n||(n={status:200,data:{hasMore:!1,items:[],links:[],limit:0,totalResults:0}}),!n.data||n.status&&(n.status<200||n.status>=300))return this.handleEvent(i.EventType.ERROR,n),t.error&&setTimeout(t.error,0),c.reject(n),this.resolveEmptyRequest();var s,o=this.findLink(n.data.links,"self");if(o){var a=o.slice(o.indexOf("?"));s=parseInt(i.decodeParams(a).offset,10)}this.hasMore(!!n.data.hasMore);var l=void 0!==t.startIndex?t.startIndex:s||0,d=[],u=[];this.totalSize(n.data.totalResults);var h;if(n.data.items)for(this.config.dataobjectClass?this.config.dataobjectClass.__static__.fromJS(n.data.items,this.items):this.items(n.data.items),this.compoundObjects.length=0,h=0;h<n.data.items.length;h++)this.compoundObjects.push(this.toSingleCompoundObject(l+h,n.data.items[h])),d.push(n.data.items[h]),u.push(n.data.items[h][this.config.idAttribute]);"loadMore"===this.mode&&r>0&&this.items([].concat(e,this.items())),this.startIndex(l);var b={data:d,keys:u,startIndex:l};c.resolve($.extend(!0,{},b)),this.itemsRefreshedCallback&&this.itemsRefreshedCallback($.extend(!0,{},b)),this.handleEvent(i.EventType.SYNC,b),t.success&&setTimeout(t.success,10),t.reset&&!this._isResetting&&(this._isResetting=!0,this.handleEvent(i.EventType.RESET,{}),this._isResetting=!1)},this)),c},setPageSize:function(t){this.pageSize(t)},at:function(t,e){var i=this.startIndex(),n=i>-1&&this.compoundObjects.length>t-i?this.compoundObjects[t-i]:null;return $.Deferred().resolve(n)},get:function(t){for(var e=this.items(),i=0;i<e.length;i++){var n=ko.unwrap(e[i]);if(n[this.config.idAttribute]===t){var s=this.toSingleCompoundObject(i,n);return $.Deferred().resolve(s)}}return $.Deferred().resolve(null)},getCapability:function(t){return this.config.capabilities[t]||null},sort:function(t){if(t&&t.key){var e=t.key;"ascending"===t.direction?e+=":asc":"descending"===t.direction&&(e+=":desc"),this.orderBy(e)}},orderByStringValue:function(){var t=this.orderBy();return Array.isArray(t)&&t.length&&(t=t[0]),t},orderByEvent:function(){var t=this.orderByStringValue().split(":"),e="none";return"asc"===t[1]?e="ascending":"desc"===t[1]&&(e="descending"),{header:t[0],direction:e}},handleEvent:function(t,e){for(var i=0;i<this._eventHandlers.length;i++){var n=this._eventHandlers[i];n.eventType===t&&n.eventHandlerFunc(e)}},on:function(t,e){if("function"==typeof e){for(var i=!1,n=0;n<this._eventHandlers.length;n++)if(this._eventHandlers[n].eventType===t&&this._eventHandlers[n].eventHandlerFunc===e){i=!0;break}i||this._eventHandlers.push({eventType:t,eventHandlerFunc:e})}},off:function(t,e){for(var i=this._eventHandlers.length-1;i>=0;i--)if(this._eventHandlers[i].eventType===t&&this._eventHandlers[i].eventHandlerFunc===e){this._eventHandlers.splice(i,1);break}},listeners:{create:function(t){var e=t.status>=200&&t.status<300||304===t.status;if(e){var n=this.items(),s=t.data||t,o=s;this.config.dataobjectClass&&(o=new this.config.dataobjectClass(o)),n.unshift(o),n.length>this.config.pageSize&&(this.length=this.config.pageSize),this.items(n),this.compoundObjects.unshift(this.toSingleCompoundObject(this.startIndex(),s)),this.compoundObjects.length>this.config.pageSize&&(this.compoundObjects.length=this.config.pageSize),this.totalSize(this.totalSize()+1),this.handleEvent(i.EventType.ADD,this.toAddRemoveChangeEventObject(this.startIndex(),s))}},update:function(t){var n=t.status>=200&&t.status<300||304===t.status;if(n){var s,o=this.items(),a=this.config.idAttribute,r=[],l=t.data||t;for(s=0;s<o.length;s++){var d,c=o[s];c instanceof e?(d=ko.isObservable(c[a])?c[a]():c[a],d===l[a]&&c.fromJS(l)):"object"==typeof c&&(d=c[a],d===l[a]&&_.extend(c,l)),r.push(c)}for(this.items(r),s=0;s<this.compoundObjects.length;s++){var u=this.compoundObjects[s];if(u.data[a]===l[a]){var h=this.startIndex()+s;this.compoundObjects[s]=this.toSingleCompoundObject(h,l),this.handleEvent(i.EventType.CHANGE,this.toAddRemoveChangeEventObject(h,l));break}}}},delete:function(t){var e=t.status>=200&&t.status<300||304===t.status;e&&this.fetch().then(_.bind(function(t){var e=this.totalSize()>0&&this.startIndex()>=0&&this.startIndex()>=this.totalSize(),i=ko.unwrap(this.config.selectors.ojPagingControl);e&&i&&_.defer(_.bind(function(){$(i).ojPagingControl("previousPage")},this))},this))}},toSingleCompoundObject:function(t,e){return{data:e,key:e[this.config.idAttribute],index:t}},toAddRemoveChangeEventObject:function(t,e){return{data:[e],keys:[e[this.config.idAttribute]],indexes:[t]}},resolveEmptyRequest:function(){return $.Deferred().resolve({data:[],keys:[],startIndex:0})}}),i}),define("bots.model.rest",["mcs.js.framework/model.rest","bots.i18n","bots.dataobject","bots.collection","bots.enums"],function(t,e,i,n,s){var o=t.extend("BotRestModel",{__static__:{ABSOLUTE_URL_REGEX:new RegExp("^(?:[a-z]+:)?//","i"),sessionData:{global:{}},session:function(t){return t?(this.sessionData[t.__fqclassname__]=this.sessionData[t.__fqclassname__]||{},this.sessionData[t.__fqclassname__]):this.sessionData.global},artificialDelay:500,bots:void 0,downloadFile:function(t,e,i,n,s,o){var a=require("suite.security.csrf");a.downloadFile(o?a.__static__.LOB_DOWNLOAD_MODE.NOT_APPLICABLE:a.__static__.LOB_DOWNLOAD_MODE.XHR,t,n,e,s).always(function(t){i&&_.defer(function(){i({status:t.status,bot:{name:t.filename}})})})}},deps:{dataObject:i},constants:{},config:{uriParams:{botId:function(){var t=require("bots.config");return(t.getCurrentBot()||{}).id}}},BotRestModel:function(t){this._super(t),this.addHeader("Accept-Language",e.config.acceptLangHeader)},getAssetTypeMap:function(){return this.__static__.assetTypeMap},session:function(t){return this.__static__.session(t?void 0:this)},getConfig:function(t,e){this.restGet(e,"",{url:"/botsui/19.1.5-1907122019/resources/json/config.json"})},getUserPreferences:function(t,e){this.restGet(e,"/users/me/state",{expiry:43200})},saveUserPreferences:function(t,e){this.restPut(e,"/users/me/state",{data:{state:t}})},getProductVersionInfo:function(t,e){this.restGet(e,"",{url:"/botsui/19.1.5-1907122019/mock/json/botsversion.json"})},getFakeBotAssets:function(t,e){var i=require("bots.config");e=e||i.getCurrentBot().id;var n=require("bots.model").__static__["bot_"+t];n||(n={},require("bots.model").__static__["bot_"+t]=n);var s=n[e];return s||(s=[],n[e]=s),s},setFakeBotAssets:function(t,e,i){var n=require("bots.config");i=i||n.getCurrentBot().id;var s=require("bots.model").__static__["bot_"+t];s||(s={},require("bots.model").__static__["bot_"+t]=s),s[i]=e},_parseOutSkillStoreUpdateInfo:function(t){var e=this;t.skillStoreUpdate=[],t.links&&_.each(t.links,function(i){var n,o,a;switch((i.rel||"").toLowerCase()){case s.LifeCycleManagementEnum.SKILLSTORE.NEW_VERSION_METADATA.toLowerCase():a=a||s.LifeCycleManagementEnum.SKILLSTORE.NEW_VERSION_METADATA;case s.LifeCycleManagementEnum.SKILLSTORE.NEW_VERSION_IMPORT.toLowerCase():a=a||s.LifeCycleManagementEnum.SKILLSTORE.NEW_VERSION_IMPORT,n=i.href||"",n&&(o=n.indexOf(e.config.baseUrl),o!==-1&&(i.href=n.substring(o+e.config.baseUrl.length),i.rel=a),t.skillStoreUpdate.push(i))}})},_fillOptionalData:function(t){t.displayName=t.displayName||t.name,t.description=t.description||"",t.type=t.type||s.BotAssetEnum.SKILL.value,t.status=t.status||s.LifeCycleManagementEnum.DRAFT,t.version=t.version||"1.0",t.namespace=t.namespace||null,this._parseOutSkillStoreUpdateInfo(t)},getBot:function(t,e){var i=this,n={uriParams:{botId:t.id}};"number"==typeof t.expiry&&(n.expiry=t.expiry),this.restGet(function(t){var n=t.status;200===n&&t.data&&i._fillOptionalData(t.data),e({status:n,data:t.data})},"/bots/{botId}",n)},getBots:function(t,e){var i=this,n=_.pick(t,"orderBy","offset","limit","filterType","totalResults","disableFetch","type","q","exclude");this.restGet(function(t){var n=t.status;200===n&&t.data&&t.data.items&&_.each(t.data.items,function(t){i._fillOptionalData(t)}),e({status:n,data:t.data})},"/bots?type=USER",{stringifyObjects:!1,data:n})},getBotsParallel:function(t,e){for(var i=[],n=t.ids.length,s=function(t){t.status>=400&&e(t),i.push(t.data),n===i.length&&e({status:200,data:i})},o=0;o<n;o+=1)this.getBot({id:t.ids[o]},s)},getDAs:function(t,e){var i=this,n=_.pick(t,"orderBy","offset","limit","filterType","totalResults","disableFetch","type","q","exclude");this.restGet(function(t){var n=t.status;200===n&&t.data&&t.data.items&&_.each(t.data.items,function(t){i._fillOptionalData(t)}),e({status:n,data:t.data})},"/bots?type=ODA",{stringifyObjects:!1,data:n})},getBotsAndDAs:function(t,e){var i=this,n=_.pick(t,"orderBy","offset","limit","filterType","totalResults","disableFetch","type","q","exclude");this.restGet(function(t){var n=t.status;200===n&&t.data&&t.data.items&&_.each(t.data.items,function(t){i._fillOptionalData(t)}),e({status:n,data:t.data})},"/bots",{stringifyObjects:!1,data:n})},getBotVersions:function(t,e){var i=this,n={uriParams:{botName:t.botName}};this.restGet(function(t){var n=t.status;200===n&&t.data&&t.data.items&&_.each(t.data.items,function(t){i._fillOptionalData(t)}),e({status:n,data:t.data})},"/bots?name={botName}",_.extend({stringifyObjects:!1,data:_.omit(t,"uriParams")},n))},getBotNames:function(t,e){var i=_.extend({filterType:s.LifeCycleManagementEnum.LAST_UPDATED,totalResults:!0,offset:0},_.pick(t,"orderBy","q"));this.restGet(e,"/bots?type=USER",{stringifyObjects:!1,data:i})},getDANames:function(t,e){var i=_.extend({filterType:s.LifeCycleManagementEnum.LAST_UPDATED,totalResults:!0,offset:0},_.pick(t,"orderBy","q"));this.restGet(function(t){var i=t.status;200===i&&t.data&&t.data.items&&(t.data.items=_.map(t.data.items,function(t){return{name:t.name,namespace:t.namespace}})),e({status:i,data:t.data})},"/bots?type=ODA",{stringifyObjects:!1,data:i})},exportBot:function(t,e){var i=this.processUrl("/bots/{botId}",t),n=t.name+(t.version?"("+t.version+")":"")+".zip";this.__static__.downloadFile(i,n,e,{setRequestHeader:["Accept","application/zip"]})},addQueryParams:function(t,e){return t+=t.indexOf("?")<0?"?":"&",queryParams=_.map(_.keys(e),function(t){return t+"="+encodeURIComponent(e[t])}),t+queryParams.join("&")},downloadBotLogs:function(t,e){var i=this.processUrl("/bots/{botId}/conversationMessages",t),n=this.addQueryParams(i,_.omit(t,"botId","name")),s=t.name+"_bot_log.csv";this.__static__.downloadFile(n,s,e)},downloadIntentLogs:function(t,e){var i=this.processUrl("/bots/{botId}/intentTests",t),n=this.addQueryParams(i,_.omit(t,"botId","name")),s=t.name+"_intent_log.csv";this.__static__.downloadFile(n,s,e)},downloadQnALogs:function(t,e){var i=this.processUrl("/bots/{botId}/qnaConversations",t),n=this.addQueryParams(i,_.omit(t,"botId","name")),s=t.name+"_qna_log.csv";this.__static__.downloadFile(n,s,e)},cloneBot:function(t,e){this.restPost(e,"/bots?srcBotId={srcBotId}",{data:_.omit(t,"id","skillStoreUpdate"),uriParams:{srcBotId:t.id}})},cloneVersion:function(t,e){this.restPost(e,"/bots?srcBotId={srcBotId}&newVersion=true",{data:_.omit(t,"id","skillStoreUpdate"),uriParams:{srcBotId:t.id}})},publishBot:function(t,e){this.getBot(t,_.bind(function(i){if(200===i.status){var n=i.data;n.status=t.status,this.updateBot(n,e)}else e(i)},this))},trainBot:function(t,e){this.restPost(e,"/train/{botId}",{dataType:"text",uriParams:{botId:t.id}})},createBot:function(t,e){this.restPost(e,"/bots",{data:_.omit(t,"skillStoreUpdate")})},updateBot:function(t,e){this.restPut(e,"/bots/{botId}",{data:_.omit(t,"id","skillStoreUpdate"),uriParams:{botId:t.id}})},trashBot:function(t,e){this.restDelete(e,"/bots/{botId}",{uriParams:{botId:t.id}})},createEntity:function(t,e){this.restPost(e,"/bots/{botId}/entities",{data:t})},getEntities:function(t,e){this.restGet(e,"/bots/{botId}/entities",_.extend({stringifyObjects:!1,data:_.omit(t,"uriParams")
},_.pick(t,"uriParams")))},getIntents:function(t,e){this.restGet(e,"/bots/{botId}/intents",_.extend({stringifyObjects:!1,uriParams:{botId:t.id}},_.pick(t,"uriParams")))},getExamples:function(t,e){this.restGet(e,"/bots/{botId}/intents/{intentId}/examples",_.extend({stringifyObjects:!1,uriParams:{botId:t.botId,intentId:t.intentId}},_.pick(t,"uriParams")))},addNewExamples:function(t,e){this.restPost(e,"/bots/{botId}/intents/"+t.id+"/examples",{data:t.examples,uriParams:{botId:t.botId}})},getServices:function(t,e){var i=_.pick(t,"orderBy","offset","limit","filterType","totalResults","disableFetch","type","q","exclude"),n=!1;"credentials:null"===i.exclude&&(n=!0,delete i.exclude),this.restGet(function(t){var i=t.status;200===i&&n&&t.data&&t.data.items&&(t.data.items=_.filter(t.data.items,function(t){return!!t.credentials})),e({status:i,data:t.data})},"/bots/{botId}/services",{stringifyObjects:!1,data:i})},getRules:function(t,e){var i=_.pick(t,"orderBy","offset","limit","filterType","totalResults","disableFetch","type","q","exclude");this.restGet(e,"/bots/{botId}/entityrules",{stringifyObjects:!1,data:i})},createEntityRuleParam:function(t,e){this.restPost(e,"/bots/{botId}/entities/{entityId}/ruleparams",{data:_.omit(t,"entityId"),uriParams:{entityId:t.entityId}})},getFlows:function(t,e){var i=_.pick(t,"orderBy","offset","limit","filterType","totalResults","disableFetch","type","q","exclude");this.restGet(e,"/bots/{botId}/flows",{stringifyObjects:!1,data:i})},getFlow:function(t,e){this.restGet(e,"/bots/{botId}/flows/{flowId}",{uriParams:{flowId:t.id}})},getFlowStates:function(t,e){this.restGet(e,"/bots/{botId}/flows/{flowId}/states",{uriParams:{flowId:t.id}})},validateFlow:function(t,e){this.restGet(e,"/bots/{botId}/flows/{flowId}/diagnostics",{uriParams:{flowId:t.id},expiry:0})},validateDA:function(t,e){this.restGet(e,"/bots/{botId}/diagnostics",{uriParams:{},expiry:0})},exportIntents:function(t,e){var i=this.processUrl("/bots/{botId}/intents/export",t),n=require("bots.config"),s=(n.getCurrentBot()||{}).name,o=s+"-"+t.name+".csv";this.__static__.downloadFile(i,o,e)},exportEntities:function(t,e){var i=this.processUrl("/bots/{botId}/entities/export",t),n=require("bots.config"),s=(n.getCurrentBot()||{}).name,o=s+"-"+t.name+".csv";this.__static__.downloadFile(i,o,e)},countTotalIntents:function(t,e){this.restGet(e,"/bots/{botId}/intents",{stringifyObjects:!1,data:{offset:0,limit:2,totalResults:!0}})},computeChatboxInstantAppsUrl:function(t,e){this.restGet(e,"/chatbox/designer",{})},trainQnA:function(t,e){this.restPut(e,"/train/{botId}/qnas/{qnaId}",{dataType:"text",uriParams:{botId:t.botId,qnaId:t.id}})},trainEntity:function(t,e){this.restPut(e,"/train/{botId}/entity",{dataType:"text",uriParams:{botId:t.botId}})},exportQnAContent:function(t,e){var i=this.processUrl("/bots/{botId}/qnas/{qnaId}/answers?dataSourceId={datasourceId}&format=csv&limit={limit}",t),n=require("bots.config"),s=(n.getCurrentBot()||{}).name,o=s+"-"+t.datasourceName+"-"+t.fileSuffix+".csv";this.__static__.downloadFile(i,o,e)},loadBotSettings:function(t,e){var i={},n=_.omit(t,"botId");_.isEmpty(n)||(i.data=n),this.restGet(e,"/bots/{botId}/settings",_.extend(i,{uriParams:{botId:t.botId}}))},updateBotSettings:function(t,e){this.restPut(e,"/bots/{botId}/settings",{data:_.omit(t,"botId")})},loadBotDetails:function(t,e){this.restGet(e,"/bots/{botId}/details",{uriParams:{botId:t.botId}})},updateBotDetails:function(t,e){this.restPut(e,"/bots/{botId}/details",{data:_.omit(t,"botId")})},_isAbsoluteUrl:function(t){return this.__static__.ABSOLUTE_URL_REGEX.lastIndex=0,this.__static__.ABSOLUTE_URL_REGEX.test(t)},getStoreSkillPitch:function(t,e){this._isAbsoluteUrl(t.url)?this.restGet(e,"",{url:t.url}):this.restGet(e,t.url)},installStoreSkillUpdate:function(t,e){this._isAbsoluteUrl(t.url)?this.restPost(e,"",{url:t.url}):this.restPost(e,t.url)},loadUserChannelsRoutingToBot:function(t,e){var i=_.pick(t,"orderBy","offset","limit","filterType","totalResults","disableFetch","type","q","exclude","botId");this.restGet(function(t){var i=t.status;200===i&&t.data&&t.data.items&&_.each(t.data.items,function(t){_.extend(t,{markForStopping:ko.observable(!1)})}),e({status:i,data:t.data})},"/channels",{stringifyObjects:!1,data:i})},updateChannel:function(t,e){t.category!==s.ChannelEnum.CATEGORY_BOT||t.config.type!==s.ChannelTypeEnum.WEB.value||t.config.appName||(t.config.appName=t.name),this.restPut(e,"/channels/{channelId}",{data:_.omit(t,"id"),uriParams:{channelId:t.id}})},getSkills:function(t,e){this.restGet(e,"/bots/{botId}/skills",{stringifyObjects:!1,data:{},expiry:0})},getWebviews:function(t,e){var i=_.pick(t,"orderBy","offset","limit","filterType","totalResults","disableFetch","type","q","exclude");this.restGet(e,"/bots/{botId}/webviews",{stringifyObjects:!1,data:i})},getLanguages:function(t,e){this.restGet(e,"/languages",{})}});return new o({baseUrl:"/management-api/v1"})}),define("bots.model",["mcs.js.framework/model.util","bots.enums","bots.model.rest"],function(t,e,i){_.defaults(window.mcs=window.mcs||{},{stubPort:3001,stubHost:"does-not-exist"});var n=i.__class__.extend("FakeRestModel",{FakeRestModel:function(t){this._super(t)},toItemsResult:function(t){return{items:t,hasMore:!1,limit:t.length,totalResults:t.length}},getConfig:function(t,e){this.restGet(e,"",{url:"/botsui/19.1.5-1907122019/mock/json/config.json"})},getUserPreferences:function(t,e){e({status:200,data:this.userPreferences||{}})},saveUserPreferences:function(t,e){this.userPreferences=t,e({status:200,data:t})},getBot:function(t,e){var i=this;_.delay(function(){var n=t.id,s=_.findWhere(i.__static__.bots,{id:n});s&&i._getBotsChannels([s]),e(s?{status:200,data:s}:{status:404})},this.__static__.artificialDelay)},_getBotsChannels:function(t){var e=this;_.each(t,function(t){t.channels={},_.each(e.getFakeBotAssets("channels",t.id),function(e){t.channels[e.id]=JSON.parse(JSON.stringify(e))})})},_getBots:function(t,i){var n=this,s=t.q&&"string"==typeof t.q?t.q.toLowerCase():void 0,o=this.__static__.bots,a=t.type&&"string"==typeof t.type?t.type.toUpperCase():void 0;_.delay(function(){if(void 0===o)n.restGet(function(r){if(n.__static__.bots=r.data.items,o=n.__static__.bots,_.each(n.__static__.bots,function(t){n._fillOptionalData(t)}),a&&(o=_.filter(n.__static__.bots,function(t){return t.type.toUpperCase()===a})),s&&(o=_.filter(n.__static__.bots,function(t){return t.name.toLowerCase().indexOf(s)>=0||t.version.toLowerCase().indexOf(s)>=0||(t.description||"").toLowerCase().indexOf(s)>=0})),void 0!==t.filterType&&t.filterType.indexOf(e.LifeCycleManagementEnum.LAST_UPDATED)>=0){var l={};_.each(o,function(t){var e=t.name.toLowerCase();l[e]?(t.updatedOn||t.createdOn)>(l[e].updatedOn||l[e].createdOn)&&(l[e]=t):l[e]=t}),o=_.values(l)}n.restGet(function(t){var e=t.data.codeLines;_.each(n.__static__.bots,function(t){n.getFakeBotAssets("flows",t.id).push({id:_.guid(),isMain:!0,name:"Main",codeLines:e.slice()})}),n.restGet(function(t){_.each(n.__static__.bots,function(e){var i=n.getFakeBotAssets("channels",e.id);i.push.apply(i,_.filter(t.data.items.slice(),function(t){return e.channels.hasOwnProperty(t.config.type)}))}),n.restGet(function(t){_.each(n.__static__.bots,function(e){var i=n.getFakeBotAssets("services",e.id);i.push.apply(i,t.data.items.slice())}),n.restGet(function(t){_.each(n.__static__.bots,function(e){var i=n.getFakeBotAssets("intents",e.id);i.push.apply(i,t.data.items.slice())}),n.restGet(function(t){_.each(n.__static__.bots,function(e){var i=n.getFakeBotAssets("entities",e.id);i.push.apply(i,t.data.items.slice())}),n.restGet(function(t){_.each(n.__static__.bots,function(e){var i=n.getFakeBotAssets("qna",e.id);i.push.apply(i,t.data.items.slice())}),n.restGet(function(t){_.each(n.__static__.bots,function(e){var i=n.getFakeBotAssets("intentsLog",e.id);i.push.apply(i,t.data.items.slice())}),n._getBotsChannels(o),i({status:200,data:n.toItemsResult(o)})},"",{url:"/botsui/19.1.5-1907122019/mock/json/intentsLog.json"})},"",{url:"/botsui/19.1.5-1907122019/mock/json/qna.json"})},"",{url:"/botsui/19.1.5-1907122019/mock/json/entities.json"})},"",{url:"/botsui/19.1.5-1907122019/mock/json/intents.json"})},"",{url:"/botsui/19.1.5-1907122019/mock/json/services.json"})},"",{url:"/botsui/19.1.5-1907122019/mock/json/channels.json"})},"",{url:"/botsui/19.1.5-1907122019/mock/json/flowMain.json"})},"",{url:"/botsui/19.1.5-1907122019/mock/json/bots.json"});else{if(a&&(o=_.filter(n.__static__.bots,function(t){return t.type.toUpperCase()===a})),s&&(o=_.filter(n.__static__.bots,function(t){return t.name.toLowerCase().indexOf(s)>=0||t.version.toLowerCase().indexOf(s)>=0||(t.description||"").toLowerCase().indexOf(s)>=0})),void 0!==t.filterType&&t.filterType.indexOf(e.LifeCycleManagementEnum.LAST_UPDATED)>=0){var r={};_.each(o,function(t){var e=t.name.toLowerCase();r[e]?(t.updatedOn||t.createdOn)>(r[e].updatedOn||r[e].createdOn)&&(r[e]=t):r[e]=t}),o=_.values(r)}n._getBotsChannels(o),i({status:200,data:n.toItemsResult(o)})}},this.__static__.artificialDelay)},getBots:function(t,i){this._getBots(_.extend(t,{type:e.BotAssetEnum.SKILL.value}),i)},getBotsParallel:function(t,i){this._getBots(_.extend(t,{type:e.BotAssetEnum.SKILL.value}),function(t){i({status:200,data:t.data.items})})},getDAs:function(t,i){this._getBots(_.extend(t,{type:e.BotAssetEnum.DA.value}),i)},getBotsAndDAs:function(t,e){this._getBots(t,e)},getBotVersions:function(t,e){var i=this,n=t.q&&"string"==typeof t.q?t.q.toLowerCase():void 0,s=t.botName,o=this.__static__.bots;s||e({status:200,data:i.toItemsResult([])}),_.delay(function(){o=_.filter(i.__static__.bots,function(t){return t.name===s&&(!n||t.version.toLowerCase().indexOf(n)>=0||(t.description||"").toLowerCase().indexOf(n)>=0)}),e({status:200,data:i.toItemsResult(o)})},this.__static__.artificialDelay)},getBotNames:function(t,e){var i=this,n=t.q&&"string"==typeof t.q?t.q.toLowerCase():void 0,s=this.__static__.bots;_.delay(function(){n&&(s=_.filter(i.__static__.bots,function(t){return t.name.toLowerCase().indexOf(n)>=0||t.version.toLowerCase().indexOf(n)>=0||(t.description||"").toLowerCase().indexOf(n)>=0}));var t={},o=[];_.each(s,function(e){t.hasOwnProperty(e.name)||(t[e.name]=e,o.push(e))}),o=_.sortBy(o,"name"),e({status:200,data:i.toItemsResult(o)})},this.__static__.artificialDelay)},exportBot:function(t,e){e({status:200,data:{}})},cloneBot:function(t,e){var i=this;_.delay(function(){var n,s=_.findWhere(i.__static__.bots,{id:t.id});try{n=i._makeBot(s,t.name,t.displayName,t.version,t.description),e({status:200,data:{bot:n}})}catch(t){e(t)}},this.__static__.artificialDelay)},cloneVersion:function(t,e){this.cloneBot(t,e)},publishBot:function(t,e){this.getBot(t,_.bind(function(i){if(200===i.status){var n=i.data;n.status=t.status,this.updateBot(n,e)}else e(i)},this))},trainBot:function(t,i){var n=this;_.delay(function(){var s=t.id,o=_.findIndex(n.__static__.bots,function(t){return s===t.id});o>-1&&(n.__static__.bots[o].trainingStatus=e.TrainingStatusEnum.TRAINING,setTimeout(function(){n.__static__.bots[o].trainingStatus=e.TrainingStatusEnum.TRAINED,n.__static__.bots[o].requiresTraining=!1},5*n.__static__.artificialDelay)),i({status:o>-1?204:404})},this.__static__.artificialDelay)},_makeBot:function(t,i,n,s,o){if(_.isObject(t)||(o=s,s=n,n=i,i=t,t={}),type=e.BotAssetEnum.SKILL.value,n=n||i,s=s||"1.0",namespace=null,o=o||"",category=category||"",_.some(this.__static__.bots,function(t){return t.name===i&&!!t.namespace}))throw{status:409,message:'{ "o:errorCode": "BOTS-50353" }'};if(_.some(this.__static__.bots,function(t){return t.name===i&&t.version===s}))throw{status:400,message:'{ "o:errorCode": "BOTS-53032" }'};var a=_.guid(),r=$.extend(!0,{},t,{id:a,status:e.LifeCycleManagementEnum.DRAFT,trainingStatus:e.TrainingStatusEnum.NO_DATA,trainingValidationStatus:e.ValidationStatusEnum.NO_DATA,name:i,displayName:n,type:e.BotAssetEnum.SKILL.value,version:s,description:o,category:category,namespace:null,skillStoreUpdate:[],createdOn:(new Date).toISOString(),updatedOn:(new Date).toISOString()});return this.__static__.bots.push(r),this.getFakeBotAssets("flows",a).push({id:_.guid(),isMain:!0,name:i,displayName:n,description:"Create default main flow",codeLines:["main: true",'name: "'+i+'"']}),r},createBot:function(t,e){var i=this;_.delay(function(){var n;try{n=i._makeBot(t.name,t.displayName,t.version,t.description),e({status:201,data:n})}catch(t){e(t)}},this.__static__.artificialDelay)},updateBot:function(t,e){var i=this,n=t.id,s=t.name,o=t.displayName,a=t.version;_.delay(function(){if(_.some(i.__static__.bots,function(t){return t.id!==n&&(t.name===s||t.displayName===o)&&t.version===a}))e({status:400,message:'{ "o:errorCode": "BOTS-53049" }'});else{var r=_.findIndex(i.__static__.bots,function(t){return n===t.id});r>-1&&(i.__static__.bots[r]=t),e({status:r>-1?204:404})}},this.__static__.artificialDelay)},trashBot:function(t,e){var i=this;_.delay(function(){var n=t.id,s=_.findIndex(i.__static__.bots,function(t){return n===t.id});s>-1&&i.__static__.bots.splice(s,1),e({status:s>-1?204:404})},this.__static__.artificialDelay)},createEntity:function(t,e){var i=this,n=_().guid(),s=t;s.id=n.toString(),_.delay(function(){i.getFakeBotAssets("entities").push(s),e({status:201,data:s})},this.__static__.artificialDelay)},getEntities:function(t,e){var i=t.q&&"string"==typeof t.q&&t.q.toLowerCase(),n=t.orderBy&&"string"==typeof t.orderBy?t.orderBy:void 0,s=this.getFakeBotAssets("entities"),o=_.map(s,function(t,e){return _.clone(t)});if(i&&(o=_.filter(o,function(t){return t.name.toLowerCase().indexOf(i)>=0})),n){var a=n.split(":");o=_.sortBy(o,function(t){return t[a[0]]}),"desc"===a[1]&&(o=o.reverse())}e({status:200,data:this.toItemsResult(o)})},addNewExamples:function(t,e){var i,n=[];if(t&&t.examples){var s=t.examples.sentences?t.examples.sentences:[t.examples.sentence],o=_.find(this.getFakeBotAssets("intents"),function(e){return e.id===t.id});s.forEach(_.bind(function(t){i=_().guid();var e={id:i.toString(),sentence:t};o.examples[i]=e,n.push(e)},this))}_.delay(e,this.artificialDelay,{status:200,data:n})},getServices:function(t,e){var i=this,n=t.q&&"string"==typeof t.q?t.q.toLowerCase():void 0,s=this.getFakeBotAssets("services");_.delay(function(){n&&(s=_.filter(s,function(t){return t.name.toLowerCase().indexOf(n)>=0})),e({status:200,data:i.toItemsResult(s)})},this.__static__.artificialDelay)},getRules:function(t,e){var i=this;this.restGet(_.bind(function(t){e({status:200,data:i.toItemsResult(t.data.items)})},this),"",{url:"/botsui/19.1.5-1907122019/mock/json/rules.json"})},createEntityRuleParam:function(t,e){e({status:200,data:{}})},getFlows:function(t,e){var i=this,n=t.q&&"string"==typeof t.q?t.q.toLowerCase():void 0,s=this.getFakeBotAssets("flows");_.delay(function(){n&&(s=_.filter(s,function(t){return t.name.toLowerCase().indexOf(n)>=0})),e({status:200,data:i.toItemsResult(s)})},this.__static__.artificialDelay)},getFlow:function(t,e){var i=this;_.delay(function(){var n=t.id,s=_.findWhere(i.getFakeBotAssets("flows"),{id:n});e(s?{status:200,data:s}:{status:404})},this.__static__.artificialDelay)},validateFlow:function(t,e){var i=this;_.delay(function(){i.restGet(e,"",{url:"/botsui/19.1.5-1907122019/mock/json/diagnostics.json"})},5*this.__static__.artificialDelay)},exportIntents:function(t,e){e({status:200,data:{}})},exportEntities:function(t,e){e({status:200,data:{}})},countTotalIntents:function(t,e){var i=this.getFakeBotAssets("intents");_.delay(function(){e({status:200,data:{totalResults:i.length}})},this.__static__.artificialDelay)},computeChatboxInstantAppsUrl:function(t,e){_.delay(function(){e({status:200,data:{url:"http://chatbox.com/#/"}})})},trainQnA:function(t,e){_.delay(function(){e({status:204})},this.__static__.artificialDelay)},trainEntity:function(t,e){_.delay(function(){e({status:204})},this.__static__.artificialDelay)},loadBotSettings:function(t,e){var i=this,n=t.botId;_.delay(function(){void 0===i.__static__.botsSettings||void 0===i.__static__.botsSettings[t.botId]?(i.__static__.botsSettings=i.__static__.botsSettings||[],i.restGet(_.bind(function(t){i.__static__.botsSettings[n]=t.data,e({status:200,data:i.__static__.botsSettings[n]})}),"",{url:"/botsui/19.1.5-1907122019/mock/json/bot.settings.json"})):e({status:200,data:i.__static__.botsSettings[n]})},this.__static__.artificialDelay)},updateBotSettings:function(t,e){var i=this,n=t.botId;_.delay(function(){$.extend(!0,i.__static__.botsSettings[n],_.omit(t,"botId")),e({status:200,data:i.__static__.botsSettings[n]})},this.__static__.artificialDelay)},loadBotDetails:function(t,e){var i=this,n=t.id;_.delay(function(){void 0===i.__static__.botsDetails||void 0===i.__static__.botsDetails[t.botId]?(i.__static__.botsDetails=i.__static__.botsDetails||[],i.restGet(_.bind(function(t){i.__static__.botsDetails[n]=t.data,e({status:200,data:i.__static__.botsDetails[n]})}),"",{url:"/botsui/19.1.5-1907122019/mock/json/bot.details.json"})):e({status:200,data:i.__static__.botsDetails[n]})},this.__static__.artificialDelay)},updateBotDetails:function(t,e){var i=this,n=t.id;_.delay(function(){$.extend(!0,i.__static__.botsDetails[n],_.omit(t,"id")),e({status:200,data:i.__static__.botsDetails[n]})},this.__static__.artificialDelay)},getStoreSkillPitch:function(t,e){var i=this;_.delay(function(){i.restGet(function(t){e({status:200,data:t.data})},"",{url:"/botsui/19.1.5-1907122019/mock/json/skillStoreUpdate.json"})},this.__static__.artificialDelay)},installStoreSkillUpdate:function(t,e){var i=this;_.delay(function(){i._isAbsoluteUrl(t.url)?i.log("Mock install of skill store update from absolute URL: "+t.url):i.log("Mock install of skill store update from relative URL: "+t.url),e({status:200,data:{}})},this.__static__.artificialDelay)},loadUserChannelsRoutingToBot:function(t,i){var n=this;_.delay(function(){n.restGet(function(t){var s=[];t.data&&t.data.items&&(s=_.filter(t.data.items,function(t){return t.category===e.ChannelEnum.CATEGORY_BOT}),_.each(s,function(t){_.extend(t,{markForStopping:ko.observable(!1)})})),i({status:200,data:n.toItemsResult(s)})},"",{url:"/botsui/19.1.5-1907122019/mock/json/channels.json"})},this.__static__.artificialDelay)},_preProcessChannel:function(t,i){var n,s=function(e){return e.name===t.name},o=function(t){return t.name===i.name},a=i?_.reject(this.getFakeBotAssets("channels"),o):this.getFakeBotAssets("channels");switch(_.some(a,s)&&(n="BOTS-53047"),n){case"BOTS-53047":return{status:400,message:'{ "status": 400, "o:errorCode": "'+n+'", "title": "Bad Request", "detail": "Channel name must be unique" }'}}switch(t.config.type){case e.ChannelTypeEnum.FACEBOOK.value:t.config.pageAccessToken&&t.config.pageAccessToken!==e.PLACEHOLDER_STRING_2?t.config.pageAccessTokenKey=t.config.pageAccessTokenKey||_.guid():i&&(t.config.pageAccessToken=i.config.pageAccessToken,t.config.pageAccessTokenKey=i.config.pageAccessTokenKey),t.config.appSecret&&t.config.appSecret!==e.PLACEHOLDER_STRING_2?t.config.appSecretKey=t.config.appSecretKey||_.guid():i&&(t.config.appSecret=i.config.appSecret,t.config.appSecretKey=i.config.appSecretKey),t.config.verifyToken=t.config.verifyToken||_.guid();break;case e.ChannelTypeEnum.TWILIO.value:t.config.authToken&&t.config.authToken!==e.PLACEHOLDER_STRING_2?t.config.authTokenKey=t.config.authTokenKey||_.guid():i&&(t.config.authToken=i.config.authToken,t.config.authTokenKey=i.config.authTokenKey);break;case e.ChannelTypeEnum.SLACK.value:t.config.clientSecret&&t.config.clientSecret!==e.PLACEHOLDER_STRING_2?t.config.clientSecretKey=t.config.clientSecretKey||_.guid():i&&(t.config.clientSecret=i.config.clientSecret,t.config.clientSecretKey=i.config.clientSecretKey),t.config.signingSecret&&t.config.signingSecret!==e.PLACEHOLDER_STRING_2?t.config.signingSecretKey=t.config.signingSecretKey||_.guid():i&&(t.config.signingSecret=i.config.signingSecret,t.config.signingSecretKey=i.config.signingSecretKey);break;case e.ChannelTypeEnum.WECHAT.value:t.config.token&&t.config.Token!==e.PLACEHOLDER_STRING_2?t.config.tokenKey=t.config.tokenKey||_.guid():i&&(t.config.token=i.config.token,t.config.tokenKey=i.config.tokenKey),t.config.appSecret&&t.config.appSecret!==e.PLACEHOLDER_STRING_2?t.config.appSecretKey=t.config.appSecretKey||_.guid():i&&(t.config.appSecret=i.config.appSecret,t.config.appSecretKey=i.config.appSecretKey);break;case e.ChannelTypeEnum.SERVICE_CLOUD.value:t.config.password&&t.config.password!==e.PLACEHOLDER_STRING_1?t.config.passwordTokenKey=t.config.passwordTokenKey||_.guid():i&&(t.config.password=i.config.password,t.config.passwordTokenKey=i.config.passwordTokenKey)}return t.callbackUri=t.callbackUri||"http://bots-connectors:8800/connectors/v1/tenants/botsomehost/listeners/"+t.config.type+"/channels/"+t.id,!0},_postProcessChannel:function(t){var i=JSON.parse(JSON.stringify(t));switch(i.config.type){case e.ChannelTypeEnum.FACEBOOK.value:i.config=_.pick(i.config,"type","pageAccessTokenKey","appSecretKey","verifyToken");break;case e.ChannelTypeEnum.WEBHOOK.value:i.config=_.pick(i.config,"type","secretKey","webhookUri","platformVersion");break;case e.ChannelTypeEnum.WEB.value:case e.ChannelTypeEnum.IOS.value:case e.ChannelTypeEnum.ANDROID.value:i.config=_.pick(i.config,"type","appId","appToken");break;case e.ChannelTypeEnum.TWILIO.value:i.config=_.pick(i.config,"type","accountSID","authTokenKey","phoneNumber","mmsEnabled");break;case e.ChannelTypeEnum.SLACK.value:i.config=_.pick(i.config,"type","clientId","clientSecretKey","signingSecretKey","authSuccessUrl","authErrorUrl");break;case e.ChannelTypeEnum.KAKAOTALK.value:i.config=_.pick(i.config,"type","keyboard");break;case e.ChannelTypeEnum.WECHAT.value:i.config=_.pick(i.config,"type","appId","appSecretKey","tokenKey");break;case e.ChannelTypeEnum.TEST.value:i.config=_.pick(i.config,"type","secretKey");break;case e.ChannelTypeEnum.SERVICE_CLOUD.value:i.config=_.pick(i.config,"type","domainName","hostPrefix","userName","passwordTokenKey");break;case e.ChannelTypeEnum.APPLICATION.value:i.config=_.pick(i.config,"type","applicationUrl","payloadStateMapping")}return i},updateChannel:function(t,e){var i=this;_.delay(function(){var n,s=t.id,o=_.findIndex(i.getFakeBotAssets("channels"),function(t){return t.id===s});o>-1?(n=i._preProcessChannel(t,i.getFakeBotAssets("channels")[o]),n===!0?(i.getFakeBotAssets("channels")[o]=t,e({status:200,data:i._postProcessChannel(t)})):e(n)):e({status:404})},this.__static__.artificialDelay)},getSkills:function(t,e){var i=this.getFakeBotAssets("skills"),n=_.map(i,function(t,e){return _.clone(t)});e({status:200,data:{items:n}})},getWebviews:function(t,e){var i=this,n=t.q&&"string"==typeof t.q?t.q.toLowerCase():void 0,s=this.getFakeBotAssets("webviews");_.delay(function(){n&&(s=_.filter(s,function(t){return t.name.toLowerCase().indexOf(n)>=0})),e({status:200,data:i.toItemsResult(s)})},this.__static__.artificialDelay)},getLanguages:function(t,e){var i=this.getFakeBotAssets("languages"),n=_.map(i,function(t,e){return _.clone(t)});e({status:200,data:{items:n}})}},t.stubProxy);return new n(i.config)}),define("bots.facade",["mcs.js.framework/facade","bots.model"],function(t,e){var i=t.extend("BaseFacade",{__static__:{globalChannels:{LOAD_PRODUCT_VERSION_INFO:{name:"bots.load.product.version.info",handler:function(t){e.getProductVersionInfo(null,_.bind(function(e){t.data=e,this.publish(t)},this))}},BOTS_LOAD_USER_PREFERENCES:{name:"bots.load.user.preferences",handler:function(t){e.getUserPreferences(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},BOTS_SAVE_USER_PREFERENCES:{name:"bots.save.user.preferences",handler:function(t){e.saveUserPreferences(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_BOT:{name:"bots.load.bot",handler:function(t){var i=t.data.id;e.getBot(t.data,_.bind(function(e){t.data=_.extend(e,{id:i}),this.publish(t)},this))}},LOAD_BOTS:{name:"bots.load.bots",handler:function(t){e.getBots(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_BOTS_PARALLEL:{name:"bots.load.bots.parallel",handler:function(t){e.getBotsParallel(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_BOTS_AND_DAS:{name:"bots.load.bots.das",handler:function(t){e.getBotsAndDAs(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_DAS:{name:"bots.load.das",handler:function(t){e.getDAs(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_BOT_VERSIONS:{name:"bots.load.bot.versions",handler:function(t){t.data.botName?e.getBotVersions(t.data,_.bind(function(e){t.data=e,this.publish(t)},this)):(t.data={status:200,data:{hasMore:!1,items:[],links:[],limit:0,totalResults:0}},this.publish(t))}},LOAD_BOT_NAMES:{name:"bots.load.bot.names",handler:function(t){e.getBotNames(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_DA_NAMES:{name:"bots.load.da.names",handler:function(t){e.getDANames(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},BOT_SELECT:{name:"bots.bot.select",handler:function(t){this.publish(t)}},BOT_ATTRIBUTES_CHANGE:{name:"bots.bot.attributes.change",handler:function(t){this.publish(t)}},CREATE_BOT:{name:"bots.create.bot",handler:function(t){var i=t.data.name,n=t.data.version;e.createBot(t.data,_.bind(function(e){t.data=_.extend(e,{name:i,version:n}),this.publish(t)},this))}},CREATE_DA:{name:"bots.create.da",handler:function(t){var i=t.data.name,n=t.data.version;e.createBot(t.data,_.bind(function(e){t.data=_.extend(e,{name:i,version:n}),this.publish(t)},this))}},EXPORT_BOT:{name:"bots.export.bot",handler:function(t){e.exportBot(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},EXPORT_DA:{name:"bots.export.da",handler:function(t){e.exportBot(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},CLONE_BOT:{name:"bots.clone.bot",handler:function(t){e.cloneBot(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},CLONE_VERSION:{name:"bots.clone.version",handler:function(t){e.cloneVersion(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},CLONE_DA:{name:"bots.clone.da",handler:function(t){e.cloneBot(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},PUBLISH_BOT:{name:"bots.publish.bot",handler:function(t){e.publishBot(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},DOWNLOAD_BOT_LOGS:{name:"bots.download.bot.logs",handler:function(t){e.downloadBotLogs(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},DOWNLOAD_INTENT_LOGS:{name:"bots.download.intent.logs",handler:function(t){e.downloadIntentLogs(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},DOWNLOAD_QNA_LOGS:{name:"bots.download.qna.logs",handler:function(t){e.downloadQnALogs(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},TRAIN_BOT:{name:"bots.train.bot",handler:function(t){e.trainBot(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},BOT_TRAINING_NEEDED:{name:"bots.bot.training.needed",handler:function(t){this.publish(t)}},BOTS_CATALOG_MODIFIED:{name:"bots.catalog.modified",handler:function(t){this.publish(t)}},BOTS_INTENTS_MODIFIED:{name:"bots.intents.modified",handler:function(t){this.publish(t)}},BOTS_ENTITIES_MODIFIED:{name:"bots.entities.modified",handler:function(t){this.publish(t)}},UPDATE_BOT:{name:"bots.update.bot",handler:function(t){e.updateBot(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},HIDE_BOT_PICKER:{name:"bots.hide.bot.picker",handler:function(t){this.publish(t)}},DRAWER_TOGGLE:{name:"bots.drawer.toggle",handler:function(t){this.publish(t)}},TRASH_BOT:{name:"bots.trash.bot",handler:function(t){var i=t.data.id;e.trashBot(t.data,_.bind(function(e){t.data=_.extend(e,{id:i}),this.publish(t)},this))}},TRASH_DA:{name:"bots.trash.da",handler:function(t){var i=t.data.id;e.trashBot(t.data,_.bind(function(e){t.data=_.extend(e,{id:i}),this.publish(t)},this))}},CREATE_ENTITY:{name:"bots.create.entity",handler:function(t){e.createEntity(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_ENTITIES:{name:"bots.get.entities",handler:function(t){e.getEntities(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_INTENTS:{name:"bots.get.intents",handler:function(t){e.getIntents(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_EXAMPLES:{name:"bots.get.examples",handler:function(t){e.getExamples(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},ADD_NEW_EXAMPLES:{name:"bots.add.new.examples",handler:function(t){e.addNewExamples(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_SERVICES:{name:"bots.load.services",handler:function(t){e.getServices(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_RULES:{name:"bots.get.rules",handler:function(t){e.getRules(t.data,_.bind(function(e){e&&e.data&&(e.data.items=_.filter(e.data.items,function(t){return"AGGREGATE"!==t.name})),t.data=e,this.publish(t)},this))}},CREATE_ENTITY_RULE_PARAM:{name:"bots.create.entity.rule.param",handler:function(t){e.createEntityRuleParam(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},SELECT_FLOW:{name:"bots.select.flow",handler:function(t){var e=t.data.id;t.data={status:200,id:e},this.publish(t)}},LOAD_FLOWS:{name:"bots.load.flows",handler:function(t){e.getFlows(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_FLOW:{name:"bots.load.flow",handler:function(t){var i=t.data.id;e.getFlow(t.data,_.bind(function(e){t.data=_.extend(e,{id:i}),this.publish(t)},this))}},VALIDATE_FLOW:{name:"bots.validate.flow",handler:function(t){var i=t.data.id,n=t.data.name;e.validateFlow(t.data,_.bind(function(e){t.data=_.extend(e,{id:i,name:n}),this.publish(t)},this))}},VALIDATE_DA:{name:"bots.validate.da",handler:function(t){e.validateDA(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_FLOW_STATES:{name:"bots.load.flow.states",handler:function(t){var i=t.data.id;e.getFlowStates(t.data,_.bind(function(e){t.data=_.extend(e,{id:i}),this.publish(t)},this))}},EXPORT_INTENTS:{name:"bots.export.intents",handler:function(t){e.exportIntents(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},EXPORT_ENTITIES:{name:"bots.export.entities",handler:function(t){e.exportEntities(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},COUNT_TOTAL_INTENTS:{name:"bots.count.total.intents",handler:function(t){e.countTotalIntents(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},COMPUTE_CHATBOX_INSTANTAPPS_URL:{name:"compute.chatbox.instantapps.url",handler:function(t){e.computeChatboxInstantAppsUrl(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},TRAIN_QNA:{name:"bots.train.qna",handler:function(t){e.trainQnA(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},TRAIN_ENTITY:{name:"bots.train.entity",handler:function(t){e.trainEntity(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},EXPORT_QNA_CONTENT:{name:"bots.export.qnaContent",handler:function(t){e.exportQnAContent(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_BOT_SETTINGS:{name:"bots.load.bot.settings",handler:function(t){e.loadBotSettings(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},UPDATE_BOT_SETTINGS:{name:"bots.update.bot.settings",handler:function(t){e.updateBotSettings(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_BOT_DETAILS:{name:"bots.load.bot.details",handler:function(t){e.loadBotDetails(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},UPDATE_BOT_DETAILS:{name:"bots.update.bot.details",handler:function(t){e.updateBotDetails(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},OPEN_TRANSLATION_SERVICE_POPUP:{name:"bots.open.translation.service.popup",handler:function(t){this.publish(t)}},GET_STORE_SKILL_PITCH:{name:"bots.get.store.skill.pitch",handler:function(t){e.getStoreSkillPitch(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},INSTALL_STORE_SKILL_UPDATE:{name:"bots.install.store.skill.update",handler:function(t){e.installStoreSkillUpdate(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_USER_CHANNELS_ROUTING_TO_BOT:{name:"bots.load.user.channels.routing.to.bot",handler:function(t){e.loadUserChannelsRoutingToBot(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},UPDATE_USER_CHANNEL:{name:"bots.update.user.channel",handler:function(t){var i=t.data.id,n=t.data.name,s=t.txnId;e.updateChannel(t.data,_.bind(function(e){t.data=_.extend(e,{id:i,name:n,txnId:s}),this.publish(t)},this));
}},LOAD_SKILLS:{name:"get.skills",handler:function(t){e.getSkills(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_WEBVIEWS:{name:"bots.load.webviews",handler:function(t){e.getWebviews(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_LANGUAGES:{name:"bots.load.languages",handler:function(t){e.getLanguages(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}}}},BaseFacade:function(){this._super()},notify:function(t,e){return this._super(t,e)},handleConcurrentUpdate:function(t){if(t.data&&(403===t.data.status||412===t.data.status)){if(t.overrideConcurrentUpdate)return!0;t.etag&&this.log(this.__fqclassname__,"(miecs-12362 debug) handleConcurrentUpdate: evt=",t);var e=JSON.parse(t.data.message);return this.notify({CONCURRENT_UPDATE_NOTIFICATION:{data:{username:e["bots:username"],assetType:t.assetType||e["bots:assetType"],updateConfig:t.concurrentUpdate,statusCode:t.data.status}}}),!0}return!1}});return new i}),define("bots.config",["module","bots.i18n","bots.facade","moment"],function(t,e,i,n){var s=require("suite.config"),o=require("bots.dataobject"),a=Class.extend({module:t,name:"BotConfig"},{config:{},currentBot:o.BotMetaFactory.newObject(o.BotMetaFactory.FillEnum.SCALARS),observableCurrentBot:ko.observable({}),templateData:_.extend({},s.templateData,{botsStickyContextHeaderGeometry:{contextHeaderHeight:66,totalHeaderHeight:s.templateData.suiteStickyContextHeaderGeometry.brandingBarHeight+66,testerWidth:400,defectViewerHeight:250}}),BotConfig:function(t){_.extend({},this.config,t),i.listen({LOAD_BOT:{data:_.bind(function(t){200===t.status&&t.data&&this.currentBot&&this.currentBot.id===t.data.id&&(this.currentBot=t.data,this.observableCurrentBot(t.data))},this)},BOT_SELECT:{data:_.bind(function(t){this.currentBot=t.selectedBot,this.observableCurrentBot(t.selectedBot)},this)},BOT_ATTRIBUTES_CHANGE:{data:_.bind(function(t){_.extend(this.currentBot,_.pick(t,"name","displayName","version","category","status","description"))},this)}})},getAppConfig:function(){return s.getAppConfig()},isLtr:function(){return s.isLtr()},getScreenSize:function(){return s.getScreenSize()},getUsername:function(){return s.getUsername()},getUser:function(){return s.getUser()},getRoles:function(){return s.getRoles()},getCurrentBot:function(){return this.currentBot},getDateRanges:function(){return this.getAppConfig().dateRanges},getDefaultDateRange:function(){return this.getAppConfig().dateRanges[0]},getDateNow:function(){return n().tz((this.getCurrentBot()||{}).timeZone||e.guessTimezone())},getDateRange:function(t,e,i){var s=_.findWhere(this.getAppConfig().dateRanges,{id:t}),o=this.templateData.dateFormats,a=this.getDateNow();return"custom"===t&&e&&i?$.extend(!0,{},s,{now:a.format(o.isoDate),startDate:e,endDate:i,datetime:{startDate:this._resetTime("min",n(e)).format(o.isoDateTime),endDate:this._resetTime("max",n(i)).format(o.isoDateTime)}}):"number"==typeof s.startOffset||"number"==typeof s.endOffset?(e=a.clone().subtract(Math.abs(s.startOffset),"days"),i=a.clone().subtract(Math.abs(s.endOffset),"days"),$.extend(!0,{},s,{now:a.format(o.isoDate),startDate:e.format(o.isoDate),endDate:i.format(o.isoDate),datetime:{startDate:this._resetTime("min",n(e)).format(o.isoDateTime),endDate:this._resetTime("max",n(i)).format(o.isoDateTime)}})):s},mapDateRange:function(t,e,i){if(t&&e&&i){var s=n.duration(n(e).diff(n(t))).asDays(),o=n.duration(n(i).diff(n(t))).asDays(),a=_.find(this.getAppConfig().dateRanges,function(t){return t.startOffset===s&&t.endOffset===o});return a?_.extend({},a,{startDate:e,endDate:i}):_.extend({},_.findWhere(this.getAppConfig().dateRanges,{id:"custom"}),{startDate:e,endDate:i})}return this.getDefaultDateRange()},_resetTime:function(t,e){return"min"===t?e.hour(0).minute(0).second(0).millisecond(0):"max"===t?e.hour(23).minute(59).second(0).millisecond(0):void 0}});return new a}),define("botsualinks_om",{assistance:{initialTour:{botsLanding:"DACUA-GUID-A782BB61-0602-45BE-95D9-DCE677260F25",intents:"DACUA-GUID-D59BF20D-DFAC-4CF9-A672-9FCE8F770DCB",entities:"DACUA-GUID-684BCEE1-F628-4172-88A7-6F693E1589DD",flows:"DACUA-GUID-0BB3AD05-C215-481F-9D0C-CF647017D659",componentsServices:"DACUA-GUID-A93D7DAB-DCCE-42CD-8E6B-A06FB9BEE90D",settingsChannels:"DACUA-GUID-581C14C7-4BD8-495F-8AF8-368CEFCBBF23",tester:{intent:"DACUA-GUID-CF17D5D8-6C33-4803-A61B-1E147AE41CAE",bot:"DACUA-GUID-0C3BF9FB-563D-427C-8536-4E98C115CDB0"}}},bots:{none:{tellMeMore:"DACUA-GUID-A782BB61-0602-45BE-95D9-DCE677260F25"},versionNone:{tellMeMore:"DACUA-GUID-A782BB61-0602-45BE-95D9-DCE677260F25"},teachMeHow:{"ollBaseUri-relUrl":"44785:112:0::::P112_CONTENT_ID:20866"},translationServiceDialog:{nocontent:{tellMeMore:"DACUA-GUID-997ED305-D011-4E89-9440-566092A4870A"}},authServicesDialog:{nocontent:{tellMeMore:"DACUA-GUID-3337DC59-0C03-4A0A-8B84-153D4F892839"}}},flows:{selectComponentHelp:"DACUA-GUID-121A9B9F-6196-4DDE-A930-D7A2E2F3F2D9",selectComponentDisabledHelp:"DACUA-GUID-121A9B9F-6196-4DDE-A930-D7A2E2F3F2D9"},intents:{landing:{nocontent:{tellMeMore:"DACUA-GUID-D59BF20D-DFAC-4CF9-A672-9FCE8F770DCB"},associatedEntities:{nocontent:{tellMeMore:"DACUA-GUID-D59BF20D-DFAC-4CF9-A672-9FCE8F770DCB"}},intentEntities:{nocontent:{tellMeMore:"DACUA-GUID-684BCEE1-F628-4172-88A7-6F693E1589DD"}},examples:{headerHelp:"DACUA-GUID-E46E1282-8972-4A91-929F-BDEB2C6D616E"}}},entities:{landing:{nocontent:{tellMeMore:"DACUA-GUID-684BCEE1-F628-4172-88A7-6F693E1589DD"},description:{entityTypeHelp:"DACUA-GUID-8742E00F-4833-432B-92A7-382C920C4CFF"},prompt:{promptHelp:"DACUA-GUID-7A05DC1C-A490-485A-8652-6337413D48DD"}}},bundles:{landing:{nocontent:{tellMeMore:"DACUA-GUID-61B5D155-5910-4E5D-84FE-2BB9A1ECE240"}}},qna:{landing:{nocontent:{tellMeMore:"DACUA-GUID-B2FA5BC1-A9EF-4258-9E40-5A8FD22E9646"},source:{file:{fileHelp:"DACUA-GUID-B78608F8-0E56-441D-A377-35AEED7799F0"}}}},components:{nocontent:{tellMeMore:"DACUA-GUID-31A4AE8E-2505-4CD0-8631-8C23A0AE5DCB"},none:{tellMeMore:"DACUA-GUID-A93D7DAB-DCCE-42CD-8E6B-A06FB9BEE90D"},services:{httpBasicAuth:{mobileBackendId:{tellMeMore:"DACUA-GUID-1C139B03-E691-4F83-9FCB-665551B05346"},anonymousKey:{tellMeMore:"DACUA-GUID-1C139B03-E691-4F83-9FCB-665551B05346"}}},webviews:{}},settings:{general:{trainingModelHelp:"DACUA-GUID-88BFB14C-1F43-4129-BC69-59D5F378710A"},channels:{none:{tellMeMore:"DACUA-GUID-581C14C7-4BD8-495F-8AF8-368CEFCBBF23"},channelType:{help:"DACUA-GUID-581C14C7-4BD8-495F-8AF8-368CEFCBBF23"}},agentIntegrations:{none:{tellMeMore:"DACUA-GUID-8E791415-6559-40C8-A5F7-B3939F719162"}},application:{none:{tellMeMore:"DACUA-GUID-8E791415-6559-40C8-A5F7-B3939F719162"}},routingconfig:{addReqVerbsHelp:"DACUA-GUID-82A8E241-5ED1-4B7C-8583-F6CBAEB6254B",reqVerbsPrefixHelp:"DACUA-GUID-82A8E241-5ED1-4B7C-8583-F6CBAEB6254B",reqVerbsExpansionHelp:"DACUA-GUID-82A8E241-5ED1-4B7C-8583-F6CBAEB6254B",questionVerbsPrefixHelp:"DACUA-GUID-82A8E241-5ED1-4B7C-8583-F6CBAEB6254B"},da:{interaction:{utteranceHeaderHelp:"DACUA-GUID-E46E1282-8972-4A91-929F-BDEB2C6D616E",invocationHelp:"DACUA-GUID-F6D8EA8F-B411-4A2C-8EC4-BB5CEA46C63A"}},events:{bot:{none:{tellMeMore:"DACUA-GUID-F6745558-CAB6-4C4C-9EE0-EB743A9EFDF3"}}}},quality:{utterances:{landing:{nocontent:{tellMeMore:"DACUA-GUID-64EBAEE6-B552-4DCE-89A3-38626005189C"}}},suggestions:{landing:{nocontent:{tellMeMore:"DACUA-GUID-64EBAEE6-B552-4DCE-89A3-38626005189C"}}}},channels:{user:{none:{tellMeMore:"DACUA-GUID-581C14C7-4BD8-495F-8AF8-368CEFCBBF23"},channelType:{help:"DACUA-GUID-581C14C7-4BD8-495F-8AF8-368CEFCBBF23"}},agentIntegration:{none:{tellMeMore:"DACUA-GUID-8E791415-6559-40C8-A5F7-B3939F719162"}},application:{none:{tellMeMore:"DACUA-GUID-FBE4BCCD-736C-4D2D-9119-8AED4CE1B72C"}}},skills:{landing:{noContent:{tellMeMore:"DACUA-GUID-386AB33B-C131-4A0A-9138-6732AE841BD8"}}},dasettings:{events:{da:{none:{tellMeMore:"DACUA-GUID-FBE4BCCD-736C-4D2D-9119-8AED4CE1B72C"}}}},insights:{pathing:{export:{nocontent:{tellMeMore:"DACUA-GUID-EF05A725-45CD-4FF1-8C00-E425AC218045"}}}},dataManagement:{manage:{nocontent:{tellMeMore:"DACUA-GUID-A6A5F798-7A9E-45DE-BB1C-85101072C6FB"},tellMeMore:"DACUA-GUID-ED716E78-BB9C-4E53-B09B-D7AC9EB1CA75"}},builder:{assistant:{gettingStarted:{link:"DACUA-GUID-D995B313-421E-4944-BB59-607D70DDF8E7"},bestPractices:{link:"DACUA-GUID-1AD2E2CA-3230-4D26-BBBF-1B7D003B9E1D"},glossary:{link:"DACUA-GUID-00795E2F-86A7-4C97-B84C-3EC8990C4500"}}}}),define("bots.ua",["module","suite.ua","botsualinks_om"],function(t,e,i){var n=e.getKlazz().extend({module:t,name:"BotsUA"},{BotsUA:function(){this._super(i)}});return new n}),define("bots.router",["suite.router","suite.package.shell/shell","suite.package.permissions/suite.permissions","suite.package.util/messaging","bots.i18n","bots.facade","bots.config"],function(t,e,i,n,s,o,a){var r=t.__class__.extend("BotsRouter",{__static__:{customDateConverter:oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({pattern:a.templateData.dateFormats.date2}),recentlyDeletedAssetIds:{}},deps:{i18n:s,facade:o,botsConfig:a},config:{templateData:a.templateData},showFirstUseUAPromise:null,returnNavigationFragment:void 0,BotsRouter:function(t){this._super(t),this.__static__.listenToHistory(_.bind(function(t){this.closeFullPagePopupsOnRouteChange(t)},this)),this._installListenerForDeletedAsset()},_installListenerForDeletedAsset:_.once(function(){var t=this;o.listen({TRASH_BOT:function(e){e.status<=204&&(t.__static__.recentlyDeletedAssetIds.botId=e.id)},TRASH_DA:function(e){e.status<=204&&(t.__static__.recentlyDeletedAssetIds.botId=e.id)}})}),registerRoutes:function(t,e){this.processContext=_.wrap(this.processContext,this.bootstrapBotsUI),this._super(t,e||this)},bootstrapBotsUI:function(t){var e=Array.prototype.slice.call(arguments,1),i=$.Deferred(),n=require("bots.preferences");return this.deps.preferences=n,this.deps.preferences.loadAll().always(_.bind(function(s){var o;if("function"==typeof t){var a=t.apply(this,e);a&&"function"==typeof a.then?a.then(function(){i.resolve.apply(null,Array.prototype.slice.call(arguments)),o=n.get("ua"),o&&o.developmentMode&&(o=_.omit(o,"developmentMode"),require("bots.ua").setProjectUAConfig(o),require("suite.ua").setProjectUAConfig(o))},function(){i.reject.apply(null,Array.prototype.slice.call(arguments))}):(i.resolve(a),o=n.get("ua"),o&&o.developmentMode&&(o=_.omit(o,"developmentMode"),require("bots.ua").setProjectUAConfig(o),require("suite.ua").setProjectUAConfig(o)))}},this)),i},_contextRouteClosure:function(t,e,i){this._super(t,e,i),require("bots.package.shell/context.header").bindings.botsContextView(t)},processContext:function(t){var i=$.Deferred();return t.botId||(t.botId=this._getBootstrapBot()),t.botId&&require("bots.router").__static__.recentlyDeletedAssetIds.botId===t.botId&&(this.log("Skip processing context for recently deleted bot: "+t.botId),delete t.botId,require("bots.router").__static__.lastBotId=void 0),t.botId?this.deps.facade.notify({LOAD_BOT:{data:{id:t.botId}}},{promise:!0}).always(_.bind(function(a){if(a.status>200&&401!==a.status){require("bots.router").__static__.recentlyDeletedAssetIds.botId=t.botId,delete t.botId,require("bots.preferences").set("bots",{defaultBot:null},!0);var r=this._stripContext(this.getFragment()),l=s.translate("bots.route.zeroday",t.botId),d=_.bind(function(){_.defer(_.bind(function(){this.navigateBotCatalog(),_.delay(function(){n.showError(l),_.delay(function(){e.__static__.spinnerCounter>0&&(e.__static__.spinnerCounter=1,e.showSpinner(!1))},1e3)},700)},this))},this);i.reject(t),o.listenOnce({ROUTE_DISPLAY:{data:$.noop}},{promise:!0}).always(function(t){if(r.indexOf("bot/")!==-1){var e=function(){o.listenOnce({SUB_ROUTE_DISPLAY:function(t){t.subRoute&&t.subRoute.indexOf(r)!==-1?d():e()}})};e()}else d()}),this.warn(l)}else{var c=a.data,u=c.id!==require("bots.router").__static__.lastBotId;u&&(_.defer(_.bind(function(){this.deps.facade.notify({BOT_SELECT:{data:{id:c.id,previousBot:this.deps.botsConfig.getCurrentBot(),selectedBot:c}}})},this)),require("bots.router").__static__.lastBotId=c.id),i.resolve(t)}},this)):i.resolve(_.omit(t,"botId")),i},_getBootstrapBot:function(){return(this.deps.botsConfig.getCurrentBot()||{}).id||require("bots.preferences").get("bots").defaultBot||null},navigateSameBot:function(t){this.navigateBot(this.deps.botsConfig.getCurrentBot().id,t)},navigateBot:function(t,e){var i=(this.deps.botsConfig.getCurrentBot()||{}).id!==t,n=this._stripContext(this.getFragment());return e&&0!==e.indexOf("bot/")&&(e="bot/"+e),!!(i||e&&e!==n)&&(this.navigate(this._encodeContext({botId:t})+"/"+(e?e:n),{trigger:!0}),i&&require("bots.preferences").set("bots",{defaultBot:t},!0),!0)},navigateBotWithName:function(t,e){this.deps.facade.notify({LOAD_BOTS:{data:{q:t}}},{promise:!0}).always(_.bind(function(t){if(t.status<=201){var i=_.first(t.data.items);i?this.navigateBot(i.id,e):this.navigateSameBot(e)}},this))},navigateBotCatalog:function(t){return this.navigate("bot",t||{trigger:!0}),!0},navigateDACatalog:function(t){return this.navigate("da",t||{trigger:!0}),!0},navigateDA:function(t,e){var i=(this.deps.botsConfig.getCurrentBot()||{}).id!==t,n=this._stripContext(this.getFragment());return e&&0!==e.indexOf("da/")&&(e="da/"+e),!!(i||e&&e!==n)&&(this.navigate(this._encodeContext({botId:t})+"/"+(e?e:n),{trigger:!0}),i&&require("bots.preferences").set("bots",{defaultBot:t},!0),!0)},navigateDAWithName:function(t,e){this.deps.facade.notify({LOAD_DAS:{data:{q:t}}},{promise:!0}).always(_.bind(function(t){if(t.status<=201){var i=_.first(t.data.items);i?this.navigateDA(i.id,e):this.navigateSameDA(e)}},this))},navigateSameDA:function(t){this.navigateDA(this.deps.botsConfig.getCurrentBot().id,t)},setReturnFromFirstUseUA:function(t){var e=require("bots.router");e.returnNavigationFragment=t?void 0:this._stripContext(this.getFragment())},showFirstUseUAIfNeeded:function(){var t=require("bots.preferences").get("assistance"),e=require("bots.router");return!!t.showInitialTour&&(this._endTransition(),this.setReturnFromFirstUseUA(),e.navigate("assistance",{trigger:!0}),e.showFirstUseUAPromise=$.Deferred(),e.showFirstUseUAPromise)},returnFromFirstUseUA:function(t){var e=this;require("bots.preferences").set("assistance",t).always(function(){var t=require("bots.router");t.returnNavigationFragment?(t.navigate(t.returnNavigationFragment,{trigger:!0}),e.setReturnFromFirstUseUA(!0),t.showFirstUseUAPromise.resolve({}),t.showFirstUseUAPromise=null):t.navigateBotCatalog()})},closeFullPagePopupsOnRouteChange:function(t){$("#bots-fullpage-popup-container").children().each(function(){$(this).botsFullPagePopup("close")}),$("#da-fullpage-popup-container").children().each(function(){$(this).botsFullPagePopup("close")})}});return new r}),define("bots.router.tab",["suite.config","bots.router","mcs.js.framework/router.tab"],function(t,e,i){var n=i(e.__class__).extend("BaseTabRouter",{BaseTabRouter:function(t){this._super(t)},setTabs:function(e,i,n,s){var o=(require("suite.package.permissions/suite.permissions")||{})[(t.getDefaultEnvironment()||{}).envId];this._setDisabledTabs(o,this.config.tabs),this._super(e,i,n,s)},_setDisabledTabs:function(t,e){for(var i=[],n=e.selector,s=0,o=e.children;o&&s<o.length;s++){var a=o[s];a.permission&&t&&!t[a.permission]&&i.push(s),a.children&&this._setDisabledTabs(t,a)}$(n).ojTabs({disabledTabs:i})},navigate:function(t,e){return this.__static__.closeDialogsOnRouteChange(),this._super(t,e)}});return n}),define("bots.defaultpreferences",[],function(){return{assistance:{showInitialTour:!1},da:{sortBy:"nameAsc"},bot:{sortBy:"nameAsc",showOnlyLatest:!0},flows:{theme:"default"},insights:{dateRange:{id:"last-7-days",startOffset:-7,endOffset:0}},tester:{botInitialUA:!0,intentInitialUA:!0,batchintentInitialUA:!0}}}),define("bots.preferences",["module","suite.package.util/messaging","bots.facade","bots.defaultpreferences","suite.config"],function(t,e,i,n,s){var o=Class.extend({module:t,name:"UserPreferences"},{__static__:{modulesObservableMap:{}},_defaultPreferences:n,_serverPreferences:{},_serverPreferencesCopy:{},_loadAllPromise:void 0,UserPreferences:function(){},loadAll:function(){var t=this;return this._loadAllPromise||(this._loadAllPromise=$.Deferred(),i.notify({BOTS_LOAD_USER_PREFERENCES:{data:{}}},{promise:!0}).then(function(e){t._serverPreferences=e.data&&e.data.state||{},e.status>400&&404!==e.status&&_.extend(t._serverPreferences,{assistance:{showInitialTour:!1}}),t._serverPreferencesCopy=$.extend(!0,{},t._serverPreferences),t._loadAllPromise.resolve(e)},function(i){e.showI18nError(i),t._loadAllPromise.reject(i)})),this._loadAllPromise},getAll:function(){return $.extend(!0,{},this._defaultPreferences,this._serverPreferences)},get:function(t){var e=this._serverPreferences[t];return e!==!1&&(e=e||this._defaultPreferences[t]),void 0===e?{}:"object"==typeof e?$.extend(!0,{},this._defaultPreferences[t],this._serverPreferences[t]):e},getModuleObservable:function(t){var e=t,n=this,s=this.__static__.modulesObservableMap[e];return s||(s=ko.observable(n.get(e)),this.__static__.modulesObservableMap[e]=s,s.subscribe(function(t,i){void 0===i&&s.arguments.length>1&&(i=s.arguments[1]),n.set(e,t,i)}),i.listen({BOTS_SAVE_USER_PREFERENCES:{data:function(){var t=n.get(e),i=s();_.isEqual(t,i)||_.defer(function(){s(t)})}}})),s},saveAll:function(t){var e=$.Deferred();return!t&&_.isEqual(this._serverPreferences,this._serverPreferencesCopy)?e.resolve(!1):(i.notify({BOTS_SAVE_USER_PREFERENCES:{data:this._serverPreferences}},{promise:!0}).then(_.bind(function(t){this._serverPreferencesCopy=$.extend(!0,{},this._serverPreferences),e.resolve(t)},this),_.bind(function(t){this._serverPreferences=$.extend(!0,{},this._serverPreferencesCopy),e.reject()},this)),e)},set:function(){var t=!1;return 1!==arguments.length&&2!==arguments.length||"object"!=typeof arguments[0]?2!==arguments.length&&3!==arguments.length||"string"!=typeof arguments[0]?(this.error("Invalid arguments to set()",arguments),$.Deferred().reject()):(t=arguments[2]||!1,t&&this._serverPreferences[arguments[0]]&&("object"==typeof arguments[1]||Array.isArray(arguments[1]))?this._serverPreferences[arguments[0]]=$.extend(!0,this._serverPreferences[arguments[0]],arguments[1]):this._serverPreferences[arguments[0]]=arguments[1],this.saveAll()):(t=arguments[1]||!1,this._serverPreferences=$.extend(t,this._serverPreferences,arguments[0]),this.saveAll())},delete:function(){for(var t in arguments)delete this._serverPreferences[arguments[t]];return this.saveAll()}});return new o}),function(t){function e(t,e){return t.w('<div class="oj-flex oj-sm-flex-items-initial oj-sm-flex-wrap-nowrap bots-helper-zero-min-width">').x(e.get(["isHalfChromeButton"],!1),e,{else:i,block:h},{}).w("</div>")}function i(t,e){return t.w('<!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --><button id="').x(e.get(["idPrefix"],!1),e,{block:n},{}).w('asset-dropdown-button"class="').x(e.get(["klazz"],!1),e,{else:s,block:o},{}).w("\"data-bind=\"ojComponent: { component: 'ojButton',label: ").x(e.get(["baseLabelLastTokenOf"],!1),e,{else:a,block:r},{}).w(",display: 'all',icons: { start: 'bots-svgsprite-cta-icon', end: 'oj-component-icon oj-button-menu-dropdown-icon' } }").x(e.get(["baseSvgSprite"],!1),e,{block:l},{}).w(",click: function(evt) {$( '#").x(e.get(["idPrefix"],!1),e,{block:d},{}).w("asset-picker' ).ojPopup( 'open', '#").x(e.get(["idPrefix"],!1),e,{block:c},{}).w("asset-dropdown-button' );$( '#").x(e.get(["idPrefix"],!1),e,{block:u},{}).w("asset-picker-list' ).ojListView( 'refresh' );}\"></button><!-- /ko -->")}function n(t,e){return t.f(e.get(["idPrefix"],!1),e,"h").w("-")}function s(t,e){return t.w("green-button")}function o(t,e){return t.f(e.get(["klazz"],!1),e,"h")}function a(t,e){return t.f(e.get(["baseLabel"],!1),e,"h")}function r(t,e){return t.w("{ value: ").f(e.get(["baseLabel"],!1),e,"h").w(", lastTokenOf: ").f(e.get(["baseLabelLastTokenOf"],!1),e,"h").w(" }")}function l(t,e){return t.w(",inlinesvg: { width: 16, height: 16, project: 'bots', basename: '").f(e.get(["baseSvgSprite"],!1),e,"h").w("' }")}function d(t,e){return t.f(e.get(["idPrefix"],!1),e,"h").w("-")}function c(t,e){return t.f(e.get(["idPrefix"],!1),e,"h").w("-")}function u(t,e){return t.f(e.get(["idPrefix"],!1),e,"h").w("-")}function h(t,e){return t.w("<!-- ko if: ").f(e.get(["baseLabel"],!1),e,"h",["s"]).w(' --><div class="oj-flex-item bots-helper-zero-min-width ').nx(e.get(["notInHdrBaseLabelKlazz"],!1),e,{else:b,block:g},{}).w('"><div data-bind="ellipsisTip: ').x(e.get(["baseLabelLastTokenOf"],!1),e,{else:f,block:p},{}).w('"></div></div><!-- /ko -->').x(e.get(["notInHdrBaseLabelKlazz"],!1),e,{block:m},{}).x(e.get(["baseTagLabel"],!1),e,{block:k},{}).w("<!-- ko if: ").x(e.get(["isEnabled"],!1),e,{else:B,block:S},{}).w(' --><div class="oj-flex-item oj-sm-align-items-center"><button tabIndex="0" id="').x(e.get(["idPrefix"],!1),e,{block:C},{}).w('asset-dropdown-hc-button"aria-label="').h("i18n",e,{},{key:"bots.picker.label",filter:"h"},"h").w('"').x(e.get(["notInHdrButtonKlazz"],!1),e,{block:D},{}).w("data-bind=\"ojComponent: { component: 'ojButton'").x(e.get(["baseTooltip"],!1),e,{block:I},{}).w(",display: 'icons',chroming: 'half',icons: { start: 'bots-svgsprite-func-icon' },rootAttributes: { class: '").nx(e.get(["notInHdrButtonKlazz"],!1),e,{block:R},{}).w("bots-helper-28x28 ").x(e.get(["klazz"],!1),e,{block:N},{}).w("' } }").x(e.get(["baseSvgSprite"],!1),e,{block:O},{}).w(",click: function(evt) {$( '#").x(e.get(["idPrefix"],!1),e,{block:P},{}).w("asset-picker' ).ojPopup( 'open', '#").x(e.get(["idPrefix"],!1),e,{block:L},{}).w("asset-dropdown-hc-button' );$( '#").x(e.get(["idPrefix"],!1),e,{block:M},{}).w("asset-picker-list' ).ojListView( 'refresh' );}\"></button></div><!-- /ko -->")}function b(t,e){return t.f(e.get(["notInHdrBaseLabelKlazz"],!1),e,"h").w(" oj-sm-align-self-center")}function g(t,e){return t.w("ap-picker-header")}function f(t,e){return t.f(e.get(["baseLabel"],!1),e,"h")}function p(t,e){return t.w("{ value: ").f(e.get(["baseLabel"],!1),e,"h").w(", lastTokenOf: ").f(e.get(["baseLabelLastTokenOf"],!1),e,"h").w(" }")}function m(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["baseLabel"],!1),e,"h",["s"]).w(' --><div class="oj-flex-item bots-helper-zero-min-width ').f(e.get(["notInHdrBaseLabelKlazz"],!1),e,"h").w(' placeholder oj-sm-align-self-center"><div data-bind="ellipsisTip: ').x(e.get(["placeholderRbKey"],!1),e,{else:v,block:w},{}).w('"></div></div><!-- /ko -->')}function v(t,e){return t.x(e.get(["placeholder"],!1),e,{else:_,block:y},{})}function _(t,e){return t.w("''")}function y(t,e){return t.f(e.get(["placeholder"],!1),e,"h")}function w(t,e){return t.w("$root.i18n.translate('").f(e.get(["placeholderRbKey"],!1),e,"h").w("')")}function k(t,e){return t.w("<!-- ko if: ").f(e.get(["baseTagLabel"],!1),e,"h",["s"]).w(' --><div class="oj-flex-item bots-helper-zero-min-width').x(e.get(["notInHdrBaseTagLabelKlazz"],!1),e,{block:T},{}).w('"><div class="').nx(e.get(["notInHdrBaseTagLabelKlazz"],!1),e,{else:E,block:x},{}).w('"data-bind="ellipsisTip: ').x(e.get(["baseTagLabelLastTokenOf"],!1),e,{else:j,block:A},{}).w('"></div></div><!-- /ko -->')}function T(t,e){return t.w(" oj-sm-align-self-center")}function E(t,e){return t.f(e.get(["notInHdrBaseTagLabelKlazz"],!1),e,"h")}function x(t,e){return t.w("ap-tag-label")}function j(t,e){return t.f(e.get(["baseTagLabel"],!1),e,"h")}function A(t,e){return t.w("{ value: ").f(e.get(["baseTagLabel"],!1),e,"h").w(", lastTokenOf: ").f(e.get(["baseTagLabelLastTokenOf"],!1),e,"h").w(" }")}function B(t,e){return t.w("true")}function S(t,e){return t.f(e.get(["isEnabled"],!1),e,"h",["s"]).w("()")}function C(t,e){return t.f(e.get(["idPrefix"],!1),e,"h").w("-")}function D(t,e){return t.w('class="').f(e.get(["notInHdrButtonKlazz"],!1),e,"h").w('"')}function I(t,e){return t.w(",label: ").f(e.get(["baseTooltip"],!1),e,"h")}function R(t,e){return t.w("header-halfchrome-button ")}function N(t,e){return t.w(" ").f(e.get(["klazz"],!1),e,"h")}function O(t,e){return t.w(",inlinesvg: { width: 16, height: 16, project: 'bots', basename: '").f(e.get(["baseSvgSprite"],!1),e,"h").w("' }")}function P(t,e){return t.f(e.get(["idPrefix"],!1),e,"h").w("-")}function L(t,e){return t.f(e.get(["idPrefix"],!1),e,"h").w("-")}function M(t,e){return t.f(e.get(["idPrefix"],!1),e,"h").w("-")}return t.register("bots/common/asset.picker",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,b.__dustBody=!0,g.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,v.__dustBody=!0,_.__dustBody=!0,y.__dustBody=!0,w.__dustBody=!0,k.__dustBody=!0,T.__dustBody=!0,E.__dustBody=!0,x.__dustBody=!0,j.__dustBody=!0,A.__dustBody=!0,B.__dustBody=!0,S.__dustBody=!0,C.__dustBody=!0,D.__dustBody=!0,I.__dustBody=!0,R.__dustBody=!0,N.__dustBody=!0,O.__dustBody=!0,P.__dustBody=!0,L.__dustBody=!0,M.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="bots-helper-offscreen"> <div id="').x(e.get(["idPrefix"],!1),e,{block:i},{}).w("asset-picker\"data-bind=\"ojComponent: { component: 'ojPopup',position: { at: ").x(e.get(["atPosition"],!1),e,{else:n,block:s},{}).w(",my: ").x(e.get(["myPosition"],!1),e,{else:o,block:a},{}).w(",collision: 'fit' },tail: '").x(e.get(["tailType"],!1),e,{else:r,block:l},{}).w("',").x(e.get(["beforeClose"],!1),e,{block:d},{}).x(e.get(["beforeOpen"],!1),e,{block:c},{}).w("rootAttributes: { class: 'ap-asset-picker-popup").x(e.get(["popupKlazz"],!1),e,{block:u},{}).w('\' } }"><div class="oj-flex bots-helper-max-width oj-flex-direction-row">').x(e.get(["newAssetClickHandler"],!1),e,{block:h},{}).x(e.get(["moreActionsAvailable"],!1),e,{block:p},{}).w("</div>").x(e.get(["searchByInputValue"],!1),e,{block:m},{}).w('<div class=""><ul id="').x(e.get(["idPrefix"],!1),e,{block:v},{}).w('asset-picker-list"aria-label="').h("i18n",e,{},{key:"bots.picker.listDesc",filter:"h"},"h").w("\"data-bind=\"ojComponent: { component: 'ojListView'").x(e.get(["selectedAssetIds"],!1),e,{block:_},{}).w(",selectionMode: '").x(e.get(["selectionMode"],!1),e,{else:y,block:w},{}).w("',optionChange: function(event, data) {if (event.originalEvent !== undefined &&data.option === 'selection' &&data.optionMetadata.writeback === 'shouldWrite') {$('#").x(e.get(["idPrefix"],!1),e,{block:k},{}).w("asset-picker').ojPopup('close');").x(e.get(["selectAssetHandler"],!1),e,{block:T},{}).w("}},data: ").f(e.get(["assetDataSource"],!1),e,"h").w(",item: { template: '").x(e.get(["idPrefix"],!1),e,{block:E},{}).w("asset_template' },rootAttributes: { class: 'ap-asset-picker-list").x(e.get(["noAssetMinHeight"],!1),e,{block:x},{}).w(' bots-helper-max-width\' } }"></ul><script type="text/html" id="').x(e.get(["idPrefix"],!1),e,{block:j},{}).w('asset_template"><li><div>').x(e.get(["assetTypeIconProvider"],!1),e,{else:A,block:N},{}).w('<div class="ap-asset-name" data-bind="ellipsisTip: ').x(e.get(["itemName"],!1),e,{else:F,block:U},{}).w("\"></div><!-- ko if: $data.hasOwnProperty('").x(e.get(["itemVersion"],!1),e,{else:q,block:V},{}).w('\') --><div class="ap-asset-version" data-bind="ellipsisTip: ').x(e.get(["itemVersion"],!1),e,{else:H,block:z},{}).w("\"></div><!-- /ko --></div><!-- ko if: $data.hasOwnProperty('").x(e.get(["itemDescription"],!1),e,{else:G,block:Q},{}).w('\') --><div class="ap-asset-desc" data-bind="ellipsisTip: ').x(e.get(["itemDescription"],!1),e,{else:K,block:Y},{}).w('" /><!-- /ko --></li></script></div></div></div>')}function i(t,e){return t.f(e.get(["idPrefix"],!1),e,"h").w("-")}function n(t,e){return t.w("{ horizontal: 'center', vertical: 'bottom' }")}function s(t,e){return t.f(e.get(["atPosition"],!1),e,"h")}function o(t,e){return t.w("{ horizontal: 'center', vertical: 'top' }")}function a(t,e){return t.f(e.get(["myPosition"],!1),e,"h")}function r(t,e){return t.w("simple")}function l(t,e){return t.f(e.get(["tailType"],!1),e,"h")}function d(t,e){return t.w("beforeClose: ").f(e.get(["beforeClose"],!1),e,"h").w(",")}function c(t,e){return t.w("beforeOpen: ").f(e.get(["beforeOpen"],!1),e,"h").w(",")}function u(t,e){return t.w(" ").f(e.get(["popupKlazz"],!1),e,"h")}function h(t,e){return t.w('<!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --><div class="oj-flex-item bots-helper-padding-bottom-20 bots-helper-not-last-margin-right-9"><button data-bind="ojComponent: { component: \'ojButton\'').x(e.get(["isNewAssetButtonDisabled"],!1),e,{block:b},{}).w(",icons: { start: 'bots-svgsprite-cta-icon' },label: ").f(e.get(["newAssetButtonLabel"],!1),e,"h").w(" }").x(e.get(["newAssetButtonIcon"],!1),e,{else:g,block:f},{}).w(",click: ").f(e.get(["newAssetClickHandler"],!1),e,"h").w('"class="green-button ap-new-button bots-helper-max-width"></button></div><!-- /ko -->')}function b(t,e){return t.w(",disabled: ko.unwrap(").f(e.get(["isNewAssetButtonDisabled"],!1),e,"h").w(")")}function g(t,e){return t.w(",inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_plus_16' }")}function f(t,e){return t.w(",").f(e.get(["newAssetButtonIcon"],!1),e,"h")}function p(t,e){return t.w('<div class="oj-flex-item oj-sm-flex-initial">').b(e.getBlock("moreActionsPart"),e,{},{}).w("</div>")}function m(t,e){return t.w('<div><span class="suite-search-filter bots-helper-max-width bots-helper-padding-bottom-10 right"><input title="').h("i18n",e,{},{key:"general.filter",filter:"h"},"h").w('"class="oj-inputtext-input oj-autocomplete-widget oj-autocomplete-input no-content bots-helper-max-width"placeholder="').h("i18n",e,{},{key:"general.filter",filter:"h"},"h").w("\"autocomplete=\"off\"data-bind=\"jqueryPlugin: { name: 'suiteSearchFilter', config: {eventType: 'keyup', clearEventType: 'keyup' } },value: ").f(e.get(["searchByInputValue"],!1),e,"h").w(",valueUpdate: 'keyup'\" /></span></div>")}function v(t,e){return t.f(e.get(["idPrefix"],!1),e,"h").w("-")}function _(t,e){return t.w(",selection: ").f(e.get(["selectedAssetIds"],!1),e,"h")}function y(t,e){return t.w("single")}function w(t,e){return t.f(e.get(["selectionMode"],!1),e,"h")}function k(t,e){return t.f(e.get(["idPrefix"],!1),e,"h").w("-")}function T(t,e){return t.f(e.get(["selectAssetHandler"],!1),e,"h").w("(data);")}function E(t,e){return t.f(e.get(["idPrefix"],!1),e,"h").w("-")}function x(t,e){return t.w(" ap-no-min-height")}function j(t,e){return t.f(e.get(["idPrefix"],!1),e,"h").w("-")}function A(t,e){return t.w('<!-- ko if: $data.icon --><span class="oj-navigationlist-item-icon bots-helper-padding-right-5 bots-helper-padding-top-3 left"data-bind="inlinesvg: { width: viewBoxWidth, height: viewBoxHeight, project: \'bots\', basename: icon,klazz: ').nx(e.get(["assetTypeIconKlazz"],!1),e,{else:B,block:S},{}).w(" },attr: { title: $data.hasOwnProperty('").x(e.get(["itemTitle"],!1),e,{else:C,block:D},{}).w("') ? ").x(e.get(["itemTitle"],!1),e,{else:I,block:R},{}).w(" : '' }\"></span><!-- /ko -->")}function B(t,e){return t.f(e.get(["assetTypeIconKlazz"],!1),e,"h")}function S(t,e){return t.w("iconKlazz")}function C(t,e){return t.w("title")}function D(t,e){return t.f(e.get(["itemTitle"],!1),e,"h")}function I(t,e){return t.w("title")}function R(t,e){return t.f(e.get(["itemTitle"],!1),e,"h")}function N(t,e){return t.w("<!-- ko with: ").f(e.get(["assetTypeIconProvider"],!1),e,"h").w("($data) --><!-- ko if: $data !== 'NA' --><span class=\"oj-navigationlist-item-icon bots-helper-padding-right-5 bots-helper-padding-top-3 left\"data-bind=\"inlinesvg: { width: viewBoxWidth, height: viewBoxHeight, project: 'bots', basename: basename").x(e.get(["assetTypeIconKlazz"],!1),e,{block:O},{}).w(" },attr: { title: $data.hasOwnProperty('").x(e.get(["itemTitle"],!1),e,{else:P,block:L},{}).w("') ? ").x(e.get(["itemTitle"],!1),e,{else:M,block:$},{}).w(" : '' }\"></span><!-- /ko --><!-- /ko -->")}function O(t,e){return t.w(",klazz: ").f(e.get(["assetTypeIconKlazz"],!1),e,"h")}function P(t,e){return t.w("title")}function L(t,e){return t.f(e.get(["itemTitle"],!1),e,"h")}function M(t,e){return t.w("title")}function $(t,e){return t.f(e.get(["itemTitle"],!1),e,"h")}function F(t,e){return t.w("name");
}function U(t,e){return t.f(e.get(["itemName"],!1),e,"h")}function q(t,e){return t.w("version")}function V(t,e){return t.f(e.get(["itemVersion"],!1),e,"h")}function H(t,e){return t.w("version")}function z(t,e){return t.f(e.get(["itemVersion"],!1),e,"h")}function G(t,e){return t.w("description")}function Q(t,e){return t.f(e.get(["itemDescription"],!1),e,"h")}function K(t,e){return t.w("description")}function Y(t,e){return t.f(e.get(["itemDescription"],!1),e,"h")}return t.register("bots/common/asset.picker.popup",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,b.__dustBody=!0,g.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,v.__dustBody=!0,_.__dustBody=!0,y.__dustBody=!0,w.__dustBody=!0,k.__dustBody=!0,T.__dustBody=!0,E.__dustBody=!0,x.__dustBody=!0,j.__dustBody=!0,A.__dustBody=!0,B.__dustBody=!0,S.__dustBody=!0,C.__dustBody=!0,D.__dustBody=!0,I.__dustBody=!0,R.__dustBody=!0,N.__dustBody=!0,O.__dustBody=!0,P.__dustBody=!0,L.__dustBody=!0,M.__dustBody=!0,$.__dustBody=!0,F.__dustBody=!0,U.__dustBody=!0,q.__dustBody=!0,V.__dustBody=!0,H.__dustBody=!0,z.__dustBody=!0,G.__dustBody=!0,Q.__dustBody=!0,K.__dustBody=!0,Y.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w("<!-- ko if: ko.unwrap(").f(e.get(["options"],!1),e,"h").w(').length === 1 --><input class="bots-helper-padding-left-5"data-bind="attr: { id: ').f(e.get(["id"],!1),e,"h").w(" },ojComponent: { component: 'ojInputText',value: ko.unwrap(").f(e.get(["options"],!1),e,"h").w(")[0].label,readOnly: true ").x(e.get(["required"],!1),e,{block:i},{}).w(' }"/><!-- /ko --><!-- ko ifnot: ko.unwrap(').f(e.get(["options"],!1),e,"h").w(').length === 1 --><select data-bind="attr: { id: ').f(e.get(["id"],!1),e,"h").w(" },ojComponent: { component: 'ojSelect',options: ").f(e.get(["options"],!1),e,"h").w(",value: ").f(e.get(["value"],!1),e,"h").w(" ").x(e.get(["required"],!1),e,{block:n},{}).w(" ").x(e.get(["readOnly"],!1),e,{block:o},{}).w(" ").x(e.get(["placeholderRBKey"],!1),e,{block:a},{}).w(' }"></select><!-- /ko -->')}function i(t,e){return t.w(",required: ").f(e.get(["required"],!1),e,"h").w(" ")}function n(t,e){return t.w(",").x(e.get(["requiredRBKey"],!1),e,{block:s},{}).w("required: ").f(e.get(["required"],!1),e,"h").w(" ")}function s(t,e){return t.w("translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate(").f(e.get(["requiredRBKey"],!1),e,"h").w(") } }, ")}function o(t,e){return t.w(",readOnly: ").f(e.get(["readOnly"],!1),e,"h").w(" ")}function a(t,e){return t.w(",placeholder: $root.i18n.translate(").f(e.get(["placeholderRBKey"],!1),e,"h").w(")")}return t.register("bots/common/autoSingleSelect",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="autosaveStatusBox"data-bind="css: { fade: !autosaveInProgress() },style: { opacity: autosaveInProgress() ? 100 : 0 }"><div class="loadingAnimation"data-bind="style: { display: autosaveInProgress() ? \'inline-block\' : \'none\' }"><div class="double-bounce1"></div><div class="double-bounce2"></div></div><div class="doneWrap"data-bind="style: { display: !autosaveInProgress() ? \'inline-block\' : \'none\' }"><div class="done"></div></div><span data-bind="text: autosaveInProgress() ? $root.i18n.translate(\'general.autoSaving.inProgress\'): $root.i18n.translate(\'general.autoSaving.done\')"></span></div>')}return t.register("bots/common/autosavestatus_box",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<ul class="bots-').x(e.get(["minor"],!1),e,{else:i,block:n},{}).w('-breadcrumb bots-hlist bots-greaterlist vertical-middle">').x(e.get(["backLabel"],!1),e,{else:r,block:h},{}).x(e.get(["activeName"],!1),e,{block:f},{}).w("</ul>")}function i(t,e){return t.w("major")}function n(t,e){return t.h("if",e,{else:s,block:o},{cond:a},"h")}function s(t,e){return t.w("major")}function o(t,e){return t.w("minor")}function a(t,e){return t.w("'").f(e.get(["minor"],!1),e,"h").w("' === 'true'")}function r(t,e){return t.w('<!-- ko foreach: navigationFragment --><li class="bots-subtoolbar">            <!-- ko if: ').x(e.get(["activeName"],!1),e,{else:l,block:d},{}).w(' --><span class="back-text" data-bind="text: $root.i18n.translate(\'nav.\' + ($data.label ? $data.label : package))"/><!-- /ko --><!-- ko if: ').x(e.get(["activeName"],!1),e,{else:c,block:u},{}).w(' --><a href="#" class="back-link" data-bind="text: $root.i18n.translate(\'nav.\' + ($data.label ? $data.label : package)),click: function(obj, evt){ require(\'bots.router\').navigate(obj.route, {trigger: true}); }"/><!-- /ko --></li><!-- /ko -->')}function l(t,e){return t.w("($index() === $parent.navigationFragment().length - 1) || activeRoute")}function d(t,e){return t.w("activeRoute")}function c(t,e){return t.w("($index() < $parent.navigationFragment().length - 1) && !activeRoute")}function u(t,e){return t.w("!activeRoute")}function h(t,e){return t.w('<li class="bots-subtoolbar"><button class="bots-destyled-button bots-text-button back-button bots-helper-pointer-button"data-bind="').x(e.get(["backId"],!1),e,{block:b},{}).x(e.get(["backMaxWidth"],!1),e,{block:g},{}).w("ojComponent: { component: 'ojButton',display: 'all',icons: { start: 'bots-back-button bots-icon-button-16' },label: ").f(e.get(["backLabel"],!1),e,"h").w(" },click: ").f(e.get(["backAction"],!1),e,"h").w('"/></li>')}function b(t,e){return t.w("attr: { id: ").f(e.get(["backId"],!1),e,"h").w(" },")}function g(t,e){return t.w("ellipsisTip: ").f(e.get(["backLabel"],!1),e,"h").w(",style: { maxWidth: ").f(e.get(["backMaxWidth"],!1),e,"h").w(" },")}function f(t,e){return t.w('<li class="bots-subtoolbar active-title" ').x(e.get(["activeVisible"],!1),e,{block:p},{}).w('><span class="').x(e.get(["activeNameClass"],!1),e,{else:m,block:v},{}).w('" data-bind="ellipsisTip: ').f(e.get(["activeName"],!1),e,"h").w('"/>').x(e.get(["activeNameExt"],!1),e,{block:_},{}).w("</li>")}function p(t,e){return t.w('data-bind="visible: ').f(e.get(["activeVisible"],!1),e,"h").w('"')}function m(t,e){return t.w("active-name")}function v(t,e){return t.f(e.get(["activeNameClass"],!1),e,"h")}function _(t,e){return t.w('<span class="').x(e.get(["activeNameExtClass"],!1),e,{else:y,block:w},{}).w('" data-bind="ellipsisTip: ').f(e.get(["activeNameExt"],!1),e,"h").w('"/>')}function y(t,e){return t.w("active-name-ext")}function w(t,e){return t.f(e.get(["activeNameExtClass"],!1),e,"h")}return t.register("bots/common/breadcrumb",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,b.__dustBody=!0,g.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,v.__dustBody=!0,_.__dustBody=!0,y.__dustBody=!0,w.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<button id="').f(e.get(["uploadButtonId"],!1),e,"h").w("\"data-bind=\"ojComponent: {component: 'ojButton',").x(e.get(["uploadButtonKlazz"],!1),e,{block:i},{}).w("label: ").f(e.get(["uploadButtonText"],!1),e,"h").w(" },click: ").b(e.getBlock("selectFileUploadAction"),e,{},{}).w('"></button><input id="').f(e.get(["uploadInputTextId"],!1),e,"h").w('" ').x(e.get(["fileuploadConfig"],!1),e,{block:n},{}).w('class="bots-helper-hidden" type="file" name="importFile" ').x(e.get(["uploadAccept"],!1),e,{block:o},{}).w(" />")}function i(t,e){return t.w(" rootAttributes: { class: '").f(e.get(["uploadButtonKlazz"],!1),e,"h").w("' },")}function n(t,e){return t.w("data-bind=\"jqueryPlugin: { name: 'fileupload',config: { dropZone: $('#").f(e.get(["uploadButtonId"],!1),e,"h").w("'),").f(e.get(["fileuploadConfig"],!1),e,"h").w(" } },lifecycleHook: ").b(e.getBlock("lifecycleHookConfig"),e,{block:s},{}).w('"')}function s(t,e){return t.w(" { } ")}function o(t,e){return t.w('accept="').f(e.get(["uploadAccept"],!1),e,"h").w('"')}return t.register("bots/common/button.upload",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"bots-channel-routes-dialog",sizeKlazz:"bots-channel-routes-dialog",actionButtonVisible:"channelRoutes.items().length > 0",actionHandler:"smartButtonHandler"})}function i(t,e){return e=e.shiftBlocks(o),t.w("<!-- ko if: isSkill() -->").h("i18n",e,{},{key:"bots.channelRoutesDialog.USER.titleLabel"},"h").w("<!-- /ko --><!-- ko ifnot: isSkill() -->").h("i18n",e,{},{key:"bots.channelRoutesDialog.ODA.titleLabel"},"h").w("<!-- /ko -->")}function n(t,e){return e=e.shiftBlocks(o),t.w('<div data-bind="visible: channelRoutes.items().length > 0"><!-- ko if: isSkill() --><div class="ap-tag-label-markdown bots-helper-margin-bottom-20"data-bind="markdown: $root.i18n.translate(\'bots.channelRoutesDialog.USER.preamble\', ko.unwrap(botDisplayName), ko.unwrap(botVersionTag))"></div><!-- /ko --><!-- ko ifnot: isSkill() --><div class="ap-tag-label-markdown bots-helper-margin-bottom-20"data-bind="markdown: $root.i18n.translate(\'bots.channelRoutesDialog.ODA.preamble\', ko.unwrap(botDisplayName))"></div><!-- /ko --><div><ul data-bind="ojComponent: { component: \'ojListView\',data: channelRoutesDS,selectionMode: \'single\',item: { template: \'bots-channel-route-row\',selectable: true,focusable: true },rootAttributes: { class: \'bots-helper-max-width\' } }"></ul><script id="bots-channel-route-row" type="text/html"><li><div class="oj-flex oj-sm-flex-wrap-nowrap bots-helper-max-width"><div class="oj-flex-item oj-sm-1"><!-- ko ifnot: $root.channelIconProvider($data) === \'NA\' --><!-- ko with: $root.channelIconProvider($data) --><!-- ko if: $data.hasOwnProperty(\'imgSrc\') --><span class="left"><img class="bots-helper-24x24 bots-helper-margin-top-5"data-bind="attr: { src: imgSrc,title: ($data.hasOwnProperty(\'title\') ? title : undefined) }"></img></span><!-- /ko --><!-- ko ifnot: $data.hasOwnProperty(\'imgSrc\') --><span class="left"data-bind="inlinesvg: { width: viewBoxWidth, height: viewBoxHeight, project: \'bots\', basename: basename,klazz: \'bots-helper-24x24 bots-helper-margin-top-5\' }"></span><!-- /ko --><span class="bots-routes-inactive-marker"data-bind="visible: !!!$parent.enabled,inlinesvg: { width: 13, height: 13, project: \'bots\', basename: \'stat_disabled_13\', klazz: \'bots-helper-circular-border\' }"></span><!-- /ko --><!-- /ko --></div><div class="oj-flex-item oj-sm-align-self-center oj-sm-10 bots-helper-zero-min-width"><a href="#"data-bind="ellipsisTip: name,click: $root.navigateToUserChannelDefinition"></a></div><!-- ko if: $root.permissions().BOTS_WRITE --><div class="oj-flex-item oj-sm-align-self-center oj-sm-1"><input type="checkbox" class="oj-checkbox-nocomp right"data-bind="checked: markForStopping"><label class="oj-checkbox-label-nocomp"></label></div><!-- /ko --></div></li></script></div></div><div data-bind="visible: channelRoutes.items().length === 0">').p("bots/common/channel.routes.none",e,e,{}).w("</div>")}function s(t,e){return e=e.shiftBlocks(o),t.w("smartButtonLabel")}t.register("bots/common/channel.routes",e);var o={titleLabel:i,bodyHtml:n,actionButtonLabel:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(r),t.p("bots/common/no_content",e,e,{noContentId:"bots-channel-routes-none"})}function i(t,e){return e=e.shiftBlocks(r),t.p("bots/common/inlinesvg",e,e,{width:"48",height:"48",project:"bots",basename:"qual_channels_48_mono",klazz:"bots-helper-96x96"})}function n(t,e){return e=e.shiftBlocks(r),t.w("<!-- ko if: isSkill() -->").h("i18n",e,{},{key:"bots.channelRoutesDialog.none.USER.title"},"h").w("<!-- /ko --><!-- ko ifnot: isSkill() -->").h("i18n",e,{},{key:"bots.channelRoutesDialog.none.ODA.title"},"h").w("<!-- /ko -->")}function s(t,e){return e=e.shiftBlocks(r),t.w("<!-- ko if: isSkill() -->").h("i18n",e,{},{key:"bots.channelRoutesDialog.none.USER.description"},"h").w("<!-- /ko --><!-- ko ifnot: isSkill() -->").h("i18n",e,{},{key:"bots.channelRoutesDialog.none.ODA.description"},"h").w("<!-- /ko -->")}function o(t,e){return e=e.shiftBlocks(r),t}function a(t,e){return e=e.shiftBlocks(r),t.w("<!-- ko if: $root.permissions().BOTS_WRITE --><button data-bind=\"click: navigateToChannelsUsers,ojComponent: { component: 'ojButton',display: 'all',icons: { start: 'bots-svgsprite-cta-icon' },label: '").h("i18n",e,{},{key:"bots.channelRoutesDialog.none.takeMeThere",filter:"j"},"h").w("' },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_arrowbox_16' }\"class=\"green-button\"></button><!-- /ko -->")}t.register("bots/common/channel.routes.none",e);var r={noContentImgSection:i,noContentTitle:n,noContentDesc:s,noContentLink:o,noContentButton:a};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<button id="').f(e.get(["chatboxID"],!1),e,"h").w('" class="bots-top-buttons "title="').h("i18n",e,{},{key:"chatbox.instantapps.go.tip",filter:"h"},"h").w("\"data-bind=\"ojComponent: { component: 'ojButton',display: 'all',label: '").h("i18n",e,{},{key:"chatbox.instantapps.go.label",filter:"j"},"h").w("',rootAttributes: { class: '").x(e.get(["extraButtonKlazz"],!1),e,{block:i},{}).w("secondary-button' } },click: chaboxInstantAppsAction\"></button>")}function i(t,e){return t.f(e.get(["extraButtonKlazz"],!1),e,"h").w(" ")}return t.register("bots/common/chatbox.instantapps",e),e.__dustBody=!0,i.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="oj-flex oj-sm-flex-wrap-nowrap bots-c2e-root"data-bind="css: { \'bots-c2e-deleted\': ko.unwrap(').f(e.get(["botsC2eText"],!1),e,"h").w(') == false }"><div class="oj-flex-item bots-c2e-readonly-text bots-c2e-normal-mode-item bots-support-text-select"data-bind="attr: { id: ').f(e.get(["botsC2eIdentifier"],!1),e,"h").w(" },text: ").f(e.get(["botsC2eText"],!1),e,"h").w(",event: { dblclick: ($root.isDraftVersion() && $root.permissions().BOTS_WRITE) ? ").f(e.get(["botsC2eViewModel"],!1),e,"h").w('.botsC2eOnClickEditText : $.noop }"></div><input required placeholder="').b(e.getBlock("botsC2eTextHint"),e,{},{}).w("\"data-bind=\"ojComponent: { component: 'ojInputText',placeholder: $root.i18n.translate('").f(e.get(["botsC2eTextHint"],!1),e,"h").w("'),value: ").f(e.get(["botsC2eViewModel"],!1),e,"h").w(".botsC2eSandboxValue,rootAttributes: { class: 'oj-flex-item bots-c2e-input suite-helper-max-width bots-c2e-edit-mode-item' },translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('").f(e.get(["botsC2eInputRequired"],!1),e,"h").w("') } },messagesCustom: ").f(e.get(["botsC2eViewModel"],!1),e,"h").w(".botsC2eCustomMessage },event: { keydown: ").f(e.get(["botsC2eViewModel"],!1),e,"h").w('.botsC2eOnKeydownHandleEscape }"><a href="#" class="suite-helper-margin-top-3 suite-helper-padding-right-10 suite-helper-padding-top-6 bots-c2e-edit-mode-item bots-c2e-cancel"data-bind="text: $root.i18n.translate(\'general.cancel\'),click: ').f(e.get(["botsC2eViewModel"],!1),e,"h").w(".botsC2eOnCancelEdit\"></a><div class=\"oj-flex oj-sm-flex-wrap-nowrap bots-c2e-buttonbar\"><button tabindex=\"0\"data-bind=\"css: { 'bots-helper-zero-width': !($root.isDraftVersion() && $root.permissions().BOTS_WRITE) }, ojComponent: { component: 'ojButton',chroming: 'half',display: 'icons',icons: { start: 'bots-svgsprite-func-icon' },label: $root.i18n.translate('general.edit'),rootAttributes: { class: 'bots-c2e-auto-reveal suite-no-margin bots-c2e-normal-mode-item' } },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_edit_16' },click: ").f(e.get(["botsC2eViewModel"],!1),e,"h").w('.botsC2eOnClickEditText"></button>').b(e.getBlock("botsC2eAuxButton"),e,{block:i},{}).w("</div></div>")}function i(t,e){return t.x(e.get(["botsC2eDeleteAllowed"],!1),e,{block:n},{})}function n(t,e){return t.w("<!-- ko if: !!(").f(e.get(["botsC2eDeleteAllowed"],!1),e,"h").w(") === true --><button tabindex=\"0\"data-bind=\"css: { 'bots-helper-zero-width': !($root.isDraftVersion() && $root.permissions().BOTS_WRITE) }, ojComponent: { component: 'ojButton',chroming: 'half',display: 'icons',icons: { start: 'bots-svgsprite-func-icon' },label: $root.i18n.translate('general.delete'),rootAttributes: { class: 'bots-c2e-auto-reveal suite-no-margin bots-c2e-normal-mode-item' } },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_delete_16' },click: ").f(e.get(["botsC2eViewModel"],!1),e,"h").w('.botsC2eOnClickDeleteField"></button><!-- /ko -->')}return t.register("bots/common/clicktoedit",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"bots-clone-dialog",sizeKlazz:"bots-clone-dialog",actionHandler:"cloneBot"})}function i(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"bots.cloneBotDialog.titleLabel"},"h")}function n(t,e){return e=e.shiftBlocks(o),t.w('<div class="oj-form oj-sm-labels-inline"><label for="cloneBot-displayName">').h("i18n",e,{},{key:"bots.displayName"},"h").w('</label><input id="cloneBot-displayName" required type="text"placeholder="').h("i18n",e,{},{key:"bots.displayNameHint",filter:"h"},"h").w("\"data-bind=\"ojComponent: { component: 'ojInputText',value: newDisplayNameNameAutoFiller.displayName,rawValue: newDisplayNameNameAutoFiller.displayNamePreview,rootAttributes: { class: 'input bots-helper-max-width' },validators: [ $root.botsValidators.botsSkillDisplayNameValidator,$root.botsValidators.displayNameValidator ],messagesCustom: displayNameCustomMessage,translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('bots.cloneBotDialog.newDisplayName.required') } } }\"/><label for=\"cloneBot-name\">").h("i18n",e,{},{key:"bots.name"},"h").w('</label><input id="cloneBot-name" required type="text"placeholder="').h("i18n",e,{},{key:"bots.nameHint",filter:"h"},"h").w("\"data-bind=\"ojComponent: { component: 'ojInputText',value: newDisplayNameNameAutoFiller.name,rawValue: newDisplayNameNameAutoFiller.namePreview,rootAttributes: { class: 'input bots-helper-max-width' },validators: [ $root.botsValidators.botsSkillNameValidator,$root.botsValidators.botsOtherNameValidator ],messagesCustom: nameCustomMessage,translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('bots.cloneBotDialog.newName.required') } } },hasFocus: newDisplayNameNameAutoFiller.nameHasFocus,enabled: newDisplayNameNameAutoFiller.nameAutoFillTrigger\"/><label for=\"cloneBot-version\">").h("i18n",e,{},{key:"bots.version"},"h").w('</label><input id="cloneBot-version" required type="text"placeholder="').h("i18n",e,{},{key:"bots.versionHint",filter:"h"},"h").w("\"data-bind=\"ojComponent: { component: 'ojInputText',value: version,rootAttributes: { class: 'input bots-helper-max-width' },validators: [ $root.botsValidators.versionValidator ],messagesCustom: versionCustomMessage,translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('bots.messages.botVersionRequired') } } }\"/><label for=\"cloneBot-description\">").h("i18n",e,{},{key:"bots.description"},"h").w('</label><textarea id="cloneBot-description" rows="3"data-bind="ojComponent: { component: \'ojTextArea\',value: description,validators: [ $root.botsValidators.lengthValidator ],rootAttributes: { class: \'bots-helper-max-width\' } }"></textarea><input id="cloneBot-openAfterClone" type="checkbox" class="oj-checkbox-nocomp"data-bind="checked: openAfterClone"/><label for="cloneBot-openAfterClone" class="oj-checkbox-label-nocomp">').h("i18n",e,{},{key:"bots.cloneBotDialog.openAfterClone"},"h").w("</label></div>")}function s(t,e){return e=e.shiftBlocks(o),t.w("'").h("i18n",e,{},{key:"bots.cloneBotDialog.cloneLabel",filter:"j"},"h").w("'")}t.register("bots/common/clone.bot.dialog",e);var o={titleLabel:i,bodyHtml:n,actionButtonLabel:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"da-clone-dialog",sizeKlazz:"da-clone-dialog",actionHandler:"cloneBot"})}function i(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"da.cloneDADialog.titleLabel"},"h")}function n(t,e){return e=e.shiftBlocks(o),t.w('<div class="oj-form oj-sm-labels-inline"><label for="cloneDA-text-display-name">').h("i18n",e,{},{key:"da.displayName"},"h").w('</label><input id="cloneDA-text-display-name" required type="text"placeholder="').h("i18n",e,{},{key:"da.displayNameHint",filter:"h"},"h").w("\"data-bind=\"ojComponent: { component: 'ojInputText',value: newDisplayNameNameAutoFiller.displayName,rawValue: newDisplayNameNameAutoFiller.displayNamePreview,validators: [ $root.botsValidators.displayNameValidator ],rootAttributes: { class: 'input bots-helper-max-width' },messagesCustom: displayNameCustomMessage,translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('da.cloneDADialog.newDisplayName.required') } } }\"/><label for=\"cloneDA-text-input-name\">").h("i18n",e,{},{key:"da.name"},"h").w('</label><input id="cloneDA-text-input-name" required type="text"placeholder="').h("i18n",e,{},{key:"da.nameHint",filter:"h"},"h").w("\"data-bind=\"ojComponent: { component: 'ojInputText',value: newDisplayNameNameAutoFiller.name,rawValue: newDisplayNameNameAutoFiller.namePreview,rootAttributes: { class: 'input bots-helper-max-width' },validators: [ $root.botsValidators.botsSkillNameValidator,$root.botsValidators.botsOtherNameValidator ],messagesCustom: nameCustomMessage,translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('da.cloneDADialog.newName.required') } } },hasFocus: newDisplayNameNameAutoFiller.nameHasFocus,enabled: newDisplayNameNameAutoFiller.nameAutoFillTrigger\"/><label for=\"cloneDA-text-ta-description\">").h("i18n",e,{},{key:"da.description"},"h").w('</label><textarea id="cloneDA-text-ta-description" rows="3"data-bind="ojComponent: { component: \'ojTextArea\',value: description,validators: [ $root.botsValidators.lengthValidator ],rootAttributes: { class: \'bots-helper-max-width\' } }"></textarea><input id="cloneDA-openAfterClone" type="checkbox" class="oj-checkbox-nocomp"data-bind="checked: openAfterClone"/><label for="cloneDA-openAfterClone" class="oj-checkbox-label-nocomp">').h("i18n",e,{},{key:"da.cloneDADialog.openAfterClone"},"h").w("</label></div>")}function s(t,e){return e=e.shiftBlocks(o),t.w("'").h("i18n",e,{},{key:"da.cloneDADialog.cloneLabel",filter:"j"},"h").w("'")}t.register("bots/common/clone.da.dialog",e);var o={titleLabel:i,bodyHtml:n,actionButtonLabel:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(c),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:i,actionHandler:n,sizeKlazz:"bots-confirm-dialog"})}function i(t,e){return e=e.shiftBlocks(c),t.f(e.get(["dialogId"],!1),e,"h")}function n(t,e){return e=e.shiftBlocks(c),t.f(e.get(["confirmAction"],!1),e,"h")}function s(t,e){return e=e.shiftBlocks(c),t.w("<span data-bind=\"text: $root.i18n.translate('").f(e.get(["titleKey"],!1),e,"h").w("' ").x(e.get(["titleParams"],!1),e,{block:o},{}).w(')"></span>')}function o(t,e){return e=e.shiftBlocks(c),t.w(", [ ").f(e.get(["titleParams"],!1),e,"h").w(" ]")}function a(t,e){return e=e.shiftBlocks(c),t.w("<span data-bind=\"text: $root.i18n.translate('").f(e.get(["messageKey"],!1),e,"h").w("' ").x(e.get(["messageParams"],!1),e,{block:r},{}).w(')"></span>')}function r(t,e){return e=e.shiftBlocks(c),t.w(", [ ").f(e.get(["messageParams"],!1),e,"h").w(" ]")}function l(t,e){return e=e.shiftBlocks(c),t.w("'").h("i18n",e,{},{key:d,filter:"j"},"h").w("'")}function d(t,e){return e=e.shiftBlocks(c),t.f(e.get(["confirmButtonText"],!1),e,"h")}t.register("bots/common/confirm.dialog",e);var c={titleLabel:s,bodyHtml:a,actionButtonLabel:l};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["dialogId"],!1),e,"h").w('"').x(e.get(["dialogClass"],!1),e,{block:i},{}).w("data-bind=\"attr: { title: $root.i18n.translate('").f(e.get(["titleKey"],!1),e,"h").w("' ").x(e.get(["titleParams"],!1),e,{block:n},{}).w(") },ojComponent: { component: 'ojDialog',role: 'alertdialog',initialVisibility: 'hide',resizable: false,draggable: false,modality: 'modal',rootAttributes: {style: 'width: ").f(e.get(["dialogWidth"],!1),e,"h").w(';\'}}"><div class="oj-dialog-body"><div class="oj-row bots-form-margin"><div class="oj-col bots-no-padding"data-bind="markdown: $root.i18n.translate(\'').f(e.get(["messageKey"],!1),e,"h").w("' ").x(e.get(["messageParams"],!1),e,{block:s},{}).w(')"></div></div>').x(e.get(["descriptionKey"],!1),e,{block:o},{}).x(e.get(["always"],!1),e,{block:r},{}).w('</div><div class="oj-row oj-dialog-footer"><div class="bots-helper-fr"><button id="').f(e.get(["dialogId"],!1),e,"h").w('-yes-button" class="bots-dialog-button bots-helper-fl"data-bind="ojComponent: { component: \'ojButton\',label: $root.i18n.translate(\'').x(e.get(["yesKey"],!1),e,{else:d,block:c},{}).w("') },click: ").f(e.get(["yesAction"],!1),e,"h").w('"></button><button id="').f(e.get(["dialogId"],!1),e,"h").w('-no-button" class="bots-dialog-button bots-helper-fl"                     data-bind="ojComponent: { component: \'ojButton\',label: $root.i18n.translate(\'').x(e.get(["noKey"],!1),e,{else:u,block:h},{}).w("') },click: function() { $('#").f(e.get(["dialogId"],!1),e,"h").w("').ojDialog('close'); }\"></button></div></div></div>")}function i(t,e){return t.w('class="').f(e.get(["dialogClass"],!1),e,"h").w('"')}function n(t,e){return t.w(", [ ").f(e.get(["titleParams"],!1),e,"h").w(" ]")}function s(t,e){return t.w(", [ ").f(e.get(["messageParams"],!1),e,"h").w(" ]")}function o(t,e){return t.w('<div class="oj-row bots-form-margin"><div class="oj-col bots-no-padding"data-bind="markdown: $root.i18n.translate(\'').f(e.get(["descriptionKey"],!1),e,"h").w("' ").x(e.get(["descriptionParams"],!1),e,{block:a},{}).w(')"></div></div>')}function a(t,e){return t.w(", [ ").f(e.get(["descriptionParams"],!1),e,"h").w(" ]")}function r(t,e){return t.w('<div class="oj-row"><div class="oj-col bots-no-padding"><input id="alwaysInput-').f(e.get(["dialogId"],!1),e,"h").w('" class="oj-checkbox-nocomp" type="checkbox" data-bind="checked: ').f(e.get(["always"],!1),e,"h").w('"><label for="alwaysInput-').f(e.get(["dialogId"],!1),e,"h").w('" class="oj-checkbox-label-nocomp">').h("i18n",e,{},{key:l},"h").w("</label></div></div>")}function l(t,e){return t.f(e.get(["alwaysKey"],!1),e,"h")}function d(t,e){return t.w("general.yesLabel")}function c(t,e){return t.f(e.get(["yesKey"],!1),e,"h")}function u(t,e){return t.w("general.noLabel")}function h(t,e){return t.f(e.get(["noKey"],!1),e,"h")}return t.register("bots/common/confirmyesno_dialog",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="bots-contextual-header-text bots-no-padding"><a data-bind="click: ').b(e.getBlock("contextualAreaBackAction"),e,{},{}).w(", ojComponent: {component: 'ojButton', label: ").b(e.getBlock("contextualAreaDetailTextLink"),e,{},{}).w(', display: \'all\', icons: {start:\'oj-fwk-icon-caret-start oj-fwk-icon bots-no-margin\'}}" class="bots-destyled-button oj-button-no-chrome api-resource-methods-back-button"></a><span role="separator" aria-orientation="vertical" class="oj-toolbar-separator"></span><span data-bind="text: ').b(e.getBlock("contextualAreaDetailTitle"),e,{},{}).w('"></span></div><div class="bots-panel-container bots-no-margin"><div class="oj-row"><div class="oj-col oj-sm-12">').b(e.getBlock("contextualAreaContent"),e,{},{}).w("</div></div></div>")}return t.register("bots/common/contextual_area",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<ul id="').f(e.get(["prefix"],!1),e,"h").w('-cta-menu" class="mcs-helper-hidden"data-bind="ojComponent: { component: \'ojMenu\',select: ').f(e.get(["selectAction"],!1),e,"h").w(' }">').b(e.getBlock("menuItems"),e,{block:i},{}).w('</ul><button id="').f(e.get(["prefix"],!1),e,"h").w('-cta-dropdown-button"class="').x(e.get(["klazz"],!1),e,{else:n,block:s},{}).w("\"data-bind=\"ojComponent: { component: 'ojButton',label: ").f(e.get(["label"],!1),e,"h").w(",display: 'all',icons: { start: 'bots-svgsprite-cta-icon' },menu: '#").f(e.get(["prefix"],!1),e,"h").w("-cta-menu' ").x(e.get(["disabled"],!1),e,{block:r},{}).w(" }").x(e.get(["basesvgsprite"],!1),e,{block:l},{}).w('"></button>')}function i(t,e){return t.w("<!-- ko foreach: ").f(e.get(["menuItemList"],!1),e,"h").w(' --><li class="oj-menu-item"data-bind="attr: { id: ').f(e.get(["prefix"],!1),e,"h").w(' + \'-\' + $data.value }"><a data-bind="text: $data.label"></a></li><!-- /ko -->')}function n(t,e){return t.w("green-button")}function s(t,e){return t.h("ne",e,{else:o,block:a},{key:e.get(["klazz"],!1),value:""},"h")}function o(t,e){return t.w("green-button")}function a(t,e){return t.f(e.get(["klazz"],!1),e,"h")}function r(t,e){return t.w(",disabled: ").f(e.get(["disabled"],!1),e,"h")}function l(t,e){return t.w(",inlinesvg: { width: 16, height: 16, project: 'bots', basename: '").f(e.get(["basesvgsprite"],!1),e,"h").w("' }")}return t.register("bots/common/cta.dropdown.button",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["id"],!1),e,"h").w('-date-picker" class="').f(e.get(["class"],!1),e,"h").w('"><button id="').f(e.get(["id"],!1),e,"h").w('-daterange-button"tabIndex="0" aria-label="').h("i18n",e,{},{key:"daterange.picker.open",filter:"h"},"h").w("\"class=\"shell-daterange-button mcs-destyled-button mcs-no-margin\"data-bind=\"ojComponent: { component: 'ojButton',label: dateRangeLabel,display: 'all',chroming: 'half',icons: { start: 'bots-svgsprite-func-icon right' }},inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_appmenuarrow_16' },click: showDateRangePicker\"></button><div id=\"").f(e.get(["id"],!1),e,"h").w("-daterange-picker\"class=\"bots-helper-hidden\" data-bind=\"ojComponent: {component: 'ojPopup','position': {'at': { horizontal: 'center', vertical: 'bottom' }, 'my': selectedDateRange() === 'custom' ? { horizontal: 'right', vertical: 'top' } : { horizontal: 'center', vertical: 'top' }},'tail': 'simple',rootAttributes: {class: 'shell-daterange-picker'}}, css: {'custom-daterange': selectedDateRange() === 'custom'}\"><div class=\"oj-flex\"><!-- ko if: dateRanges().length --><div id=\"shell-daterange-list\"class=\"oj-flex-item\"data-bind=\"ojComponent: {component: 'ojNavigationList',drillMode: 'none',selection: selectedDateRange,optionChange: selectDateRange}\"><ul data-bind=\"foreach: dateRanges\"><li data-bind=\"attr: {id: $data.id}\"><a href=\"#\" data-bind=\"text: $root.i18n.translate('daterange.' + $data.id)\"></a></li></ul></div><!-- /ko --><!-- ko if: selectedDateRange() === 'custom' --><div class=\"oj-flex-item oj-flex\"><div class=\"oj-flex-item calendar-section\"><div><input aria-label=\"").h("i18n",e,{},{key:"daterange.picker.startDate",filter:"h"},"h").w('" data-bind="ojComponent: {component: \'ojInputText\', value: customStartDate,converter: customDateConverter,validators: [customStartDateValidator]}"/></div><div data-bind="ojComponent: {component: \'ojInputDate\', value: customStartDate,converter: customDateConverter,validators: [customStartDateValidator]}"></div></div><div class="oj-flex-item"><div><input aria-label="').h("i18n",e,{},{
key:"daterange.picker.endDate",filter:"h"},"h").w('" data-bind="ojComponent: {component: \'ojInputText\',value: customEndDate, converter: customDateConverter,validators: [customEndDateValidator]}"/></div><div data-bind="ojComponent: {component: \'ojInputDate\', value: customEndDate,converter: customDateConverter,validators: [customEndDateValidator]}"></div><div><button class="right gray-button"data-bind="ojComponent: {component: \'ojButton\',label: $root.i18n.translate(\'general.cancel\')},click: cancelCustomDateRange"></button><button class="right blue-button"data-bind="ojComponent: {component: \'ojButton\',label: $root.i18n.translate(\'general.apply\')},click: applyCustomDateRange"></button></div></div>    </div><!-- /ko --></div></div></div>')}return t.register("bots/common/date.picker",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"bots-delete-dialog",sizeKlazz:"bots-delete-dialog",actionHandler:"deleteBot"})}function i(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"bots.deleteBotDialog.titleLabel"},"h")}function n(t,e){return e=e.shiftBlocks(o),t.w("<span data-bind=\"text: $root.i18n.translate('bots.deleteBotDialog.confirmQuestion', botDisplayName(), botVersion())\"></span>")}function s(t,e){return e=e.shiftBlocks(o),t.w("'").h("i18n",e,{},{key:"bots.deleteBotDialog.deleteLabel",filter:"j"},"h").w("'")}t.register("bots/common/delete.bot.dialog",e);var o={titleLabel:i,bodyHtml:n,actionButtonLabel:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"da-delete-dialog",sizeKlazz:"da-delete-dialog",actionHandler:"deleteBot"})}function i(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"da.deleteBotDialog.titleLabel"},"h")}function n(t,e){return e=e.shiftBlocks(o),t.w("<span data-bind=\"text: $root.i18n.translate('da.deleteBotDialog.confirmQuestion', botDisplayName())\"></span>")}function s(t,e){return e=e.shiftBlocks(o),t.w("'").h("i18n",e,{},{key:"da.deleteBotDialog.deleteLabel",filter:"j"},"h").w("'")}t.register("bots/common/delete.da.dialog",e);var o={titleLabel:i,bodyHtml:n,actionButtonLabel:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(v),t.p("bots/common/dialog/gray.dialog",e,e,{})}function i(t,e){return e=e.shiftBlocks(v),t.w("<span data-bind=\"text: $root.i18n.translate('").f(e.get(["titleKey"],!1),e,"h").w("'").x(e.get(["titleParams"],!1),e,{block:n},{}).w(')"></span>')}function n(t,e){return e=e.shiftBlocks(v),t.w(", [ ").f(e.get(["titleParams"],!1),e,"h").w(" ]")}function s(t,e){return e=e.shiftBlocks(v),t.w('<div class="oj-flex-bar"><div class="oj-flex-bar-middle"data-bind="markdown: $root.i18n.translate(\'').f(e.get(["messageKey"],!1),e,"h").w("' ").x(e.get(["messageParams"],!1),e,{block:o},{}).w(')"></div></div>').x(e.get(["descriptionKey"],!1),e,{block:a},{}).x(e.get(["always"],!1),e,{block:l},{})}function o(t,e){return e=e.shiftBlocks(v),t.w(", [ ").f(e.get(["messageParams"],!1),e,"h").w(" ]")}function a(t,e){return e=e.shiftBlocks(v),t.w('<div class="oj-flex-bar"><div class="oj-flex-bar-middle"data-bind="markdown: $root.i18n.translate(\'').f(e.get(["descriptionKey"],!1),e,"h").w("' ").x(e.get(["descriptionParams"],!1),e,{block:r},{}).w(')"></div></div>')}function r(t,e){return e=e.shiftBlocks(v),t.w(", [ ").f(e.get(["descriptionParams"],!1),e,"h").w(" ]")}function l(t,e){return e=e.shiftBlocks(v),t.w('<div class="oj-flex-bar"><div class="oj-flex-bar-start"><input id="alwaysInput-').f(e.get(["grayDialogId"],!1),e,"h").w('" class="oj-checkbox-nocomp" type="checkbox" data-bind="checked: ').f(e.get(["always"],!1),e,"h").w('"><label for="alwaysInput-').f(e.get(["grayDialogId"],!1),e,"h").w('" class="oj-checkbox-label-nocomp">').h("i18n",e,{},{key:d},"h").w("</label></div></div>")}function d(t,e){return e=e.shiftBlocks(v),t.f(e.get(["alwaysKey"],!1),e,"h")}function c(t,e){return e=e.shiftBlocks(v),t.w('<div class="oj-flex-bar"><div class="oj-flex-bar-end"><button id="').f(e.get(["grayDialogId"],!1),e,"h").w('-yes-button" class="green-button"data-bind="ojComponent: { component: \'ojButton\',label: $root.i18n.translate(\'').x(e.get(["yesKey"],!1),e,{else:u,block:h},{}).w("') },click: ").f(e.get(["yesAction"],!1),e,"h").w('"></button>').nx(e.get(["yesButtonOnly"],!1),e,{block:b},{}).w("</div></div>")}function u(t,e){return e=e.shiftBlocks(v),t.w("general.yes")}function h(t,e){return e=e.shiftBlocks(v),t.f(e.get(["yesKey"],!1),e,"h")}function b(t,e){return e=e.shiftBlocks(v),t.w('<button id="').f(e.get(["grayDialogId"],!1),e,"h").w('-no-button" class="bots-helper-margin-left-4 natural-button"data-bind="ojComponent: { component: \'ojButton\',label: $root.i18n.translate(\'').x(e.get(["noKey"],!1),e,{else:g,block:f},{}).w("') },click: ").x(e.get(["noAction"],!1),e,{else:p,block:m},{}).w('"></button>')}function g(t,e){return e=e.shiftBlocks(v),t.w("general.no")}function f(t,e){return e=e.shiftBlocks(v),t.f(e.get(["noKey"],!1),e,"h")}function p(t,e){return e=e.shiftBlocks(v),t.w("function() { $('#").f(e.get(["grayDialogId"],!1),e,"h").w("').ojDialog('close'); }")}function m(t,e){return e=e.shiftBlocks(v),t.f(e.get(["noAction"],!1),e,"h")}t.register("bots/common/dialog/confirmyesno.dialog",e);var v={titleLabel:i,bodyHtml:s,footerHtml:c};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,b.__dustBody=!0,g.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(a),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:i,sizeKlazz:"entity-value-synonyms-dialog",actionHandler:"createValue"})}function i(t,e){return e=e.shiftBlocks(a),t.f(e.get(["typePrefix"],!1),e,"h").w("-value-synonyms-dialog")}function n(t,e){return e=e.shiftBlocks(a),t.w("<!-- ko if: isAddValuePopup -->").h("i18n",e,{},{key:"entities.valueSynonymsPopup.titleLabelNew"},"h").w("<!-- /ko --><!-- ko ifnot: isAddValuePopup -->").h("i18n",e,{},{key:"entities.valueSynonymsPopup.titleLabelEdit"},"h").w("<!-- /ko -->")}function s(t,e){return e=e.shiftBlocks(a),t.w('<div class="oj-form value-synonym-popup"><div><label for="').f(e.get(["typePrefix"],!1),e,"h").w('-popup-value">').h("i18n",e,{},{key:"entities.landing.configuration.value"},"h").w('</label><input  id="').f(e.get(["typePrefix"],!1),e,"h").w("-popup-value\"data-bind=\"ojComponent: {component: 'ojInputText',value: value,placeholder: $root.i18n.translate('entities.landing.configuration.entityValueHint'),rootAttributes: { class: 'bots-helper-max-width' },validators: [ valueValidator, $root.botsValidators.botsCanonicalNameValidator ],translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('entities.landing.configuration.valueRequired') } }}\"required/></div><div class=\"bots-helper-margin-bottom-10\"><label for=\"").f(e.get(["typePrefix"],!1),e,"h").w('-popup-synonyms">').h("i18n",e,{},{key:"entities.landing.configuration.synonyms"},"h").w('</label><input id="').f(e.get(["typePrefix"],!1),e,"h").w("-popup-synonyms\" data-bind=\"ojComponent: { component: 'ojCombobox', rootAttributes: { class: 'bots-helper-max-width' }, multiple: true, value: synonyms,validators: [ $root.botsValidators.botsSynonymsValidator ],optionChange: synonymValueChange}\"/></div></div>")}function o(t,e){return e=e.shiftBlocks(a),t.w('<button class="right green-button action-button" default="true"data-bind="ojComponent: { component: \'ojButton\',label: $root.actionButtonLabel },click: $root.createOrUpdateValue"/>')}t.register("bots/common/dialog/dialog.value.synonyms",e);var a={titleLabel:n,bodyHtml:s,footerHtml:o};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["assetType"],!1),e,"h").w("-favorites-create-dialog\"data-bind=\"ojComponent: {component: 'ojDialog',resizeBehavior: 'none',initialVisibility: 'hide',modality: 'modal',rootAttributes: {class: '").f(e.get(["assetType"],!1),e,"h").w('-favorites-create-dialog gray-dialog\'},close: close}"><div class="oj-dialog-header oj-helper-clearfix" aria-labelledby="dialog-title-favorites-create-').f(e.get(["assetType"],!1),e,"h").w('"><span id="dialog-title-favorites-create-').f(e.get(["assetType"],!1),e,"h").w('" class="oj-dialog-title">').h("i18n",e,{},{key:"favorites.dialog.create.title"},"h").w('</span> </div><div class="oj-dialog-body"><div class="oj-form oj-sm-odd-cols-3 oj-sm-labels-inline">  <div class="oj-flex">  <div class="oj-flex-item"><label for="').f(e.get(["assetType"],!1),e,"h").w('-favorites-create-name">').h("i18n",e,{},{key:"favorites.dialog.create.name"},"h").w('</label></div><div class="oj-flex-item"><input id="').f(e.get(["assetType"],!1),e,"h").w('-favorites-create-name" field="name" type="text" required data-bind="ojComponent: {component: \'ojInputText\', value: name,rootAttributes: {class: \'input\'},displayOptions: {messages: \'notewindow\'},translations: {required: {messageSummary: $root.i18n.translate(\'general.notSoFast\'),messageDetail: $root.i18n.translate(\'favorites.dialog.create.nameRequired\')}},messagesCustom: nameMsg}"/></div></div></div></div><div class="oj-dialog-footer"><button class="right green-button" default="true" data-bind="ojComponent: {component: \'ojButton\',label: i18n.translate(\'favorites.dialog.create.button\')},click: createFavorite"/></div></div>')}return t.register("bots/common/dialog/favorites.create",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["grayDialogId"],!1),e,"h").w("\"data-bind=\"ojComponent: { component: 'ojDialog',resizeBehavior: ").x(e.get(["resizeBehavior"],!1),e,{else:i,block:n},{}).w(",initialVisibility: 'hide',modality: 'modal',dragAffordance: ").x(e.get(["dragAffordance"],!1),e,{else:s,block:o},{}).w(",resizable: false,cancelBehavior: 'escape',rootAttributes: { class: '").f(e.get(["sizeKlazz"],!1),e,"h").w(" oj-flex gray-dialog suite-context-header-overlay'}").x(e.get(["closeHandler"],!1),e,{block:a},{}).x(e.get(["animationAtOpen"],!1),e,{block:r},{}).x(e.get(["positionOptions"],!1),e,{block:l},{}).w(' }"><div class="oj-dialog-header oj-helper-clearfix oj-flex-bar" aria-labelledby="').f(e.get(["grayDialogId"],!1),e,"h").w('-title"><div id="').f(e.get(["grayDialogId"],!1),e,"h").w('-title" class="oj-dialog-title bots-helper-padding-bottom-0 oj-flex-bar-middle oj-sm-align-items-center">').b(e.getBlock("titleLabel"),e,{},{}).w('</div><div class="oj-flex-bar-end">').b(e.getBlock("titleEndToolbar"),e,{},{}).w('<a href="#" data-bind="click: function() { $(\'#').f(e.get(["grayDialogId"],!1),e,"h").w("').ojDialog('close'); }\"><!-- ko inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_close_16', klazz: 'bots-svgsprite-popup-icon' } --><!-- /ko --></a></div></div><div class=\"oj-dialog-body oj-flex-item\">").b(e.getBlock("bodyHtml"),e,{block:d},{}).w('</div><div class="oj-dialog-footer">').b(e.getBlock("footerHtml"),e,{block:h},{}).w("</div></div>")}function i(t,e){return t.w("'none'")}function n(t,e){return t.f(e.get(["resizeBehavior"],!1),e,"h")}function s(t,e){return t.w("'title-bar'")}function o(t,e){return t.f(e.get(["dragAffordance"],!1),e,"h")}function a(t,e){return t.w(",close: ").f(e.get(["closeHandler"],!1),e,"h")}function r(t,e){return t.w(",animateStart: function (event, ui) {if (!$(event.target).is('#").f(e.get(["grayDialogId"],!1),e,"h").w("')) return;if ('open' === ui.action) {event.preventDefault();var action = '").f(e.get(["animationAtOpen"],!1),e,"h").w("';if ('none' === action) {ui.endCallback();}else {oj.AnimationUtils[action](ui.element).then(ui.endCallback);}}}")}function l(t,e){return t.w(",position: ").f(e.get(["positionOptions"],!1),e,"h")}function d(t,e){return t.w('<div class="oj-form oj-sm-odd-cols-12 oj-md-odd-cols-5 oj-md-labels-inline">  <div class="oj-flex"><div class="oj-flex-item"><label class="oj-label-nowrap" for="').f(e.get(["grayDialogId"],!1),e,"h").w('-create-artifact">').b(e.getBlock("artifNameLabel"),e,{},{}).w('</label></div><div class="oj-flex-item"><input id="').f(e.get(["grayDialogId"],!1),e,"h").w('-create-artifact" type="text"data-bind="ojComponent: { component: \'ojInputText\',required: true,value: ').f(e.get(["artifKoVarName"],!1),e,"h").w(",rootAttributes: { class: 'input bots-helper-max-width' },displayOptions: { messages: 'notewindow' },placeholder: ").b(e.getBlock("artifPlaceholder"),e,{},{}).w(",").x(e.get(["validators"],!1),e,{block:c},{}).w("translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: ").b(e.getBlock("artifRequiredMessage"),e,{},{}).w(" } }").x(e.get(["artifactCustomMessage"],!1),e,{block:u},{}).w(' }"/></div></div></div>')}function c(t,e){return t.w("validators: [ ").f(e.get(["validators"],!1),e,"h").w(" ],")}function u(t,e){return t.w(",messagesCustom: ").f(e.get(["artifactCustomMessage"],!1),e,"h")}function h(t,e){return t.w('<button class="right ').x(e.get(["colorButtonKlazz"],!1),e,{else:b,block:g},{}).w(' action-button" default="true"data-bind="ojComponent: { component: \'ojButton\',label: ').b(e.getBlock("actionButtonLabel"),e,{},{}).w(" }").x(e.get(["actionButtonVisible"],!1),e,{block:f},{}).w(",click: ").f(e.get(["actionHandler"],!1),e,"h").w('"/>')}function b(t,e){return t.w("green-button")}function g(t,e){return t.f(e.get(["colorButtonKlazz"],!1),e,"h")}function f(t,e){return t.w(",visible: ").f(e.get(["actionButtonVisible"],!1),e,"h")}return t.register("bots/common/dialog/gray.dialog",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,b.__dustBody=!0,g.__dustBody=!0,f.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["assetType"],!1),e,"h").w("-create-segment-dialog\" data-bind=\"ojComponent: {component: 'ojDialog',resizeBehavior: 'none',initialVisibility: 'hide',title: $root.i18n.translate('segments.dialog.create.title'),modality: 'modal',rootAttributes: { class: 'gray-dialog create-segment-dialog'},close: function(evt) {").x(e.get(["close"],!1),e,{block:i},{}).w(';}}"><div class="oj-flex"><label for="').f(e.get(["assetType"],!1),e,"h").w('-create-segment-dialog-name">').h("i18n",e,{},{key:"general.name"},"h").w('</label></div><div class="oj-flex bots-helper-margin-top-10"><input id="').f(e.get(["assetType"],!1),e,"h").w('-create-segment-dialog-name" field="name" type="text" data-bind="ojComponent: {component: \'ojInputText\',value: name,rootAttributes: {class: \'bots-helper-max-width\'},displayOptions: {messages: \'notewindow\'},translations: {required: {messageSummary: $root.i18n.translate(\'general.notSoFast\'),messageDetail: $root.i18n.translate(\'segments.dialog.create.nameRequired\')}},messagesCustom: nameMsg}" required /></div><!-- ko if: usersCount() --><div class="oj-flex oj-sm-align-items-center bots-helper-margin-top-10"><div class="oj-flex-item oj-sm-flex-initial bots-helper-margin-right-7"><label for="').f(e.get(["assetType"],!1),e,"h").w('-create-segment-dialog-item">').h("i18n",e,{},{key:"segments.dialog.create.users"},"h").w('</label></div><div class="oj-flex-item"><input id="').f(e.get(["assetType"],!1),e,"h").w('-create-segment-dialog-item" tabindex="-1"" data-bind="ojComponent: {component: \'ojInputText\',value: usersCount(),readOnly: true,rootAttributes: {class: \'bots-helper-max-width bots-no-margin\'}}" /></div></div><!-- /ko --><div class="oj-flex oj-sm-align-items-center bots-helper-margin-top-10"><div data-bind="ojComponent: {component: \'ojCheckboxset\',value: exportResponsys}"><span class="oj-choice-row"><input id="').f(e.get(["assetType"],!1),e,"h").w('-create-segment-dialog-export" type="checkbox" value="export" /><label for="').f(e.get(["assetType"],!1),e,"h").w('-create-segment-dialog-export">').h("i18n",e,{},{key:"segments.dialog.create.exportResponsys"},"h").w('</label></span></div></div><div class="oj-flex bots-helper-margin-top-15"><label for="').f(e.get(["assetType"],!1),e,"h").w('-create-segment-dialog-description">').h("i18n",e,{},{key:"general.description"},"h").w('</label></div><div class="oj-flex bots-helper-margin-top-10"><textarea id="').f(e.get(["assetType"],!1),e,"h").w('-create-segment-dialog-description" rows="4" data-bind="ojComponent: {component: \'ojTextArea\',value: description,validators: [ $root.botsValidators.lengthValidator ],rootAttributes: {class: \'bots-helper-max-width\'}}"></textarea></div><div class="oj-dialog-footer"><button id="').f(e.get(["assetType"],!1),e,"h").w('-create-segment-dialog-action" class="green-cyan-button create-button" default="true" data-bind="ojComponent: {component: \'ojButton\',label: $root.i18n.translate(\'general.create\'),rootAttributes: { class: \'bots-no-margin\' }}, click: createSegment"></button></div></div>')}function i(t,e){return t.f(e.get(["close"],!1),e,"h").w("()")}return t.register("bots/common/dialog/segment.create",e),e.__dustBody=!0,i.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["id"],!1),e,"h").w("-report-selection-dialog\"data-bind=\"ojComponent: {component: 'ojDialog',resizeBehavior: 'none',initialVisibility: 'hide',modality: 'modeless',rootAttributes: {class: 'segment-selection-dialog gray-dialog'},position: { my: { horizontal: 'center', vertical: 'bottom' }, at: { horizontal: 'center', vertical: 'top' } }}\"><div class=\"oj-dialog-header oj-helper-clearfix\" aria-labelledby=\"dialogTitleId\"><span id=\"dialogTitleId\" class=\"oj-dialog-title\">").h("i18n",e,{},{key:i},"h").w('</span> </div><div class="oj-dialog-body"><div aria-label="').h("i18n",e,{},{key:n,filter:"h"},"h").w('" data-bind="ojComponent: {component: \'ojButtonset\',checked: type}"><label for="').f(e.get(["id"],!1),e,"h").w('-report-selection-present"><span class="user-count present"><span data-bind="text: $root.i18n.formatNumber(').f(e.get(["presentUsers"],!1),e,"h").w("(), {pattern: '").f(e.getPath(!1,["cldr","int"]),e,"h").w("',scale: true})\"></span><span data-bind=\"inlinesvg: {width: 16, height: 16, project: 'bots', basename: 'qual_did_24'}\"></span></span><span class=\"event\">").h("i18n",e,{},{key:s},"h").w('</span></label>                               <input id="').f(e.get(["id"],!1),e,"h").w('-report-selection-present" type="radio"name="report-selection" data-bind="value: \'present\', ojComponent: {component: \'ojButton\',chroming: \'half\'}"/><label for="').f(e.get(["id"],!1),e,"h").w('-report-selection-absent"><span class="user-count absent"><span data-bind="text: $root.i18n.formatNumber(').f(e.get(["absentUsers"],!1),e,"h").w("(), {pattern: '").f(e.getPath(!1,["cldr","int"]),e,"h").w("',scale: true})\"></span><span data-bind=\"inlinesvg: {width: 16, height: 16, project: 'bots', basename: 'qual_didnot_24'}\"></span></span><span class=\"event\">").h("i18n",e,{},{key:o},"h").w('</span></label>                               <input id="').f(e.get(["id"],!1),e,"h").w('-report-selection-absent" type="radio"name="report-selection" data-bind="value: \'absent\', ojComponent: {component: \'ojButton\',chroming: \'half\'}"/></div>       </div><div class="oj-dialog-footer oj-row"><button class="right green-button" default="true" data-bind="ojComponent: {component: \'ojButton\',label: i18n.translate(\'retention.dialog.report.selection.create\')},click: openCreateSegmentDialog"/></div></div>')}function i(t,e){return t.f(e.get(["dialogTitle"],!1),e,"h")}function n(t,e){return t.f(e.get(["selectionTitle"],!1),e,"h")}function s(t,e){return t.f(e.get(["presentLabel"],!1),e,"h")}function o(t,e){return t.f(e.get(["absentLabel"],!1),e,"h")}return t.register("bots/common/dialog/segment.selection",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["assetType"],!1),e,"h").w("-trash-to-dialog\"data-bind=\"ojComponent: {component: 'ojDialog',resizeBehavior: 'none',initialVisibility: 'hide',modality: 'modal',rootAttributes: {class: '").f(e.get(["assetType"],!1),e,"h").w('-trash-to-dialog gray-dialog\'},close: close}"><div class="oj-dialog-header oj-helper-clearfix" aria-labelledby="dialog-title-trash-to-').f(e.get(["assetType"],!1),e,"h").w('"><span id="dialog-title-trash-to-').f(e.get(["assetType"],!1),e,"h").w('" class="oj-dialog-title">').h("i18n",e,{},{key:"trash.dialog.to.title"},"h").w('</span> </div><div class="oj-dialog-body"><div class="oj-form oj-sm-odd-cols-3 oj-sm-labels-inline">  <div class="oj-flex">  <div class="oj-flex-item"><label for="').f(e.get(["assetType"],!1),e,"h").w('-trash-to-name">').h("i18n",e,{},{key:"trash.dialog.to.name"},"h").w('</label></div><div class="oj-flex-item"><input id="').f(e.get(["assetType"],!1),e,"h").w('-trash-to-name" type="text" data-bind="ojComponent: {component: \'ojInputText\', value: name,readOnly: true}"/></div></div></div></div><div class="oj-dialog-footer"><button class="right green-button" default="true" data-bind="ojComponent: {component: \'ojButton\',label: i18n.translate(\'trash.dialog.to.button\')},click: trashArtifact"/></div></div>')}return t.register("bots/common/dialog/trash.to",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"bots-export-logs-dialog",sizeKlazz:"bots-export-logs-dialog",actionHandler:"downloadBotLogs"})}function i(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"bots.exportBotLogsDialog.titleLabel"},"h")}function n(t,e){return e=e.shiftBlocks(o),t.w('<div class="oj-form oj-sm-labels-inline"><div class="oj-flex-bar suite-helper-max-width suite-helper-margin-bottom-15"><div class="oj-flex-bar-start"><!-- ko inlinesvg: { width: 16, height: 16, project: \'bots\', basename: \'stat_info_16\' } --><!-- /ko --></div><div class="oj-flex-bar-middle suite-helper-margin-left-5 bots-inline-tip-text">').h("i18n",e,{},{key:"bots.exportBotLogsDialog.enableLoggingHelp"},"h").w('</div></div><div id="export-logs-type-select" class="oj-radioset-no-chrome"data-bind="ojComponent: { component: \'ojRadioset\',value: logSelection,rootAttributes: { class: \'oj-radioset-no-chrome\' } }" ><span class="oj-choice-row"><input id="export-logs-type-select-intent" type="radio" value="intent" name="export-logs-type-select"><label for="export-logs-type-select-intent">').h("i18n",e,{},{key:"bots.exportBotLogsDialog.typeLabel.intent"},"h").w('</label></span><span class="oj-choice-row"><input id="export-logs-type-select-qna" type="radio" value="qna" name="export-logs-type-select"><label for="export-logs-type-select-qna">').h("i18n",e,{},{key:"bots.exportBotLogsDialog.typeLabel.qna"},"h").w('</label></span><span class="oj-choice-row"><input id="export-logs-type-select-bot" type="radio" value="bot" name="export-logs-type-select"><label for="export-logs-type-select-bot">').h("i18n",e,{},{key:"bots.exportBotLogsDialog.typeLabel.bot"},"h").w('</label></span></div><div><label for="export-logs-period-select">').h("i18n",e,{},{key:"bots.exportBotLogsDialog.timePeriodLabel"},"h").w("</label><select id=\"export-logs-period-select\"data-bind=\"ojComponent: { component: 'ojSelect',value: timePeriodSelection,rootAttributes: { style: 'max-width: 20em;' } }\"><!-- ko foreach: timePeriods --><option data-bind=\"value: label,text: $root.i18n.translate('bots.exportBotLogsDialog.timePeriods.' + label)\"></option><!-- /ko --></select></div></div>")}function s(t,e){return e=e.shiftBlocks(o),t.w("'").h("i18n",e,{},{key:"bots.exportBotLogsDialog.exportLabel",filter:"j"},"h").w("'")}t.register("bots/common/export.bot.logs.dialog",e);var o={titleLabel:i,bodyHtml:n,actionButtonLabel:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.nx(e.get(["nfl"],!1),e,{block:i},{}).nx(e.get(["noLabel"],!1),e,{block:n},{}).nx(e.get(["nfl"],!1),e,{block:r},{}).w('<div data-bind="if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE"><input ').nx(e.get(["noLabel"],!1),e,{block:l},{}).x(e.get(["list"],!1),e,{block:d},{}).w("data-bind=\"ojComponent: { component: 'ojCombobox', value: ").f(e.get(["value"],!1),e,"h").w(",multiple: ").f(e.get(["multiple"],!1),e,"h").x(e.get(["required"],!1),e,{block:c},{}).x(e.get(["placeholder"],!1),e,{block:u},{}).x(e.get(["options"],!1),e,{block:h},{}).x(e.get(["validators"],!1),e,{block:b},{}).x(e.get(["rootAttributes"],!1),e,{block:g},{}).x(e.get(["translationsPartGiven"],!1),e,{block:f},{}).w(' }"></div><div data-bind="ifnot: $root.isDraftVersion() && $root.permissions().BOTS_WRITE">').h("eq",e,{else:p,block:y},{key:e.get(["multiple"],!1),value:"true"},"h").w("</div>").nx(e.get(["nfl"],!1),e,{block:A},{})}function i(t,e){return t.w('<div class="oj-flex">')}function n(t,e){return t.nx(e.get(["nfl"],!1),e,{block:s},{}).w('<label id="').f(e.get(["ezComboboxIdPrefix"],!1),e,"h").w('-label" for="').f(e.get(["ezComboboxIdPrefix"],!1),e,"h").w('-oj-combobox">').h("i18n",e,{},{key:o},"h").w("</label>").nx(e.get(["nfl"],!1),e,{block:a},{})}function s(t,e){return t.w('<div class="oj-flex-item">')}function o(t,e){return t.f(e.get(["label"],!1),e,"h")}function a(t,e){return t.w("</div>")}function r(t,e){return t.w('<div class="oj-flex-item">')}function l(t,e){return t.w('id="').f(e.get(["ezComboboxIdPrefix"],!1),e,"h").w('-oj-combobox"')}function d(t,e){return t.w('list="').f(e.get(["list"],!1),e,"h").w('"')}function c(t,e){return t.w(",required: ").f(e.get(["required"],!1),e,"h")}function u(t,e){return t.w(",placeholder: ").f(e.get(["placeholder"],!1),e,"h")}function h(t,e){return t.w(",options: ").f(e.get(["options"],!1),e,"h")}function b(t,e){return t.w(",validators: ").f(e.get(["validators"],!1),e,"h")}function g(t,e){return t.w(",rootAttributes: ").f(e.get(["rootAttributes"],!1),e,"h")}function f(t,e){return t.w(",translations: ").b(e.getBlock("translationsPart"),e,{},{})}function p(t,e){return t.w("<input ").nx(e.get(["noLabel"],!1),e,{block:m},{}).w("data-bind=\"ojComponent: { component: 'ojInputText',value: ").nx(e.get(["valueToString"],!1),e,{else:v,block:_},{}).w(",readOnly: true,rootAttributes: { class: 'bots-helper-padding-top-10' } }\">")}function m(t,e){return t.w('aria-labelledby="').f(e.get(["ezComboboxIdPrefix"],!1),e,"h").w('-label"')}function v(t,e){return t.f(e.get(["valueToString"],!1),e,"h").w("(").f(e.get(["value"],!1),e,"h").w(")")}function _(t,e){return t.w("_.first(ko.unwrap(").f(e.get(["value"],!1),e,"h").w(") || [ ])")}function y(t,e){return t.w("<textarea ").nx(e.get(["noLabel"],!1),e,{block:w},{}).x(e.get(["resizable"],!1),e,{block:k},{}).w('rows="').x(e.get(["rows"],!1),e,{else:T,block:E},{}).w("\"data-bind=\"ojComponent: { component: 'ojTextArea',value: ").nx(e.get(["valueToString"],!1),e,{else:x,block:j},{}).w(",readOnly: true,rootAttributes: { class: 'bots-helper-padding-top-10' } }\"></textarea>")}function w(t,e){return t.w('aria-labelledby="').f(e.get(["ezComboboxIdPrefix"],!1),e,"h").w('-label"')}function k(t,e){return t.w('style="resize: both"')}function T(t,e){return t.w("2")}function E(t,e){return t.f(e.get(["row"],!1),e,"h")}function x(t,e){return t.f(e.get(["valueToString"],!1),e,"h").w("(").f(e.get(["value"],!1),e,"h").w(")")}function j(t,e){return t.w("(ko.unwrap(").f(e.get(["value"],!1),e,"h").w(") || [ ]).join(', ')")}function A(t,e){return t.w("</div></div>")}return t.register("bots/common/ez.combobox",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,b.__dustBody=!0,g.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,v.__dustBody=!0,_.__dustBody=!0,y.__dustBody=!0,w.__dustBody=!0,k.__dustBody=!0,T.__dustBody=!0,E.__dustBody=!0,x.__dustBody=!0,j.__dustBody=!0,A.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.h("ne",e,{block:i},{key:e.get(["forceImmutable"],!1),value:"true"},"h").w('<div class="oj-flex bots-helper-padding-top-6 bots-helper-padding-bottom-4"><div class="oj-flex-item"><label id="').f(e.get(["ezRadiosetIdPrefix"],!1),e,"h").w('-label"class="oj-label-nocomp oj-label-for-non-control">').h("i18n",e,{},{key:s},"h").w('</label></div><div class="oj-flex-item"><div aria-labelledby="').f(e.get(["ezRadiosetIdPrefix"],!1),e,"h").w('-label"data-bind="text: ').f(e.get(["valueToString"],!1),e,"h").w("(").f(e.get(["value"],!1),e,"h").w(')"></div></div></div>').h("ne",e,{block:o},{key:e.get(["forceImmutable"],!1),value:"true"},"h")}function i(t,e){return t.w('<!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --><div class="oj-flex-bar bots-helper-margin-bottom-10"><div class="oj-flex-bar-start oj-helper-hidden-accessible"><label id="').f(e.get(["ezRadiosetIdPrefix"],!1),e,"h").w('-label">').h("i18n",e,{},{key:n},"h").w('</label></div><div class="oj-flex-bar-middle"><div aria-labelledby="').f(e.get(["ezRadiosetIdPrefix"],!1),e,"h").w("-label\"data-bind=\"ojComponent: { component: 'ojRadioset',value: ").f(e.get(["value"],!1),e,"h").w(' }">').b(e.getBlock("radiosPart"),e,{},{}).w("</div></div></div><!-- /ko --><!-- ko ifnot: $root.isDraftVersion() && $root.permissions().BOTS_WRITE -->")}function n(t,e){return t.f(e.get(["label"],!1),e,"h")}function s(t,e){return t.f(e.get(["label"],!1),e,"h").w("READONLY")}function o(t,e){return t.w("<!-- /ko -->")}return t.register("bots/common/ez.radioset",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.nx(e.get(["nfl"],!1),e,{block:i},{}).x(e.get(["options"],!1),e,{block:n},{}).x(e.get(["listId"],!1),e,{block:p},{}).nx(e.get(["nfl"],!1),e,{block:A},{})}function i(t,e){return t.w('<div class="oj-flex">')}function n(t,e){return t.w("<!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE -->").nx(e.get(["nfl"],!1),e,{block:s},{}).w('<label for="').f(e.get(["ezSelectIdPrefix"],!1),e,"h").w('-oj-select">').h("i18n",e,{},{key:o},"h").w("</label>").nx(e.get(["nfl"],!1),e,{block:a},{}).w('<select id="').f(e.get(["ezSelectIdPrefix"],!1),e,"h").w("-oj-select\"data-bind=\"ojComponent: { component: 'ojSelect'").x(e.get(["required"],!1),e,{block:r},{}).w(",value: ").f(e.get(["value"],!1),e,"h").w(",rootAttributes: { class: 'suite-helper-padding-right-5' },options: ").f(e.get(["options"],!1),e,"h").x(e.get(["bubbleHelp"],!1),e,{block:l},{}).b(e.getBlock("ojSelectConfigExtra"),e,{},{}).w(" }").x(e.get(["bubbleHelp"],!1),e,{block:c},{}).w('"></select> ').b(e.getBlock("ojSelectExtra"),e,{},{}).nx(e.get(["nfl"],!1),e,{block:u},{}).w("<!-- /ko --><!-- ko ifnot: $root.isDraftVersion() && $root.permissions().BOTS_WRITE -->").nx(e.get(["nfl"],!1),e,{block:h},{}).w('<label id="').f(e.get(["ezSelectIdPrefix"],!1),e,"h").w('-label"}>').h("i18n",e,{},{key:b},"h").w("</label>").nx(e.get(["nfl"],!1),e,{block:g},{}).w('<input aria-labelledby="').f(e.get(["ezSelectIdPrefix"],!1),e,"h",["s"]).w("-label\"data-bind=\"ojComponent: { component: 'ojInputText',value: ko.computed(function() {return (_.find(ko.unwrap(").f(e.get(["options"],!1),e,"h").w("), function(o) {return o.value === _.first(ko.unwrap(").f(e.get(["value"],!1),e,"h").w("));}) || _.first(ko.unwrap(").f(e.get(["options"],!1),e,"h").w(')) || { }).label;}, null, { deferEvaluation: true }),readOnly: true }" />').b(e.getBlock("readOnlyExtra"),e,{},{}).nx(e.get(["nfl"],!1),e,{block:f},{}).w("<!-- /ko -->")}function s(t,e){return t.w('<div class="oj-flex-item">')}function o(t,e){return t.f(e.get(["label"],!1),e,"h")}function a(t,e){return t.w('</div><div class="oj-flex-item">')}function r(t,e){return t.w(",required: ").f(e.get(["required"],!1),e,"h")}function l(t,e){return t.x(e.get(["optionChange"],!1),e,{
block:d},{}).w(",help: { source: 'http://www.oracle.com' }")}function d(t,e){return t.w(",optionChange: ").f(e.get(["optionChange"],!1),e,"h")}function c(t,e){return t.w(",botsHelpPopup: ").f(e.get(["bubbleHelp"],!1),e,"h")}function u(t,e){return t.w("</div>")}function h(t,e){return t.w('<div class="oj-flex-item">')}function b(t,e){return t.f(e.get(["label"],!1),e,"h")}function g(t,e){return t.w('</div><div class="oj-flex-item">')}function f(t,e){return t.w("</div>")}function p(t,e){return t.w("<!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE -->").nx(e.get(["nfl"],!1),e,{block:m},{}).w('<label for="').f(e.get(["ezSelectIdPrefix"],!1),e,"h").w('-oj-select">').h("i18n",e,{},{key:v},"h").w("</label>").nx(e.get(["nfl"],!1),e,{block:_},{}).w('<select id="').f(e.get(["ezSelectIdPrefix"],!1),e,"h").w("-oj-select\"data-bind=\"ojComponent: { component: 'ojSelect',value: ").f(e.get(["value"],!1),e,"h").w(",rootAttributes: { class: 'suite-helper-padding-right-5' },list: '").f(e.get(["listId"],!1),e,"h").w("'").x(e.get(["bubbleHelp"],!1),e,{block:y},{}).w(" }").x(e.get(["bubbleHelp"],!1),e,{block:w},{}).w('"></select> ').b(e.getBlock("ojSelectExtra"),e,{},{}).nx(e.get(["nfl"],!1),e,{block:k},{}).w("<!-- /ko --><!-- ko ifnot: $root.isDraftVersion() && $root.permissions().BOTS_WRITE -->").nx(e.get(["nfl"],!1),e,{block:T},{}).w('<label id="').f(e.get(["ezSelectIdPrefix"],!1),e,"h").w('-label">').h("i18n",e,{},{key:E},"h").w("</label>").nx(e.get(["nfl"],!1),e,{block:x},{}).w('<input aria-labelledby="').f(e.get(["ezSelectIdPrefix"],!1),e,"h").w("-label\"data-bind=\"lifecycleHook: { update: { callback: function() { $('#' + '").f(e.get(["listId"],!1),e,"h").w("').hide(); } } },ojComponent: { component: 'ojInputText',value: ").f(e.get(["valueToString"],!1),e,"h").w("(").f(e.get(["value"],!1),e,"h").w('),readOnly: true }">').b(e.getBlock("readOnlyExtra"),e,{},{}).nx(e.get(["nfl"],!1),e,{block:j},{}).w("<!-- /ko -->")}function m(t,e){return t.w('<div class="oj-flex-item">')}function v(t,e){return t.f(e.get(["label"],!1),e,"h")}function _(t,e){return t.w('</div><div class="oj-flex-item">')}function y(t,e){return t.w(",help: { source: 'http://www.oracle.com' }")}function w(t,e){return t.w(",botsHelpPopup: ").f(e.get(["bubbleHelp"],!1),e,"h")}function k(t,e){return t.w("</div>")}function T(t,e){return t.w('<div class="oj-flex-item">')}function E(t,e){return t.f(e.get(["label"],!1),e,"h")}function x(t,e){return t.w('</div><div class="oj-flex-item">')}function j(t,e){return t.w("</div>")}function A(t,e){return t.w("</div>")}return t.register("bots/common/ez.select",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,b.__dustBody=!0,g.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,v.__dustBody=!0,_.__dustBody=!0,y.__dustBody=!0,w.__dustBody=!0,k.__dustBody=!0,T.__dustBody=!0,E.__dustBody=!0,x.__dustBody=!0,j.__dustBody=!0,A.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<button class="oj-flex-item ').f(e.get(["package"],!1),e,"h").w("-nav-button-icon\"data-bind=\"ojComponent: { component: 'ojButton',display: 'icons',chroming: 'half',icons: { start: 'bots-helper-margin-lr-auto bots-helper-margin-bottom-0 bots-helper-shift-down-1' },label: $root.i18n.translate('nav.tester'),rootAttributes: { class: 'bots-helper-margin-bottom-10 bots-helper-padding-top-0' } },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_test_16',klazz: 'bots-helper-22x22 bots-helper-margin-top-1 bots-helper-margin-left-2' },  click: $root.onClickOpenFullPageTester\"></button>")}return t.register("bots/common/fullpage.tester.button",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div data-bind="with: ').f(e.get(["service"],!1),e,"h").w('"><div data-bind="ojComponent: { component: \'ojCollapsible\',expanded: $root.httpHeadersController().expanded }"><h3>').h("i18n",e,{},{key:"components.httpHeaders.label"},"h").w("</h3><div><p>").h("i18n",e,{},{key:"components.httpHeaders.summary"},"h").w('</p><!-- ko if: $root.permissions().BOTS_WRITE --><div class="oj-flex-bar"><div class="oj-flex-bar-end"><button class="natural-button oj-button oj-widget oj-clickable-default oj-button-text-only bots-helper-margin-right-4"role="button"data-bind="ojComponent: { component: \'ojButton\' },click: function(data, evt) {if ($root.httpHeadersController()) {$root.httpHeadersController().addHttpHeader();}}"><span class="oj-button-text">').h("i18n",e,{},{key:"components.httpHeaders.addLabel"},"h").w('</span></button></div></div><!-- /ko --><div class="oj-flex-bar"><div class="oj-flex-bar-middle oj-sm-justify-content-center bots-tertiary-text"data-bind="if: !properties() || properties().length === 0,css: { \'bots-helper-margin-top-20\': !properties() || properties().length === 0 }">').h("i18n",e,{},{key:"components.httpHeaders.none"},"h").w('</div></div><!-- ko if: properties() --><div class="').x(e.get(["headerKlazz"],!1),e,{block:i},{}).w('" data-bind="foreach: properties"><div class="oj-flex oj-flex-items-pad bots-helper-padding-top-6"><div class="oj-flex-item oj-md-4"><!-- ko if: $root.permissions().BOTS_WRITE --><input data-bind="attr: { id: ').f(e.get(["idPrefix"],!1),e,"h").w(" + '-").f(e.get(["viewMode"],!1),e,"h").w("-name-' + ordinal },ojComponent: { component: 'ojCombobox',options: getStandardHeaders(),multiple: false,value: name,validators: [ uniqueKeyValidator() ],translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('components.httpHeaders.key.required') } },rootAttributes: { class: 'bots-helper-max-width' } }\"placeholder=\"* ").h("i18n",e,{},{key:"components.httpHeaders.key.placeholder",filter:"h"},"h").w('" required /><!-- /ko --><!-- ko ifnot: $root.permissions().BOTS_WRITE --><div class="bots-helper-padding-top-10"data-bind="text: name"></div><!-- /ko --></div><div class="oj-flex-item oj-md-8"><input type="text"data-bind="attr: { id: ').f(e.get(["idPrefix"],!1),e,"h").w(" + '-").f(e.get(["viewMode"],!1),e,"h").w("-value-' + ordinal },ojComponent: { component: 'ojInputText',value: value,readOnly: !$root.permissions().BOTS_WRITE,required: $root.permissions().BOTS_WRITE,translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('components.httpHeaders.value.required') } },rootAttributes: { class: 'bots-helper-max-width-halfchrome-button-after' } }\"placeholder=\"* ").h("i18n",e,{},{key:"components.httpHeaders.value.placeholder",filter:"h"},"h").w("\" /><!-- ko if: $root.permissions().BOTS_WRITE --><button class=\"bots-destyled-button\"data-bind=\"ojComponent: { component: 'ojButton',display: 'icons',icons: { start: 'bots-svgsprite-func-icon' },label: '").h("i18n",e,{},{key:"components.httpHeaders.deleteLabel",filter:"j"},"h").w("',rootAttributes: { class: 'bots-helper-margin-left-10' } },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_delete_16' },click: function(data, evt) {if ($root.httpHeadersController()) {$root.httpHeadersController().removeHttpHeader($index());}} \"></button><!-- /ko --></div></div></div><!-- /ko --></div></div></div>")}function i(t,e){return t.f(e.get(["headerKlazz"],!1),e,"h")}return t.register("bots/common/http.headers",e),e.__dustBody=!0,i.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(r),t.p("bots/common/button.upload",e,e,{uploadInputTextId:"botUploadInputText",uploadButtonId:"botUploadButton",uploadButtonText:i,uploadButtonKlazz:"primary-button suite-helper-margin-bottom-0",uploadAccept:".json,.zip",fileuploadConfig:"dataType: 'json', dragover: botUpload.dragover, submit: botUpload.submit, progress: botUpload.progress, success: botUpload.success, fail: botUpload.fail, done: botUpload.done"})}function i(t,e){return e=e.shiftBlocks(r),t.f(e.get(["label"],!1),e,"h")}function n(t,e){return e=e.shiftBlocks(r),t.w("$root.selectUploadBotAction")}function s(t,e){return e=e.shiftBlocks(r),t.w("botUpload.cancelUploadAction")}function o(t,e){return e=e.shiftBlocks(r),t.w("botUpload.fileName")}function a(t,e){return e=e.shiftBlocks(r),t.w("{ init: { callback: initializeBotUpload } }")}t.register("bots/common/import.bot",e);var r={selectFileUploadAction:n,cancelFileUploadAction:s,uploadFileName:o,lifecycleHookConfig:a};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["infoboxId"],!1),e,"h").w('" class="oj-row bots-no-margin bots-infobox"').x(e.get(["shouldShowInfoBox"],!1),e,{block:i},{}).w('><div class="oj-sm-11 oj-col bots-no-padding"><div class="oj-row"><div class="oj-col oj-sm-1 bots-infobox-icon"><img alt="').b(e.getBlock("infoboxImgAlt"),e,{},{}).w('" src="/botsui/19.1.5-1907122019/resources/images/stat_info_16.png"></div><div class="oj-col oj-sm-11">').b(e.getBlock("infoboxText"),e,{},{}).w('</div></div></div><div class="oj-col oj-sm-1 bots-no-padding bots-icon-button-16 bots-icon-button-16-focus-helper right"><button class="bots-destyled-button bots-no-margin"data-bind="click: ').f(e.get(["infoboxHideAction"],!1),e,"h").w(",ojComponent: { component: 'ojButton',display: 'icons', icons: { start: 'oj-icon bots-remove-button bots-icon-button-16' }").x(e.get(["infoboxHideHint"],!1),e,{block:n},{}).w(' }"></button></div></div>')}function i(t,e){return t.w('data-bind="visible: ').f(e.get(["shouldShowInfoBox"],!1),e,"h").w('"')}function n(t,e){return t.w(",label: ").f(e.get(["infoboxHideHint"],!1),e,"h")}return t.register("bots/common/infobox",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["infoboxId"],!1),e,"h").w('" class="oj-row bots-infobox-tip" ').x(e.get(["shouldShowInfoBox"],!1),e,{block:i},{}).w('><div class="oj-col oj-sm-11 bots-no-padding"><div class="oj-row"><div class="oj-col oj-sm-12"><h1>').b(e.getBlock("infoboxText"),e,{},{}).w('</h1></div><div class="oj-col oj-sm-1"><img alt="').b(e.getBlock("infoboxImgAlt"),e,{},{}).w('" src="/botsui/19.1.5-1907122019/resources/images/qual_nextstep_48.png"/></div><div class="oj-col oj-sm-11"><h2>').b(e.getBlock("infoboxNext"),e,{},{}).w("</h2>").b(e.getBlock("infoboxContent"),e,{},{}).w('</div></div></div><div class="oj-col oj-sm-1 bots-infobox-tip-close-padding bots-icon-button-16 bots-icon-button-16-focus-helper right"><button class="bots-destyled-button bots-no-margin"data-bind="click: ').f(e.get(["infoboxHideAction"],!1),e,"h").w(",ojComponent: { component: 'ojButton', display: 'icons', icons: { start: 'oj-icon bots-remove-button bots-icon-button-16' }").x(e.get(["infoboxHideHint"],!1),e,{block:n},{}).w(' }"></button></div></div>')}function i(t,e){return t.w('data-bind="visible: ').f(e.get(["shouldShowInfoBox"],!1),e,"h").w('"')}function n(t,e){return t.w(", label: ").f(e.get(["infoboxHideHint"],!1),e,"h")}return t.register("bots/common/infobox_tip",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="bots-infotip ').b(e.getBlock("infotipSizeClass"),e,{},{}).w('" id="').f(e.get(["infotipId"],!1),e,"h").w('" data-bind="ojComponent:{component: \'ojPopup\', initialFocus: \'none\', tail: \'simple\'}"><div class="oj-row bots-form-margin"><div class="oj-col oj-sm-11 bots-no-padding">').b(e.getBlock("infotipText"),e,{},{}).w('</div><div class="oj-col oj-sm-1 bots-no-padding bots-icon-button-16 bots-icon-button-16-focuser right"><button class="bots-destyled-button bots-no-margin"data-bind="click: ').f(e.get(["infotipCloseAction"],!1),e,"h").w(",ojComponent: { component: 'ojButton', display: 'icons', icons: { start: 'oj-icon bots-remove-button bots-icon-button-16' }").x(e.get(["infotipCloseHint"],!1),e,{block:i},{}).w(' }"></button></div></div>').x(e.get(["infotipLink"],!1),e,{block:n},{}).w("</div>")}function i(t,e){return t.w(", label: ").f(e.get(["infotipCloseHint"],!1),e,"h")}function n(t,e){return t.w('<div class="oj-row"><div class="oj-col oj-sm-12 bots-no-padding"><a href="#" data-bind="botsOpenInTab: { ').f(e.get(["infotipLink"],!1),e,"h").w(' }"></a></div></div>')}return t.register("bots/common/infotip",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<svg version="1.1"xmlns="http://wwww.w3.org/2000/svg"xmlns:xlink="http://www.w3.org/1999/xlink"').x(e.get(["viewPortWidth"],!1),e,{block:i},{}).w('viewBox="').x(e.get(["minX"],!1),e,{else:s,block:o},{}).w(" ").x(e.get(["minY"],!1),e,{else:a,block:r},{}).w(" ").f(e.get(["width"],!1),e,"h").w(" ").f(e.get(["height"],!1),e,"h").w('"').nx(e.get(["viewPortWidth"],!1),e,{block:l},{}).x(e.get(["ariaLabelKey"],!1),e,{else:h,block:f},{}).w(" >").x(e.get(["titleKey"],!1),e,{block:m},{}).w('<use xlink:href="#').x(e.get(["project"],!1),e,{else:_,block:y},{}).w("-svgsprite-").f(e.get(["basename"],!1),e,"h").w('"/></svg>')}function i(t,e){return t.w('width="').f(e.get(["viewPortWidth"],!1),e,"h").w('" height="').f(e.get(["viewPortHeight"],!1),e,"h").w('"').x(e.get(["klazz"],!1),e,{block:n},{})}function n(t,e){return t.w(' class="').f(e.get(["klazz"],!1),e,"h").w('"')}function s(t,e){return t.w("0")}function o(t,e){return t.f(e.get(["minX"],!1),e,"h")}function a(t,e){return t.w("0")}function r(t,e){return t.f(e.get(["minY"],!1),e,"h")}function l(t,e){return t.w('class="').x(e.get(["project"],!1),e,{else:d,block:c},{}).w("-svgsprite-").f(e.get(["basename"],!1),e,"h").w("-dims").x(e.get(["klazz"],!1),e,{block:u},{}).w('"')}function d(t,e){return t.w("suite")}function c(t,e){return t.f(e.get(["project"],!1),e,"h")}function u(t,e){return t.w(" ").f(e.get(["klazz"],!1),e,"h")}function h(t,e){return t.x(e.get(["titleKey"],!1),e,{block:b},{})}function b(t,e){return t.w('role="img" aria-label="').h("i18n",e,{},{key:g,filter:"h"},"h").w('"')}function g(t,e){return t.f(e.get(["titleKey"],!1),e,"h")}function f(t,e){return t.w('role="img" aria-label="').h("i18n",e,{},{key:p,filter:"h"},"h").w('"')}function p(t,e){return t.f(e.get(["ariaLabelKey"],!1),e,"h")}function m(t,e){return t.w("<title>").h("i18n",e,{},{key:v},"h").w("</title>")}function v(t,e){return t.f(e.get(["titleKey"],!1),e,"h")}function _(t,e){return t.w("suite")}function y(t,e){return t.f(e.get(["project"],!1),e,"h")}return t.register("bots/common/inlinesvg",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,b.__dustBody=!0,g.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,v.__dustBody=!0,_.__dustBody=!0,y.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"bots-install-store-skill-dialog",sizeKlazz:"bots-install-store-skill-dialog",actionHandler:"installStoreSkillUpdate"})}function i(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"bots.installStoreSkillDialog.titleLabel"},"h")}function n(t,e){return e=e.shiftBlocks(o),t.p("bots/common/skill.store.pitch",e,e,{skillDisplayName:"skillDisplayName",skillVersion:"skillVersion",skillCategory:"skillCategory",skillSummary:"skillSummary",skillDescription:"skillDescription"})}function s(t,e){return e=e.shiftBlocks(o),t.w("'").h("i18n",e,{},{key:"bots.installStoreSkillDialog.installLabel",filter:"j"},"h").w("'")}t.register("bots/common/install.store.skill.dialog",e);var o={titleLabel:i,bodyHtml:n,actionButtonLabel:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w("<button id=\"bots-take-ua-tour\" class=\"bots-top-buttons \"data-bind=\"ojComponent: { component: 'ojButton',display: 'all',label: $root.i18n.translate('bots.teachMeHow'),rootAttributes: { class: 'secondary-button suite-helper-margin-bottom-0' } },click: teachMeHow\"></button>")}return t.register("bots/common/learn.bot",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["masDetsIdPrefix"],!1),e,"h").w('-master-details" class="oj-flex-bar bots-no-horiz-scroll mas-dets-outer"><div id="').f(e.get(["masDetsIdPrefix"],!1),e,"h").w('-list-container" class="oj-flex-bar-start oj-flex oj-sm-flex-direction-column ').x(e.get(["navSizeKlazz"],!1),e,{else:i,block:n},{}).w(' mas-dets-navpanel"><div class="oj-flex suite-helper-max-width oj-flex-direction-row oj-sm-flex-items-initial').x(e.get(["navBookendButtons"],!1),e,{block:s},{}).w('"><div class="oj-flex-item mas-dets-non-empty-margin-right-9">').b(e.getBlock("masDetsNavNewButton_part"),e,{block:o},{}).w('</div><div class="oj-flex-item" data-bind="css: { \'oj-flex-bar-end\': !$root.isDraftVersion() }">').b(e.getBlock("masDetsMoreCommands_part"),e,{},{}).w("</div></div>").b(e.getBlock("masDetsNavFilterInput_part"),e,{block:u},{}).b(e.getBlock("masDetsNavSortBy_part"),e,{block:b},{}).b(e.getBlock("masDetsNavHeader_part"),e,{block:p},{}).w('<div id="').f(e.get(["masDetsIdPrefix"],!1),e,"h").w("-nav-list\"data-bind=\"ojComponent: { component: 'ojNavigationList',optionChange: ").f(e.get(["onNavItemSelection"],!1),e,"h").w(",drillMode: '").x(e.get(["navDrillMode"],!1),e,{else:_,block:y},{}).w("',").x(e.get(["navItemIconProvider"],!1),e,{block:w},{}).w("data: ").f(e.get(["navItemsDataSource"],!1),e,"h").w(",item: { template: '").f(e.get(["masDetsIdPrefix"],!1),e,"h").w("-item-template' },rootAttributes: { class: '").nx(e.get(["navHeaderLabelRbKey"],!1),e,{block:k},{}).w("mas-dets-navlist-").x(e.get(["masDetsNavListSize"],!1),e,{else:T,block:E},{}).w("' } }").x(e.get(["masLifecycleHook"],!1),e,{block:x},{}).w('"></div>').b(e.getBlock("masDetsPager_part"),e,{},{}).w('<script type="text/html" id="').f(e.get(["masDetsIdPrefix"],!1),e,"h").w('-item-template">').b(e.getBlock("masDetsNavItem_part"),e,{block:j},{}).w('</script></div><div id="').f(e.get(["masDetsIdPrefix"],!1),e,"h").w('-editor-container" class="oj-flex-bar-middle oj-flex oj-sm-flex-direction-column').x(e.get(["detsSizeKlazz"],!1),e,{block:Q},{}).w('">').x(e.get(["navCollapsibleMasterList"],!1),e,{block:K},{}).b(e.getBlock("masDetsDetails_part"),e,{},{}).w("</div></div>")}function i(t,e){return t.w("mas-dets-navpanel-md")}function n(t,e){return t.f(e.get(["navSizeKlazz"],!1),e,"h")}function s(t,e){return t.w(" oj-sm-justify-content-space-between")}function o(t,e){return t.x(e.get(["navNewButtonLabelRbKey"],!1),e,{block:a},{})}function a(t,e){return t.w('<!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --> <button class="green-button bots-helper-margin-left-3 oj-sm-align-self-flex-start ').x(e.get(["navNewButtonKlazz"],!1),e,{block:r},{}).w('" id="').f(e.get(["masDetsIdPrefix"],!1),e,"h").w('-newNavObject"data-bind="').x(e.get(["navNewButtonTitleRbKey"],!1),e,{block:l},{}).w("ojComponent: { component: 'ojButton',icons: { start: 'bots-svgsprite-cta-icon' },label: $root.i18n.translate('").f(e.get(["navNewButtonLabelRbKey"],!1),e,"h").w("')").x(e.get(["navNewButtonDisabledExp"],!1),e,{block:d},{}).w(" },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_plus_16' },click: ").f(e.get(["navNewButtonHandler"],!1),e,"h").w('"></button><!-- /ko --><!-- ko ifnot: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --> <h3 class="mas-dets-read-only-nav-new-button-header">').h("i18n",e,{},{key:c},"h").w("</h3><!-- /ko -->")}function r(t,e){return t.f(e.get(["navNewButtonKlazz"],!1),e,"h")}function l(t,e){return t.w("attr: { title: $root.i18n.translate('").f(e.get(["navNewButtonTitleRbKey"],!1),e,"h").w("') },")}function d(t,e){return t.w(",disabled: ").f(e.get(["navNewButtonDisabledExp"],!1),e,"h")}function c(t,e){return t.f(e.get(["navNewButtonLabelRbKey"],!1),e,"h").w("READONLY")}function u(t,e){return t.x(e.get(["navFilterSearchByInputValue"],!1),e,{block:h},{})}function h(t,e){return t.w('<span class="suite-search-filter suite-helper-max-width "><input title="').h("i18n",e,{},{key:"general.filter",filter:"h"},"h").w('" id="').f(e.get(["masDetsIdPrefix"],!1),e,"h").w('-filterNavObjects"class="oj-inputtext-input oj-autocomplete-widget oj-autocomplete-input no-content suite-helper-max-width"placeholder="').h("i18n",e,{},{key:"general.filter",filter:"h"},"h").w("\"autocomplete=\"off\"data-bind=\"jqueryPlugin: { name: 'suiteSearchFilter', config: {eventType: 'keyup', clearEventType: 'keyup' } },value: ").f(e.get(["navFilterSearchByInputValue"],!1),e,"h").w(",valueUpdate: 'keyup'\" /></span>")}function b(t,e){return t.x(e.get(["navSortByOptions"],!1),e,{block:g},{})}function g(t,e){return t.w('<div class="oj-flex suite-helper-max-width bots-helper-padding-top-15').x(e.get(["navHeaderLabelRbKey"],!1),e,{block:f},{}).w('"><div class="oj-flex-item vertical-middle"><label for="').f(e.get(["masDetsIdPrefix"],!1),e,"h").w('-sortByNavObjects">').h("i18n",e,{},{key:"general.sortBy"},"h").w('</label></div><div class="oj-flex-item"><select id="').f(e.get(["masDetsIdPrefix"],!1),e,"h").w("-sortByNavObjects\" data-bind=\"ojComponent: {component: 'ojSelect',options: ").f(e.get(["navSortByOptions"],!1),e,"h").w(",value: ").f(e.get(["navSortBySelectedValue"],!1),e,"h").w(",rootAttributes: { class: 'bots-no-margin'}}\"></select></div></div>")}function f(t,e){return t.w(" suite-helper-padding-bottom-10")}function p(t,e){return t.x(e.get(["navHeaderLabelRbKey"],!1),e,{block:m},{})}function m(t,e){return t.w('<div class="oj-flex oj-sm-justify-content-center suite-helper-max-width mas-dets-navlist-section-header">').h("i18n",e,{},{key:v},"h").w("</div>")}function v(t,e){return t.f(e.get(["navHeaderLabelRbKey"],!1),e,"h")}function _(t,e){return t.w("none")}function y(t,e){return t.w("collapsible")}function w(t,e){return t.w("display: 'all',")}function k(t,e){return t.w("bots-helper-margin-top-10 ")}function T(t,e){return t.w("md")}function E(t,e){return t.f(e.get(["masDetsNavListSize"],!1),e,"h")}function x(t,e){return t.w(",lifecycleHook: ").f(e.get(["masLifecycleHook"],!1),e,"h")}function j(t,e){return t.w('<li class="mas-dets-navpanel-item" data-bind="attr: { id: \'').f(e.get(["masDetsIdPrefix"],!1),e,"h").w("-' + ko.unwrap(").f(e.get(["navItemIdAttribute"],!1),e,"h").w(') }"><div class="mas-dets-container"><div class="mas-dets-item-top-line oj-flex-bar"data-bind="css: { \'mas-dets-icon-present\': ').x(e.get(["navItemIconProvider"],!1),e,{else:A,block:B},{}).w(",'mas-dets-delete-present': ").x(e.get(["navDeleteButtonHandler"],!1),e,{else:S,block:C},{}).w(' }">').b(e.getBlock("masDetsNavItemIcon_part"),e,{block:D},{}).b(e.getBlock("masDetsNavItemTitle_part"),e,{block:L},{}).b(e.getBlock("masDetsNavItemEnd_part"),e,{block:V},{}).w("</div></div></li>")}function A(t,e){return t.w("false")}function B(t,e){return t.f(e.get(["navItemIconProvider"],!1),e,"h").w("($data) !== 'NA'")}function S(t,e){return t.w("false")}function C(t,e){return t.w("$root.isDraftVersion() && $root.permissions().BOTS_WRITE")}function D(t,e){return t.x(e.get(["navItemIconProvider"],!1),e,{block:I},{})}function I(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["navItemIconProvider"],!1),e,"h").w("($data) === 'NA' --><!-- ko with: ").f(e.get(["navItemIconProvider"],!1),e,"h").w("($data) --><!-- ko if: $data.hasOwnProperty('imgSrc') --><span class=\"oj-navigationlist-item-icon left\"><img ").x(e.get(["navItemIconKlazz"],!1),e,{block:R},{}).x(e.get(["navItemIconKlazzProvider"],!1),e,{block:N},{}).w("data-bind=\"attr: { src: imgSrc,title: ($data.hasOwnProperty('title') ? title : undefined) }\"></img></span><!-- /ko --><!-- ko ifnot: $data.hasOwnProperty('imgSrc') --><span class=\"oj-navigationlist-item-icon left\"data-bind=\"inlinesvg: { width: viewBoxWidth, height: viewBoxHeight, project: 'bots', basename: basename,title: ($data.hasOwnProperty('title') ? title : undefined),ariaLabel: ($data.hasOwnProperty('ariaLabel') ? ariaLabel : undefined)").x(e.get(["navItemIconKlazz"],!1),e,{block:O},{}).x(e.get(["navItemIconKlazzProvider"],!1),e,{block:P},{}).w(' }"></span><!-- /ko --><!-- /ko --><!-- /ko -->')}function R(t,e){return t.w('class="').f(e.get(["navItemIconKlazz"],!1),e,"h").w('"')}function N(t,e){return t.w('class="').f(e.get(["navItemIconKlazzProvider"],!1),e,"h").w('($parent)"')}function O(t,e){return t.w(",klazz: '").f(e.get(["navItemIconKlazz"],!1),e,"h").w("'")}function P(t,e){return t.w(",klazz: ").f(e.get(["navItemIconKlazzProvider"],!1),e,"h").w("($parent)")}function L(t,e){return t.w('<div class="oj-navigationlist-item-title oj-flex-bar-middle"><div class="bots-helper-ellipsis mas-dets-title').x(e.get(["navItemTextAllowMarkdown"],!1),e,{block:M},{}).w('"data-bind="').x(e.get(["navItemTextAllowMarkdown"],!1),e,{else:$,block:F},{}).w(": ").f(e.get(["navItemTextAttribute"],!1),e,"h").w(",attr: { title: ").x(e.get(["navItemTooltipAttribute"],!1),e,{else:U,block:q},{}).w(' }"></div></div>')}function M(t,e){return t.w(" bots-helper-slim-markdown")}function $(t,e){return t.w("text")}function F(t,e){return t.w("markdown")}function U(t,e){return t.f(e.get(["navItemTextAttribute"],!1),e,"h")}function q(t,e){return t.f(e.get(["navItemTooltipAttribute"],!1),e,"h")}function V(t,e){return t.x(e.get(["navDeleteButtonHandler"],!1),e,{block:H},{})}function H(t,e){return t.w("<!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --><div class=\"oj-flex-bar-end\"><button tabindex=\"0\"data-bind=\"ojComponent: { component: 'ojButton',chroming: 'half',display: 'icons'").x(e.get(["navDeleteButtonDisabler"],!1),e,{block:z},{}).w(",icons: { start: 'bots-svgsprite-func-icon' }").x(e.get(["navDeleteButtonDisabler"],!1),e,{block:G},{}).w(",rootAttributes: { class: 'mas-dets-delete-button' } },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_delete_16' },click: ").f(e.get(["navDeleteButtonHandler"],!1),e,"h").w('"></button></div><!-- /ko -->')}function z(t,e){return t.w(",disabled: ").f(e.get(["navDeleteButtonDisabler"],!1),e,"h").w("($data)")}function G(t,e){return t.w(",label: ").f(e.get(["navDeleteButtonDisabler"],!1),e,"h").w("($data) ?$root.i18n.translate('general.cannotDelete') : $root.i18n.translate('general.delete')")}function Q(t,e){return t.w(" ").f(e.get(["detsSizeKlazz"],!1),e,"h")}function K(t,e){return t.w('<div><a href="#" data-bind="click: function(evt) {$( \'#').f(e.get(["masDetsIdPrefix"],!1),e,"h").w("-master-details' ).toggleClass('mas-dets-navpanel-hide');}\"><span class=\"mas-dets-navpanel-hidedrawer\">").p("suite/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"func_showdrawer_16"}).w('</span><span class="mas-dets-navpanel-showdrawer">').p("suite/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"func_hidedrawer_16"}).w("</span></a></div>")}return t.register("bots/common/master.details",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,b.__dustBody=!0,g.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,v.__dustBody=!0,_.__dustBody=!0,y.__dustBody=!0,w.__dustBody=!0,k.__dustBody=!0,T.__dustBody=!0,E.__dustBody=!0,x.__dustBody=!0,j.__dustBody=!0,A.__dustBody=!0,B.__dustBody=!0,S.__dustBody=!0,C.__dustBody=!0,D.__dustBody=!0,I.__dustBody=!0,R.__dustBody=!0,N.__dustBody=!0,O.__dustBody=!0,P.__dustBody=!0,L.__dustBody=!0,M.__dustBody=!0,$.__dustBody=!0,F.__dustBody=!0,U.__dustBody=!0,q.__dustBody=!0,V.__dustBody=!0,H.__dustBody=!0,z.__dustBody=!0,G.__dustBody=!0,Q.__dustBody=!0,K.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["id"],!1),e,"h").w('" class="bots-').f(e.get(["type"],!1),e,"h").w('-message-box" hashCode="').f(e.get(["hashCode"],!1),e,"h").w('"><div class="oj-flex-bar"><div class="oj-flex-bar-middle oj-sm-align-items-center"><div class="bots-helper-max-width"><div class="bots-message-box-icon"><img src="/botsui/19.1.5-1907122019/resources/images/stat_').f(e.get(["type"],!1),e,"h").w('_16.png" alt="').f(e.get(["messageTypeImageAlt"],!1),e,"h").w('" title="').f(e.get(["messageTypeImageAlt"],!1),e,"h").w('"></div><div class="bots-message-box-compact">').b(e.getBlock("customBlock"),e,{block:i},{}).w('</div></div></div><div class="oj-flex-bar-end"><button id="close-').f(e.get(["id"],!1),e,"h").w("\" class=\"bots-destyled-button bots-no-margin\" data-bind=\"ojComponent: { component: 'ojButton',display: 'icons',chroming: 'half',icons: { start: 'bots-svgsprite-func-icon right' }").x(e.get(["messageHideHint"],!1),e,{block:n},{}).w("},inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_close_16' }\"></button></div></div></div>")}function i(t,e){return t.f(e.get(["text"],!1),e,"h",["s"])}function n(t,e){return t.w(", label: '").f(e.get(["messageHideHint"],!1),e,"h").w("'")}return t.register("bots/common/message_box",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"botPicker-new-bot",sizeKlazz:"new-bot-dialog",actionHandler:"createBot"})}function i(t,e){return e=e.shiftBlocks(o),t.w('<span data-bind="i18n: { key: createTitleRBKey }"></span>')}function n(t,e){return e=e.shiftBlocks(o),t.w('<div class="oj-form oj-sm-labels-inline"><label for="botPicker-new-bot-displayName">').h("i18n",e,{},{key:"bots.displayName"},"h").w('</label><input id="botPicker-new-bot-displayName" type="text"placeholder="').h("i18n",e,{},{key:"bots.displayNameHint",filter:"h"},"h").w("\"data-bind=\"ojComponent: { component: 'ojInputText',value: displayNameNameAutoFiller.displayName,rawValue: displayNameNameAutoFiller.displayNamePreview,readOnly: nameReadOnly,required: !nameReadOnly(),rootAttributes: { class: 'input bots-helper-max-width' },validators: [ $root.botsValidators.displayNameValidator ],messagesCustom: displayNameCustomMessage,translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('bots.messages.botDisplayNameRequired') } } }\"/><label for=\"botPicker-new-bot-name\">").h("i18n",e,{},{key:"bots.name"},"h").w('</label><input id="botPicker-new-bot-name" type="text"placeholder="').h("i18n",e,{},{key:"bots.nameHint",filter:"h"},"h").w("\"data-bind=\"ojComponent: { component: 'ojInputText',value: displayNameNameAutoFiller.name,rawValue: displayNameNameAutoFiller.namePreview,readOnly: nameReadOnly,required: !nameReadOnly(),rootAttributes: { class: 'input bots-helper-max-width' },validators: [ $root.botsValidators.botsSkillNameValidator,$root.botsValidators.botsOtherNameValidator ],messagesCustom: nameCustomMessage,translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('bots.messages.botNameRequired') } } },hasFocus: displayNameNameAutoFiller.nameHasFocus,enabled: displayNameNameAutoFiller.nameAutoFillTrigger\"/><label for=\"botPicker-new-bot-version\">").h("i18n",e,{},{key:"bots.version"},"h").w('</label><input id="botPicker-new-bot-version" required type="text"placeholder="').h("i18n",e,{},{key:"bots.versionHint",filter:"h"},"h").w("\"data-bind=\"ojComponent: { component: 'ojInputText',value: version,rootAttributes: { class: 'input bots-helper-max-width' },validators: [ $root.botsValidators.versionValidator ],messagesCustom: versionCustomMessage,translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('bots.messages.botVersionRequired') } } }\"/><label for=\"botPicker-new-bot-description\">").h("i18n",e,{},{key:"bots.description"},"h").w('</label><textarea id="botPicker-new-bot-description" rows="3"data-bind="ojComponent: { component: \'ojTextArea\',value: description,validators: [ $root.botsValidators.lengthValidator ],rootAttributes: { class: \'bots-helper-max-width\' } }"></textarea></div>')}function s(t,e){return e=e.shiftBlocks(o),t.w("'").h("i18n",e,{},{key:"general.create",filter:"j"},"h").w("'")}t.register("bots/common/new.bot",e);var o={titleLabel:i,
bodyHtml:n,actionButtonLabel:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"daPicker-new-da",sizeKlazz:"new-bot-dialog",actionHandler:"createBot"})}function i(t,e){return e=e.shiftBlocks(o),t.w('<span data-bind="i18n: { key: createTitleRBKey }"></span>')}function n(t,e){return e=e.shiftBlocks(o),t.w('<div class="oj-form oj-sm-labels-inline"><label for="daPicker-new-da-displayName">').h("i18n",e,{},{key:"da.displayName"},"h").w('</label><input id="daPicker-new-da-displayName" type="text"placeholder="').h("i18n",e,{},{key:"da.displayNameHint",filter:"h"},"h").w("\"data-bind=\"ojComponent: { component: 'ojInputText',value: displayNameNameAutoFiller.displayName,rawValue: displayNameNameAutoFiller.displayNamePreview,readOnly: nameReadOnly,required: !nameReadOnly(),rootAttributes: { class: 'input bots-helper-max-width' },validators: [ $root.botsValidators.displayNameValidator ],messagesCustom: displayNameCustomMessage,translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('da.messages.daDisplayNameRequired') } } }\"/><label for=\"daPicker-new-da-name\">").h("i18n",e,{},{key:"da.name"},"h").w('</label><input id="daPicker-new-da-name" type="text"placeholder="').h("i18n",e,{},{key:"da.nameHint",filter:"h"},"h").w("\"data-bind=\"ojComponent: { component: 'ojInputText',value: displayNameNameAutoFiller.name,rawValue: displayNameNameAutoFiller.namePreview,readOnly: nameReadOnly,required: !nameReadOnly(),rootAttributes: { class: 'input bots-helper-max-width' },validators: [ $root.botsValidators.botsSkillNameValidator,$root.botsValidators.botsOtherNameValidator ],messagesCustom: nameCustomMessage,translations: { required: { messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('da.messages.daNameRequired') } } },hasFocus: displayNameNameAutoFiller.nameHasFocus,enabled: displayNameNameAutoFiller.nameAutoFillTrigger\"/><label for=\"daPicker-new-da-description\">").h("i18n",e,{},{key:"da.description"},"h").w('</label><textarea id="daPicker-new-da-description" rows="3"data-bind="ojComponent: { component: \'ojTextArea\',value: description,validators: [ $root.botsValidators.lengthValidator ],rootAttributes: { class: \'bots-helper-max-width\' } }"></textarea></div>')}function s(t,e){return e=e.shiftBlocks(o),t.w("'").h("i18n",e,{},{key:"general.create",filter:"j"},"h").w("'")}t.register("bots/common/new.da",e);var o={titleLabel:i,bodyHtml:n,actionButtonLabel:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["noContentId"],!1),e,"h").w('" class="').b(e.getBlock("noContentCss"),e,{block:i},{}).w('"><div class="oj-row "><div class="oj-col">').b(e.getBlock("noContentImgSvg"),e,{block:n},{}).w('</div></div><div class="oj-row ">').b(e.getBlock("noContentVideoSvg"),e,{block:o},{}).w('</div><div class="oj-row"><div class="oj-col new-title">').b(e.getBlock("noContentTitle"),e,{},{}).w('</div></div><div class="oj-row"><div class="oj-col oj-sm-12 new-description">').b(e.getBlock("noContentDesc"),e,{},{}).w("</div></div>").b(e.getBlock("noContentLinkSection"),e,{block:a},{}).b(e.getBlock("noContentButtonSection"),e,{block:r},{}).w("</div>")}function i(t,e){return t.w(" ").f(e.get(["noContentAddCss"],!1),e,"h").w(" bots-container bots-panel-container bots-no-margin")}function n(t,e){return t.b(e.getBlock("noContentImgSection"),e,{block:s},{})}function s(t,e){return t.w('<image alt="" src="').b(e.getBlock("noContentImgSrc"),e,{},{}).w('"/>')}function o(t,e){return t.b(e.getBlock("noContentVideoSvgSection"),e,{},{})}function a(t,e){return t.w('<div class="oj-row"><div class="oj-col new-description-link">').b(e.getBlock("noContentLink"),e,{},{}).w("</div></div>")}function r(t,e){return t.w('<div class="oj-row"><div class="oj-col">').b(e.getBlock("noContentButton"),e,{},{}).w("</div></div>")}return t.register("bots/common/no_content",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(y),t.x(e.get(["readOnly"],!1),e,{else:i,block:o},{})}function i(t,e){return e=e.shiftBlocks(y),t.x(e.get(["disabled"],!1),e,{else:n,block:s},{})}function n(t,e){return e=e.shiftBlocks(y),t.b(e.getBlock("useOjSwitch"),e,{},{})}function s(t,e){return e=e.shiftBlocks(y),t.w("<!-- ko if: ").f(e.get(["disabled"],!1),e,"h").w(" -->").b(e.getBlock("useReadOnlyOjInputText"),e,{},{}).w("<!-- /ko --><!-- ko ifnot: ").f(e.get(["disabled"],!1),e,"h").w(" -->").b(e.getBlock("useOjSwitch"),e,{},{}).w("<!-- /ko -->")}function o(t,e){return e=e.shiftBlocks(y),t.w("<!-- ko if: ").f(e.get(["readOnly"],!1),e,"h").w(" ").x(e.get(["disabled"],!1),e,{block:a},{}).w(" -->").b(e.getBlock("useReadOnlyOjInputText"),e,{},{}).w("<!-- /ko --><!-- ko ifnot: ").f(e.get(["readOnly"],!1),e,"h").w(" ").x(e.get(["disabled"],!1),e,{block:r},{}).w(" -->").b(e.getBlock("useOjSwitch"),e,{},{}).w("<!-- /ko -->")}function a(t,e){return e=e.shiftBlocks(y),t.w("|| ").f(e.get(["disabled"],!1),e,"h")}function r(t,e){return e=e.shiftBlocks(y),t.w("|| ").f(e.get(["disabled"],!1),e,"h")}function l(t,e){return e=e.shiftBlocks(y),t.w('<input data-bind="attr: { id: ').f(e.get(["id"],!1),e,"h").w(" },ojComponent: { component: 'ojSwitch',value: ").x(e.get(["negated"],!1),e,{else:d,block:c},{}).w(" ").x(e.get(["optionChange"],!1),e,{block:u},{}).w(' }"').x(e.get(["ariaLabelKey"],!1),e,{block:h},{}).w(" />")}function d(t,e){return e=e.shiftBlocks(y),t.f(e.get(["value"],!1),e,"h")}function c(t,e){return e=e.shiftBlocks(y),t.w("ko.computed({ read: function() { return !ko.unwrap(").f(e.get(["value"],!1),e,"h").w("); },write: function(val) { ").f(e.get(["value"],!1),e,"h").w("(!val); } })")}function u(t,e){return e=e.shiftBlocks(y),t.w(",optionChange: ").f(e.get(["optionChange"],!1),e,"h").w(" ")}function h(t,e){return e=e.shiftBlocks(y),t.w("aria-label='").h("i18n",e,{},{key:b,filter:"j"},"h").w("'")}function b(t,e){return e=e.shiftBlocks(y),t.f(e.get(["ariaLabelKey"],!1),e,"h")}function g(t,e){return e=e.shiftBlocks(y),t.w('<input class="text-uppercase"data-bind="attr: { id: ').f(e.get(["id"],!1),e,"h").w(" },ojComponent: { component: 'ojInputText',readOnly: true,value: ").x(e.get(["negated"],!1),e,{block:f},{}).w(" ko.unwrap(").f(e.get(["value"],!1),e,"h").w(")").x(e.get(["onOffRoot"],!1),e,{else:p,block:m},{}).w(",rootAttributes: { class: 'onofftoggle-readonly' } }\" />")}function f(t,e){return e=e.shiftBlocks(y),t.w("!")}function p(t,e){return e=e.shiftBlocks(y),t.w(" ? '").h("i18n",e,{},{key:"general.on",filter:"j"},"h").w("'  : '").h("i18n",e,{},{key:"general.off",filter:"j"},"h").w("' ")}function m(t,e){return e=e.shiftBlocks(y),t.w(" ? '").h("i18n",e,{},{key:v,filter:"j"},"h").w("' : '").h("i18n",e,{},{key:_,filter:"j"},"h").w("'")}function v(t,e){return e=e.shiftBlocks(y),t.f(e.get(["onOffRoot"],!1),e,"h").w(".ON")}function _(t,e){return e=e.shiftBlocks(y),t.f(e.get(["onOffRoot"],!1),e,"h").w(".OFF")}t.register("bots/common/onofftoggle",e);var y={useOjSwitch:l,useReadOnlyOjInputText:g};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,b.__dustBody=!0,g.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,v.__dustBody=!0,_.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["id"],!1),e,"h").w('" class="oj-row bots-').f(e.get(["type"],!1),e,"h").w('-popdown-message-box"><div class="oj-sm-11 oj-col bots-no-padding"><div class="bots-message-box-icon"><img src="/botsui/19.1.5-1907122019/resources/images/stat_').f(e.get(["type"],!1),e,"h").w('_16.png" alt="').f(e.get(["messageTypeImageAlt"],!1),e,"h").w('" title="').f(e.get(["messageTypeImageAlt"],!1),e,"h").w('"></div><div>').f(e.get(["text"],!1),e,"h",["s"]).w('</div></div><div class="oj-col oj-sm-1 bots-no-padding bots-icon-button-16 right">    <button id="close-').f(e.get(["id"],!1),e,"h").w("\" class=\"bots-destyled-button bots-no-margin\" data-bind=\"ojComponent: { component: 'ojButton',display: 'icons',chroming: 'half',icons: { start: 'bots-svgsprite-func-icon right' }").x(e.get(["messageHideHint"],!1),e,{block:i},{}).w("},inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_close_16' }\"></button></div></div>")}function i(t,e){return t.w(", label: '").f(e.get(["messageHideHint"],!1),e,"h").w("'")}return t.register("bots/common/popdown_message",e),e.__dustBody=!0,i.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="popup-picker oj-flex oj-sm-flex-items-initial oj-sm-align-items-center">').x(e.get(["externalLabel"],!1),e,{block:i},{}).w('<div class="oj-flex-item ').f(e.get(["selectedTextClass"],!1),e,"h").w('" id="').f(e.get(["popupId"],!1),e,"h").w('-selected-text" data-bind="click: function() {$(\'#').f(e.get(["popupId"],!1),e,"h").w("').ojPopup('open', '#").f(e.get(["popupId"],!1),e,"h").w("-btn');$('#").f(e.get(["popupId"],!1),e,"h").w("-list').ojNavigationList('refresh');}\"><span data-bind=\"css: {'font-style-italic': !ko.unwrap(").f(e.get(["selectedDomId"],!1),e,"h").w(")},text: ko.unwrap(").f(e.get(["selectedDomId"],!1),e,"h").w(") ? ko.unwrap(").f(e.get(["selectedText"],!1),e,"h").w(") : $root.i18n.translate('").f(e.get(["placeholderText"],!1),e,"h").w('\')"></span></div><div class="oj-flex-item"><button tabIndex="0" id="').f(e.get(["popupId"],!1),e,"h").w('-btn" aria-label="').h("i18n",e,{},{key:s,filter:"h"},"h").w('"class="oj-button-sm bots-helper-margin-left-4 bots-helper-margin-bottom-0" data-bind="ojComponent: {component: \'ojButton\',label: $root.i18n.translate(\'').f(e.get(["buttonLabel"],!1),e,"h").w("'),display: 'icons',chroming: 'half',icons: { start: ").x(e.get(["buttonIcon"],!1),e,{else:o,block:a},{}).w("}},").x(e.get(["buttonIcon"],!1),e,{block:r},{}).w("click: function() {$('#").f(e.get(["popupId"],!1),e,"h").w("').ojPopup('open', '#").f(e.get(["popupId"],!1),e,"h").w("-btn');$('#").f(e.get(["popupId"],!1),e,"h").w('-list\').ojNavigationList(\'refresh\');}"></button></div></div><div class="bots-helper-hidden" id="').f(e.get(["popupId"],!1),e,"h").w("\" data-bind=\"ojComponent: {component: 'ojPopup','position': {'at': { horizontal: 'center', vertical: 'bottom' },'my': { horizontal: 'center', vertical: 'top' },'collision': 'fit'},'tail': 'simple',rootAttributes: {class: '").f(e.get(["popupId"],!1),e,"h").w("'},").x(e.get(["pickerOpenHandler"],!1),e,{block:l},{}).w('}"><!-- ko if: ').f(e.get(["newItemButtonAction"],!1),e,"h").w('  --><div class="oj-row"><button aria-label="').h("i18n",e,{},{key:d,filter:"h"},"h").w("\" data-bind=\"ojComponent: {component: 'ojButton',icons: { start: 'bots-svgsprite-cta-icon' },label: $root.i18n.translate('").f(e.get(["newItemButtonLabel"],!1),e,"h").w("'),},click: ").f(e.get(["newItemButtonAction"],!1),e,"h").w(",inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_plus_16' }\"class=\"green-button bots-helper-max-width\" /></div><!-- /ko --><!-- ko if: ").f(e.get(["isSearchBy"],!1),e,"h").w(' --><div class="oj-row application-search-row"><span class="suite-search-filter bots-helper-max-width right"><input title="').h("i18n",e,{},{key:"general.filter",filter:"h"},"h").w('"class="oj-inputtext-input oj-autocomplete-widget oj-autocomplete-input no-content bots-helper-max-width"placeholder="').h("i18n",e,{},{key:"general.filter",filter:"h"},"h").w('"autocomplete="off"data-bind="jqueryPlugin: {name: \'suiteSearchFilter\'}, value: ').f(e.get(["searchBy"],!1),e,"h").w(", valueUpdate: 'afterkeydown'\" /></span></div><!--/ko--><div id=\"").f(e.get(["popupId"],!1),e,"h").w('-list" aria-label="').h("i18n",e,{},{key:c,filter:"h"},"h").w("\" data-bind=\"ojComponent: {component: 'ojNavigationList',drillMode: 'none',optionChange: ").f(e.get(["itemSelected"],!1),e,"h").w(",item:{selectable : true},rootAttributes: {class: 'popup-picker-popup ").f(e.get(["popupId"],!1),e,"h").w('-list\'}}"><ul class="bots-transition"data-bind="foreach: ').f(e.get(["data"],!1),e,"h").w(",css: {'bots-transition-fade-0': $root.isAction()}\">").x(e.get(["itemTemplate"],!1),e,{else:u,block:b},{}).w("</ul></div></div>")}function i(t,e){return t.w('<label for="').f(e.get(["popupId"],!1),e,"h").w('-selected-text" class="oj-label suite-helper-margin-right-7">').h("i18n",e,{},{key:n},"h").w("</label>")}function n(t,e){return t.f(e.get(["externalLabel"],!1),e,"h")}function s(t,e){return t.f(e.get(["buttonLabel"],!1),e,"h")}function o(t,e){return t.w("'oj-component-icon oj-select-open-icon bots-no-padding'")}function a(t,e){return t.w("'bots-svgsprite-func-icon'")}function r(t,e){return t.w("inlinesvg: { width: 16, height: 16, project: 'bots', basename: '").f(e.get(["buttonIcon"],!1),e,"h").w("' },")}function l(t,e){return t.w("beforeOpen: ").f(e.get(["pickerOpenHandler"],!1),e,"h")}function d(t,e){return t.f(e.get(["newItemButtonLabel"],!1),e,"h")}function c(t,e){return t.f(e.get(["listLabel"],!1),e,"h")}function u(t,e){return t.p("bots/common/popup.picker.item",e,e,{templateId:h})}function h(t,e){return t.f(e.get(["popupId"],!1),e,"h")}function b(t,e){return t.p(g,e,e,{templateId:f})}function g(t,e){return t.w("bots/").f(e.get(["itemTemplate"],!1),e,"h")}function f(t,e){return t.f(e.get(["popupId"],!1),e,"h")}return t.register("bots/common/popup.picker",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,b.__dustBody=!0,g.__dustBody=!0,f.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<li class="picker-item" data-bind="attr: { id: \'').f(e.get(["templateId"],!1),e,"h").w('-\' + $data[\'id\'] }"><a class="picker-link" href="#"><span class="picker-name" data-bind="text: $data.text || $data.name || $data.id"></span><!-- ko if: $data.description !== undefined --><p class="picker-desc bots-helper-ellipsis" data-bind="text: description || \'&nbsp;\'"></p><!-- /ko --></a></li>')}return t.register("bots/common/popup.picker.item",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.nx(e.get(["suppressJetPopup"],!1),e,{block:i},{}).w('<div class="oj-row bots-no-margin">').nx(e.get(["hideCloseIcon"],!1),e,{block:b},{}).w('<div class="oj-col oj-sm-12 bots-helper-padding-top-10 bots-helper-padding-right-20 bots-helper-padding-bottom-10 bots-helper-padding-left-20">').b(e.getBlock("popupText"),e,{},{}).w("</div></div>").x(e.get(["showOKCancel"],!1),e,{block:p},{}).nx(e.get(["suppressJetPopup"],!1),e,{block:E},{})}function i(t,e){return t.w('<div id="').f(e.get(["popupId"],!1),e,"h").w('" class="bots-helper-hidden ').f(e.get(["sizeClass"],!1),e,"h").w("\"data-bind=\"ojComponent: { component: 'ojPopup',autoDismiss: ").x(e.get(["autoDismiss"],!1),e,{else:n,block:a},{}).w(", ").x(e.get(["onClosedCallback"],!1),e,{block:r},{}).w("initialFocus: ").x(e.get(["initialFocusOption"],!1),e,{else:l,block:d},{}).w(",").x(e.get(["positionOption"],!1),e,{block:c},{}).w("tail: ").x(e.get(["tailOption"],!1),e,{else:u,block:h},{}).w(' }">')}function n(t,e){return t.x(e.get(["hideCloseIcon"],!1),e,{else:s,block:o},{})}function s(t,e){return t.w("'none'")}function o(t,e){return t.w("'focusLoss'")}function a(t,e){return t.w("'").f(e.get(["autoDismiss"],!1),e,"h").w("'")}function r(t,e){return t.w("close: ").f(e.get(["onClosedCallback"],!1),e,"h").w(",")}function l(t,e){return t.w("'firstFocusable'")}function d(t,e){return t.w("'").f(e.get(["initialFocusOption"],!1),e,"h").w("'")}function c(t,e){return t.w("position: { ").f(e.get(["positionOption"],!1),e,"h").w(" },")}function u(t,e){return t.w("'simple'")}function h(t,e){return t.w("'").f(e.get(["tailOption"],!1),e,"h").w("'")}function b(t,e){return t.w('<div class="bots-icon-button-16 bots-icon-button-16-focuser popupwithtail-shift-X-right"><button id="').f(e.get(["popupId"],!1),e,"h").w("-close-button\"class=\"bots-destyled-button bots-no-margin\"data-bind=\"ojComponent: { component: 'ojButton',display: 'icons',icons: { start: 'bots-svgsprite-func-icon' } },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_close_16' } ").x(e.get(["closeTip"],!1),e,{block:g},{}).w(" ").x(e.get(["popupCloseAction"],!1),e,{block:f},{}).w(' "></button></div>')}function g(t,e){return t.w(" ,attr: { title: $root.i18n.translate('").f(e.get(["closeTip"],!1),e,"h").w("') }")}function f(t,e){return t.w(" ,click: ").f(e.get(["popupCloseAction"],!1),e,"h").w(".bind($data, '").f(e.get(["popupId"],!1),e,"h").w("')")}function p(t,e){return t.w('<div class="oj-row bots-no-padding bots-helper-fr bots-helper-tr ').x(e.get(["footerTopMargin"],!1),e,{block:m},{}).w(' bots-helper-margin-bottom-15">').x(e.get(["permittedOK"],!1),e,{block:v},{}).w('<button id="').f(e.get(["popupId"],!1),e,"h").w("-OK-button\"class=\"bots-destyled-button bots-no-margin\"data-bind=\"ojComponent: { component: 'ojButton',display: 'icons',icons: { start: 'bots-svgsprite-func-icon' } },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_checkmark_16' } ").x(e.get(["okTip"],!1),e,{block:_},{}).w(" ").x(e.get(["okAction"],!1),e,{block:y},{}).w(' "></button>').x(e.get(["permittedOK"],!1),e,{block:w},{}).w('<button id="').f(e.get(["popupId"],!1),e,"h").w("-cancel-button\"class=\"bots-destyled-button bots-no-margin\"data-bind=\"ojComponent: { component: 'ojButton',display: 'icons',icons: { start: 'bots-svgsprite-func-icon' } },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_close_16' } ").x(e.get(["cancelTip"],!1),e,{block:k},{}).w(" ").x(e.get(["cancelAction"],!1),e,{block:T},{}).w(' "></button></div>')}function m(t,e){return t.f(e.get(["footerTopMargin"],!1),e,"h")}function v(t,e){return t.w("<!-- ko if: ").f(e.get(["permittedOK"],!1),e,"h").w(" -->")}function _(t,e){return t.w(" ,attr: { title: $root.i18n.translate('").f(e.get(["okTip"],!1),e,"h").w("') }")}function y(t,e){return t.w(" ,click: ").f(e.get(["okAction"],!1),e,"h").w(".bind($data, '").f(e.get(["popupId"],!1),e,"h").w("')")}function w(t,e){return t.w("<!-- /ko -->")}function k(t,e){return t.w(" ,attr: { title: $root.i18n.translate('").f(e.get(["cancelTip"],!1),e,"h").w("') }")}function T(t,e){return t.w(" ,click: ").f(e.get(["cancelAction"],!1),e,"h").w(".bind($data, '").f(e.get(["popupId"],!1),e,"h").w("')")}function E(t,e){return t.w("</div>")}return t.register("bots/common/popupwithtail",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,b.__dustBody=!0,g.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,v.__dustBody=!0,_.__dustBody=!0,y.__dustBody=!0,w.__dustBody=!0,k.__dustBody=!0,T.__dustBody=!0,E.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"bots-publish-dialog",sizeKlazz:"bots-publish-dialog",actionHandler:"publishBot"})}function i(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"bots.publishBotDialog.titleLabel"},"h")}function n(t,e){return e=e.shiftBlocks(o),t.w('<span data-bind="text: $root.i18n.translate(\'bots.publishBotDialog.confirmQuestion\', botDisplayName(), botVersion())"></span><!-- ko if: botLoggingOnWarning() --><div class="bots-helper-margin-top-10" data-bind="markdown: botLoggingOnWarning"></div><!-- /ko -->')}function s(t,e){return e=e.shiftBlocks(o),t.w("'").h("i18n",e,{},{key:"bots.publishBotDialog.publishLabel",filter:"j"},"h").w("'")}t.register("bots/common/publish.bot.dialog",e);var o={titleLabel:i,bodyHtml:n,actionButtonLabel:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(d),t.w('<div class="bots-helper-max-width bots-install-store-skill-details"><!-- ko if: ko.unwrap(').f(e.get(["skillDisplayName"],!1),e,"h",["s"]).w(') --><div class="oj-flex oj-sm-flex-wrap-nowrap"><div class="oj-flex-item oj-sm-align-self-center oj-sm-flex-initial skill-header bots-helper-zero-min-width"><h2 class="bots-helper-padding-left-0"data-bind="ellipsisTip: ').x(e.get(["skillDisplayNameLastTokenOf"],!1),e,{else:i,block:n},{}).w('"></h2></div>').x(e.get(["skillVersion"],!1),e,{block:s},{}).w('</div><div class="oj-flex-bar bots-helper-max-width bots-helper-margin-bottom-10"><div class="oj-flex-bar-start"><!-- ko if: ko.unwrap(').f(e.get(["skillCategory"],!1),e,"h",["s"]).w(') --><p class="bots-helper-max-width vertical-middle skill-category"data-bind="text: ').f(e.get(["skillCategory"],!1),e,"h").w('"></p><!-- /ko --><!-- ko ifnot: ko.unwrap(').f(e.get(["skillCategory"],!1),e,"h").w(') --><p class="bots-helper-max-width vertical-middle skill-category bots-helper-placeholder">').h("i18n",e,{},{key:"skillStorePitch.noCategoryPlaceholder"},"h").w('</p><!-- /ko --></div><div class="oj-flex-bar-end">').b(e.getBlock("actionButton"),e,{},{}).w('</div></div><div class="oj-panel"><!-- ko if: ko.unwrap(').f(e.get(["skillSummary"],!1),e,"h",["s"]).w(') --><h3 class="oj-header-border" data-bind="text: ').f(e.get(["skillSummary"],!1),e,"h").w('"></h3><!-- /ko --><!-- ko ifnot: ko.unwrap(').f(e.get(["skillSummary"],!1),e,"h",["s"]).w(') --><h3 class="oj-header-border bots-helper-placeholder">').h("i18n",e,{},{key:"skillStorePitch.noSummaryPlaceholder"},"h").w("</h3><!-- /ko --><!-- ko if: ko.unwrap(").f(e.get(["skillDescription"],!1),e,"h",["s"]).w(') --><p class="bots-helper-pre-line"data-bind="text: ').f(e.get(["skillDescription"],!1),e,"h").w('"></p><!-- /ko --><!-- ko ifnot: ko.unwrap(').f(e.get(["skillDescription"],!1),e,"h",["s"]).w(') --><p class="bots-helper-pre-line bots-helper-placeholder">').h("i18n",e,{},{key:"skillStorePitch.noDescriptionPlaceholder"},"h").w("</p><!-- /ko --></div><!-- /ko --><!-- ko ifnot: ko.unwrap(").f(e.get(["skillDisplayName"],!1),e,"h",["s"]).w(') --><div class="bots-helper-max-width">').p("bots/common/no_content",e,e,{noContentId:"install-store-skill-noskill"}).w("</div><!-- /ko --></div>")}function i(t,e){return e=e.shiftBlocks(d),t.f(e.get(["skillDisplayName"],!1),e,"h")}function n(t,e){return e=e.shiftBlocks(d),t.w("{ value: ").f(e.get(["skillDisplayName"],!1),e,"h").w(", lastTokenOf: ").f(e.get(["skillDisplayNameLastTokenOf"],!1),e,"h").w(" }")}function s(t,e){return e=e.shiftBlocks(d),t.w("<!-- ko if: ko.unwrap(").f(e.get(["skillVersion"],!1),e,"h",["s"]).w(') --><div class="oj-flex-item oj-sm-align-self-center oj-sm-flex-initial bots-helper-zero-min-width"><div class="ap-skill-store-pitch-version"data-bind="ellipsisTip: ').x(e.get(["skillVersionLastTokenOf"],!1),e,{else:o,block:a},{}).w('"></div></div><!-- /ko -->')}function o(t,e){return e=e.shiftBlocks(d),t.f(e.get(["skillVersion"],!1),e,"h")}function a(t,e){return e=e.shiftBlocks(d),t.w("{ value: ").f(e.get(["skillVersion"],!1),e,"h").w(", lastTokenOf: ").f(e.get(["skillVersionLastTokenOf"],!1),e,"h").w(" }")}function r(t,e){return e=e.shiftBlocks(d),t.p("bots/common/inlinesvg",e,e,{width:"96",height:"96",project:"bots",basename:"skill-store_96",klazz:"suite-helper-192x192"})}function l(t,e){return e=e.shiftBlocks(d),t.h("i18n",e,{},{key:"skillStorePitch.noskill.title"},"h")}t.register("bots/common/skill.store.pitch",e);var d={noContentImgSection:r,noContentTitle:l};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w("<!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case1"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body1"),e,{},{}).w("<!-- /ko -->").x(e.get(["case2"],!1),e,{block:i},{})}function i(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case1"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case2"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body2"),e,{},{}).w("<!-- /ko -->").x(e.get(["case3"],!1),e,{block:n},{}).w("<!-- /ko -->")}function n(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case2"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case3"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body3"),e,{},{}).w("<!-- /ko -->").x(e.get(["case4"],!1),e,{block:s},{}).w("<!-- /ko -->")}function s(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case3"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case4"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body4"),e,{},{}).w("<!-- /ko -->").x(e.get(["case5"],!1),e,{block:o},{}).w("<!-- /ko -->")}function o(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case4"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case5"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body5"),e,{},{}).w("<!-- /ko -->").x(e.get(["case6"],!1),e,{block:a},{}).w("<!-- /ko -->")}function a(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case5"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case6"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body6"),e,{},{}).w("<!-- /ko -->").x(e.get(["case7"],!1),e,{block:r},{}).w("<!-- /ko -->")}function r(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case6"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case7"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body7"),e,{},{}).w("<!-- /ko -->").x(e.get(["case8"],!1),e,{block:l},{}).w("<!-- /ko -->")}function l(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case7"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case8"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body8"),e,{},{}).w("<!-- /ko -->").x(e.get(["case9"],!1),e,{block:d},{}).w("<!-- /ko -->")}function d(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case8"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case9"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body9"),e,{},{}).w("<!-- /ko -->").x(e.get(["case10"],!1),e,{block:c},{}).w("<!-- /ko -->")}function c(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case9"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case10"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body10"),e,{},{}).w("<!-- /ko -->").x(e.get(["case11"],!1),e,{block:u},{}).w("<!-- /ko -->")}function u(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case10"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case11"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body11"),e,{},{}).w("<!-- /ko -->").x(e.get(["case12"],!1),e,{block:h},{}).w("<!-- /ko -->")}function h(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case11"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case12"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body12"),e,{},{}).w("<!-- /ko -->").x(e.get(["case13"],!1),e,{block:b},{}).w("<!-- /ko -->")}function b(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case12"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case13"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body13"),e,{},{}).w("<!-- /ko -->").x(e.get(["case14"],!1),e,{block:g},{}).w("<!-- /ko -->")}function g(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case13"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case14"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body14"),e,{},{}).w("<!-- /ko -->").x(e.get(["case15"],!1),e,{block:f},{}).w("<!-- /ko -->")}function f(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case14"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case15"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body15"),e,{},{}).w("<!-- /ko -->").x(e.get(["case16"],!1),e,{block:p},{}).w("<!-- /ko -->")}function p(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case15"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case16"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body16"),e,{},{}).w("<!-- /ko -->").x(e.get(["case17"],!1),e,{block:m},{}).w("<!-- /ko -->")}function m(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case16"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case17"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body17"),e,{},{}).w("<!-- /ko -->").x(e.get(["case18"],!1),e,{block:v},{}).w("<!-- /ko -->")}function v(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case17"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case18"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body18"),e,{},{}).w("<!-- /ko -->").x(e.get(["case19"],!1),e,{block:_},{}).w("<!-- /ko -->")}function _(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case18"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case19"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body19"),e,{},{}).w("<!-- /ko -->").x(e.get(["case20"],!1),e,{block:y},{}).w("<!-- /ko -->")}function y(t,e){return t.w("<!-- ko ifnot: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case19"],!1),e,"h",["s"]).w(" --><!-- ko if: ").f(e.get(["cond"],!1),e,"h").w(" === ").f(e.get(["case20"],!1),e,"h",["s"]).w(" -->").b(e.getBlock("body20"),e,{},{}).w("<!-- /ko --><!-- /ko -->")}return t.register("bots/common/switch.case",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,b.__dustBody=!0,g.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,m.__dustBody=!0,v.__dustBody=!0,_.__dustBody=!0,y.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["tileButtonId"],!1),e,"h").w('-btn" tabIndex="0" aria-label="').h("i18n",e,{},{key:i,filter:"h"},"h").w('"class="oj-panel tile oj-flex-item oj-sm-flex-initial tile-1x1 ').f(e.get(["tileButtonStyle"],!1),e,"h").w('" data-bind="click: ').f(e.get(["tileButtonClick"],!1),e,"h").w(",enterKey: ").f(e.get(["tileButtonClick"],!1),e,"h").w('"><div class="btn-row"><div class="bots-helper-128x128 ').f(e.get(["tileButtonCircleStyle"],!1),e,"h").w('">').p("bots/common/inlinesvg",e,e,{width:"48",height:"48",project:"bots",basename:n,klazz:"bots-helper-48x48 bots-svgsprite-cta-icon bots-margin-zero"}).w('</div></div><div class="title-row"><span class="title">').h("i18n",e,{},{key:s},"h").w("</span></div></div>")}function i(t,e){return t.f(e.get(["tileButtonLabel"],!1),e,"h")}function n(t,e){return t.f(e.get(["tileButtonIcon"],!1),e,"h")}function s(t,e){return t.f(e.get(["tileButtonLabel"],!1),e,"h")}return t.register("bots/common/tile.button",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="showTimeoutDialog"data-bind="attr: {title: i18n.translate(\'timer.timeout.title\')}, ojComponent: {component: \'ojDialog\', resizable: false, draggable: false, initialVisibility: \'hide\', rootAttributes: {style: \'width: 500px;\'}, cancelBehavior: \'none\'}"><div class="warning" data-bind="visible: currentView() === \'warning\'"><span class="oj-col oj-sm-12 padder" data-bind="text: i18n.translate(\'timer.timeout.msg\')"></span><div class="ticker"><span style="font-weight: bold">').h("i18n",e,{},{
key:"timer.timeout.ticker",args:"<span class='timer-countdown' data-bind='text: finalCountdown()'></span>"},"h").w("</span></div><span>").h("i18n",e,{},{key:"timer.timeout.continue"},"h").w('</span></div><div class="logout" data-bind="visible: currentView() === \'logout\'"><span style="font-weight: bold" data-bind="text: i18n.translate(\'timer.logout.msg\')"></span><span class="detail-message" data-bind="text: i18n.translate(\'timer.logout.detail\')"></span></div><div class="oj-dialog-footer"><button class="oj-button oj-component oj-enabled oj-button-text-only oj-default button-right-padder" data-bind="ojComponent: { component:\'ojButton\', label: i18n.translate(\'general.no\')}, click: cancel, visible: currentView() === \'warning\'"></button><button id="reset-timer-button" class="oj-button oj-component oj-enabled oj-button-text-only oj-default right" data-bind="ojComponent: { component:\'ojButton\', label: i18n.translate(\'general.yes\')}, click: reset,visible: currentView() === \'warning\'"></button><button id="logout-timer-button" class="oj-button oj-component oj-enabled oj-button-text-only oj-default right" data-bind="ojComponent: { component:\'ojButton\', label: i18n.translate(\'general.ok\')}, click: logout,visible: currentView() === \'logout\'"></button></div></div>')}return t.register("bots/common/timer",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w("<button id=\"bots-take-ua-tour\" class=\"bots-top-buttons \"data-bind=\"ojComponent: { component: 'ojButton',display: 'all',label: $root.i18n.translate('assistance.takeTour'),rootAttributes: { class: 'secondary-button suite-helper-margin-bottom-0' } },click: navigateToUATour\"></button>")}return t.register("bots/common/tour.bot",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"bot-train-dialog",sizeKlazz:"train-bot-dialog",animationAtOpen:"expand",positionOptions:"{'my': 'right top', 'at': 'right bottom', 'of': '#bots-train-button'}",closeHandler:"closeHandler",actionHandler:"submitTrainingRequests"})}function i(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"bots.train.label"},"h")}function n(t,e){return e=e.shiftBlocks(o),t.w("<div>").p("bots/common/train.bot.intent.part",e,e,{}).w("<!-- ko ifnot: $root.isODA() -->").p("bots/common/train.bot.qna.part",e,e,{}).w("<!-- /ko --></div>")}function s(t,e){return e=e.shiftBlocks(o),t.w("'").h("i18n",e,{},{key:"general.submit",filter:"j"},"h").w("'")}t.register("bots/common/train.bot.dialog",e);var o={titleLabel:i,bodyHtml:n,actionButtonLabel:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w("<div class=\"oj-flex\"><div class=\"oj-flex-item bots-helper-padding-right-0\"><button id=\"bots-train-button\" class=\"bots-top-buttons\"data-bind=\"css: { 'bots-icon-state-1': !($root.isTraining() || $root.needsTraining()),'bots-icon-state-2 bots-alert': (!$root.isTraining() && $root.needsTraining()),'bots-icon-state-3': $root.isTraining },attr: { title: ko.computed(function() {var rbkey = $root.isTraining() ? 'bots.train.tip.inProgress' :($root.needsTraining() ? 'bots.train.tip.needed' : 'bots.train.tip.notRequired');return $root.i18n.translate(rbkey) + ' ' + ($root.currentTrainingModel().length? $root.i18n.translate('bots.train.tip.currentModelIs', $root.i18n.translate('settings.general.trainingModel.' + $root.currentTrainingModel()[0] + '.name')) : '');}) },ojComponent: { component: 'ojButton',display: 'all',icons: { start: 'bots-svgsprite-3-state bots-helper-height-16 bots-helper-line-height-16 bots-helper-margin-top-0 bots-helper-margin-right-4 bots-helper-margin-bottom-0 bots-helper-margin-left-8' },label: $root.i18n.translate('bots.train.label'),rootAttributes: { class: 'halfchrome-tertiary-alert-button bots-helper-margin-bottom-0' } },inlinesvg: [ { width: 16, height: 16, project: 'bots', basename: 'func_trained_16' },{ width: 16, height: 16, project: 'bots', basename: 'func_train_16' },{ width: 16, height: 16, project: 'bots', basename: 'animated_ring' } ],click: openTrainBotPopup\"></button></div></div>")}return t.register("bots/common/train.bot",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="oj-flex oj-sm-justify-content-space-between oj-sm-flex-items-initial oj-sm-align-items-center suite-helper-margin-bottom-10"><h3 class="oj-flex-item suite-no-margin">').h("i18n",e,{},{key:"bots.train.intentTraining"},"h").w('</h3><label class="oj-flex-item">').h("i18n",e,{},{key:"bots.train.active"},"h").w('</label></div><div class="oj-flex"><ul id="train-bot-intent-list"data-bind="ojComponent: { component: \'ojListView\',selection: currentTrainingModel,data: trainingModelsDS,selectionMode: \'single\',optionChange: onTMOptionChange,item: { template: \'train-bot-intent-model-template\' },rootAttributes: { class: \'ap-asset-picker-list suite-helper-max-width\' } }"></ul><script type="text/html" id="train-bot-intent-model-template"><li class="suite-no-margin suite-no-padding oj-flex train-bot-list-item"><div class="oj-flex suite-helper-padding-left-5 suite-helper-padding-right-10"><div class="oj-flex-item train-model-checkbox-outer oj-sm-flex-initial suite-helper-padding-top-15"><!-- ko if: $root.selectedModel() === id --><div data-bind="ojComponent: { component: \'ojCheckboxset\', readOnly: !$root.permissions().BOTS_WRITE,disabled: !requiresTraining,value: doTrainFlag,rootAttributes: { class: \'train-model-checkbox\' } }" ><div class="oj-choice-item"><input data-bind="attr: { id: \'checkbox\' + id, value: id }"class="oj-flex-item" type="checkbox" class="oj-checkbox-nocomp" /></div></div><!-- /ko --></div><div class="oj-radioset-input-end suite-no-margin suite-no-padding oj-flex-item"data-bind="ojComponent: { component: \'ojRadioset\',value: $root.selectedModel },attr: { id: \'training_radioset_\' + id }" ><span class="oj-choice-item oj-flex oj-sm-justify-content-space-between oj-sm-flex-items-initial"><label data-bind="attr: { for: \'training_radioitem_\' + id }" ><div class="oj-flex"><span class="oj-navigationlist-item-icon suite-helper-padding-right-10 suite-helper-padding-top-3 left oj-flex-item oj-sm-flex-initial"data-bind="inlinesvg: { width: viewBoxWidth,height: viewBoxHeight,project: \'bots\', basename: icon,klazz: iconKlazz }"></span><div class="oj-flex-item"><div class="ap-asset-name" data-bind="ellipsisTip: name" /><div class="ap-asset-desc" data-bind="ellipsisTip: description" /></div></div></label><input data-bind="attr: { id: \'training_radioitem_\' + id, value: id }" type="radio" /></span></div></div></li></script></div>')}return t.register("bots/common/train.bot.intent.part",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="oj-flex oj-sm-justify-content-space-between oj-sm-flex-items-initial oj-sm-align-items-center suite-helper-padding-top-15"><h3 class="oj-flex-item">').h("i18n",e,{},{key:"bots.train.otherTraining"},"h").w('</h3></div><div class="oj-flex"><ul id="train-bot-qna-list"data-bind="ojComponent: { component: \'ojListView\',selectionMode: \'none\',data: $root.trainingEnityQnADS,item: { template: \'train-bot-qna-template\' },rootAttributes: { class: \'ap-asset-picker-list suite-helper-max-width\' } }"></ul><script type="text/html" id="train-bot-qna-template"><li class="suite-no-margin suite-no-padding oj-flex oj-sm-align-items-center train-bot-list-item"><div class="oj-flex suite-helper-padding-left-10 suite-helper-padding-right-10"><div class="oj-flex-item suite-no-margin suite-no-padding suite-helper-max-width" data-bind="ojComponent: { component: \'ojCheckboxset\', readOnly: !$root.permissions().BOTS_WRITE,disabled: !requiresTraining,value: doTrainFlag },attr: { id: \'train-qnq-radioset_\' + idAttr }"><span class="oj-choice-item oj-flex oj-sm-flex-wrap-nowrap oj-sm-flex-items-initial oj-sm-align-items-flex-start"><input class="oj-flex-item" data-bind="attr: { id: \'checkbox_qna_\' + idAttr, value: idAttr }"type="checkbox" /><label class="oj-flex-item oj-sm-10" data-bind="attr: { for: \'train-qnq-radioset_\' + idAttr }" ><div class="oj-flex oj-sm-flex-wrap-nowrap suite-helper-margin-left-10"><span class="oj-navigationlist-item-icon suite-helper-padding-right-10 suite-helper-padding-top-3 left oj-flex-item oj-sm-flex-initial"data-bind="inlinesvg: { width: 24,height: 24,project: \'bots\', basename: icon,klazz: iconKlazz }"></span><div class="oj-flex-item suite-helper-max-width"><div class="ap-asset-name" data-bind="ellipsisTip: name"/><div class="ap-asset-desc" data-bind="ellipsisTip: description"/></div></div></label></span></div></div></li></script></div>')}return t.register("bots/common/train.bot.qna.part",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["uploadId"],!1),e,"h").w('" class="dropzone"><div class="oj-flex oj-sm-justify-content-center"><div id="').f(e.get(["uploadInitId"],!1),e,"h").w('" class="dropzone-content"><div><a data-bind="click: ').b(e.getBlock("selectFileUploadAction"),e,{},{}).w('" id="').f(e.get(["uploadImageLinkId"],!1),e,"h").w('"><div class="dropDownIcon bots-col-center"></div></a></div><div><a tabIndex="0" data-bind="click: ').b(e.getBlock("selectFileUploadAction"),e,{},{}).w(', enterKey" id="').f(e.get(["uploadLinkId"],!1),e,"h").w('">').b(e.getBlock("uploadLinkText"),e,{},{}).w("</a> ").b(e.getBlock("uploadText"),e,{},{}).w('</div></div></div><div class="oj-flex oj-sm-justify-content-center"><div id="').f(e.get(["uploadProgressId"],!1),e,"h").w('" class="dropzone-content"><span class="dropzone-filename" data-bind="text: ').b(e.getBlock("uploadFileName"),e,{},{}).w('"></span> <span>').b(e.getBlock("uploadProgressText"),e,{},{}).w("</span><div class=\"progressbar\"><div></div></div><button class=\"bots-destyled-button bots-remove-button bots-icon-button-16 upload-progress-button\"data-bind=\"ojComponent: { component: 'ojButton', display: 'icons', icons: { start: 'global-button-icon' } },click: ").b(e.getBlock("cancelFileUploadAction"),e,{},{}).w('"></button></div></div></div>').x(e.get(["showUploadWarning"],!1),e,{block:i},{}).x(e.get(["showUploadError"],!1),e,{block:n},{}).w("<!-- ko if: ko.unwrap(").b(e.getBlock("uploadFileName"),e,{},{}).w(') --><div id="').f(e.get(["uploadDoneId"],!1),e,"h").w('" class="bots-no-margin upload-success-container"><div class="oj-flex oj-sm-flex-items-initial oj-sm-flex-wrap-nowrap"><div class="oj-flex-item suite-helper-padding-right-10">').p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"stat_confirm_16"}).w('</div><div class="oj-flex-item"><span class="upload-status-title" data-bind="text: ko.unwrap(').b(e.getBlock("uploadFileName"),e,{},{}).w(") + ' '\"></span> <span>").b(e.getBlock("uploadDoneText"),e,{},{}).w('</span></div></div></div><!-- /ko --><div><input id="').f(e.get(["uploadInputTextId"],!1),e,"h").w('" ').x(e.get(["fileuploadConfig"],!1),e,{block:s},{}).w('class="bots-helper-hidden" type="file" name="attachment" ').x(e.get(["uploadAccept"],!1),e,{block:a},{}).w(" /></div>")}function i(t,e){return t.w("<!-- ko if: ").f(e.get(["showUploadWarning"],!1),e,"h").w(' --><div class="bots-no-margin upload-warning-container"><div class="oj-flex oj-sm-flex-items-initial oj-sm-flex-wrap-nowrap"><div class="oj-flex-item suite-helper-padding-right-10">').p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"stat_warn_16"}).w('</div><div class="oj-flex-item"><span class="upload-status-title" data-bind="text: ').f(e.get(["uploadWarningTitle"],!1),e,"h").w('"></span> <span data-bind="text: ').f(e.get(["uploadWarningText"],!1),e,"h").w('"></span></div></div></div><!-- /ko -->')}function n(t,e){return t.w("<!-- ko if: ").f(e.get(["showUploadError"],!1),e,"h").w(' --><div class="bots-no-margin upload-error-container"><div class="oj-flex oj-sm-flex-items-initial oj-sm-flex-wrap-nowrap"><div class="oj-flex-item suite-helper-padding-right-10">').p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"stat_error_16"}).w('</div><div class="oj-flex-item"><span class="upload-status-title" data-bind="text: ').f(e.get(["showUploadError"],!1),e,"h").w('().title"></span> <span data-bind="text: ').f(e.get(["showUploadError"],!1),e,"h").w('().text"></span></div></div></div><!-- /ko -->')}function s(t,e){return t.w("data-bind=\"jqueryPlugin: { name: 'fileupload',config: { dropZone: $('#").f(e.get(["uploadId"],!1),e,"h").w("'),").f(e.get(["fileuploadConfig"],!1),e,"h").w(" } },lifecycleHook: ").b(e.getBlock("lifecycleHookConfig"),e,{block:o},{}).w('"')}function o(t,e){return t.w(" { } ")}function a(t,e){return t.w('accept="').f(e.get(["uploadAccept"],!1),e,"h").w('"')}return t.register("bots/common/two.step.upload",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="unauthorizedDialog"data-bind="ojComponent: {component: \'ojDialog\', resizable: false, draggable: false, initialVisibility: \'hide\', rootAttributes: {class: \'unauthorized-dialog\'}, cancelBehavior: \'none\'}"><div class="oj-dialog-header oj-dialog-header-with-close-icon oj-helper-clearfix"><img src="/botsui/19.1.5-1907122019/resources/images/stat_error_16.png" class="bots-error-header-icon"/><span class="oj-dialog-title unauthorized-title">').h("i18n",e,{},{key:"unauthorized.title",filter:"h"},"h").w("</span> </div><div><span>").h("i18n",e,{},{key:"unauthorized.msg",filter:"h"},"h").w('</span></div><div class="oj-dialog-footer"><button class="oj-button oj-component oj-enabled oj-button-text-only oj-default right" data-bind="ojComponent: { component:\'ojButton\', label: \'').h("i18n",e,{},{key:"general.ok",filter:"j"},"h").w("' }, click: redirectToLogin\"></button></div></div>")}return t.register("bots/common/unauthorized",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["uploadId"],!1),e,"h").w('" class="dropzone"><div id="').f(e.get(["uploadInitId"],!1),e,"h").w('" class="oj-row oj-sm-center dropzone-content"><div class="oj-col oj-sm-12"><div class="oj-row oj-sm-center"><div class="oj-col oj-sm-12"><a data-bind="click: ').b(e.getBlock("selectFileUploadAction"),e,{},{}).w('" id="').f(e.get(["uploadImageLinkId"],!1),e,"h").w('"><div class="dropDownIcon bots-col-center"></div></a></div></div><div class="oj-row oj-sm-center"><div class="oj-col"><a tabIndex="0" data-bind="click: ').b(e.getBlock("selectFileUploadAction"),e,{},{}).w(', enterKey" id="').f(e.get(["uploadLinkId"],!1),e,"h").w('">').b(e.getBlock("uploadLinkText"),e,{},{}).w("</a> ").b(e.getBlock("uploadText"),e,{},{}).w('</div></div></div></div><div id="').f(e.get(["uploadProgressId"],!1),e,"h").w('" class="oj-row oj-sm-center dropzone-content"><div class="oj-col oj-sm-12"><div class="oj-row oj-sm-center"><div class="oj-col"><span class="dropzone-filename" data-bind="text: ').b(e.getBlock("uploadFileName"),e,{},{}).w('"></span> <span>').b(e.getBlock("uploadProgressText"),e,{},{}).w("</span><div class=\"progressbar\"><div></div></div><button class=\"bots-destyled-button bots-remove-button bots-icon-button-16 upload-progress-button\"data-bind=\"ojComponent: { component: 'ojButton', display: 'icons', icons: { start: 'global-button-icon' } },click: ").b(e.getBlock("cancelFileUploadAction"),e,{},{}).w('"></button></div></div></div></div></div>').x(e.get(["hideReadyForUpload"],!1),e,{else:i,block:n},{}).x(e.get(["showUploadWarning"],!1),e,{block:s},{}).w("<!-- ko if: ").b(e.getBlock("showUploadError"),e,{},{}).w(' --><div class="oj-row oj-sm-center bots-no-margin upload-error-container"><div class="oj-col oj-sm-12"><div class="oj-row"><div class="oj-col upload-error-sm-1 bots-no-padding"><img src="/botsui/19.1.5-1907122019/resources/css/images/stat_error_16.png"></img></div><div class="oj-col upload-error-sm-11 bots-no-padding"><div class="oj-row"><div class="oj-col oj-sm-12 upload-status-icon-title-gap"><span class="upload-error-title" data-bind="text: ').b(e.getBlock("uploadErrorTitle"),e,{},{}).w('"></span></div></div><div class="oj-row"><div class="oj-col oj-sm-12 upload-status-icon-title-gap"><span data-bind="text: ').b(e.getBlock("uploadErrorText"),e,{},{}).w('"></span></div></div>').x(e.get(["showErrorDetails"],!1),e,{block:o},{}).w("<!-- ko foreach: { data: ").b(e.getBlock("uploadErrorUALinks"),e,{block:a},{}).w(', as: \'linkConfig\' } --><div class="oj-row"><div class="oj-col oj-sm-12 bots-helper-padding-top-10"><a href="#" class="right" data-bind="botsOpenInTab: linkConfig"></a></div></div><!-- /ko --></div></div></div></div><!-- /ko --><div class="oj-row"><div class="oj-col"><input id="').f(e.get(["uploadInputTextId"],!1),e,"h").w('" ').x(e.get(["fileuploadConfig"],!1),e,{block:r},{}).w('class="bots-helper-hidden" type="file" name="file" ').x(e.get(["uploadAccept"],!1),e,{block:d},{}).w(" /></div></div>")}function i(t,e){return t.w('<div id="').f(e.get(["uploadDoneId"],!1),e,"h").w('" class="oj-row oj-sm-center bots-no-margin upload-success-container"><div class="oj-col oj-sm-12"><div class="oj-row"><div class="oj-col upload-status-sm-1 bots-no-padding">').p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"stat_confirm_16"}).w('</div><div class="oj-col upload-status-sm-11 bots-no-padding"><div class="oj-row"><div class="oj-col oj-sm-12 upload-status-icon-title-gap"><span class="upload-status-title" data-bind="text: ko.unwrap(').b(e.getBlock("uploadFileName"),e,{},{}).w(") + ': '\"></span> <span>").b(e.getBlock("uploadDoneText"),e,{},{}).w('</span></div></div><div class="oj-row"><div class="oj-col oj-sm-12 upload-status-icon-title-gap"><span>').b(e.getBlock("uploadDoneCreateText"),e,{},{}).w("</span></div></div></div></div></div></div>")}function n(t,e){return t.w('<div id="').f(e.get(["uploadDoneId"],!1),e,"h").w('"></div>')}function s(t,e){return t.w("<!-- ko if: ").f(e.get(["showUploadWarning"],!1),e,"h").w(' --><div class="oj-row oj-sm-center bots-no-margin upload-warning-container"><div class="oj-col oj-sm-12"><div class="oj-row"><div class="oj-col upload-status-sm-1 bots-no-padding"><img src="/botsui/19.1.5-1907122019/resources/css/images/stat_warn_16.png"></img></div><div class="oj-col upload-status-sm-11 bots-no-padding"><div class="oj-row"><div class="oj-col oj-sm-12 upload-status-icon-title-gap"><span class="upload-status-title" data-bind="text: ').f(e.get(["uploadWarningTitle"],!1),e,"h").w('"></span></div></div><div class="oj-row"><div class="oj-col oj-sm-12 upload-status-icon-title-gap"><span data-bind="text: ').f(e.get(["uploadWarningText"],!1),e,"h").w('"></span></div></div></div></div></div></div><!-- /ko -->')}function o(t,e){return t.w('<div class="oj-row bots-helper-padding-top-10" data-bind="visible: ').f(e.get(["showErrorDetails"],!1),e,"h").w('"><div class="oj-col oj-sm-12 upload-status-icon-title-gap"><a href="#" data-bind="click: ').b(e.getBlock("showErrorDetailsAction"),e,{},{}).w('">').b(e.getBlock("showErrorDetailsText"),e,{},{}).w("</a></div></div>")}function a(t,e){return t.w("[ ]")}function r(t,e){return t.w("data-bind=\"jqueryPlugin: { name: 'fileupload',config: { dropZone: $('#").f(e.get(["uploadId"],!1),e,"h").w("'),").f(e.get(["fileuploadConfig"],!1),e,"h").w(" } },lifecycleHook: ").b(e.getBlock("lifecycleHookConfig"),e,{block:l},{}).w('"')}function l(t,e){return t.w(" { } ")}function d(t,e){return t.w('accept="').f(e.get(["uploadAccept"],!1),e,"h").w('"')}return t.register("bots/common/upload",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<button id="').f(e.get(["package"],!1),e,"h").w("-validate-flow\" class=\"bots-top-buttons \"data-bind=\"css: { 'in-progress': $root.validationInProgress,'bots-alert': !!!$root.validationInProgress() },ojComponent: {component: 'ojButton',display: 'all',icons: { start: 'bots-svgsprite-show-when-busy bots-helper-height-16 bots-helper-line-height-16 bots-helper-margin-top-0 bots-helper-margin-bottom-0 bots-helper-margin-left-8' },label: $root.i18n.translate('flows.validateFlowLabel'),rootAttributes: { class: 'halfchrome-tertiary-alert-button bots-helper-margin-bottom-0' } },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'animated_ring' },click: validateFlowAction\"></button>")}return t.register("bots/common/validate.bot",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<button id="').f(e.get(["package"],!1),e,"h").w("-validate-flow\" class=\"bots-top-buttons \"data-bind=\"css: { 'in-progress': $root.validationInProgress,'bots-alert': !!!$root.validationInProgress() },ojComponent: {component: 'ojButton',display: 'all',icons: { start: 'bots-svgsprite-show-when-busy bots-helper-height-16 bots-helper-line-height-16 bots-helper-margin-top-0 bots-helper-margin-bottom-0 bots-helper-margin-left-8' },label: $root.i18n.translate('flows.validateFlowLabel'),rootAttributes: { class: 'halfchrome-tertiary-alert-button bots-helper-margin-bottom-0' } },inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'animated_ring' },click: validateDA\"></button>")}return t.register("bots/common/validate.da",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div style="display:none; background: #fff" id="').f(e.get(["id"],!1),e,"h").w("\"data-bind=\"ojComponent:{ component: 'ojDialog',initialVisibility: 'hide',resizeBehavior: 'none',cancelBehavior: 'none',dragAffordance: 'none' }\"><div class=\"oj-dialog-header oj-helper-clearfix\" aria-labelledby=\"").f(e.get(["id"],!1),e,"h").w('-title"><img src="/botsui/19.1.5-1907122019/resources/images/stat_warn_16.png" class="bots-error-header-icon"/><span id="').f(e.get(["id"],!1),e,"h").w('-title" class="oj-dialog-title">').h("i18n",e,{},{key:i},"h").w('</span></div><div class="oj-dialog-body bots-error-dialog-body"><div class="oj-row bots-form-margin"><div class="oj-col bots-no-padding">').b(e.getBlock("warningDialogBodySection"),e,{block:n},{}).w('                </div></div></div><div class="oj-dialog-footer bots-no-margin" style="background: #fff"><ul class="bots-hlist bots-buttonlist right"data-bind="ifnot: ').x(e.get(["hideFooterCondition"],!1),e,{else:o,block:a},{}).w('"><li><button default="true"data-bind="ojComponent: { component: \'ojButton\',label: $root.i18n.translate(\'').f(e.get(["yesKey"],!1),e,"h").w("') },click: ").f(e.get(["yesAction"],!1),e,"h").w("\"/></li><li><button data-bind=\"ojComponent: { component: 'ojButton',label: $root.i18n.translate('").f(e.get(["noKey"],!1),e,"h").w("') },click: ").f(e.get(["noAction"],!1),e,"h").w('"/>    </li></ul></div></div>')}function i(t,e){return t.f(e.get(["titleKey"],!1),e,"h")}function n(t,e){return t.w("<span>").h("i18n",e,{},{key:s},"h").w("</span>")}function s(t,e){return t.f(e.get(["contentKey"],!1),e,"h")}function o(t,e){return t.w("false")}function a(t,e){return t.f(e.get(["hideFooterCondition"],!1),e,"h")}return t.register("bots/common/warning_dialog",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,e}(dust),define("bots.templates/common",function(){}),function(t){function e(t,e){return t.p("bots/common/asset.picker",e,e,{idPrefix:"botPicker",isEnabled:"$root.renderBotPicker",isHalfChromeButton:"true",baseLabel:"botNameAdCrumbs",baseLabelLastTokenOf:"$root.BotsEnums.ARTIFACT_NAME_VERSION_SEPARATOR",baseTagLabel:"botStatusVersionTag",baseTagLabelLastTokenOf:"$root.BotsEnums.ARTIFACT_NAME_VERSION_SEPARATOR",baseTooltip:"$root.i18n.translate('bots.assetPickerTip.editor')",baseSvgSprite:"func_appmenuarrow_16",klazz:"suite-helper-margin-left-4 suite-helper-margin-top-4 suite-helper-margin-bottom-0"})}return t.register("bots/shell/bot.more",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(s),t.p("bots/common/asset.picker.popup",e,e,{idPrefix:"botPicker",selectAssetHandler:"$root.selectBots",selectedAssetIds:"$root.selectedBotIds",assetDataSource:"$root.botDataSource",assetTypeIconProvider:"$root.botStatusIconProvider",assetTypeIconKlazz:"klazz",searchByInputValue:"$root.searchBy",newAssetClickHandler:"$root.newBotPopup.open",moreActionsAvailable:"true",beforeOpen:"$root.botPickerOpening",newAssetButtonLabel:"$root.i18n.translate('bots.new')",popupKlazz:"suite-context-header-overlay",itemName:"displayName"})}function i(t,e){return e=e.shiftBlocks(s),t.p("bots/common/cta.dropdown.button",e,e,{prefix:"botPicker-more-actions",selectAction:"$root.performBotMenuAction",label:"$root.i18n.translate('general.more')",klazz:""})}function n(t,e){return e=e.shiftBlocks(s),t.w('<!-- ko foreach: $root.botPickerContextMenu --><li data-bind="attr: { menuId: id,title: computeTitle($parent.bot) },css: { \'oj-disabled\': computeDisabled($parent.bot) },visible: computeVisible($parent.bot)"><a href="#" data-bind="text: text"></a></li><!-- /ko -->')}t.register("bots/shell/bot.picker.popup",e);var s={menuItems:n,moreActionsPart:i};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.p("bots/common/asset.picker.popup",e,e,{idPrefix:"botNamePicker",selectedAssetIds:"$root.selectedBotNames",assetDataSource:"$root.botNameDataSource",noAssetMinHeight:"true",searchByInputValue:"$root.botNameSearchBy",beforeOpen:"$root.botNamePickerOpening",newAssetButtonLabel:"$root.i18n.translate('bots.new')",popupKlazz:"suite-context-header-overlay",itemName:"displayName"})}return t.register("bots/shell/botname.picker.popup",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="oj-flex bots-global-context-header"data-bind="css: { \'bots-global-context-header-assistance\': botsContextView() === \'viewInitialTour\' }"><!-- ko if: $root.botsContextView() === \'viewExploreBot\' --><div class="oj-flex oj-flex-item oj-sm-align-self-center application-picker-header suite-helper-padding-left-20"><div class="oj-flex-item"data-bind="text: $root.promoJourneyTitle"></div></div><!-- /ko --><!-- ko if: $root.botsContextView() === \'viewInitialTour\' --><div class="oj-flex oj-flex-item oj-sm-align-self-center application-picker-header suite-helper-padding-left-20"><div class="oj-flex-item"data-bind="text: $root.i18n.translate(\'assistance.initialTour.welcomeUser\', user.username)"></div></div><!-- /ko --><!-- ko if: $root.botsContextView() === \'viewAnalytics\' --><div class="oj-flex oj-flex-item oj-sm-align-self-center application-picker-header bots-helper-padding-left-20"><div class="oj-flex-item">').h("i18n",e,{},{key:"analytics.title"},"h").w('</div></div><!-- /ko --><!-- ko if: $root.botsContextView() === \'viewAuthenticators\' --><div class="oj-flex oj-flex-item oj-sm-align-self-center application-picker-header bots-helper-padding-left-20"><div class="oj-flex-item">').h("i18n",e,{},{key:"nav.sysconf"},"h").w(" • ").h("i18n",e,{},{key:"nav.authenticators"},"h").w('</div></div><!-- /ko --><!-- ko if: $root.botsContextView() === \'viewTranslators\' --><div class="oj-flex oj-flex-item oj-sm-align-self-center application-picker-header bots-helper-padding-left-20"><div class="oj-flex-item">').h("i18n",e,{},{key:"nav.sysconf"},"h").w(" • ").h("i18n",e,{},{key:"nav.translators"},"h").w("</div></div><!-- /ko --><!-- ko if: $root.botsContextView() === 'viewDataManagementTab' || $root.botsContextView() === 'viewDataManagementLanding' --><div class=\"oj-flex oj-flex-item oj-sm-align-self-center application-picker-header bots-helper-padding-left-20\"><div class=\"oj-flex-item\">").h("i18n",e,{},{key:"nav.sysconf"},"h").w(" • ").h("i18n",e,{},{key:"nav.dataManagement"},"h").w("</div></div><!-- /ko --><!-- ko if: $root.botsContextView() === 'viewBotsLanding' --><div class=\"oj-flex-bar suite-helper-max-width\"><!-- ko if: !!versionsLandingBotName() --><div class=\"oj-flex-bar-start oj-sm-flex-initial oj-sm-align-items-center suite-helper-margin-left-10 oj-sm-flex-wrap-nowrap\"><button id=\"bot-versions-back-button\"data-bind=\"ojComponent: { component: 'ojButton',display: 'icons',chroming: 'half',icons: { start: 'bots-icon-button-24' },label: '").h("i18n",e,{},{key:"general.back",filter:"j"},"h").w('\',rootAttributes: { class: \'halfchrome-tertiary-icononly-button suite-helper-margin-bottom-0 header-halfchrome-button\' } },inlinesvg: { width: 24, height: 24, project: \'bots\', basename: \'func_leftarrow_24\' },click: returnToBotCatalog"></button><div class="suite-helper-margin-left-7 application-picker-header nowrap"data-bind="text: botTilesTitle"></div><div class="suite-helper-margin-left-7 application-picker-header">•</div></div><div class="oj-flex-bar-middle bots-helper-zero-min-width"><div class="bots-global-context-header bots-global-context-header-content oj-flex oj-sm-align-items-center oj-sm-flex-items-initial oj-sm-justify-content-space-between bots-helper-zero-min-width"><div class="oj-flex-item bots-helper-zero-min-width">').p("bots/common/asset.picker",e,e,{idPrefix:"botNamePicker",isEnabled:"$root.renderBotNamePicker",isHalfChromeButton:"true",baseLabel:"versionsLandingBotDisplayName",baseLabelLastIndexOf:"$root.BotsEnums.ARTIFACT_NAME_VERSION_SEPARATOR",baseTooltip:"$root.i18n.translate('bots.assetPickerTip.versions')",baseSvgSprite:"func_appmenuarrow_16",klazz:"suite-helper-margin-left-4 suite-helper-margin-top-4 suite-helper-margin-bottom-0"}).w('</div></div></div><!-- /ko --><!-- ko if: !!!versionsLandingBotName() --><div class="oj-flex-bar-start oj-sm-flex-initial oj-sm-align-self-center suite-helper-margin-left-20 application-picker-header"data-bind="text: botTilesTitle"></div><!-- /ko --><!-- ko if: $root.permissions().BOTS_WRITE --><div class="oj-flex-bar-end oj-sm-flex-initial"><div class="bots-global-context-header bots-global-context-header-content oj-flex oj-sm-align-items-center oj-sm-flex-items-initial oj-sm-justify-content-space-between oj-sm-flex-wrap-nowrap"><!--div class="oj-flex-item suite-helper-padding-right-20">').p("bots/common/learn.bot",e,e,{}).w('</div--><div class="oj-flex-item">').p("bots/common/import.bot",e,e,{label:"$root.i18n.translate('bots.importBot')"}).w("</div></div></div><!-- /ko --></div><!-- /ko --><!-- ko if: $root.botsContextView() === 'viewBot' || $root.botsContextView() === 'viewBotRetrainer' --><div class=\"oj-flex-bar suite-helper-max-width\"><div class=\"oj-flex-bar-start oj-sm-flex-initial oj-sm-align-self-center suite-helper-margin-left-10\"><button id=\"bot-back-button\"data-bind=\"ojComponent: { component: 'ojButton',display: 'icons',chroming: 'half',icons: { start: 'bots-icon-button-24' },label: '").h("i18n",e,{},{key:"general.back",filter:"j"},"h").w("',rootAttributes: { class: 'halfchrome-tertiary-icononly-button suite-helper-margin-bottom-0 header-halfchrome-button' } },inlinesvg: { width: 24, height: 24, project: 'bots', basename: 'func_leftarrow_24' },click: navigateToBotCatalog\"></button></div><div class=\"oj-flex-bar-middle bots-helper-zero-min-width\"><div class=\"bots-global-context-header bots-global-context-header-content oj-flex oj-sm-align-items-center oj-sm-flex-items-initial oj-sm-justify-content-space-between bots-helper-zero-min-width\"><div class=\"oj-flex-item bots-helper-zero-min-width\">").p("bots/shell/bot.more",e,e,{}).w('</div></div></div><div class="oj-flex-bar-end oj-sm-flex-initial"><div class="bots-global-context-header bots-global-context-header-content oj-flex oj-sm-align-items-center oj-sm-flex-items-initial oj-sm-justify-content-space-between oj-sm-flex-wrap-nowrap"><div class="oj-flex-item suite-helper-padding-right-20">').p("bots/common/validate.bot",e,e,{package:"bot"}).w('</div><div class="oj-flex-item">').p("bots/common/train.bot",e,e,{}).w('</div></div></div></div><!-- /ko --><!-- ko if: $root.botsContextView() === \'customHeader\' --><div class="oj-flex oj-flex-item oj-sm-align-self-center suite-helper-padding-left-20" data-bind="nobind"><div id="bots-custom-context-header-base" class="suite-helper-max-width"></div></div><!-- /ko --><!-- ko if: $root.botsContextView() === \'viewSkillStore\' --><div class="oj-flex oj-flex-item oj-sm-align-self-center application-picker-header bots-helper-padding-left-20"><div class="oj-flex-item bots-helper-margin-left-4">').h("i18n",e,{},{
key:"skillStore.title"},"h").w("</div></div><!-- /ko --><!-- ko if: $root.botsContextView() === 'viewSkillVersions' --><div class=\"oj-flex oj-flex-item oj-sm-align-self-center bots-helper-margin-left-10\"><div class=\"oj-flex-bar-start oj-sm-flex-initial oj-sm-align-self-center oj-sm-align-items-center oj-sm-flex-wrap-nowrap\"><button id=\"skillstore-back-button\"data-bind=\"ojComponent: { component: 'ojButton',display: 'icons',chroming: 'half',icons: { start: 'bots-icon-button-24' },label: '").h("i18n",e,{},{key:"general.back",filter:"j"},"h").w("',rootAttributes: { class: 'halfchrome-tertiary-icononly-button bots-helper-margin-bottom-0 header-halfchrome-button' } },inlinesvg: { width: 24, height: 24, project: 'bots', basename: 'func_leftarrow_24' },click: navigateToStore\"></button><div class=\"suite-helper-margin-left-7 application-picker-header\">").h("i18n",e,{},{key:"skillStore.title"},"h").w(" • <span data-bind=\"text: selectedStoreSkillGroupName\"></span></div></div></div><!-- /ko --><!-- ko if: $root.botsContextView() === 'viewSkill' --><div class=\"oj-flex-bar suite-helper-max-width\"><div class=\"oj-flex-bar-start oj-sm-flex-initial oj-sm-align-self-center suite-helper-margin-left-10\"><button id=\"skillstore-back-button\"data-bind=\"ojComponent: { component: 'ojButton',display: 'icons',chroming: 'half',icons: { start: 'bots-icon-button-24' },label: '").h("i18n",e,{},{key:"general.back",filter:"j"},"h").w('\',rootAttributes: { class: \'halfchrome-tertiary-icononly-button bots-helper-margin-bottom-0 header-halfchrome-button\' } },inlinesvg: { width: 24, height: 24, project: \'bots\', basename: \'func_leftarrow_24\' },click: navigateBackToStore"></button></div><div class="oj-flex-bar-middle bots-helper-zero-min-width"><div class="oj-flex oj-sm-flex-items-initial oj-sm-justify-content-space-between bots-global-context-header bots-global-context-header-content oj-sm-align-items-center bots-helper-zero-min-width"><div class="oj-flex-item bots-helper-zero-min-width"><div class="oj-flex"><div class="oj-flex-item bots-helper-zero-min-width application-picker-header">').h("i18n",e,{},{key:"skillStore.title"},"h").w(' • <span data-bind="text: selectedStoreSkillName"></span></div><div class="oj-flex-item bots-helper-zero-min-width"><div class="ap-tag-label suite-helper-ellipsis nowrap"data-bind="ellipsisTip: { value: selectedStoreSkillVersion }"></div></div></div></div></div></div></div><!-- /ko --><!-- ko if: $root.botsContextView() === \'viewDALanding\' --><div class="oj-flex-bar suite-helper-max-width"><div class="oj-flex-bar-start oj-sm-flex-initial oj-sm-align-items-center suite-helper-margin-left-10"><div class="oj-flex-bar-start oj-sm-flex-initial oj-sm-align-self-center suite-helper-margin-left-20 application-picker-header"data-bind="text: daTilesTitle"></div></div><div class="oj-flex-bar-end oj-sm-flex-initial"><div class="bots-global-context-header bots-global-context-header-content oj-flex oj-sm-align-items-center oj-sm-flex-items-initial oj-sm-justify-content-space-between oj-sm-flex-wrap-nowrap"><!--div class="oj-flex-item suite-helper-padding-right-20">').p("bots/common/learn.bot",e,e,{}).w('</div--><div class="oj-flex-item">').p("bots/common/import.bot",e,e,{label:"$root.i18n.translate('da.importDA')"}).w("</div></div></div></div><!-- /ko --><!-- ko if: $root.botsContextView() === 'viewChannelsLanding' || $root.botsContextView() === 'viewChannelsTab' --><div class=\"oj-flex-bar suite-helper-max-width\"><div class=\"oj-flex-bar-start oj-sm-flex-initial oj-sm-align-items-center suite-helper-margin-left-10\"><div class=\"suite-helper-margin-left-7 application-picker-header\"data-bind=\"text: channelsTitle\"></div></div></div><!-- /ko --><!-- ko if: $root.botsContextView() === 'viewDA' || $root.botsContextView() === 'viewDARetrainer' --><div class=\"oj-flex-bar suite-helper-max-width\"><div class=\"oj-flex-bar-start oj-sm-flex-initial oj-sm-align-self-center suite-helper-margin-left-10\"><button id=\"da-back-button\"data-bind=\"ojComponent: { component: 'ojButton',display: 'icons',chroming: 'half',icons: { start: 'bots-icon-button-24' },label: '").h("i18n",e,{},{key:"general.back",filter:"j"},"h").w("',rootAttributes: { class: 'halfchrome-tertiary-icononly-button suite-helper-margin-bottom-0 header-halfchrome-button' } },inlinesvg: { width: 24, height: 24, project: 'bots', basename: 'func_leftarrow_24' },click: navigateToDACatalog\"></button></div><div class=\"oj-flex-bar-middle\"><div class=\"bots-global-context-header bots-global-context-header-content oj-flex oj-sm-align-items-center oj-sm-flex-items-initial oj-sm-justify-content-space-between\"><div class=\"oj-flex-item\">").p("bots/shell/da.more",e,e,{}).w('</div></div></div><div class="oj-flex-bar-end oj-sm-flex-initial"><div class="bots-global-context-header bots-global-context-header-content oj-flex oj-sm-align-items-center oj-sm-flex-items-initial oj-sm-justify-content-space-between"><div class="oj-flex-item bots-helper-padding-right-20">').p("bots/common/validate.da",e,e,{package:"da"}).w('</div><div class="oj-flex-item">').p("bots/common/train.bot",e,e,{}).w('</div></div></div></div><!-- /ko --></div><!-- ko nobind --><div id="bots-new-bot-dialog-dock" class="suite-helper-height-zero"><!-- ko if: $root.botsContextView() === \'viewBot\' || $root.botsContextView() === \'viewBotRetrainer\' --><div class="suite-helper-offscreen">').p("bots/shell/bot.picker.popup",e,e,{}).w("</div>").p("bots/shell/botname.picker.popup",e,e,{}).p("bots/common/new.bot",e,e,{}).p("bots/common/clone.bot.dialog",e,e,{}).p("bots/common/delete.bot.dialog",e,e,{}).p("bots/common/install.store.skill.dialog",e,e,{}).p("bots/common/channel.routes",e,e,{}).w("<!-- /ko --><!-- ko if: $root.botsContextView() === 'viewDA' || $root.botsContextView() === 'viewDARetrainer' --><div class=\"suite-helper-offscreen\">").p("bots/shell/da.picker.popup",e,e,{}).w("</div>").p("bots/common/new.da",e,e,{}).p("bots/common/clone.da.dialog",e,e,{}).p("bots/common/delete.da.dialog",e,e,{}).w("<!-- /ko -->").p("bots/common/publish.bot.dialog",e,e,{}).p("bots/common/export.bot.logs.dialog",e,e,{}).p("bots/common/train.bot.dialog",e,e,{}).w("</div>").p("bots/tester/main",e,e,{}).p("bots/defectviewer/viewer",e,e,{}).w("<!-- /ko -->")}return t.register("bots/shell/context.header",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.p("bots/common/asset.picker",e,e,{idPrefix:"daPicker",isEnabled:"$root.renderBotPicker",isHalfChromeButton:"true",moreActionsAvailable:"true",baseLabel:"daNameAdCrumbs",baseLabelLastIndexOf:"$root.BotsEnums.ARTIFACT_NAME_VERSION_SEPARATOR",baseTooltip:"$root.i18n.translate('da.assetPickerTip.editor')",baseSvgSprite:"func_appmenuarrow_16",klazz:"suite-helper-margin-left-4 suite-helper-margin-top-4 suite-helper-margin-bottom-0"})}return t.register("bots/shell/da.more",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(s),t.p("bots/common/asset.picker.popup",e,e,{idPrefix:"daPicker",selectAssetHandler:"$root.selectDAs",selectedAssetIds:"$root.selectedBotIds",assetDataSource:"$root.botDataSource",assetTypeIconProvider:"$root.botStatusIconProvider",assetTypeIconKlazz:"klazz",searchByInputValue:"$root.searchDABy",newAssetClickHandler:"$root.newDAPopup.open",moreActionsAvailable:"true",beforeOpen:"$root.daPickerOpening",newAssetButtonLabel:"$root.i18n.translate('da.new')",popupKlazz:"suite-context-header-overlay",itemName:"displayName"})}function i(t,e){return e=e.shiftBlocks(s),t.p("bots/common/cta.dropdown.button",e,e,{prefix:"daPicker-more-actions",selectAction:"$root.performDAMenuAction",label:"$root.i18n.translate('general.more')",klazz:""})}function n(t,e){return e=e.shiftBlocks(s),t.w('<!-- ko foreach: $root.daPickerContextMenu --><li data-bind="attr: { menuId: id,title: computeTitle($parent.bot) },css: { \'oj-disabled\': computeDisabled($parent.bot) },visible: computeVisible($parent.bot)"><a href="#" data-bind="text: text"></a></li><!-- /ko -->')}t.register("bots/shell/da.picker.popup",e);var s={menuItems:n,moreActionsPart:i};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="oj-flex-bar oj-sm-align-items-center"><div class="oj-flex-bar-start application-picker-header">').x(e.get(["backButtonVisible"],!1),e,{block:i},{}).w('</div><div class="oj-flex-bar-middle application-picker-header">').x(e.get(["title"],!1),e,{block:n},{}).w('</div><div class="oj-flex-bar-end">').b(e.getBlock("closeButton"),e,{block:s},{}).w("</div></div>")}function i(t,e){return t.w("<!-- ko if: ").f(e.get(["backButtonVisible"],!1),e,"h").w(" --><button class=\"bots-helper-margin-top-5\"data-bind=\"ojComponent: { component: 'ojButton',display: 'icons',chroming: 'half',icons: { start: 'bots-icon-button-24' },label: '").h("i18n",e,{},{key:"general.back",filter:"j"},"h").w("',rootAttributes: { class: 'halfchrome-tertiary-icononly-button suite-helper-margin-bottom-0 header-halfchrome-button' } },inlinesvg: { width: 24, height: 24, project: 'bots', basename: 'func_leftarrow_24' },click: ").f(e.get(["backButtonListener"],!1),e,"h").w('"></button><!-- /ko -->')}function n(t,e){return t.w('<span data-bind="text: ').f(e.get(["title"],!1),e,"h").w('"></span>')}function s(t,e){return t.w("<button data-bind=\"ojComponent: {component: 'ojButton',label: ").x(e.get(["closeLabel"],!1),e,{else:o,block:a},{}).w(",rootAttributes: { class: 'primary-button suite-helper-margin-right-20 suite-helper-margin-bottom-0' }}, click: closeFullpagePopup\"></button>")}function o(t,e){return t.w("$root.i18n.translate('general.close')")}function a(t,e){return t.f(e.get(["closeLabel"],!1),e,"h")}return t.register("bots/shell/fullpage.popup.header",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,e}(dust),define("bots.templates/shell",function(){}),define("bots.package.util/byte",[],function(){var t=function(t,e,i){if("string"==typeof t){var n,s=t.length,o="boolean"==typeof i&&i;if(e||o)for(var a=s-1;a>=0;a--)n=t.charCodeAt(a),o&&10===n?s++:e&&(n>127&&n<=2047?s++:n>2047&&n<=65535&&(s+=2));return s}return 0};return{length:t}}),define("bots.package.shell/validators",["module","bots.i18n","bots.package.util/byte"],function(t,e,i){var n={format:function(t){return"string"==typeof t?t.trim():t}},s={createConverter:function(t){return n}};oj.Validation.converterFactory("whitespaceTrimmer",s);var o=Class.extend({module:t,name:"Validators"},{__static__:{DISPLAY_NAME_REGEX:/^(?!\s).{1,100}$/gi,DISPLAY_NAME_TO_NAME_FILTER_REGEX:/[\s\u07ff-\uffff\W]+/g,NAME_REGEX:/^[a-z][a-z0-9_]{0,99}$/gi,VERSION_REGEX:/^[a-z0-9][a-z0-9_. \-]{0,99}$/gi,BOT_OTHER_NAME_REGEX:/^[a-z][a-z0-9_.]{0,99}$/gi,BOT_INTENT_NAME_REGEX:/^[a-z][a-z0-9_. \-]{0,99}$/gi,RESOURCE_NAME_REGEX:/^([a-z][a-z0-9_\-]*|{[a-z][a-z0-9_]*})$/gi,SHORT_DESCRIPTION_REGEX:/^(?!\s*$).+/g,FIELD_NAME_REGEX:/^[a-z][a-z0-9_]*$/gi,ALPHANUMERIC_WITH_SPACES_NAME_REGEX:/^[a-z][a-z0-9 ]{0,99}$/gi,BASE_PARAMETERS_REGEX:/^[^\/\\\s]([\da-zA-Z\.-]+)([\/\w \.\{\}-]*)*\/?$/g,LOCAL_URI_REGEX:/^[\/\?;].*/g,URL_REGEX:/^(([^:\/?#]+):)?(\/\/[^\/.?#\s]+)([^?#\s]*)(\?([^#\s]*))?(#([^\s]*))?$/g,RAML_MAP_VALUE_REGEX:/:(\s+\S|\s*$)/g,CANONICAL_VALUE_REGEX:/^[^:,]*[^ \.?:,]$/gi,SYNONYMS_REGEX:/^[^:]*[^ \.?:]$/gi,BUNDLES_LANGUAGE_TAG_REGEX:/^[A-Za-z][A-Za-z0-9]{0,9}(-([A-Za-z0-9]{1,9}))*$/gi,TESTER_QNA_MATCH_THRESHOLD_REGEX:/^[0-9]*%(,[0-9]*%)*$/gi,TESTER_CONFIG_PARAMETER_NAME_REGEX:/(^da[.][a-zA-Z0-9]{1,96}$)|(^[a-zA-Z][a-zA-Z0-9]{0,98}$)/g},config:{messages:{displayNameValidator:"general.validator.detail.displayName",nameValidator:"general.validator.detail.name",versionValidator:"general.validator.detail.version",botsOtherNameValidator:"general.validator.detail.botsOtherName",botsSkillNameValidator:"general.validator.detail.botsSkillName",botsSkillDisplayNameValidator:"general.validator.detail.botsSkillDisplayName",botsIntentNameValidator:"general.validator.detail.botsIntentName",resourceNameValidator:"general.validator.detail.resourceName",apiShortDescriptionValidator:"general.validator.detail.shortDescription",fieldNameValidator:"general.validator.detail.fieldName",alphanumericWithSpacesNameValidator:"general.validator.detail.alphanumericWithSpacesName",lengthValidator:"general.validator.detail.length",baseParametersValidator:"general.validator.detail.baseUriValidator",localURIValidator:"general.validator.detail.localuriValidator",urlValidator:"general.validator.detail.urlValidator",ramlMapValueValidator:"general.validator.detail.ramlMapValueDetail",botsCanonicalNameValidator:"general.validator.detail.botsCanonicalSynonymName",botsSynonymsValidator:"general.validator.detail.botsCanonicalSynonymName",bundlesLanguageTagValidator:"general.validator.detail.bundlesLanguageTag",bundlesLanguageTagNotDefaultValidator:"general.validator.detail.bundlesLanguageTagDefault",testerQnAMatchThresholdValidator:"general.validator.detail.testerQnAMatchThreshold",configParameterNameValidator:"general.validator.detail.configParameterName"},maxLength:100},Validators:function(t){this.config=$.extend(!0,{},this.config,t);for(var e in this)/Validator$/.test(e)&&this[e].validate&&this[e].doTest&&(this[e].validate=this[e].validate.bind(this),this[e].doTest=this[e].doTest.bind(this))},_getMessage:function(t,i,n){var s=this.config.messages[t];return"function"==typeof s?s.apply(this,i,n,t):"string"==typeof s?e.translate(s,[i]):void 0},displayNameValidator:{validate:function(t,i){if(!this.displayNameValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.nameFormatIncorrect"),this._getMessage("displayNameValidator",t,i));return!0},doTest:function(t,e){if(t){this.__static__.DISPLAY_NAME_REGEX.lastIndex=0;var i=this.__static__.DISPLAY_NAME_REGEX.test(t);if(!i)return!1}return!0}},displayNameToNameFilter:function(t){return this.__static__.DISPLAY_NAME_TO_NAME_FILTER_REGEX.lastIndex=0,t?t.replace(this.__static__.DISPLAY_NAME_TO_NAME_FILTER_REGEX,""):t},nameValidator:{validate:function(t,i){if(!this.nameValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.nameFormatIncorrect"),this._getMessage("nameValidator",t,i));return!0},doTest:function(t,e){if(t){this.__static__.NAME_REGEX.lastIndex=0;var i=this.__static__.NAME_REGEX.test(t);if(!i)return!1}return!0}},versionValidator:{validate:function(t,i){if(!this.versionValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.versionFormatIncorrect"),this._getMessage("versionValidator",t,i));return!0},doTest:function(t,e){if(t){this.__static__.VERSION_REGEX.lastIndex=0;var i=this.__static__.VERSION_REGEX.test(t);if(!i)return!1}return!0}},botsOtherNameValidator:{validate:function(t,i){if(!this.botsOtherNameValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.botsOtherNameFormatIncorrect"),this._getMessage("botsOtherNameValidator",t,i));return!0},doTest:function(t,e){if(t){this.__static__.BOT_OTHER_NAME_REGEX.lastIndex=0;var i=this.__static__.BOT_OTHER_NAME_REGEX.test(t);if(!i)return!1}return!0}},botsSkillNameValidatorContext:{},botsSkillNameValidator:{validate:function(t,i){if(!this.botsSkillNameValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.botsSkillNameExistsInStore"),this._getMessage("botsSkillNameValidator",t,i));return!0},doTest:function(t,e){return!(t&&this.botsSkillNameValidatorContext.currentNamespace&&this.botsSkillNameValidatorContext.currentName&&t===this.botsSkillNameValidatorContext.currentName)}},botsSkillDisplayNameValidator:{validate:function(t,i){if(!this.botsSkillDisplayNameValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.botsSkillDisplayNameExistsInStore"),this._getMessage("botsSkillDisplayNameValidator",t,i));return!0},doTest:function(t,e){return!(t&&this.botsSkillNameValidatorContext.currentNamespace&&this.botsSkillNameValidatorContext.currentDisplayName&&t===this.botsSkillNameValidatorContext.currentDisplayName)}},botsIntentNameValidator:{validate:function(t,i){if(!this.botsIntentNameValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.botsIntentNameFormatIncorrect"),this._getMessage("botsIntentNameValidator",t,i));return!0},doTest:function(t,e){if(t){this.__static__.BOT_INTENT_NAME_REGEX.lastIndex=0;var i=this.__static__.BOT_INTENT_NAME_REGEX.test(t);if(!i)return!1}return!0}},botsCanonicalNameValidator:{validate:function(t,i){if(!this.botsCanonicalNameValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.nameFormatIncorrect"),this._getMessage("botsCanonicalNameValidator",t,i));return!0},doTest:function(t,e){if(t){this.__static__.CANONICAL_VALUE_REGEX.lastIndex=0;var i=this.__static__.CANONICAL_VALUE_REGEX.test(t);if(!i)return!1}return!0}},botsSynonymsValidator:{validate:function(t,i){if(t&&t.length>0&&!this.botsSynonymsValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.nameFormatIncorrect"),this._getMessage("botsSynonymsValidator",t,i));return!0},doTest:function(t,e){if(t){this.__static__.SYNONYMS_REGEX.lastIndex=0;var i=this.__static__.SYNONYMS_REGEX.test(t);if(!i)return!1}return!0}},resourceNameValidator:{validate:function(t,i){if(!this.resourceNameValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.nameFormatIncorrect"),this._getMessage("resourceNameValidator",t,i));return!0},doTest:function(t,e){if(t)for(var i=t.split("/"),n=0;n<i.length;n++){this.__static__.RESOURCE_NAME_REGEX.lastIndex=0;var s=this.__static__.RESOURCE_NAME_REGEX.test(i[n]);if(!s)return!1}return!0}},apiShortDescriptionValidator:{validate:function(t,e){return!!this.apiShortDescriptionValidator.doTest(t,e)},doTest:function(t,e){if(t){this.__static__.SHORT_DESCRIPTION_REGEX.lastIndex=0;var i=this.__static__.SHORT_DESCRIPTION_REGEX.test(t);if(!i)return!1}return!0}},fieldNameValidator:{validate:function(t,i){if(!this.fieldNameValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.nameFormatIncorrect"),this._getMessage("fieldNameValidator",t,i));return!0},doTest:function(t,e){if(t){this.__static__.FIELD_NAME_REGEX.lastIndex=0;var i=this.__static__.FIELD_NAME_REGEX.test(t);if(!i)return!1}return!0}},alphanumericWithSpacesNameValidator:{validate:function(t,i){if(!this.alphanumericWithSpacesNameValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.nameFormatIncorrect"),this._getMessage("alphanumericWithSpacesNameValidator",t,i));return!0},doTest:function(t,e){if(t){for(;Array.isArray(t);)t=t[0];this.__static__.ALPHANUMERIC_WITH_SPACES_NAME_REGEX.lastIndex=0;var i=this.__static__.ALPHANUMERIC_WITH_SPACES_NAME_REGEX.test(t);if(!i)return!1}return!0}},lengthValidator:{validate:function(t,i){if(!this.lengthValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.lengthSummary"),this._getMessage("lengthValidator",this.config.maxLength,i));return!0},doTest:function(t,e){return!(t&&t.length>this.config.maxLength)}},baseParametersValidator:{validate:function(t,i){if(!this.baseParametersValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.baseUriValidatorSummary"),this._getMessage("baseParametersValidator",t,i));return!0},doTest:function(t,e){if(t){this.__static__.BASE_PARAMETERS_REGEX.lastIndex=0;var i=this.__static__.BASE_PARAMETERS_REGEX.test(t);if(!i)return!1}return!0}},localURIValidator:{validate:function(t,i){if(!this.localURIValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("connectors.rest.test.localuriValidatorSummary"),this._getMessage("localURIValidator",t,i));return!0},doTest:function(t,e){if(t){this.__static__.LOCAL_URI_REGEX.lastIndex=0;var i=this.__static__.LOCAL_URI_REGEX.test(t);if(!i)return!1}return!0}},urlValidator:{validate:function(t,i){if(!this.urlValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.invalidUrl"));return!0},doTest:function(t,e){if(t){this.__static__.URL_REGEX.lastIndex=0;var i=this.__static__.URL_REGEX.test(t);if(!i)return!1}return!0}},ramlMapValueValidator:{validate:function(t,i){if(!this.ramlMapValueValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.ramlMapValueSummary"),this._getMessage("ramlMapValueValidator",t,i));return!0},doTest:function(t,e){if(t){this.__static__.RAML_MAP_VALUE_REGEX.lastIndex=0;var i=this.__static__.RAML_MAP_VALUE_REGEX.test(t);if(i)return!1}return!0}},bundlesLanguageTagValidator:{validate:function(t,i){if(!this.bundlesLanguageTagValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.bundlesLanguageTagFormatIncorrect"),this._getMessage("bundlesLanguageTagValidator",t,i));return!0},doTest:function(t,e){if(t){this.__static__.BUNDLES_LANGUAGE_TAG_REGEX.lastIndex=0;var i=this.__static__.BUNDLES_LANGUAGE_TAG_REGEX.test(t);if(!i)return!1}return!0}},bundlesLanguageTagNotDefaultValidator:{validate:function(t,i){if(!this.bundlesLanguageTagNotDefaultValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.bundlesLanguageTagFormatIncorrect"),this._getMessage("bundlesLanguageTagNotDefaultValidator",t,i));return!0},doTest:function(t,e){return!t||(Array.isArray(t)&&(t=t[0]),"default"!==t)}},testerQnAMatchThresholdValidator:{validate:function(t,i){if(!this.testerQnAMatchThresholdValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.testerQnAMatchThresholdFormatIncorrect"),this._getMessage("testerQnAMatchThresholdValidator",t,i));return!0},doTest:function(t,e){if(t){this.__static__.TESTER_QNA_MATCH_THRESHOLD_REGEX.lastIndex=0;var i=this.__static__.TESTER_QNA_MATCH_THRESHOLD_REGEX.test(t);if(!i)return!1}return!0}},configParameterNameValidator:{validate:function(t,i){if(!this.configParameterNameValidator.doTest(t,i))throw new oj.ValidatorError(e.translate("general.validator.summary.configParameterNameFormatIncorrect"),this._getMessage("configParameterNameValidator",t,i));return!0},doTest:function(t,e){if(t){this.__static__.TESTER_CONFIG_PARAMETER_NAME_REGEX.lastIndex=0;var i=this.__static__.TESTER_CONFIG_PARAMETER_NAME_REGEX.test(t);if(!i)return!1}return!0}},register:function(t,e){var i=this,n=_.extend({messageSummary:function(){return"???"},messageDetail:function(){return"???"},validate:function(t){return!0}},e),s={_template:void 0,createValidator:function(t){this._template||(this._template={},this._template.Init=function(t){this._options=t},this._template.validate=function(t){var e=function(t,e){return t._options&&t._options[e]?ko.unwrap(t._options[e]):n[e].apply(t)},s=!0;if("string"==typeof t&&t.length>0){try{s=n.validate.call(this,t)}catch(t){i.warn("JET registered validate:",t),s=!1}if(s===!1)throw new oj.ValidatorError(e(this,"messageSummary"),e(this,"messageDetail"))}return!0},this._template.getHint=function(){return null});var e=$.extend(!0,{},this._template);return e._options=t,e}};oj.Validation.validatorFactory(t,s)},getValidatorsToRegister:function(){var t=this;return[{type:"mobLength",config:{messageSummary:function(){return e.translate("general.tooLong.summary")},messageDetail:function(){return e.translate("general.tooLong.detail")},validate:function(t){if("string"==typeof t&&t.length>0){var e=i.length(t,this._options&&"bytes"===ko.unwrap(this._options.mode),!0);if(e>(this._options&&this._options.max?ko.unwrap(this._options.max):512))return!1}return!0}}},{type:"mobDisplayName",config:{messageSummary:function(){return e.translate("general.validator.summary.nameFormatIncorrect")},messageDetail:function(){return e.translate("general.validator.detail.displayName")},validate:t.displayNameValidator.doTest}},{type:"mobName",config:{messageSummary:function(){return e.translate("general.validator.summary.nameFormatIncorrect")},messageDetail:function(){return e.translate("general.validator.detail.name")},validate:t.nameValidator.doTest}},{type:"mobVersion",config:{messageSummary:function(){return e.translate("general.validator.summary.versionFormatIncorrect")},messageDetail:function(){return e.translate("general.validator.detail.version")},validate:t.versionValidator.doTest}},{type:"mobResourceName",config:{messageSummary:function(){return e.translate("general.validator.summary.nameFormatIncorrect")},messageDetail:function(){return e.translate("general.validator.detail.name")},validate:t.resourceNameValidator.doTest}},{type:"mobShortDescription",config:{messageSummary:function(){return e.translate("general.validator.summary.mandatoryField")},messageDetail:function(){return e.translate("general.validator.detail.shortDescription")},validate:t.apiShortDescriptionValidator.doTest}},{type:"mobFieldName",config:{messageSummary:function(){return e.translate("general.validator.summary.nameFormatIncorrect")},messageDetail:function(){return e.translate("general.validator.detail.name")},validate:t.fieldNameValidator.doTest}},{type:"mobCharLength",config:{messageSummary:function(){return e.translate("general.validator.summary.lengthSummary")},messageDetail:function(){return e.translate("general.validator.detail.length",[this._options&&this._options.maxLength?ko.unwrap(this._options.maxLength):t.config.maxLength])},validate:function(e){return!("string"==typeof e&&e.length>0&&e.length>(this._options&&this._options.maxLength?ko.unwrap(this._options.maxLength):t.config.maxLength))}}},{type:"mobBaseParameters",config:{messageSummary:function(){return e.translate("general.validator.summary.baseUriValidatorSummary")},messageDetail:function(){return e.translate("general.validator.detail.baseUriValidator")},validate:t.baseParametersValidator.doTest}}]}});return new o}),define("bots.package.shell/ui.components",["module","mcs.js.framework/view.components","bots.enums","bots.facade","bots.i18n","bots.package.shell/validators","ojs/ojcomponents"],function(t,e,i,n,s,o){var a=e.extend({module:t,name:"UiComponents"},{__static__:{BOTS_Z_ORDER_CONTAINER:"#bots-zorder-container",BOTS_FULLPAGE_POPUP_CONTAINER:"#bots-fullpage-popup-container",DA_FULLPAGE_POPUP_CONTAINER:"#da-fullpage-popup-container"},deps:{i18n:s,facade:n},UiComponents:function(t){this._super(t)},initModule:function(t){return!!this._super(t)&&(this.registerBindings(),void this.registerValidators())},registerBindings:function(){var t=this;$.fn.botsFloatOver=$.fn.botsFloatOver||function(e){if("string"==typeof e)switch(e){case"open":return this.trigger("botsFloatOverOpen"),this.appendTo(t.__static__.BOTS_Z_ORDER_CONTAINER),this;case"close":return this.appendTo("#botsFloatOverDock_"+this.attr("id")),this.trigger("botsFloatOverClose"),this;case"isOpen":return this.parents(t.__static__.BOTS_Z_ORDER_CONTAINER).length>0;default:t.error("Option not supported!",e)}return this},$.fn.botsFullPagePopup=$.fn.botsFullPagePopup||function(e,n){var o,a=this,r="string"==typeof e?e:e.option,l="object"==typeof e?e.module:null,d=function(e){require("bots.package.shell/context.header").pushContextView(o),a.trigger("botsFullPagePopupOpen",n),l===i.BotAssetEnum.DA.value?a.appendTo(t.__static__.DA_FULLPAGE_POPUP_CONTAINER):a.appendTo(t.__static__.BOTS_FULLPAGE_POPUP_CONTAINER)},c=function(t){a.appendTo("#botsFullPagePopupDock_"+a.attr("id")),a.trigger("botsFullPagePopupClose"),require("bots.package.shell/context.header").popContextView()};switch("open"===r&&(o=$.extend(!0,{},_.isObject(e)?e.customConfig||{}:{},{templateName:"bots/shell/fullpage.popup.header",bindings:{i18n:s,closeFullpagePopup:c}})),r){case"open":return d(),this;case"close":return c(),this;case"isOpen":return this.parents(t.__static__.BOTS_FULLPAGE_POPUP_CONTAINER).length>0;default:t.error("Option not supported!",r)}return this},$.fn.botsEquiButtonset=$.fn.botsEquiButtonset||function(){var t=this.find("ul.bots-tabs-as-buttonset-nav > li a");t.width(Math.max.apply(Math,t.map(function(){return $(this).width()}).get())).css("text-align","center")}},registerValidators:function(){_.each(o.getValidatorsToRegister(),function(t){o.register(t.type,t.config)})}});return new a}),define("bots.package.view/view",["module","suite.package.view/view","suite.package.permissions/suite.permissions","bots.i18n","bots.ua","bots.facade","bots.router","bots.preferences","suite.package.shell/shell","bots.package.shell/ui.components","bots.config","bots.enums"],function(t,e,i,n,s,o,a,r,l,d,c,u){var h=e.extend({module:t,name:"BotsView"},{__static__:{SKILL_EDITOR_MODULES:["bot","bottester","bundles","components","defectviewer","entities","flows","insights","intents","qna","quality","retrainer","settings","tester"],VIEWS_WITH_TRAINING:["viewBot","viewBotRetrainer","viewDA","viewDARetrainer"]},deps:{i18n:n,ua:s,facade:o,router:a,userPreferences:r,botsConfig:c,uiComponents:d},config:{hotkeys:{},dirtyNavKey:"saveModel.dirtyNavigation",pendingNavKey:"saveModel.pendingNavigation",fullReloadOnBotChange:!1,listenForBotAttributesChange:!1,lightweight:!1,notBotCentric:!1},bindings:{i18n:n,ua:s,BotsEnums:u,userPreferencesObservable:void 0,userPreferences:{func:function(){return ko.computed({read:function(){var t=this._computeModuleName();return this.bindings.userPreferencesObservable=this.deps.userPreferences.getModuleObservable(t),this.bindings.userPreferencesObservable()},write:function(t){this.bindings.userPreferencesObservable(t)},owner:this,deferEvaluation:!0})}},botId:{func:ko.observable,args:[null]},bot:{func:ko.observable,args:[{}]},isDraftVersion:{func:ko.computed,args:[function(){var t=require("bots.package.shell/context.header");return!(this.isSkillEditorModule()&&!this.config.notBotCentric||this===t&&_.contains(this.__static__.VIEWS_WITH_TRAINING,t.bindings.botsContextView()))||_.unwrap2(this.bindings.bot,"status")===u.LifeCycleManagementEnum.DRAFT},this,{deferEvaluation:!0}]}},BotsView:function(t,e){this._super(t,e),this.renderView=_.wrap(this.renderView,_.bind(function(t,e){this.deps.userPreferences.loadAll().always(function(){t(e)})},this))},_computeModuleName:function(){return 0===this.__fqclassname__.indexOf("bots.package.")?this.__fqclassname__.split(".")[2]:""},initModule:function(t){if(!this._super(t))return!1;if(!this.config.lightweight){var e={BOT_SELECT:this.botSelectEventHandler,LOAD_BOT:this.loadBotEventHandler};(this.config.listenForBotAttributesChange||this.isSkillEditorModule())&&(e.BOT_ATTRIBUTES_CHANGE=this.botAttributesChangeEventHandler),this.listen(e)}return!0},loadModule:function(t){return!!this._super(t)&&(this.loadGlobalData(t),!0)},reloadModule:function(t){return!!this._super(t)&&(this.loadGlobalData(t),!0)},botSelectEventHandler:function(t){if(this.isVisible()){var e=this.bindings.botId(),i=(t.selectedBot||{}).id;e?e!==i&&(this._transition(this.config.transition.bot),this.config.fullReloadOnBotChange?this.isHidden=!0:this.reloadModule(t)):(this.bindings.botId(i),this.setBot(t.selectedBot))}},loadBotEventHandler:function(t){200===t.status&&t.data&&this.bindings.botId.peek()===t.data.id&&this.setBot(t.data)},botAttributesChangeEventHandler:function(t){var e=this;_.each(t,function(t,i){e.bindings.bot().hasOwnProperty(i)&&ko.isObservable(e.bindings.bot()[i])&&e.bindings.bot()[i](t)})},_addNonNullAttributes:function(t){var e=$.extend(!0,{},t);return e.hasOwnProperty("category")||(e.category=""),e},setBot:function(t){t&&(t=this._addNonNullAttributes(t),_.isEmpty(this.bindings.bot())?this.bindings.bot(ko.mapping.fromJS(t)):ko.mapping.fromJS(t,this.bindings.bot()))},loadGlobalData:function(t){var e=t&&t.selectedBot||this.deps.botsConfig.getCurrentBot()||{};this.bindings.botId(e.id),this.setBot(e)},notify:function(t,e){return e&&e.actionSpinner&&e.autoSave&&l.enableAutosaveIndicator(e.autoSave),this._super(t,e)},isSideMenuOpen:function(t){return l.isSideMenuOpen(t)},isPending:function(){return!1},isValid:function(){return!0},isSkillEditorModule:function(){return _.contains(this.__static__.SKILL_EDITOR_MODULES,this._computeModuleName())}});return h}),define("bots.package.view/dialog",["module","mcs.js.framework/view.dialog","bots.package.view/view","bots.package.shell/ui.components","bots.config"],function(t,e,i,n,s){
var o=e(i).extend({module:t,name:"BotsDialog"},{deps:{uiComponents:n,botsConfig:s},BotsDialog:function(t,e,i){this._super(t,e,i)},buildDefaultAction:function(t){this._super(t),t.on("ojopen",this.onOpen)},onOpen:function(t,e){}});return o}),define("bots.package.view/displayname.name.autofiller",["module","mcs.js.framework/class","mcs.js.framework/defer","bots.package.view/view","bots.package.shell/validators"],function(t,e,i,n,s){var o=e.extend({module:t,name:"DisplayNameNameAutoFiller"},{config:{},DisplayNameNameAutoFiller:function(t){this.config=_.extend(this.config,t||{})},displayName:i({func:ko.observable,args:[""]}),displayNamePreview:i({func:ko.observable,args:[""]}),name:i({func:ko.observable,args:[""]}),nameHasFocus:i({func:ko.observable,args:[!1]}),nameAutoFillTrigger:i({func:ko.computed,args:[function(){if(this.displayNamePreview()){var t=s.displayNameToNameFilter(this.displayNamePreview());return this.name()||this.name(""),this.nameAutoFillMode&&this.name(t),!0}}]}),namePreview:i({func:function(){var t=this,e=ko.observable("");return e.subscribe(function(e){e&&0!==e.length?t.nameHasFocus()&&(t.nameAutoFillMode=e===s.displayNameToNameFilter(t.displayNamePreview())):t.nameAutoFillMode=!0}),e}}),nameAutoFillMode:!0,reset:function(){this.displayName(""),this.displayNamePreview(""),this.name(""),this.namePreview(""),this.nameHasFocus(!1),this.nameAutoFillMode=!0}});return o}),define("bots.package.view/new.bot",["module","bots.i18n","bots.enums","bots.package.shell/validators","bots.package.view/dialog","bots.package.view/displayname.name.autofiller"],function(t,e,i,n,s,o){var a,r=s.extend({module:t,name:"NewBotPopup"},{__static__:{CREATE_BOT:"new",CREATE_CLONE_VERSION:"newCloneVersion",CREATE_TITLE_RBKEY_MAP:{new:"bots.new",newCloneVersion:"bots.newCloneVersion"},DEFAULT_VERSION:"1.0"},config:{type:"ojDialog"},bindings:{botsValidators:n,createTitleRBKey:{func:function(){return ko.observable(this.__static__.CREATE_BOT_TITLE_RBKEY)}},displayNameNameAutoFiller:{func:function(){return new o}},nameReadOnly:{func:ko.observable},nameCustomMessage:{func:ko.observableArray,args:[[]]},displayNameCustomMessage:{func:ko.observableArray,args:[[]]},version:{func:ko.observable},versionCustomMessage:{func:ko.observableArray,args:[[]]},description:{func:ko.observable},createBot:function(){this.deps.uiComponents.validateFields($(this.config.baseElement),!1,!1,!1)&&(this.enableDefaultButton(!1),this._createBot())}},NewBotPopup:function(t){this._super(t)},renderView:function(t){var e=this;this._super(t),$(this.config.baseElement).on("ojclose",function(t,i){e.config.createModeToUse=void 0,e.config.nameToUse=void 0,e.config.displayNameToUse=void 0,e.config.descriptionToUse=void 0,e.bindings.displayNameNameAutoFiller.reset()})},resetFields:function(t){this.bindings.createTitleRBKey(this.__static__.CREATE_TITLE_RBKEY_MAP[this.config.createModeToUse||this.__static__.CREATE_BOT]),this.bindings.displayNameNameAutoFiller.name(this.config.nameToUse||""),this.bindings.displayNameNameAutoFiller.displayName(this.config.displayNameToUse||""),this.bindings.nameReadOnly(!!this.config.nameToUse),this.bindings.version(this.config.createModeToUse===this.__static__.CREATE_CLONE_VERSION?"":this.__static__.DEFAULT_VERSION),this.bindings.description(this.config.descriptionToUse||""),this.bindings.nameCustomMessage([]),this.bindings.displayNameCustomMessage([]),this.bindings.versionCustomMessage([]),this._super(t)},open:function(){return this.config.resetFieldsOnOpen=!0,n.botsSkillNameValidatorContext={},this._super(),a=$.Deferred()},_createBot:function(){var t,e;switch(this.config.createModeToUse||this.__static__.CREATE_BOT){case this.__static__.CREATE_BOT:t={CREATE_BOT:{data:{name:this.bindings.displayNameNameAutoFiller.name(),displayName:this.bindings.displayNameNameAutoFiller.displayName(),version:this.bindings.version(),description:this.bindings.description()||"",type:i.BotAssetEnum.SKILL.value}}},e="bots.bot.createBotProgress";break;case this.__static__.CREATE_CLONE_VERSION:t={CLONE_VERSION:{data:{id:this.config.botId,name:this.bindings.displayNameNameAutoFiller.name(),displayName:this.bindings.displayNameNameAutoFiller.displayName(),version:this.bindings.version(),description:this.bindings.description()||""}}},e="bots.bot.createNewVersionProgress"}this.notify(t,{actionSpinner:!0,autoSave:e}).always(_.bind(function(t){var e,i=this;if(t.status>201)if(t.status>=400&&t.status<500){var n=this.processCreateCloneErrors(t,this.bindings,this.config);this.enableDefaultButton(!0),n?_.defer(function(){setTimeout(function(){$(n).focus()},200)}):(this.close(),a.reject(t),a=void 0)}else this.close(),this.deps.messaging.showI18nError(t,"bots.bot.errors.createOrCloneBot"),a.reject(t),a=void 0;else e=i.config.createModeToUse===i.__static__.CREATE_CLONE_VERSION?t.data.bot:t.data,this.close(),this.deps.router.navigateBot(e.id,"intents"),i.config.createModeToUse===i.__static__.CREATE_CLONE_VERSION&&t.data&&t.data.bot&&_.isArray(t.data.diagnostics)&&_.defer(function(){_.each(t.data.diagnostics,function(e){i.deps.messaging.showMessage(i.deps.i18n.translate("bots.bot.perNewVersioned",t.data.bot.displayName,t.data.bot.version,i.deps.messaging.formatSentence(e.message)),{type:i.deps.messaging.__static__.WARNING,doNotClear:!0})})}),a.resolve(t),a=void 0},this))},onOpen:function(t,e){var i=this;_.defer(function(){var t;switch(i.config.createModeToUse||i.__static__.CREATE_BOT){case i.__static__.CREATE_BOT:t=i.config.displayNameInputElement;break;case i.__static__.CREATE_CLONE_VERSION:t=i.config.versionInputElement}$(t).focus()})},processCreateCloneErrors:function(t,i,n){var s,o=this.deps.messaging.lookupI18nError(t,"bots.bot.errors.createOrCloneBot"),a=o.code,r=o.message;switch(a){case"53165":i.displayNameCustomMessage([{summary:e.translate("bots.messages.botDisplayNameAlreadyExists"),detail:r,severity:oj.Message.SEVERITY_TYPE.ERROR}]),s=n.displayNameInputElement;break;case"53164":i.nameCustomMessage([{summary:e.translate("bots.messages.botNameAlreadyExists"),detail:r,severity:oj.Message.SEVERITY_TYPE.ERROR}]),s=n.nameInputElement;break;case"53163":case"53137":case"50225":i.versionCustomMessage([{summary:e.translate("bots.messages.botVersionAlreadyExists"),detail:r,severity:oj.Message.SEVERITY_TYPE.ERROR}]),s=n.versionInputElement;break;case"50382":i.displayNameCustomMessage([{summary:e.translate("bots.messages.botDisplayNameAlreadyExistsInStore"),detail:r,severity:oj.Message.SEVERITY_TYPE.ERROR}]),s=n.displayNameInputElement;break;case"50353":i.nameCustomMessage([{summary:e.translate("bots.messages.botNameAlreadyExistsInStore"),detail:r,severity:oj.Message.SEVERITY_TYPE.ERROR}]),s=n.nameInputElement;break;default:this.deps.messaging.showError(r)}return s}});return r}),define("bots.package.view/new.da",["module","bots.i18n","bots.enums","bots.package.shell/validators","bots.package.view/dialog","bots.package.view/displayname.name.autofiller"],function(t,e,i,n,s,o){var a,r=s.extend({module:t,name:"NewDAPopup"},{__static__:{CREATE_BOT:"new",CREATE_BLANK_VERSION:"newBlankVersion",CREATE_CLONE_VERSION:"newCloneVersion",CREATE_TITLE_RBKEY_MAP:{new:"da.new",newBlankVersion:"da.newBlankVersion",newCloneVersion:"da.newCloneVersion"}},config:{type:"ojDialog"},bindings:{botsValidators:n,createTitleRBKey:{func:function(){return ko.observable(this.__static__.CREATE_BOT_TITLE_RBKEY)}},name:{func:ko.observable},displayNameNameAutoFiller:{func:function(){return new o}},nameReadOnly:{func:ko.observable},nameCustomMessage:{func:ko.observableArray,args:[[]]},displayNameCustomMessage:{func:ko.observableArray,args:[[]]},description:{func:ko.observable},createBot:function(){this.deps.uiComponents.validateFields($(this.config.baseElement),!1,!1,!1)&&(this.enableDefaultButton(!1),this._createBot())}},NewDAPopup:function(t){this._super(t)},renderView:function(t){var e=this;this._super(t),$(this.config.baseElement).on("ojclose",function(t,i){e.config.createModeToUse=void 0,e.config.nameToUse=void 0,e.bindings.displayNameNameAutoFiller.reset()})},resetFields:function(t){this.bindings.createTitleRBKey(this.__static__.CREATE_TITLE_RBKEY_MAP[this.config.createModeToUse||this.__static__.CREATE_BOT]),this.bindings.displayNameNameAutoFiller.name(this.config.nameToUse||""),this.bindings.displayNameNameAutoFiller.displayName(this.config.nameToUse||""),this.bindings.nameReadOnly(!!this.config.nameToUse),this.bindings.description(""),this.bindings.nameCustomMessage([]),this._super(t)},open:function(){return this.config.resetFieldsOnOpen=!0,n.botsSkillNameValidatorContext={},this._super(),a=$.Deferred()},_createBot:function(){var t,n;switch(this.config.createModeToUse||this.__static__.CREATE_BOT){case this.__static__.CREATE_BOT:case this.__static__.CREATE_BLANK_VERSION:t={CREATE_DA:{data:{name:this.bindings.displayNameNameAutoFiller.name(),displayName:this.bindings.displayNameNameAutoFiller.displayName(),description:this.bindings.description()||"",type:i.BotAssetEnum.DA.value}}},n="da.bot.createBotProgress";break;case this.__static__.CREATE_CLONE_VERSION:t={CLONE_DA:{data:{id:this.config.botId,name:this.bindings.displayNameNameAutoFiller.name(),displayName:this.bindings.displayNameNameAutoFiller.displayName(),description:this.bindings.description()||""}}},n="da.bot.createNewVersionProgress"}this.notify(t,{actionSpinner:!0,autoSave:n}).always(_.bind(function(t){var i,n=this;if(t.status>201)if(t.status>=400&&t.status<500){var s,o=this.deps.messaging.lookupI18nError(t,"da.bot.errors.createBot"),r=o.message;"53165"===o.code?(this.bindings.displayNameCustomMessage([{summary:e.translate("da.messages.daDisplayNameAlreadyExists"),detail:r,severity:oj.Message.SEVERITY_TYPE.ERROR}]),s=this.config.displayNameInputElement):"53164"===o.code&&(this.bindings.nameCustomMessage([{summary:e.translate("da.messages.daNameAlreadyExists"),detail:r,severity:oj.Message.SEVERITY_TYPE.ERROR}]),s=this.config.nameInputElement),this.enableDefaultButton(!0),s?_.defer(function(){setTimeout(function(){$(s).focus()},200)}):(this.resetFields(),this.close(),this.deps.messaging.showI18nError(t,"da.bot.errors.cloneBot"),clonePromise.reject(t),clonePromise=void 0)}else this.resetFields(),this.close(),this.deps.messaging.showI18nError(t,"da.bot.errors.createBot"),a.reject(t),a=void 0;else i=n.config.createModeToUse===n.__static__.CREATE_CLONE_VERSION?t.data.bot:t.data,this.close(),this.deps.router.navigateDA(i.id,"skills"),a.resolve(t),a=void 0},this))}});return r}),define("bots.package.view/delete.bot",["module","bots.package.view/dialog","bots.i18n"],function(t,e,i){var n,s=e.extend({module:t,name:"DeleteBotPopup"},{config:{type:"ojDialog"},bindings:{botDisplayName:{func:ko.observable},botVersion:{func:ko.observable},deleteBot:function(){this.deps.uiComponents.validateFields($(this.config.baseElement))&&(this.enableDefaultButton(!1),this._deleteBot())}},DeleteBotPopup:function(t){this._super(t)},open:function(){return this.bindings.botDisplayName(this.config.botDisplayName),this.bindings.botVersion(this.config.botVersion),this._super(),n=$.Deferred()},_deleteBot:function(){this.notify({TRASH_BOT:{data:{id:this.config.botId}}},{actionSpinner:!0}).always(_.bind(function(t){this.resetFields(),this.close(),t.status>204?(this.deps.messaging.showI18nError(t,"bots.bot.errors.deleteBot",this.config.botDisplayName),n.reject(t)):n.resolve(t),n=void 0},this))}});return s}),define("bots.package.da/delete.bot",["module","bots.package.view/dialog","bots.i18n"],function(t,e,i){var n,s=e.extend({module:t,name:"DeleteBotPopup"},{config:{type:"ojDialog"},bindings:{botDisplayName:{func:ko.observable},deleteBot:function(){this.deps.uiComponents.validateFields($(this.config.baseElement))&&(this.enableDefaultButton(!1),this._deleteBot())}},DeleteBotPopup:function(t){this._super(t)},open:function(){return this.bindings.botDisplayName(this.config.botDisplayName),this._super(),n=$.Deferred()},_deleteBot:function(){this.notify({TRASH_DA:{data:{id:this.config.botId}}},{actionSpinner:!0}).always(_.bind(function(t){this.resetFields(),this.close(),t.status>204?(this.deps.messaging.showI18nError(t,"da.bot.errors.deleteBot"),n.reject(t)):n.resolve(t),n=void 0},this))}});return s}),define("bots.package.view/clone.bot",["module","bots.i18n","bots.package.shell/validators","bots.package.view/dialog","bots.package.view/displayname.name.autofiller"],function(t,e,i,n,s){var o,a=n.extend({module:t,name:"CloneBotPopup"},{config:{type:"ojDialog"},bindings:{botsValidators:i,newDisplayNameNameAutoFiller:{func:function(){return new s}},version:{func:ko.observable},nameCustomMessage:{func:ko.observableArray,args:[[]]},displayNameCustomMessage:{func:ko.observableArray,args:[[]]},versionCustomMessage:{func:ko.observableArray,args:[[]]},description:{func:ko.observable},openAfterClone:{func:ko.observable,args:[!1]},cloneBot:function(){this.deps.uiComponents.validateFields($(this.config.baseElement))&&(this.enableDefaultButton(!1),this._cloneBot())}},CloneBotPopup:function(t){this._super(t)},resetFields:function(t){this.bindings.newDisplayNameNameAutoFiller.name(""),this.bindings.nameCustomMessage([]),this.bindings.newDisplayNameNameAutoFiller.displayName(""),this.bindings.displayNameCustomMessage([]),this.bindings.version(""),this.bindings.versionCustomMessage([]),this.bindings.description(""),this.bindings.openAfterClone(!1),this._super(t)},open:function(t,e){return this.config.resetFieldsOnOpen=!1,e&&(this.bindings.newDisplayNameNameAutoFiller.name(""),this.bindings.newDisplayNameNameAutoFiller.displayName(""),this.bindings.version(e.version),this.bindings.description(e.description)),i.botsSkillNameValidatorContext={currentName:this.config.botName,currentDisplayName:this.config.botDisplayName,currentNamespace:this.config.botNamespace},this._super(),o=$.Deferred()},_cloneBot:function(){this.notify({CLONE_BOT:{data:{id:this.config.botId,name:this.bindings.newDisplayNameNameAutoFiller.name(),displayName:this.bindings.newDisplayNameNameAutoFiller.displayName(),version:this.bindings.version(),description:this.bindings.description()||""}}},{actionSpinner:!0,autoSave:"bots.bot.cloneBotProgress"}).always(_.bind(function(t){var e=this;if(t.status>201)if(t.status>=400&&t.status<500){var i=require("bots.package.shell/context.header").bindings.newBotPopup.processCreateCloneErrors(t,this.bindings,this.config);this.enableDefaultButton(!0),i?_.defer(function(){setTimeout(function(){$(i).focus()},200)}):(this.close(),o.reject(t),o=void 0)}else this.close(),this.deps.messaging.showI18nError(t,"bots.bot.errors.createOrCloneBot"),o.reject(t),o=void 0;else{var n=this.bindings.openAfterClone.peek();this.close(),n&&this.deps.router.navigateBot(t.data.bot.id,"intents"),t.data&&t.data.bot&&_.isArray(t.data.diagnostics)&&(n?_.defer(function(){_.each(t.data.diagnostics,function(i){e.deps.messaging.showMessage(e.deps.i18n.translate("bots.bot.perCloned",t.data.bot.displayName,t.data.bot.version,e.deps.messaging.formatSentence(i.message)),{type:e.deps.messaging.__static__.WARNING,doNotClear:!0})})}):_.each(t.data.diagnostics,function(i){e.deps.messaging.showWarning(e.deps.i18n.translate("bots.bot.perCloned",t.data.bot.displayName,t.data.bot.version,e.deps.messaging.formatSentence(i.message)))})),o.resolve(t),o=void 0}},this))},onClose:function(t,e){this.resetFields(),this.bindings.newDisplayNameNameAutoFiller.reset()},onOpen:function(t,e){var i=this;_.defer(function(){$(i.config.displayNameInputElement).focus()})}});return a}),define("bots.package.da/clone.bot",["module","bots.package.shell/validators","bots.package.view/dialog","bots.i18n","bots.package.view/displayname.name.autofiller"],function(t,e,i,n,s){var o,a=i.extend({module:t,name:"CloneDAPopup"},{config:{type:"ojDialog"},bindings:{botsValidators:e,newDisplayNameNameAutoFiller:{func:function(){return new s}},nameCustomMessage:{func:ko.observableArray,args:[[]]},displayNameCustomMessage:{func:ko.observableArray,args:[[]]},description:{func:ko.observable},openAfterClone:{func:ko.observable,args:[!1]},uniquenNameValidator:{func:function(){var t=this;return{validate:function(e,i){if(!t.config.parentView.validateDAName(e))throw new oj.ValidatorError(n.translate("da.cloneDADialog.newName.alreadyExists.summary"),n.translate("da.cloneDADialog.newName.alreadyExists.detail"))}}}},uniqueDisplayNameValidator:{func:function(){var t=this;return{validate:function(e,i){if(!t.config.parentView.validateDADisplayName(e))throw new oj.ValidatorError(n.translate("da.cloneDADialog.newDisplayName.alreadyExists.summary"),n.translate("da.cloneDADialog.newDisplayName.alreadyExists.detail"))}}}},cloneBot:function(){this.deps.uiComponents.validateFields($(this.config.baseElement))&&(this.enableDefaultButton(!1),this._cloneBot())}},CloneDAPopup:function(t){this._super(t)},resetFields:function(t){this.bindings.newDisplayNameNameAutoFiller.name(""),this.bindings.newDisplayNameNameAutoFiller.displayName(""),this.bindings.description(""),this.bindings.openAfterClone(!1),this.bindings.newDisplayNameNameAutoFiller.reset(),this._super(t)},open:function(t,e){return this.config.resetFieldsOnOpen=!1,e&&(this.bindings.newDisplayNameNameAutoFiller.name(""),this.bindings.newDisplayNameNameAutoFiller.displayName(""),this.bindings.description(e.description)),this._super(),o=$.Deferred()},_cloneBot:function(){this.notify({CLONE_DA:{data:{id:this.config.botId,name:this.bindings.newDisplayNameNameAutoFiller.name(),displayName:this.bindings.newDisplayNameNameAutoFiller.displayName(),description:this.bindings.description()}}},{actionSpinner:!0,autoSave:"da.bot.cloneBotProgress"}).always(_.bind(function(t){var e=this;if(t.status>201)if(t.status>=400&&t.status<500){var i,s=this.deps.messaging.lookupI18nError(t,"da.bot.errors.cloneBot"),a=s.message;"53165"===s.code?(this.bindings.displayNameCustomMessage([{summary:n.translate("da.messages.daDisplayNameAlreadyExists"),detail:a,severity:oj.Message.SEVERITY_TYPE.ERROR}]),i=this.config.displayNameInputElement):"53164"===s.code&&(this.bindings.nameCustomMessage([{summary:n.translate("da.messages.daNameAlreadyExists"),detail:a,severity:oj.Message.SEVERITY_TYPE.ERROR}]),i=this.config.nameInputElement),this.enableDefaultButton(!0),i?_.defer(function(){setTimeout(function(){$(i).focus()},200)}):(this.resetFields(),this.close(),this.deps.messaging.showI18nError(t,"da.bot.errors.cloneBot"),clonePromise.reject(t),clonePromise=void 0)}else this.resetFields(),this.close(),this.deps.messaging.showI18nError(t,"da.bot.errors.cloneBot"),o.reject(t),o=void 0;else{var r=this.bindings.openAfterClone.peek();this.resetFields(),this.bindings.nameCustomMessage([]),this.close(),t.data&&t.data.bot&&(r&&this.deps.router.navigateDA(t.data.bot.id,"skills"),_.isArray(t.data.diagnostics)&&(r?_.defer(function(){_.each(t.data.diagnostics,function(i){e.deps.messaging.showMessage(e.deps.i18n.translate("da.bot.perCloned",t.data.bot.name,e.deps.messaging.formatSentence(i.message)),{type:e.deps.messaging.__static__.WARNING,doNotClear:!0})})}):_.each(t.data.diagnostics,function(i){e.deps.messaging.showWarning(e.deps.i18n.translate("da.bot.perCloned",t.data.bot.name,e.deps.messaging.formatSentence(i.message)))}))),o.resolve(t),o=void 0}},this))}});return a}),define("bots.package.view/publish.bot",["module","suite.package.util/messaging","bots.package.view/dialog","bots.i18n","bots.enums"],function(t,e,i,n,s){var o,a=i.extend({module:t,name:"PublishBotPopup"},{config:{type:"ojDialog"},bindings:{botDisplayName:{func:ko.observable},botVersion:{func:ko.observable},botLoggingOnWarning:{func:ko.observable},publishBot:function(){this.deps.uiComponents.validateFields($(this.config.baseElement))&&(this.enableDefaultButton(!1),this._publishBot())}},PublishBotPopup:function(t){this._super(t)},_loadRuntimeSettings:function(t){return this.notify({LOAD_BOT_SETTINGS:{data:{botId:t}}},{loadingSpinner:!0})},open:function(){var t=_.bind(this._super,this);return o=$.Deferred(),this._loadRuntimeSettings(this.config.botId).always(_.bind(function(i){if(200===i.status){i.data.settings;i.data.intentResultHistoryEnabled||i.data.conversationHistoryEnabled||i.data.qnAResultHistoryEnabled?this.bindings.botLoggingOnWarning(n.translate("bots.publishBotDialog.loggingOnWarning")):this.bindings.botLoggingOnWarning(""),this.bindings.botDisplayName(this.config.botDisplayName),this.bindings.botVersion(this.config.botVersion),t()}else e.showI18nError(_.filter(arguments,function(t){return t.status>200}),"settings.general.errors.loadRuntimeSettings",[this.config.botDisplayName]),o.reject(i)},this)),o},_publishBot:function(){this.notify({PUBLISH_BOT:{data:{id:this.config.botId,status:this.config.botStatus}}},{actionSpinner:!0}).always(_.bind(function(t){this.resetFields(),this.close(),t.status>204?(this.deps.messaging.showI18nError(t,"bots.bot.errors.publishBot"),o.reject(t)):(this.deps.messaging.showConfirmation(this.deps.i18n.translate("bots.bot.published",this.config.botDisplayName,this.config.botVersion)),this.notify({BOT_ATTRIBUTES_CHANGE:{data:{status:this.config.botStatus}}}),o.resolve(t)),o=void 0},this))}});return a}),define("bots.package.view/export.bot.logs",["module","bots.package.view/dialog","bots.i18n"],function(t,e,i){var n,s=e.extend({module:t,name:"ExportBotLogsPopup"},{__static__:{DEFAULT_TIME_PERIOD:"7d",DEFAULT_LIMIT:2147483647},config:{type:"ojDialog"},bindings:{i18n:i,timePeriodSelection:{func:ko.observable,args:[]},logSelection:{func:ko.observable,args:["bot"]},botName:"",downloadBotLogs:function(){this.enableDefaultButton(!1);var t=this,e=_.find(this.bindings.timePeriods,function(e){return e.label===t.bindings.timePeriodSelection()[0]});this._downloadBotLogs(this.bindings.botName,this.bindings.logSelection(),this.getSinceISO(e))},timePeriods:[{unit:"m",number:60,label:"60m"},{unit:"h",number:24,label:"24h"},{unit:"d",number:7,label:"7d"},{unit:"d",number:30,label:"30d"},{unit:"d",number:90,label:"90d"},{unit:"mon",number:6,label:"6mon"}]},ExportBotLogsPopup:function(t){this._super(t)},resetFields:function(t){this.bindings.logSelection("bot"),this.bindings.timePeriodSelection([this.__static__.DEFAULT_TIME_PERIOD]),this._super(t)},open:function(){return this.config.resetFieldsOnOpen=!0,this.bindings.botName=_.unwrap2(this.config.bot,"name"),setTimeout(function(){$("#export-logs-type-select-intent").blur()},50),this._super(),n=$.Deferred()},getSinceISO:function(t){var e=new Date,i=new Date(e.getTime());return"d"===t.unit?i.setDate(e.getDate()-t.number):"m"===t.unit?i.setMinutes(e.getMinutes()-t.number):"h"===t.unit?i.setHours(e.getHours()-t.number):"mon"===t.unit&&i.setMonth(e.getMonth()-t.number),i.toISOString()},handleDownload:function(t,e,i){this.resetFields(),this.close(),t.status>204?(this.deps.messaging.showI18nError(t,"bots.bot.errors.exportBotLogs"),n.reject(t)):204===t.status?(this.deps.messaging.showWarning(this.deps.i18n.translate("bots.exportBotLogsDialog.noData",i)),n.resolve(t)):(this.deps.messaging.showConfirmation(this.deps.i18n.translate("bots.exportBotLogsDialog.success",i)),n.resolve(t)),n=void 0},_downloadBotLogs:function(t,e,n){if("bot"===e)this.notify({DOWNLOAD_BOT_LOGS:{data:{botId:_.unwrap2(this.config.bot,"id"),name:t,since:n,format:"csv",limit:this.__static__.DEFAULT_LIMIT}}},{actionSpinner:!0}).always(_.bind(function(i){this.handleDownload(i,e,t)},this));else if("intent"===e)this.notify({DOWNLOAD_INTENT_LOGS:{data:{botId:_.unwrap2(this.config.bot,"id"),name:t,since:n,format:"csv",limit:this.__static__.DEFAULT_LIMIT}}},{actionSpinner:!0}).always(_.bind(function(i){this.handleDownload(i,e,t)},this));else if("qna"===e){var s=_.unwrap2(this.config.bot,"qnas");if(!s||0===s.length)return this.resetFields(),this.close(),void this.deps.messaging.showWarning(i.translate("bots.exportBotLogsDialog.noQnA",_.unwrap2(this.config.bot,"name")));this.notify({DOWNLOAD_QNA_LOGS:{data:{botId:_.unwrap2(this.config.bot,"id"),qnaId:ko.unwrap(_.unwrap2(this.config.bot,"qnas")[0].id),name:t,since:n,format:"csv",limit:this.__static__.DEFAULT_LIMIT}}},{actionSpinner:!0}).always(_.bind(function(i){this.handleDownload(i,e,t)},this))}}});return s}),define("bots.package.da/export.bot.logs",["module","bots.package.view/dialog","bots.i18n"],function(t,e,i){var n,s=e.extend({module:t,name:"ExportBotLogsPopup"},{__static__:{DEFAULT_TIME_PERIOD:"7d"},config:{type:"ojDialog"},bindings:{i18n:i,timePeriodSelection:{func:ko.observable,args:[]},logSelection:{func:ko.observable,args:["bot"]},botName:"",downloadBotLogs:function(){this.enableDefaultButton(!1);var t=this,e=_.find(this.bindings.timePeriods,function(e){return e.label===t.bindings.timePeriodSelection()[0]});this._downloadBotLogs(this.bindings.botName,this.bindings.logSelection(),this.getSinceISO(e))},timePeriods:[{unit:"m",number:60,label:"60m"},{unit:"h",number:24,label:"24h"},{unit:"d",number:7,label:"7d"},{unit:"d",number:30,label:"30d"},{unit:"d",number:90,label:"90d"},{unit:"mon",number:6,label:"6mon"}]},ExportBotLogsPopup:function(t){this._super(t)},resetFields:function(t){this.bindings.logSelection("bot"),this.bindings.timePeriodSelection([this.__static__.DEFAULT_TIME_PERIOD]),this._super(t)},open:function(){return this.config.resetFieldsOnOpen=!0,this.bindings.botName=this.config.bot.name,setTimeout(function(){$("#export-logs-type-select-intent").blur()},50),this._super(),n=$.Deferred()},getSinceISO:function(t){var e=new Date,i=new Date(e.getTime());return"d"===t.unit?i.setDate(e.getDate()-t.number):"m"===t.unit?i.setMinutes(e.getMinutes()-t.number):"h"===t.unit?i.setHours(e.getHours()-t.number):"mon"===t.unit&&i.setMonth(e.getMonth()-t.number),i.toISOString()},handleDownload:function(t,e,i){this.resetFields(),this.close(),t.status>204?(this.deps.messaging.showI18nError(t,"bots.bot.errors.exportBotLogs"),n.reject(t)):204===t.status?(this.deps.messaging.showWarning(this.deps.i18n.translate("bots.exportBotLogsDialog.noData",i)),n.resolve(t)):(this.deps.messaging.showConfirmation(this.deps.i18n.translate("bots.exportBotLogsDialog.success",i)),n.resolve(t)),n=void 0},_downloadBotLogs:function(t,e,n){if("bot"===e)this.notify({DOWNLOAD_BOT_LOGS:{data:{botId:this.config.bot.id,name:t,since:n,format:"csv"}}},{actionSpinner:!0}).always(_.bind(function(i){this.handleDownload(i,e,t)},this));else if("intent"===e)this.notify({DOWNLOAD_INTENT_LOGS:{data:{botId:this.config.bot.id,name:t,since:n,format:"csv"}}},{actionSpinner:!0}).always(_.bind(function(i){this.handleDownload(i,e,t)},this));else if("qna"===e){var s=this.config.bot.qnas;if(!s||0===s.length)return this.resetFields(),this.close(),void this.deps.messaging.showWarning(i.translate("bots.exportBotLogsDialog.noQnA",this.config.bot.name));this.notify({DOWNLOAD_QNA_LOGS:{data:{botId:this.config.bot.id,qnaId:this.config.bot.qnas[0].id,name:t,since:n,format:"csv"}}},{actionSpinner:!0}).always(_.bind(function(i){this.handleDownload(i,e,t)},this))}}});return s}),define("bots.package.view/dataobject",["module","bots.i18n","mcs.js.framework/dataobject","bots.enums"],function(t,e,i,n){var s=[{label:e.translate("filters.events.options.contains"),value:"contains"},{label:e.translate("filters.events.options.matches"),value:"matches"},{label:e.translate("filters.events.options.doesNotContain"),value:"doesNotContain"},{label:e.translate("filters.events.options.doesNotMatch"),value:"doesNotMatch"},{label:e.translate("filters.events.options.beginsWith"),value:"beginsWith"},{label:e.translate("filters.events.options.endsWith"),value:"endsWith"},{label:e.translate("filters.events.options.isNull"),value:"isNull"},{label:e.translate("filters.events.options.isNotNull"),value:"isNotNull"},{label:e.translate("filters.events.options.isOneOf"),value:"isOneOf"},{label:e.translate("filters.events.options.isNot"),value:"isNot"}],o=[{label:e.translate("filters.events.options.isAtLeast"),value:"isAtLeast"},{label:e.translate("filters.events.options.isAtMost"),value:"isAtMost"},{label:e.translate("filters.events.options.isEqual"),value:"isEqual"},{label:e.translate("filters.events.options.isGreaterThan"),value:"isGreaterThan"},{label:e.translate("filters.events.options.isLessThan"),value:"isLessThan"}],a=i.extend({module:t,name:"EventAttribute"},{EventAttribute:function(t){this.attribute=t.attribute?ko.observable([t.attribute]):ko.observable(""),this.criteria=t.criteria?ko.observable([t.criteria]):ko.observable(""),this.compareType=t.compareType?ko.observable(t.compareType):ko.observable(),this.criteriaList=ko.computed(function(){return this.compareType()?"string"===this.compareType()?s:o:[]},this),this.compareValue=t.compareValue?ko.observable(t.compareValue):ko.observable("")},toUpdateJS:function(t){var e=this.toJS();return 0===e.attribute.length?null:{attribute:e.attribute[0],criteria:e.criteria[0],compareType:e.compareType,compareValue:e.compareValue}}}),r=i.extend({module:t,name:"EventFilter"},{EventFilter:function(t){this.selectedEvent=ko.observable(),this.occurrence=ko.observableArray(),this.conditions=ko.observable(),this.attributes=ko.observableArray()},fromJS:function(t){this.__static__.fromJS(t,this),t?(this.selectedEvent(t.selectedEvent),this.occurrence([t.occurrence]),this.conditions(t.conditions),_.each(t.attributes,function(t){var e=new dataobject.EventAttribute(t);this.attributes.push(e)},this)):(this.selectedEvent(null),this.occurrence(["didHappen"]),this.conditions("any"),this.attributes.removeAll())},toUpdateJS:function(t){var e=this.toJS();e.occurrence=e.occurrence[0];var i=[];return _.each(e.attributes,function(t){i.push(t.toUpdateJS())},this),e.attributes=i,e.filterType="events",e}}),l=i.extend({module:t,name:"HttpHeaderDO"},{__static__:{key:"name",lastOrdinal:0,standardHeaders:[{value:"Accept",label:"Accept"},{value:"Accept-Encoding",label:"Accept-Encoding"},{value:"Accept-Language",label:"Accept-Language"},{value:"Connection",label:"Connection"},{value:"Content-Encoding",label:"Content-Encoding"},{value:"Content-Length",label:"Content-Length"},{value:"Content-Type",label:"Content-Type"},{value:"Cookie",label:"Cookie"},{value:"Host",label:"Host"},{value:"Transfer-Encoding",label:"Transfer-Encoding"},{value:"User-Agent",label:"User-Agent"}]},HttpHeaderDO:function(t){this.ordinal=this.__static__.lastOrdinal++,this.name=ko.observableArray([]),this.value=ko.observable(),this.ready=ko.computed(function(){return this.name().length>0&&this.value()},this,{deferEvaluation:!0}),this.getStandardHeaders=ko.computed(function(){var t,e=[];if(this.serviceParent&&this.serviceParent()&&this.serviceParent().monitor())for(var i=0;i<this.serviceParent().properties().length;i++)t=this.serviceParent().properties()[i],t!==this&&Array.isArray(t.name())&&t.name().length>0&&e.push(t.name()[0].toLowerCase());return 0===e.length?this.__static__.standardHeaders:_.filter(this.__static__.standardHeaders,function(t){return _.indexOf(e,t.value.toLowerCase())===-1})},this,{deferEvaluation:!0}),this.uniqueKeyValidator=ko.computed(function(){var t=this;return{validate:function(i,n){if(t.serviceParent&&t.serviceParent()&&t.serviceParent().properties()){var s=_.some(t.serviceParent().properties(),function(e){return e!==t&&(e.name()[0]&&i[0]&&e.name()[0].toLowerCase()===i[0].toLowerCase())});if(s)throw new oj.ValidatorError(e.translate("components.httpHeaders.key.alreadyExists.summary"),e.translate("components.httpHeaders.key.alreadyExists.detail"));_.some(t.__static__.standardHeaders,function(t){return t.value.toLowerCase()===i[0].toLowerCase()})&&t.serviceParent().monitor.valueHasMutated()}}}},this,{deferEvaluation:!0}),this._super(t)}}),d=i.extend({module:t,name:"EntityQnATrainingDO"},{EntityQnATrainingDO:function(t){this.id=ko.observable(),this.name=ko.observable(),this.description=ko.observable(),this.enabled=ko.observable(),this.doTrainFlag=ko.observableArray(),this._super(t)},fromJS:function(t,e){this._super(t,e),this.idAttr=this.id(),this.doTrainFlag([]),this.requiresTraining=t.trainingStatus!==n.TrainingStatusEnum.TRAINING&&!!t.trainNeeded,this.icon=this._getTrainingIconForModel(t),this.iconKlazz=t.trainNeeded?"ap-warning-icon":"ap-default-icon"},toUpdateJS:function(){var t=this.toJS(),e=_.pick(t,["id","name","description","enabled"]);
return e},_getTrainingIconForModel:function(t){var e,i=t.trainingStatus===n.TrainingStatusEnum.TRAINING,s=!!t.trainNeeded;return e=i?"spinner_blue":s?"func_train_16":"func_trained_16"}});return{EventAttribute:a,EventFilter:r,HttpHeaderDO:l,EntityQnATrainingDO:d}}),define("bots.package.view/train.bot.popup",["module","bots.i18n","bots.enums","bots.package.shell/validators","bots.package.view/dialog","bots.package.view/dataobject"],function(t,e,i,n,s,o){var a,r=s.extend({module:t,name:"TrainBotPopup"},{config:{type:"ojDialog"},bindings:{botsValidators:n,modelsToCallTrain:{func:ko.observableArray},qnasToCallTrain:{func:ko.observableArray},selectedModel:{func:ko.observable},currentTrainingModel:{func:ko.computed,args:[function(){return this.config.parentView.bindings.currentTrainingModel()},this,{deferEvaluation:!0}]},trainingModels:{func:ko.computed,args:[function(){var t=_.map(this.config.parentView.bindings.trainingModels(),_.bind(function(t){var e=!0;return this._previousTrainingModels.length>0&&(e=!!_.find(this._previousTrainingModels,function(e){return e.id===t.id&&!!_.first(ko.unwrap(e.doTrainFlag))})),_.extend({},t,{doTrainFlag:ko.observableArray(e&&ko.unwrap(t.requiresTraining)?[t.id]:[])})},this));return this._previousTrainingModels=t.slice(0),t},this,{deferEvaluation:!0}]},trainingModelsDS:{func:ko.computed,args:[function(){var t=this.bindings.trainingModels()||[];return new oj.ArrayTableDataSource(t,{idAttribute:"id"})},this,{deferEvaluation:!0}]},trainingEnityQnA:{func:ko.computed,args:[function(){var t=_.map(this.config.parentView.bindings.trainingEnityQnA(),_.bind(function(t){var e=!0;return this._previousTrainingEntityQnA.length>0&&(e=!!_.find(this._previousTrainingEntityQnA,function(e){return e.idAttr===t.idAttr&&!!_.first(ko.unwrap(e.doTrainFlag))})),_.extend({},t,{doTrainFlag:ko.observableArray(e&&ko.unwrap(t.requiresTraining)?[t.idAttr]:[])})},this));return this._previousTrainingEntityQnA=t.slice(0),t},this,{deferEvaluation:!0}]},trainingEnityQnADS:{func:ko.computed,args:[function(){var t=this.bindings.trainingEnityQnA()||[];return new oj.ArrayTableDataSource(t,{idAttribute:"idAttr"})},this,{deferEvaluation:!0}]},submitTrainingRequests:function(){this.deps.uiComponents.validateFields($(this.config.baseElement),!1,!1,!1)&&(this.enableDefaultButton(!1),this._submitTrainingRequests())},closeHandler:function(){a&&a.reject()},onTMOptionChange:function(t,e){var i=_.first(e.value);"selection"===e.option&&i&&this.bindings.selectedModel(i)},isODA:function(){return this.config.parentView.bindings.bot().type()===i.BotAssetEnum.DA.value}},_previousTrainingModels:[],_previousTrainingEntityQnA:[],TrainBotPopup:function(t){this._super(t)},open:function(){return this._super(),a=$.Deferred(),this._previousTrainingModels=[],this._previousTrainingEntityQnA=[],_.defer(_.bind(function(){_.each(this.bindings.trainingEnityQnA(),function(t){t.doTrainFlag(t.requiresTraining?[t.idAttr]:[])}),_.each(this.bindings.trainingModels(),function(t){t.doTrainFlag(t.requiresTraining?[t.id]:[])})},this)),a},_submitTrainingRequests:function(){a.resolve(this._getTrainingRequestData()),a=void 0,this.close()},_getTrainingRequestData:function(){var t=[],e=this.bindings.selectedModel();_.each(this.bindings.trainingEnityQnA(),function(e){var i=_.first(ko.unwrap(e.doTrainFlag));i&&t.push(i)});var i=_.find(this.bindings.trainingModels(),function(t){return t.id===e&&!!_.first(ko.unwrap(t.doTrainFlag))});return{selectedModel:this.bindings.selectedModel(),trainModelFlag:!!i,entityQnAToTrain:t}}});return r}),define("bots.package.view/install.store.skill",["module","suite.package.util/messaging","bots.package.view/dialog","bots.i18n","bots.enums"],function(t,e,i,n,s){var o,a=i.extend({module:t,name:"InstallStoreSkillUpdatePopup"},{config:{type:"ojDialog"},bindings:{skillDisplayName:{func:ko.observable},skillVersion:{func:ko.observable},skillCategory:{func:ko.observable},skillSummary:{func:ko.observable},skillDescription:{func:ko.observable},installStoreSkillUpdate:function(){this.deps.uiComponents.validateFields($(this.config.baseElement))&&(this.enableDefaultButton(!1),this._installStoreSkillUpdate())}},InstallStoreSkillUpdatePopup:function(t){this._super(t)},open:function(){var t=_.bind(this._super,this);return o=$.Deferred(),this._loadSkillUpdateMetadata().always(_.bind(function(i){if(i.status<=204){var n=i.data;this.bindings.skillDisplayName(n.displayName),this.bindings.skillVersion(n.version),this.bindings.skillCategory(n.category),this.bindings.skillSummary(n.summary),this.bindings.skillDescription(n.description),t()}else e.showI18nError(_.filter(arguments,function(t){return t.status>204}),"bots.errors.installStoreSkill",[this.config.skillStoreUpdateObj[s.LifeCycleManagementEnum.SKILLSTORE.NEW_VERSION_METADATA]]),o.reject(i)},this)),o},_loadSkillUpdateMetadata:function(){return this.notify({GET_STORE_SKILL_PITCH:{data:{url:this.config.skillStoreUpdateObj[s.LifeCycleManagementEnum.SKILLSTORE.NEW_VERSION_METADATA]}}},{loadingSpinner:!0})},_installStoreSkillUpdate:function(){this.notify({INSTALL_STORE_SKILL_UPDATE:{data:{url:this.config.skillStoreUpdateObj[s.LifeCycleManagementEnum.SKILLSTORE.NEW_VERSION_IMPORT]}}},{actionSpinner:!0}).always(_.bind(function(t){this.resetFields(),this.close(),t.status>204?(this.deps.messaging.showI18nError(t,"bots.bot.errors.installStoreSkillUpdate"),o.reject(t)):(this.deps.messaging.showConfirmation(this.deps.i18n.translate("bots.bot.storeSkillUpdated",this.bindings.skillDisplayName(),this.bindings.skillVersion())),o.resolve(t)),o=void 0},this))}});return a}),define("bots.package.view/channel.routes.dialog",["module","suite.package.util/messaging","bots.package.view/dialog","bots.i18n","bots.enums","bots.collection"],function(t,e,i,n,s,o){var a,r,l=i.extend({module:t,name:"ChannelRoutesPopup"},{config:{type:"ojDialog"},bindings:{isSkill:{func:ko.observable},botDisplayName:{func:ko.observable},botVersion:{func:ko.observable},botVersionTag:{func:ko.observable},botId:{func:ko.observable},channelRoutes:{func:function(){return new o({facade:this,pageSize:1e6,idAttribute:"id",totalResults:!0,orderBy:"name:asc",filterType:[s.ChannelEnum.FILTER_TYPE_BOT],disableFetch:!0,extraFields:{botId:this.bindings.botId},events:{load:{name:"LOAD_USER_CHANNELS_ROUTING_TO_BOT"}}})}},channelRoutesDS:{func:ko.computed,args:[function(){return new oj.ArrayTableDataSource(this.bindings.channelRoutes.items(),{idAttribute:"id"})},this,{deferEvaluation:!0}]},channelIconProvider:function(t){return s.ChannelTypeEnum.toEnum(t.config.type)||"NA"},navigateToChannelsUsers:function(){this.deps.router.navigate("channels/user",{trigger:!0})},navigateToUserChannelDefinition:function(t){this.deps.router.navigate("channels/user/"+encodeURIComponent(t.name),{trigger:!0})},numberMarked:{func:ko.observable,args:[0]},smartButtonHandler:function(){this.bindings.numberMarked()>0?this.stopChannelRoutes():this.close()},smartButtonLabel:{func:ko.computed,args:[function(){return this.bindings.numberMarked()>0?n.translate("bots.channelRoutesDialog.stopRoutingsLabel"):n.translate("bots.channelRoutesDialog.close")},this,{deferEvaluation:!0}]}},ChannelRoutesPopup:function(t){this._super(t)},markForStoppingSubscriptions:[],_disposeSubscriptions:function(){_.each(this.markForStoppingSubscriptions,function(t){t.dispose()})},_subscribeMarkForStoppingChanges:function(){var t=this,e=function(e){var i=t.bindings.numberMarked();e?(i++,t.bindings.numberMarked()):(i--,i=Math.max(0,i)),t.bindings.numberMarked(i)};_.each(this.bindings.channelRoutes.items(),function(i){t.markForStoppingSubscriptions.push(i.markForStopping.subscribe(e))})},open:function(){var t=_.bind(this._super,this);return a=$.Deferred(),this.bindings.isSkill((ko.unwrap(this.config.bot.type)||"").toUpperCase()===s.BotAssetEnum.SKILL.value),this.bindings.botDisplayName(ko.unwrap(this.config.bot.displayName)),this.bindings.isSkill()?(this.bindings.botVersion(ko.unwrap(this.config.bot.version)),this.bindings.botVersionTag(require("bots.package.shell/context.header").computeVersionTag(this.config.bot))):(this.bindings.botVersion(""),this.bindings.botVersionTag("")),this.bindings.botId(ko.unwrap(this.config.bot.id)),this.bindings.channelRoutes.fetch({disableFetch:!1}).always(_.bind(function(i){i.data?(this._subscribeMarkForStoppingChanges(),t()):(e.showI18nError(_.filter(arguments,function(t){return t.status>204}),"bots.bot.errors.loadChannelRoutings",[this.bindings.botDisplayName,this.bindings.botVersion]),a.reject(i),a=void 0)},this)),a},stopChannelRoutes:function(){r=_.filter(this.bindings.channelRoutes.items(),function(t){return t.markForStopping.peek()}),this._stopChannelRoutes()},_stopChannelRoutes:function(t){var e=this;if(t=t||0,t<r.length){var i=r[t];i.botId=null,this.notify({UPDATE_USER_CHANNEL:{data:_.omit(i,"markForStopping")}},{actionSpinner:!0}).always(function(i){i.status<=204?(t++,e._stopChannelRoutes(t)):(e.deps.messaging.showI18nError(i,"channels.user.errors.stopRouting"),a.reject(i),a=void 0)})}else a.resolve(r),a=void 0,this.close(),this.deps.messaging.showConfirmation(this.deps.i18n.translate("bots.bot.channelRoutesStopped."+(this.bindings.isSkill()?"USER":"ODA"),this.bindings.botDisplayName(),this.bindings.botVersion()))},onClose:function(){a&&(a.reject(null),a=void 0),this._disposeSubscriptions(),this.bindings.numberMarked(0),this.resetFields(),r=void 0}});return l}),define("bots.package.util/fileupload",["module","knockout","mcs.js.framework/defer","mcs.js.framework/class"],function(t,e,i,n){$(document).bind("drop dragover",function(t){t.preventDefault()});var s=n.extend({module:t,name:"FileUpload"},{prefix:"",dropZoneTimeout:void 0,uploadWarning:i({func:e.observable}),uploadError:i({func:e.observable}),showUploadErrorDetails:i({func:e.observable}),uploadErrorDetails:i({func:e.observableArray}),uploadErrorUALinks:i({func:e.observableArray}),fileName:i({func:e.observable}),_postDefer:i({func:function(){this.uploadError.subscribe(function(t){$("#"+this.prefix+"UploadDropzone")[(t?"add":"remove")+"Class"]("error")}.bind(this)),this.uploadWarning.subscribe(function(t){$("#"+this.prefix+"UploadDropzone")[(t?"add":"remove")+"Class"]("warning")}.bind(this))}}),FileUpload:function(t){this.options=_.extend({actionSpinner:!1},t),this.dragover=this.dragover.bind(this),this.submit=this.submit.bind(this),this.progress=this.progress.bind(this),this.success=this.success.bind(this),this.fail=this.fail.bind(this),this.done=this.done.bind(this),this.selectUploadAction=this.selectUploadAction.bind(this),this.cancelUploadAction=this.cancelUploadAction.bind(this),this.show("Init")},show:function(){for(var t=["Progress","Done","Init"],e=[].slice.call(arguments,0),i=0;i<t.length;i++)$("#"+this.prefix+"Upload"+t[i])[e.indexOf(t[i])!==-1?"show":"hide"]()},init:function(){this.show("Init"),this.uploadError(null),this.uploadErrorUALinks([]),this.uploadErrorDetails([]),this.showUploadErrorDetails(!1),this.uploadWarning(null),this.options.actionSpinner&&require("suite.package.shell/shell").showSpinner(!1)},invoke:function(){var t=this.prefix+"UploadInputText",e=$("#"+t);e&&e.length>0?e.fileupload.apply(e,arguments):this.error("Cannot find DOM node id="+t)},dragover:function(t,e){var i=$("#"+this.prefix+"UploadDropzone");this.uploadError(null),this.uploadWarning(null),this.dropZoneTimeout?clearTimeout(this.dropZoneTimeout):i.addClass("in");var n=!1,s=t.target;do{if(s===i[0]){n=!0;break}s=s.parentNode}while(null!==s);n?i.addClass("hover"):i.removeClass("hover"),this.dropZoneTimeout=setTimeout(_.bind(function(){this.dropZoneTimeout=null,i.removeClass("in hover")},this),100)},submit:function(t,e){this.options.actionSpinner&&require("suite.package.shell/shell").showSpinner(!0),this.jqXHR=e,this.uploadError(null),this.uploadWarning(null)},progress:function(t,e){this.fileName(e.files[0].name),this.show("Progress")},success:function(t,e){this.log(this.fileName()+" uploaded successfully")},fail:function(t,e){this.init();var i=e.xhr(),n={};try{n=JSON.parse(i.response||responseText)}catch(t){}n.title&&n.detail&&this.uploadError({title:n.title,text:n.detail})},done:function(t,e){var i=e.xhr();if("function"==typeof this["done"+i.status])this["done"+i.status].call(this,t,e);else{this.init();var n=JSON.parse(e.xhr().response);this.uploadError({title:n.title,text:n.detail})}},selectUploadAction:function(){$("#"+this.prefix+"UploadInputText").click()},cancelUploadAction:function(){this.jqXHR&&this.jqXHR.abort&&(this.jqXHR.abort(),this.init())}});return s}),define("bots.package.shell/context.header",["module","suite.package.util/messaging","bots.package.view/view","bots.enums","bots.facade","bots.config","bots.i18n","bots.ua","bots.router","suite.package.shell/shell","bots.package.view/new.bot","bots.package.view/new.da","bots.package.view/delete.bot","bots.package.da/delete.bot","bots.package.view/clone.bot","bots.package.da/clone.bot","bots.package.view/publish.bot","bots.package.view/export.bot.logs","bots.package.da/export.bot.logs","bots.package.view/train.bot.popup","bots.package.view/install.store.skill","bots.package.view/channel.routes.dialog","bots.package.util/fileupload","bots.model.rest","bots.package.view/dataobject","moment","ojs/ojtable-model"],function(t,e,i,n,s,o,a,r,l,d,c,u,h,b,g,f,p,m,v,y,w,k,T,E,x,j){var A=n.ARTIFACT_NAME_VERSION_SEPARATOR,B=i.extend({module:t,name:"ContextHeader"},{_trainDropdownIsOpen:!1,__static__:{BOT_STATUS_POLLING_SECS:4,POLLING_SKOSH_MILLISECS:300,TYPE_QNA:"qna",TYPE_ENTITY:"entity",ENTITY_TRAIN_ID:"ENTITY_TRAIN_ID",BOT_CONTEXT_ACTIONS:{EDIT:"edit",VIEW:"view",NEW_VERSION:"newVersion",CLONE:"clone",PUBLISH:"publish",EXPORT:"export",EXPORT_LOGS:"exportlogs",TRASH:"trash",PULL:"pull",ROUTES:"routes"}},bindings:{CTX_HDR_SEP:A,selectedBotIds:{func:ko.observableArray,args:[]},botTilesTitle:{func:ko.computed,args:[function(){var t=a.translate("bots.title");return this.bindings.versionsLandingBotName()?t+A+a.translate("bots.versions"):t},this,{deferEvaluation:!0}]},daTilesTitle:{func:ko.computed,args:[function(){return a.translate("da.title")},this,{deferEvaluation:!0}]},channelsTitle:{func:ko.observable,args:[a.translate("channels.title")]},botNameAdCrumbs:{func:ko.computed,args:[function(){return this.bindings.botTilesTitle()+A+_.unwrap2(this.bindings.bot,"displayName")},this,{deferEvaluation:!0}]},daNameAdCrumbs:{func:ko.computed,args:[function(){return this.bindings.daTilesTitle()+A+_.unwrap2(this.bindings.bot,"displayName")},this,{deferEvaluation:!0}]},botStatusVersionTag:{func:ko.computed,args:[function(){return this.computeVersionTag(this.bindings.bot)},this,{deferEvaluation:!0}]},bots:{func:ko.observableArray,args:[]},searchBy:{func:ko.observableArray,args:[]},searchDABy:{func:ko.observableArray,args:[]},renderBotPicker:{func:ko.observable},botDataSource:{func:function(){return new oj.ArrayTableDataSource(this.bindings.bots,{idAttribute:"id"})}},botStatusIconProvider:function(t){var e,i=24,s=24,o="",r="",l="";if(_.isObject(t))if(t.namespace)e=_.isEmpty(t.skillStoreUpdate)?0:1,o=n.BotAssetEnum.STOREBOUGHT.basename[e],r=n.BotAssetEnum.STOREBOUGHT.klazz[e],l=a.translate(n.BotAssetEnum.STOREBOUGHT.titleRbKey[e]),i=n.BotAssetEnum.STOREBOUGHT.viewBox[e].width,s=n.BotAssetEnum.STOREBOUGHT.viewBox[e].height;else if(t.type===n.BotAssetEnum.SKILL.value)e=t.status===n.LifeCycleManagementEnum.DRAFT?0:1,o=n.BotAssetEnum.SKILL.basename[e],r=n.BotAssetEnum.SKILL.klazz[e],l=a.translate(n.BotAssetEnum.SKILL.titleRbKey[e]),i=n.BotAssetEnum.SKILL.viewBox[e].width,s=n.BotAssetEnum.SKILL.viewBox[e].height;else{if(t.type!==n.BotAssetEnum.DA.value)return"NA";e=0,o=n.BotAssetEnum.DA.basename[e],r=n.BotAssetEnum.DA.klazz[e],l=a.translate(n.BotAssetEnum.DA.titleRbKey[e]),i=n.BotAssetEnum.DA.viewBox[e].width,s=n.BotAssetEnum.DA.viewBox[e].height}return{title:l,basename:o,klazz:r,viewBoxWidth:i,viewBoxHeight:s}},botPickerContextMenu:{func:function(){return this.computeBotContextMenu([this.__static__.BOT_CONTEXT_ACTIONS.EDIT,this.__static__.BOT_CONTEXT_ACTIONS.VIEW,this.__static__.BOT_CONTEXT_ACTIONS.TRASH],!1)}},daPickerContextMenu:{func:function(){return this.computeBotContextMenu([this.__static__.BOT_CONTEXT_ACTIONS.EDIT,this.__static__.BOT_CONTEXT_ACTIONS.VIEW,this.__static__.BOT_CONTEXT_ACTIONS.NEW_VERSION,this.__static__.BOT_CONTEXT_ACTIONS.EXPORT_LOGS,this.__static__.BOT_CONTEXT_ACTIONS.PUBLISH,this.__static__.BOT_CONTEXT_ACTIONS.PULL,this.__static__.BOT_CONTEXT_ACTIONS.TRASH],!0)}},botPickerPopup:{func:function(){return new i({baseElement:this.config.botPickerPopupElement,contentElement:this.config.botPickerPopupElement,parentView:this})}},botNamePickerPopup:{func:function(){return new i({baseElement:this.config.botNamePickerPopupElement,contentElement:this.config.botNamePickerPopupElement,lightweight:!0,notBotCentric:!0,parentView:this})}},daPickerPopup:{func:function(){return new i({baseElement:this.config.daPickerPopupElement,contentElement:this.config.daPickerPopupElement,notBotCentric:!0,parentView:this})}},newBotPopup:{func:function(){return new c({baseElement:this.config.newBotPopupElement,contentElement:this.config.newBotPopupElement,displayNameInputElement:this.config.newBotPopupDisplayNameElement,nameInputElement:this.config.newBotPopupNameElement,versionInputElement:this.config.newBotPopupVersionElement})}},newDAPopup:{func:function(){return new u({baseElement:this.config.newDAPopupElement,contentElement:this.config.newDAPopupElement,displayNameInputElement:this.config.newDAPopupDisplayNameElement,nameInputElement:this.config.newDAPopupNameElement,versionInputElement:this.config.newDAPopupVersionElement})}},deleteBotPopup:{func:function(){return new h({baseElement:this.config.deleteBotPopupElement,contentElement:this.config.deleteBotPopupElement})}},deleteDAPopup:{func:function(){return new b({baseElement:this.config.deleteDAPopupElement,contentElement:this.config.deleteDAPopupElement})}},cloneBotPopup:{func:function(){return new g({baseElement:this.config.cloneBotPopupElement,contentElement:this.config.cloneBotPopupElement,displayNameInputElement:this.config.cloneBotPopupDisplayNameElement,nameInputElement:this.config.cloneBotPopupNameElement,versionInputElement:this.config.cloneBotPopupVersionElement})}},cloneDAPopup:{func:function(){return new f({baseElement:this.config.cloneDAPopupElement,contentElement:this.config.cloneDAPopupElement,displayNameInputElement:this.config.cloneDAPopupDisplayNameElement,nameInputElement:this.config.cloneDAPopupNameElement,versionInputElement:this.config.cloneDAPopupVersionElement})}},publishBotPopup:{func:function(){return new p({baseElement:this.config.publishBotPopupElement,contentElement:this.config.publishBotPopupElement})}},exportBotLogsPopup:{func:function(){return new m({baseElement:this.config.exportBotLogsPopupElement,contentElement:this.config.exportBotLogsPopupElement})}},exportDALogsPopup:{func:function(){return new v({baseElement:this.config.exportDALogsPopupElement,contentElement:this.config.exportDALogsPopupElement})}},installStoreSkillUpdatePopup:{func:function(){return new w({baseElement:this.config.installStoreSkillUpdatePopupElement,contentElement:this.config.installStoreSkillUpdatePopupElement})}},channelRoutesPopup:{func:function(){return new k({baseElement:this.config.channelRoutesPopupElement,contentElement:this.config.channelRoutesPopupElement})}},trainBotPopup:{func:function(){return new y({baseElement:"#bot-train-dialog",contentElement:"#bot-train-dialog",parentView:this})}},selectBots:function(t){var e=_.first(t.value);this.deps.router.navigateBot(e)},selectDAs:function(t){var e=_.first(t.value);this.deps.router.navigateDA(e)},botPickerOpening:function(t){this.bindings.searchBy([])},daPickerOpening:function(t){this.bindings.searchDABy([])},filtersCount:{func:ko.observable,args:[]},navigateToBotCatalog:function(){this.deps.router.navigateBotCatalog()},navigateToDACatalog:function(){this.deps.router.navigateDACatalog()},returnToBotCatalog:function(){this.bindings.versionsLandingBotName(""),this.bindings.versionsLandingBotDisplayName(""),this.bindings.versionsLandingBotNamespace(null),this.deps.router.navigateBotCatalog()},returnToDACatalog:function(){this.deps.router.navigateDACatalog()},selectedStoreSkillGroupIdentifier:{func:ko.observable,args:[""]},selectedStoreSkillGroupName:{func:ko.observable,args:[""]},selectedStoreSkillName:{func:ko.observable,args:[""]},selectedStoreSkillVersion:{func:ko.observable,args:[""]},navigateToStore:function(){this.deps.router.navigate("store",{trigger:!0})},navigateBackToStore:function(){var t="store/"+this.bindings.selectedStoreSkillGroupIdentifier();this.deps.router.navigate(t,{trigger:!0})},botsContextView:{func:ko.observable,args:[!0]},versionsLandingBotName:{func:ko.observable,args:[""]},versionsLandingBotDisplayName:{func:ko.observable,args:[""]},versionsLandingBotNamespace:{func:ko.observable,args:[null]},selectedBotNames:{func:function(){return ko.computed({read:function(){return[this.bindings.versionsLandingBotDisplayName()]},write:function(t){var e=Array.isArray(t)?_.first(t):t,i=_.find(this.bindings.botNames(),function(t){return t.id===e}),n=i.name,s=i.displayName,o=i.namespace;this.bindings.versionsLandingBotName(n),this.bindings.versionsLandingBotDisplayName(s),this.bindings.versionsLandingBotNamespace(o)},owner:this})}},botNames:{func:ko.observableArray,args:[]},botNameDataSource:{func:function(){return new oj.ArrayTableDataSource(this.bindings.botNames,{idAttribute:"id"})}},botNameSearchBy:{func:ko.observableArray,arg:[]},botNamePickerOpening:function(t){this.bindings.botNameSearchBy([])},renderBotNamePicker:function(){return!!this.bindings.versionsLandingBotName()},promoJourneyTitle:{func:ko.observable,args:[]},closeSlideOutTester:function(){"function"==typeof $("#tester-popup").botsFloatOver&&$("#tester-popup").botsFloatOver("isOpen")&&$("#tester-popup").botsFloatOver("close")},isTesterOpen:function(){return!("function"!=typeof $("#tester-popup").botsFloatOver||!$("#tester-popup").botsFloatOver("isOpen"))},validationInProgress:{func:ko.observable,args:[!1]},validateFlowAction:function(){var t=this;return this.bindings.isDraftVersion()?this.bindings.permissions().BOTS_WRITE?void(this.bindings.validationInProgress()||_.defer(function(){setTimeout(function(){t.bindings.validationInProgress(!0),require("bots.package.defectviewer/view").validateFlow()},t.bindings.isAction()?1e3:300)})):void e.showWarning(a.translate("flows.validateFlowNotPermitted")):void e.showInformation(a.translate("flows.validateFlowNotAllowed"))},validateDA:function(){var t=this;return this.bindings.isDraftVersion()?this.bindings.permissions().BOTS_WRITE?void(this.bindings.validationInProgress()||_.defer(function(){setTimeout(function(){t.bindings.validationInProgress(!0),require("bots.package.defectviewer/view").validateDA()},t.bindings.isAction()?1e3:300)})):void e.showWarning(a.translate("flows.validateFlowNotPermitted")):void e.showInformation(a.translate("flows.validateFlowNotAllowed"))},botsInPolling:{func:ko.observable,args:[{}]},botsInTraining:{func:ko.observable,args:[{}]},botsNeedTraining:{func:ko.observable,args:[{}]},botsTrainingInvoked:{func:ko.observable,args:[{}]},qnaTrainingInvoked:{func:ko.observable,args:[{}]},qnaInTraining:{func:ko.observable,args:[{}]},qnaNeedTraining:{func:ko.observable,args:[{}]},entityInTraining:{func:ko.observable,args:[{}]},entityNeedTraining:{func:ko.observable,args:[{}]},entityTrainingInvoked:{func:ko.observable,args:[{}]},isTraining:{func:function(){return ko.computed(function(){var t=o.observableCurrentBot().id;return!!t&&(!!this.bindings.botsInTraining()[t]||!!this.bindings.qnaInTraining()[t]||!!this.bindings.entityInTraining()[t])},this,{deferEvaluation:!0})}},needsTraining:{func:function(){return ko.computed(function(){var t=o.observableCurrentBot().id;return!!t&&(!!this.bindings.botsNeedTraining()[t]||!!this.bindings.qnaNeedTraining()[t]||!!this.bindings.entityNeedTraining()[t])},this,{deferEvaluation:!0})}},currentTrainingModel:{func:ko.observableArray,args:[[]]},openTrainBotPopup:function(){if(this.bindings.permissions().BOTS_WRITE&&!this.bindings.isDraftVersion()){if(this.bindings.isTraining()||!this.bindings.needsTraining())return void e.showInformation(a.translate("bots.train.notAllowed"))}else if(!this.bindings.permissions().BOTS_WRITE)return void e.showWarning(a.translate("bots.train.notPermitted"));$("#bot-train-dialog").ojDialog({position:{my:"right top",at:"right bottom",of:"#bots-train-button"}}),this._trainDropdownIsOpen=!0,this._pollTrainingStatusForTrainDropdown(),this.bindings.trainBotPopup.open().done(_.bind(function(t){this._trainDropdownIsOpen=!1,t&&this._applyTrainingRequests(t)},this))},pollTrainingStatus:function(t){t=t||o.getCurrentBot().id,this.isBotInPolling(t,!0);var i=this.bindings.currentTrainingModel().length&&this.bindings.currentTrainingModel()[0]?a.translate("settings.general.trainingModel."+this.bindings.currentTrainingModel()[0]+".name"):"";s.notify({LOAD_BOT:{data:{id:t,expiry:this.__static__.BOT_STATUS_POLLING_SECS}}},{promise:!0}).always(_.bind(function(s){var o,r=!1;if(s.status>204)this.isBotTrainingInvoked(t,!1),this.isBotInTraining(t,!1),this.isBotInPolling(t,!1),e.showWarning(a.translate("bots.route.zeroday",t)),$("#botPicker-new-bot:data(botView)").data().botView.open();else{if(s.data.trainingStatus!==n.TrainingStatusEnum.TRAINING)switch(o=this.isBotTrainingInvoked(t),this.isBotTrainingInvoked(t,!1),this.isBotInTraining(t,!1),this.isBotInPolling(t,!1),s.data.trainingStatus){case n.TrainingStatusEnum.ERROR:e.showError(a.translate("bots.train.result.errored",s.data.displayName,i));break;case n.TrainingStatusEnum.NO_DATA:case n.TrainingStatusEnum.TRAINED:o&&(this.doesBotNeedTraining(t)?e.showWarning(a.translate("bots.train.result.disturbed",s.data.displayName,i)):e.showConfirmation(a.translate("bots.train.result.completed",s.data.displayName,i))),this.reloadTester()}else r=!0,setTimeout(this.bindings.pollTrainingStatus,1e3*this.__static__.BOT_STATUS_POLLING_SECS+this.__static__.POLLING_SKOSH_MILLISECS,t);this._processTrainEntityQnAResult(s,t,r)}},this))},selectUploadBotAction:function(){this.bindings.initializeBotUpload(),this.bindings.botUpload.selectUploadAction()},initializeBotUpload:function(){this.bindings.botUpload.invoke("option","url",E.processUrl("/bots"))},trainingModels:{func:ko.observableArray},trainingModelsDS:{func:ko.computed,args:[function(){var t=this.bindings.trainingModels()||[];return new oj.ArrayTableDataSource(t,{idAttribute:"id"})},this,{deferEvaluation:!0}]},trainingEnityQnA:{func:ko.observableArray},trainingEnityQnADS:{func:ko.computed,args:[function(){var t=this.bindings.trainingEnityQnA()||[];return new oj.ArrayTableDataSource(t,{idAttribute:"id"})},this,{deferEvaluation:!0}]},botUpload:{func:function(){var e=this,i=T.extend({module:t,name:"BotFileUpload"},{prefix:"bot",BotFileUpload:function(t){this._super(t)},fail:function(t,i){this.init();var n=i.xhr();if(400===n.status||500===n.status){var s=e.deps.messaging.lookupI18nError(n,"bots.bot.errors.importBot");e.deps.messaging.showError(s.message)}else e.deps.messaging.showI18nError(t,"bots.bot.errors.importBot")},done:function(t,i){this.init();var n=i.xhr();200!==n.status&&201!==n.status||(i.result&&i.result.bot&&(e.deps.messaging.showConfirmation(e.deps.i18n.translate("bots.bot.imported",i.result.bot.name,i.result.bot.version)),_.isArray(i.result.diagnostics)&&_.each(i.result.diagnostics,function(t){e.deps.messaging.showWarning(e.deps.i18n.translate("bots.bot.perImported",i.result.bot.name,i.result.bot.version,e.deps.messaging.formatSentence(t.message)))})),e.notify({BOTS_CATALOG_MODIFIED:{data:{}}}))}});return new i({actionSpinner:!0})}},navigateToUATour:function(){this.deps.router.setReturnFromFirstUseUA(!0),this.deps.router.navigate("assistance",{trigger:!0})},chaboxInstantAppsAction:function(){this.notify({COMPUTE_CHATBOX_INSTANTAPPS_URL:{data:{}}},{actionSpinner:!0}).always(function(t){200===t.status?t.data&&t.data.url&&require("bots.router").openInTab(t.data.url,"_blank"):e.showI18nError(t,"chatbox.instantapps.errors.computeUrl",[57011,57012,57013,57014,57015,57021])})},teachMeHow:function(){var t=require("bots.ua").ualink("bots.teachMeHow",!0).link;require("bots.router").openInTab(t,"_blank")},performBotMenuAction:function(t,e){var i=this;_.defer(function(){var t=e.item[0].attributes.getNamedItem("menuId").value,n=_.find(i.bindings.botPickerContextMenu,function(e){return e.id===t}),s=_.unwrap2(i.bindings.bot,"id");i.bindings[n.click](s)})},performDAMenuAction:function(t,e){var i=this;_.defer(function(){var t=e.item[0].attributes.getNamedItem("menuId").value,n=_.find(i.bindings.daPickerContextMenu,function(e){return e.id===t}),s=_.unwrap2(i.bindings.bot,"id");i.bindings[n.click](s)})},onBotNewVersion:function(t){var e=ko.unwrap(this.bindings.bot());this.bindings.newBotPopup.config.createModeToUse=this.bindings.newBotPopup.__static__.CREATE_CLONE_VERSION,this.bindings.newBotPopup.config.nameToUse=ko.unwrap(e.name),this.bindings.newBotPopup.config.displayNameToUse=ko.unwrap(e.displayName),this.bindings.newBotPopup.config.descriptionToUse=ko.unwrap(e.description),this.bindings.newBotPopup.config.botId=ko.unwrap(e.id),this.bindings.newBotPopup.open()},onBotClone:function(t){var e=ko.unwrap(this.bindings.bot());this.bindings.cloneBotPopup.config.botId=t,this.bindings.cloneBotPopup.config.botDisplayName=ko.unwrap(e.displayName),this.bindings.cloneBotPopup.config.botName=ko.unwrap(e.name),this.bindings.cloneBotPopup.config.botNamespace=ko.unwrap(e.namespace),this.bindings.cloneBotPopup.open({},{version:ko.unwrap(e.version),description:ko.unwrap(e.description)||""})},onDAClone:function(t){var e=ko.unwrap(this.bindings.bot());this.bindings.cloneDAPopup.config.botId=t,this.bindings.cloneDAPopup.config.botName=ko.unwrap(e.name),this.bindings.cloneDAPopup.config.botNamespace=ko.unwrap(e.namespace),this.bindings.cloneDAPopup.open({},{description:ko.unwrap(e.description)||""})},onBotPublish:function(t){var i=ko.unwrap(this.bindings.bot());_.isEmpty(ko.unwrap(i.description))?e.showWarning(a.translate("bots.bot.errors.publishBot.noDescription")):ko.unwrap(i.requiresTraining)?e.showWarning(a.translate("bots.bot.errors.publishBot.noTraining")):(this.bindings.publishBotPopup.config.botId=ko.unwrap(i.id),this.bindings.publishBotPopup.config.botDisplayName=ko.unwrap(i.displayName),this.bindings.publishBotPopup.config.botName=ko.unwrap(i.name),this.bindings.publishBotPopup.config.botVersion=ko.unwrap(i.version),this.bindings.publishBotPopup.config.botStatus=n.LifeCycleManagementEnum.PUBLISHED,this.bindings.publishBotPopup.open())},onBotExport:function(t){var e=ko.unwrap(this.bindings.bot());e.type()===n.BotAssetEnum.DA.value?this._exportDA(e):this._exportBot(e)},onBotExportLogs:function(t){var e=ko.unwrap(this.bindings.bot());this.bindings.exportBotLogsPopup.config.bot=e,this.bindings.exportBotLogsPopup.open()},onBotPull:function(t){var e=ko.unwrap(this.bindings.bot());this.bindings.installStoreSkillUpdatePopup.config.skillStoreUpdateObj=_.object(_.pluck(ko.unwrap(e.skillStoreUpdate),"rel"),_.pluck(ko.unwrap(e.skillStoreUpdate),"href")),_.isEmpty(this.bindings.installStoreSkillUpdatePopup.config.skillStoreUpdateObj)?this.warn("link rel="+n.LifeCycleManagementEnum.SKILLSTORE.NEW_VERSION_IMPORT+" not found!"):this.bindings.installStoreSkillUpdatePopup.open()},onBotRoutes:function(t){var e=ko.unwrap(this.bindings.bot());this.bindings.channelRoutesPopup.config.bot=e,this.bindings.channelRoutesPopup.open()},isODA:function(){return this.bindings.botsContextView()&&0===this.bindings.botsContextView().indexOf("viewDA")}},ContextHeader:function(t){this._super(t)},initModule:function(t){return!!this._super(t)&&(d.registerStickyContextHeaderApplication({application:"bots",contextHeaderHeight:o.templateData.botsStickyContextHeaderGeometry.contextHeaderHeight}),void this.listen({ROUTE_DISPLAY:this.showContextHeader,HIDE_BOT_PICKER:this.setRenderBotPicker,BOT_TRAINING_NEEDED:this._fetchBotRequiresTrainingIndicator,LOAD_BOT:this._botLoaded,VALIDATE_FLOW:this._flowValidated,
VALIDATE_DA:this._daValidated,OPEN_SLIDE_OUT_TESTER:this._testerListener}))},renderView:function(t){this.bindings.user=o.getUser(),this._super(t)},bindView:function(t){this._super(t),_.extend(this.bindings.botPickerPopup.bindings,_.pick(this.bindings,"selectBots","selectedBotIds","botDataSource","botStatusIconProvider","searchBy","newBotPopup","botPickerOpening","renderBotPicker","performBotMenuAction","botPickerContextMenu")),_.extend(this.bindings.botNamePickerPopup.bindings,_.pick(this.bindings,"selectedBotNames","botNameDataSource","botNameSearchBy","botNamePickerOpening","renderBotNamePicker")),_.extend(this.bindings.daPickerPopup.bindings,_.pick(this.bindings,"selectDAs","selectedBotIds","botDataSource","botStatusIconProvider","searchDABy","newDAPopup","daPickerOpening","renderBotPicker","performDAMenuAction","daPickerContextMenu")),this.bindings.searchBy.extend({rateLimit:750}),this.bindings.searchBy.subscribe(function(t){this.filterBots()},this),this.bindings.searchDABy.extend({rateLimit:750}),this.bindings.searchDABy.subscribe(function(t){this.filterDAs()},this),this.bindings.botId.subscribe(function(t){this.bindings.selectedBotIds(t?[t]:[])},this),this.bindings.botNameSearchBy.extend({rateLimit:750}),this.bindings.botNameSearchBy.subscribe(function(t){this.filterBotNames()},this)},botSelectEventHandler:function(t){this.isVisible()&&this.bindings.versionsLandingBotName()&&t.selectedBot.type===n.BotAssetEnum.SKILL.value&&(this.bindings.versionsLandingBotName(t.selectedBot.name),this.bindings.versionsLandingBotDisplayName(t.selectedBot.displayName),this.bindings.versionsLandingBotNamespace(t.selectedBot.namespace)),this._super(t)},filterBots:function(){this.notify({LOAD_BOTS:{data:{orderBy:"displayName:asc",q:this.bindings.searchBy()}}},{actionSpinner:!0}).always(_.bind(function(t){t.status>201?this.deps.messaging.showI18nError(t,"bots.messages"):this.bindings.bots(t.data.items)},this))},filterDAs:function(){this.notify({LOAD_DAS:{data:{orderBy:"displayName:asc",q:this.bindings.searchDABy()}}},{actionSpinner:!0}).always(_.bind(function(t){t.status>201?this.deps.messaging.showI18nError(t,"da.messages"):this.bindings.bots(t.data.items)},this))},filterBotNames:function(){this.notify({LOAD_BOT_NAMES:{data:{orderBy:"displayName:asc",q:this.bindings.botNameSearchBy()}}},{actionSpinner:!0}).always(_.bind(function(t){t.status>201?this.deps.messaging.showI18nError(t,"bots.messages"):this.bindings.botNames(_.map(t.data.items,function(t){return _.omit(t,"version","description")}))},this))},showContextHeader:function(t){this.bindings.renderBotPicker(void 0===t.renderBotPicker||t.renderBotPicker)},setRenderBotPicker:function(t){this.bindings.renderBotPicker(t.showBotPicker)},isQnATrainingInvoked:function(t,e,i){return void 0===i?!!this.bindings.qnaTrainingInvoked()[t+e]:(this.bindings.qnaTrainingInvoked()[t+e]=i,void this.bindings.qnaTrainingInvoked.valueHasMutated())},isEntityTrainingInvoked:function(t,e,i){return void 0===i?!!this.bindings.entityTrainingInvoked()[t+e]:(this.bindings.entityTrainingInvoked()[t+e]=i,void this.bindings.entityTrainingInvoked.valueHasMutated())},isBotTrainingInvoked:function(t,e){var i=this.bindings.currentTrainingModel()[0];return void 0===e?!!this.bindings.botsTrainingInvoked()[t+i]:(this.bindings.botsTrainingInvoked()[t+i]=e,void this.bindings.botsTrainingInvoked.valueHasMutated())},isBotInTraining:function(t,e){return void 0===e?!!this.bindings.botsInTraining()[t]:(this.bindings.botsInTraining()[t]=e,void this.bindings.botsInTraining.valueHasMutated())},doesBotNeedTraining:function(t,e){return void 0===e?!!this.bindings.botsNeedTraining()[t]:(this.bindings.botsNeedTraining()[t]=e,void this.bindings.botsNeedTraining.valueHasMutated())},isQnAInTraining:function(t,e){return void 0===e?!!this.bindings.qnaInTraining()[t]:(this.bindings.qnaInTraining()[t]=e,void this.bindings.qnaInTraining.valueHasMutated())},doesQnANeedTraining:function(t,e){return void 0===e?!!this.bindings.qnaNeedTraining()[t]:(this.bindings.qnaNeedTraining()[t]=e,void this.bindings.qnaNeedTraining.valueHasMutated())},isEntityInTraining:function(t,e){return void 0===e?!!this.bindings.entityInTraining()[t]:(this.bindings.entityInTraining()[t]=e,void this.bindings.qnaInTraining.valueHasMutated())},doesEntityNeedTraining:function(t,e){return void 0===e?!!this.bindings.entityNeedTraining()[t]:(this.bindings.entityNeedTraining()[t]=e,void this.bindings.qnaNeedTraining.valueHasMutated())},isBotInPolling:function(t,e){return void 0===e?!!this.bindings.botsInPolling()[t]:(this.bindings.botsInPolling()[t]=e,void this.bindings.botsInPolling.valueHasMutated())},_fetchBotRequiresTrainingIndicator:function(t){var i=t.id,n=$.Deferred();return s.notify({LOAD_BOT:{data:{id:i,expiry:this.__static__.BOT_STATUS_POLLING_SECS}}},{promise:!0}).always(_.bind(function(s){s.status>204?(e.showWarning(a.translate("bots.route.zeroday",i)),$("#botPicker-new-bot:data(botView)").data().botView.open(),n.reject(s)):(this.log("Training needed due to: ",t.cause),n.resolve(s))},this)),n},_botLoaded:function(t){if(t.data){var e=t.data.id;if(t.data.trainingStatus)switch(this.doesBotNeedTraining(e,!!t.data.requiresTraining),this._updateTrainingModelList(t.data),t.data.trainingStatus){case n.TrainingStatusEnum.NO_DATA:case n.TrainingStatusEnum.ERROR:case n.TrainingStatusEnum.TRAINED:this.isBotInTraining(e,!1);break;case n.TrainingStatusEnum.TRAINING:this.isBotInTraining(e,!0),this.isBotInPolling(e)||this.bindings.pollTrainingStatus(e)}this._setEntityQnAList(t.data,e)}},_setEntityQnAList:function(t,e){var i=[],s=this;_.each(t.qnas,function(t){t.enabled&&i.push(_.extend({},t,{type:s.__static__.TYPE_QNA,name:a.translate("bots.train.qna")}))}),i.push({description:null,enabled:!0,id:this.__static__.ENTITY_TRAIN_ID,links:null,name:a.translate("bots.train.entity"),type:this.__static__.TYPE_ENTITY,trainNeeded:!!t.botEntityTrainingRequired,trainingStatus:t.botEntityTrainingStatus||n.TrainingStatusEnum.TRAINED}),x.EntityQnATrainingDO.__static__.fromJS(i,this.bindings.trainingEnityQnA);var o=!!_.find(t.qnas,function(t){return!!t.trainNeeded});this.doesQnANeedTraining(e,o);var r=!!_.find(t.qnas,function(t){return t.trainingStatus===n.TrainingStatusEnum.TRAINING});this.isQnAInTraining(e,r);var l=t.botEntityTrainingStatus===n.TrainingStatusEnum.TRAINING;this.doesEntityNeedTraining(e,!!t.botEntityTrainingRequired),this.isEntityInTraining(e,l),!l&&!r||this.isBotInPolling(e)||this.bindings.pollTrainingStatus(e)},_processTrainEntityQnAResult:function(t,i,s){if(t.status>204)_.each(this.bindings.trainingEnityQnA(),_.bind(function(t){var e=ko.unwrap(t.id),n=ko.unwrap(t.type);n===this.__static__.TYPE_ENTITY?this.isEntityTrainingInvoked(i,e,!1):this.isQnATrainingInvoked(i,e,!1)},this)),this.isQnAInTraining(i,!1),this.isEntityInTraining(i,!1);else{var o=!1;_.each(t.data.qnas,_.bind(function(s){if(s.trainingStatus!==n.TrainingStatusEnum.TRAINING){var r=this.isQnATrainingInvoked(i,s.id);switch(this.isQnATrainingInvoked(i,s.id,!1),s.trainingStatus){case n.TrainingStatusEnum.ERROR:e.showError(a.translate("qna.train.result.errored",s.name,t.data.displayName));break;case n.TrainingStatusEnum.TRAINED:r&&(s.trainNeeded?e.showWarning(a.translate("qna.train.result.disturbed",s.name,t.data.displayName)):e.showConfirmation(a.translate("qna.train.result.completed",s.name,t.data.displayName))),this.reloadTester()}}else o=!0},this));var r=this._handleEntityTrainingStatus(i,t.data);s||!o&&!r||setTimeout(this.bindings.pollTrainingStatus,1e3*this.__static__.BOT_STATUS_POLLING_SECS+this.__static__.POLLING_SKOSH_MILLISECS,i)}},_handleEntityTrainingStatus:function(t,i){var s=!1;if(i.botEntityTrainingStatus!==n.TrainingStatusEnum.TRAINING){var r=this.isEntityTrainingInvoked(t,this.__static__.ENTITY_TRAIN_ID);switch(this.isEntityTrainingInvoked(t,this.__static__.ENTITY_TRAIN_ID,!1),i.botEntityTrainingStatus){case n.TrainingStatusEnum.ERROR:e.showError(a.translate("bots.train.entityTrainResult.errored",o.getCurrentBot().displayName));break;case n.TrainingStatusEnum.TRAINED:r&&(i.botEntityTrainingRequired?e.showWarning(a.translate("bots.train.entityTrainResult.disturbed",o.getCurrentBot().displayName)):e.showConfirmation(a.translate("bots.train.entityTrainResult.completed",o.getCurrentBot().displayName)))}}else s=!0;return s},_flowValidated:function(t){this.bindings.validationInProgress(!1),t.status<=204&&(t.data&&Array.isArray(t.data.diagnostics)&&t.data.diagnostics.length>0?0===require("bots.package.defectviewer/view").bindings.isDefectViewerOpen().length&&e.showError(a.translate("flows.flow.invalidated",o.getCurrentBot().displayName)):e.showConfirmation(a.translate("flows.flow.validated",o.getCurrentBot().displayName)))},_daValidated:function(t){this.bindings.validationInProgress(!1),t.status<=204&&(t.data&&Array.isArray(t.data.diagnostics)&&t.data.diagnostics.length>0?0===require("bots.package.defectviewer/view").bindings.isDefectViewerOpen().length&&e.showError(a.translate("da.diagnostics.invalidated",o.getCurrentBot().displayName)):e.showConfirmation(a.translate("da.diagnostics.validated",o.getCurrentBot().displayName)))},_pollTrainingStatusForTrainDropdown:function(t){if(this._trainDropdownIsOpen)return t=t||o.getCurrentBot().id,this.isBotInPolling(t)?void setTimeout(this._pollTrainingStatusForTrainDropdown,1e3*this.__static__.BOT_STATUS_POLLING_SECS+this.__static__.POLLING_SKOSH_MILLISECS,t):void s.notify({LOAD_BOT:{data:{id:t,expiry:this.__static__.BOT_STATUS_POLLING_SECS}}},{promise:!0}).always(_.bind(function(e){if(e.status<=204){var i=_.find(e.data.trainingModels,function(t){return t.trainingStatus===n.TrainingStatusEnum.TRAINING});i&&setTimeout(this._pollTrainingStatusForTrainDropdown,1e3*this.__static__.BOT_STATUS_POLLING_SECS+this.__static__.POLLING_SKOSH_MILLISECS,t)}},this))},_updateTrainingModelList:function(t){if(_.isEmpty(o.observableCurrentBot())||o.observableCurrentBot().id===t.id){var e=this;this.bindings.currentTrainingModel([t.intentTrainer]);var i=this._getTrainingModelsObject(t.trainingModels),s=_.map(n.TrainingModelEnum,function(t,n){var s=i&&i[t]||{requiresTraining:!0};return{id:t,name:a.translate("settings.general.trainingModel."+t+".name"),description:a.translate("settings.general.trainingModel."+t+".description"),icon:e._getTrainingIconForModel(i,t),iconKlazz:!s||s.requiresTraining?"ap-warning-icon":"ap-default-icon",requiresTraining:!!s.requiresTraining,viewBoxWidth:24,viewBoxHeight:24}});this.bindings.trainingModels(s)}},_getTrainingModelsObject:function(t){var e={};return _.each(t,function(t){t.modelPurpose&&"default"!==t.modelPurpose.toLowerCase()||(e[t.intentTrainer]=t)}),e},_getTrainingIconForModel:function(t,e){var i,s=t&&t[e]||{requiresTraining:!0},o=s.trainingStatus===n.TrainingStatusEnum.TRAINING,a=!!s.requiresTraining;return i=o?"spinner_blue":a?"func_train_16":"func_trained_16"},_saveTrainingModel:function(t){var i=$.Deferred(),n=o.getCurrentBot().id,s=this,a={intentTrainer:t,id:n};return this.notify({UPDATE_BOT:{data:a}},{actionSpinner:!0,autoSave:!0}).always(function(t){t.status>204?(e.showI18nError(t,"bots.bot.errors.updateBot",[n]),i.reject(t)):s._fetchBotRequiresTrainingIndicator({id:n}).then(function(e){i.resolve(t)},function(e){i.reject(t)})}),i},_trainBot:function(){var t=this,i=o.getCurrentBot().id;this.isBotInTraining(i)||(this.isBotTrainingInvoked(i,!0),this.isBotInTraining(i,!0),this.doesBotNeedTraining(i,!1),s.notify({TRAIN_BOT:{data:{id:i}}},{promise:!0,actionSpinner:!0}).always(function(n){n.status>204?(e.showI18nError(n,(t.bindings.isODA()?"da":"bots")+".bot.errors.trainBot",[i]),t.isBotTrainingInvoked(i,!1),t.isBotInTraining(i,!1)):t.bindings.pollTrainingStatus(i)}))},_trainQnA:function(t){var i=o.getCurrentBot().id,n=$.Deferred();return this.isQnATrainingInvoked(i,t,!0),s.notify({TRAIN_QNA:{data:{botId:i,id:t}}},{promise:!0,actionSpinner:!0}).always(_.bind(function(s){s.status>204?(e.showI18nError(s,"bots.bot.errors.trainQnA",[i]),this.isQnATrainingInvoked(i,t,!1),n.reject()):n.resolve()},this)),n},_trainEntity:function(t){var i=o.getCurrentBot().id,n=$.Deferred();return this.isEntityTrainingInvoked(i,t,!0),s.notify({TRAIN_ENTITY:{data:{botId:i}}},{promise:!0,actionSpinner:!0}).always(_.bind(function(s){s.status>204?(e.showI18nError(s,"bots.bot.errors.trainEntity",[i]),this.isEntityTrainingInvoked(i,t,!1),n.reject()):n.resolve()},this)),n},_applyTrainingRequests:function(t){var e=_.first(this.bindings.currentTrainingModel())!==t.selectedModel,i=_.bind(function(){t.trainModelFlag&&this._trainBot()},this),n=_.bind(function(t){if(t.length){var e=t.pop(),i=e===this.__static__.ENTITY_TRAIN_ID?this._trainEntity:this._trainQnA;i(e).then(function(){n(t)})}else this.bindings.pollTrainingStatus(o.getCurrentBot().id)},this);e?this._saveTrainingModel(t.selectedModel).then(function(){i()}):i(),t.entityQnAToTrain&&t.entityQnAToTrain.length&&n(t.entityQnAToTrain.slice(0))},_botsContextViewStack:[],_customConfigStack:[],_renderCustomHeader:function(t){if(t){var e=this,i=t.templateParams||{},n=t.templatePartials||{},s=t.bindings||{},o=dust.makeBase(i).shiftBlocks(n);dust.render(t.templateName,o,function(t,i){var n=$(i),o="bots-custom-context-header-base",a=$("#"+o);a.length>0?(a.empty(),ko.cleanNode(a[0]),a.append(n),ko.applyBindings(s,document.getElementById(o))):e.error("Custom header node "+o+" not found!")})}},_testerListener:function(t,e){$("#tester-popup").botsFloatOver("isOpen")?$("#tester-popup").botsFloatOver("close"):($("#tester-popup").botsFloatOver("open"),setTimeout(function(){_.defer(function(){t&&void 0!==t.selectTabOrdinal&&$("#tester-tabs").ojTabs("option","selected",t.selectTabOrdinal)})},200))},pushContextView:function(t){var e=this;this._botsContextViewStack.push(this.bindings.botsContextView.peek()),this._customConfigStack.push(t),this.bindings.botsContextView("customHeader"),_.defer(function(){e._renderCustomHeader(t)})},popContextView:function(){if(this._botsContextViewStack.length>0){this._customConfigStack.pop();var t=this._botsContextViewStack.pop();"customHeader"===t&&this._renderCustomHeader(this._customConfigStack.pop()),this.bindings.botsContextView(t)}},reloadTester:function(){this.notify({RELOAD_TESTER:{}},{actionSpinner:!1})},computeBotContextMenu:function(t,e,i){Array.isArray(t)||(i=t,t=void 0),"boolean"!=typeof e&&(i=e,e=!1);var s=i||this,o=[];return!_.isEmpty(t)&&_.contains(t,this.__static__.BOT_CONTEXT_ACTIONS.EDIT)||o.push({id:"bot-menuitem-edit",text:e?a.translate("da.edit"):a.translate("bots.edit"),computeTitle:function(t){return""},computeVisible:function(t){return ko.computed(function(){return!_.unwrap2(t,"namespace")&&s.bindings.permissions().BOTS_WRITE&&_.unwrap2(t,"status")===n.LifeCycleManagementEnum.DRAFT},null,{deferEvaluation:!0})},computeDisabled:function(t){return!1},click:"onBotEdit"}),!_.isEmpty(t)&&_.contains(t,this.__static__.BOT_CONTEXT_ACTIONS.VIEW)||o.push({id:"bot-menuitem-view",text:e?a.translate("da.view"):a.translate("bots.view"),computeTitle:function(t){return""},computeVisible:function(t){return ko.computed(function(){return _.unwrap2(t,"namespace")||!s.bindings.permissions().BOTS_WRITE||_.unwrap2(t,"status")!==n.LifeCycleManagementEnum.DRAFT},null,{deferEvaluation:!0})},computeDisabled:function(t){return!1},click:"onBotEdit"}),!_.isEmpty(t)&&_.contains(t,this.__static__.BOT_CONTEXT_ACTIONS.NEW_VERSION)||o.push({id:"bot-menuitem-new-version",text:a.translate("bots.newVersion"),computeTitle:function(t){return""},computeVisible:function(t){return ko.computed(function(){return!_.unwrap2(t,"namespace")},null,{deferEvaluation:!0})},computeDisabled:function(t){return!s.bindings.permissions().BOTS_WRITE},click:"onBotNewVersion"}),!_.isEmpty(t)&&_.contains(t,this.__static__.BOT_CONTEXT_ACTIONS.CLONE)||o.push({id:"bot-menuitem-clone",text:e?a.translate("da.clone"):a.translate("bots.clone"),computeTitle:function(t){return""},computeVisible:function(t){return!0},computeDisabled:function(t){return!s.bindings.permissions().BOTS_WRITE},click:e?"onDAClone":"onBotClone"}),!_.isEmpty(t)&&_.contains(t,this.__static__.BOT_CONTEXT_ACTIONS.PUBLISH)||o.push({id:"bot-menuitem-publish",text:a.translate("bots.publish"),computeTitle:function(t){return ko.computed(function(){return _.unwrap2(t,"status")===n.LifeCycleManagementEnum.DRAFT&&_.unwrap2(t,"trainingStatus")!==n.TrainingStatusEnum.TRAINED?a.translate("bots.publishable"):""},null,{deferEvaluation:!0})},computeVisible:function(t){return ko.computed(function(){return!_.unwrap2(t,"namespace")&&_.unwrap2(t,"status")===n.LifeCycleManagementEnum.DRAFT},null,{deferEvaluation:!0})},computeDisabled:function(t){return!1},click:"onBotPublish"}),!_.isEmpty(t)&&_.contains(t,this.__static__.BOT_CONTEXT_ACTIONS.EXPORT)||o.push({id:"bot-menuitem-export",text:e?a.translate("da.export"):a.translate("bots.export"),computeTitle:function(t){return""},computeVisible:function(t){return ko.computed(function(){return!_.unwrap2(t,"namespace")},null,{deferEvaluation:!0})},computeDisabled:function(t){return!1},click:"onBotExport"}),!_.isEmpty(t)&&_.contains(t,this.__static__.BOT_CONTEXT_ACTIONS.EXPORT_LOGS)||o.push({id:"bot-menuitem-export-logs",text:e?a.translate("da.exportlogs"):a.translate("bots.exportlogs"),computeTitle:function(t){return""},computeVisible:function(t){return!0},computeDisabled:function(t){return!1},click:"onBotExportLogs"}),!_.isEmpty(t)&&_.contains(t,this.__static__.BOT_CONTEXT_ACTIONS.TRASH)||o.push({id:"bot-menuitem-trash",text:e?a.translate("da.trash"):a.translate("bots.trash"),computeTitle:function(t){return""},computeVisible:function(t){return!0},computeDisabled:function(t){return!s.bindings.permissions().BOTS_WRITE},click:"onBotTrash"}),!_.isEmpty(t)&&_.contains(t,this.__static__.BOT_CONTEXT_ACTIONS.PULL)||o.push({id:"bot-menuitem-pull",text:a.translate("bots.pull"),computeTitle:function(t){return _.unwrap2(t,"namespace")&&!_.isEmpty(_.unwrap2(t,"skillStoreUpdate"))?a.translate("bots.pullUpdateHint"):""},computeVisible:function(t){return _.unwrap2(t,"namespace")&&!_.isEmpty(_.unwrap2(t,"skillStoreUpdate"))},computeDisabled:function(t){return!s.bindings.permissions().BOTS_WRITE},click:"onBotPull"}),!_.isEmpty(t)&&_.contains(t,this.__static__.BOT_CONTEXT_ACTIONS.ROUTES)||o.push({id:"bot-menuitem-routes",text:a.translate("bots.routes"),computeTitle:function(t){return""},computeVisible:function(t){return!0},computeDisabled:function(t){return!s.bindings.permissions().BOTS_WRITE},click:"onBotRoutes"}),o},_exportBot:function(t){this.notify({EXPORT_BOT:{data:{botId:ko.unwrap(t.id),name:ko.unwrap(t.name),version:ko.unwrap(t.version)}}},{actionSpinner:!0}).always(_.bind(function(t){t.status>200&&this.deps.messaging.showI18nError(t,"bots.bot.errors.exportBot")},this))},_exportDA:function(t){this.notify({EXPORT_DA:{data:{botId:ko.unwrap(t.id),name:ko.unwrap(t.name)}}},{actionSpinner:!0}).always(_.bind(function(t){t.status>200&&this.deps.messaging.showI18nError(t,"da.bot.errors.exportBot")},this))},computeVersionTag:function(t){var e=_.unwrap2(t,"namespace")?n.LifeCycleManagementEnum.STOREBOUGHT:_.unwrap2(t,"status");return a.translate("bots.status."+e)+A+_.unwrap2(t,"version")}});return new B({baseElement:'.suite-header>div[app-context="bots"][app-content="header"]',contentElement:".bots-global-context-header:first",baseTemplate:"bots/shell/context.header",baseTemplateElement:'.suite-header>div[app-context="bots"][app-content="header"]',baseTemplateData:o.templateData,botPickerPopupElement:"#botPicker-asset-picker",botNamePickerPopupElement:"#botNamePicker-asset-picker",daPickerPopupElement:"#daPicker-asset-picker",newBotPopupElement:"#botPicker-new-bot",newBotPopupDisplayNameElement:"#botPicker-new-bot-displayName",newBotPopupNameElement:"#botPicker-new-bot-name",newBotPopupVersionElement:"#botPicker-new-bot-version",newDAPopupElement:"#daPicker-new-da",newDAPopupDisplayNameElement:"#daPicker-new-da-displayName",newDAPopupNameElement:"#daPicker-new-da-name",newDAPopupVersionElement:"#daPicker-new-da-version",deleteBotPopupElement:"#bots-delete-dialog",deleteDAPopupElement:"#da-delete-dialog",cloneBotPopupElement:"#bots-clone-dialog",cloneBotPopupDisplayNameElement:"#cloneBot-displayName",cloneBotPopupNameElement:"#cloneBot-name",cloneBotPopupVersionElement:"#cloneBot-version",cloneDAPopupElement:"#da-clone-dialog",cloneDAPopupDisplayNameElement:"#cloneDA-displayName",cloneDAPopupNameElement:"#cloneDA-name",cloneDAPopupVersionElement:"#cloneDA-version",publishBotPopupElement:"#bots-publish-dialog",exportBotLogsPopupElement:"#bots-export-logs-dialog",exportDALogsPopupElement:"#da-export-logs-dialog",installStoreSkillUpdatePopupElement:"#bots-install-store-skill-dialog",channelRoutesPopupElement:"#bots-channel-routes-dialog",listenForBotAttributesChange:!0,transition:{load:null,reload:null}})}),function(){require(["bots.templates/shell","bots.package.shell/context.header","bots.package.shell/validators","bots.package.shell/ui.components"]),define("bots.package.shell/package.main",[],function(){})}(),define("bots.package.shell",["bots.package.shell/package"],function(t){return t}),define("bots.package.shell/package",function(){}),function(t){function e(t,e){return t}return t.register("bots/view/empty",e),e.__dustBody=!0,e}(dust),define("bots.templates/view",function(){}),define("bots.package.view/subview",["module","bots.i18n","suite.package.view/subview","bots.facade","bots.router"],function(t,e,i,n,s){var o=i.extend({module:t,name:"BotsSubView"},{deps:{i18n:e,facade:n,router:s},BotsSubView:function(t){this._super(t)}});return o}),define("bots.package.view/view.assetcollection",["module","suite.package.util/messaging","bots.package.view/view","bots.collection"],function(t,e,i,n){var s=i.extend({module:t,name:"BotsAssetCollectionView"},{config:{assetCollection:"assets",assetPager:"assetPager",selectedAsset:"selectedAsset",warnAssetConfig:!0},bindings:{isFiltering:{func:ko.observable,args:[!1]},isFilterNoMatch:{func:function(){return ko.computed(_.bind(function(){return this.bindings.isFiltering()&&!this.assetCollection().items().length},this))}}},BotsAssetCollectionView:function(t,e){this._super(t,e)},assetCollection:function(){return this.bindings[this.config.assetCollection]},selectedAsset:function(){return this.bindings[this.config.selectedAsset]},fetchAssets:function(t){var e=this.bindings[this.config.assetPager];if(e)_.defer(function(){e.fetch(t)});else{var i=this.assetCollection();i instanceof n?i.fetch(t):this.config.warnAssetConfig}},baseErrorHandler:function(t){e.showError(t)},bindView:function(t){this._super(t);var e=this.assetCollection();if(e instanceof n){var i=this.buildSelectionHandler();i&&e.items.subscribe(i,this);var s=this.buildFilteringHandler();s&&(e.throttledSearchBy.subscribe(s,this),e.throttledFilterKeyword.subscribe(s,this),e.throttledFilterType.subscribe(s,this)),e.on(n.EventType.ERROR,this.errorHandler||this.baseErrorHandler)}else this.config.warnAssetConfig},buildSelectionHandler:function(){return function(t){var e=this.selectedAsset(),i=ko.isObservable(e)?ko.unwrap(e().id):void 0;if(!this.bindings.isFiltering()&&i){var n=_.find(t,function(t){return ko.unwrap(t.id)===i});e(n||this.buildDataObject())}this.selectDefaultAsset()}},buildFilteringHandler:function(){return function(t){this.bindings.isFiltering(void 0!==t&&t.length||this.assetCollection().searchBy()||this.assetCollection().filterKeyword()||this.assetCollection().filterType().length)}},initModule:function(t){if(this._super(t))return!0},loadModule:function(t){if(this._super(t))return this.fetchAssets({disableFetch:!1}),!0},prepareReload:function(){this.bindings.isFiltering()&&(this.bindings.isAction(!0),this.bindings.assets.searchBy(void 0),this.bindings.assets.filterKeyword(void 0),this.bindings.assets.filterType([]))},reloadModule:function(t){if(this._super(t))return this.prepareReload(),this.loadModule(t),!0},botSelectEventHandler:function(t){this.bindings.assets&&this.bindings.assets.startIndex(0),this._super(t)},updateAssetInCollection:function(t){if(200===t.status&&t.data){var e=this.assetCollection(),i=this.selectedAsset();if(e instanceof n&&ko.isObservable(i)){var s=ko.unwrap(e.items),o=_.findIndex(s,function(e){return t.data.id===ko.unwrap(e.id)});if(t.data.inTrash&&o>=0)e.items.splice(o,1),s.length>0?(i(s[Math.max(0,o-1)]),e.size()<e.pageSize()&&e.totalSize()-1>=e.pageSize()&&ko.unwrap(e.config.selectors.ojPagingControl)&&_.defer(_.bind(function(){$(ko.unwrap(e.config.selectors.ojPagingControl)).ojPagingControl("page",e.startIndex()/e.pageSize())},this))):e.startIndex()>=e.pageSize()&&ko.unwrap(e.config.selectors.ojPagingControl)?_.defer(_.bind(function(){$(ko.unwrap(e.config.selectors.ojPagingControl)).ojPagingControl("previousPage")},this)):i(this.buildDataObject());else if(!t.data.inTrash){var a=this.buildDataObject(t.data);if(o>=0)e.items.splice(o,1,a),ko.unwrap(i().id)===ko.unwrap(a.id)&&i(a);else{var r=ko.unwrap(i().id),l=_.findIndex(s,function(t){return r===ko.unwrap(t.id)});e.items.splice(Math.max(0,l),0,a),e.items().length>e.pageSize()&&e.items.splice(-1,1),i(a)}}}else this.config.warnAssetConfig}},selectDefaultAsset:function(){var t=this.assetCollection(),e=this.selectedAsset();t instanceof n&&ko.isObservable(e)?!ko.unwrap(e().id)&&t.items().length>0&&e(t.items()[0]):this.config.warnAssetConfig}});return s}),define("bots.package.view/view.clicktoedit",["module","suite.package.util/messaging","bots.package.view/view","bots.i18n","bots.config","moment"],function(t,e,i,n,s,o){var a=i.extend({module:t,name:"ClickToEditView"},{__static__:{C2E_ROOT_CLASS:"bots-c2e-root",C2E_IN_EDIT_MODE_CLASS:"bots-c2e-in-edit-mode",C2E_READONLY_TEXT_CLASS:"bots-c2e-readonly-text",C2E_INPUTTEXT_ROOT_CLASS:"bots-c2e-input"},config:{lightweight:!0,lvSelectionMode:"single",saveClickToEditField:void 0,lookupI18nErrorPrefix:void 0,deleteClickToEditField:void 0},bindings:{i18n:n,botsC2eSandboxValue:{func:ko.observable},botsC2eCustomMessage:{func:ko.observableArray,args:[[]]},botsC2eLvSelectionMode:{func:function(){return ko.observable(this.config.lvSelectionMode)}},botsC2eOnClickEditText:function(t,e){var i=$(e.currentTarget).parents("."+this.__static__.C2E_ROOT_CLASS),n=i.find("."+this.__static__.C2E_READONLY_TEXT_CLASS);this.botsC2eDataUnderEdit=t,this.botsC2eFieldIdUnderEdit=n.attr("id"),this._closeEditTextItem(),this._unsubscribeEditText(),this.bindings.botsC2eSandboxValue(n.text()),this.bindings.botsC2eLvSelectionMode("none"),i.hasClass(this.__static__.C2E_IN_EDIT_MODE_CLASS)||i.addClass(this.__static__.C2E_IN_EDIT_MODE_CLASS),this._$c2eRootInEdit=i,this._$c2eInputElement=$("."+this.__static__.C2E_IN_EDIT_MODE_CLASS+" ."+this.__static__.C2E_INPUTTEXT_ROOT_CLASS+" input"),this._$c2eInputElement.ojInputText("reset"),this.bindings.botsC2eCustomMessage([]),this._c2eCancelled=!1,this._subscribeEditText(),_.defer(function(){i.find(".oj-inputtext-input").select()})},botsC2eOnCancelEdit:function(t,e){this._c2eCancelled=!0,this._closeEditTextItem()},botsC2eOnKeydownHandleEscape:function(t,e){var i=e.which||e.keyCode;return i!==$.ui.keyCode.ESCAPE||(this.bindings.botsC2eOnCancelEdit(),!1)},botsC2eOnClickDeleteField:function(t,e){var i=$(e.currentTarget).parents("."+this.__static__.C2E_ROOT_CLASS),n=i.find("."+this.__static__.C2E_READONLY_TEXT_CLASS);this.botsC2eDataUnderEdit=t,this.botsC2eFieldIdUnderEdit=n.attr("id"),"function"==typeof this.config.deleteClickToEditField?this.config.deleteClickToEditField(this.botsC2eDataUnderEdit,this.botsC2eFieldIdUnderEdit).then(function(t){}):this.log("config.deleteClickToEditField not a function!")}},ClickToEditView:function(t,e){this._super(t,e)},_closeEditTextItem:function(){var t=this._$c2eRootInEdit;t&&t.hasClass(this.__static__.C2E_IN_EDIT_MODE_CLASS)&&t.removeClass(this.__static__.C2E_IN_EDIT_MODE_CLASS),this.bindings.botsC2eLvSelectionMode(this.config.lvSelectionMode),this._$c2eRootInEdit=void 0},_unsubscribeEditText:function(){this._editTextSubscription&&(this._editTextSubscription.dispose(),this._editTextSubscription=void 0)},_isEditTextFieldInvalid:function(){return this._$c2eInputElement.ojInputText("option","messagesShown").length>0},_subscribeEditText:function(){var t,i=this,s=ko.computed(function(){i.bindings.botsC2eSandboxValue();t=void 0!==t}),o=function(){i._isEditTextFieldInvalid()||t||(i._closeEditTextItem(),i._$c2eInputElement.off("blur",o),s.dispose())};this._editTextSubscription=this.bindings.botsC2eSandboxValue.subscribe(function(t){setTimeout(function(){i._c2eCancelled||("function"==typeof i.config.saveClickToEditField?i._isEditTextFieldInvalid()||i.config.saveClickToEditField(i.botsC2eDataUnderEdit,i.botsC2eFieldIdUnderEdit,t).then(function(t){i._closeEditTextItem()},function(t){var s=n.translate("general.clickToEditErrorSummary"),o=e.lookupI18nError(t,i.config.lookupI18nErrorPrefix).message;i.bindings.botsC2eCustomMessage([{summary:s,detail:o,severity:oj.Message.SEVERITY_TYPE.ERROR}])}):i.log("config.saveClickToEditField not a function!"))},250)}),this._$c2eInputElement.on("blur",o)}});return a}),define("bots.package.view/dialog.progress",["module","bots.i18n","bots.package.view/dialog"],function(t,e,i){var n=i.extend({module:t,name:"ProgressDialog"},{bindings:{progressTitle:{func:ko.observable},progressDescription:{func:ko.observable},progressAbort:{func:ko.observable},abort:function(t){this.close(),this.wasAborted=!0}},open:function(t){return this.isRendered||this.renderView(),t&&t.progressDescription&&this.bindings.progressDescription(t.progressDescription),this._super(),this.wasAborted=!1,this},ProgressDialog:function(t){this._super(t)},bindView:function(t){this._super(t),this.bindings.progressAbort(e.translate("connectors.ics.integrations.progress-abort")),this.config.progressTitle&&this.bindings.progressTitle(this.config.progressTitle),this.config.progressDescription&&this.bindings.progressDescription(this.config.progressDescription)}});return n}),define("bots.package.view/http.headers.controller",["module","mcs.js.framework/class","mcs.js.framework/defer","bots.i18n","bots.package.view/dataobject"],function(t,e,i,n,s){var o=e.extend({module:t,name:"HttpHeadersController"},{config:{},HttpHeadersController:function(t){this.config=_.extend(this.config,t||{})},expanded:i({func:ko.computed,args:[function(){return this.config.serviceDetailedDO&&this.config.serviceDetailedDO.properties().length>0},this,{deferEvaluation:!0}]}),addHttpHeader:i({func:function(){return function(){var t=this;if(this.config.serviceDetailedDO){if(this.config.serviceDetailedDO.properties()&&this.config.serviceDetailedDO.properties().length>0&&!_.last(this.config.serviceDetailedDO.properties()).ready())return void this.validate();var e=new s.HttpHeaderDO;e.serviceParent=ko.computed(function(){return t.config.serviceDetailedDO}),this.config.serviceDetailedDO.properties.push(e),this.config.parentView&&this.config.parentView.manageHeaderAutoSave(!0,e)}}.bind(this)}}),removeHttpHeader:i({func:function(){return function(t){var e=this.config.serviceDetailedDO.properties.splice(t,1);this.config.parentView&&this.config.parentView.manageHeaderAutoSave(!1,e[0])}.bind(this)}}),validate:i({func:function(){return function(){var t,e,i=this,n=!0;return _.each(this.config.serviceDetailedDO.properties(),function(s){var o=i._getIdPrefix();t=$("#"+o+"name-"+s.ordinal),t.length>0&&(t.ojCombobox("validate")||(n=!1)),e=$("#"+o+"value-"+s.ordinal),e.length>0&&(e.ojInputText("validate")||(n=!1))}),n}.bind(this)}}),_resetValidation:i({func:function(){return function(t,e,i){var n=t.jquery?t:$(t);if(n.length>0){var s=n[e]("option","messages"),o=n[e]("option","messagesShown");!i||s&&s.length||!o||!o.length||n[e]("option","value",[]),n[e]("option","messages",[]),n[e]("reset")}}.bind(this)}}),_getIdPrefix:function(){return(this.config.idPrefix?this.config.idPrefix:"http-headers-controller-")+this.config.viewMode},resetValidations:i({func:function(){return function(){var t,e,i=this;_.each(this.config.serviceDetailedDO.properties(),function(n){var s=i._getIdPrefix();t=$("#"+s+"name-"+n.ordinal),t.length>0&&i._resetValidation(t,"ojCombobox",!0),e=$("#"+s+"value-"+n.ordinal),
e.length>0&&i._resetValidation(e,"ojInputText")})}.bind(this)}})});return o}),define("bots.package.view/dialog.favorites.create",["module","suite.package.util/messaging","bots.package.view/dialog","bots.i18n"],function(t,e,i,n){var s=i.extend({module:t,name:"CreateFavoriteDialog"},{bindings:{name:{func:ko.observable},nameMsg:{func:ko.observableArray},createFavorite:function(t,e){this.deps.uiComponents.validateFields($(this.config.baseElement),!1,!1,!1)&&(this.enableDefaultButton(!1),this.createFavorite())},close:function(t,e){}},CreateFavoriteDialog:function(t){this._super(t)},resetFields:function(t){this._super(t),this.bindings.name(this.generateDefaultName()),this.bindings.nameMsg([])},createFavorite:function(){var t=this.parent();t.notify({CREATE_FAVORITE:{data:{name:this.bindings.name(),appId:t.bindings.appId(),beginDate:t.bindings.dateRange().startDate,endDate:t.bindings.dateRange().endDate,filters:null,reportDefinition:_.extend({},this.toReportDefinition(),{applicationDate:t.bindings.dateRange().now})}}},{actionSpinner:!0}).always(_.bind(function(t){400===t.status&&"3003"===JSON.parse(t.message)["o:errorCode"]?(this.bindings.nameMsg([{summary:n.translate("favorites.dialog.create.duplicateName.title"),detail:n.translate("favorites.dialog.create.duplicateName.msg"),severity:oj.Message.SEVERITY_TYPE.ERROR}]),_.defer(_.bind(function(){this.enableDefaultButton(!0),$(this.config.baseElement).focus(),$(this.config.baseElement+' input[field="name"]').focus()},this))):(this.close(),t.status>200?e.showI18nError(t,"TODO"):e.showConfirmation(n.translate("favorites.dialog.create.confirm",this.bindings.name())))},this))},generateDefaultName:function(){return null},toReportDefinition:function(){throw"not implemented"}});return s}),define("bots.package.view/dialog.segments.create",["module","suite.package.util/messaging","bots.package.view/dialog","bots.i18n"],function(t,e,i,n){var s=i.extend({module:t,name:"CreateSegmentDialog"},{bindings:{name:{func:ko.observable,args:[""]},nameMsg:{func:ko.observableArray},usersCount:{func:ko.observable},exportResponsys:{func:ko.observable},description:{func:ko.observable},createSegment:function(t,e){this.deps.uiComponents.validateFields($(this.config.baseElement),!1,!1,!1)&&(this.enableDefaultButton(!1),this.createSegment())}},CreateSegmentDialog:function(t){this._super(t)},resetFields:function(t){this._super(t),this.bindings.description(this.generateDefaultDescription()),this.bindings.exportResponsys(null),this.bindings.nameMsg([])},createSegment:function(){var t=this.parent(),i=_.extend({name:this.bindings.name(),appId:t.bindings.appId(),beginDate:t.bindings.dateRange().startDate,endDate:t.bindings.dateRange().endDate,description:this.bindings.description()},this.toSegmentDefinition());t.notify({CREATE_SEGMENT:{data:i}},{actionSpinner:!0,promise:!0}).then(_.bind(function(t){200===t.status?this.bindings.exportResponsys()&&this.bindings.exportResponsys().length>0?this.notify({SCHEDULE_EXPORT_SEGMENT:{data:{id:t.data.id,frequency:"now",destination:"responsys"}}},{actionSpinner:!0,promise:!0}).always(_.bind(function(t){200===t.status?this.closeSuccess("success_export"):this.closeSuccess("success_export_fail")},this)):this.closeSuccess("success"):400===t.status&&"3003"===JSON.parse(t.message)["o:errorCode"]?(this.bindings.nameMsg([{summary:n.translate("segments.dialog.errors.duplicateName.title"),detail:n.translate("segments.dialog.errors.duplicateName.msg"),severity:oj.Message.SEVERITY_TYPE.ERROR}]),_.defer(_.bind(function(){this.enableDefaultButton(!0),$(this.config.baseElement).focus(),$(this.config.baseElement+' input[field="name"]').focus()},this))):(e.showI18nError(t,"segments.dialog.errors"),this.close())},this))},closeSuccess:function(t){this.close(),_.defer(function(){e.showConfirmation(n.translate("segments.dialog.message."+t,this.bindings.name()))}.bind(this))},generateDefaultDescription:function(){return null},toSegmentDefinition:function(){throw"not implemented"},open:function(t){this.bindings.name(t&&t.defaultName?n.translate("segments.dialog.create.defaultName",t.defaultName):""),this.bindings.usersCount(t&&t.usersCount?t.usersCount:null),this._super()}});return s}),define("bots.package.view/dialog.trash.to",["module","suite.package.util/messaging","bots.package.view/dialog","bots.i18n"],function(t,e,i,n){var s=i.extend({module:t,name:"TrashDialog"},{artifact:void 0,promise:void 0,bindings:{name:{func:ko.observable},trashArtifact:function(t,e){this.deps.uiComponents.validateFields($(this.config.baseElement),!1,!1,!1)&&(this.enableDefaultButton(!1),this.trashArtifact())},close:function(t,e){}},TrashDialog:function(t){this._super(t)},resetFields:function(t){this._super(t),this.artifact&&this.bindings.name(this.artifact.name)},open:function(t){return this.artifact=t,this.promise=$.Deferred(),this._super(),this.promise},trashArtifact:function(){if(!this.artifact||!this.artifact.id)throw"unsupported trash artifact identifier";if(!this.artifact||!this.artifact.type)throw"unsupported trash artifact type";var t=this.parent();t.notify({TRASH_ARTIFACT:{data:{type:this.artifact.type.toLowerCase()+"s",id:this.artifact.id,trash:"true"}}},{actionSpinner:!0}).always(_.bind(function(t){this.close(),t.status>200?e.showI18nError(t,"TODO"):(e.showConfirmation(n.translate("trash.dialog.to.confirm",this.bindings.name())),this.promise.resolve(t))},this))}});return s}),define("bots.package.view/date.picker",["module","bots.package.view/view","bots.i18n","bots.config","moment"],function(t,e,i,n,s){var o=e.extend({module:t,name:"DatePicker"},{__static__:{datePicker:"daterange-picker",datePickerButton:"daterange-button"},bindings:{dateRanges:{func:ko.observableArray},selectedDateRange:{func:ko.observable,args:[null]},dateRangeLabel:{func:ko.computed,args:[function(){var t=this.bindings.dateRange();return"custom"!==t.id?this.deps.i18n.translate("daterange."+t.id):this.deps.i18n.translate("daterange.customLabel",this.bindings.customDateConverter.format(t.startDate),this.bindings.customDateConverter.format(t.endDate))}]},showDateRangePicker:function(t,e){this.bindings.selectedDateRange(this.deps.botsConfig.getCurrentDateRange().id),this.deps.uiComponents.resetFields($(this.config.datePickerPrefix+"-"+this.__static__.datePicker)),$(this.config.datePickerPrefix+"-"+this.__static__.datePicker).ojPopup("open",this.config.datePickerPrefix+"-"+this.__static__.datePickerButton)},selectDateRange:function(t,e){e&&e.optionMetadata&&"shouldWrite"===e.optionMetadata.writeback&&e.value&&t.originalEvent&&"custom"!==e.value&&(this.deps.router.navigateDateRange(this.deps.botsConfig.getDateRange(e.value)),"custom"===e.previousValue&&this.resetCustomDateRange())},cancelCustomDateRange:function(t,e){$(this.config.datePickerPrefix+"-"+this.__static__.datePicker).ojPopup("close")},applyCustomDateRange:function(t,e){this.deps.uiComponents.validateFields($(this.config.datePickerPrefix+"-"+this.__static__.datePicker))&&(this.bindings.cancelCustomDateRange(t,e),this.deps.router.navigateDateRange(this.deps.botsConfig.getDateRange("custom",this.bindings.customDateConverter.parse(this.bindings.customStartDate()),this.bindings.customDateConverter.parse(this.bindings.customEndDate()))))},customStartDate:{func:ko.observable,args:[]},customEndDate:{func:ko.observable,args:[]},customDateConverter:{func:function(){return oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({pattern:this.deps.botsConfig.templateData.dateFormats.date1})}},customStartDateValidator:{func:function(){var t=this;return{validate:function(e){if(oj.IntlConverterUtils.isoToLocalDate(e)>oj.IntlConverterUtils.isoToLocalDate(t.bindings.customEndDate()))throw new oj.ValidatorError(i.translate("daterange.picker.validation.dateRangeTitle"),i.translate("daterange.picker.validation.dateRangeMsg"));return!0}}}},customEndDateValidator:{func:function(){var t=this;return{validate:function(e){if(oj.IntlConverterUtils.isoToLocalDate(t.bindings.customStartDate())>oj.IntlConverterUtils.isoToLocalDate(e))throw new oj.ValidatorError(i.translate("daterange.picker.validation.dateRangeTitle"),i.translate("daterange.picker.validation.dateRangeMsg"));return!0}}}}},DatePicker:function(t){this._super(t)},bindView:function(t){this._super(t)},resetCustomDateRange:function(){var t=s().tz(this.bindings.application().timeZone||i.guessTimezone()).format(n.templateData.dateFormats.isoDate);this.setDateRange(t,t)},setDateRange:function(t,e){this.bindings.customStartDate(t),this.bindings.customEndDate(e)}});return o}),define("bots.package.view/dialog.value.synonyms",["module","bots.package.view/dialog","bots.package.shell/validators","bots.i18n"],function(t,e,i,n){var s,o=e.extend({module:t,name:"ValueSynonymsPopup"},{config:{type:"ojDialog"},bindings:{botsValidators:i,value:{func:ko.observable},synonyms:{func:ko.observableArray},isAddValuePopup:{func:ko.observable},actionButtonLabel:{func:ko.observable},valueValidator:{func:function(){var t=this;return{validate:function(e){if(!t._validateEntityValue(e))throw new oj.ValidatorError(n.translate("entities.valueSynonymsPopup.value.alreadyExists.summary"),n.translate("entities.valueSynonymsPopup.value.alreadyExists.detail"))}}}},createOrUpdateValue:function(){this.deps.uiComponents.validateFields($(this.config.baseElement))&&(this.enableDefaultButton(!1),this._createOrUpdateValue())},synonymValueChange:function(t,e){if(e&&"value"===e.option&&e.optionMetadata&&"shouldWrite"===e.optionMetadata.writeback){var i=[];_.each(e.value,function(t){var e=t.split(",").map(function(t){return t.trim()});i.push.apply(i,_.filter(e,function(t){return!!t}))}),e.value.splice(0),e.value.push.apply(e.value,_.uniq(i))}}},_duplicateCheckList:[],_validateEntityValue:function(t){return!_.some(this._duplicateCheckList,function(e){return e.canonicalName.toUpperCase()===t.toUpperCase().trim()})},ValueSynonymsPopup:function(t){this._super(t)},resetFields:function(t){this._super(t),this.bindings.value(""),this.bindings.synonyms([])},bindView:function(t){this._super(t)},open:function(t,e){this.config.resetFieldsOnOpen=!t||t.resetFieldsOnOpen,this.bindings.isAddValuePopup(t.resetFieldsOnOpen),this.bindings.actionButtonLabel(t.resetFieldsOnOpen?n.translate("general.create"):n.translate("general.update"));var i=e&&e.data;return this._duplicateCheckList=e&&e.duplicateCheckList||[],i&&(this.bindings.value(i.canonicalName),this.bindings.synonyms(i.synonyms&&i.synonyms.slice()||[])),this._super(),s=$.Deferred()},_createOrUpdateValue:function(){this.close(),s.resolve({canonicalName:this.bindings.value().trim(),synonyms:this.bindings.synonyms()}),s=void 0}});return o}),function(){require(["bots.templates/view","bots.package.view/view","bots.package.view/subview","bots.package.view/view.assetcollection","bots.package.view/view.clicktoedit","bots.package.view/dialog","bots.package.view/dialog.progress","bots.package.view/dataobject","bots.package.view/new.bot","bots.package.view/new.da","bots.package.view/clone.bot","bots.package.view/delete.bot","bots.package.view/publish.bot","bots.package.view/export.bot.logs","bots.package.view/http.headers.controller","bots.package.view/install.store.skill","bots.package.view/channel.routes.dialog","bots.package.view/train.bot.popup","bots.package.view/dialog.favorites.create","bots.package.view/dialog.segments.create","bots.package.view/dialog.trash.to","bots.package.view/date.picker","bots.package.view/dialog.value.synonyms","bots.package.view/displayname.name.autofiller"]),define("bots.package.view/package.main",[],function(){})}(),define("bots.package.view",["bots.package.view/package"],function(t){return t}),define("bots.package.view/package",function(){}),define("bots.package.util/date",[],function(){var t=function(t,e){var i=function(t){return t<10?"0"+t:t},n=function(t){return t<10?"00"+t:t<100?"0"+t:t},s=t.getUTCFullYear()+"-"+i(t.getUTCMonth()+1)+"-"+i(t.getUTCDate())+"T"+i(t.getUTCHours())+":"+i(t.getUTCMinutes());return"Millisecond"===e&&(s+=":"+i(t.getUTCSeconds())+"."+n(t.getUTCMilliseconds())),s+"Z"},e=function(e){return t(e,"Minute")},i=function(e){return t(e,"Millisecond")},n=function(t){var e=function(t){return t<10?"0"+t:t},i=function(t){return t<10?"00"+t:t<100?"0"+t:t},n=t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes());return n+=":"+e(t.getSeconds())+"."+i(t.getMilliseconds()),n+"Z"};return{convertToISODateStringUpToMinute:e,convertToISODateStringUpToMillisecond:i,convertLocalTimeasUTCISODateString:n}}),define("bots.package.util/knockout",["mcs.js.framework/knockout"],function(t){return ko.bindingHandlers.botsOpenInTab={init:function(t,e,i,n){var s=require("bots.ua"),o=require("bots.i18n");ko.bindingHandlers.suiteOpenInTab.initHelper({ua:s,i18n:o},t,e,i,n)}},ko.bindingHandlers.botsHelpPopup={init:function(t,e,i,n){ko.bindingHandlers.suiteHelpPopup.init(t,e,i,n)},update:function(t,e,i,n){ko.bindingHandlers.suiteHelpPopup.updateHelper({ua:require("bots.ua"),i18n:require("bots.i18n")},t,e,i,n)}},t}),define("bots.package.util/underscore",["underscore"],function(t){return t.mixin({guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"===t?e:3&e|8;return i.toString(16)})},findIndex:function(t,e){for(var i=0;i<t.length;i++)if(e(t[i],i,t))return i;return-1},hashCode:function(t){var e=0;if(0===t.length)return e;for(var i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e},isInNxxRange:function(t,e){return"number"==typeof e&&Math.floor(e/100)===t},stringEndsWith:function(t,e){if("string"==typeof t&&"string"==typeof e&&t.length>=e.length){var i=t.indexOf(e);return i!==-1&&i+e.length===t.length}return!1},stringsEqualIgnoreCase:function(t,e){return t===e||t&&e&&t.toUpperCase()===e.toUpperCase()},whenDataObjectChanges:function(t){var e=ko.onDataObjectChange(t),i=$.Deferred(),n=e.observable.subscribe(function(t){t===!0&&(i.resolve(!0),s())}),s=function(){i=void 0,n&&(n.dispose(),n=void 0),e&&(e.dispose(),e=void 0)};return{promise:i,dispose:s}},unwrap2:function(t,e){return ko.unwrap(ko.unwrap(t)[e])}}),t}),define("bots.package.util/cache.xhr",["jscache","moment"],function(t,e){var i=new t,n=function(t){return _.isString(t)?t:$.extend(!0,Array.isArray(t)?[]:{},t)},s=function(){i.removeWhere(function(t,e){return!Array.isArray(e)})};return $.ajaxPrefilter(function(t,o,a){if(o.cache){var r={success:o.success||o.complete||$.noop,error:o.error||o.complete||$.noop},l=o.url+(o.data?"_"+JSON.stringify(o.data):""),d="number"==typeof o.expiry?o.expiry:10;t.beforeSend=function(){var t=i.getItem(l);return Array.isArray(t)?(t.push(r),!1):t&&"object"==typeof t?(r.success.call(null,n(t.data),t.text,t.xhr),!1):(i.setItem(l,[r],{expirationSliding:300}),!0)},t.success=function(t,s,o){var a=i.getItem(l);if(i.setItem(l,{data:t,text:s,xhr:o},{expirationAbsolute:new Date(e().add(d,"seconds"))}),Array.isArray(a))for(var r=0;r<a.length;r++)a[r].success.call(null,n(t),s,o)},t.error=function(t){var e=i.removeItem(l);if(Array.isArray(e))for(var s=0;s<e.length;s++)e[s].error.call(null,n(t))}}else if("GET"!==(o.type||"GET").toUpperCase()){if("PUT"===o.type&&o.url.indexOf("/users/me/state")!==-1)return;s()}}),{xhrCache:i,forcePurgeAll:s}}),define("bots.package.util/filter.criteria",[],function(){var t={ENCLOSE:"ENCLOSE",CONDITION:"CONDITION",STRING:"STRING",NUMERIC:"NUMERIC",EVENT:"EVENT",DATETIME:"DATETIME"},e={STRING:{CONTAINS:"contains",MATCHES:"matches",NOT_CONTAINS:"does not contain",NOT_MATCHES:"does not match",BEGINS_WITH:"begins with",ENDS_WITH:"ends with",IS_NULL:"is null",IS_NOT_NULL:"is not null",MATCHES_ONE_OF:"matches one of",NOT_MATCHES_ONE_OF:"does not match one of"},NUMERIC:{GREATER_THAN:">",LESS_THAN:"<",EQUAL:"=",NOT_EQUAL:"!=",GREATER_THAN_OR_EQUAL:">=",LESS_THAN_OR_EQUAL:"<=",IS_NULL:"is null",IS_NOT_NULL:"is not null"},EVENT:{DID_HAPPEN:"did happen",DID_NOT_HAPPEN:"did not happen"},DATETIME:{NO_TIMEFRAME:"no timeframe",ANYTIME:"anytime",EQUALS:"equal to",GREATER_THAN_OR_EQUAL:"greater than or equal to",LESS_THAN_OR_EQUAL:"less than or equal to",BETWEEN_NUMBER:"between (#)",BETWEEN_DATES:"between (dates)",ON:"on",ON_OR_BEFORE:"on or before",ON_OR_AFTER:"on or after",RECURS_ANUALLY:"recurs annually",IS_TODAY:"is today",IS_NULL:"is null"}},i={STRING:_.invert(e.STRING),NUMERIC:_.invert(e.NUMERIC),EVENT:_.invert(e.EVENT),DATETIME:_.invert(e.DATETIME)},n={AND:"and",OR:"or"},s=_.invert(n),o=function(e,i){this.type=e||t.ENCLOSE,this.id=this.generateId(),this.type===t.ENCLOSE&&(this.filters=[],this.meta=i||"")};o.prototype.generateId=function(){return _.uniqueId(this.type+"-"+Date.now()+"-")},o.prototype.buildCondition=function(e){var i=new o(t.CONDITION);return i.op=e,i},o.prototype.buildEvent=function(e,i,n){var s=new o(t.EVENT);return s.test={op:e,arg:{se_category:i,se_action:n}},s},o.prototype.buildString=function(e,i,n){var s=new o(t.STRING);return s.column=e,s.test={op:i,arg:n},s},o.prototype.buildNumeric=function(e,i,n){var s=new o(t.NUMERIC);return s.column=e,s.test={op:i,arg:n},s},o.prototype.buildDatetime=function(e,i,n){var s=new o(t.DATETIME);return s.column=e,s.test={op:i,offset:n},s};var a=function(t,e){return t=(t||{}).filter||t,e=e||new o,_.each(_.keys(t),function(i){if(0===i.indexOf("enclose"))e.filters.push(a(t[i]));else if(0===i.indexOf("meta"))e.meta=t[i];else{var n=l(i,t);n&&e.filters.push(n)}}),e},r=function(t,e,i){return t=(t||{}).filter||t,i=i||[],_.each(_.keys(t),function(n){if(0===n.indexOf("enclose")){var s=r(t[n],e,e?i:null);e||i.push(s)}else if(0===n.indexOf("meta"))i.meta=t[n];else{var o=l(n,t);o&&i.push(o)}}),i},l=function(t,e){return 0===t.indexOf("bool")?o.prototype.buildCondition(s[e[t].content.toLowerCase()]):0===t.indexOf("profileEvent")?o.prototype.buildEvent(i.EVENT[e[t].test.op.toLowerCase()],e[t].test.arg.se_category,e[t].test.arg.se_action):0===t.indexOf("profileString")?o.prototype.buildString(e[t].column,i.STRING[e[t].test.op.toLowerCase()],e[t].test.arg):0===t.indexOf("profileNumeric")?o.prototype.buildNumeric(e[t].column,i.NUMERIC[e[t].test.op.toLowerCase()],e[t].test.arg):0===t.indexOf("profileDate")?o.prototype.buildDatetime(e[t].column,i.DATETIME[e[t].timeFrame.op.toLowerCase()],e[t].timeFrame.offset):null},d=function(i,s,o){if(s=s||{},o=o||{id:0},i.type===t.ENCLOSE){var a=0===o.id?"filter":t.ENCLOSE.toLowerCase()+o.id;o.id++,s[a]={meta:i.meta},_.each(i.filters,function(t){d(t,s[a],o)})}else if(i.type===t.CONDITION){var r="bool"+o.id++;s[r]={content:n[i.op]}}else i.type===t.EVENT?s.profileEvent={column:t.EVENT,test:{op:e.EVENT[i.test.op],arg:{se_category:i.test.arg.se_category,se_action:i.test.arg.se_action}}}:i.type===t.STRING?s.profileString={column:i.column,test:{op:e.STRING[i.test.op],arg:i.test.arg}}:i.type===t.NUMERIC?s.profileNumeric={column:i.column,test:{op:e.NUMERIC[i.test.op],arg:i.test.arg}}:i.type===t.DATETIME&&(s.profileDate={column:i.column,timeFrame:{op:e.DATETIME[i.test.op],offset:i.test.offset}});return s};return{TYPES:t,OPERATORS:e,CONDITIONS:n,Filter:o,parseTree:a,parseTreeArray:function(t){return r(t,!1)},parseFlat:function(t){return r(t,!0)},generate:d}}),define("bots.package.util/entity.match",[],function(){var t=["ADDRESS","CURRENCY","DATE","DURATION","EMAIL","NUMBER","PHONE_NUMBER","SET","TIME","URL","YES_NO"],e=function(t){function e(e){var n=e.entityName?e.entityName+" - ":"";_.each(_.keys(_.omit(e,"entityName")),function(e){i.push({key:n+e,value:t[e]})})}var i=[];return t.entityName&&("DURATION"===t.entityName?(t.startDate=new Date(t.startDate).toString(),t.endDate=new Date(t.endDate).toString()):"DATE"===t.entityName&&(t.date=new Date(t.date).toString())),e(t),i},i=function(i){var n=-1,s=[];return _.each(_.keys(i),function(o){i[o].length>0&&("object"==typeof i[o][0]?_.indexOf(t,o)>=0&&_.each(i[o],function(t){_.each(e(t),function(t){n++,s.push({entityName:o,entityDisplayName:t.key,value:[t.value],index:n})})}):(n++,s.push({entityName:o,entityDisplayName:o,value:i[o],index:n})))}),s};return{SYSTEM_ENTITY_NAMES:t,computeEntityMatchList:i}}),define("bots.package.util/yaml.metadata",["mcs.js.framework/class","js-yaml"],function(t,e){var i=t.extend("YamlMetadata",{__static__:{METADATA_KEYWORD:"$metadata$",COMMENT_KEYWORD:"$comment<id>$",METADATA_PREFIX:"#!",COMMENT_PREFIX:"#",YAML_KEY_PATTERN:/\S+:/,YAML_COMMENT_PATTERN:/^(\s*)#!?(.*)/,YAML_COMMENT_META_PATTERN:/^(\s*)#!/,METADATA_PATTERN:/^(\s*)\$metadata\$:\s+"(.*)"$/gm,METADATA_NEWLINES:/\\n/gm,COMMENT_PATTERN:/^(\s*)\$comment\d+\$:\s*(.*)$/gm,VARIABLE_PATTERN:/^\$(comment\d+|metadata)\$$/,JSON_FORMAT_PATTERN:/([:,])/g,JSON_QUOTE_PATTERN:/(\\)?"/g,JSON_QUOTE_PATTERN_REPLACE:function(t,e,i){return i?e:t},JSON_ESCAPED_QUOTE_PATTERN:/\\"/g,registerFoldMetadata:function(t){return!(!t||t.commands.foldMetadata)&&(t.registerHelper("fold","yaml-metadata",_.bind(function(e,i){for(var n=i.line-1;n>=0;n--){if(this.YAML_COMMENT_META_PATTERN.test(e.getLine(n)))return null;break}for(var s=i.line,o=e.getLine(i.line);this.YAML_COMMENT_META_PATTERN.test(o);)o=e.getLine(++s);if(s-1>=i.line)return{from:t.Pos(i.line,0),to:t.Pos(s-1,e.getLine(s-1).length)}},this)),t.commands.foldMetadata=function(e){e.operation(function(){for(var i=t.helpers.fold["yaml-metadata"],n=e.firstLine(),s=e.lastLine();n<=s;n++)e.foldCode(n,i,"fold")})},!0)}},deps:{},YamlMetadata:function(t){_.extend(this.config,t)},load:function(t){try{var i=e.safeLoad(this.preFilter(t));return i&&!_.isObject(i.states)&&(i.states={}),i}catch(t){throw this.error(t),t}},preFilter:function(t){_.isArray(t)||(t=t.split("\n"));var e,i="",n=!1,s=0;return t.forEach(function(t,o,a){if(this.__static__.YAML_COMMENT_PATTERN.test(t)){var r=this.__static__.YAML_COMMENT_META_PATTERN.test(t);if(r&&"meta"===n)i+=t.replace(this.__static__.YAML_COMMENT_PATTERN," $2");else{var l=0;if(n)i+="\n",l=e;else if(o>0){for(var d=0,c=t;o+d<a.length&&(!c.trim()||this.__static__.YAML_COMMENT_PATTERN.test(c));d++)c=a[o+d<a.length?o+d+1:o+d-1];l=c.indexOf(c.match(this.__static__.YAML_KEY_PATTERN))}i+=Array(l+1).join(" ")+t.replace(this.__static__.JSON_QUOTE_PATTERN,_.partial(this.__static__.JSON_QUOTE_PATTERN_REPLACE,'\\"')).replace(this.__static__.YAML_COMMENT_PATTERN,(r?this.__static__.METADATA_KEYWORD:this.__static__.COMMENT_KEYWORD.replace("<id>",s++))+": "+(r?"$2":'"$2"')),e=l}n=r?"meta":"comment"}else n&&(i+="\n",n=!1),i+=t+"\n"},this),i},dump:function(t){var i=e.safeDump(this.postFilter($.extend(!0,{},t)));return this.postFormat(i)},postFilter:function(t){return _.each(t,_.bind(function(e,i){e?i===this.__static__.METADATA_KEYWORD?t[i]=JSON.stringify(e,null,2):_.isObject(e)&&this.postFilter(e):delete t[i]},this)),t},postFormat:function(t){_.isArray(t)||(t=t.split("\n"));var e="";return t.forEach(function(t,i,n){if(this.__static__.METADATA_PATTERN.test(t)){t=t.replace(this.__static__.METADATA_PATTERN,"$1"+this.__static__.METADATA_PREFIX+"$2"),t=t.replace(this.__static__.JSON_ESCAPED_QUOTE_PATTERN,'"'),t=t.replace(this.__static__.JSON_ESCAPED_QUOTE_PATTERN,'"');var s=" ".repeat(t.search(/\S|$/));t=t.replace(this.__static__.METADATA_NEWLINES,"\n"+s+this.__static__.METADATA_PREFIX)}else this.__static__.COMMENT_PATTERN.test(t)&&(t=t.replace(this.__static__.COMMENT_PATTERN,"$1"+this.__static__.COMMENT_PREFIX+"$2"),t=t.replace(this.__static__.JSON_QUOTE_PATTERN,_.partial(this.__static__.JSON_QUOTE_PATTERN_REPLACE,"")),t=t.replace(this.__static__.JSON_ESCAPED_QUOTE_PATTERN,'"'));e+=t+"\n"},this),e}});return new i({})}),function(){require(["bots.package.util/byte","bots.package.util/date","bots.package.util/fileupload","bots.package.util/knockout","bots.package.util/underscore","bots.package.util/cache.xhr","bots.package.util/filter.criteria","bots.package.util/entity.match","bots.package.util/yaml.metadata"]),define("bots.package.util/package.main",[],function(){})}(),define("bots.package.util",["bots.package.util/package"],function(t){return t}),define("bots.package.util/package",function(){}),function(t){function e(t,e){return t.w('<div id="tester-batch-intent-initial" class="tester-batch-intent-initial" data-bind="if: numTotal()===0 && !isTesting() && userPreferences().batchintentInitialUA" style="display: inline-block"><div data-bind="inlinesvg: {width: 144, height: 169, project: \'bots\', basename: \'ua_arrow_3\'}" style="float:left"></div><div class="tester-initial-text">').h("i18n",e,{},{key:"tester.initial.batch-intent",filter:"h"},"h").w("</div></div>")}return t.register("bots/tester/batch-intent/batch-intent-initial",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="tester-batch-intent-pane"><div id="tester-batch-intent-section" data-bind="visible: isBatchTesting"><div data-bind="visible: !showDetails()"><div class="tester-batch-header oj-flex bots-helper-padding-left-10 item-vertical-align"><!-- ko if: isTesting() && !isFinished()--><div class="oj-flex-item"><button data-bind="click: stopTest,ojComponent: { component: \'ojButton\',chroming: \'half\',label: $root.i18n.translate(\'tester.batch.intent.stop\')}"></button></div><!-- /ko --><div class="oj-flex-item"><!-- ko if: isTesting() && !isStopped() && numTotal()!==numCompleted()--><div data-bind="text: $root.i18n.translate(\'tester.batch.intent.status.running\', numCompleted(), numTotal())"></div><!-- /ko --><!-- ko if: isFinished() && numTotal()===numCompleted() --><div data-bind="text: $root.i18n.translate(\'tester.batch.intent.status.final\', numPassed(), numFailed())"></div><!-- /ko --><!-- ko if: isStopped() --><div data-bind="text: $root.i18n.translate(\'tester.batch.intent.status.stopped\', numPassed(), numFailed())"></div><!-- /ko --></div></div>').p("bots/tester/batch-intent/batch-intent-initial",e,e,{}).w('<!-- ko if: numTotal() > 0 --><div class="oj-flex text-center bots-helper-margin-10"><div class="oj-flex-item"><div class="success-count"><h2 class="success-count" data-bind="text: numPassed()"></h2></div><!-- ko if: numPassed() !== 1 --><div data-bind="text: $root.i18n.translate(\'tester.batch.successes\')"></div><!-- /ko --><!-- ko if:numPassed() === 1 --><div data-bind="text: $root.i18n.translate(\'tester.batch.success\')"></div><!-- /ko --></div><div class="oj-flex-item text-center"><div class="failure-count"><h2  class="failure-count" data-bind="text: numFailed()"></h2></div><!-- ko if: numFailed() !== 1 --><div data-bind="text: $root.i18n.translate(\'tester.batch.failures\')"></div><!-- /ko --><!-- ko if:numFailed() === 1 --><div data-bind="text: $root.i18n.translate(\'tester.batch.failure\')"></div><!-- /ko --></div></div><!-- ko if: numCompleted() >  largeFileLimit --><div class="oj-flex text-center bots-helper-margin-10"><div class="oj-flex-item" data-bind="text: i18n.translate(\'tester.batch.limitToFailures\')"></div></div><!-- /ko --><!-- /ko --><div id="batch-intent-test-results"><div id="results-nav-list"data-bind="ojComponent: { component: \'ojNavigationList\',drillMode: \'none\',data: testResultsDS,item: {template: \'batch-test-item-template\'}}"></div></div><!-- ko if: numCompleted() > maxDisplayRows --><div class="oj-flex"><div class="oj-flex-item oj-sm-3"><!-- ko if: offset() - maxDisplayRows >= 0 --><button data-bind="click: showPrev,ojComponent: {component: \'ojButton\',label: i18n.translate(\'tester.batch.prev\'),chroming: \'half\',icons: {start:\'oj-fwk-icon-back oj-fwk-icon\'}}"></button><!-- /ko --></div><div class="oj-flex-item oj-sm-6 page-footer" data-bind="text: i18n.translate(\'tester.batch.pageFooter\', pageStart(), pageEnd(), testResults().length)"></div><div class="oj-flex-item oj-sm-3"><!-- ko if: offset() + maxDisplayRows < testResults().length --><button class="right"data-bind="click: showNext,ojComponent: {component: \'ojButton\',label: i18n.translate(\'tester.batch.next\'),chroming: \'half\',icons: {end:\'oj-fwk-icon-next oj-fwk-icon\'}}"></button><!-- /ko --></div></div><!-- /ko --></div><div data-bind="visible: showDetails()">').p("bots/tester/batch-intent/test-details",e,e,{"tester-type":"tester-batch-intent"}).w('</div></div></div><script type="text/html" id="batch-test-item-template"><li class="" data-bind="attr: { id: \'test-item-\' + ko.unwrap(id) }"><div><div class="oj-flex-bar tester-batch-test-item"><div class="oj-flex-bar-start item-vertical-align test-item-icon"><!-- ko if: isTesting() --><div class="animated-dotx3 bots-helper-padding-top-10" style="width:31px"><div class="animated-dot"><div class="animated-dot_1 dot"></div><div class="animated-dot_2 dot"></div><div class="animated-dot_3 dot"></div></div></div><!-- /ko --><!-- ko if: !isTesting() --><div style="width:21px; margin-left:10px;" class="bots-helper-padding-top-10"><!-- ko if: passed() -->').p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"qual_ok_16"}).w("<!-- /ko --><!-- ko if: !passed() -->").p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"qual_error_16"}).w('<!-- /ko --></div><!-- /ko --></div><div class="oj-flex-bar-middle item-vertical-align" style="max-width:276px;"><div class="oj-navigationlist-item-title bots-helper-ellipsis bots-helper-padding-top-10 bots-helper-padding-left-10"data-bind="text: utterance"></div></div><div class="oj-flex-bar-end item-vertical-align" style="padding-right:5px"><!-- ko if: !isTesting() --><button tabindex="0" class="bots-helper-padding-top-7" data-bind="ojComponent: {component: \'ojButton\',chroming: \'half\',display: \'icons\',icons: {start:\'oj-fwk-icon-caret-end oj-fwk-icon\'}},click: $parent.showTestDetails"></button><!-- /ko --></div></div></div></li></script>')}return t.register("bots/tester/batch-intent/batch-intent-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"tester-intent-load-batch-file-dialog"})}function i(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"tester.batch.intent.dialog.load"},"h")}function n(t,e){return e=e.shiftBlocks(o),t.w('<div class="oj-md-labels-inline oj-form-layout"><div id="batchFileUploadDropzone" class="dropzone" data-bind="visible: [\'none\', \'loading\', \'error\'].indexOf(fileStatus())>-1"><div id="batchFileUploadInit" class="oj-flex oj-sm-center dropzone-content" data-bind="if: [\'none\', \'error\'].indexOf(fileStatus())>-1"><div class="oj-flex-item oj-sm-12"><div class="oj-flex oj-sm-center"><div class="oj-flex-item oj-sm-12"><a data-bind="" id="batchFileUploadImageLink"><div class="dropDownIcon bots-col-center"></div></a></div></div><div class="oj-flex oj-sm-center"><div class="oj-flex-item"><a tabindex="0" data-bind="click: clickUpload, enterKey" id="batchFileUploadLink">').h("i18n",e,{},{key:"tester.batch.intent.dialog.fileLinkText"},"h").w("</a>  ").h("i18n",e,{},{key:"tester.batch.intent.dialog.dragText"},"h").w('</div></div></div></div><div id="batchFileUploadProgress" class="oj-flex oj-sm-center dropzone-content" data-bind="if: fileStatus()===\'loading\'"><div class="oj-flex-item oj-sm-12"><div class="oj-flex oj-sm-center"><div class="oj-flex-item"><span class="dropzone-filename" data-bind="text: fileInfo().name"></span><span>').h("i18n",e,{},{key:"tester.batch.intent.dialog.validatingText"},"h").w('</span><div class="progressbar"><div></div></div></div></div></div></div></div><input id="batchFileUploadFile" type="file" accept=".csv" style="display: none"/><div id="batchFileUploadDone" class="oj-flex oj-sm-center bots-no-margin upload-success-container" data-bind="visible: fileStatus()===\'ready\'"><div class="oj-flex-item oj-sm-12"><div class="oj-flex" style="display:flex"><div class="oj-flex-item upload-status-sm-1 bots-no-padding">').p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"stat_confirm_16"}).w('</div><div class="oj-flex-item upload-status-sm-11 bots-no-padding"><div class="oj-flex"><div class="oj-flex-item oj-sm-12 upload-status-icon-title-gap"><span class="upload-status-title" data-bind="text: fileInfo().name"></span><span> ').h("i18n",e,{},{key:"tester.batch.intent.dialog.validatedText"},"h").w('</span></div></div><div class="oj-flex"><div class="oj-flex-item oj-sm-12 upload-status-icon-title-gap"><span></span></div></div></div></div></div></div><div class="oj-flex oj-sm-center bots-no-margin upload-error-container" data-bind="visible: fileStatus()===\'error\'"><div class="oj-flex-item oj-sm-12"><div class="oj-flex" style="display:flex"><div class="oj-flex-item upload-error-sm-1 bots-no-padding">').p("bots/common/inlinesvg",e,e,{
width:"16",height:"16",project:"bots",basename:"stat_error_16"}).w('</div><div class="oj-flex-item upload-error-sm-11 bots-no-padding"><div class="oj-flex"><div class="oj-flex-item oj-sm-12 upload-status-icon-title-gap"><span class="upload-error-title" data-bind="text: $root.i18n.translate(\'tester.batch.intent.dialog.error.title\')"></span></div></div><div class="oj-flex"><div class="oj-flex-item oj-sm-12 upload-status-icon-title-gap"><span data-bind="text: fileError"></span></div></div></div></div></div></div><br><div class="oj-flex oj-sm-flex-items-initial oj-sm-justify-content-center"><div class="oj-flex-item"><div>').h("i18n",e,{},{key:"tester.batch.intent.dialog.maxConcurrent"},"h").w("&nbsp;<div id=\"concurrentRunsButtonSet\" data-bind=\"ojComponent: {component: 'ojButtonset'}\"><button data-bind=\"ojComponent: { component: 'ojButton', label: concurrentTests(), disabled: true }\"></button><button data-bind=\"ojComponent: { component: 'ojButton', icons: {start:'button-up'}, display: 'icons'}, click: increaseConcurrent\"></button><button data-bind=\"ojComponent: { component: 'ojButton', icons: {start:'button-down'}, display: 'icons'}, click: decreaseConcurrent\"></button></div></div></div></div></div>")}function s(t,e){return e=e.shiftBlocks(o),t.w('<button class="right green-button action-button" default="true"data-bind="ojComponent: { component: \'ojButton\',label: \'').h("i18n",e,{},{key:"tester.batch.intent.dialog.test",filter:"j"},"h").w("',disabled: fileStatus()!=='ready'},click: testFile\"/>")}t.register("bots/tester/batch-intent/load-file-dialog",e);var o={titleLabel:i,bodyHtml:n,footerHtml:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="tester-intent-batch-details"><div id="batch-test-details-content"><div class="tester-batch-header"><button data-bind="click: $root.showAll, ojComponent: { component: \'ojButton\',icons: {start:\'oj-fwk-icon-caret-start oj-fwk-icon\'},label: $root.i18n.translate(\'tester.batch.intent.back\')}"></button></div><div style="padding: 5px 16px 5px 16px"><div data-bind="text: $root.i18n.translate(\'tester.batch.intent.query\', currentRowContent().utterance)"class="bots-helper-margin-10"></div><div data-bind="text: $root.i18n.translate(\'tester.batch.intent.expectedIntent\', currentRowContent().predictedIntent)"class="bots-helper-margin-10"></div></div><!-- ko nobind --><div id="batch-intent-test-result-details" class="oj-form-layout intent-matches-container">').p("bots/tester/intent/sections/intent-matches",e,e,{"tester-type":"tester-batch-intent"}).w("</div><!-- /ko --></div>").p("bots/tester/conversation/json",e,e,{"tester-type":"tester-batch-intent"}).w("</div>")}return t.register("bots/tester/batch-intent/test-details",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"tester-attach-dialog"})}function i(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"tester.bot.attach.dialog.title"},"h")}function n(t,e){return e=e.shiftBlocks(o),t.w('<div style="width:400px"><div><label for=\'').f(e.get(["tester-type"],!1),e,"h").w("-attachment-type'>").h("i18n",e,{},{key:"tester.bot.attach.dialog.typeLabel"},"h").w("</label><select id='").f(e.get(["tester-type"],!1),e,"h").w("-attachment-type' data-bind=\"ojComponent: {component: 'ojSelect',value: attachmentType,rootAttributes: {style:'width:30em'}}\"><option value=\"image\">").h("i18n",e,{},{key:"tester.bot.attach.dialog.types.image"},"h").w('</option><option value="video">').h("i18n",e,{},{key:"tester.bot.attach.dialog.types.video"},"h").w('</option><option value="audio">').h("i18n",e,{},{key:"tester.bot.attach.dialog.types.audio"},"h").w('</option><option value="file">').h("i18n",e,{},{key:"tester.bot.attach.dialog.types.file"},"h").w("</option></select><label for='").f(e.get(["tester-type"],!1),e,"h").w("-attachment-url'>Attachment URL</label><!--input id='").f(e.get(["tester-type"],!1),e,"h").w('-attachment-url\'type="text"data-bind="ojComponent: {component: \'ojInputText\',value: attachmentUrl}"/--><textarea id="').f(e.get(["tester-type"],!1),e,"h").w('-attachment-url" rows="5"data-bind="ojComponent: {component: \'ojTextArea\',value: attachmentUrl,validators: [isAttachmentUrlValidator]},rootAttributes: {style:\'width:30em\'}"></textarea></div></div>')}function s(t,e){return e=e.shiftBlocks(o),t.w('<button class="right green-button action-button" default="true"data-bind="ojComponent: { component: \'ojButton\',label: \'').h("i18n",e,{},{key:"tester.bot.attach.dialog.send",filter:"j"},"h").w("',disabled: false},click: addAttachment\"/>")}t.register("bots/tester/bot/attach-dialog",e);var o={titleLabel:i,bodyHtml:n,footerHtml:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="tester-bot-initial" class="tester-initial" data-bind="if: jsonResults().length===0 && !isTesting() && !isPolling && !itemToAdd() && userPreferences().botInitialUA"><div class="tester-initial-text">').h("i18n",e,{},{key:"tester.initial.bot",filter:"h"},"h").w("</div><span data-bind=\"inlinesvg: {width: 144, height: 169, project: 'bots', basename: 'ua_arrow_1'}\"></span></div>")}return t.register("bots/tester/bot/bot-initial",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="tester-bot-pane"><div id="tester-bot-section">').p("bots/tester/bot/bot-result",e,e,{}).p("bots/tester/conversation/json",e,e,{"tester-type":"tester-bot"}).p("bots/tester/bot/bot-initial",e,e,{}).w("</div>").p("bots/tester/bottom",e,e,{"tester-type":"tester-bot"}).w("</div>").p("bots/tester/bot/attach-dialog",e,e,{"tester-type":"tester-bot"})}return t.register("bots/tester/bot/bot-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="" id="botTest-form-container"><div data-bind="if: uiConversation().length>0" class="bot-section"><!-- ko foreach: uiConversation -->').p("bots/tester/conversation/item",e,e,{"tester-type":"tester-bot"}).w("<!-- /ko --><!-- ko if: isTesting -->").p("bots/tester/conversation/animation",e,e,{"tester-type":"tester-bot"}).w("<!-- /ko --></div></div>")}return t.register("bots/tester/bot/bot-result",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="tester-bottom ').f(e.get(["tester-type"],!1),e,"h").w('"><div class="bottom-bar-formline"><div id=\'').f(e.get(["tester-type"],!1),e,"h").w("-buttonset' ><!-- ko if: '").f(e.get(["tester-type"],!1),e,"h").w("'==='tester-bot' --><button id='attach-").f(e.get(["tester-type"],!1),e,"h").w("' data-bind=\"click: attach, ojComponent: { component: 'ojButton', chroming:'outlined', icons: { start: 'tester-attach-icon' }}\"></button><!-- /ko --><button data-bind=\"click: sendText, ojComponent: { component: 'ojButton', label: $root.i18n.translate('tester.conversation.send')}\"></button></div><input data-bind=\"ojComponent: {component: 'ojInputText', value:itemToAdd, rootAttributes:{'style': 'margin:0'}}\" id=\"").f(e.get(["tester-type"],!1),e,"h").w('-input" placeholder="').h("i18n",e,{},{key:"tester.conversation.placeholder",filter:"j"},"h").w('" /></div></div>')}return t.register("bots/tester/bottom",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="bot-action-list"><!-- ko foreach: $data.actions --><!-- ko if: $index()===0 --><div class="bot-action-item" data-bind="click: $root.clickChoice, attr: { value: $data }"><span data-bind="text: $data.label"></span></div><!-- /ko --><!-- ko if: $index()!==0 --><div class="bot-action-item bot-action-item-border" data-bind="click: $root.clickChoice, attr: { value: $data }"><span data-bind="text: $data.label"></span></div><!-- /ko --><!-- /ko --></div>')}return t.register("bots/tester/conversation/actions",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w("<div data-bind=\"attr: {id: '").f(e.get(["tester-type"],!1),e,"h").w('-li-000\'}" class="').f(e.get(["tester-type"],!1),e,"h").w('-li"><div style="margin-right: 80px; width: 70px"><div class="oj-sm-12 ').f(e.get(["tester-type"],!1),e,"h").w('-bot"><div class="animated-dotx3"><div class="animated-dot"><div class="animated-dot_1 dot"></div><div class="animated-dot_2 dot"></div><div class="animated-dot_3 dot"></div></div></div></div></div></div>')}return t.register("bots/tester/conversation/animation",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w("-").f(e.get(["role"],!1),e,"h").w('"><div class="bot-attachment-item"><!-- ko if: $data.attachment.type===\'image\' --><img style=\'height: 100%; width: 100%; object-fit: contain\' data-bind="attr: {src: $data.attachment.url, onload: $parents[0].imageLoaded()}"/><!-- /ko --><!-- ko if: $data.attachment.type===\'video\' --><video style=\'height: 100%; width: 100%; object-fit: contain\' autoplay controls data-bind="attr: {src: $data.attachment.url, onload: $parents[0].imageLoaded()}"/><!-- /ko --><!-- ko if: $data.attachment.type===\'audio\' --><audio autoplay controls data-bind="attr: {src: $data.attachment.url, onload: $parents[0].imageLoaded()}">Your browser does not support the <code>audio</code> element.</audio><!-- /ko --><!-- ko if: $data.attachment.type===\'file\' --><a class="header" data-bind="text: $data.attachment.url, attr: {href: $data.attachment.url, target: \'_blank\'}" style="word-break: break-all;"></a><!-- /ko --><!-- ko if: $data.actions && $data.actions.length>0 -->').p("bots/tester/conversation/actions",e,e,{}).w("<!-- /ko --></div></div>")}return t.register("bots/tester/conversation/attachment",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="bot-card-item" style="max-width: 326px"><div data-bind="text: $data.title" class="bot-card-title"></div><!-- ko if: $data.description --><div data-bind="text: $data.description" class="bot-card-desc"></div><!-- /ko --><!-- ko if: $data.imageUrl --><img style=\'height: 100%; width: 100%; object-fit: contain\' data-bind="attr: {src: $data.imageUrl, alt: $data.title, onload: $root.imageLoaded()}"/><!-- /ko --><!-- ko if: $data.url --><div class="bot-card-url"><a data-bind="text: $data.url, attr: {href: $data.url}" style="overflow-wrap:break-word;"></a></div><!-- /ko --><!-- ko if: $data.actions && $data.actions.length>0 -->').p("bots/tester/conversation/actions",e,e,{}).w("<!-- /ko --></div>")}return t.register("bots/tester/conversation/card",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="oj-sm-12 ').f(e.get(["tester"],!1),e,"h").w("-bot ").f(e.get(["tester"],!1),e,"h").w('-bot-card"><div><!-- ko if: $data.layout===\'vertical\' --><div class="bot-card-list" style="text-align:right; margin-left:10px; margin-right:10px; border: none; background-color:none"><!-- ko foreach: cards -->').p("bots/tester/conversation/card",e,e,{}).w('<!-- /ko --><!-- ko if: $data.actions && $data.actions.length>0--><div class="bot-card-item-action-list">').p("bots/tester/conversation/actions",e,e,{}).w('</div><!-- /ko --></div><!-- /ko --><!-- ko if: $data.layout===\'horizontal\' --><div class="bot-card-list" style="text-align:right; margin-left:10px; margin-right:10px; border: none; background-color:none"><oj-film-strip id="').f(e.get(["tester"],!1),e,"h").w('-filmStrip" style="outline: 0"aria-label="').h("i18n",e,{},{key:"tester.conversation.cards.label",filter:"h"},"h").w('"arrow-placement="overlay"arrow-visibility="visible"><!-- ko foreach: cards --><div class="demo-filmstrip-item"data-bind="style: {display: ($index===0 ? \'\' : \'none\')}">').p("bots/tester/conversation/card",e,e,{}).w('</div><!-- /ko --></oj-film-strip><!-- ko if: $data.actions && $data.actions.length>0--><div class="bot-card-item-action-list">').p("bots/tester/conversation/actions",e,e,{}).w("</div><!-- /ko --></div><!-- /ko --></div></div>")}return t.register("bots/tester/conversation/cards",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="oj-sm-12 ').f(e.get(["tester"],!1),e,"h").w("-bot ").f(e.get(["tester"],!1),e,"h").w('-bot-choice"><div class="bot-choice-header" data-bind="text: text"></div><div><ul class="bot-choice-list" style="text-align:right; margin-left:10px; margin-right:10px; border: none; background-color:none"data-bind="ojComponent: { component: \'ojListView\',selectionMode: \'none\' }"><!-- ko foreach: actions --><li class="bot-choice-item" data-bind="click: $root.clickChoice, attr: { value: $data }"><span data-bind="text: $data.label"></span></li><!-- /ko --></ul></div></div>')}return t.register("bots/tester/conversation/choice",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w("-").f(e.get(["role"],!1),e,"h").w('"><div class="header" data-bind="text: $data.footerText" style="overflow-wrap:break-word;"></div></div>')}return t.register("bots/tester/conversation/footerText",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w('-bot-global-actions"><!-- ko foreach: $data.globalActions --><a class="action-button" data-bind="click: $root.clickChoice,ojComponent: { component: \'ojButton\', label: $data.label, chroming: \'outlined\' }"></a><!-- /ko --></div>')}return t.register("bots/tester/conversation/globalActions",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w("-").f(e.get(["role"],!1),e,"h").w('"><div class="header" data-bind="text: $data.headerText" style="overflow-wrap:break-word;"></div></div>')}return t.register("bots/tester/conversation/headerText",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w("<!-- ko if: party===0 --><div data-bind=\"attr: { id: '").f(e.get(["tester-type"],!1),e,"h").w("-li-' + $data['id'], party: $data['party'] }\" class=\"oj-flex ").f(e.get(["tester-type"],!1),e,"h").w('-li" style="margin-left: 80px"><!-- ko if: type===\'text\' -->').p("bots/tester/conversation/text",e,e,{tester:i,role:"self"}).w("<!-- /ko --><!-- ko if: type==='link' --><div class=\"").f(e.get(["tester-type"],!1),e,"h").w('-self"><a class="header" data-bind="text: text, attr: {href: text, target: \'_blank\'}" style="word-break: break-all;"></a></div><!-- /ko --><!-- ko if: type===\'location\' -->').p("bots/tester/conversation/location",e,e,{tester:n,role:"self"}).w("<!-- /ko --><!-- ko if: type==='attachment' -->").p("bots/tester/conversation/attachment",e,e,{tester:s,role:"self"}).w("<!-- /ko --></div><!-- /ko --><!-- ko if: party===1 --><div data-bind=\"attr: { id: '").f(e.get(["tester-type"],!1),e,"h").w("-li-' + $data['id'], party: $data['party'] }\" class=\"oj-flex ").f(e.get(["tester-type"],!1),e,"h").w("-li\" style=\"margin-right: 80px\"><!-- ko if: $data.hasOwnProperty('headerText') && $data.headerText!=='' -->").p("bots/tester/conversation/headerText",e,e,{tester:o,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='text' -->").p("bots/tester/conversation/text",e,e,{tester:a,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='link' --><div class=\"").f(e.get(["tester-type"],!1),e,"h").w('-bot"><a class="header" data-bind="text: text, attr: {href: text, target: \'_blank\'}" style="word-break: break-all;"></a></div><!-- /ko --><!-- ko if: type===\'choice\' -->').p("bots/tester/conversation/choice",e,e,{tester:r,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='card' -->").p("bots/tester/conversation/cards",e,e,{tester:l,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='attachment' -->").p("bots/tester/conversation/attachment",e,e,{tester:d,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='location' -->").p("bots/tester/conversation/location",e,e,{tester:c,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='raw' -->").p("bots/tester/conversation/text",e,e,{tester:u,role:"bot"}).w("<!-- /ko --><!-- ko if: $data.globalActions -->").p("bots/tester/conversation/globalActions",e,e,{tester:h,role:"bot"}).w("<!-- /ko --><!-- ko if: $data.hasOwnProperty('footerText') && $data.footerText!=='' -->").p("bots/tester/conversation/footerText",e,e,{tester:b,role:"bot"}).w("<!-- /ko --></div><!-- /ko -->")}function i(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function n(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function s(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function o(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function a(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function r(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function l(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function d(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function c(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function u(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function h(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function b(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}return t.register("bots/tester/conversation/item",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,b.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('  <div data-bind="if: jsonResults().length > 0"><div id="').f(e.get(["tester-type"],!1),e,"h").w('-jsonSection" class="json-section"data-bind="ojComponent: { component: \'ojCollapsible\',expanded: expandedJson,collapse: handleJson,expand: handleJson }"><h3 id="').f(e.get(["tester-type"],!1),e,"h").w('-json-header" class="oj-header-border">JSON</h3><div><a id=\'').f(e.get(["tester-type"],!1),e,"h").w('-saveFileLink\' style="float:right" href="#"data-bind="click: downloadFileAction"><span data-bind="inlinesvg: {width: 16, height: 16, project: \'bots\', basename: \'func_download_16\'}"></span></a><pre style="clear:both" class="jsonhl"><code id="').f(e.get(["tester-type"],!1),e,"h").w('-json" class="arduino-light" data-bind="highlight: fullJson"></code></pre></div></div></div>')}return t.register("bots/tester/conversation/json",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w("-").f(e.get(["role"],!1),e,"h").w('"><div class="bot-location-item"><!-- ko if: $data.location.title --><div data-bind="text: $data.location.title" class="bot-location-title"></div><!-- /ko --><!-- ko if: $data.actions && $data.actions.length>0 -->').p("bots/tester/conversation/actions",e,e,{}).w("<!-- /ko --></div><!-- ko if: $data.globalActions && $data.globalActions.length>0 -->").p("bots/tester/conversation/globalActions",e,e,{tester:i}).w("<!-- /ko --></div>")}function i(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}return t.register("bots/tester/conversation/location",e),e.__dustBody=!0,i.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w("-").f(e.get(["role"],!1),e,"h").w('"><div class="header" data-bind="text: text" style="overflow-wrap:break-word;"></div></div>')}return t.register("bots/tester/conversation/text",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="tester-intent-initial" class="tester-initial" data-bind="if: jsonResults().length===0 && !isTesting() && !itemToAdd() && userPreferences().intentInitialUA"><div class="tester-initial-text">').h("i18n",e,{},{key:"tester.initial.intent",filter:"h"},"h").w("</div><span data-bind=\"inlinesvg: {width: 144, height: 169, project: 'bots', basename: 'ua_arrow_1'}\"></span></div>")}return t.register("bots/tester/intent/intent-initial",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["type"],!1),e,"h").w('-pane"><div id="').f(e.get(["type"],!1),e,"h").w('-section"><div class="oj-flex bots-helper-padding-10" id="intent-test-toolbar"><div class="oj-flex-item"><!-- ko if: isBatchTesting --><button id="intent-batch-tester-load-buttton"data-bind="click: loadFile,ojComponent:{component: \'ojButton\',chroming: \'half\',label: $root.i18n.translate(\'tester.qna.load\')}"></button><!-- /ko --></div><div class="oj-flex-item oj-sm-flex-0 right bots-helper-padding-top-5 bots-helper-padding-right-10"><label id="').f(e.get(["type"],!1),e,"h").w('-batch-switch-label" for="').f(e.get(["type"],!1),e,"h").w('-batch-switch">').h("i18n",e,{},{key:"tester.batch.title",filter:"j"},"h").w('</label></div><div class="oj-flex-item oj-sm-flex-0 right bots-helper-padding-right-10"><input id="').f(e.get(["type"],!1),e,"h").w('-batch-switch" data-bind="ojComponent: {component: \'ojSwitch\', value: isBatchTesting}"/></div></div><div id="intent-test-content"><!-- ko if: !isBatchTesting() --><div data-bind="if: uiConversation() && uiConversation().length>0" class="bot-section"><!-- ko foreach: uiConversation -->').p("bots/tester/conversation/item",e,e,{"tester-type":i}).w("<!-- /ko --></div><!-- ko if: isTesting -->").p("bots/tester/conversation/animation",e,e,{"tester-type":n}).w("<!-- /ko --><!-- /ko --><!-- ko nobind -->").p("bots/tester/batch-intent/load-file-dialog",e,e,{}).w('<!-- /ko --><!-- ko nobind --><div id="intent-test-details"  class="oj-form-layout intent-matches-container"><!-- ko ifnot: isBatchTesting -->').p("bots/tester/intent/sections/intent-matches",e,e,{"tester-type":s}).w('<!-- /ko --></div><!-- /ko --><!-- ko nobind --><div id="intent-batch-test-results" class="oj-form-layout intent-matches-container">').p("bots/tester/batch-intent/batch-intent-pane",e,e,{}).w("</div><!-- /ko --><!-- ko if: !isBatchTesting() -->").p("bots/tester/conversation/json",e,e,{"tester-type":o}).p("bots/tester/intent/intent-initial",e,e,{}).w("<!-- /ko --></div></div><!-- ko if: !isBatchTesting() -->").p("bots/tester/bottom",e,e,{"tester-type":a}).w("<!-- /ko --></div>")}function i(t,e){return t.f(e.get(["type"],!1),e,"h")}function n(t,e){return t.f(e.get(["type"],!1),e,"h")}function s(t,e){return t.f(e.get(["type"],!1),e,"h")}function o(t,e){return t.f(e.get(["type"],!1),e,"h")}function a(t,e){return t.f(e.get(["type"],!1),e,"h")}return t.register("bots/tester/intent/intent-pane",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div data-bind="if: entityMatchList().length>0" class="entity-section"><!-- ko if: entityMatchList().length > 0 --><div class="oj-flex  oj-sm-flex-items-1 entity-header"><div class="oj-sm-6">').h("i18n",e,{},{key:"tester.entityMatches.entity.headerText"},"h").w('</div><div class="oj-sm-6">').h("i18n",e,{},{key:"tester.entityMatches.value.headerText"},"h").w('</div></div><!-- /ko --><!-- ko foreach: entityMatchList --><div class="oj-flex entity-data"><div class="oj-sm-6" ><a data-bind="click: $root.navigateToEntityLocation"href="#" ><div style="margin-right: 10px" data-bind="ellipsisTip: ko.unwrap(entityDisplayName)"></div></a></div><div class="oj-sm-6 bots-helper-ellipsis" data-bind="text: $data.value.join(\', \'), attr: {title: $data.value.join(\', \')}"></div></div><!-- /ko --></div>')}return t.register("bots/tester/intent/sections/entity-matches",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div data-bind="visible: intentMatchList().length && isTesting() === false" class="intent-section"><!-- ko foreach: intentMatchList --><!-- ko if: $data.index === 0 --><div class="oj-flex intent-header"><div class="oj-sm-4">').h("i18n",e,{},{key:"tester.intent.matches.intent"},"h").w('</div><div class="oj-sm-8">').h("i18n",e,{},{key:"tester.intent.matches.confidence"},"h").w('</div></div><!-- /ko --><!-- ko if: $parent.showMore() || $data.index<$parent.showNumIntents --><div class="oj-flex intent-data"><div class="oj-sm-4"><div style="vertical-align: sub"><a data-bind="click: $root.navigateToIntentLocation"href="#" ><div style="margin-right: 10px; padding-top:3px" data-bind="ellipsisTip: ko.unwrap(intentName)"></div></a></div></div><div class="oj-sm-5"><div style="display:inline-block; vertical-align: sub"data-bind="ojComponent: { component: \'ojProgressbar\',value: $data.score,rootAttributes: { class: \'intent-confidence-bar-\' + $data.class } }"></div></div><div class="oj-sm-3" ><div class="oj-flex"><div aria-labelledby="mainlabelid" class="oj-flex-item intent-select"data-bind="attr: { id: \'').f(e.get(["tester-type"],!1),e,"h").w("-choice-' + $data.index },ojComponent: { component: 'ojRadioset',value: $data.selected }\"><span class=\"oj-choice-row-inline oj-flex\"><label data-bind=\"attr: { for: '").f(e.get(["tester-type"],!1),e,"h").w('-select-choice-\' + $data.index}, text:$data.scorepct" class="score oj-flex-item"></label><!-- ko if: $root.isDraftVersion() --><input type="radio" name="intent-select" class="oj-flex-item"data-bind="attr: { value: $data.intentName,id: \'').f(e.get(["tester-type"],!1),e,"h").w('-select-choice-\' + $data.index}"><!-- /ko --></span></div></div></div></div><!-- /ko --><!-- /ko --><!-- ko if: !showMore() && showNumIntents < intentMatchList().length --><div class="intent-data"><button class="more-button"data-bind="click: getMore,ojComponent: { component: \'ojButton\',chroming: \'half\',label: $root.i18n.translate(\'tester.showMore\') }"></button></div><!-- /ko --><!-- ko if: showMore() && showNumIntents < intentMatchList().length --><div class="bots-helper-margin-top-10"><span>').h("i18n",e,{},{key:"tester.showMoreFooter"},"h").w("</span></div><!-- /ko -->").p("bots/tester/intent/sections/entity-matches",e,e,{}).w('<button class="intent-button"data-bind="click: addExample,ojComponent: { component: \'ojButton\',disabled: addExampleDisabled(),label: $root.i18n.translate(\'tester.intent.addExample\') }"></button><div style="clear:both"></div></div>')}return t.register("bots/tester/intent/sections/intent-matches",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="botsFloatOverDock_tester-popup"><div id="tester-popup" class="tester-popup" style="top: ').f(e.getPath(!1,["botsStickyContextHeaderGeometry","totalHeaderHeight"]),e,"h").w('px"data-bind="suiteOnWindowScroll: [ { disabled: isSideMenuOpen(),handler: $root.sideMenuClosedOnWindowScrollHandler },{ disabled: !isSideMenuOpen(),handler: $root.sideMenuOpenOnWindowScrollResetHander } ]"><div class="tester-bar oj-flex-bar"><div class="bar-heading oj-flex-bar-start"><span>').h("i18n",e,{},{key:"tester.name"},"h").w("</span></div><div class=\"oj-flex-bar-end oj-sm-align-items-center tester-button-bar\"><button data-bind=\"click: resetTest,ojComponent: { component: 'ojButton',label: $root.i18n.translate('tester.conversation.clear'),rootAttributes: { class: 'gray-button bots-helper-margin-bottom-0' } }\"></button><button class=\"tester-close-button\"data-bind=\"click: closeTest,ojComponent: { component: 'ojButton',display: 'icons',icons: {start: 'bots-svgsprite-func-icon'},label: $root.i18n.translate('tester.conversation.close'),rootAttributes: { class: 'gray-button bots-helper-margin-bottom-0 bots-helper-margin-left-2' } },inlinesvg: { width: 15, height: 15, project: 'bots', basename: 'func_close_16' }\"></button></div></div><div><div id=\"tester-tabs\"data-bind=\"ojComponent: { component: 'ojTabs',rootAttributes: { class: 'bots-custom-horiztabs bots-panel-onlytopborder bots-tab-selection-bottom-bar tester-tab-bar' } }\"><ul><li id=\"tester-intent-tab\"><span>").h("i18n",e,{},{key:"tester.tabs.intent",filter:"h"},"h").w('</span></li><li id="tester-qna-tab"><span>').h("i18n",e,{},{key:"tester.tabs.qna",filter:"h"},"h").w('</span></li></ul><div class="oj-tabs-facet"></div><div id="tester-intent" class="tester-intent"><!-- ko nobind -->').p("bots/tester/intent/intent-pane",e,e,{type:"tester-intent"}).w('<!-- /ko --></div><div id="tester-qna" class="tester-qna"><!-- ko nobind -->').p("bots/tester/qna/qna-pane",e,e,{type:"tester-qna"}).w("<!-- /ko --></div></div></div></div></div>")}return t.register("bots/tester/main",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="tester-qna-initial" class="tester-initial" data-bind="if: jsonResults().length===0 && !isTesting() && !itemToAdd() && userPreferences().qnaInitialUA"><div class="tester-initial-text">').h("i18n",e,{},{key:"tester.initial.qna",filter:"h"},"h").w("</div><span data-bind=\"inlinesvg: {width: 144, height: 169, project: 'bots', basename: 'ua_arrow_1'}\"></span></div>")}return t.register("bots/tester/qna/qna-initial",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["type"],!1),e,"h").w('-pane"><div id="').f(e.get(["type"],!1),e,"h").w('-section"><!-- ko ifnot: qnaList().length --><div class="oj-flex bots-helper-margin-20 bots-helper-padding-20"><div class="oj-flex-item"><span>').h("i18n",e,{},{key:"tester.qna.no-qna"},"h").w('</span></div></div><!-- /ko --><!-- ko if: qnaList().length --><!-- ko ifnot: allLanguageTags().length --><div class="oj-flex bots-helper-margin-20 bots-helper-padding-20"><div class="oj-flex-item"><span>').h("i18n",e,{},{key:"tester.qna.no-datasource"},"h").w('</span></div></div><!-- /ko --><!-- ko if: trainNeeded --><div class="oj-flex bots-helper-margin-20 bots-helper-padding-20"><div class="oj-flex-item"><span>').h("i18n",e,{},{key:"tester.qna.train-needed"},"h").w("</span></div></div><!-- /ko --><!-- /ko --><div class=\"oj-flex bots-helper-padding-15\" id=\"qna-test-toolbar\"><!-- ko ifnot: trainNeeded --><div class=\"oj-flex-item\"><!-- ko if: !isBatchTesting() && qnaList().length && allLanguageTags().length--><button id=\"qna-tester-name-link\"data-bind=\"ojComponent:{component: 'ojButton',chroming: 'half',label: qnaTesterContext},click: function(event){var popup = $('#qna-tester-select-popup');if (popup.ojPopup('isOpen')){popup.ojPopup('close');}else{popup.ojPopup('open', '#qna-tester-name-link');}}\"></button><!-- /ko --><!-- ko if: $data.isBatchTesting() && qnaList().length && allLanguageTags().length --><button id=\"qna-batch-tester-load-buttton\"data-bind=\"click: loadFile,ojComponent:{component: 'ojButton',chroming: 'half',label: $root.i18n.translate('tester.qna.load')}\"></button><!-- /ko --></div><!-- ko if: qnaList().length && allLanguageTags().length --><div class=\"oj-flex-item oj-sm-flex-0 right bots-helper-padding-top-5 bots-helper-padding-right-10\"><label id=\"").f(e.get(["type"],!1),e,"h").w('-batch-switch-label" for="').f(e.get(["type"],!1),e,"h").w('-batch-switch">').h("i18n",e,{},{key:"tester.batch.title",filter:"j"},"h").w('</label></div><div class="oj-flex-item oj-sm-flex-0 right bots-helper-padding-right-10"><input id="').f(e.get(["type"],!1),e,"h").w('-batch-switch" data-bind="ojComponent: {component: \'ojSwitch\', value: isBatchTesting}"/></div><!-- /ko -->').p("bots/tester/qna/sections/qna-select",e,e,{}).w('<!-- /ko --></div><div id="qna-test-content"><!-- ko if: !isBatchTesting() && qnaList().length && allLanguageTags().length--><div data-bind="if: uiConversation() && uiConversation().length>0" class="bot-section"><!-- ko foreach: uiConversation -->').p("bots/tester/conversation/item",e,e,{"tester-type":i}).w("<!-- /ko --></div><!-- ko if: isTesting -->").p("bots/tester/conversation/animation",e,e,{"tester-type":n}).w("<!-- /ko --><!-- /ko --><!-- ko nobind -->").p("bots/tester/qna/sections/load-qna-file-dialog",e,e,{}).w('<!-- /ko --><!-- ko nobind --><div id="qna-test-details" class="oj-form-layout qna-matches-container"><!-- ko ifnot: isBatchTesting -->').p("bots/tester/qna/sections/qna-matches",e,e,{"tester-type":s}).w('<!-- /ko --></div><!-- /ko --><!-- ko nobind --><div id="qna-batch-test-results" class="oj-form-layout qna-matches-container">').p("bots/tester/qna/sections/batch-qna-pane",e,e,{}).w("</div><!-- /ko --><!-- ko ifnot: isBatchTesting -->").p("bots/tester/conversation/json",e,e,{"tester-type":o}).p("bots/tester/qna/qna-initial",e,e,{}).w("<!-- /ko --></div></div><!-- ko ifnot: isBatchTesting --><!-- ko ifnot: trainNeeded --><!-- ko if: qnaList().length && allLanguageTags().length -->").p("bots/tester/bottom",e,e,{"tester-type":a}).w("<!-- /ko --><!-- /ko --><!-- /ko --></div><!-- ko nobind -->").p("bots/tester/qna/sections/qna.dialog",e,e,{
type:"tester-qna"}).w("<!-- /ko --><!-- ko nobind -->").p("bots/tester/qna/sections/qna.dialog",e,e,{type:"tester-qna-batch"}).w("<!-- /ko -->")}function i(t,e){return t.f(e.get(["type"],!1),e,"h")}function n(t,e){return t.f(e.get(["type"],!1),e,"h")}function s(t,e){return t.f(e.get(["type"],!1),e,"h")}function o(t,e){return t.f(e.get(["type"],!1),e,"h")}function a(t,e){return t.f(e.get(["type"],!1),e,"h")}return t.register("bots/tester/qna/qna-pane",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="tester-batch-qna-pane"><div id="tester-batch-qna-section" data-bind="visible: $data.isBatchTesting()"><div data-bind="visible: !showDetails()"><div class="tester-batch-header oj-flex bots-helper-padding-left-10 item-vertical-align "><!-- ko if: isTesting() && !isFinished()--><div class="oj-flex-item"><button data-bind="click: stopTest,ojComponent: { component: \'ojButton\',chroming: \'half\',label: $root.i18n.translate(\'tester.batch.intent.stop\')}"></button></div><!-- /ko --><div class="oj-flex-item"><!-- ko if: isTesting() && numTotal()!==numCompleted()--><div class="oj-flex-item right bots-helper-padding-top-7" data-bind="text: $root.i18n.translate(\'tester.batch.intent.status.running\', numCompleted(), numTotal())"></div><!-- /ko --></div></div><!-- ko if: numTotal() > 0 --><div class="oj-flex text-center"><div class="oj-flex-item"><div class="success-count"><h2 class="success-count" data-bind="text: numPassed()"></h2></div><!-- ko if: numPassed() !== 1 --><div data-bind="text: $root.i18n.translate(\'tester.batch.successes\')"></div><!-- /ko --><!-- ko if:numPassed() === 1 --><div data-bind="text: $root.i18n.translate(\'tester.batch.success\')"></div><!-- /ko --></div><div class="oj-flex-item text-center"><div class="failure-count"><h2  class="failure-count" data-bind="text: numFailed()"></h2></div><!-- ko if: numFailed() !== 1 --><div data-bind="text: $root.i18n.translate(\'tester.batch.failures\')"></div><!-- /ko --><!-- ko if:numFailed() === 1 --><div data-bind="text: $root.i18n.translate(\'tester.batch.failure\')"></div><!-- /ko --></div></div><!-- ko if: numCompleted() >  largeFileLimit --><div class="oj-flex text-center bots-helper-margin-10"><div class="oj-flex-item" data-bind="text: i18n.translate(\'tester.batch.limitToFailures\')"></div></div><!-- /ko --><!-- /ko --><div id="batch-qna-test-results" class="bots-helper-margin-top-10"><div id="qna-results-nav-list"data-bind="ojComponent: { component: \'ojNavigationList\',drillMode: \'none\',data: testResultsDS,item: {template: \'batch-qna-test-item-template\'}}"></div></div><!-- ko if: numCompleted() > maxDisplayRows --><div class="oj-flex"><div class="oj-flex-item oj-sm-3"><!-- ko if: offset() - maxDisplayRows >= 0 --><button data-bind="click: showPrev,ojComponent: {component: \'ojButton\',label: i18n.translate(\'tester.batch.prev\'),chroming: \'half\',icons: {start:\'oj-fwk-icon-back oj-fwk-icon\'}}"></button><!-- /ko --></div><div class="oj-flex-item oj-sm-6 page-footer" data-bind="text: i18n.translate(\'tester.batch.pageFooter\', pageStart(), pageEnd(), testResults().length)"></div><div class="oj-flex-item oj-sm-3"><!-- ko if: offset() + maxDisplayRows < testResults().length --><button class="right"data-bind="click: showNext,ojComponent: {component: \'ojButton\',label: i18n.translate(\'tester.batch.next\'),chroming: \'half\',icons: {end:\'oj-fwk-icon-next oj-fwk-icon\'}}"></button><!-- /ko --></div></div><!-- /ko --></div><div data-bind="visible: showDetails()">').p("bots/tester/qna/sections/batch-qna-test-details",e,e,{"tester-type":"tester-qna-batch"}).w('</div></div></div><script type="text/html" id="batch-qna-test-item-template"><li class="bots-helper-ellipsis" data-bind="attr: { id: \'qna-test-item-\' + ko.unwrap(id) }"><div class="bots-helper-ellipsis"><div class="oj-flex-bar tester-batch-test-item bots-helper-ellipsis"><div class="oj-flex-bar-start item-vertical-align test-item-icon"><!-- ko if: isTesting() --><div class="animated-dotx3 bots-helper-padding-top-10" style="width:31px"><div class="animated-dot"><div class="animated-dot_1 dot"></div><div class="animated-dot_2 dot"></div><div class="animated-dot_3 dot"></div></div></div><!-- /ko --><!-- ko if: !isTesting() --><div class="bots-helper-padding-top-10" style="width:21px; margin-left:10px;"><!-- ko if: passed() -->').p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"qual_ok_16"}).w("<!-- /ko --><!-- ko if: !passed() -->").p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"qual_error_16"}).w('<!-- /ko --></div><!-- /ko --></div><div class="oj-flex-bar-middle item-vertical-align bots-helper-padding-top-10 bots-helper-padding-left-10 bots-helper-ellipsis"><div class="oj-navigationlist-item-title bots-helper-ellipsis"data-bind="text: question"></div></div><div class="oj-flex-bar-end item-vertical-align bots-helper-padding-top-5 bots-helper-padding-right-5"><!-- ko if: !isTesting() --><button tabindex="0" class="bots-helper-padding-top-7" data-bind="ojComponent: {component: \'ojButton\',chroming: \'half\',display: \'icons\',icons: {start:\'oj-fwk-icon-caret-end oj-fwk-icon\'}},click: $parent.showTestDetails"></button><!-- /ko --></div></div></div></li></script>')}return t.register("bots/tester/qna/sections/batch-qna-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="tester-qna-batch-details"><div id="batch-qna-test-details-content"><div class="tester-batch-qna-header"><button data-bind="click: $root.showAll, ojComponent: { component: \'ojButton\',chroming: \'half\',icons: {start:\'oj-fwk-icon-caret-start oj-fwk-icon\'},label: $root.i18n.translate(\'tester.batch.intent.back\')}"></button></div><!-- ko if: currentRowContent --><div class="oj-flex" style="padding: 5px 16px 5px 16px"><div class="test-result-icon"><!-- ko if: currentRowContent().passed -->').p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"qual_ok_16",ariaLabelKey:"tester.qna.batch.success",titleKey:"tester.qna.batch.success"}).w("<!-- /ko --><!-- ko ifnot: currentRowContent().passed -->").p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"qual_error_16",ariaLabelKey:"tester.qna.batch.success",titleKey:"tester.qna.batch.success"}).w('<!-- /ko --></div><div data-bind="text: $root.i18n.translate(\'tester.qna.batch.query\', currentRowContent().question)"></div></div><!-- ko ifnot: currentRowContent().qnaId --><div id="').f(e.get(["tester-type"],!1),e,"h").w('-matches-no-content" class="bots-helper-margin-20"><span data-bind="text: currentRowContent().errorMessage"></span></div><!-- /ko --><!-- /ko --><!-- ko nobind --><div id="batch-qna-test-result-details" class="oj-form-layout intent-matches-container"><!-- ko foreach: expectedMatches --><div class="oj-flex" style="padding: 5px 16px 5px 16px" ><div class="oj-flex-item test-result-icon"><!-- ko ifnot: $data.id === "NOT_FOUND" -->').p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"qual_ok_16"}).w('<!-- /ko --><!-- ko if: $data.id === "NOT_FOUND" -->').p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"qual_error_16"}).w('<!-- /ko --></div><div class="oj-sm-11 oj-flex-item" data-bind="text: $root.i18n.translate(\'tester.qna.batch.expectedQuestion\', $index()+1, $data.title)"></div></div><!-- /ko --><!-- ko if: answerMatchList -->').p("bots/tester/qna/sections/qna-matches",e,e,{"tester-type":"tester-qna-batch"}).w("<!-- /ko --></div><!-- /ko --></div>").p("bots/tester/conversation/json",e,e,{"tester-type":"tester-qna-batch"}).w("</div>")}return t.register("bots/tester/qna/sections/batch-qna-test-details",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"tester-qna-load-batch-file-dialog",sizeKlazz:"tester-qna-load-batch-file-dialog"})}function i(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"tester.qna.batch.dialog.load"},"h")}function n(t,e){return e=e.shiftBlocks(o),t.w('<div class="oj-md-labels-inline oj-form-layout"><div id="qnaBatchFileUploadDropzone" class="dropzone" data-bind="visible: [\'none\', \'loading\', \'error\'].indexOf(fileStatus())>-1"><div id="qnaBatchFileUploadInit" class="oj-flex oj-sm-center dropzone-content" data-bind="if: [\'none\', \'error\'].indexOf(fileStatus())>-1"><div class="oj-flex-item oj-sm-12"><div class="oj-flex oj-sm-center"><div class="oj-flex-item oj-sm-12"><a data-bind="" id="qnaBatchFileUploadImageLink"><div class="dropDownIcon bots-col-center"></div></a></div></div><div class="oj-flex oj-sm-center"><div class="oj-flex-item"><a tabindex="0" data-bind="click: clickUpload, enterKey" id="qnaBatchFileUploadLink">').h("i18n",e,{},{key:"tester.qna.batch.dialog.fileLinkText"},"h").w("</a>  ").h("i18n",e,{},{key:"tester.qna.batch.dialog.dragText"},"h").w('</div></div></div></div><div id="qnaBatchFileUploadProgress" class="oj-flex oj-sm-center dropzone-content" data-bind="if: fileStatus()===\'loading\'"><div class="oj-flex-item oj-sm-12"><div class="oj-flex oj-sm-center"><div class="oj-flex-item"><span class="dropzone-filename" data-bind="text: fileInfo().name"></span><span>').h("i18n",e,{},{key:"tester.qna.batch.dialog.validatingText"},"h").w('</span><div class="progressbar"><div></div></div></div></div></div></div></div><input id="qnaBatchFileUploadFile" type="file" accept=".csv" style="display: none"/><div id="qnaBatchFileUploadDone" class="oj-flex oj-sm-center bots-no-margin upload-success-container" data-bind="visible: fileStatus()===\'ready\'"><div class="oj-flex-item oj-sm-12"><div class="oj-flex" style="display:flex"><div class="oj-flex-item upload-status-sm-1 bots-no-padding">').p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"stat_confirm_16"}).w('</div><div class="oj-flex-item upload-status-sm-11 bots-no-padding"><div class="oj-flex"><div class="oj-flex-item oj-sm-12 upload-status-icon-title-gap"><span class="upload-status-title" data-bind="text: fileInfo().name"></span><span> ').h("i18n",e,{},{key:"tester.qna.batch.dialog.validatedText"},"h").w('</span></div></div><div class="oj-flex"><div class="oj-flex-item oj-sm-12 upload-status-icon-title-gap"><span></span></div></div></div></div></div></div><div class="oj-flex oj-sm-center bots-no-margin upload-error-container" data-bind="visible: fileStatus()===\'error\'"><div class="oj-flex-item oj-sm-12"><div class="oj-flex" style="display:flex"><div class="oj-flex-item upload-error-sm-1 bots-no-padding">').p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"stat_error_16"}).w('</div><div class="oj-flex-item upload-error-sm-11 bots-no-padding"><div class="oj-flex"><div class="oj-flex-item oj-sm-12 upload-status-icon-title-gap"><span class="upload-error-title" data-bind="text: $root.i18n.translate(\'tester.qna.batch.dialog.error.title\')"></span></div></div><div class="oj-flex"><div class="oj-flex-item oj-sm-12 upload-status-icon-title-gap"><span data-bind="text: fileError"></span></div></div></div></div></div></div><div class="oj-flex bots-helper-margin-top-20 oj-sm-flex-items-initial oj-sm-justify-content-center"><div class="oj-flex-item oj-sm-6"><label for="qnaConcurrentRuns">').h("i18n",e,{},{key:"tester.qna.batch.dialog.maxConcurrent"},"h").w('</label></div><div class="oj-flex-item oj-sm-6"><input id="qnaConcurrentRuns"data-bind="ojComponent: {component: \'ojInputNumber\',max:5,min:1,step:1,value:concurrentTests}"/></div></div><div class="oj-flex bots-helper-margin-top-20 oj-sm-flex-items-initial oj-sm-justify-content-center"><div class="oj-flex-item oj-sm-6"><label for="qnaMatchesToInclude">').h("i18n",e,{},{key:"tester.qna.batch.dialog.matchesToInclude"},"h").w('&nbsp;</label></div><div class="oj-flex-item oj-sm-6"><input id="qnaMatchesToInclude"data-bind="ojComponent: {component: \'ojInputNumber\',max:10,min:1,step:1,value:matchesToInclude}"/></div></div><div class="oj-flex bots-helper-margin-top-20 oj-sm-flex-items-initial oj-sm-justify-content-center"><div class="oj-flex-item oj-sm-6"><label id="switchLabel" for="testerQnALoadFileSwitch" class="oj-label-inline">').h("i18n",e,{},{key:"tester.qna.batch.dialog.matchesInOrder"},"h").w('</label></div><div class="oj-flex-item oj-sm-6"><input id="testerQnALoadFileSwitch" data-bind="ojComponent: {component: \'ojSwitch\', value: matchesInOrder}" /></div></div><div class="oj-flex bots-helper-margin-top-10"><div class="oj-flex-item oj-sm-6"><label for="tester-qna-batch-match-threshold">').h("i18n",e,{},{key:"tester.qna.matchThresholds",filter:"j"},"h").w("</label></div><div class=\"oj-flex-item oj-sm-3\"><input id=\"tester-qna-batch-match-threshold\"data-bind=\"ojComponent: {component: 'ojInputText',value: minimumShouldMatch,readOnly: useDefaultMinimumShouldMatch,rootAttributes: {style:'max-width:20em'}}\" /></div><div class=\"oj-flex-item oj-sm-3\"><!-- ko ifnot: useDefaultMinimumShouldMatch --><button data-bind=\"click: resetDefaultMinimumShouldMatch,ojComponent: { component: 'ojButton',chroming: 'half',label: i18n.translate('tester.qna.resetToDefault')}\"></button><!-- /ko --><!-- ko if: useDefaultMinimumShouldMatch --><button data-bind=\"click: editDefaultMinimumShouldMatch,ojComponent: { component: 'ojButton',chroming: 'half',label: i18n.translate('tester.qna.edit')}\"></button><!-- /ko --></div></div></div>")}function s(t,e){return e=e.shiftBlocks(o),t.w('<button class="right green-button action-button" default="true"data-bind="ojComponent: { component: \'ojButton\',label: \'').h("i18n",e,{},{key:"tester.qna.batch.dialog.test",filter:"j"},"h").w("',disabled: fileStatus()!=='ready'},click: testQnAFile\"/>")}t.register("bots/tester/qna/sections/load-qna-file-dialog",e);var o={titleLabel:i,bodyHtml:n,footerHtml:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["tester-type"],!1),e,"h").w('-matches-content" data-bind="visible: (answerMatchList().length || errorList().length) && isTesting() === false" class="qna-section"><!-- ko foreach: answerMatchList --><!-- ko if: $data.index === 1 --><div class="oj-flex qna-header"><!-- ko if: expectedMatchIndex --><div class="oj-sm-2">').h("i18n",e,{},{key:"tester.qna.batch.order"},"h").w("</div><!-- /ko --><div data-bind=\"css: $root.isDraftVersion() && $root.permissions().BOTS_WRITE ? 'oj-sm-6' : 'oj-sm-8'\">").h("i18n",e,{},{key:"tester.qna.matches.qna"},"h").w('</div><div class="oj-sm-4">').h("i18n",e,{},{key:"tester.qna.matches.rank"},"h").w('</div></div><!-- /ko --><!-- ko if: $parent.showMore() || $data.index<=$parent.showNumQnAs --><div class="oj-flex qna-data"><!-- ko if: expectedMatchIndex --><div class="oj-sm-2"><!-- ko if: expectedMatchIndex !== -1 --><span class="bots-helper-margin-left-10" data-bind="text: expectedMatchIndex"></span><!-- ko if: expectedMatchIndex == index -->').p("bots/common/inlinesvg",e,e,{width:"12",height:"12",project:"bots",basename:"qual_ok_16",klazz:"bots-helper-padding-top-5"}).w("<!-- /ko --><!-- ko if: expectedMatchIndex != index -->").p("bots/common/inlinesvg",e,e,{width:"12",height:"12",project:"bots",basename:"qual_error_16",klazz:"bots-helper-padding-top-5"}).w('<!-- /ko --><!-- /ko --></div><!-- /ko --><div data-bind="css: $root.isDraftVersion() && $root.permissions().BOTS_WRITE ? \'oj-sm-6\' : \'oj-sm-8\'"><div style="vertical-align: sub"><a data-bind="click: $root.editAnswer"href="#" ><div style="margin-right: 10px; padding-top:3px" data-bind="ellipsisTip: ko.unwrap(title)"></div></a></div></div><div class="oj-sm-2"><span class="bots-helper-margin-left-10" data-bind="text: index"></span></div><!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --><div class="oj-sm-2" ><div class="oj-flex"><div aria-labelledby="mainlabelid" class="oj-flex-item qna-select"data-bind="attr: { id: \'').f(e.get(["tester-type"],!1),e,"h").w("-choice-' + $data.index },ojComponent: { component: 'ojRadioset',value: $data.selected }\"><span class=\"oj-choice-row-inline oj-flex\"><label data-bind=\"attr: { for: '").f(e.get(["tester-type"],!1),e,"h").w('-select-choice-\' + $data.index}, text:$data.scorepct" class="score oj-flex-item"></label><input type="radio" name="qna-select" class="oj-flex-item"data-bind="attr: { value: $data.title,id: \'').f(e.get(["tester-type"],!1),e,"h").w('-select-choice-\' + $data.index }"></span></div></div></div><!-- /ko --></div><!-- /ko --><!-- /ko --><!-- ko if: !showMore() && showNumQnAs < answerMatchList().length --><div class="qna-data"><button class="more-button"data-bind="click: getMore,ojComponent: { component: \'ojButton\',chroming: \'half\',label: $root.i18n.translate(\'tester.showMore\') }"></button></div><!-- /ko --><!-- ko if: showMore() && showNumQnAs < answerMatchList().length --><div class="bots-helper-margin-top-10"><span>').h("i18n",e,{},{key:"tester.showMoreFooter"},"h").w('</span></div><!-- /ko --><!-- ko if: answerMatchList().length > 0--><button class="qna-button bots-helper-margin-top-20"data-bind="click: addToQuestion,ojComponent: { component: \'ojButton\',disabled: addQuestionDisabled(),label: $root.i18n.translate(\'tester.qna.addQuestion\') }"></button><!-- /ko --><!-- ko foreach: errorList --><div class="oj-flex bots-helper-margin-top-20"><div class="oj-flex-item"><span data-bind="text: $data"></span></div></div><!-- /ko --><div style="clear:both"></div></div>')}return t.register("bots/tester/qna/sections/qna-matches",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div style="display:none;min-width:450px;min-height:150px;" id="qna-tester-select-popup"data-bind="ojComponent:{component: \'ojPopup\',tail: \'simple\',modality:\'modeless\',position: {\'at\': {\'horizontal\':\'right\', \'vertical\': \'bottom\'}}}"><div class="oj-form-layout oj-sm-flex-items-initial oj-sm-justify-content-center oj-md-labels-inline"><!-- ko if: qnaList().length --><div class="oj-form tester-qna-select oj-md-labels-inline"><!-- ko ifnot: trainNeeded --><div class="oj-flex bots-helper-margin-top-10" data-bind="if: allLanguageTags().length"><div class="oj-flex-item oj-sm-4"><label for="tester-qna-lang-select">').h("i18n",e,{},{key:"tester.qna.language",filter:"j"},"h").w('</label></div><div class="oj-flex-item"><select id="tester-qna-lang-select"data-bind="ojComponent: {component: \'ojSelect\',value: selectedLanguage,rootAttributes: {style:\'max-width:10em\'}}"><!-- ko foreach: allLanguageTags --><option data-bind="value: $data, text: $data"></option><!-- /ko --></select></div></div><div class="oj-flex bots-helper-margin-top-10" data-bind="if: allLanguageTags().length"><div class="oj-flex-item oj-sm-4"><label for="tester-qna-match-threshold">').h("i18n",e,{},{key:"tester.qna.matchThresholds",filter:"j"},"h").w("</label></div><div class=\"oj-flex-item oj-sm-4\"><input id=\"tester-qna-match-threshold\"data-bind=\"ojComponent: {component: 'ojInputText',value: minimumShouldMatch,readOnly: useDefaultMinimumShouldMatch,rootAttributes: {style:'max-width:20em'}}\" /></div><div class=\"oj-flex-item oj-sm-4\"><!-- ko ifnot: useDefaultMinimumShouldMatch --><button data-bind=\"click: resetDefaultMinimumShouldMatch,ojComponent: { component: 'ojButton',chroming: 'half',label: i18n.translate('tester.qna.resetToDefault')}\"></button><!-- /ko --><!-- ko if: useDefaultMinimumShouldMatch --><button data-bind=\"click: editDefaultMinimumShouldMatch,ojComponent: { component: 'ojButton',chroming: 'half',label: i18n.translate('tester.qna.edit')}\"></button><!-- /ko --></div></div><div class=\"oj-flex bots-helper-margin-top-10\" data-bind=\"ifnot: allLanguageTags().length\"><span>").h("i18n",e,{},{key:"tester.qna.no-datasource",filter:"j"},"h").w('</span></div><!-- /ko --><!-- ko if: trainNeeded --><div class="oj-flex bots-helper-margin-top-10"><span>').h("i18n",e,{},{key:"tester.qna.train-needed",filter:"j"},"h").w("</span></div><!-- /ko --></div><!-- /ko --></div></div>")}return t.register("bots/tester/qna/sections/qna-select",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="oj-form oj-lg-labels-inline oj-xl-labels-inline oj-lg-odd-cols-5 oj-xl-odd-cols-3 oj-flex-items-pad"><div class="oj-flex-item oj-flex suite-helper-max-width"><div class="oj-flex-item suite-helper-max-width"></div><div class="oj-flex-item"><input data-bind="ojComponent: {component: \'ojInputText\',disabled: true,rootAttributes: {class: \'suite-helper-hidden\'},value: fieldQuestionId }"/></div></div><div class="oj-flex-item oj-flex suite-helper-max-width"><div class="oj-flex-item suite-helper-max-width"><label for="').f(e.get(["idPrefix"],!1),e,"h").w('-edit-questionCan" class="qna-label-font-color">').h("i18n",e,{},{key:"qna.allqna.edit.questionCan"},"h").w('</label></div><div class="oj-flex-item"><input id="').f(e.get(["idPrefix"],!1),e,"h").w("-edit-questionCan\"data-bind=\"ojComponent: {component: 'ojInputText',placeholder: $root.i18n.translate('qna.allqna.edit.placeholder.questionCan'),required: $root.isDraftVersion() && $root.permissions().BOTS_WRITE,readOnly: !($root.isDraftVersion() && $root.permissions().BOTS_WRITE),rootAttributes: {class: 'qna-data-font-color suite-helper-max-width'},translations: { required: {messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('qna.allqna.edit.requiredQuestionCan')}},value: fieldQuestionCan }\"/></div></div><div class=\"oj-flex-item oj-flex suite-helper-max-width\"><div class=\"oj-flex-item suite-helper-max-width\"><label for=\"").f(e.get(["idPrefix"],!1),e,"h").w('-edit-questionAlt"  class="right ').f(e.get(["idPrefix"],!1),e,"h").w('-edit-label">').h("i18n",e,{},{key:"qna.allqna.edit.questionAlt"},"h").w('</label></div><div class="oj-flex-item oj-flex"><div class="oj-flex-item oj-sm-11 suite-helper-padding-right-10"><input for="').f(e.get(["idPrefix"],!1),e,"h").w("-edit-questionAlt\" data-bind=\"ojComponent: {component: 'ojInputText',placeholder: $root.i18n.translate('qna.allqna.edit.placeholder.questionAlt'),rootAttributes: { class: 'qna-data-font-color suite-helper-max-width' },readOnly: !($root.isDraftVersion() && $root.permissions().BOTS_WRITE),value: fieldQuestionAlt }\"/></div><div class=\"oj-flex-item oj-sm-1\"><button id=\"").f(e.get(["idPrefix"],!1),e,"h").w("-addQnaButton\"class=\"right\"data-bind=\"ojComponent: {component:'ojButton',chroming: 'half',display: 'icons',disabled: !($root.isDraftVersion() && $root.permissions().BOTS_WRITE),icons: {start: 'bots-svgsprite-func-icon'},label: $root.i18n.translate('qna.allqna.edit.addQuestionAltTip')},visible: $root.isDraftVersion() && $root.permissions().BOTS_WRITE,inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_plus_16' },click: $root.addQuestionAlt\"></button></div></div></div><div class=\"oj-flex-item oj-flex suite-helper-max-width\"><!-- ko foreach: ko.computed(getQuestionsAlt) --><div class=\"oj-flex-item suite-helper-max-width\"></div><div class=\"oj-flex-item oj-flex\"><div class=\"oj-flex-item oj-sm-11 suite-helper-padding-right-10\"><input data-bind=\"ojComponent: {component: 'ojInputText',readOnly: !($root.isDraftVersion() && $root.permissions().BOTS_WRITE),placeholder: $root.i18n.translate('qna.allqna.edit.placeholder.questionAlt'),rootAttributes: { class: 'qna-data-font-color suite-helper-max-width' },value: question}\"/></div><div class=\"oj-flex-item oj-sm-1\"><button id=\"").f(e.get(["idPrefix"],!1),e,"h").w("-addCsnButton\"class=\"right\"data-bind=\"ojComponent: {component:'ojButton',chroming: 'half',display: 'icons',readOnly: !($root.isDraftVersion() && $root.permissions().BOTS_WRITE),icons: {start: 'bots-svgsprite-func-icon'},label: $root.i18n.translate('qna.allqna.edit.addQuestionAltTip')},click: $root.deleteQuestionAlt,inlinesvg: { width: 16, height: 16, project: 'bots', basename: 'func_delete_16' }\"></button></div></div><!-- /ko --></div><div class=\"oj-flex-item oj-flex suite-helper-max-width\"><div class=\"oj-flex-item suite-helper-max-width\"><label for=\"").f(e.get(["idPrefix"],!1),e,"h").w('-edit-answer" class="qna-label-font-color">').h("i18n",e,{},{key:"qna.allqna.edit.answer"},"h").w('</label></div><div class="oj-flex-item"><textarea id="').f(e.get(["idPrefix"],!1),e,"h").w("-edit-answer\"data-bind=\"ojComponent: {component: 'ojTextArea',placeholder: $root.i18n.translate('qna.allqna.edit.placeholder.answer'),required: $root.isDraftVersion() && $root.permissions().BOTS_WRITE,readOnly: !($root.isDraftVersion() && $root.permissions().BOTS_WRITE),rootAttributes: {class: 'qna-data-font-color suite-helper-max-width'},translations: { required: {messageSummary: $root.i18n.translate('general.notSoFast'),messageDetail: $root.i18n.translate('qna.allqna.edit.requiredAnswer')}},value: fieldAnswer}\"rows=\"5\"></textarea></div></div><!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --><div class=\"oj-flex-item oj-flex suite-helper-max-width\"><div class=\"oj-flex-item suite-helper-max-width\"><label for=\"").f(e.get(["idPrefix"],!1),e,"h").w('-edit-categories" class="qna-label-font-color">').h("i18n",e,{},{key:"qna.allqna.edit.categories"},"h").w('</label></div><div class="oj-flex-item"><input id="').f(e.get(["idPrefix"],!1),e,"h").w('-edit-categories"data-bind="ojComponent: {component: \'ojCombobox\',multiple: true,placeholder: $root.i18n.translate(\'qna.allqna.edit.placeholder.categories\'),rootAttributes: {class: \'qna-data-font-color suite-helper-max-width\'},value: fieldCategories}"/></div></div><!-- /ko --><!-- ko ifnot: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --><div class="oj-flex-item oj-flex suite-helper-max-width"><div class="oj-flex-item suite-helper-max-width"><label for="').f(e.get(["idPrefix"],!1),e,"h").w('-view-categories" class="qna-label-font-color">').h("i18n",e,{},{key:"qna.allqna.edit.categories"},"h").w('</label></div><div class="oj-flex-item"><input id="').f(e.get(["idPrefix"],!1),e,"h").w("-view-categories\"data-bind=\"ojComponent: {component: 'ojInputText',readOnly: true,placeholder: $root.i18n.translate('qna.allqna.edit.placeholder.categories'),rootAttributes: {class: 'qna-data-font-color suite-helper-max-width'},value: fieldCategories}\"/></div></div><!-- /ko --></div>")}return t.register("bots/tester/qna/sections/qna.body",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(l),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:i,sizeKlazz:n})}function i(t,e){return e=e.shiftBlocks(l),t.f(e.get(["type"],!1),e,"h").w("-edit-dialog")}function n(t,e){return e=e.shiftBlocks(l),t.f(e.get(["type"],!1),e,"h").w("-edit-dialog")}function s(t,e){return e=e.shiftBlocks(l),t.w("<!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE -->").h("i18n",e,{},{key:"qna.allqna.edit.titleEdit"},"h").w("<!-- /ko --><!-- ko ifnot: $root.isDraftVersion() && $root.permissions().BOTS_WRITE -->").h("i18n",e,{},{key:"qna.allqna.edit.titleView"},"h").w("<!-- /ko -->")}function o(t,e){return e=e.shiftBlocks(l),t.p("bots/tester/qna/sections/qna.body",e,e,{idPrefix:a})}function a(t,e){return e=e.shiftBlocks(l),t.f(e.get(["type"],!1),e,"h")}function r(t,e){return e=e.shiftBlocks(l),t.w('<div class="oj-flex oj-sm-flex-items-initial suite-helper-max-width"><div class="oj-flex-item oj-helper-margin-start-auto"><!-- ko if: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --><button class="green-button action-button" default="true"data-bind="ojComponent: { component: \'ojButton\',label: $root.i18n.translate(\'general.save\'),rootAttributes: { class: \'right\' } },click: $root.updateQnAContent" /><!-- /ko --><!-- ko ifnot: $root.isDraftVersion() && $root.permissions().BOTS_WRITE --><button class="green-button action-button" default="true"data-bind="ojComponent: { component: \'ojButton\',label: $root.i18n.translate(\'general.ok\'),rootAttributes: { class: \'right\' } },click: $root.closeQnAPopup" /><!-- /ko --></div></div>')}t.register("bots/tester/qna/sections/qna.dialog",e);var l={titleLabel:s,bodyHtml:o,footerHtml:r};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,e}(dust),define("bots.templates/tester",function(){}),define("bots.package.tester/model",["module","bots.model.rest","bots.i18n","bots.config"],function(t,e,i,n){var s=e.__class__.extend({module:t,name:"TesterRestModel"},{__static__:{BOT_TESTER_POLLING_SECONDS:1},config:{stringifyObjects:!1},TesterRestModel:function(t){this._super(t)},testConversation:function(t,e){this.restPost(e,"/bots/{botId}/test/messages",{data:JSON.stringify(_.omit(t,["botId","botName","resetCounter"])),dataType:"text",uriParams:{botId:t.botId}})},pollConversation:function(t,e){this.restGet(e,"/bots/{botId}/test/responses",{expiry:this.__static__.BOT_TESTER_POLLING_SECONDS,uriParams:{botId:t.botId},headers:{"Bots-UserId":t.userId}})},testIntent:function(t,e){this.removeHeader("Bots-UserId"),this.restGet(e,"/bots/{botId}/query",{stringifyObjects:!1,expiry:0,data:t,uriParams:{botId:t.botId}})},testQnA:function(t,e){this.removeHeader("Bots-UserId"),this.restPost(e,"/bots/{botId}/qnas/{qnaId}/search?languageTag={languageTag}",{stringifyObjects:!0,expiry:0,data:_.omit(t,"botId","qnaId","itemId","languageTag"),uriParams:{botId:t.botId,qnaId:t.qnaId,languageTag:t.languageTag}})},testBatchQnA:function(t,e){this.removeHeader("Bots-UserId");var i="/bots/{botId}/qnas/{qnaId}/testResult?languageTag={languageTag}&matchInOrder={matchInOrder}",n={botId:t.botId,qnaId:t.qnaId,languageTag:t.languageTag,matchInOrder:t.matchInOrder},s=_.omit(t,"botId","qnaId","languageTag","matchInOrder");t&&t.hasOwnProperty("offset")&&(i+="&offset={offset}",n=_.extend(n,{offset:t.offset.toString()}),s=_.omit(s,"offset")),t&&t.hasOwnProperty("limit")&&(i+="&limit={limit}",n=_.extend(n,{limit:t.limit.toString()}),s=_.omit(s,"limit")),this.restPost(e,i,{stringifyObjects:!0,expiry:0,data:s,uriParams:n})},getAllQnA:function(t,e){this.removeHeader("Bots-UserId"),this.restGet(e,"/bots/{botId}/qnas",{stringifyObjects:!1,expiry:0,uriParams:{botId:t.botId}})},getAnswer:function(t,e){this.removeHeader("Bots-UserId"),this.restGet(e,"/bots/{botId}/qnas/{qnaId}/answers/{answerId}",{stringifyObjects:!1,expiry:0,uriParams:{botId:t.botId,qnaId:t.qnaId,answerId:t.answerId}})},addToQuestion:function(t,e){this.restPut(e,"/bots/{botId}/qnas/{qnaId}/answers/{answerId}",{data:t.answers,uriParams:{botId:t.botId,qnaId:t.qnaId,answerId:t.answerId}})},updateQnAContent:function(t,e){this.restPut(e,"/bots/{botId}/qnas/{qnaId}/dataSources/{datasourceId}/answers/{answerId}",{data:t.qnaContent,uriParams:{qnaId:t.qnaId,datasourceId:t.datasourceId,answerId:t.id}})}});return new s(_.extend({},e.config,{baseUrl:e.config.baseUrl}))}),define("bots.package.tester/facade",["module","bots.facade","bots.package.tester/model"],function(t,e,i){var n=e.__class__.extend({module:t,name:"Facade"},{__static__:{globalChannels:{RELOAD_TESTER:{name:"tester.qna.reload",handler:function(t){this.publish(t)}},OPEN_SLIDE_OUT_TESTER:{name:"tester.open",handler:function(t){this.publish(t)}}}},Facade:function(){this._super();this.register({TEST_CONVERSATION:{name:"tester.bot.conversation",handler:function(t){var e=t.data.botId,n=t.data.botName,s=t.data.resetCounter;i.testConversation(t.data,_.bind(function(i){t.data=i,t.data.botId=e,t.data.botName=n,t.data.resetCounter=s,this.publish(t)},this))}},POLL_CONVERSATION:{name:"tester.bot.pollConversation",handler:function(t){var e=t.data.botId,n=t.data.botName,s=t.data.resetCounter;i.pollConversation(t.data,_.bind(function(i){t.data=i,t.data.botId=e,t.data.botName=n,t.data.resetCounter=s,this.publish(t)},this))}},UPDATE_LAYOUT:{name:"tester.updateLayout",handler:function(t){this.publish(t)}},UPDATE_TESTER_HEIGHT:{name:"tester.update.height",handler:function(t){this.publish(t)}},TEST_INTENT:{name:"tester.intent.utterance",handler:function(t){var e=t.data.botId,n=t.data.botName,s=t.data.resetCounter;
i.testIntent(_.omit(t.data,["botName","resetCounter"]),_.bind(function(i){t.data=i,t.data.botId=e,t.data.botName=n,t.data.resetCounter=s,this.publish(t)},this))}},TEST_BATCH_INTENT:{name:"tester.intent.batch",handler:function(t){var e=t.data.botId,n=t.data.botName,s=t.data.resetCounter,o=t.data.itemId,a=t.data.intentName;i.testIntent(_.omit(t.data,["botName","resetCounter","itemId"]),_.bind(function(i){t.data=i,t.data.botId=e,t.data.botName=n,t.data.resetCounter=s,t.data.itemId=o,t.data.intentName=a,this.publish(t)},this))}},PROCESS_INTENT_BATCH_FILE:{name:"tester.intent.batch.process",handler:function(t){this.publish(t)}},TESTER_INTENT_MODE:{name:"tester.intent.mode",handler:function(t){this.publish(t)}},SEND_ATTACHMENT:{name:"tester.bot.attachment.send",handler:function(t){this.publish(t)}},TEST_QNA:{name:"tester.qna.utterance",handler:function(t){var e=t.data.botId,n=t.data.botName,s=t.data.resetCounter,o=t.data.qnaId;i.testQnA(_.omit(t.data,["botName","resetCounter"]),_.bind(function(i){t.data=i,t.data.botId=e,t.data.botName=n,t.data.resetCounter=s,t.data.qnaId=o,this.publish(t)},this))}},GET_ALL_QNA:{name:"tester.qna.get.all.qna",handler:function(t){i.getAllQnA(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},GET_ANSWER:{name:"tester.qna.get.answer",handler:function(t){i.getAnswer(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},ADD_TO_QUESTION:{name:"tester.qna.add.to.question",handler:function(t){i.addToQuestion(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},PROCESS_QNA_BATCH_FILE:{name:"tester.qna.batch.process",handler:function(t){this.publish(t)}},TESTER_QNA_MODE:{name:"tester.qna.mode",handler:function(t){this.publish(t)}},RESET_RESULTS:{name:"tester.qna.reset",handler:function(t){this.publish(t)}},TEST_BATCH_QNA:{name:"tester.qna.batch",handler:function(t){var e=t.data.botId,n=t.data.botName,s=t.data.resetCounter,o=t.data.itemId,a=t.data.qnaId,r=t.data.languageTag,l=t.data.question,d=t.data.expectedMatches,c=t.data.matchInOrder;i.testBatchQnA(_.omit(t.data,["botName","qnaName","resetCounter","itemId"]),_.bind(function(i){t.data=i,t.data.botId=e,t.data.botName=n,t.data.resetCounter=s,t.data.itemId=o,t.data.qnaId=a,t.data.question=l,t.data.languageTag=r,t.data.expectedMatches=d,t.data.matchInOrder=c,this.publish(t)},this))}},TESTER_UPDATE_QNA_CONTENT:{name:"tester.update.qna.content",handler:function(t){i.updateQnAContent(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}}})}});return new n}),define("bots.package.tester/attach",["module","bots.package.shell/validators","bots.package.view/dialog","bots.i18n"],function(t,e,i,n){function s(t){var e=document.createElement("a");return e.href=t,"http:"===e.protocol||"https:"===e.protocol?e.host&&e.host!==window.location.host:["file:","ftp:","sftp:","ftps:"].indexOf(e.protocol)>-1}var o,a=i.extend({module:t,name:"AttachDialog"},{__static__:{ATTACHMENT_TYPE:["image","video","audio","file"]},config:{type:"ojDialog"},bindings:{botsValidators:e,attachmentType:{func:ko.observable,args:[["image"]]},attachmentUrl:{func:ko.observable},addAttachment:function(t){this.deps.uiComponents.validateFields($(this.config.baseElement))&&this.bindings.attachmentUrl()&&this.notify({SEND_ATTACHMENT:{data:{type:this.bindings.attachmentType(),url:this.bindings.attachmentUrl()}}},{actionSpinner:!1})},isAttachmentUrlValidator:{func:function(){return{validate:function(t){if(t&&!s(t))throw new oj.ValidatorError(n.translate("tester.conversation.attach.dialog.error.validation.summary"),n.translate("tester.conversation.attach.dialog.error.validation.detail"));return!0}}}},closeDialog:function(){},openDialog:function(){this.bindings.attachmentUrl(""),this.bindings.attachmentType(["image"])}},setupEventHandlers:function(){$("#tester-attach-dialog").on("ojclose",this.bindings.closeDialog),$("#tester-attach-dialog").on("ojopen",this.bindings.openDialog)},bindView:function(t){this._super(t),this.setupEventHandlers()},rebindView:function(t){this._super(t),this.bindView(t)},AttachDialog:function(t){this._super(t)},resetFields:function(t){this._super(t)},open:function(t,e){return this.config.resetFieldsOnOpen=!1,this._super(),o=$.Deferred()}});return a}),define("bots.package.tester/view.bot",["module","suite.package.util/messaging","bots.config","bots.i18n","bots.package.view/view","bots.package.tester/facade","bots.package.tester/attach","ojs/ojfilmstrip"],function(t,e,i,n,s,o,a){function r(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function l(t){var e=_.clone(t);e.id=this.lastId,e.party=1,this.uiConversation.push(e),this.lastId++}function d(t,e){return"https://www.google.com/maps/search/?api=1&query="+t+","+e}function c(t){var e=document.createElement("a");return e.href=t,"http:"===e.protocol||"https:"===e.protocol?e.host&&e.host!==window.location.host:["mailto:","file:","ftp:","sftp:","ftps:"].indexOf(e.protocol)>-1}function u(t){"function"==typeof t.isTesting?t.isTesting(!1):t.isTesting=!1}function h(t,e){e.jsonResults.push(t)}var b={state:{}},g=s.extend({module:t,name:"TesterBotView"},{__static__:{POLL_WINDOW_MS:12e4,BOT_TESTER_POLLING_SECONDS:1,POLLING_SKOSH_MILLISECS:300},deps:{i18n:n,facade:o,botsConfig:i},bindings:{i18n:n,itemToAdd:{func:ko.observable},lastId:0,userId:"",userProfile:{},uiConversation:{func:ko.observableArray,args:[[]]},jsonResults:{func:ko.observableArray,args:[[]]},fullJson:{func:ko.computed,args:[function(){return JSON.stringify(this.bindings.jsonResults(),null,2)},this,{deferEvaluation:!0}]},isPolling:!1,isTesting:{func:ko.observable,args:[!1]},timeLastTested:-1,expandedJson:!1,resetCounter:0,handleJson:function(t,e){"ojexpand"===t.type?(this.bindings.expandedJson=!0,this.updateConversation()):"ojcollapse"===t.type&&(this.bindings.expandedJson=!1,"relative"===$("#tester-bot-jsonSection").css("position")&&this.updateConversation()),this.selectInput()},resetTest:function(t){this.bindings.uiConversation([]),this.bindings.lastId=0,this.bindings.userId=(this.bindings.userProfile.userId?this.bindings.userProfile.userId:"")+r(1e6,9999999),this.bindings.itemToAdd(null),this.bindings.jsonResults([]),this.bindings.isPolling=!1,this.bindings.isTesting(!1),this.bindings.timeLastTested=-1,this.bindings.expandedJson=!1,t?this.bindings.resetCounter=0:this.bindings.resetCounter++},clickChoice:function(t,e,i){"postback"===t.type?this.postback(t):"url"===t.type?this.openUrl(t):"call"===t.type?this.callNumber(t):"location"===t.type?this.requestLocation(t):this.log("action not supported",t),this.selectInput()},imageLoaded:function(t,e,i){this.log("Image loaded");var n=_.throttle(this.updateLayout,200,{leading:!1});setTimeout(n,500)},sendText:function(t,e,i){this.bindings.itemToAdd()&&""!==this.bindings.itemToAdd().trim()&&this.addText(this.bindings.itemToAdd().trim()),this.selectInput()},AttachDialog:{func:function(){return new a({baseElement:this.config.attachBaseElement,contentElement:this.config.attachBaseElement,parentView:this})}},attach:function(t,e){$(this.config.attachBaseElement).ojDialog("open")},downloadFileURL:function(){return"data:application/octet-stream,"+encodeURIComponent(this.bindings.fullJson())},downloadFileName:function(){return i.getCurrentBot().name+"_conversation.json"}},TesterBotView:function(t){this._super(t)},bindView:function(t){this._super(t);var e=this;$("#tester-bot-input").keyup(function(t){13===t.keyCode&&e.bindings.sendText()}),this.setUserProfile()},initModule:function(t){this._super(t)&&this.listen({BOT_SELECT:this.switchBot,TEST_CONVERSATION:this.testReturned,POLL_CONVERSATION:this.pollingReturned,UPDATE_LAYOUT:this.updateLayoutHandler,SEND_ATTACHMENT:this.addAttachment})},setUserProfile:function(){this.bindings.userProfile=i.getUser();var t={};if(this.bindings.userProfile.username){var e=this.bindings.userProfile.username.split(" ");1===e.length?t.firstName=e[0]:2===e.length?(t.firstName=e[0],t.lastName=e[1]):t.firstName=this.bindings.userProfile.username}t.locale=(navigator.languages?navigator.languages[0]:navigator.language)||"en-US",t.timezoneOffset=60*(new Date).getTimezoneOffset()*1e3,this.log("locale",t.locale),_.defaults(this.bindings.userProfile,t),this.log("userProfile",this.bindings.userProfile),this.bindings.userId=(this.bindings.userProfile.userId?this.bindings.userProfile.userId:"")+r(1e6,9999999)},sendUtterance:function(t){if(this.bindings.timeLastTested=Date.now(),this.bindings.isTesting(!0),this.notify({TEST_CONVERSATION:{data:{messagePayload:{text:t,type:"text"},userId:this.bindings.userId,profile:_.pick(this.bindings.userProfile,["firstName","lastName","timezoneOffset","locale"]),botId:i.getCurrentBot().id,botName:i.getCurrentBot().name,resetCounter:this.bindings.resetCounter}}},{actionSpinner:!1}),this.bindings.userPreferences().botInitialUA){var e=this.bindings.userPreferences();e.botInitialUA=!1,this.bindings.userPreferences(e)}},sendLocation:function(t){this.bindings.timeLastTested=Date.now(),this.bindings.isTesting(!0),this.notify({TEST_CONVERSATION:{data:{messagePayload:{location:t,type:"location"},userId:this.bindings.userId,profile:_.pick(this.bindings.userProfile,["firstName","lastName","timezoneOffset","locale"]),botId:i.getCurrentBot().id,botName:i.getCurrentBot().name,resetCounter:this.bindings.resetCounter}}},{actionSpinner:!1})},sendAttachment:function(t){this.bindings.timeLastTested=Date.now(),this.bindings.isTesting(!0),this.notify({TEST_CONVERSATION:{data:{messagePayload:{attachment:t,type:"attachment"},userId:this.bindings.userId,profile:_.pick(this.bindings.userProfile,["firstName","lastName","timezoneOffset","locale"]),botId:i.getCurrentBot().id,botName:i.getCurrentBot().name,resetCounter:this.bindings.resetCounter}}},{actionSpinner:!1})},sendPostback:function(t){this.bindings.timeLastTested=Date.now(),this.bindings.isTesting(!0),this.notify({TEST_CONVERSATION:{data:{messagePayload:{postback:t,type:"postback"},userId:this.bindings.userId,profile:_.pick(this.bindings.userProfile,["firstName","lastName","timezoneOffset","locale"]),botId:i.getCurrentBot().id,botName:i.getCurrentBot().name,resetCounter:this.bindings.resetCounter}}},{actionSpinner:!1})},postback:function(t){"postback"===t.type&&t.postback&&t.label&&""!==t.label&&""!==t.label.trim()&&(this.bindings.uiConversation.push({id:this.bindings.lastId,type:"text",text:t.label,party:0}),this.bindings.lastId++,this.sendPostback(t.postback),this.updateLayout())},openUrl:function(t){if("url"===t.type&&t.url){var e=window.open(t.url,"_blank");e.focus()}},callNumber:function(t){if("call"===t.type&&t.phoneNumber){var e=window.open("tel:"+(0===t.phoneNumber.indexOf("+")?t.phoneNumber:"+"+t.phoneNumber),"_blank");e.focus()}},displayLocationSent:function(t,e){if(e&&e.latitude&&e.longitude){var i={label:n.translate("tester.conversation.location.mapAction"),url:d(e.latitude,e.longitude),type:"url"};this.bindings.uiConversation.push({id:this.bindings.lastId,type:"location",location:{title:t,latitude:e.latitude,longitude:e.longitude},actions:[i],party:0}),this.bindings.lastId++,this.updateLayout(),this.sendLocation({latitude:e.latitude,longitude:e.longitude})}},requestLocation:function(t){var e=this;if("location"===t.type){var i={latitude:37.2900055,longitude:-121.906558};"https"===window.location.protocol||"localhost"===window.location.hostname?"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(t){e.log(t.coords),e.displayLocationSent(n.translate("tester.conversation.message.location.available"),t.coords)}):e.displayLocationSent(n.translate("tester.conversation.message.location.notSupported"),i):e.displayLocationSent(n.translate("tester.conversation.message.location.notAvailable"),i)}},addText:function(t){""!==t&&""!==t.trim()&&(this.bindings.uiConversation.push({id:this.bindings.lastId,type:c(t.trim())?"link":"text",text:t.trim(),party:0}),this.bindings.lastId++,this.sendUtterance(t),this.updateLayout())},logResponseMsg:function(t,e,i,n,s,o){s?o?this.log(t,"for",e.botName,"to be processed"):this.log(t,"for",e.botName,"already reset at counter",i.resetCounter):o?this.log(t,"for",e.botName,"not for current bot",n):this.log(t,"for",e.botName,"not for current bot",n,"and already reset at counter",i.resetCounter)},updateLayout:function(t){if(this.bindings.jsonResults().length>0)if(this.bindings.jsonResults().length>0&&$("#tester-bot-jsonSection").length>0){this.log("bot tester: adjusting jsonSection expand/collapse");var e={};e.botSection=$("#tester-bot-section").innerHeight(),e.content=$("#botTest-form-container").innerHeight(),e.jsonHeader=$("#tester-bot-json-header").innerHeight();var i=$("#tester-bot-jsonSection").ojCollapsible("option","expanded");e.json=i?$("#tester-bot-json").innerHeight():0,e.botSection<e.jsonHeader+e.json+e.content?($("#tester-bot-jsonSection").css("position","relative"),t||setTimeout(function(){var t=$("#tester-bot-section");t.scrollTop(i?e.content-.5*e.botSection:e.jsonHeader+e.json+e.content)},200)):setTimeout(function(){$("#tester-bot-jsonSection").css("position","absolute")},200)}else this.log("bot tester: no json expand/collapse handling needed"),$("#tester-bot-jsonSection").css("position","absolute")},selectInput:function(){setTimeout(function(){$("#tester-bot-input").select()},50)},updateConversation:function(){this.notify({UPDATE_LAYOUT:{data:{bot:!0}}},{actionSpinner:!1})},processResponses:function(t,e){t.responses.length>0&&(u(e),h(t,e)),_.each(t.responses,function(t){if(t.messagePayload){if("text"===t.messagePayload.type)t.messagePayload.actions?t.messagePayload.type="choice":c(t.messagePayload.text.trim())&&(t.messagePayload.type="link");else if("location"===t.messagePayload.type){if(!t.messagePayload.location.url&&!t.messagePayload.actions&&t.messagePayload.location.latitude&&t.messagePayload.location.longitude&&(t.messagePayload.location.url=d(t.messagePayload.location.latitude,t.messagePayload.location.longitude)),t.messagePayload.location.url&&!t.messagePayload.actions){t.messagePayload.actions=[];var i={label:"Open Map",url:t.messagePayload.location.url,type:"url"};t.messagePayload.actions.push(i)}}else"raw"===t.messagePayload.type&&(t.messagePayload.text=JSON.stringify(t.messagePayload.payload));_.bind(l,e)(t.messagePayload)}})},processError:function(t,i){u(i),404===t.status?e.showWarning(n.translate("tester.messages.failure.disabledTestChannel")):e.showI18nError(t,"tester.messages.failure.testBot")},continuePolling:function(t,e,i,n){if(n)i.isPolling||(i.isPolling=!0,this.doPolling(t,e,i));else{var s=Date.now();if(s-i.timeLastTested<this.__static__.POLL_WINDOW_MS){var o=this;setTimeout(function(){o.doPolling(t,e,i)},1e3*o.__static__.BOT_TESTER_POLLING_SECONDS+o.__static__.POLLING_SKOSH_MILLISECS)}else u(i),i.isPolling=!1}},doPolling:function(t,e,i){this.notify({POLL_CONVERSATION:{data:{userId:i.userId,botId:t,botName:e,resetCounter:i.resetCounter}}},{actionSpinner:!1})},updateLayoutHandler:function(t){t&&t.bot&&(t.skipScroll?this.updateLayout(!0):this.updateLayout())},testReturned:function(t){this.handleTestResult(_.extend(t,{startPoll:!0}))},handleTestResult:function(t){var e=i.getCurrentBot().id,n=i.getCurrentBot().name,s=t.startPoll?"Test Responses":"Polling Responses";t.status&&t.status<=204?t.botId===e?t.resetCounter===this.bindings.resetCounter?(t.data&&"object"==typeof t.data&&t.data.responses&&t.data.responses.length>0&&(this.processResponses(t.data,this.bindings),this.updateLayout()),this.continuePolling(t.botId,t.botName,this.bindings,t.startPoll),this.logResponseMsg(s,t,this.bindings,n,!0,!0)):this.logResponseMsg(s,t,this.bindings,n,!0,!1):t.resetCounter===b.state[t.botId].resetCounter?(t.data&&"object"==typeof t.data&&t.data.responses&&t.data.responses.length>0&&this.processResponses(t.data,b.state[t.botId]),this.continuePolling(t.botId,t.botName,b.state[t.botId],t.startPoll),this.logResponseMsg(s,t,b.state[t.botId],n,!1,!0)):this.logResponseMsg(s,t,b.state[t.botId],n,!1,!1):t.status&&t.status>204&&(t.botId===e?t.resetCounter===this.bindings.resetCounter?(this.processError(t,this.bindings),this.logResponseMsg(s+" Error",t,this.bindings,n,!0,!0)):this.logResponseMsg(s+" Error",t,this.bindings,n,!0,!1):t.resetCounter===b.state[t.botId].resetCounter?(this.processError(t,b.state[t.botId]),this.logResponseMsg(s+" Error",t,b.state[t.botId],n,!1,!0)):this.logResponseMsg(s+" Error",t,b.state[t.botId],n,!1,!1))},pollingReturned:function(t){this.handleTestResult(_.extend(t,{startPoll:!1}))},addAttachment:function(t){if(t&&t.type&&1===t.type.length&&["image","video","audio","file"].includes(t.type[0])&&t.url){var e={type:t.type[0],url:t.url,title:t.title};this.bindings.uiConversation.push({id:this.bindings.lastId,type:"attachment",attachment:e,party:0}),this.bindings.lastId++,$(this.config.attachBaseElement).ojDialog("close"),this.updateLayout(),this.sendAttachment(e)}},switchBot:function(t){t&&t.previousBot&&(this.log("switch bot from",t.previousBot.id,"to",t.selectedBot.id),this.saveState(t.previousBot.id),this.restoreState(t.selectedBot.id),this.bindings.jsonResults().length>0&&$("#tester-bot-jsonSection").length>0&&$("#tester-bot-jsonSection").ojCollapsible("option","expanded")!==this.bindings.expandedJson&&$("#tester-bot-jsonSection").ojCollapsible("option","expanded",this.bindings.expandedJson),this.updateConversation(),this.selectInput())},saveState:function(t){b.state[t]={uiConversation:this.bindings.uiConversation(),lastId:this.bindings.lastId,userId:this.bindings.userId,itemToAdd:this.bindings.itemToAdd(),jsonResults:this.bindings.jsonResults(),isPolling:this.bindings.isPolling,isTesting:this.bindings.isTesting(),timeLastTested:this.bindings.timeLastTested,expandedJson:this.bindings.expandedJson,resetCounter:this.bindings.resetCounter},this.log("Saving state for",t),this.log(b.state[t])},restoreState:function(t){if(b.state[t]){var e=b.state[t];this.bindings.uiConversation(e.uiConversation),this.bindings.lastId=e.lastId,this.bindings.userId=e.userId,this.bindings.itemToAdd(e.itemToAdd),this.bindings.jsonResults(e.jsonResults),this.bindings.isPolling=e.isPolling,this.bindings.isTesting(e.isTesting),this.bindings.timeLastTested=e.timeLastTested,this.bindings.expandedJson=e.expandedJson,this.bindings.resetCounter=e.resetCounter}else this.bindings.resetTest(!0);this.log("Restoring state for",t),this.log(b.state[t])}});return new g({baseElement:"#tester-bot-pane",attachBaseElement:"#tester-attach-dialog",baseTemplateData:i.templateData})}),define("bots.package.tester/intent.result",["module","suite.package.util/messaging","bots.config","bots.i18n","bots.router","bots.package.view/view","bots.package.tester/facade","moment"],function(t,e,i,n,s,o,a,r){var l=o.extend({module:t,name:"IntentResultView"},{__static__:{SYSTEM_ENTITY_NAMES:["ADDRESS","CURRENCY","DATE","DURATION","EMAIL","NUMBER","PHONE_NUMBER","SET","TIME","URL","YES_NO"]},deps:{i18n:n,facade:a,botsConfig:i},config:{},bindings:{i18n:n,showMore:{func:ko.observable,args:[!1]},showNumIntents:3,isTesting:{func:ko.observable,args:[!1]},query:"",intentMatches:{func:ko.observable,args:[[]]},entityMatches:{func:ko.observable,args:[{}]},selectedIntent:{func:ko.observable},intentMatchList:{func:ko.observableArray,args:[[]]},entityMatchList:{func:ko.observableArray,args:[[]]},isBatchTesting:{func:ko.observable,args:[!1]},trainingDataUnit:{func:ko.observable},intentId:{func:ko.computed,args:[function(){return this.bindings.trainingDataUnit()?this.bindings.trainingDataUnit().intent:null},this,{deferEvaluation:!0}]},jsonResults:{func:ko.observableArray,args:[[]]},subscriptions:[],exampleAdded:{func:ko.observableArray,args:[[]]},addExampleDisabled:{func:ko.computed,args:[function(){return!this.bindings.isDraftVersion()||!(_.indexOf(this.bindings.exampleAdded(),this.bindings.intentId())<0)},this,{deferEvaluation:!0}]},getMore:function(){this.bindings.showMore(!0),this.updateContent()},addExample:function(t,i,s){var o=this,a=this.bindings.selectedIntent();this.log("Selected Intent: ",a),this.notify({ADD_NEW_EXAMPLES:{data:{botId:this.bindings.botId(),id:this.bindings.intentId(),examples:{sentence:this.bindings.query}}}},{actionSpinner:!0}).always(_.bind(function(t){t.status>204?e.showWarning(n.translate("tester.messages.failure.addExample",a)):(o.bindings.exampleAdded.push(o.bindings.intentId()),e.showConfirmation(n.translate("tester.messages.success.addExample",a)))},this))},navigateToIntentLocation:function(t){t&&s.navigate("bot/intents/"+encodeURIComponent(ko.unwrap(t.intentName)),{trigger:!0})},navigateToEntityLocation:function(t){t&&s.navigate("bot/entities/"+encodeURIComponent(ko.unwrap(t.entityName)),{trigger:!0})}},setData:function(t,e){e&&this.resetResults(),this.bindings.jsonResults.push(t),this.bindings.intentMatches(t.intentMatches.summary),this.bindings.intentMatchList(_.clone(this.computeIntentMatchList(this.bindings.intentMatches()))),this.bindings.entityMatches(t.entityMatches),this.bindings.entityMatchList(_.clone(this.computeEntityMatchList(this.bindings.entityMatches()))),this.bindings.trainingDataUnit(t.trainingDataUnit),this.bindings.query=t.query,this.updateContent(),e&&this.refreshHandlers()},updateContent:function(){this.config.parentView.updateContent()},resetResults:function(){this.bindings.query="",this.bindings.intentMatches([]),this.bindings.entityMatches([]),this.bindings.trainingDataUnit({}),this.bindings.intentMatchList.removeAll(),this.bindings.entityMatchList.removeAll(),this.bindings.exampleAdded([]),this.bindings.jsonResults([]),this.bindings.selectedIntent(null),this.bindings.showMore(!1),this.bindings.isTesting(!1),_.each(this.bindings.subscriptions,function(t){t.dispose()}),this.bindings.subscriptions=[]},getState:function(){return{query:this.bindings.query,jsonResults:this.bindings.jsonResults(),isTesting:this.bindings.isTesting(),showMore:this.bindings.showMore(),selectedIntent:this.bindings.selectedIntent(),intentMatches:this.bindings.intentMatches(),entityMatches:this.bindings.entityMatches(),trainingDataUnit:this.bindings.trainingDataUnit(),exampleAdded:this.bindings.exampleAdded()}},loadState:function(t){this.bindings.query=t.query,this.bindings.jsonResults(t.jsonResults),this.bindings.isTesting(t.isTesting),this.bindings.showMore(t.showMore),this.bindings.selectedIntent(t.selectedIntent),this.bindings.intentMatches(t.intentMatches),this.bindings.entityMatches(t.entityMatches),this.bindings.trainingDataUnit(t.trainingDataUnit),this.bindings.exampleAdded(t.exampleAdded),this.bindings.intentMatchList(_.clone(this.computeIntentMatchList(this.bindings.intentMatches()))),this.bindings.entityMatchList(_.clone(this.computeEntityMatchList(this.bindings.entityMatches()))),this.refreshHandlers()},computeIntentMatchList:function(){var t=this;return t.bindings.intentMatches().length>0?(t.bindings.selectedIntent()||t.bindings.selectedIntent(t.bindings.intentMatches()[0].intent),_.map(t.bindings.intentMatches(),function(e,i){function s(t){var i=Number(100*e.score).toPrecision(3),n=Number(100*e.score).toFixed(2);return i.length>n.length?n+"%":i+"%"}var o={intentName:e.intent,class:"next",index:i,score:isNaN(e.score)?0:100*e.score,selected:ko.observable(t.bindings.selectedIntent()===e.intent?e.intent:null)};return o.scorepct=isNaN(e.score)?n.translate("tester.intent.matches.notApplicable"):s(e.score),o})):[]},convertSysEntityMatch:function(t,e){function i(i){var s=e?e+" - ":"";_.each(_.keys(_.omit(i,"entityName")),function(e){"object"!=typeof t[e]?n.push({key:s+e,value:t[e]}):n.push({key:s+e,value:JSON.stringify(t[e])})})}var n=[];return t.entityName&&("DURATION"===t.entityName?(t.startDate=r(t.startDate).utc().toString(),t.endDate=r(t.endDate).utc().toString()):"DATE"===t.entityName&&(t.date=r(t.date).utc().toString())),i(t),n},computeEntityMatchList:function(){var t=this,e=[];return _.each(_.keys(t.bindings.entityMatches()),function(i){t.bindings.entityMatches()[i].length>0&&("object"==typeof t.bindings.entityMatches()[i][0]?_.each(t.bindings.entityMatches()[i],function(n){_.each(t.convertSysEntityMatch($.extend(!0,{},n),i),function(t){e.push({entityName:i,entityDisplayName:t.key,value:[t.value]})})}):e.push({entityName:i,entityDisplayName:i,value:t.bindings.entityMatches()[i]}))}),_.sortBy(e,function(t){return t.entityDisplayName})},sendUtterance:function(t){var e={data:{botId:i.getCurrentBot().id,botName:i.getCurrentBot().name,q:t,generateTrainingData:!0,resetCounter:this.bindings.resetCounter,itemId:-1}};this.bindings.selectedIntent()&&(e.data.intentName=this.bindings.selectedIntent()),this.notify({TEST_BATCH_INTENT:e},{actionSpinner:!1})},testReturned:function(t){i.getCurrentBot().id,i.getCurrentBot().name;this.log(t),t&&t.data&&t.itemId===-1?t.botId===i.getCurrentBot().id?(t.data.intentMatches.summary&&this.setData(t.data),this.refreshHandlers(),this.updateContent()):this.log("Does not support changing bot during individual intent query."):t.status&&t.status>204&&(t.botId===i.getCurrentBot().id?this.log("Error on intent query."):this.log("Error on intent query.  Does not support changing bot during individual intent query."))},refreshHandlers:function(){_.each(this.bindings.subscriptions,function(t){t.dispose()}),this.bindings.subscriptions=[];var t,e=this;_.each(this.bindings.intentMatchList(),function(i,n){t=i.selected.subscribe(function(t){null!==t&&(e.bindings.selectedIntent(t),e.sendUtterance(e.bindings.query))}),e.bindings.subscriptions.push(t)})},bindView:function(t){this._super(t)},initModule:function(t){this._super(t)&&this.listen({TEST_BATCH_INTENT:this.testReturned,TESTER_INTENT_MODE:this._batchModeHandler})},renderView:function(t){this._super(t)},IntentResultView:function(t){this._super(t)},resetFields:function(t){this._super(t)},_batchModeHandler:function(t){t&&t.hasOwnProperty("isBatchTesting")&&this.bindings.isBatchTesting(t.isBatchTesting)}});return l}),define("bots.package.tester/load.batch",["module","bots.package.shell/validators","bots.package.view/dialog","bots.i18n"],function(t,e,i,n){var s,o=i.extend({module:t,name:"LoadBatchFileDialog"},{__static__:{CHUNK_SIZE:102400},config:{type:"ojDialog"},bindings:{botsValidators:e,fileInfo:{func:ko.observable,args:[{}]},fileError:{func:ko.observable,args:[""]},fileStatus:{func:ko.observable,args:["none"]},fileObjects:[],limits:{MAX_FILE_SIZE_MB:20,MAX_LINES:50001},concurrentTests:{func:ko.observable,args:[3]},loadFile:function(t){t.target.files&&t.target.files.length>0&&this.handleLoadedFile(t.target.files[0])},testFile:function(t){this.notify({PROCESS_INTENT_BATCH_FILE:{data:{tests:_.clone(this.bindings.fileObjects),concurrent:this.bindings.concurrentTests()}}},{actionSpinner:!1})},closeDialog:function(){},openDialog:function(){this.bindings.fileStatus("none"),$("#batchFileUploadDropzone").removeClass("error"),this.bindings.fileInfo({}),this.bindings.fileError(""),this.bindings.fileObjects=[],setTimeout(function(){$("#batchFileUploadLink").blur()},50)},clickUpload:function(){var t=$("#batchFileUploadFile");t.length>0&&(t[0].value=null),$("#batchFileUploadFile").trigger("click")},increaseConcurrent:function(){this.bindings.concurrentTests()<5&&this.bindings.concurrentTests(this.bindings.concurrentTests()+1)},decreaseConcurrent:function(){this.bindings.concurrentTests()>1&&this.bindings.concurrentTests(this.bindings.concurrentTests()-1)}},fileReference:null,setupEventHandlers:function(){var t=document.getElementById("batchFileUploadDropzone");t.addEventListener("dragover",this.handleDragOver,!1),t.addEventListener("drop",this.handleFileSelect,!1),$("#tester-intent-load-batch-file-dialog").on("ojclose",this.bindings.closeDialog),$("#tester-intent-load-batch-file-dialog").on("ojopen",this.bindings.openDialog),$("#batchFileUploadFile").on("change",this.bindings.loadFile)},bindView:function(t){this._super(t),this.setupEventHandlers()},rebindView:function(t){this._super(t),the.bindView(t)},showFileError:function(t){this.bindings.fileStatus("error"),$("#batchFileUploadDropzone").addClass("error"),this.bindings.fileError(t)},handleParsing:function(t){var e=this;try{e.bindings.fileObjects=$.csv.toObjects(t),e.bindings.fileObjects.length>0?e.bindings.fileObjects[0].query&&e.bindings.fileObjects[0].topIntent?(e.bindings.fileObjects=_.filter(e.bindings.fileObjects,function(t){return t.query&&t.topIntent&&t.query.trim()&&t.topIntent.trim()}),e.bindings.fileObjects.length<e.bindings.limits.MAX_LINES?e.bindings.fileObjects.length>0?(e.bindings.fileStatus("ready"),$("#batchFileUploadDropzone").removeClass("error")):this.showFileError(n.translate("tester.batch.intent.dialog.error.missingRows")):this.showFileError(n.translate("tester.batch.intent.dialog.error.longFile",e.bindings.limits.MAX_LINES-1))):this.showFileError(n.translate("tester.batch.intent.dialog.error.missingColumns")):this.showFileError(n.translate("tester.batch.intent.dialog.error.missingRows"))}catch(t){this.showFileError(n.translate("tester.batch.intent.dialog.error.unknown"))}},processTestFile:function(){var t=new FileReader,e=new TextDecoder,i=this;t.onload=function(t){return function(t){i.handleParsing(e.decode(t.target.result))}}(this.fileReference),t.onerror=function(){i.showFileError(t.error)},t.readAsArrayBuffer(this.fileReference)},processBigTestFile:function(){var t=this;this.readLines(this.fileReference,this.bindings.limits.MAX_LINES+1,function(e,i){if(e)t.showFileError(e);else if(i&&i.length>=t.bindings.limits.MAX_LINES+1)t.showFileError(n.translate("tester.batch.intent.dialog.error.longFile",t.bindings.limits.MAX_LINES-1));else{var s=i.join("\n");t.handleParsing(s)}})},readLines:function(t,e,i){function n(){if(a===e)return void i(null,l);if(0!==o&&o>=t.size)return r.trim().length>0&&l.push(r),void i(null,l);var n=t.slice(o,o+c.__static__.CHUNK_SIZE);d.readAsArrayBuffer(n)}var s=new TextDecoder,o=0,a=0,r="",l=[],d=new FileReader,c=this;d.onload=function(){r+=s.decode(d.result,{stream:!0});var t=r.split("\n");r=t.pop(),a+=t.length,a>e&&(t.length-=a-e,a=e);for(var i=0;i<t.length;++i)t[i].trim().length>0&&l.push(t[i]);o+=c.__static__.CHUNK_SIZE,n()},d.onerror=function(){i(d.error)},n()},handleLoadedFile:function(t){this.bindings.isLoading(!0),this.bindings.fileStatus("loading");var e={name:t.name,type:t.type||"n/a",size:t.size,lastModified:t.lastModifiedDate};this.bindings.fileInfo(e),this.fileReference=t,e.size<this.__static__.CHUNK_SIZE?this.processTestFile():e.size<1024*this.bindings.limits.MAX_FILE_SIZE_MB*1024?this.processBigTestFile():this.showFileError(n.translate("tester.batch.intent.dialog.error.largeFile",this.bindings.limits.MAX_LINES-1,this.bindings.limits.MAX_FILE_SIZE_MB))},handleFileSelect:function(t){t.stopPropagation(),t.preventDefault();var e=t.dataTransfer.files;e.length>=1&&this.handleLoadedFile(e[0])},handleDragOver:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},LoadBatchFileDialog:function(t){this._super(t)},resetFields:function(t){this._super(t)},open:function(t,e){return this._super(),s=$.Deferred()}});return o}),define("bots.package.tester/view.batchIntent",["module","bots.config","bots.i18n","bots.router","bots.package.view/view","bots.package.tester/facade","suite.package.util/messaging","bots.package.tester/load.batch","bots.package.tester/intent.result","ojs/ojnavigationlist"],function(t,e,i,n,s,o,a,r,l){var d={state:{},response:{}},c=s.extend({module:t,name:"TesterBatchIntentView"},{deps:{i18n:i,facade:o,botsConfig:e},bindings:{i18n:i,resetCounter:0,isTesting:{func:ko.observable,args:[!1]},isFinished:{func:ko.observable,args:[!1]},isStopped:{func:ko.observable,args:[!1]},maxDisplayRows:20,largeFileLimit:200,testObjects:[],currentRunIndex:-1,numConcurrent:{func:ko.observable,args:[3]},numTesting:0,numPassed:{func:ko.observable,args:[0]},numFailed:{func:ko.observable,args:[0]},offset:{func:ko.observable,args:[0]},numCompleted:{func:ko.computed,args:[function(){return this.bindings.numPassed()+this.bindings.numFailed()},this,{deferEvaluation:!0}]},numTotal:{func:ko.observable,args:[0]},pageStart:{func:ko.computed,args:[function(){return this.bindings.offset()+1>this.bindings.numCompleted()?0:this.bindings.offset()+1},this,{deferEvaluation:!0}]},pageEnd:{func:ko.computed,
args:[function(){return this.bindings.offset()+this.bindings.maxDisplayRows<this.bindings.testResults().length?this.bindings.offset()+this.bindings.maxDisplayRows:this.bindings.testResults().length},this,{deferEvaluation:!0}]},testResults:{func:ko.observableArray,args:[[]]},testResultsDisplay:{func:ko.observableArray,args:[[]]},testResultsDS:{func:function(){return new oj.ArrayTableDataSource(this.bindings.testResultsDisplay)}},showDetails:{func:ko.observable,args:[!1]},currentRowContent:{func:ko.observable,args:[{}]},expandedJson:{func:ko.observable,args:[!1]},isBatchTesting:{func:ko.observable,args:[!1]},jsonResults:{func:ko.observableArray,args:[[]]},fullJson:{func:ko.computed,args:[function(){return JSON.stringify(this.bindings.jsonResults(),null,2)},this,{deferEvaluation:!0}]},handleJson:function(t,e){"ojexpand"===t.type?this.updateContent():"ojcollapse"===t.type&&"relative"===$(this.config.jsonSectionElement).css("position")&&this.updateContent()},LoadFileDialog:{func:function(){return new r({baseElement:this.config.loadFileBaseElement,contentElement:this.config.loadFileBaseElement,parentView:this})}},IntentResultView:{func:function(){return new l({baseElement:this.config.intentResultBaseElement,contentElement:this.config.intentResultBaseElement,parentView:this})}},showTestDetails:function(t,e){if(this.bindings.currentRowContent(t),this.bindings.jsonResults.removeAll(),this.bindings.jsonResults.push(this.bindings.testResults()[t.id()].json),this.bindings.expandedJson(!1),this.bindings.IntentResultView){var i=this.bindings.testResults()[t.id()];this.bindings.IntentResultView.setData(i.json,!0)}this.bindings.showDetails(!0);var n=$("#tester-batch-intent").innerHeight(),s=$("#batch-intent-test-details").innerHeight();s<n-1&&$("#batch-intent-test-details").css("height",n-1+"px")},showAll:function(t,e){this.bindings.showDetails(!1)},resetTest:function(t){this.resetResults(),t?this.bindings.resetCounter=0:this.bindings.resetCounter++},downloadFileURL:function(){return"data:application/octet-stream,"+encodeURIComponent(this.bindings.fullJson())},downloadFileName:function(){return e.getCurrentBot().name+"_intent.json"},downloadFileAction:function(){require("suite.security.csrf").downloadFile(this.downloadFileURL(),this.downloadFileName())},showNext:function(){this.bindings.offset(this.bindings.offset()+this.bindings.maxDisplayRows);var t=this.bindings.testResults.slice(this.bindings.offset(),this.bindings.offset()+this.bindings.maxDisplayRows);this.bindings.testResultsDisplay.removeAll(),this.bindings.testResultsDisplay(t),this.bindings.testResultsDS.reset(this.bindings.testResultsDisplay)},showPrev:function(){var t=this.bindings.offset()-this.bindings.maxDisplayRows;this.bindings.offset(t<0?0:t);var e=this.bindings.testResults.slice(this.bindings.offset(),this.bindings.offset()+this.bindings.maxDisplayRows);this.bindings.testResultsDisplay.removeAll(),this.bindings.testResultsDisplay(e),this.bindings.testResultsDS.reset(this.bindings.testResultsDisplay)},stopTest:function(t,e){this.bindings.isStopped(!0),0===this.bindings.numTesting&&this.finalizeResults()}},TesterBatchIntentView:function(t){this._super(t)},bindView:function(t){this._super(t)},initModule:function(t){this._super(t)&&this.listen({BOT_SELECT:this.switchBot,TEST_BATCH_INTENT:this.testReturned,UPDATE_LAYOUT:this.updateLayoutHandler,PROCESS_INTENT_BATCH_FILE:this.processIntentBatchFile,TESTER_INTENT_MODE:this._batchModeHandler,RESET_RESULTS:this.resetResults})},renderView:function(t){this._super(t),this.bindings.IntentResultView&&this.bindings.IntentResultView.renderView()},updateContent:function(){this.notify({UPDATE_LAYOUT:{data:{batch_intent:!0}}},{actionSpinner:!1})},updateLayoutHandler:function(t){t&&t.batch_intent&&this.updateLayout()},updateLayout:function(t,e){if(this.bindings.jsonResults().length>0&&$("#tester-batch-intent-jsonSection").length>0){var i={};i.batchIntentSection=$("#tester-batch-intent-section").innerHeight(),i.jsonHeader=$("#tester-batch-intent-json-header").innerHeight(),i.content=$("#batch-test-details-content").innerHeight();var n=this.bindings.expandedJson();this.log("expandedJson tester-batch-intent",n),$(this.config.jsonSectionElement).length&&$(this.config.jsonSectionElement).ojCollapsible("option","expanded")!==n&&(this.log("Setting expanded",n),$(this.config.jsonSectionElement).ojCollapsible("option","expanded",n)),i.json=n?$("#tester-batch-intent-json").innerHeight():0,i.batchIntentSection<i.jsonHeader+i.json+i.content?($("#tester-batch-intent-jsonSection").css("position","relative"),setTimeout(function(){var t=$("#tester-batch-intent-section");t.scrollTop(n?i.content-.5*i.batchIntentSection:i.jsonHeader+i.json+i.content)},200)):setTimeout(function(){$("#tester-batch-intent-jsonSection").css("position","absolute")},200)}else $("#tester-batch-intent-jsonSection").css("position","absolute")},sendOneTest:function(t,e,i,n,s){var o={data:{botId:e,botName:i,q:t,generateTrainingData:!0,resetCounter:n,itemId:s}};this.notify({TEST_BATCH_INTENT:o},{actionSpinner:!1})},startRunBatch:function(t,e){if(this.bindings.currentRunIndex=0,this.bindings.numTotal(this.bindings.testObjects.length),this.bindings.isTesting(!0),this.bindings.userPreferences().batchintentInitialUA){var i=this.bindings.userPreferences();i.batchintentInitialUA=!1,this.bindings.userPreferences(i)}this.continueRunBatch(t,e)},continueRunBatch:function(t,i){var n;if(t===e.getCurrentBot().id&&this.bindings.isTesting()?n=this.bindings:d.state[t]&&d.state[t].isTesting&&(n=d.state[t]),n){if(n.currentRunIndex>=n.testObjects.length)return;if(n.isFinished())return;if(n.isStopped())return;if(n.numTesting<n.numConcurrent()){var s=n.testObjects[n.currentRunIndex],o={id:ko.observable(n.currentRunIndex),json:null,utterance:s.query,predictedIntent:s.topIntent,predictedPercentage:s.topScore,isTesting:ko.observable(!!s.query),topIntent:ko.observable(""),topIntentPercentage:ko.observable(""),passed:ko.observable(!1),startTime:Date.now(),timeElapsed:ko.observable(0)};if(n.testResults.unshift(o),n.testResultsDisplay.unshift(o),("function"==typeof n.testResultsDisplay?n.testResultsDisplay().length:n.testResultsDisplay.length)>n.largeFileLimit){var a=n.testResultsDisplay.pop();a.passed()&&("function"==typeof n.testResults?n.testResults.replace(a,{}):n.testResults[n.testResults.length-a.id-1]={})}s.query?(this.sendOneTest(s.query,t,i,n.resetCounter,n.currentRunIndex),n.numTesting++):n.numFailed(n.numFailed()+1),n.currentRunIndex++,this.continueRunBatch(t,i)}}},finishBatch:function(t){t.isFinished(!0),"function"==typeof t.testResults&&this.finalizeResults()},finalizeResults:function(){var t=this;this.bindings.testResults().length>t.bindings.largeFileLimit&&t.bindings.testResults.remove(function(t){return!t.hasOwnProperty("passed")||t.passed()});var e=t.bindings.testResults(),i=[],n=[];e.forEach(function(t,e){t.passed()?i.push(t):n.push(t)}),e=n.concat(i),e.forEach(function(t,e){t.id(e)}),t.bindings.testResults(e),t.bindings.testResultsDisplay.removeAll();var s=t.bindings.testResults.slice(0,t.bindings.maxDisplayRows);t.bindings.testResultsDisplay(s),t.bindings.testResultsDS.reset(t.bindings.testResultsDisplay),t.bindings.testObjects=[]},processIntentBatchFile:function(t){this.bindings.currentRunIndex!==-1&&this.bindings.resetTest(!1),$(this.config.loadFileBaseElement).ojDialog("close"),this.bindings.testObjects=t.tests||[],this.bindings.numConcurrent(t.concurrent||3),this.bindings.offset(0),this.startRunBatch(e.getCurrentBot().id,e.getCurrentBot().name)},checkFinish:function(t){t.numPassed()+t.numFailed()===t.numTotal()?this.finishBatch(t):t.isStopped()&&0===t.numTesting&&this.finishBatch(t)},processOneResult:function(t,e,i){e.json=_.clone(t),e.isTesting(!1),t&&t.intentMatches&&t.intentMatches.summary?(e.topIntent(t.intentMatches.summary[0].intent),e.topIntentPercentage(t.intentMatches.summary[0].score),e.topIntent()===e.predictedIntent?(e.passed(!0),i.numPassed(i.numPassed()+1)):(e.passed(!1),i.numFailed(i.numFailed()+1)),e.timeElapsed(Date.now()-e.startTime)):(e.passed(!1),i.numFailed(i.numFailed()+1))},testReturned:function(t){var i,n=(e.getCurrentBot().id,e.getCurrentBot().name),s="Batch Intent Testing";t&&t.data&&t.itemId>=0?t.botId===e.getCurrentBot().id?t.resetCounter===this.bindings.resetCounter?(i=this.bindings,this.processOneResult(t.data,i.testResults()[i.testResults().length-t.itemId-1],i),this.updateLayout(),this.logResponseMsg(s,t,i,n,!0,!0)):this.logResponseMsg(s,t,null,n,!0,!1):d.state[t.botId]&&(t.resetCounter===d.state[t.botId].resetCounter?(i=d.state[t.botId],this.processOneResult(t.data,i.testResults[i.testResults.length-t.itemId-1],i),this.logResponseMsg(s,t,i,n,!1,!0)):this.logResponseMsg(s,t,null,n,!1,!1)):t.status&&t.status>204&&(t.botId===e.getCurrentBot().id?t.resetCounter===this.bindings.resetCounter?(i=this.bindings,this.processOneResult(null,i.testResults()[i.testResults().length-t.itemId-1],i),this.updateLayout(),this.logResponseMsg(s+" Error",t,i,n,!0,!0)):this.logResponseMsg(s+" Error",t,null,n,!0,!1):d.state[t.botId]&&(t.resetCounter===d.state[t.botId].resetCounter?(i=d.state[t.botId],this.processOneResult(null,i.testResults[i.testResults.length-t.itemId-1],i),this.logResponseMsg(s+" Error",t,i,n,!1,!0)):this.logResponseMsg(s+" Error",t,null,n,!1,!1))),i&&(i.numTesting--,i.testObjects[t.itemId]={},this.checkFinish(i),this.continueRunBatch(t.botId))},resetResults:function(){this.bindings.isTesting(!1),this.bindings.isFinished(!1),this.bindings.isStopped(!1),this.bindings.testObjects=[],this.bindings.currentRunIndex=-1,this.bindings.numConcurrent(3),this.bindings.numTesting=0,this.bindings.testResults([]),this.bindings.testResultsDisplay([]),this.bindings.numPassed(0),this.bindings.numFailed(0),this.bindings.numTotal(0),this.bindings.showDetails(!1),this.bindings.currentRowContent({}),this.bindings.jsonResults.removeAll(),this.bindings.expandedJson(!1),this.bindings.testResults([]),this.bindings.testResultsDS.reset(this.bindings.testResultsDisplay)},logResponseMsg:function(t,e,i,n,s,o){s?o?this.log(t,"for",e.data.botName,"to be processed"):this.log(t,"for",e.data.botName,"already reset at counter",i.resetCounter):o?this.log(t,"for",e.data.botName,"not for current bot",n):this.log(t,"for",e.data.botName,"not for current bot",n,"and already reset at counter",i.resetCounter)},loadModule:function(t){if(!this._super(t))return!1},reloadModule:function(t){if(!this._super(t))return!1},switchBot:function(t){t&&t.previousBot&&t.previousBot.id&&(this.log("switch bot"),this.saveState(t.previousBot.id),this.restoreState(t.selectedBot.id),d.state[t.selectedBot.id]=null,this.bindings.showDetails()&&(this.bindings.IntentResultView&&this.bindings.IntentResultView.setData(this.bindings.testResults()[this.bindings.testResults().length-this.bindings.currentRowContent().id-1].json,!0),$(this.config.jsonSectionElement).length>0&&$(this.config.jsonSectionElement).ojCollapsible("option","expanded")!==this.bindings.expandedJson()&&$(this.config.jsonSectionElement).ojCollapsible("option","expanded",this.bindings.expandedJson())),this.updateContent())},BindingState:function(t){var e=["isTesting","isFinished","isStopped","numConcurrent","numPassed","numFailed","numTotal","showDetails","currentRowContent","jsonResults","expandedJson"],i=["resetCounter","testObjects","currentRunIndex","numTesting","testResults","testResultsDisplay"],n=this;return this.data=t,e.forEach(function(t){n[t]=function(e){return void 0===e?n.data[t]:void(n.data[t]=e)}}),i.forEach(function(t){n[t]=n.data[t]}),this},saveState:function(t){var e={resetCounter:this.bindings.resetCounter,isTesting:this.bindings.isTesting(),isFinished:this.bindings.isFinished(),isStopped:this.bindings.isStopped(),testObjects:this.bindings.testObjects,currentRunIndex:this.bindings.currentRunIndex,numConcurrent:this.bindings.numConcurrent(),numTesting:this.bindings.numTesting,numPassed:this.bindings.numPassed(),numFailed:this.bindings.numFailed(),numTotal:this.bindings.numTotal(),testResults:this.bindings.testResults(),testResultsDisplay:this.bindings.testResultsDisplay(),showDetails:this.bindings.showDetails(),currentRowContent:this.bindings.currentRowContent(),jsonResults:this.bindings.jsonResults(),expandedJson:this.bindings.expandedJson()},i=new this.BindingState(e);d.state[t]=i},restoreState:function(t){if(d.state[t]){var e=d.state[t];this.bindings.resetCounter=e.resetCounter,this.bindings.isTesting(e.isTesting),this.bindings.isFinished(e.isFinished),this.bindings.isStopped(e.isStopped),this.bindings.testObjects=e.testObjects,this.bindings.currentRunIndex=e.currentRunIndex,this.bindings.numConcurrent(e.numConcurrent()),this.bindings.numTesting=e.numTesting,this.bindings.numPassed(e.numPassed()),this.bindings.numFailed(e.numFailed()),this.bindings.numTotal(e.numTotal()),this.bindings.testResults(e.testResults),this.bindings.testResultsDisplay(e.testResultsDisplay),this.bindings.showDetails(e.showDetails()),this.bindings.currentRowContent(e.currentRowContent()),this.bindings.jsonResults(e.jsonResults()),this.bindings.expandedJson(e.expandedJson()),this.bindings.isFinished()&&this.finalizeResults()}else this.bindings.resetTest(!0)},_batchModeHandler:function(t){t&&t.hasOwnProperty("isBatchTesting")&&this.bindings.isBatchTesting(t.isBatchTesting),this.notify({UPDATE_TESTER_HEIGHT:{}})}});return new c({baseElement:"#intent-batch-test-results",baseTemplateData:e.templateData,loadFileBaseElement:"#tester-intent-load-batch-file-dialog",intentResultBaseElement:"#batch-intent-test-result-details",jsonSectionElement:"#tester-intent-batch-jsonSection"})}),define("bots.package.tester/view.intent",["module","suite.package.util/messaging","bots.config","bots.i18n","bots.router","bots.package.view/view","bots.package.tester/facade","suite.package.util/messaging","bots.package.tester/intent.result","bots.package.tester/view.batchIntent","bots.package.tester/load.batch"],function(t,e,i,n,s,o,a,r,l,d,c){var u={state:{},response:{}},h=o.extend({module:t,name:"TesterIntentView"},{deps:{i18n:n,facade:a,botsConfig:i},bindings:{i18n:n,itemToAdd:{func:ko.observable},itemCurrent:{func:ko.observable,args:[]},lastId:0,uiConversation:{func:ko.observableArray,args:[[]]},expandedJson:!1,resetCounter:0,isBatchTesting:{func:ko.observable,args:[!1]},trainNeeded:{func:ko.observable,args:[!1]},isTesting:{func:ko.computed,args:[function(){return!!this.bindings.IntentResultView&&this.bindings.IntentResultView.bindings.isTesting()},this,{deferEvaluation:!0}]},jsonResults:{func:ko.computed,args:[function(){return this.bindings.IntentResultView?this.bindings.IntentResultView.bindings.jsonResults():[]},this,{deferEvaluation:!0}]},fullJson:{func:ko.computed,args:[function(){return JSON.stringify(this.bindings.jsonResults(),null,2)},this,{deferEvaluation:!0}]},resetTest:function(t){this.resetResults(),this.bindings.itemToAdd(null),t?this.bindings.resetCounter=0:this.bindings.resetCounter++},IntentResultView:{func:function(){return new l({baseElement:this.config.intentResultBaseElement,contentElement:this.config.intentResultBaseElement,parentView:this})}},IntentLoadBatchFileDialog:{func:function(){return new c({baseElement:this.config.loadIntentBatchFileBaseElement,contentElement:this.config.loadIntentBatchFileBaseElement,parentView:this})}},handleJson:function(t,e){"ojexpand"===t.type?(this.bindings.expandedJson=!0,this.updateContent()):"ojcollapse"===t.type&&(this.bindings.expandedJson=!1,"relative"===$("#tester-intent-jsonSection").css("position")&&this.updateContent()),this.selectInput()},sendText:function(t,e,i){var n=this;if(this.bindings.itemToAdd()&&""!==this.bindings.itemToAdd().trim()){var s=this.bindings.itemToAdd();if(n.resetResults(),n.bindings.outputText(s),n.bindings.IntentResultView&&n.bindings.IntentResultView.sendUtterance(this.bindings.itemCurrent()),this.bindings.userPreferences().intentInitialUA){var o=this.bindings.userPreferences();o.intentInitialUA=!1,this.bindings.userPreferences(o)}}this.selectInput()},outputText:function(t){var e=this;this.bindings.itemCurrent(t),e.bindings.uiConversation.push({id:e.bindings.lastId,type:"text",text:this.bindings.itemCurrent(),party:0}),e.bindings.lastId++},attach:function(){},downloadFileURL:function(){return"data:application/octet-stream,"+encodeURIComponent(this.bindings.fullJson())},downloadFileName:function(){return i.getCurrentBot().name+"_intent.json"},downloadFileAction:function(){require("suite.security.csrf").downloadFile(this.downloadFileURL(),this.downloadFileName())},loadFile:function(t,e){$(this.config.loadIntentBatchFileBaseElement).ojDialog("open")}},TesterIntentView:function(t){this._super(t)},bindView:function(t){this._super(t);var e=this;this.bindings.isBatchTesting.subscribe(_.bind(function(t){this.notify({TESTER_INTENT_MODE:{data:{isBatchTesting:t}}},{actionSpinner:!1})},this)),$("#tester-intent-input").keyup(function(t){13===t.keyCode&&e.bindings.sendText()})},initModule:function(t){this._super(t)&&this.listen({BOT_SELECT:this.switchBot,UPDATE_LAYOUT:this.updateLayoutHandler,TESTER_INTENT_MODE:this._batchModeHandler})},resetResults:function(){this.bindings.uiConversation([]),this.bindings.lastId=0,this.bindings.IntentResultView&&this.bindings.IntentResultView.resetResults(),this.bindings.itemCurrent(null),this.bindings.expandedJson=!1,_.each(this.bindings.subscriptions,function(t){t.dispose()}),this.bindings.subscriptions=[],this.notify({RESET_RESULTS:{}},{actionSpinner:!1})},updateContent:function(){this.notify({UPDATE_LAYOUT:{data:{intent:!0}}},{actionSpinner:!1})},updateLayoutHandler:function(t){t&&t.intent&&this.updateLayout()},selectInput:function(){setTimeout(function(){$("#tester-intent-input").select()},50)},updateLayout:function(t,e){if(this.bindings.jsonResults().length>0&&$("#tester-intent-jsonSection").length>0){var i={};i.intentSection=$("#tester-intent-section").innerHeight(),i.jsonHeader=$("#tester-intent-json-header").innerHeight(),i.content=$("#intent-test-content").innerHeight();var n=$("#tester-intent-jsonSection").ojCollapsible("option","expanded");i.json=n?$("#tester-intent-json").innerHeight():0,i.intentSection<i.jsonHeader+i.json+i.content?($("#tester-intent-jsonSection").css("position","relative"),setTimeout(function(){var t=$("#tester-intent-section");t.scrollTop(n?i.content-.5*i.intentSection:i.jsonHeader+i.json+i.content)},200)):setTimeout(function(){$("#tester-intent-jsonSection").css("position","absolute")},200)}else $("#tester-intent-jsonSection").css("position","absolute")},loadModule:function(t){if(!this._super(t))return!1},reloadModule:function(t){if(!this._super(t))return!1},switchBot:function(t){t&&t.previousBot&&(this.log("switch bot"),this.saveState(t.previousBot.id),this.restoreState(t.selectedBot.id),u.state[t.selectedBot.id]=null,u.response[t.selectedBot.id]?(this.testReturned(u.response[t.selectedBot.id]),u.response[t.selectedBot.id]=null):(this.bindings.jsonResults().length>0&&$("#tester-intent-jsonSection").length>0?(this.log("intent tester: adjusting jsonSection expand/collapse"),this.bindings.IntentResultView&&this.bindings.IntentResultView.refreshHandlers(),$("#tester-intent-jsonSection").ojCollapsible("option","expanded")!==this.bindings.expandedJson&&$("#tester-intent-jsonSection").ojCollapsible("option","expanded",this.bindings.expandedJson)):this.log("intent tester: no json expand/collapse handling needed"),this.updateContent()),this.selectInput())},saveState:function(t,e){var i=e?"batchintent":"intent";u.state[t]||(u.state[t]={}),u.state[t][i]={uiConversation:this.bindings.uiConversation(),lastId:this.bindings.lastId,itemToAdd:this.bindings.itemToAdd(),itemCurrent:this.bindings.itemCurrent(),expandedJson:this.bindings.expandedJson,intentResult:this.bindings.IntentResultView?this.bindings.IntentResultView.getState():null}},restoreState:function(t,e){var i=e?"batchintent":"intent";if(u.state[t]&&u.state[t][i]){var n=u.state[t][i];this.bindings.uiConversation(n.uiConversation),this.bindings.lastId=n.lastId,this.bindings.itemToAdd(n.itemToAdd),this.bindings.itemCurrent(n.itemCurrent),this.bindings.expandedJson=n.expandedJson,this.bindings.IntentResultView&&this.bindings.IntentResultView.loadState(n.intentResult)}else this.bindings.resetTest(!0)},_batchModeHandler:function(t){$("#tester-intent-input").keyup(_.bind(function(t){13===t.keyCode&&this.bindings.sendText()},this)),this.notify({UPDATE_TESTER_HEIGHT:{}})}});return new h({baseElement:"#tester-intent-pane",baseTemplateData:i.templateData,intentResultBaseElement:"#intent-test-details",intentBatchBaseElement:"#intent-batch-test-details",loadIntentBatchFileBaseElement:"#tester-intent-load-batch-file-dialog"})}),define("bots.package.tester/dataobject",["module","bots.i18n","mcs.js.framework/dataobject"],function(t,e,i){var n=i.extend({module:t,name:"QnAContentDataObject"},{QnAContentDataObject:function(t){this.id=ko.observable(),this.questions=ko.observableArray(),this.answer=ko.observable(),this.categories=ko.observable(),this._super(t)},fromJS:function(t,e){this._super(t,e),this.idAttr=this.id()},toUpdateJS:function(){var t=this.toJS(),e=_.pick(t,["id","questions","answer","categories"]);return e}});return{QnAContentDataObject:n}}),define("bots.package.qna/qna.enums",{QnASourceTypeEnum:{FILE:"CSV"},QnAThesaurusTypeEnum:{STOP_WORD:"STOP_WORD",SYNONYMS:"SYNONYMS",ABBREVIATION:"ABBREVIATION"},QnARoutingConfigTypeEnum:{REQUEST_VERB:"REQUEST_VERB",REQUEST_VERB_PREFIX:"REQUEST_VERB_PREFIX",REQUEST_VERB_EXPANSION:"REQUEST_VERB_EXPANSION",FAQ_VERB_PREFIX:"FAQ_VERB_PREFIX"},QnADataSourceStateEnum:{INGESTING:"INGESTING",CREATED:"CREATED",ERROR:"ERROR"},QnAJobStatusEnum:{SUCCESS:"SUCCESS",FAILURE:"FAILURE"}}),define("bots.package.qna/dataobject",["module","bots.i18n","mcs.js.framework/dataobject","bots.package.qna/qna.enums"],function(t,e,i,n){var s=i.extend({module:t,name:"QnADataObject"},{QnADataObject:function(t){this.id=ko.observable(),this.name=ko.observable(),this.description=ko.observable(),this.enabled=ko.observable(),this._super(t)},fromJS:function(t,e){this._super(t,e),this.idAttr=this.id()},toUpdateJS:function(){var t=this.toJS(),e=_.pick(t,["id","name","description","enabled"]);return e}}),o=i.extend({module:t,name:"ThesaurusDataObject"},{ThesaurusDataObject:function(t){this.id=ko.observable(),this.type=ko.observable(),this.definition=ko.observableArray(),this.enabled=ko.observable(),this.languageTag=ko.observable(),this.default=ko.observable(),this.abbreviation=ko.observable(),this.definitionToDisplay=ko.observable(),this.defaultThesaurus=ko.observable(),this._super(t)},fromJS:function(t,i){this._super(t,i),this.idAttr=this.id();var s,o=this.definition();Array.isArray(o)||(s=o?o.split(","):[],this.type()===n.QnAThesaurusTypeEnum.ABBREVIATION?(this.abbreviation(_.first(s)),this.definition(s.slice(1)),this.definitionToDisplay(e.translate("qna.landing.thesaurus.formattedAbbreviation",this.abbreviation(),this.definition().join(", ")))):(this.abbreviation(""),this.definition(s.slice(0)),this.definitionToDisplay(s.join(", ")))),this.defaultThesaurus(this.default())},toJS:function(){var t=this._super();return Array.isArray(t.definition)&&(t.type===n.QnAThesaurusTypeEnum.ABBREVIATION&&t.definition.unshift(t.abbreviation),t.definition=t.definition.join(",")),_.pick(t,"id","type","definition","enabled","languageTag","default")}}),a=i.extend({module:t,name:"QuestionAlt"},{QuestionAlt:function(t){this.question=ko.observable(),this._super(t)}}),r=i.extend({module:t,name:"QnAContentDataObject"},{QnAContentDataObject:function(t){this.id=ko.observable(),this.questions=ko.observableArray(),this.answer=ko.observable(),this.categories=ko.observable(),this._super(t)},fromJS:function(t,e){this._super(t,e),this.idAttr=this.id()},toUpdateJS:function(){var t=this.toJS(),e=_.pick(t,["id","questions","answer","categories"]);return e}}),l=i.extend({module:t,name:"DataSourceDataObject"},{DataSourceDataObject:function(t){this.id=ko.observable(),this.name=ko.observable(),this.type=ko.observable(),this.languageTag=ko.observable(),this.description=ko.observable(),this.configJson=ko.observable(),this.enabled=ko.observable(),this.updatedOn=ko.observable(),this.ingestingStatus=ko.observable(),this.isEditable=ko.observable(),this.displayName=ko.observable(),this._super(t)},fromJS:function(t,i){this._super(t,i),this.idAttr=this.id(),this.ingestingStatus(n.QnADataSourceStateEnum.INGESTING===t.state?e.translate("qna.landing.loading"):""),this.isEditable(n.QnADataSourceStateEnum.CREATED===t.state),this.displayName(e.translate("qna.allqna.datasourceDisplayName",t.name,t.languageTag))},toUpdateJS:function(){var t=this.toJS(),e=_.pick(t,["id","name","description"]);return e}}),d=i.extend({module:t,name:"AllSupportedLanguagesDO"},{AllSupportedLanguagesDO:function(t){this.languageOptions=ko.computed(function(){return this.languageOptions.slice(0)},this,{deferEvaluation:!0}),this.localeOptionsByLanguageCode=_.bind(function(t){return ko.computed(function(){var e=this.languageMap[t];return e?e:[]},this,{deferEvaluation:!0})},this),this.languageOptions=[],this.languageMap={},this.languageCodeToNameMap={},this._super(t)},fromJS:function(t,i){var n=this;this._super({},i),_.each(t,function(t,i){var s=_.first(t).languageCode;n.languageOptions.push({value:s,label:i}),n.languageCodeToNameMap[s]=i,n.languageMap[s]=[],_.each(t,function(t){t.countryName&&(n.languageCodeToNameMap[t.locale]=e.translate("qna.landing.source.langWithCountry",i,t.countryName),n.languageMap[s].push({value:t.locale,label:t.countryName}))})})}});return{QnADataObject:s,ThesaurusDataObject:o,QnAContentDataObject:r,QuestionAlt:a,DataSourceDataObject:l,AllSupportedLanguagesDO:d}}),define("bots.package.tester/qna.popup",["module","suite.package.util/messaging","bots.package.shell/validators","bots.package.view/dialog","bots.i18n","bots.model.rest","bots.package.qna/dataobject"],function(t,e,i,n,s,o,a){var r=n.extend({module:t,name:"QnAPopup"},{config:{type:"ojDialog"},bindings:{botsValidators:i,createAnotherFlag:{func:ko.observable,args:[!1]},fieldQuestionId:{func:ko.observable},fieldQuestionCan:{func:ko.observable},fieldQuestionAlt:{func:ko.observable},fieldQuestionAltArray:{func:ko.observableArray,args:[[]]},fieldAnswer:{func:ko.observable},fieldCategories:{func:ko.observable,args:[!0]},isEditPopup:{func:ko.observable},uniqueNameValidator:{func:function(){var t=this;return{validate:function(e,i){if(!t.config.parentView.validateSourceName(e))throw new oj.ValidatorError(s.translate("bots.cloneBotDialog.newName.alreadyExists.summary"),s.translate("bots.cloneBotDialog.newName.alreadyExists.detail"))}}}},addQuestionAlt:function(){var t=this.bindings.fieldQuestionAltArray(),e=new a.QuestionAlt("");e.id=Math.floor(100*Math.random()+1),t.push(e),this.bindings.fieldQuestionAltArray(t)},deleteQuestionAlt:function(t,e){for(var i=-1,n=this.bindings.fieldQuestionAltArray(),s=0;s<n.length;s++)if(n[s].id===t.id){i=s;break}i>=0&&(n.splice(i,1),this.bindings.fieldQuestionAltArray(n))},getQuestionsAlt:function(){return new oj.ArrayTableDataSource(this.bindings.fieldQuestionAltArray,{idAttribute:"id"})},updateQnAContent:function(t){if(this.deps.uiComponents.validateFields($(this.config.baseElement))){for(var i=new Array(this.bindings.fieldQuestionCan(),this.bindings.fieldQuestionAlt()),n=this.bindings.fieldQuestionAltArray(),o=0;o<n.length;o++)i.push(n[o].question());this.notify({TESTER_UPDATE_QNA_CONTENT:{data:{id:this.bindings.fieldQuestionId(),qnaId:this._qnaId,datasourceId:this._datasourceId,qnaContent:{questions:i,content:this.bindings.fieldAnswer(),categories:this.bindings.fieldCategories()}}}},{actionSpinner:!0}).always(_.bind(function(t){t.status>204?e.showI18nError(t,"qna.errors.failedCreate"):(e.showConfirmation(s.translate("qna.messages.success.updateQnAContent")),this.resetFields(),this.close())},this))}},closeQnAPopup:function(){this.resetFields(),this.close()}},_qnaId:"",_datasourceId:"",QnAPopup:function(t){this._super(t)},open:function(t,e){if(this.config.resetFieldsOnOpen=!t||t.resetFieldsOnOpen,this._qnaId=t.qnaId,this._datasourceId=t.datasourceId,this.bindings.isEditPopup(!t.resetFieldsOnOpen),this.bindings.bot(t.bot),void 0!==e){this.bindings.fieldQuestionId(e.qnaContent.id());var i=e.qnaContent.questions();if(this.bindings.fieldQuestionCan(i[0]),i.length>=2&&this.bindings.fieldQuestionAlt(i[1]),i.length>2){for(var n=[],s=2;s<i.length;s++){var o=new a.QuestionAlt;o.question(i[s]),o.id=Math.floor(100*Math.random()+1),n.push(o)}this.bindings.fieldQuestionAltArray(n)}this.bindings.fieldAnswer(e.qnaContent.content()),this.bindings.fieldCategories(e.qnaContent.categories())}this._super()},resetFields:function(t){this._super(t),this.bindings.fieldQuestionId(""),this.bindings.fieldQuestionCan(""),this.bindings.fieldQuestionAlt(""),this.bindings.fieldQuestionAltArray([]),this.bindings.fieldAnswer(""),this.bindings.fieldCategories([])}});return r}),define("bots.package.tester/qna.result",["module","suite.package.util/messaging","bots.config","bots.i18n","bots.router","bots.package.view/view","bots.package.tester/facade","bots.package.tester/dataobject","bots.package.tester/qna.popup","suite.package.util/messaging"],function(t,e,i,n,s,o,a,r,l,d){var c=o.extend({module:t,name:"QnAResultView"},{__static__:{SYSTEM_ENTITY_NAMES:["ADDRESS","CURRENCY","DATE","DURATION","EMAIL","NUMBER","PHONE_NUMBER","SET","TIME","URL","YES_NO"]},deps:{i18n:n,facade:a,botsConfig:i},config:{},bindings:{i18n:n,showMore:{func:ko.observable,args:[!1]},showNumQnAs:3,isTesting:{func:ko.observable,args:[!1]},query:"",text:{func:ko.observable,args:[]},answerMatches:{func:ko.observable,args:[[]]},selectedQnA:{func:ko.observable,args:[]},selectedLanguage:{func:ko.observable,args:[]},minimumShouldMatch:{func:ko.observable,args:[]},useDefaultMinimumShouldMatch:{func:ko.observable,args:[!0]},selectedAnswer:{func:ko.observable,args:[]},answerMatchList:{func:ko.observable,args:[[]]},errorList:{func:ko.observable,args:[[]]},isBatchTesting:{func:ko.observable,args:[!1]},trainingDataUnit:{func:ko.observable},qnaId:{func:ko.computed,args:[function(){return this.bindings.trainingDataUnit()?this.bindings.trainingDataUnit().qna:null},this,{deferEvaluation:!0}]},qnaPopup:{func:function(){return new l({baseElement:"#tester-qna-edit-dialog",contentElement:"#tester-qna-edit-dialog",parentView:this,isSubView:!0})}},jsonResults:{func:ko.observable,args:[[]]},fullJson:{func:ko.computed,args:[function(){return JSON.stringify(this.bindings.jsonResults(),null,2)},this,{deferEvaluation:!0}]},downloadFileURL:function(){return"data:application/octet-stream,"+encodeURIComponent(this.bindings.fullJson())},downloadFileName:function(){return i.getCurrentBot().name+"_qna.json"},downloadFileAction:function(){require("suite.security.csrf").downloadFile(this.downloadFileURL(),this.downloadFileName())},subscriptions:[],exampleAdded:{func:ko.observableArray,args:[[]]},addQuestionDisabled:{func:ko.computed,args:[function(){return!this.bindings.isDraftVersion()||!(_.indexOf(this.bindings.exampleAdded(),this.bindings.qnaId())<0)},this,{deferEvaluation:!0}]},getMore:function(){this.bindings.showMore(!0),this.updateContent()},addToQuestion:function(t,s,o){var a=this,r=_.find(this.bindings.answerMatchList(),_.bind(function(t){return t.title===this.bindings.selectedAnswer()},this)),l=this.bindings.selectedQnA().id,d=this.bindings.selectedQnA().name;this.notify({ADD_TO_QUESTION:{data:{qnaId:l,botId:i.getCurrentBot().id,answerId:r.answerId,answers:[this.bindings.text()]}}},{actionSpinner:!0}).always(_.bind(function(t){t.status>204?e.showWarning(n.translate("tester.messages.failure.addExample",d)):(a.bindings.exampleAdded.push(a.bindings.qnaId()),e.showConfirmation(n.translate("tester.messages.success.addExample",d)))},this))},editAnswer:function(t){var e=this;t&&t.answerId&&this.notify({GET_ANSWER:{data:{botId:i.getCurrentBot().id,qnaId:e.bindings.selectedQnA().id,answerId:t.answerId}}},{actionSpinner:!0}).always(_.bind(function(t){return t.status>204||!t.data?(this.error("Could not retrieve answer details"),!1):void this.bindings.onClickEditQnAContent(new r.QnAContentDataObject(t.data));
},this))},onClickEditQnAContent:function(t){this.bindings.qnaPopup.open({resetFieldsOnOpen:!1,datasourceId:t.datasourceId(),qnaId:t.qnaId(),bot:this.bindings.bot()},{qnaContent:t})}},setData:function(t,e){e&&this.resetResults(),this.bindings.jsonResults([t]),this.bindings.answerMatches(t.answerMatches),this.bindings.answerMatchList(_.clone(this.computeAnswerMatchList(this.bindings.answerMatches()))),this.bindings.query=t.query,this.updateContent(),e&&this.refreshHandlers()},updateContent:function(){this.config.parentView.updateContent()},resetResults:function(){this.bindings.query="",this.bindings.answerMatches([]),this.bindings.answerMatchList([]),this.bindings.errorList([]),this.bindings.exampleAdded([]),this.bindings.jsonResults([]),this.bindings.selectedQnA(null),this.bindings.showMore(!1),this.bindings.isTesting(!1),_.each(this.bindings.subscriptions,function(t){t.dispose()}),this.bindings.subscriptions=[]},getState:function(){return{query:this.bindings.query,jsonResults:this.bindings.jsonResults(),isTesting:this.bindings.isTesting(),showMore:this.bindings.showMore(),selectedQnA:this.bindings.selectedQnA(),answerMatches:this.bindings.answerMatches(),errorList:this.bindings.errorList(),exampleAdded:this.bindings.exampleAdded()}},loadState:function(t){this.bindings.query=t.query,this.bindings.jsonResults(t.jsonResults),this.bindings.isTesting(t.isTesting),this.bindings.showMore(t.showMore),this.bindings.selectedQnA(t.selectedQnA),this.bindings.answerMatches(t.answerMatches),this.bindings.errorList(t.errorList),this.bindings.exampleAdded(t.exampleAdded),this.bindings.answerMatchList(_.clone(this.computeAnswerMatchList(this.bindings.answerMatches()))),this.refreshHandlers()},computeAnswerMatchList:function(){var t=this;return t.bindings.answerMatches().count>0?(t.bindings.selectedAnswer()||t.bindings.selectedAnswer(t.bindings.answerMatches().answerMatchList[0].title),_.map(t.bindings.answerMatches().answerMatchList,function(e,i){var n={answerId:e.answerId,title:e.title,class:"next",index:i+1,expectedMatchIndex:0,selected:ko.observable(t.bindings.selectedAnswer()===e.title?e.title:null)};return n})):[]},sendUtterance:function(t){this.bindings.text(t),this.bindings.isTesting(!0);var e={data:{botId:i.getCurrentBot().id,sentence:t}};this.bindings.useDefaultMinimumShouldMatch()||(e.data.minimumShouldMatch=this.bindings.minimumShouldMatch()),this.bindings.selectedQnA()&&this.bindings.selectedLanguage()&&(e.data.qnaId=this.bindings.selectedQnA().id,e.data.languageTag=this.bindings.selectedLanguage()),this.notify({TEST_QNA:e},{actionSpinner:!1})},qnaTestReturned:function(t){t.itemId=-1;i.getCurrentBot().id,i.getCurrentBot().name;if(this.bindings.isTesting(!1),this.log(t),t&&t.data&&t.itemId===-1)if(t.botId===i.getCurrentBot().id){if(t.data.answerMatches.count>0)this.setData(t.data);else{var e="Could not find any question related to input utterance in the selected Language";this.error(e),this.bindings.errorList([n.translate("tester.qna.no-answer")])}this.refreshHandlers(),this.updateContent()}else d.showI18nError(t,"tester.qna.switchBotError");else t.status&&t.status>204&&(t.botId===i.getCurrentBot().id?d.showI18nError(t,"tester.qna.queryError"):d.showI18nError(t,"tester.qna.switchBotError"))},refreshHandlers:function(){_.each(this.bindings.subscriptions,function(t){t.dispose()}),this.bindings.subscriptions=[];var t,e=this;_.each(this.bindings.answerMatchList(),function(i,n){t=i.selected.subscribe(function(t){t&&(e.bindings.selectedAnswer(t),e._selectQuestion(t))}),e.bindings.subscriptions.push(t)})},bindView:function(t){this._super(t)},initModule:function(t){this._super(t)&&this.listen({TEST_QNA:this.qnaTestReturned,TESTER_QNA_MODE:this._batchModeHandler})},renderView:function(t){this._super(t)},QnAResultView:function(t){this._super(t)},resetFields:function(t){this._super(t)},_batchModeHandler:function(t){t&&t.hasOwnProperty("isBatchTesting")&&this.bindings.isBatchTesting(t.isBatchTesting)},_selectQuestion:function(t){_.each(this.bindings.answerMatchList(),function(e,i){e.title!==t&&e.selected(!1)})}});return c}),define("bots.package.tester/qna.load.batch.file",["module","bots.package.shell/validators","bots.package.view/dialog","bots.i18n"],function(t,e,i,n){var s,o=i.extend({module:t,name:"QnALoadBatchFileDialog"},{__static__:{CHUNK_SIZE:102400,MINIMUM_SHOULD_MATCH_DEFAULT:"50%,25%"},config:{type:"ojDialog"},bindings:{botsValidators:e,fileInfo:{func:ko.observable,args:[{}]},fileError:{func:ko.observable,args:[""]},fileStatus:{func:ko.observable,args:["none"]},fileObjects:[],limits:{MAX_FILE_SIZE_MB:20,MAX_LINES:50001},concurrentTests:{func:ko.observable,args:[3]},matchesToInclude:{func:ko.observable,args:[3]},matchesInOrder:{func:ko.observable,args:[!1]},minimumShouldMatch:{func:ko.observable,args:[]},useDefaultMinimumShouldMatch:{func:ko.observable,args:[!0]},loadQnAFile:function(t){t.target.files&&t.target.files.length>0&&this.handleLoadedFile(t.target.files[0])},testQnAFile:function(t){var e={data:{tests:_.clone(this.bindings.fileObjects),concurrent:this.bindings.concurrentTests(),matchesToInclude:this.bindings.matchesToInclude(),matchesInOrder:this.bindings.matchesInOrder(),minimumShouldMatch:this.bindings.minimumShouldMatch(),useDefaultMinimumShouldMatch:this.bindings.useDefaultMinimumShouldMatch()}};this.notify({PROCESS_QNA_BATCH_FILE:e},{actionSpinner:!1})},closeDialog:function(){},openDialog:function(){this.bindings.fileStatus("none"),$("#qnaBatchFileUploadDropzone").removeClass("error"),this.bindings.fileInfo({}),this.bindings.fileError(""),this.bindings.fileObjects=[],this.bindings.minimumShouldMatch()||(this.bindings.minimumShouldMatch(this.__static__.MINIMUM_SHOULD_MATCH_DEFAULT),this.bindings.useDefaultMinimumShouldMatch(!0)),setTimeout(function(){$("#qnaBatchFileUploadLink").blur()},50)},clickUpload:function(){var t=$("#qnaBatchFileUploadFile");t.length>0&&(t[0].value=null),$("#qnaBatchFileUploadFile").trigger("click")},increaseMatchesToInclude:function(){this.bindings.matchesToInclude()<5&&this.bindings.matchesToInclude(this.bindings.matchesToInclude()+1)},decreaseMatchesToInclude:function(){this.bindings.matchesToInclude()>1&&this.bindings.matchesToInclude(this.bindings.matchesToInclude()-1)},increaseConcurrent:function(){this.bindings.concurrentTests()<5&&this.bindings.concurrentTests(this.bindings.concurrentTests()+1)},decreaseConcurrent:function(){this.bindings.concurrentTests()>1&&this.bindings.concurrentTests(this.bindings.concurrentTests()-1)},resetDefaultMinimumShouldMatch:function(t,e){this.bindings.minimumShouldMatch(this.__static__.MINIMUM_SHOULD_MATCH_DEFAULT),this.bindings.useDefaultMinimumShouldMatch(!0)},editDefaultMinimumShouldMatch:function(t,e){this.bindings.useDefaultMinimumShouldMatch(!1)}},fileReference:null,setupEventHandlers:function(){var t=document.getElementById("qnaBatchFileUploadDropzone");t.addEventListener("dragover",this.handleDragOver,!1),t.addEventListener("drop",this.handleFileSelect,!1),$("#tester-qna-load-batch-file-dialog").on("ojclose",this.bindings.closeDialog),$("#tester-qna-load-batch-file-dialog").on("ojopen",this.bindings.openDialog),$("#qnaBatchFileUploadFile").on("change",this.bindings.loadQnAFile)},bindView:function(t){this._super(t),this.setupEventHandlers()},rebindView:function(t){this._super(t),this.bindView(t)},showFileError:function(t){this.bindings.fileStatus("error"),$("#qnaBatchFileUploadDropzone").addClass("error"),this.bindings.fileError(t)},handleParsing:function(t){var e=this;try{if(e.bindings.fileObjects=$.csv.toObjects(t),e.bindings.fileObjects=e.validateFileObjects(e.bindings.fileObjects),!e.bindings.fileObjects.length)return;e.bindings.fileObjects=_.filter(e.bindings.fileObjects,function(t){return t.languageTag&&t.question}),e.bindings.fileObjects.length<e.bindings.limits.MAX_LINES?e.bindings.fileObjects.length>0?(e.bindings.fileStatus("ready"),$("#qnaBatchFileUploadDropzone").removeClass("error")):this.showFileError(n.translate("tester.qna.batch.dialog.error.missingRows")):this.showFileError(n.translate("tester.qna.batch.dialog.error.longFile"))}catch(t){this.showFileError(n.translate("tester.qna.batch.dialog.error.unknown"))}},processTestFile:function(){var t=new FileReader,e=new TextDecoder,i=this;t.onload=function(t){return function(t){i.handleParsing(e.decode(t.target.result))}}(this.fileReference),t.onerror=function(){i.showFileError(t.error)},t.readAsArrayBuffer(this.fileReference)},processBigTestFile:function(){var t=this;this.readLines(this.fileReference,this.bindings.limits.MAX_LINES+1,function(e,i){if(e)t.showFileError(e);else if(i&&i.length>=t.bindings.limits.MAX_LINES+1)t.showFileError(n.translate("tester.qna.batch.dialog.error.longFile"));else{var s=i.join("\n");t.handleParsing(s)}})},readLines:function(t,e,i){function n(){if(a===e)return void i(null,l);if(0!==o&&o>=t.size)return r.trim().length>0&&l.push(r),void i(null,l);var n=t.slice(o,o+c.__static__.CHUNK_SIZE);d.readAsArrayBuffer(n)}var s=new TextDecoder,o=0,a=0,r="",l=[],d=new FileReader,c=this;d.onload=function(){r+=s.decode(d.result,{stream:!0});var t=r.split("\n");r=t.pop(),a+=t.length,a>e&&(t.length-=a-e,a=e);for(var i=0;i<t.length;++i)t[i].trim().length>0&&l.push(t[i]);o+=c.__static__.CHUNK_SIZE,n()},d.onerror=function(){i(d.error)},n()},handleLoadedFile:function(t){this.bindings.isLoading(!0),this.bindings.fileStatus("loading");var e={name:t.name,type:t.type||"n/a",size:t.size,lastModified:t.lastModifiedDate};this.bindings.fileInfo(e),this.fileReference=t,e.size<this.__static__.CHUNK_SIZE?this.processTestFile():e.size<1024*this.bindings.limits.MAX_FILE_SIZE_MB*1024?this.processBigTestFile():this.showFileError(n.translate("tester.qna.batch.dialog.error.largeFile"))},handleFileSelect:function(t){t.stopPropagation(),t.preventDefault();var e=t.dataTransfer.files;e.length>=1&&this.handleLoadedFile(e[0])},handleDragOver:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},QnALoadBatchFileDialog:function(t){this._super(t)},resetFields:function(t){this._super(t)},open:function(t,e){return this._super(),s=$.Deferred()},validateFileObjects:function(t){return 0===t.length?(this.showFileError(n.translate("tester.qna.batch.dialog.error.missingRows")),[]):t[0].languageTag&&t[0].question?t=_.filter(t,_.bind(function(t){return this.validateQnABatchRow(t)},this)):(this.showFileError(n.translate("tester.qna.batch.dialog.error.missingColumns")),[])},validateQnABatchRow:function(t){return!!_.contains(_.keys(t),"languageTag","question","match-1")}});return o}),define("bots.package.tester/qna.batch.result",["module","suite.package.util/messaging","bots.config","bots.i18n","bots.router","bots.package.view/view","bots.package.tester/facade","bots.package.tester/dataobject","bots.package.tester/qna.popup","suite.package.util/messaging"],function(t,e,i,n,s,o,a,r,l,d){var c=o.extend({module:t,name:"QnABatchResultView"},{__static__:{SYSTEM_ENTITY_NAMES:["ADDRESS","CURRENCY","DATE","DURATION","EMAIL","NUMBER","PHONE_NUMBER","SET","TIME","URL","YES_NO"]},deps:{i18n:n,facade:a,botsConfig:i},config:{},bindings:{i18n:n,showMore:{func:ko.observable,args:[!1]},showNumQnAs:3,isTesting:{func:ko.observable,args:[!1]},query:"",answerMatches:{func:ko.observable,args:[[]]},expectedMatches:{func:ko.observable,args:[[]]},selectedQnAId:{func:ko.observable,args:[]},selectedQnAName:{func:ko.observable,args:[]},selectedLanguage:{func:ko.observable,args:[]},selectedAnswer:{func:ko.observable,args:[]},answerMatchList:{func:ko.observable,args:[]},errorList:{func:ko.observable,args:[[]]},trainingDataUnit:{func:ko.observable},qnaId:{func:ko.computed,args:[function(){return this.bindings.trainingDataUnit()?this.bindings.trainingDataUnit().qna:null},this,{deferEvaluation:!0}]},jsonResults:{func:ko.observable,args:[[]]},fullJson:{func:ko.computed,args:[function(){return JSON.stringify(this.bindings.jsonResults(),null,2)},this,{deferEvaluation:!0}]},downloadFileURL:function(){return"data:application/octet-stream,"+encodeURIComponent(this.bindings.fullJson())},downloadFileName:function(){return i.getCurrentBot().name+"_qna.json"},downloadFileAction:function(){require("suite.security.csrf").downloadFile(this.downloadFileURL(),this.downloadFileName())},subscriptions:[],questionAdded:{func:ko.observableArray,args:[[]]},addQuestionDisabled:{func:ko.computed,args:[function(){return!this.bindings.isDraftVersion()||!(_.indexOf(this.bindings.questionAdded(),this.bindings.qnaId())<0)},this,{deferEvaluation:!0}]},getMore:function(){this.bindings.showMore(!0),this.updateContent()},addToQuestion:function(t,s,o){var a=this,r=_.find(this.bindings.answerMatchList(),_.bind(function(t){return t.title===this.bindings.selectedAnswer()},this)),l=this.bindings.selectedQnAId(),d=this.bindings.selectedQnAName();this.notify({ADD_TO_QUESTION:{data:{qnaId:l,botId:i.getCurrentBot().id,answerId:r.answerId,answers:[this.bindings.query]}}},{actionSpinner:!0}).always(_.bind(function(t){t.status>204?e.showWarning(n.translate("tester.messages.failure.addQuestion",d)):(a.bindings.questionAdded.push(a.bindings.qnaId()),e.showConfirmation(n.translate("tester.messages.success.addQuestion",d)))},this))},qnaPopup:{func:function(){return new l({baseElement:"#tester-qna-batch-edit-dialog",contentElement:"#tester-qna-batch-edit-dialog",parentView:this,isSubView:!0})}},editAnswer:function(t){var e=this;t&&t.answerId&&this.notify({GET_ANSWER:{data:{botId:i.getCurrentBot().id,qnaId:e.bindings.selectedQnAId(),answerId:t.answerId}}},{actionSpinner:!0}).always(_.bind(function(t){return t.status>204||!t.data?(this.error("Could not retrieve answer details"),!1):void this.bindings.onClickEditQnAContent(new r.QnAContentDataObject(t.data))},this))},onClickEditQnAContent:function(t){this.bindings.qnaPopup.open({resetFieldsOnOpen:!1,datasourceId:t.datasourceId(),qnaId:t.qnaId(),bot:this.bindings.bot()},{qnaContent:t})}},setData:function(t,e){if(e&&this.resetResults(),t){this.bindings.jsonResults([t]);var i=[],n=1,s={};t&&t.expectedMatchIds&&_.each(t.expectedMatchIds,_.bind(function(t){var e=_.keys(t);_.each(e,function(e){s[t[e]]=n,i.push({title:e,id:t[e]}),n++})},this)),this.bindings.expectedMatches(i);var o=[];t&&t.actualMatchIds&&_.each(t.actualMatchIds,_.bind(function(t){var e=_.keys(t);_.each(e,function(e){var i=s[t[e]]?s[t[e]]:-1;o.push({title:e,id:t[e],expectedMatchIndex:i})})},this)),this.bindings.answerMatches(o),this.bindings.answerMatchList(_.clone(this.computeAnswerMatchList(this.bindings.answerMatches()))),this.bindings.query=t.question}else this.bindings.expectedMatches([]),this.bindings.answerMatches([]),this.bindings.query="";this.updateContent(),e&&this.refreshHandlers()},updateContent:function(){this.config.parentView.updateContent()},resetResults:function(){this.bindings.query="",this.bindings.answerMatches([]),this.bindings.answerMatchList([]),this.bindings.errorList([]),this.bindings.questionAdded([]),this.bindings.jsonResults([]),this.bindings.selectedQnAId(null),this.bindings.selectedQnAName(null),this.bindings.showMore(!1),this.bindings.isTesting(!1),_.each(this.bindings.subscriptions,function(t){t.dispose()}),this.bindings.subscriptions=[]},getState:function(){return{query:this.bindings.query,jsonResults:this.bindings.jsonResults(),isTesting:this.bindings.isTesting(),showMore:this.bindings.showMore(),selectedQnAId:this.bindings.selectedQnAId(),selectedQnAName:this.bindings.selectedQnAName(),answerMatches:this.bindings.answerMatches(),errorList:this.bindings.errorList(),questionAdded:this.bindings.questionAdded()}},loadState:function(t){this.bindings.query=t.query,this.bindings.jsonResults(t.jsonResults),this.bindings.isTesting(t.isTesting),this.bindings.showMore(t.showMore),this.bindings.selectedQnAId(t.selectedQnAId),this.bindings.selectedQnAName(t.selectedQnAName),this.bindings.answerMatches(t.answerMatches),this.bindings.questionAdded(t.questionAdded),this.bindings.expectedMatches(t.expectedMatches),this.bindings.errorList(t.errorList),this.bindings.answerMatchList(_.clone(this.computeAnswerMatchList(this.bindings.answerMatches()))),this.refreshHandlers()},computeAnswerMatchList:function(t){var e=this;return t&&t.length?(this.bindings.errorList([]),e.bindings.selectedAnswer(t[0].title),_.map(t,function(t,i){var n={answerId:t.id,title:t.title,class:"next",index:i+1,selected:ko.observable(e.bindings.selectedAnswer()===t.title?t.title:null),expectedMatchIndex:t.expectedMatchIndex};return n})):(this.bindings.errorList([n.translate("tester.qna.no-answer")]),[])},refreshHandlers:function(){_.each(this.bindings.subscriptions,function(t){t.dispose()}),this.bindings.subscriptions=[];var t,e=this;_.each(this.bindings.answerMatchList(),function(i,n){t=i.selected.subscribe(function(t){t&&(e.bindings.selectedAnswer(t),e._selectQuestion(t))}),e.bindings.subscriptions.push(t)})},bindView:function(t){this._super(t)},initModule:function(t){!this._super(t)},renderView:function(t){this._super(t)},QnABatchResultView:function(t){this._super(t)},resetFields:function(t){this._super(t)},_selectQuestion:function(t){_.each(this.bindings.answerMatchList(),function(e,i){e.title!==t&&e.selected(!1)})}});return c}),define("bots.package.tester/view.qna.batch",["module","bots.config","bots.i18n","bots.router","bots.package.view/view","bots.package.tester/facade","suite.package.util/messaging","bots.package.tester/qna.load.batch.file","bots.package.tester/qna.batch.result","ojs/ojnavigationlist"],function(t,e,i,n,s,o,a,r,l){var d={state:{},response:{}},c=s.extend({module:t,name:"TesterBatchQnAView"},{deps:{i18n:i,facade:o,botsConfig:e},bindings:{i18n:i,resetCounter:0,isTesting:{func:ko.observable,args:[!1]},isFinished:{func:ko.observable,args:[!1]},isStopped:{func:ko.observable,args:[!1]},maxDisplayRows:20,largeFileLimit:200,testObjects:[],currentRunIndex:-1,numConcurrent:{func:ko.observable,args:[3]},matchesToInclude:{func:ko.observable,args:[3]},matchesInOrder:{func:ko.observable,args:[]},minimumShouldMatch:{func:ko.observable,args:[]},useDefaultMinimumShouldMatch:{func:ko.observable,args:[!0]},numTesting:0,numPassed:{func:ko.observable,args:[0]},numFailed:{func:ko.observable,args:[0]},offset:{func:ko.observable,args:[0]},numCompleted:{func:ko.computed,args:[function(){return this.bindings.numPassed()+this.bindings.numFailed()},this,{deferEvaluation:!0}]},numTotal:{func:ko.observable,args:[0]},pageStart:{func:ko.computed,args:[function(){return this.bindings.offset()+1>this.bindings.numCompleted()?0:this.bindings.offset()+1},this,{deferEvaluation:!0}]},pageEnd:{func:ko.computed,args:[function(){return this.bindings.offset()+this.bindings.maxDisplayRows<this.bindings.testResults().length?this.bindings.offset()+this.bindings.maxDisplayRows:this.bindings.testResults().length},this,{deferEvaluation:!0}]},testResults:{func:ko.observableArray,args:[[]]},testResultsDisplay:{func:ko.observableArray,args:[[]]},testResultsDS:{func:function(){return new oj.ArrayTableDataSource(this.bindings.testResultsDisplay)}},showDetails:{func:ko.observable,args:[!1]},currentRowContent:{func:ko.observable,args:[{}]},expandedJson:{func:ko.observable,args:[!1]},isBatchTesting:{func:ko.observable,args:[!1]},jsonResults:{func:ko.observableArray,args:[[]]},fullJson:{func:ko.computed,args:[function(){return JSON.stringify(this.bindings.jsonResults(),null,2)},this,{deferEvaluation:!0}]},handleJson:function(t,e){"ojexpand"===t.type?this.updateContent():"ojcollapse"===t.type&&"relative"===$(this.config.jsonSectionElement).css("position")&&this.updateContent()},QnALoadBatchFileDialog:{func:function(){return new r({baseElement:this.config.loadFileBaseElement,contentElement:this.config.loadFileBaseElement,parentView:this})}},QnABatchResultView:{func:function(){return new l({baseElement:this.config.qnaBatchResultBaseElement,contentElement:this.config.qnaBatchResultBaseElement,parentView:this})}},showTestDetails:function(t,e){if(this.bindings.currentRowContent(t),this.bindings.jsonResults.removeAll(),this.bindings.jsonResults.push(this.bindings.testResults()[t.id()].json),this.bindings.expandedJson(!1),this.bindings.QnABatchResultView){var i=this.bindings.testResults()[t.id()];this.bindings.QnABatchResultView.setData(i.json,!0),this.bindings.QnABatchResultView.bindings.selectedQnAId(i.qnaId),this.bindings.QnABatchResultView.bindings.selectedQnAName(i.qnaName),this.bindings.QnABatchResultView.bindings.errorList(i.errorList)}this.bindings.showDetails(!0);var n=$("#tester-batch-qna").innerHeight(),s=$("#batch-qna-test-details").innerHeight();s<n-1&&$("#batch-qna-test-details").css("height",n-1+"px")},showAll:function(t,e){this.bindings.showDetails(!1)},resetTest:function(t){this.resetResults(),t?this.bindings.resetCounter=0:this.bindings.resetCounter++},downloadFileURL:function(){return"data:application/octet-stream,"+encodeURIComponent(this.bindings.fullJson())},downloadFileName:function(){return e.getCurrentBot().name+"_qnA.json"},downloadFileAction:function(){require("suite.security.csrf").downloadFile(this.downloadFileURL(),this.downloadFileName())},showNext:function(){this.bindings.offset(this.bindings.offset()+this.bindings.maxDisplayRows);var t=this.bindings.testResults.slice(this.bindings.offset(),this.bindings.offset()+this.bindings.maxDisplayRows);this.bindings.testResultsDisplay.removeAll(),this.bindings.testResultsDisplay(t),this.bindings.testResultsDS.reset(this.bindings.testResultsDisplay)},showPrev:function(){var t=this.bindings.offset()-this.bindings.maxDisplayRows;this.bindings.offset(t<0?0:t);var e=this.bindings.testResults.slice(this.bindings.offset(),this.bindings.offset()+this.bindings.maxDisplayRows);this.bindings.testResultsDisplay.removeAll(),this.bindings.testResultsDisplay(e),this.bindings.testResultsDS.reset(this.bindings.testResultsDisplay)},stopTest:function(t,e){this.bindings.isStopped(!0),0===this.bindings.numTesting&&this.finalizeResults()}},TesterBatchQnAView:function(t){this._super(t)},bindView:function(t){this._super(t);this.deps.facade.listen({SUB_ROUTE_DISPLAY:_.bind(function(t){t&&"bots.package.qna"===t.subPackage&&setTimeout(_.bind(function(){this.listen({CREATE_DATASOURCE:this.reloadModule,UPDATE_DATASOURCE:this.reloadModule,DELETE_DATASOURCE:this.reloadModule,CREATE_QNA:this.reloadModule,UPDATE_QNA:this.reloadModule,DELETE_QNA:this.reloadModule,CREATE_LANG_CONFIG:this.reloadModule,UPDATE_LANG_CONFIG:this.reloadModule,DELETE_LANG_CONFIG:this.reloadModule,CREATE_QNA_CONTENT:this.reloadModule,UPDATE_QNA_CONTENT:this.reloadModule,DELETE_QNA_CONTENT:this.reloadModule,BOT_SELECT:this.reloadModule,RELOAD_TESTER:this.reloadModule})},this),50)},this)})},initModule:function(t){this._super(t)&&this.listen({BOT_SELECT:this.switchBot,TEST_BATCH_QNA:this.qnaTestReturned,UPDATE_LAYOUT:this.updateLayoutHandler,PROCESS_QNA_BATCH_FILE:this.processQnABatchFile,GET_ALL_QNA:this.getAllQnAHandler,TESTER_QNA_MODE:this._batchModeHandler,RESET_RESULTS:this.resetResults})},renderView:function(t){this._super(t),this.bindings.QnABatchResultView&&this.bindings.QnABatchResultView.renderView()},updateContent:function(){this.notify({UPDATE_LAYOUT:{data:{batch_qna:!0}}},{actionSpinner:!1})},updateLayoutHandler:function(t){t&&t.batch_qna&&this.updateLayout()},updateLayout:function(t,e){if(this.bindings.jsonResults().length>0&&$("#tester-qna-batch-jsonSection").length>0){var i={};i.batchQnASection=$("#tester-batch-qna-section").innerHeight(),i.jsonHeader=$("#tester-qna-batch-json-header").innerHeight(),i.content=$("#batch-qna-test-details-content").innerHeight();var n=this.bindings.expandedJson();this.log("expandedJson tester-qna-batch",n),$(this.config.jsonSectionElement).length&&$(this.config.jsonSectionElement).ojCollapsible("option","expanded")!==n&&(this.log("Setting expanded",n),$(this.config.jsonSectionElement).ojCollapsible("option","expanded",n)),i.json=n?$("#tester-qna-batch-json").innerHeight():0,i.batchQnASection<i.json+i.content?($("#tester-qna-batch-jsonSection").css("position","relative"),setTimeout(function(){var t=$("#tester-batch-qna-section");t.scrollTop(n?i.content-.5*i.batchQnASection:i.jsonHeader+i.json+i.content)},200)):setTimeout(function(){$("#tester-qna-batch-jsonSection").css("position","absolute")},200)}else $("#tester-qna-batch-jsonSection").css("position","absolute")},sendOneTest:function(t,e,i,n,s,o,a,r,l,d,c,u,h){var b={data:{botId:e,botName:i,qnaId:n,languageTag:o,qnaName:s,question:t,expectedMatches:a,matchInOrder:r,resetCounter:c,itemId:u}};if(h){var g=JSON.parse(h);g&&(b.data=_.extend(b.data,g))}l||(b.data.minimumShouldMatch=d),this.notify({TEST_BATCH_QNA:b},{actionSpinner:!1})},startRunBatch:function(t,e){if(this.bindings.currentRunIndex=0,this.bindings.numTotal(this.bindings.testObjects.length),this.bindings.isTesting(!0),this.bindings.userPreferences().batchqnAInitialUA){var i=this.bindings.userPreferences();i.batchqnAInitialUA=!1,this.bindings.userPreferences(i)}this.continueRunBatch(t,e)},continueRunBatch:function(t,n){var s;if(t===e.getCurrentBot().id&&this.bindings.isTesting()?s=this.bindings:d.state[t]&&d.state[t].isTesting&&(s=d.state[t]),s){if(s.currentRunIndex>=s.testObjects.length)return;if(s.isFinished())return;if(s.isStopped())return;if(s.numTesting<("function"==typeof s.numConcurrent?s.numConcurrent():s.numConcurrent)){var o=s.testObjects[s.currentRunIndex],a=_.first(o.expectedMatches,ko.unwrap(s.matchesToInclude));o.expectedMatches=Array.isArray(a)?a:[a];var r=this.qnaList[0],l="function"==typeof s.testResults?s.testResults().length:s.testResults.length,c={id:ko.observable(l),question:o.question,expectedMatches:o.expectedMatches,qnaId:o.qnaId,qnaName:r.name,isTesting:ko.observable(!1),result:ko.observable(""),passed:ko.observable(""),explanation:ko.observable(""),actualMatchIds:ko.observable(""),expectedMatchIds:ko.observable(""),startTime:Date.now(),timeElapsed:ko.observable(0),errorList:[]};if(r&&r.id?(o.qnaId=r.id,c.qnaId=r.id,c.isTesting(!0)):(c.errorList=[i.translate("tester.qna.batch.no-qna")],c.isTesting(!1),c.passed(!1),c.result("FAILURE")),s.testResults.unshift(c),s.testResultsDisplay.unshift(c),("function"==typeof s.testResultsDisplay?s.testResultsDisplay().length:s.testResultsDisplay.length)>s.maxDisplayRows){s.testResultsDisplay.pop()}o.question&&o.qnaId?(this.sendOneTest(o.question,t,n,o.qnaId,o.qnaName,o.languageTag,a,ko.unwrap(s.matchesInOrder),ko.unwrap(s.useDefaultMinimumShouldMatch),ko.unwrap(s.minimumShouldMatch),s.resetCounter,l,o.queryInfo),s.numTesting++):"function"==typeof s.numFailed?s.numFailed(s.numFailed()+1):s.numFailed=s.numFailed+1,s.currentRunIndex++,this.continueRunBatch(t,n)}}else this.error("Context is null")},finishBatch:function(t){t.isFinished(!0),"function"==typeof t.testResults&&this.finalizeResults()},finalizeResults:function(){var t=this;this.bindings.testResults().length>t.bindings.largeFileLimit&&t.bindings.testResults.remove(function(t){return!t.hasOwnProperty("passed")||t.passed()});var e=t.bindings.testResults(),i=[],n=[];e.forEach(function(t,e){t.passed()?i.push(t):n.push(t)}),e=n.concat(i),e.forEach(function(t,e){t.id(e)}),t.bindings.testResults(e),t.bindings.testResultsDisplay.removeAll();var s=t.bindings.testResults.slice(0,t.bindings.maxDisplayRows);t.bindings.testResultsDisplay(s),t.bindings.testResultsDS.reset(t.bindings.testResultsDisplay),t.bindings.testObjects=[]},processQnABatchFile:function(t){this.bindings.currentRunIndex!==-1&&this.bindings.resetTest(!1),$(this.config.loadFileBaseElement).ojDialog("close"),this.bindings.testObjects=_.map(t.tests,_.bind(function(t){return this._processTestObject(t,this.bindings.matchesToInclude())},this)),this.bindings.numConcurrent(t.concurrent||3),this.bindings.matchesToInclude(t.matchesToInclude||3),this.bindings.matchesInOrder(t.matchesInOrder?"true":"false"),this.bindings.useDefaultMinimumShouldMatch(t.useDefaultMinimumShouldMatch),this.bindings.minimumShouldMatch(t.minimumShouldMatch),this.bindings.offset(0),this.startRunBatch(e.getCurrentBot().id,e.getCurrentBot().name)},checkFinish:function(t){t.numPassed()+t.numFailed()===t.numTotal()?this.finishBatch(t):t.isStopped()&&0===t.numTesting&&this.finishBatch(t)},processOneQnAResult:function(t,e,i,n){e?(e.json=_.clone(t),e.isTesting(!1),this.log("finished testing on "+e.question),t&&t.result&&t.actualMatchIds?(e.actualMatchIds(t.actualMatchIds),e.expectedMatchIds(t.expectedMatchIds),e.result(t.result),e.explanation(t.explanation),"Success"===e.result()?(e.passed(!0),"function"==typeof i.numPassed?i.numPassed(i.numPassed()+1):i.numPassed=i.numPassed+1):(e.passed(!1),"function"==typeof i.numFailed?i.numFailed(i.numFailed()+1):i.numFailed=i.numFailed+1),e.timeElapsed(Date.now()-e.startTime)):(e.passed(!1),"function"==typeof i.numFailed?i.numFailed(i.numFailed()+1):i.numFailed=i.numFailed+1)):this.error("Test could not be found")},qnaTestReturned:function(t){var i,n=(e.getCurrentBot().id,e.getCurrentBot().name),s="Batch QnA Testing";if(t&&t.data)t.botId===e.getCurrentBot().id?t.resetCounter===this.bindings.resetCounter?(i=this.bindings,this.processOneQnAResult(t.data,this.bindings.testResults()[i.testResults().length-t.itemId-1],i,t.itemId),this.updateLayout(),this.logResponseMsg(s,t,this.bindings,n,!0,!0)):this.logResponseMsg(s,t,this.bindings,n,!0,!1):d.state[t.botId]&&(t.resetCounter===d.state[t.botId].resetCounter?(i=d.state[t.botId],this.processOneQnAResult(t.data,i.testResults[i.testResults().length-t.itemId-1],i,t.itemId),this.logResponseMsg(s,t,i,n,!1,!0)):this.logResponseMsg(s,t,null,n,!1,!1));else if(t.status&&t.status>204)if(t.botId===e.getCurrentBot().id)if(t.resetCounter===this.bindings.resetCounter){i=this.bindings;var o=JSON.parse(t.message);t.actualMatchIds=o.actualMatchIds,t.expectedMatchIds=o.expectedMatchIds,t.explanation=o.explanation,t.result=o.result,this.processOneQnAResult(t,this.bindings.testResults()[i.testResults().length-t.itemId-1],i,t.itemId),this.updateLayout(),this.logResponseMsg(s+" Error",t,this.bindings,n,!0,!0)}else this.logResponseMsg(s+" Error",t,this.bindings,n,!0,!1);else d.state[t.botId]&&(t.resetCounter===d.state[t.botId].resetCounter?(i=d.state[t.botId],this.processOneQnAResult(t,i.testResults[i.testResults().length-t.itemId-1],i,t.itemId),this.logResponseMsg(s+" Error",t,i,n,!1,!0)):this.logResponseMsg(s+" Error",t,null,n,!1,!1));i&&(i.numTesting--,i.testObjects[t.itemId]={},this.checkFinish(i),this.continueRunBatch(t.botId))},resetResults:function(){this.bindings.isTesting(!1),this.bindings.isFinished(!1),this.bindings.isStopped(!1),this.bindings.testObjects=[],this.bindings.currentRunIndex=-1,this.bindings.numConcurrent(3),this.bindings.numTesting=0,this.bindings.testResults([]),this.bindings.testResultsDisplay([]),this.bindings.numPassed(0),this.bindings.numFailed(0),this.bindings.numTotal(0),this.bindings.showDetails(!1),this.bindings.currentRowContent({}),this.bindings.jsonResults.removeAll(),this.bindings.expandedJson(!1),this.bindings.testResults([]),this.bindings.testResultsDS.reset(this.bindings.testResultsDisplay)},logResponseMsg:function(t,e,i,n,s,o){s?o?this.log(t,"for",e.botName,"to be processed"):this.log(t,"for",e.botName,"already reset at counter",i.resetCounter):o?this.log(t,"for",e.botName,"not for current bot",n):this.log(t,"for",e.botName,"not for current bot",n,"and already reset at counter",i.resetCounter)},_loadQnA:function(t){e.getCurrentBot()&&e.getCurrentBot().id&&this.notify({GET_ALL_QNA:{data:{botId:e.getCurrentBot().id}}},{actionSpinner:!1}),this.resetResults()},loadModule:function(t){return!!this._super(t)&&void this._loadQnA(t)},reloadModule:function(t){return!!this._super(t)&&void this._loadQnA(t)},switchBot:function(t){t&&t.previousBot&&t.previousBot.id&&(this.log("switch bot"),this.saveState(t.previousBot.id),this.restoreState(t.selectedBot.id),d.state[t.selectedBot.id]=null,this.bindings.showDetails()&&(this.bindings.QnABatchResultView&&this.bindings.QnABatchResultView.setData(this.bindings.testResults()[this.bindings.currentRowContent().id].json,!0),$(this.config.jsonSectionElement).length>0&&$(this.config.jsonSectionElement).ojCollapsible("option","expanded")!==this.bindings.expandedJson()&&$(this.config.jsonSectionElement).ojCollapsible("option","expanded",this.bindings.expandedJson())),
this.updateContent())},BindingState:function(t){var e=["isTesting","isFinished","isStopped","numConcurrent","numPassed","numFailed","numTotal","showDetails","currentRowContent","jsonResults","expandedJson"],i=["resetCounter","testObjects","currentRunIndex","numTesting","testResults","testResultsDisplay"],n=this;return this.data=t,e.forEach(function(t){n[t]=function(e){return void 0===e?n.data[t]:void(n.data[t]=e)}}),i.forEach(function(t){n[t]=n.data[t]}),this},saveState:function(t){var e={resetCounter:this.bindings.resetCounter,isTesting:this.bindings.isTesting(),isFinished:this.bindings.isFinished(),isStopped:this.bindings.isStopped(),testObjects:this.bindings.testObjects,currentRunIndex:this.bindings.currentRunIndex,numConcurrent:this.bindings.numConcurrent(),numTesting:this.bindings.numTesting,numPassed:this.bindings.numPassed(),numFailed:this.bindings.numFailed(),numTotal:this.bindings.numTotal(),testResults:this.bindings.testResults(),testResultsDisplay:this.bindings.testResultsDisplay(),showDetails:this.bindings.showDetails(),currentRowContent:this.bindings.currentRowContent(),jsonResults:this.bindings.jsonResults(),expandedJson:this.bindings.expandedJson()},i=new this.BindingState(e);d.state[t]=i},restoreState:function(t){if(d.state[t]){var e=d.state[t];this.bindings.resetCounter=e.resetCounter,this.bindings.isTesting(e.isTesting),this.bindings.isFinished(e.isFinished),this.bindings.isStopped(e.isStopped),this.bindings.testObjects=e.testObjects,this.bindings.currentRunIndex=e.currentRunIndex,this.bindings.numConcurrent(e.numConcurrent()),this.bindings.numTesting=e.numTesting,this.bindings.numPassed(e.numPassed()),this.bindings.numFailed(e.numFailed()),this.bindings.numTotal(e.numTotal()),this.bindings.testResults(e.testResults),this.bindings.testResultsDisplay(e.testResultsDisplay),this.bindings.showDetails(e.showDetails()),this.bindings.currentRowContent(e.currentRowContent()),this.bindings.jsonResults(e.jsonResults()),this.bindings.expandedJson(e.expandedJson()),this.bindings.isFinished()&&this.finalizeResults()}else this.bindings.resetTest(!0)},getAllQnAHandler:function(t){t.status<204&&t.data?this.qnaList=t.data.items:a.showError("Error retrieving list of QnA Modules")},_getQnaIdFromName:function(t){return this.selectedQnA=_.find(this.qnaList,function(e){return _.stringsEqualIgnoreCase(e.name,t)}),this.selectedQnA},_processTestObject:function(t,e){for(var i=1,n=[],s=t["match-"+i];s&&s.length&&i<=e;)n.push(t["match-"+i]),i++,s=t["match-"+i];return t.expectedMatches=n,t},_batchModeHandler:function(t){t&&t.hasOwnProperty("isBatchTesting")&&this.bindings.isBatchTesting(t.isBatchTesting),this.notify({UPDATE_TESTER_HEIGHT:{}})}});return new c({baseElement:"#qna-batch-test-results",baseTemplateData:e.templateData,loadFileBaseElement:"#tester-qna-load-batch-file-dialog",qnaBatchResultBaseElement:"#batch-qna-test-result-details",jsonSectionElement:"#tester-qna-batch-jsonSection"})}),define("bots.package.tester/view.qna",["module","suite.package.util/messaging","bots.config","bots.i18n","bots.router","bots.package.shell/validators","bots.package.view/view","bots.package.tester/facade","bots.package.tester/dataobject","suite.package.util/messaging","bots.package.tester/qna.result","bots.package.tester/view.qna.batch","bots.package.tester/qna.load.batch.file","ojs/ojswitch"],function(t,e,i,n,s,o,a,r,l,d,c,u,h){var b={state:{},response:{}},g=a.extend({module:t,name:"TesterQnAView"},{__static__:{MINIMUM_SHOULD_MATCH_DEFAULT:"50%,25%"},deps:{i18n:n,facade:r,botsConfig:i},inputListenerInitialized:!1,bindings:{botsValidators:o,i18n:n,itemToAdd:{func:ko.observable},itemCurrent:{func:ko.observable,args:[]},lastId:0,uiConversation:{func:ko.observableArray,args:[[]]},expandedJson:!1,resetCounter:0,qnaList:{func:ko.observableArray,args:[]},allLanguageTags:{func:ko.observableArray,args:[]},selectedQnAId:{func:ko.observableArray,args:[[]]},selectedQnA:{func:ko.observable,args:[]},selectedLanguage:{func:ko.observableArray,args:[[]]},minimumShouldMatch:{func:ko.observable,args:[]},useDefaultMinimumShouldMatch:{func:ko.observable,args:[!0]},isBatchTesting:{func:ko.observable,args:[!1]},trainNeeded:{func:ko.observable,args:[!1]},qnaTesterContext:{func:ko.computed,args:[function(){var t=this.bindings.selectedQnA(),e=this.bindings.selectedLanguage(),i=this.bindings.trainNeeded();return t&&e.length&&!i?e:n.translate("tester.qna.selectQnA")}]},isTesting:{func:ko.computed,args:[function(){return!!this.bindings.QnAResultView&&this.bindings.QnAResultView.bindings.isTesting()},this,{deferEvaluation:!0}]},jsonResults:{func:ko.computed,args:[function(){return this.bindings.QnAResultView?this.bindings.QnAResultView.bindings.jsonResults():[]},this,{deferEvaluation:!0}]},fullJson:{func:ko.computed,args:[function(){return JSON.stringify(this.bindings.jsonResults(),null,2)},this,{deferEvaluation:!0}]},resetTest:function(t){this.bindings.minimumShouldMatch(this.__static__.MINIMUM_SHOULD_MATCH_DEFAULT),this.resetResults(),this.bindings.itemToAdd(null),t?this.bindings.resetCounter=0:this.bindings.resetCounter++,this.reloadModule()},QnAResultView:{func:function(){return new c({baseElement:this.config.qnaResultBaseElement,contentElement:this.config.qnaResultBaseElement,parentView:this})}},QnALoadBatchFileDialog:{func:function(){return new h({baseElement:this.config.loadQnABatchFileBaseElement,contentElement:this.config.loadQnABatchFileBaseElement,parentView:this})}},handleJson:function(t,e){"ojexpand"===t.type?(this.bindings.expandedJson=!0,this.updateContent()):"ojcollapse"===t.type&&(this.bindings.expandedJson=!1,"relative"===$("#tester-qna-jsonSection").css("position")&&this.updateContent()),this.selectInput()},sendText:function(t,e,i){var n=this;if(this.bindings.itemToAdd()&&""!==this.bindings.itemToAdd().trim()){var s=this.bindings.itemToAdd();if(n.resetResults(),n.bindings.outputText(s),n.bindings.QnAResultView&&(n.bindings.QnAResultView.bindings.selectedQnA(this.bindings.selectedQnA()),n.bindings.QnAResultView.bindings.selectedLanguage(this.bindings.selectedLanguage()[0]),n.bindings.QnAResultView.bindings.minimumShouldMatch(this.bindings.minimumShouldMatch()),n.bindings.QnAResultView.bindings.useDefaultMinimumShouldMatch(this.bindings.useDefaultMinimumShouldMatch()),n.bindings.QnAResultView.sendUtterance(this.bindings.itemCurrent())),this.bindings.userPreferences().intentInitialUA){var o=this.bindings.userPreferences();o.intentInitialUA=!1,this.bindings.userPreferences(o)}}this.selectInput()},outputText:function(t){var e=this;this.bindings.itemCurrent(t),e.bindings.uiConversation.push({id:e.bindings.lastId,type:"text",text:this.bindings.itemCurrent(),party:0}),e.bindings.lastId++},attach:function(){},downloadFileURL:function(){return"data:application/octet-stream,"+encodeURIComponent(this.bindings.fullJson())},downloadFileName:function(){return i.getCurrentBot().name+"_qna.json"},downloadFileAction:function(){require("suite.security.csrf").downloadFile(this.downloadFileURL(),this.downloadFileName())},loadFile:function(t,e){$(this.config.loadQnABatchFileBaseElement).ojDialog("open")},resetDefaultMinimumShouldMatch:function(t,e){this.bindings.minimumShouldMatch(this.__static__.MINIMUM_SHOULD_MATCH_DEFAULT),this.bindings.useDefaultMinimumShouldMatch(!0)},editDefaultMinimumShouldMatch:function(t,e){this.bindings.useDefaultMinimumShouldMatch(!1)}},TesterQnAView:function(t){this._super(t)},bindView:function(t){this._super(t);this.bindings.isBatchTesting.subscribe(_.bind(function(t){this.notify({TESTER_QNA_MODE:{data:{isBatchTesting:t}}},{actionSpinner:!1})},this)),this.bindings.selectedQnAId.subscribe(_.bind(function(t){if(t&&Array.isArray(t)&&t.length>0&&(t=t[0]),t){this.bindings.allLanguageTags.removeAll();var e=_.find(this.bindings.qnaList(),function(e){return t===e.id});e&&(this.bindings.selectedQnA(e),_.each(e.allLanguageTags,_.bind(function(t){this.bindings.allLanguageTags.push(t)},this)),this.bindings.selectedLanguage.removeAll(),e.allLanguageTags.length>0&&this.bindings.selectedLanguage.push(e.allLanguageTags[0]))}this._resizeTester()},this)),this.deps.facade.listen({SUB_ROUTE_DISPLAY:_.bind(function(t){t&&"bots.package.qna"===t.subPackage&&setTimeout(_.bind(function(){this.listen({CREATE_DATASOURCE:this.reloadModule,UPDATE_DATASOURCE:this.reloadModule,DELETE_DATASOURCE:this.reloadModule,GET_DATASOURCE_JOBSTATUS:this.reloadModule,CREATE_QNA:this.reloadModule,UPDATE_QNA:this.reloadModule,DELETE_QNA:this.reloadModule,CREATE_LANG_CONFIG:this.reloadModule,UPDATE_LANG_CONFIG:this.reloadModule,DELETE_LANG_CONFIG:this.reloadModule,CREATE_QNA_CONTENT:this.reloadModule,UPDATE_QNA_CONTENT:this.reloadModule,DELETE_QNA_CONTENT:this.reloadModule,BOT_SELECT:this.reloadModule,RELOAD_TESTER:this.reloadModule})},this),50)},this)})},initModule:function(t){this._super(t)&&this.listen({BOT_SELECT:this.switchBot,UPDATE_LAYOUT:this.updateLayoutHandler,GET_ALL_QNA:this.getAllQnAHandler,TESTER_QNA_MODE:this._batchModeHandler})},resetResults:function(){this.bindings.uiConversation([]),this.bindings.lastId=0,this.bindings.QnAResultView&&this.bindings.QnAResultView.resetResults(),this.bindings.itemCurrent(null),this.bindings.expandedJson=!1,_.each(this.bindings.subscriptions,function(t){t.dispose()}),this.bindings.subscriptions=[],this.notify({RESET_RESULTS:{}},{actionSpinner:!1})},updateContent:function(){this.notify({UPDATE_LAYOUT:{data:{qna:!0}}},{actionSpinner:!1})},updateLayoutHandler:function(t){t&&t.qna&&this.updateLayout()},getAllQnAHandler:function(t){return this.bindings.trainNeeded(!1),this.bindings.selectedQnA(null),this.bindings.selectedQnAId.removeAll(),this.bindings.qnaList.removeAll(),this.bindings.allLanguageTags.removeAll(),t.status>204||!t.data.items?(this.error("Selected Bot does not have any QnA defined",t),!1):(_.each(t.data.items,_.bind(function(t){this.bindings.qnaList.push(t)},this)),t.data.items.length>0&&(this.bindings.selectedQnAId.push(t.data.items[0].id),this.bindings.trainNeeded(t.data.items[0].trainNeeded)),void this.selectInput())},selectInput:function(){setTimeout(_.bind(function(){$("#tester-qna-input").select()},this),200)},updateLayout:function(t,e){if(this.bindings.jsonResults().length>0&&$("#tester-qna-jsonSection").length>0){var i={};i.qnaSection=$("#tester-qna-section").innerHeight(),i.jsonHeader=$("#tester-qna-json-header").innerHeight(),i.content=$("#qna-test-content").innerHeight();var n=$("#tester-qna-jsonSection").ojCollapsible("option","expanded");i.json=n?$("#tester-qna-json").innerHeight():0,i.qnaSection<i.jsonHeader+i.json+i.content?($("#tester-qna-jsonSection").css("position","relative"),setTimeout(function(){var t=$("#tester-qna-section");t.scrollTop(n?i.content-.5*i.qnaSection:i.jsonHeader+i.json+i.content)},200)):setTimeout(function(){$("#tester-qna-jsonSection").css("position","absolute")},200)}else $("#tester-qna-jsonSection").css("position","absolute")},loadQnATester:function(t){this.bindings.minimumShouldMatch()||this.bindings.minimumShouldMatch(this.__static__.MINIMUM_SHOULD_MATCH_DEFAULT),i.getCurrentBot()&&i.getCurrentBot().id&&this.notify({GET_ALL_QNA:{data:{botId:i.getCurrentBot().id}}},{actionSpinner:!1}),this.resetResults()},loadModule:function(t){return!!this._super(t)&&void this.loadQnATester(t)},reloadModule:function(t){return!!this._super(t)&&void this.loadQnATester(t)},switchBot:function(t){t&&t.previousBot&&t.previousBot.id&&(this.log("switch bot"),this.saveState(t.previousBot.id),this.restoreState(t.selectedBot.id),b.state[t.selectedBot.id]=null,b.response[t.selectedBot.id]?(this.qnaTestReturned(b.response[t.selectedBot.id]),b.response[t.selectedBot.id]=null):(this.bindings.jsonResults().length>0&&$("#tester-qna-jsonSection").length>0?(this.log("qna tester: adjusting jsonSection expand/collapse"),this.bindings.QnAResultView&&this.bindings.QnAResultView.refreshHandlers(),$("#tester-qna-jsonSection").ojCollapsible("option","expanded")!==this.bindings.QnAResultView.expandedJson&&$("#tester-qna-jsonSection").ojCollapsible("option","expanded",this.bindings.QnAResultView.expandedJson)):this.log("qna tester: no json expand/collapse handling needed"),this.updateContent()),this.selectInput())},saveState:function(t,e){var i=e?"batchqna":"qna";b.state[t]||(b.state[t]={}),b.state[t][i]={uiConversation:this.bindings.uiConversation(),lastId:this.bindings.lastId,itemToAdd:this.bindings.itemToAdd(),itemCurrent:this.bindings.itemCurrent(),expandedJson:this.bindings.expandedJson,qnaResult:this.bindings.QnAResultView?this.bindings.QnAResultView.getState():null,minimumShouldMatch:this.bindings.minimumShouldMatch()}},restoreState:function(t,e){var i=e?"batchqna":"qna";if(b.state[t]&&b.state[t][i]){var n=b.state[t];this.bindings.uiConversation(n.uiConversation),this.bindings.lastId=n.lastId,this.bindings.itemToAdd(n.itemToAdd),this.bindings.itemCurrent(n.itemCurrent),this.bindings.expandedJson=n.expandedJson,this.bindings.minimumShouldMatch(n.minimumShouldMatch),this.bindings.QnAResultView&&n.qnaResult&&this.bindings.QnAResultView.loadState(n.qnaResult)}else this.bindings.resetTest(!0)},_resizeTester:function(){setTimeout(_.bind(function(){this.notify({UPDATE_TESTER_HEIGHT:{}}),this.selectInput()},this),200)},_batchModeHandler:function(t){this.inputListenerInitialized||(this.inputListenerInitialized=!0,$("#tester-qna-input").keyup(_.bind(function(t){13===t.keyCode&&this.bindings.sendText()},this))),this.notify({UPDATE_TESTER_HEIGHT:{}})}});return new g({baseElement:"#tester-qna-pane",baseTemplateData:i.templateData,qnaResultBaseElement:"#qna-test-details",qnaBatchBaseElement:"#qna-batch-test-details",loadQnABatchFileBaseElement:"#tester-qna-load-batch-file-dialog"})}),define("bots.package.tester/view.main",["module","suite.package.shell/shell","bots.config","bots.i18n","bots.package.view/view","bots.package.shell/context.header","bots.package.tester/facade","bots.package.tester/view.bot","bots.package.tester/view.intent","bots.package.tester/view.qna","bots.package.tester/view.batchIntent","ojs/ojpopup"],function(t,e,i,n,s,o,a,r,l,d,c,u){var h=s.extend({module:t,name:"TesterMainView"},{deps:{i18n:n,facade:a,botsConfig:i},heights:{client:0,brandBar:0,contextHeader:0,testerBar:0,testerTab:0,testerBottom:0,testerBottomQnA:0,batchHeight:0},previousClosedTop:void 0,previousOpenTop:void 0,bindings:{i18n:n,isSideMenuOpen:{func:ko.computed,args:[function(){return this.isSideMenuOpen(e.bindings.sideMenuOpen())}]},sideMenuClosedOnWindowScrollHandler:function(t){this.previousOpenTop=void 0;var e=Math.max(i.templateData.botsStickyContextHeaderGeometry.contextHeaderHeight,i.templateData.botsStickyContextHeaderGeometry.totalHeaderHeight-$(document).scrollTop())+"px";e!==this.previousClosedTop&&(this.previousClosedTop=e,t.css("top",e))},sideMenuOpenOnWindowScrollResetHander:function(t){this.previousClosedTop=void 0;var e=$(document).scrollTop()+Math.max(i.templateData.botsStickyContextHeaderGeometry.contextHeaderHeight,i.templateData.botsStickyContextHeaderGeometry.totalHeaderHeight-$(document).scrollTop())+"px";e!==this.previousOpenTop&&(this.previousOpenTop=e,t.css("top",e))},currentBot:i.currentBot,resetTest:function(){this.activeView().bindings.resetTest(!1)},closeTest:function(){$("#tester-popup").botsFloatOver("isOpen")&&$("#tester-popup").botsFloatOver("close")}},TesterMainView:function(t){this._super(t)},bindView:function(t){var e=this;this._super(t),$("#tester-popup").on("botsFloatOverOpen",function(t,i){e.resizeHeight()}),$("#tester-tabs").on("ojselect",function(t,i){"tester-intent-tab"===i.toTab[0].id&&setTimeout(function(){$("#tester-intent-input").select()},50),"tester-qna-tab"===i.toTab[0].id&&setTimeout(function(){$("#tester-qna-input").select(),e.notify({TESTER_QNA_MODE:{data:{}}})},50),e.resizeHandler()})},initModule:function(t){var e=this;this._super(t)&&(this.listen({SCREEN_RESIZE_HEIGHT:this.resizeHandler,UPDATE_TESTER_HEIGHT:this.resizeHandler}),$(document).on("ready scroll",function(){var t=i.templateData.botsStickyContextHeaderGeometry.totalHeaderHeight;$("#tester-popup").botsFloatOver("isOpen")&&$(document).scrollTop()<=Math.abs(t+20+$(".suiteBody:visible").height()-$(window).height())&&e.resizeHandler()}),require("bots.router").registerPersistentPopup("tester-popup"))},activeView:function(){var t=$("#tester-tabs").ojTabs("option","selected");return"tester-bot-tab"===t?r:"tester-intent-tab"===t?l:"tester-qna-tab"===t?d:"tester-batch-intent-tab"===t?c:null},resizeHandler:function(){var t=this.resizeHeight();t&&this.notify({UPDATE_LAYOUT:{data:{bot:!0,intent:!0,skipScroll:!0}}},{actionSpinner:!1})},resizeHeight:function(){var t=$("#tester-bot-section").css("height"),e=this.calcHeight(),i=t!==e+"px",n=e+this.heights.testerBottom-1;e+="px",$("#tester-bot-section").css("height",e);var s=this.heights.testerBottomQnA?e:n+"px",o=this.heights.testerBottomIntent?e:n+"px";return $("#tester-qna-section").css("height",s),$("#tester-intent-section").css("height",o),i},calcHeight:function(){this.heights.client=document.body.clientHeight,this.heights.brandBar=this.heights.brandBar?this.heights.brandBar:i.templateData.suiteStickyContextHeaderGeometry.brandingBarHeight,this.heights.contextHeader=this.heights.contextHeader?this.heights.contextHeader:i.templateData.botsStickyContextHeaderGeometry.contextHeaderHeight,this.heights.testerBar=this.heights.testerBar?this.heights.testerBar:$(".tester-bar").innerHeight(),this.heights.testerTab=this.heights.testerTab?this.heights.testerTab:$("#tester-popup .oj-tabs-nav-root").innerHeight(),this.heights.testerBottom=this.heights.testerBottom?this.heights.testerBottom:$(".tester-bottom").filter(function(t){return this.scrollHeight>0}).innerHeight();var t=$(".tester-bottom.tester-qna"),e=$(".tester-bottom.tester-intent");this.heights.testerBottomQnA=t.is(":visible")?this.heights.testerBottom:0,this.heights.testerBottomIntent=e.is(":visible")?this.heights.testerBottom:0,this.heights.documentScrollTop=$(document).scrollTop();var n=this.heights.brandBar+this.heights.contextHeader;this.heights.brandingContextEffectiveHeight=Math.max(this.heights.contextHeader,n-this.heights.documentScrollTop),this.log(this.heights);var s=200,o=this.heights.client-this.heights.brandingContextEffectiveHeight-this.heights.testerBar-this.heights.testerTab-this.heights.testerBottom;return this.log("calculating variable height of both testers:",o),Math.max(o,s)}});return new h({baseElement:"#tester-popup",transition:{load:null,reload:null},baseTemplateData:i.templateData})}),function(){utils.loadStylesheet("bots-tester-css","resources/css/tester.min.css"),require(["bots.templates/tester","bots.package.tester/model","bots.package.tester/facade","bots.package.tester/view.main","bots.package.tester/view.bot","bots.package.tester/view.intent","bots.package.tester/view.batchIntent","bots.package.tester/view.qna","bots.package.tester/view.qna.batch"]),define("bots.package.tester/package.main",[],function(){})}(),define("bots.package.tester",["bots.package.tester/package"],function(t){return t}),define("bots.package.tester/package",function(){}),function(t){function e(t,e){return t.w('<div class="oj-flex-item ').f(e.get(["package"],!1),e,"h").w('-nav-toggle-icon" id="').f(e.get(["package"],!1),e,"h").w("-defectviewer-toggle\"data-bind=\"css: { 'bots-alert': gotDefects(),'bots-normal': !gotDefects() },ojComponent: { component: 'ojButtonset',checked: isDefectViewerOpen }\"><div><label for=\"").f(e.get(["package"],!1),e,"h").w('-button-defectviewer">').h("i18n",e,{},{key:"defectviewer.button.label"},"h").w('</label><input id="').f(e.get(["package"],!1),e,"h").w('-button-defectviewer" name="').f(e.get(["package"],!1),e,"h").w("-defectviewer-button\" type=\"checkbox\"data-bind=\"ojComponent: { component: 'ojButton',display: 'icons',chroming: 'half',icons: { start: 'bots-helper-margin-lr-auto bots-helper-margin-bottom-0 bots-helper-shift-down-1' },rootAttributes: { class: 'bots-helper-margin-bottom-10 bots-helper-padding-top-0' } },inlinesvg: [ { width: 24, height: 24, project: 'bots', basename: 'func_bug_24', klazz: 'bots-alert-off' },{ width: 24, height: 24, project: 'bots', basename: 'func_bugalert_24', klazz: 'bots-alert-on' } ]\" /></div></div>")}return t.register("bots/defectviewer/toggle.button",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="botsFloatOverDock_defectviewer-popup"><div id="defectviewer-popup" class="defectviewer-popup"data-bind="css: { \'tester-open\': isTesterOpen() },suiteOnWindowScroll: { disabled: { flag: !isSideMenuOpen(),resetHandler: $root.onWindowScrollResizeResetHandler },handler: $root.onWindowScrollResizeHandler },suiteOnWindowResize: { disabled: { flag: !isSideMenuOpen(),resetHandler: $root.onWindowScrollResizeResetHandler },handler: $root.onWindowScrollResizeHandler }"><table id="bots-defectviewer" summary="').h("i18n",e,{},{key:"defectviewer.table.summary",filter:"h"},"h").w("\"data-bind=\"ojComponent: { component: 'ojTable',data: defectsDataSource,emptyText: $root.i18n.translate('defectviewer.table.emptyText'),selectionMode: null,columns: [ { style: 'padding-left: 15px; padding-right: 1px;',template: 'bots-defectviewer-type',sortable: 'disabled' },{ headerText: '").h("i18n",e,{},{key:"defectviewer.table.description.headerText",filter:"j"},"h").w("',headerStyle: 'padding-left: 0px; padding-right: 15px',style: 'padding-left: 0px; padding-right: 15px',template: 'bots-defectviewer-description',sortable: 'enabled',field: 'message' },{ headerText: '").h("i18n",e,{},{key:"defectviewer.table.location.headerText",filter:"j"},"h").w('\',headerStyle: \'padding-left: 15px; padding-right: 0px\',style: \'padding-left: 15px; padding-right: 0px\',template: \'bots-defectviewer-location\',sortable: \'disabled\' } ],rootAttributes: { class: \'bots-helper-max-width\' } }"></table><script type="text/html" id="bots-defectviewer-type"><td class="defectviewer-type-td bots-helper-padding-top-10"><!-- ko inlinesvg: { width: 16, height: 16, project: \'bots\', basename: \'stat_error_16\' } --><!-- /ko --></td></script><script type="text/html" id="bots-defectviewer-description"><td class="defectviewer-description-td"><div class="oj-flex-bar"><!-- ko if: ($data.realLine !== undefined && $data.column !== undefined) --><div class="oj-flex-bar-start bots-helper-margin-left-5"><a class="bots-helper-margin-right-5" href="#" title="').h("i18n",e,{},{key:"defectviewer.table.description.linkTip",filter:"h"},"h").w('"data-bind="click: $root.navigateToDefectLocation,text: $root.i18n.translate(\'defectviewer.table.description.errorMark\', realLine, column)"></a></div><!-- /ko --><div class="oj-flex-bar-middle"><div data-bind="text: message"></div></div></div></td></script><script type="text/hmtl" id="bots-defectviewer-location"><td class="defectviewer-location-td"><div data-bind="text: $root.currentFlow().name"></div></td></script></div></div>')}return t.register("bots/defectviewer/viewer",e),e.__dustBody=!0,e}(dust),define("bots.templates/defectviewer",function(){}),define("bots.package.defectviewer/model.rest",["module","bots.model.rest","bots.i18n","bots.config","bots.collection"],function(t,e,i,n,s){var o=e.__class__.extend({module:t,name:"DefectViewerRestModel"},{config:{stringifyObjects:!0,uriParams:{botId:function(){return n.getCurrentBot().id}}},DefectViewerRestModel:function(t){this._super(t)}});return new o(_.extend({},e.config,{baseUrl:e.config.baseUrl+"/bots/{botId}"}))}),define("bots.package.defectviewer/model",["module","mcs.js.framework/model.util","bots.config","bots.model.rest","bots.package.defectviewer/model.rest"],function(t,e,i,n,s){var o=s.__class__.extend({module:t,name:"FakeDefectViewerRestModel"},{__static__:{},FakeDefectViewerRestModel:function(t){this._super(t)}},e.stubProxy);return new o(_.extend({},n.config,{baseUrl:n.config.baseUrl+"/bots/{botId}"}))});define("bots.package.defectviewer/facade",["module","bots.facade","bots.package.defectviewer/model"],function(t,e,i){var n=e.__class__.extend({module:t,name:"Facade"},{__static__:{globalChannels:{}},Facade:function(){this._super();this.register({})}});return new n});define("bots.package.defectviewer/view",["module","suite.package.util/messaging","suite.package.shell/shell","bots.config","bots.i18n","bots.router","bots.package.view/view","bots.package.shell/context.header","bots.package.defectviewer/facade","ojs/ojpopup"],function(t,e,i,n,s,o,a,r,l,d){var c=a.extend({module:t,name:"DefectViewer"},{deps:{i18n:s,facade:l,botsConfig:n},lastBotId:void 0,lastFlowId:void 0,deferredValidation:!1,previousTop:void 0,bindings:{i18n:s,currentBot:n.currentBot,currentFlow:{func:ko.observable,args:[{}]},defects:{func:ko.observableArray,args:[[]]},isTesterOpen:{func:ko.computed,args:[function(){return r.bindings.isTesterOpen().length>0}]},gotDefects:{func:ko.computed,args:[function(){return this.bindings.defects().length>0},null,{deferEvaluation:!0}]},isDefectViewerOpen:{func:function(){var t=this,e=ko.observableArray([]);return e.subscribe(function(e){e.length>0?$("#defectviewer-popup").botsFloatOver("isOpen")||(t.bindings.sideMenuOpenRecomputer.valueHasMutated(),$("#defectviewer-popup").botsFloatOver("open")):$("#defectviewer-popup").botsFloatOver("isOpen")&&$("#defectviewer-popup").botsFloatOver("close")}),e}},sideMenuOpenRecomputer:{func:ko.observable},isSideMenuOpen:{func:ko.computed,args:[function(){return this.bindings.sideMenuOpenRecomputer(),this.isSideMenuOpen(i.bindings.sideMenuOpen())}]},onWindowScrollResizeHandler:function(t){var e=$(document).scrollTop()+$(window).height()-n.templateData.botsStickyContextHeaderGeometry.defectViewerHeight+"px";e!==this.previousTop&&(this.previousTop=e,t.css("top",e))},onWindowScrollResizeResetHandler:function(t){t.css("top","initial"),this.previousTop=void 0},defectsDataSource:{func:function(){return new oj.ArrayTableDataSource(this.bindings.defects,{idAttribute:"ordinal"})}},navigateToDefectLocation:function(t){t&&t.ordinal&&o.navigate("bot/flows/"+t.ordinal,{trigger:!0})}},DefectViewer:function(t){this._super(t)},bindView:function(t){var e=this;this._super(t),$("#defectviewer-popup").on("botsFloatOverClose",function(t,i){e.bindings.isDefectViewerOpen([])})},renderView:function(t){this._super(t)},initModule:function(t){this._super(t)&&(this.listen({SELECT_FLOW:this._flowSelected,LOAD_FLOW:this._flowLoaded,VALIDATE_FLOW:this._flowValidated,VALIDATE_DA:this._flowValidated,BOT_SELECT:this._botSelected}),require("bots.router").registerPersistentPopup("defectviewer-popup"))},validateFlow:function(t,i){if(!t){if(!this.bindings.currentFlow().id)return void(this.deferredValidation=!0);t=this.bindings.currentFlow().id,i=this.bindings.currentFlow().name}e.clearAllMessages(),this.notify({VALIDATE_FLOW:{data:{id:t,name:i}}},{promise:!0}).always(_.bind(function(){e.showI18nError(_.filter(arguments,function(t){return t.status>204}),"defectviewer.errors.validateFlow",[this.bindings.currentFlow().name])},this))},validateDA:function(){e.clearAllMessages(),this.notify({VALIDATE_DA:{}},{promise:!0}).always(_.bind(function(){e.showI18nError(_.filter(arguments,function(t){return t.status>204}),"defectviewer.errors.validateFlow",[this.bindings.currentFlow().name])},this))},_flowSelected:function(t){t.id!==this.lastFlowId&&(this.lastFlowId=t.id,this.bindings.defects([]))},_flowLoaded:function(t){t.data&&this.bindings.currentFlow(t.data)},_flowValidated:function(t){if(t.status<=204&&t.data&&Array.isArray(t.data.diagnostics)){var e=[];_.each(t.data.diagnostics,function(t,i){var n=_.extend({},t,{ordinal:"issue_"+i,sourceRbKey:"nav.flows",line:t.line-1,realLine:t.line});e.push(n)}),this.bindings.defects(e)}},_botSelected:function(t){var i=this;t.selectedBot&&t.selectedBot.id!==this.lastBotId&&(this.lastBotId=t.selectedBot.id,this.bindings.defects([]),this.notify({LOAD_FLOWS:{data:{}}},{actionSpinner:!0}).always(_.bind(function(t){if(e.showI18nError(_.filter(arguments,function(t){return t.status>204}),"flows.errors.loadFlows",[ko.unwrap(n.getCurrentBot().name)]),200===t.status&&t.data&&t.data.items){var s=_.find(t.data.items,function(t){return t.isMain})||{};i.lastFlowId=s.id,i.bindings.currentFlow(s),i.deferredValidation&&(i.deferredValidation=!1,i.bindings.currentFlow().id&&i.validateFlow())}},this)))}});return new c({baseElement:"#defectviewer-popup",transition:{load:null,reload:null},baseTemplateData:n.templateData})}),function(){utils.loadStylesheet("bots-defectviewer-css","resources/css/defectviewer.min.css"),require(["bots.templates/defectviewer","bots.package.defectviewer/model","bots.package.defectviewer/facade","bots.package.defectviewer/view"]),define("bots.package.defectviewer/package.main",[],function(){})}(),define("bots.package.defectviewer",["bots.package.defectviewer/package"],function(t){return t}),define("bots.package.defectviewer/package",function(){}),function(t){function e(t,e){return e=e.shiftBlocks(a),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:i})}function i(t,e){return e=e.shiftBlocks(a),t.f(e.get(["tester-type"],!1),e,"h").w("-attach-dialog")}function n(t,e){return e=e.shiftBlocks(a),t.h("i18n",e,{},{key:"tester.bot.attach.dialog.title"},"h")}function s(t,e){return e=e.shiftBlocks(a),t.w('<div class="tester-attach-dialog"><div><label for=\'').f(e.get(["tester-type"],!1),e,"h").w("-attachment-title'>").h("i18n",e,{},{key:"tester.bot.attach.dialog.titleLabel"},"h").w('</label><input id="').f(e.get(["tester-type"],!1),e,"h").w("-attachment-title\"data-bind=\"ojComponent: {component: 'ojInputText',value: attachmentTitle}\"><label for='").f(e.get(["tester-type"],!1),e,"h").w("-attachment-type'>").h("i18n",e,{},{key:"tester.bot.attach.dialog.typeLabel"},"h").w("</label><select id='").f(e.get(["tester-type"],!1),e,"h").w("-attachment-type'data-bind=\"ojComponent: {component: 'ojSelect',options: attachmentTypes,value: attachmentType}\"></select><label for='").f(e.get(["tester-type"],!1),e,"h").w("-attachment-url'>").h("i18n",e,{},{key:"tester.bot.attach.dialog.urlLabel"},"h").w('</label><textarea id="').f(e.get(["tester-type"],!1),e,"h").w('-attachment-url" rows="5"data-bind="ojComponent: {component: \'ojTextArea\',value: attachmentUrl,validators: [isAttachmentUrlValidator]}"></textarea></div></div>')}function o(t,e){return e=e.shiftBlocks(a),t.w('<button class="right green-button action-button" default="true"data-bind="ojComponent: { component: \'ojButton\',label: \'').h("i18n",e,{},{key:"tester.bot.attach.dialog.send",filter:"j"},"h").w("'},click: addAttachment\"/>")}t.register("bots/bottester/bot/attach-dialog",e);var a={titleLabel:n,bodyHtml:s,footerHtml:o};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="#').f(e.get(["tester-type"],!1),e,"h").w('-initial" class="bottester-initial" data-bind="if: jsonResults().length===0 && !isTesting() && !isPolling && !itemToAdd() && userPreferences().botInitialUA"><div class="#').f(e.get(["tester-type"],!1),e,"h").w('-initial-text">').h("i18n",e,{},{key:"tester.initial.bot",filter:"h"},"h").w("</div><span data-bind=\"inlinesvg: {width: 144, height: 169, project: 'bots', basename: 'ua_arrow_1'}\"></span></div>")}return t.register("bots/bottester/bot/bot-initial",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="bottester-pane" class="oj-flex bots-helper-max-width"><div id="bottester-section" class="oj-flex-item bots-helper-max-width">').p("bots/bottester/bot/bot-result",e,e,{"tester-type":"bottester"}).p("bots/bottester/bot/bot-initial",e,e,{"tester-type":"bottester"}).p("bots/bottester/bottom",e,e,{"tester-type":"bottester"}).w("</div><!-- ko nobind -->").p("bots/bottester/bot/attach-dialog",e,e,{"tester-type":"bottester"}).w("<!-- /ko --></div>")}return t.register("bots/bottester/bot/bot-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="oj-flex" id="').f(e.get(["tester-type"],!1),e,"h").w('-form-container"><div data-bind="if: $data.uiConversation && $data.uiConversation().length>0" class="bot-section oj-flex-item"><!-- ko foreach: uiConversation -->').p("bots/bottester/conversation/item",e,e,{
"tester-type":"bottester"}).w("<!-- /ko --><!-- ko if: isTesting -->").p("bots/bottester/conversation/animation",e,e,{"tester-type":"bottester"}).w("<!-- /ko --></div></div>")}return t.register("bots/bottester/bot/bot-result",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.w('<div id="bottester-details-view" class="oj-flex bots-container bots-helper-overflow-auto bots-helper-max-width"><!-- ko if: ko.unwrap($data.renderResults) --><div id="bottester-details-tabs" class="bots-helper-max-width bottester-details-tabs"data-bind="ojComponent:{ component: \'ojTabs\',edge: \'top\',selected: 0,rootAttributes: { class: \'bots-custom-horiztabs bots-panel-onlytopborder bots-tab-selection-bottom-bar\'} }"><ul><li><span>').h("i18n",e,{},{key:"tester.details.conversation.label"},"h").w("</span></li><li><span>").h("i18n",e,{},{key:"tester.details.intent"},"h").w("</span></li><li><span>").h("i18n",e,{},{key:"tester.details.json"},"h").w('</span></li></ul><div id="bottester-details-conversation-tab" class="bots-no-horiz-scroll bottester-details-tab">').p("bots/bottester/bot/details/conversation-pane",e,e,{"tester-type":"bottester-details-conversation"}).w('</div><div id="bottester-details-intent-tab" class="bots-no-horiz-scroll bottester-details-tab">').p("bots/bottester/bot/details/intent-pane",e,e,{"tester-type":"bottester-details-intent-qna"}).w('</div><div id="bottester-details-json-tab" class="bots-no-horiz-scroll bottester-details-tab">').p("bots/bottester/bot/details/json-pane",e,e,{"tester-type":"bottester-details-json"}).w("</div></div><!-- /ko --><!-- ko ifnot: ko.unwrap($data.renderResults) -->").p("bots/common/no_content",e,e,{noContentId:"testerDetailsNoContent",noContentAddCss:"bots-helper-max-width bots-helper-margin-top-20"}).w("<!-- /ko --></div>")}function i(t,e){return e=e.shiftBlocks(o),t.w("<!-- ko inlinesvg: { width: 192, height: 192, project: 'bots', basename: 'qual_chat_192_mono', ariaLabel: $root.i18n.translate('tester.details.nocontent.title') } --><!-- /ko -->")}function n(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"tester.details.nocontent.title"},"h")}function s(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"tester.details.nocontent.desc"},"h")}t.register("bots/bottester/bot/details",e);var o={noContentImgSection:i,noContentTitle:n,noContentDesc:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko if: $data.call && $data.call.length --><h3 class="bottester-details-section"><!-- ko ifnot: $data.call[0].isGlobal -->').h("i18n",e,{},{key:"tester.details.actions.callActionTitle"},"h").w("<!-- /ko --><!-- ko if: $data.call[0].isGlobal -->").h("i18n",e,{},{key:"tester.details.actions.globalCallActionTitle"},"h").w('<!-- /ko --></h3><div class="white-background"><div class="oj-flex bots-helper-max-width bottester-details-conversation-action"><div class="oj-flex-item oj-sm-6"><span class="bottester-details-conversation-action-label">').h("i18n",e,{},{key:"tester.details.actions.label"},"h").w('</span></div><div class="oj-flex-item oj-sm-6"><span class="bottester-details-conversation-action-label">').h("i18n",e,{},{key:"tester.details.actions.phoneNumber"},"h").w('</span></div></div><!-- ko foreach: $data.call --><div class="oj-flex bots-helper-max-width  bottester-details-conversation-action"><div class="oj-flex-item oj-sm-6"><div class="bottester-details-conversation-action-value bots-helper-ellipsis" data-bind="text: label"></div></div><div class="oj-flex-item oj-sm-6"><div class="bottester-details-conversation-action-value bots-helper-ellipsis" data-bind="text: $data.phoneNumber"></div></div></div><!-- /ko --></div><!-- /ko -->')}return t.register("bots/bottester/bot/details/actions-call",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko if: $data.postback && $data.postback.length --><h3 class="bottester-details-section"><!-- ko ifnot: $data.postback[0].isGlobal -->').h("i18n",e,{},{key:"tester.details.actions.postbackActionTitle"},"h").w("<!-- /ko --><!-- ko if: $data.postback[0].isGlobal -->").h("i18n",e,{},{key:"tester.details.actions.globalPostbackActionTitle"},"h").w('<!-- /ko --></h3><div class="white-background"><div class="oj-flex bots-helper-max-width bottester-details-conversation-action"><div class="oj-flex-item oj-sm-4"><span class="bottester-details-conversation-action-label">').h("i18n",e,{},{key:"tester.details.actions.label"},"h").w('</span></div><div class="oj-flex-item oj-sm-3"><span class="bottester-details-conversation-action-label">').h("i18n",e,{},{key:"tester.details.actions.action"},"h").w('</span></div><div class="oj-flex-item oj-sm-5"><span class="bottester-details-conversation-action-label">').h("i18n",e,{},{key:"tester.details.actions.variables"},"h").w('</span></div></div><!-- ko foreach: $data.postback --><div class="oj-flex bots-helper-max-width  bottester-details-conversation-action"><div class="oj-flex-item oj-sm-4"><div class="bottester-details-conversation-action-value bots-helper-ellipsis" data-bind="text: label"></div></div><div class="oj-flex-item oj-sm-3"><div class="bottester-details-conversation-action-value bots-helper-ellipsis" data-bind="text: $data[$data.type].action"></div></div><div class="oj-flex-item oj-sm-5"><!-- ko foreachprop: $data[$data.type].variables --><div class="bottester-details-conversation-action-value bots-helper-ellipsis" data-bind="text: $data.key + \': \' + $data.value"></div><!-- /ko --></div></div><!-- /ko --></div><!-- /ko -->')}return t.register("bots/bottester/bot/details/actions-postback",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko if: $data.url && $data.url.length --><h3 class="bottester-details-section"><!-- ko ifnot: $data.url[0].isGlobal -->').h("i18n",e,{},{key:"tester.details.actions.urlActionTitle"},"h").w("<!-- /ko --><!-- ko if: $data.url[0].isGlobal -->").h("i18n",e,{},{key:"tester.details.actions.globalUrlActionTitle"},"h").w('<!-- /ko --></h3><div class="white-background"><div class="oj-flex bots-helper-max-width bottester-details-conversation-action"><div class="oj-flex-item oj-sm-4"><span class="bottester-details-conversation-action-label">').h("i18n",e,{},{key:"tester.details.actions.label"},"h").w('</span></div><div class="oj-flex-item oj-sm-8"><span class="bottester-details-conversation-action-label">').h("i18n",e,{},{key:"tester.details.actions.url"},"h").w('</span></div></div><!-- ko foreach: $data.url --><div class="oj-flex bots-helper-max-width  bottester-details-conversation-action"><div class="oj-flex-item oj-sm-4"><div class="bottester-details-conversation-action-value bots-helper-ellipsis" data-bind="text: label"></div></div><div class="oj-flex-item oj-sm-8"><div class="bottester-details-conversation-action-value bots-helper-ellipsis" data-bind="text: $data.url"></div></div></div><!-- /ko --></div><!-- /ko -->')}return t.register("bots/bottester/bot/details/actions-url",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko if: currentDialogState || executedStates --><h3 class="bottester-details-section">').h("i18n",e,{},{key:"tester.details.dialog-state"},"h").w("</h3>").p("bots/bottester/bot/details/state-pane",e,e,{}).w("<!-- /ko --><!-- ko with: conversationDO.actions() -->").p("bots/bottester/bot/details/actions-postback",e,e,{}).p("bots/bottester/bot/details/actions-call",e,e,{}).p("bots/bottester/bot/details/actions-url",e,e,{}).w("<!-- /ko --><!-- ko with: conversationDO.globalActions() -->").p("bots/bottester/bot/details/actions-postback",e,e,{}).p("bots/bottester/bot/details/actions-call",e,e,{}).p("bots/bottester/bot/details/actions-url",e,e,{}).w('<!-- /ko --><!-- ko if: conversationDO.variables && conversationDO.variables().length --><div class="oj-flex bottester-details-section"><div class="oj-flex-item"><h3 class="grey-background">').h("i18n",e,{},{key:"tester.details.variables.title"},"h").w('</h3></div><div class="oj-flex-item"><!-- ko ifnot: viewingAllVariables --><a href="#" data-bind="click: viewAllVariables" class="bots-helper-pointer right bots-helper-padding-top-10">').h("i18n",e,{},{key:"tester.details.variables.viewAll"},"h").w('</a><!-- /ko --><!-- ko if: viewingAllVariables --><a href="#" data-bind="click: viewLessVariables" class="bots-helper-pointer right bots-helper-padding-top-10">').h("i18n",e,{},{key:"tester.details.variables.viewLess"},"h").w('</a><!-- /ko --></div></div><div class="bots-helper-padding-10 white-background bots-helper-ellipsis bots-helper-max-width"data-bind="ojComponent:{component: \'ojTree\',data: variablesTreeDS,icons: false}"></div><!-- /ko -->')}return t.register("bots/bottester/bot/details/conversation-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko if: conversationDO.intentMatches() && conversationDO.intentMatches().length --><h3 class="grey-background bots-helper-padding-5 bots-helper-margin-top-10">').h("i18n",e,{},{key:"tester.intentMatches.summary",filter:"j"},"h").w("</h3><div id=\"intentMatchesBarChart\" class=\"white-background bots-helper-max-width tester-chart\" data-bind=\"ojComponent: {component: 'ojChart',type: 'bar',orientation: 'horizontal',stack: 'off',series: intentsDVSeriesSource,groups: intentsDVGroupSource,animationOnDisplay: 'auto',animationOnDataChange: 'auto',styleDefaults: {barGapRatio: 0.25, seriesTooltipType: 'none'},yAxis: {title: '").h("i18n",e,{},{key:"tester.intentMatches.intentScorePercentage",filter:"j"},"h").w('\'},}"></div><!-- /ko --><!-- ko if: conversationDO.entityMatches() && conversationDO.entityMatches().length --><h3 class="grey-background bots-helper-padding-5 bots-helper-margin-top-10">').h("i18n",e,{},{key:"tester.entityMatches.summary"},"h").w('</h3><ul class="white-background" id="bottester-details-entity-list" aria-label="').h("i18n",e,{},{key:"tester.entityMatches.aria-label",filter:"h"},"h").w('"data-bind="ojComponent: {component: \'ojListView\', data: entityListDS, item: {template: \'entity_template\'}, selectionMode: \'single\'}"></ul><!-- /ko --><script type="text/html" id="entity_template"><li data-bind="attr: {id: $data[\'name\']}"><div class="oj-flex"><div class="oj-sm-6 oj-flex-item"><h4 class="header" data-bind="text: name"></h4></div><div class="oj-sm-6 oj-flex-item"><h5 class="data" data-bind="i18n: {key: \'tester.entityMatches.entity-value\', params: [value]}"></h5></div></div></li></script><!-- ko if: conversationDO.qnaDO -->').p("bots/bottester/bot/details/qna-pane",e,e,{}).w("<!-- /ko -->")}return t.register("bots/bottester/bot/details/intent-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["tester-type"],!1),e,"h").w('-pane"><div class="oj-flex"><div class="oj-flex-item oj-sm-6"><a id=\'').f(e.get(["tester-type"],!1),e,"h").w("-saveFileLink' style=\"float:right; display: none\" data-bind=\"attr: { href: downloadFileURL(), download: downloadFileName() }\"><span data-bind=\"inlinesvg: {width: 16, height: 16, project: 'bots', basename: 'func_download_16'}, text: '").h("i18n",e,{},{key:"tester.details.downloadJson",filter:"j"},"h").w('\'"></span></a><button id="').f(e.get(["tester-type"],!1),e,"h").w("-saveFileButton\"data-bind=\"ojComponent: {component:'ojButton',chroming: 'half',label: '").h("i18n",e,{},{key:"tester.details.downloadJson",filter:"j"},"h").w("',}, click: downloadFile\"></button></div><div class=\"oj-flex-item oj-sm-6\"><input id=\"bundles-key-language-filter\"data-bind=\"ojComponent: { component: 'ojInputText',value: jsonFilter,rootAttributes: { class: 'bots-helper-max-width' },optionChange: handleKeyUpJsonFilter,placeholder: '").h("i18n",e,{},{key:"tester.details.searchJson",filter:"j"},"h").w('\'}"/></div></div><div class="oj-flex"><div class="oj-flex-item"><pre id="bottester-details-json-pre" class="jsonhl"><code class="arduino-light hljs json" data-bind="highlight: JSON.stringify($data.json(), null, 2)"></code></pre></div></div></div>')}return t.register("bots/bottester/bot/details/json-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko if: conversationDO.qnaDO.qnaAnswerMatchList() && conversationDO.qnaDO.qnaAnswerMatchList().length --><h3 class="grey-background bots-helper-padding-5 bots-helper-margin-top-10">').h("i18n",e,{},{key:"tester.details.qna.qnaAnswers",filter:"j"},"h").w('</h3><div class="white-background"><div class="oj-flex bots-helper-max-width bottester-details-conversation-action"><div class="oj-flex-item oj-sm-4"><span class="bottester-details-conversation-action-label">').h("i18n",e,{},{key:"tester.details.routing.rank"},"h").w('</span></div><div class="oj-flex-item oj-sm-8"><span class="bottester-details-conversation-action-label">').h("i18n",e,{},{key:"tester.details.routing.qna"},"h").w('</span></div></div><!-- ko foreach: conversationDO.qnaDO.qnaAnswerMatchList() --><div class="oj-flex bots-helper-max-width  bottester-details-conversation-action"><div class="oj-flex-item oj-sm-4"><div class="bottester-details-routing-action" data-bind="text: $index() + 1"></div></div><div class="oj-flex-item oj-sm-8"><div class="bottester-details-routing-action" data-bind="text: title"></div></div></div><!-- /ko --></div><!-- /ko -->')}return t.register("bots/bottester/bot/details/qna-answer-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko if: conversationDO.qnaDO.qnaCategoryMatchList() && conversationDO.qnaDO.qnaCategoryMatchList().length --><h3 class="grey-background bots-helper-padding-5 bots-helper-margin-top-10">').h("i18n",e,{},{key:"tester.details.qna.qnaCategories",filter:"j"},"h").w("</h3><div id=\"qnaCategoriesBarChart\" class=\"white-background bots-helper-max-width tester-chart\" data-bind=\"ojComponent: {component: 'ojChart',type: 'bar',orientation: 'horizontal',stack: 'off',series: qnaCategoriesDVSeriesSource,groups: qnaCategoriesDVGroupSource,animationOnDisplay: 'auto',animationOnDataChange: 'auto',styleDefaults: {barGapRatio: 0.25, seriesTooltipType: 'none'},yAxis: {title: '").h("i18n",e,{},{key:"tester.details.qna.qnaCategoriesCount",filter:"j"},"h").w("'},}\"></div><!-- /ko -->")}return t.register("bots/bottester/bot/details/qna-category-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.p("bots/bottester/bot/details/qna-answer-pane",e,e,{}).p("bots/bottester/bot/details/qna-category-pane",e,e,{}).w('<!-- ko if: conversationDO.qnaDO.qnaResultsQuery() && conversationDO.qnaDO.qnaResultsQuery().length --><h3 class="grey-background bots-helper-padding-5 bots-helper-margin-top-10">').h("i18n",e,{},{key:"tester.details.qna.qnaQuery"},"h").w('</h3><div id="bottester-details-qna-results-pane" class="oj-flex white-background"><div data-bind="ojComponent:{component: \'ojTree\',data: qnaQueryTreeDS,icons: false}"></div></div><!-- /ko --><!-- ko if: conversationDO.qnaDO.qnaResultsSearchConfiguration() && conversationDO.qnaDO.qnaResultsSearchConfiguration().length --><h3 class="grey-background bots-helper-padding-5 bots-helper-margin-top-10">').h("i18n",e,{},{key:"tester.details.qna.qnaSearchConfiguration"},"h").w('</h3><div id="bottester-details-qna-search-config-pane" class="oj-flex white-background"><div data-bind="ojComponent:{component: \'ojTree\',data: qnaSearchConfigurationTreeDS,icons: false}"></div></div><!-- /ko -->')}return t.register("bots/bottester/bot/details/qna-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="bottester-state-diagram" data-bind="ojComponent: {component: \'ojDiagram\',layout: containerLayout,data: stateDiagramData,promotedLinkBehavior: \'full\',expanded: conversationDO.stateDiagramExpandedNodes,styleDefaults: styleDefaults,nodeProperties:function(data){return data},linkProperties:function(data){return data}}"style="width:100%;"></div>')}return t.register("bots/bottester/bot/details/state-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"bottester-conversation-replay-file-dialog",sizeKlazz:"tester-qna-load-batch-file-dialog"})}function i(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"tester.bot.batch.dialog.load"},"h")}function n(t,e){return e=e.shiftBlocks(o),t.w('<div class="oj-md-labels-inline oj-form-layout"><div id="botConversationReplayFileUploadDropzone" class="dropzone" data-bind="visible: [\'none\', \'loading\', \'error\'].indexOf(fileStatus())>-1"><div id="botConversationReplayFileUploadInit" class="oj-flex oj-sm-center dropzone-content" data-bind="if: [\'none\', \'error\'].indexOf(fileStatus())>-1"><div class="oj-flex-item oj-sm-12"><div class="oj-flex oj-sm-center"><div class="oj-flex-item oj-sm-12"><a data-bind="" id="botConversationReplayFileUploadImageLink"><div class="dropDownIcon bots-col-center"></div></a></div></div><div class="oj-flex oj-sm-center"><div class="oj-flex-item"><a tabindex="0" data-bind="click: clickUpload, enterKey" id="botConversationReplayFileUploadLink">').h("i18n",e,{},{key:"tester.bot.batch.dialog.fileLinkText"},"h").w("</a>  ").h("i18n",e,{},{key:"tester.bot.batch.dialog.dragText"},"h").w('</div></div></div></div><div id="botConversationReplayFileUploadProgress" class="oj-flex oj-sm-center dropzone-content" data-bind="if: fileStatus()===\'loading\'"><div class="oj-flex-item oj-sm-12"><div class="oj-flex oj-sm-center"><div class="oj-flex-item"><span class="dropzone-filename" data-bind="text: fileInfo().name"></span><span>').h("i18n",e,{},{key:"tester.bot.batch.dialog.validatingText"},"h").w('</span><div class="progressbar"><div></div></div></div></div></div></div></div><input id="botConversationReplayFileUploadFile" type="file" accept=".json" style="display: none"/><div id="botConversationReplayFileUploadDone" class="oj-flex oj-sm-center bots-no-margin upload-success-container" data-bind="visible: fileStatus()===\'ready\'"><div class="oj-flex-item oj-sm-12"><div class="oj-flex" style="display:flex"><div class="oj-flex-item upload-status-sm-1 bots-no-padding">').p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"stat_confirm_16"}).w('</div><div class="oj-flex-item upload-status-sm-11 bots-no-padding"><div class="oj-flex"><div class="oj-flex-item oj-sm-12 upload-status-icon-title-gap"><span class="upload-status-title" data-bind="text: fileInfo().name"></span><span> ').h("i18n",e,{},{key:"tester.bot.batch.dialog.validatedText"},"h").w('</span></div></div><div class="oj-flex"><div class="oj-flex-item oj-sm-12 upload-status-icon-title-gap"><span></span></div></div></div></div></div></div><div class="oj-flex oj-sm-center bots-no-margin upload-error-container" data-bind="visible: fileStatus()===\'error\'"><div class="oj-flex-item oj-sm-12"><div class="oj-flex" style="display:flex"><div class="oj-flex-item upload-error-sm-1 bots-no-padding">').p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"stat_error_16"}).w('</div><div class="oj-flex-item upload-error-sm-11 bots-no-padding"><div class="oj-flex"><div class="oj-flex-item oj-sm-12 upload-status-icon-title-gap"><span class="upload-error-title" data-bind="text: $root.i18n.translate(\'tester.bot.batch.dialog.error.title\')"></span></div></div><div class="oj-flex"><div class="oj-flex-item oj-sm-12 upload-status-icon-title-gap"><span data-bind="text: fileError"></span></div></div></div></div></div></div></div>')}function s(t,e){return e=e.shiftBlocks(o),t.w('<button class="right green-button action-button" default="true"data-bind="ojComponent: { component: \'ojButton\',label: \'').h("i18n",e,{},{key:"tester.bot.batch.dialog.test",filter:"j"},"h").w("',disabled: fileStatus()!=='ready'},click: testBotFile\"/>")}t.register("bots/bottester/bot/load-bot-file-dialog",e);var o={titleLabel:i,bodyHtml:n,footerHtml:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester-type"],!1),e,"h").w("-bottom ").f(e.get(["tester-type"],!1),e,"h").w(' bots-helper-max-width"><div class="').f(e.get(["tester-type"],!1),e,"h").w("-bottom-bar-formline\"><div id='").f(e.get(["tester-type"],!1),e,"h").w("-buttonset' ><!-- ko if: '").f(e.get(["tester-type"],!1),e,"h").w("'==='bottester' --><button id='attach-").f(e.get(["tester-type"],!1),e,"h").w("' data-bind=\"click: attach, ojComponent: { component: 'ojButton', chroming:'outlined', icons: { start: '").f(e.get(["tester-type"],!1),e,"h").w("-attach-icon' }}\"></button><!-- /ko --></div><input data-bind=\"ojComponent: {component: 'ojInputText', value: $data.itemToAdd, rootAttributes:{'style': 'margin:0'}}\" id=\"").f(e.get(["tester-type"],!1),e,"h").w('-input" placeholder="').h("i18n",e,{},{key:"tester.conversation.placeholder",filter:"h"},"h").w('"></div></div>')}return t.register("bots/bottester/bottom",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="bot-action-list"><!-- ko foreach: $data.actions --><!-- ko if: $index()===0 --><div class="bot-action-item" data-bind="click: $root.clickChoice, attr: { value: $data }"><span data-bind="text: $data.label"></span></div><!-- /ko --><!-- ko if: $index()!==0 --><div class="bot-action-item bot-action-item-border" data-bind="click: $root.clickChoice, attr: { value: $data }"><span data-bind="text: $data.label"></span></div><!-- /ko --><!-- /ko --></div>')}return t.register("bots/bottester/conversation/actions",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w("<div data-bind=\"attr: {id: '").f(e.get(["tester-type"],!1),e,"h").w('-li-000\'}" class="').f(e.get(["tester-type"],!1),e,"h").w('-li"><div style="margin-right: 80px; width: 70px"><div class="oj-sm-12 ').f(e.get(["tester-type"],!1),e,"h").w('-bot"><div class="animated-dotx3"><div class="animated-dot"><div class="animated-dot_1 dot"></div><div class="animated-dot_2 dot"></div><div class="animated-dot_3 dot"></div></div></div></div></div></div>')}return t.register("bots/bottester/conversation/animation",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w("-").f(e.get(["role"],!1),e,"h").w('"><div class="bot-attachment-item"><!-- ko if: $data.attachment.type===\'image\' --><img style=\'height: 100%; width: 100%; object-fit: contain\' data-bind="attr: {src: $data.attachment.url, onload: $parents[0].imageLoaded()}"/><!-- /ko --><!-- ko if: $data.attachment.type===\'video\' --><video style=\'height: 100%; width: 100%; object-fit: contain\' autoplay controls data-bind="attr: {src: $data.attachment.url, onload: $parents[0].imageLoaded()}"/><!-- /ko --><!-- ko if: $data.attachment.type===\'audio\' --><audio autoplay controls data-bind="attr: {src: $data.attachment.url, onload: $parents[0].imageLoaded()}">Your browser does not support the <code>audio</code> element.</audio><!-- /ko --><!-- ko if: $data.attachment.type===\'file\' --><a class="header" data-bind="text: $data.attachment.url, attr: {href: $data.attachment.url, target: \'_blank\'}" style="word-break: break-all;"></a><!-- /ko --><!-- ko if: $data.actions && $data.actions.length>0 -->').p("bots/bottester/conversation/actions",e,e,{}).w("<!-- /ko --></div></div>")}return t.register("bots/bottester/conversation/attachment",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="bot-card-item bots-helper-max-width"><div data-bind="text: $data.title" class="bot-card-title"></div><!-- ko if: $data.description --><div data-bind="text: $data.description" class="bot-card-desc"></div><!-- /ko --><!-- ko if: $data.imageUrl --><img style=\'height: 100%; width: 100%; object-fit: contain\' data-bind="attr: {src: $data.imageUrl, alt: $data.title, onload: $root.imageLoaded()}"/><!-- /ko --><!-- ko if: $data.url --><div class="bot-card-url"><a data-bind="text: $data.url, attr: {href: $data.url}" style="overflow-wrap:break-word;"></a></div><!-- /ko --><!-- ko if: $data.actions && $data.actions.length>0 -->').p("bots/bottester/conversation/actions",e,e,{}).w("<!-- /ko --></div>")}return t.register("bots/bottester/conversation/card",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="oj-sm-12 ').f(e.get(["tester"],!1),e,"h").w("-bot ").f(e.get(["tester"],!1),e,"h").w('-bot-card"><div><!-- ko if: $data.layout===\'vertical\' --><div class="bot-card-list" style="text-align:right; margin-left:10px; margin-right:10px; border: none; background-color:none"><!-- ko foreach: cards -->').p("bots/bottester/conversation/card",e,e,{}).w('<!-- /ko --><!-- ko if: $data.actions && $data.actions.length>0--><div class="bot-card-item-action-list">').p("bots/bottester/conversation/actions",e,e,{}).w('</div><!-- /ko --></div><!-- /ko --><!-- ko if: $data.layout===\'horizontal\' --><div class="bot-card-list" style="text-align:right; margin-left:10px; margin-right:10px; border: none; background-color:none"><oj-film-strip id="bottester-filmStrip bots-helper-outline-0"aria-label="').h("i18n",e,{},{key:"tester.conversation.cards.label",filter:"h"},"h").w('"arrow-placement="overlay"arrow-visibility="visible"><!-- ko foreach: cards --><div class="demo-filmstrip-item bots-helper-max-width oj-panel"data-bind="style: {display: ($index===0 ? \'\' : \'none\')}">').p("bots/bottester/conversation/card",e,e,{}).w('</div><!-- /ko --></oj-film-strip><!-- ko if: $data.actions && $data.actions.length>0--><div class="bot-card-item-action-list">').p("bots/bottester/conversation/actions",e,e,{}).w("</div><!-- /ko --></div><!-- /ko --></div></div>")}return t.register("bots/bottester/conversation/cards",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="oj-sm-12 ').f(e.get(["tester"],!1),e,"h").w("-bot ").f(e.get(["tester"],!1),e,"h").w('-bot-choice"><div class="bot-choice-header" data-bind="text: text"></div><div><ul class="bot-choice-list" style="text-align:right; margin-left:10px; margin-right:10px; border: none; background-color:none"data-bind="ojComponent: { component: \'ojListView\',selectionMode: \'none\' }"><!-- ko foreach: actions --><li class="bot-choice-item" data-bind="click: $root.clickChoice, attr: { value: $data }"><span data-bind="text: $data.label"></span></li><!-- /ko --></ul></div></div>')}return t.register("bots/bottester/conversation/choice",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w("-").f(e.get(["role"],!1),e,"h").w('"><div class="header" data-bind="text: $data.footerText" style="overflow-wrap:break-word;"></div></div>')}return t.register("bots/bottester/conversation/footerText",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w('-bot-global-actions"><!-- ko foreach: $data.globalActions --><a class="action-button" data-bind="click: $root.clickChoice,ojComponent: { component: \'ojButton\', label: $data.label, chroming: \'outlined\' }"></a><!-- /ko --></div>')}return t.register("bots/bottester/conversation/globalActions",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w("-").f(e.get(["role"],!1),e,"h").w('"><div class="header" data-bind="text: $data.headerText" style="overflow-wrap:break-word;"></div></div>')}return t.register("bots/bottester/conversation/headerText",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w("    <!-- ko if: party===0 --><div data-bind=\"click: $root.selectConversation,attr: { id: '").f(e.get(["tester-type"],!1),e,"h").w("-li-' + $data['id'], party: $data['party'] },css: {'conversation-selected': selected()}\"class=\"oj-flex ").f(e.get(["tester-type"],!1),e,"h").w('-li bots-helper-pointer" style="margin-left: 80px"><!-- ko if: type===\'text\' -->').p("bots/bottester/conversation/text",e,e,{tester:i,role:"self"}).w("<!-- /ko --><!-- ko if: type==='link' --><div class=\"").f(e.get(["tester-type"],!1),e,"h").w('-self"><a class="header" data-bind="text: text, attr: {href: text, target: \'_blank\'}" style="word-break: break-all;"></a></div><!-- /ko --><!-- ko if: type===\'location\' -->').p("bots/bottester/conversation/location",e,e,{tester:n,role:"self"}).w("<!-- /ko --><!-- ko if: type==='attachment' -->").p("bots/bottester/conversation/attachment",e,e,{tester:s,role:"self"}).w("<!-- /ko --></div><!-- /ko --><!-- ko if: party===1 --><div data-bind=\"click: $root.selectConversation,attr: { id: '").f(e.get(["tester-type"],!1),e,"h").w("-li-' + $data['id'], party: $data['party'] },css: {'conversation-selected': selected()}\"class=\"oj-flex ").f(e.get(["tester-type"],!1),e,"h").w("-li bots-helper-pointer\"><div class=\"oj-flex-item oj-sm-10\"><!-- ko if: $data.hasOwnProperty('headerText') && $data.headerText!=='' -->").p("bots/bottester/conversation/headerText",e,e,{tester:o,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='text' -->").p("bots/bottester/conversation/text",e,e,{tester:a,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='link' --><div class=\"").f(e.get(["tester-type"],!1),e,"h").w('-bot"><a class="header" data-bind="text: text, attr: {href: text, target: \'_blank\'}" style="word-break: break-all;"></a></div><!-- /ko --><!-- ko if: type===\'choice\' -->').p("bots/bottester/conversation/choice",e,e,{tester:r,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='card' -->").p("bots/bottester/conversation/cards",e,e,{tester:l,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='attachment' -->").p("bots/bottester/conversation/attachment",e,e,{tester:d,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='location' -->").p("bots/bottester/conversation/location",e,e,{tester:c,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='raw' -->").p("bots/bottester/conversation/text",e,e,{tester:u,role:"bot"}).w("<!-- /ko --><!-- ko if: $data.globalActions -->").p("bots/bottester/conversation/globalActions",e,e,{tester:h,role:"bot"}).w("<!-- /ko --><!-- ko if: $data.hasOwnProperty('footerText') && $data.footerText!=='' -->").p("bots/bottester/conversation/footerText",e,e,{tester:b,role:"bot"}).w("<!-- /ko --></div><div class=\"oj-flex-item right oj-sm-2\"><!-- ko if: ko.unwrap($index) < ko.unwrap($parent.uiConversation).length - 1 --><button class=\"right reset-to-state-button\" data-bind=\"ojComponent: {component: 'ojButton',chroming: 'half',display: 'icons',icons: {start: 'bots-svgsprite-func-icon'},label: $root.i18n.translate('tester.conversation.resetToState')},inlinesvg: {width: 32, height: 32, project: 'bots', basename: 'func_flipback_16'},click: $root.resetToState\"></button><!-- /ko --></div></div><!-- /ko -->")}function i(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function n(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function s(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function o(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function a(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function r(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function l(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function d(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function c(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function u(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function h(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function b(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}return t.register("bots/bottester/conversation/item",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,b.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('  <div data-bind="if: jsonResults().length > 0"><div id="').f(e.get(["tester-type"],!1),e,"h").w('-jsonSection" class="json-section"data-bind="ojComponent: { component: \'ojCollapsible\',expanded: expandedJson,collapse: handleJson,expand: handleJson }"><h3 id="').f(e.get(["tester-type"],!1),e,"h").w('-json-header" class="oj-header-border">JSON</h3><div><a id=\'').f(e.get(["tester-type"],!1),e,"h").w('-saveFileLink\' style="float:right" data-bind="attr: { href: downloadFileURL(), download: downloadFileName() }"><span data-bind="inlinesvg: {width: 16, height: 16, project: \'bots\', basename: \'func_download_16\'}"></span></a><pre style="clear:both" class="jsonhl"><code id="').f(e.get(["tester-type"],!1),e,"h").w('-json" class="arduino-light" data-bind="highlight: fullJson"></code></pre></div></div></div>');
}return t.register("bots/bottester/conversation/json",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w("-").f(e.get(["role"],!1),e,"h").w('"><div class="bot-location-item"><!-- ko if: $data.location.title --><div data-bind="text: $data.location.title" class="bot-location-title"></div><!-- /ko --><!-- ko if: $data.actions && $data.actions.length>0 -->').p("bots/bottester/conversation/actions",e,e,{}).w("<!-- /ko --></div><!-- ko if: $data.globalActions && $data.globalActions.length>0 -->").p("bots/bottester/conversation/globalActions",e,e,{tester:i}).w("<!-- /ko --></div>")}function i(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}return t.register("bots/bottester/conversation/location",e),e.__dustBody=!0,i.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w("-").f(e.get(["role"],!1),e,"h").w('"><div class="header" data-bind="text: text" style="overflow-wrap:break-word;"></div></div>')}return t.register("bots/bottester/conversation/text",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(a),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"bottester-fullpage",sizeKlazz:"bottester-fullpage"})}function i(t,e){return e=e.shiftBlocks(a),t.w("<!-- ko if: $root.bot() && $root.bot().hasOwnProperty('displayName') --><span data-bind=\"text: $root.i18n.translate('tester.botTesterName', [$root.testBotName()])\"></span><!-- /ko -->")}function n(t,e){return e=e.shiftBlocks(a),t.w("<button class=\"right bots-vertical-align reset-button\"data-bind=\"click: resetTest,ojComponent: { component: 'ojButton',chroming: 'half',label: $root.i18n.translate('tester.conversation.clear')}\"></button>")}function s(t,e){return e=e.shiftBlocks(a),t.w('<div class="oj-flex"><div class="oj-flex-item oj-sm-12"><div class="oj-flex"><div class="oj-flex-item oj-sm-5"><div class="oj-flex"><!-- ko nobind --><div id="bottester" class="bottester oj-flex-item oj-sm-12"></div><!-- /ko --></div></div><!-- ko nobind --><div class="oj-flex-item oj-sm-7 bots-helper-padding-left-10" id="bottester-details"></div><!-- /ko --></div></div></div>')}function o(t,e){return e=e.shiftBlocks(a),t}t.register("bots/bottester/main",e);var a={titleLabel:i,titleEndToolbar:n,bodyHtml:s,footerHtml:o};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,e}(dust),define("bots.templates/bottester",function(){}),define("bots.package.bottester/model.rest",["module","bots.model.rest","bots.i18n","bots.config"],function(t,e,i,n){var s=e.__class__.extend({module:t,name:"TesterRestModel"},{config:{stringifyObjects:!1},TesterRestModel:function(t){this._super(t)},testConversation:function(t,e){this.restPost(e,"/bots/{botId}/test/messages",{data:JSON.stringify(_.omit(t,["botId","botName","resetCounter"])),dataType:"text",uriParams:{botId:t.botId}})},pollConversation:function(t,e){this.restGet(e,"/bots/{botId}/test/responses",{cache:!1,uriParams:{botId:t.botId},headers:{"Bots-UserId":t.userId}})}});return new s(_.extend({},e.config,{baseUrl:e.config.baseUrl}))}),define("bots.package.bottester/model",["module","mcs.js.framework/model.util","bots.model.rest","bots.i18n","bots.config","bots.package.bottester/model.rest"],function(t,e,i,n,s,o){var a=o.__class__.extend({module:t,name:"FakeBotTesterRestModel"},{config:{stringifyObjects:!1},FakeBotTesterRestModel:function(t){this._super(t)}},e.stubProxy);return new a(_.extend({},i.config,{baseUrl:i.config.baseUrl}))}),define("bots.package.bottester/dataobject",["module","bots.i18n","mcs.js.framework/dataobject"],function(t,e,i){var n=i.extend({module:t,name:"BotTesterConversationQnADataObject"},{BotTesterConversationQnADataObject:function(t){this.qnaAnswerMatchList=ko.observable(),this.qnaCategoryMatchList=ko.observable(),this.qnaResultsSearchConfiguration=ko.observable(),this.qnaResultsQuery=ko.observable(),this._super(t)},fromJS:function(t,e){var i=t;i?(this.qnaAnswerMatchList(i.answerMatches.answerMatchList),this.qnaCategoryMatchList(i.categoryMatches.categoryMatchList),i.answerMatchMethod.searchConfiguration=this._filterKeys(i.answerMatchMethod.searchConfiguration,[]),this.qnaResultsSearchConfiguration(this._processNodes(i.answerMatchMethod.searchConfiguration,"qna-search-config",0)),i.qnAQuery=this._filterKeys(i.qnAQuery,["sentence","categoriesFilter","categories"]),this.qnaResultsQuery(this._processNodes(i.qnAQuery,"qna-query",0)),i.answerMatchMethod.searchConfiguration={},i.qnAQuery={}):(this.qnaAnswerMatchList([]),this.qnaCategoryMatchList([]),this.qnaResultsSearchConfiguration(this._processNodes({},"qna-search-config",0)),this.qnaResultsQuery(this._processNodes({},"qna-query",0)))},_filterKeys:function(t,e){var i={};return t&&"object"==typeof t&&e&&Array.isArray(e)&&_.filter(Object.keys(t),function(n){_.contains(e,n)||(i[n]=t[n])}),i},_processNodes:function(t,e,i){var n=[];return t=_.pick(t,function(t,e,i){return t}),t&&i<10&&(n=Object.keys(t).map(function(n){var s={title:n,attr:{id:e+n+Math.random().toString(36).substring(7)},value:t[n],expanded:!0};return"object"!=typeof t[n]?(s.value=t[n],s.title=s.title+": "+s.value):s.children=this._processNodes(t[n],e,i+1),s},this)),n}}),s=i.extend({module:t,name:"BotTesterConversationDataObject"},{BotTesterConversationDataObject:function(t){this.variables=ko.observable(),this.allVariables=ko.observable(),this.intentMatches=ko.observable(),this.entityMatches=ko.observable(),this.executedStates=ko.observable(),this.currentDialogState=ko.observable(),this.actions=ko.observable(),this.globalActions=ko.observable(),this.stateDiagramLinks=ko.observable(),this.stateDiagramNodes=ko.observable(),this.stateDiagramExpandedNodes=ko.observable(),this._super(t)},fromJS:function(t,e){this._processConversation(t)},_initConversation:function(){this.variables([]),this.allVariables([]),this.intentMatches([]),this.entityMatches([]),this.executedStates([]),this.currentDialogState(null),this.actions([]),this.globalActions([]),this.qnaDO=new n(null)},_processConversation:function(t){var i=this,s=[],o=t&&t.channelExtensions&&t.channelExtensions.debugInfo?t.channelExtensions.debugInfo:null;if(o){s=_.pick(o.variables,function(t,e,i){return t});var a=JSON.parse(JSON.stringify(s));a.iResult=_.omit(i._getResult(a),"intentMatches","entityMatches"),a.userInput=_.omit(a.userInput,"intentMatches","entityMatches"),a=_.omit(a,"qna.result","iresult","iResult"),this.variables(this._processNodes(this._filterVariables(a,!1),"variable-",0)),this.allVariables(this._processNodes(a,"variables-",0));var r=this._getResult(s)?this._getResult(s).intentMatches:s.userInput?s.userInput.intentMatches:null;this.intentMatches(this._processIntents(r));var l=this._getResult(s)?this._getResult(s).entityMatches:null;this.entityMatches(this._processEntities(l));var d=s["qna.result"];this.qnaDO=new n(d),this.executedStates(o.executedStates),this.currentDialogState(o.currentDialogState);var c=new oj.ColorAttributeGroupHandler,u=[],h=[],b={},g=null,f=null,p=0,m=[],v=0;_.each(ko.unwrap(this.executedStates),_.bind(function(t){if(t&&t.botName){if(b.hasOwnProperty(t.botId)){var i=_.find(u,function(e){return e.id===t.botId});_.find(i.nodes,function(e){return e.id===t.botId+t.stateName})?(g.id=t.botId+t.stateName,g.icon.color=i.nodes[0].icon.color):(f=this._diagramCreateNode(t.botId+t.stateName,t.stateName,[],b[i.id].color),i.nodes.push(f))}else v++,f=this._diagramCreateNode(t.botId+t.stateName,t.stateName,[],c.getValue(v)),u.push(this._diagramCreateNode(t.botId,e.translate("tester.conversation.botName",[t.botName]),[f])),m.push(t.botId),b[t.botId]={name:t.botName,color:c.getValue(v)};g&&t.stateName&&g.id!==t.botId+t.stateName&&h.push(this._diagramCreateLink(p++,g.id,t.botId+t.stateName,g.icon.color)),g=JSON.parse(JSON.stringify(f))}},this)),this.stateDiagramNodes(u),this.stateDiagramLinks(h),this.stateDiagramExpandedNodes(m)}else this._initConversation();t&&(this.actions(this._processActions(t.actions)),this.globalActions(this._processActions(t.globalActions,!0)))},_diagramCreateLink:function(t,i,n,s){return{id:t,startNode:i,endNode:n,shortDesc:e.translate("tester.conversation.stateLinkDesc",[i,n]),color:s}},_diagramCreateNode:function(t,e,i,n){return{id:t,label:e,shortDesc:e,nodes:i,icon:{color:n}}},_processEntities:function(t){var e=[];if(t){var i=_.keys(t);_.each(i,function(i){var n=t[i][0];e.push({name:i,value:n})})}return e},_processIntents:function(t){var e=[];return t&&(e=t.detail.final_norm.map(function(t){var e=t;return e},this)),e},_processActions:function(t,e){var i={};return t&&_.each(t,function(t){i[t.type]||(i[t.type]=[]),t.isGlobal=e,i[t.type].push(t)}),i},_processNodes:function(t,e,i){var n=[];t=_.pick(t,function(t,e,i){return null!==t});var s=_.extend({},t);return _.each(_.keys(s),function(e){var i={},n={};return i="system.config.system.routing",n=i.substr(0,i.lastIndexOf(".")),0===e.indexOf(i)?(t.system=t.system||{},t.system.config=t.system.config||{},t.system.config.system=t.system.config.system||{},t.system.config.system.routing=t.system.config.system.routing||{},t.system.config.system.routing[e.slice(n.length+1)]=t[e],void delete t[e]):(i="system.config.system.conversation",n=i.substr(0,i.lastIndexOf(".")),0===e.indexOf(i)?(t.system=t.system||{},t.system.config=t.system.config||{},t.system.config.system=t.system.config.system||{},t.system.config.system.conversation=t.system.config.system.conversation||{},t.system.config.system.conversation[e.slice(n.length+1)]=t[e],void delete t[e]):(i="system.config.system",0===e.indexOf(i)?(t.system=t.system||{},t.system.config=t.system.config||{},t.system.config.system=t.system.config.system||{},t.system.config.system[e.slice(i.length+1)]=t[e],void delete t[e]):(i="system.config",0===e.indexOf(i)?(t.system=t.system||{},t.system.config=t.system.config||{},t.system.config[e.slice(i.length+1)]=t[e],void delete t[e]):(i="system",0===e.indexOf(i)?(t.system=t.system||{},t.system[e.slice(i.length+1)]=t[e],void delete t[e]):void 0))))}),t&&i<10&&(n=Object.keys(t).map(function(n){var s={title:n,attr:{id:e+n+Math.random().toString(36).substring(7)},value:t[n],expanded:!0};return"object"!=typeof t[n]?(s.value=t[n],s.title=s.title+": "+s.value):s.children=this._processNodes(t[n],e,i+1),s},this)),n},_filterVariables:function(t,e){var i={};return t&&"object"==typeof t&&_.filter(Object.keys(t),function(n){e&&0===n.indexOf("profile.")?i[n]=t[n]:e||0===n.indexOf("profile.")||"userInput"===n||"iResult"===n||0===n.indexOf("system.state")||(i[n]=t[n])}),i},_getResult:function(t){return t.iResult||t.iresult}});return{BotTesterConversationDataObject:s,BotTesterConversationQnADataObject:n}}),define("bots.package.bottester/facade",["module","bots.facade","bots.package.bottester/model"],function(t,e,i){var n=e.__class__.extend({module:t,name:"Facade"},{__static__:{globalChannels:{}},Facade:function(){this._super();this.register({TEST_CONVERSATION:{name:"full.tester.bot.conversation",handler:function(t){var e=t.data.botId,n=t.data.botName,s=t.data.resetCounter;i.testConversation(t.data,_.bind(function(i){t.data=i,t.data.botId=e,t.data.botName=n,t.data.resetCounter=s,this.publish(t)},this))}},POLL_CONVERSATION:{name:"full.tester.bot.pollConversation",handler:function(t){var e=t.data.botId,n=t.data.botName,s=t.data.resetCounter;i.pollConversation(t.data,_.bind(function(i){t.data=i,t.data.botId=e,t.data.botName=n,t.data.resetCounter=s,this.publish(t)},this))}},UPDATE_LAYOUT:{name:"full.tester.updateLayout",handler:function(t){this.publish(t)}},SEND_ATTACHMENT:{name:"full.tester.bot.attachment.send",handler:function(t){this.publish(t)}},RESET_RESULTS:{name:"full.tester.qna.reset",handler:function(t){this.publish(t)}},DOWNLOAD_CONVERSATION:{name:"full.tester.download.conversation",handler:function(t){this.publish(t)}},REPLAY_CONVERSATION:{name:"full.tester.test.conversation",handler:function(t){this.publish(t)}},SHOW_DETAILS:{name:"full.tester.show.details",handler:function(t){this.publish(t)}}})}});return new n}),define("bots.package.bottester/attach",["module","bots.package.shell/validators","bots.package.view/dialog","bots.i18n"],function(t,e,i,n){function s(t){var e=document.createElement("a");return e.href=t,"http:"===e.protocol||"https:"===e.protocol?e.host&&e.host!==window.location.host:["file:","ftp:","sftp:","ftps:"].indexOf(e.protocol)>-1}var o,a=i.extend({module:t,name:"AttachDialog"},{__static__:{ATTACHMENT_TYPE:["image","video","audio","file"]},config:{type:"ojDialog"},bindings:{botsValidators:e,attachmentType:{func:ko.observable,args:[["image"]]},attachmentTypes:{func:ko.observableArray,args:[[{value:"image",label:n.translate("tester.bot.attach.dialog.types.image")},{value:"video",label:n.translate("tester.bot.attach.dialog.types.video")},{value:"audio",label:n.translate("tester.bot.attach.dialog.types.audio")},{value:"file",label:n.translate("tester.bot.attach.dialog.types.file")}]]},attachmentTitle:{func:ko.observable},attachmentUrl:{func:ko.observable},addAttachment:function(t){this.deps.uiComponents.validateFields($(this.config.baseElement))&&this.bindings.attachmentUrl()&&this.notify({SEND_ATTACHMENT:{data:{title:this.bindings.attachmentTitle(),type:this.bindings.attachmentType(),url:this.bindings.attachmentUrl()}}},{actionSpinner:!1})},isAttachmentUrlValidator:{func:function(){return{validate:function(t){if(t&&!s(t))throw new oj.ValidatorError(n.translate("tester.conversation.attach.dialog.error.validation.summary"),n.translate("tester.conversation.attach.dialog.error.validation.detail"));return!0}}}},closeDialog:function(){},openDialog:function(){this.bindings.attachmentTitle(""),this.bindings.attachmentUrl(""),this.bindings.attachmentType(["image"])}},setupEventHandlers:function(){$("#tester-attach-dialog").on("ojclose",this.bindings.closeDialog),$("#tester-attach-dialog").on("ojopen",this.bindings.openDialog)},bindView:function(t){this._super(t),this.setupEventHandlers()},rebindView:function(t){this._super(t),this.bindView(t)},AttachDialog:function(t){this._super(t)},resetFields:function(t){this._super(t)},open:function(t,e){return this.config.resetFieldsOnOpen=!1,this._super(),o=$.Deferred(),this.bindings.openDialog(),o}});return a}),define("bots.package.bottester/view.bot",["module","suite.package.util/messaging","bots.config","bots.i18n","bots.package.view/view","bots.package.bottester/facade","bots.package.bottester/attach","ojs/ojfilmstrip"],function(t,e,i,n,s,o,a){function r(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function l(t,e){var i=_.extend(JSON.parse(JSON.stringify(t)),{rawJson:e});i.id=this.lastId,i.party=1,i.selected=ko.observable(!1);var n=_.last(_.filter(this.uiConversation(),function(t){return 1===t.party}));if(n&&n.channelExtensions&&n.channelExtensions.debugInfo&&n.channelExtensions.debugInfo.executedStates){var s=_.last(n.channelExtensions.debugInfo.executedStates);"done"!==_.last(n.channelExtensions.debugInfo.executedStates)&&"unresolved"!==_.last(n.channelExtensions.debugInfo.executedStates)||(n.channelExtensions.debugInfo.executedStates=[]),i.channelExtensions&&i.channelExtensions.debugInfo?i.channelExtensions.debugInfo.currentDialogState!==s?i.channelExtensions.debugInfo.executedStates=n.channelExtensions.debugInfo.executedStates.concat(i.channelExtensions.debugInfo.executedStates||i.channelExtensions.debugInfo.currentDialogState):i.channelExtensions.debugInfo.executedStates=n.channelExtensions.debugInfo.executedStates:i.channelExtensions=n.channelExtensions}this.uiConversation.push(i),this.lastId++}function d(t,e){return"https://www.google.com/maps/search/?api=1&query="+t+","+e}function c(t){var e=document.createElement("a");return e.href=t,"http:"===e.protocol||"https:"===e.protocol?e.host&&e.host!==window.location.host:["mailto:","file:","ftp:","sftp:","ftps:"].indexOf(e.protocol)>-1}function u(t){"function"==typeof t.isTesting?t.isTesting(!1):t.isTesting=!1}function h(t,e){e.jsonResults.push(t)}var b={state:{}},g=s.extend({module:t,name:"FullPageTesterView"},{__static__:{POLL_WINDOW_MS:18e4},deps:{i18n:n,facade:o,botsConfig:i},bindings:{i18n:n,itemToAdd:{func:ko.observable},lastId:0,userId:"",userProfile:{},uiConversation:{func:ko.observableArray,args:[[]]},jsonResults:{func:ko.observableArray,args:[[]]},fullJson:{func:ko.computed,args:[function(){return JSON.stringify(this.bindings.jsonResults(),null,2)},this,{deferEvaluation:!0}]},isPolling:!1,isTesting:{func:ko.observable,args:[!1]},timeLastTested:-1,expandedJson:!1,resetCounter:0,handleJson:function(t,e){"ojexpand"===t.type?(this.bindings.expandedJson=!0,this.updateConversation()):"ojcollapse"===t.type&&(this.bindings.expandedJson=!1,"relative"===$("#tester-bot-jsonSection").css("position")&&this.updateConversation()),this.selectInput(),this.scrollToBottom()},resetToState:function(t){var e=JSON.parse(JSON.stringify(ko.unwrap(this.bindings.uiConversation)));this.bindings.resetTest(),this._resetToState(e,t)},resetTest:function(t){this.bindings.uiConversation([]),this.bindings.lastId=0,this.bindings.userId=(this.bindings.userProfile.userId?this.bindings.userProfile.userId:"")+r(1e6,9999999),this.bindings.itemToAdd(null),this.bindings.jsonResults([]),this.bindings.isPolling=!1,this.bindings.isTesting(!1),this.bindings.timeLastTested=-1,this.bindings.expandedJson=!1,t?this.bindings.resetCounter=0:this.bindings.resetCounter++},downloadConversation:function(){this._downloadJson({data:ko.toJS(this.bindings.uiConversation)})},replayConversation:function(t){this.bindings.resetTest(),this._resetToState(t.conversation,null)},clickChoice:function(t,e,i){"postback"===t.type?this.postback(t):"url"===t.type?this.openUrl(t):"call"===t.type?this.callNumber(t):"location"===t.type?this.requestLocation(t):this.log("action not supported",t),this.selectInput(),this.scrollToBottom()},imageLoaded:function(t,e,i){this.log("Image loaded");var n=_.throttle(this.updateLayout,200,{leading:!1});setTimeout(n,500)},sendText:function(t,e,i){this.bindings.itemToAdd()&&""!==this.bindings.itemToAdd().trim()&&this.addText(this.bindings.itemToAdd().trim()),this.selectInput(),this.scrollToBottom()},AttachDialog:{func:function(){return new a({baseElement:this.config.attachBaseElement,contentElement:this.config.attachBaseElement,parentView:this})}},attach:function(t,e){this.bindings.AttachDialog.open()},downloadFileURL:function(){return"data:application/octet-stream,"+encodeURIComponent(this.bindings.fullJson())},downloadFileName:function(){return i.getCurrentBot().name+"_conversation.json"},selectConversation:function(t){var e=this;_.each(e.bindings.uiConversation(),function(t){t&&t.selected&&"function"==typeof t.selected&&t.selected(!1)},this),t&&t.selected&&"function"==typeof t.selected&&t.selected(!0),t=_.extend(t,{currentBotId:i.getCurrentBot().id}),this.notify({SHOW_DETAILS:{data:t}},{actionSpinner:!1})}},FullPageTesterView:function(t){this._super(t)},bindView:function(t){this._super(t);var e=this;$("#bottester-input").keyup(function(t){13===t.keyCode&&e.bindings.sendText()}),this.bindings.AttachDialog.bindView(),this.setUserProfile()},initModule:function(t){this.afterLC("renderView").always(function(){_.defer(function(){})}),this._super(t)&&this.listen({BOT_SELECT:this.switchBot,TEST_CONVERSATION:this.testReturned,POLL_CONVERSATION:this.pollingReturned,UPDATE_LAYOUT:this.updateLayoutHandler,SEND_ATTACHMENT:this.addAttachment,RESET_RESULTS:this._resetResults,DOWNLOAD_CONVERSATION:this.bindings.downloadConversation,REPLAY_CONVERSATION:this.bindings.replayConversation})},setUserProfile:function(){this.bindings.userProfile=i.getUser();var t={};if(this.bindings.userProfile.username){var e=this.bindings.userProfile.username.split(" ");1===e.length?t.firstName=e[0]:2===e.length?(t.firstName=e[0],t.lastName=e[1]):t.firstName=this.bindings.userProfile.username}t.timezoneOffset=60*(new Date).getTimezoneOffset()*1e3,this.log("locale",t.locale),_.defaults(this.bindings.userProfile,t),this.log("userProfile",this.bindings.userProfile),this.bindings.userId=(this.bindings.userProfile.userId?this.bindings.userProfile.userId:"")+r(1e6,9999999)},sendUtterance:function(t){if(this.bindings.timeLastTested=Date.now(),this.bindings.isTesting(!0),this.notify({TEST_CONVERSATION:{data:{messagePayload:{text:t,type:"text"},userId:this.bindings.userId,profile:_.pick(this.bindings.userProfile,["firstName","lastName","timezoneOffset","locale"]),botId:i.getCurrentBot().id,botName:i.getCurrentBot().name,resetCounter:this.bindings.resetCounter}}},{actionSpinner:!1}),this.bindings.userPreferences().botInitialUA){var e=this.bindings.userPreferences();e.botInitialUA=!1,this.bindings.userPreferences(e)}},sendLocation:function(t){this.bindings.timeLastTested=Date.now(),this.bindings.isTesting(!0),this.notify({TEST_CONVERSATION:{data:{messagePayload:{location:t,type:"location"},userId:this.bindings.userId,profile:_.pick(this.bindings.userProfile,["firstName","lastName","timezoneOffset","locale"]),botId:i.getCurrentBot().id,botName:i.getCurrentBot().name,resetCounter:this.bindings.resetCounter}}},{actionSpinner:!1})},sendAttachment:function(t){this.bindings.timeLastTested=Date.now(),this.bindings.isTesting(!0),this.notify({TEST_CONVERSATION:{data:{messagePayload:{attachment:t,type:"attachment"},userId:this.bindings.userId,profile:_.pick(this.bindings.userProfile,["firstName","lastName","timezoneOffset","locale"]),botId:i.getCurrentBot().id,botName:i.getCurrentBot().name,resetCounter:this.bindings.resetCounter}}},{actionSpinner:!1})},sendPostback:function(t){this.bindings.timeLastTested=Date.now(),this.bindings.isTesting(!0),this.notify({TEST_CONVERSATION:{data:{messagePayload:{postback:t,type:"postback"},userId:this.bindings.userId,profile:_.pick(this.bindings.userProfile,["firstName","lastName","timezoneOffset","locale"]),botId:i.getCurrentBot().id,botName:i.getCurrentBot().name,resetCounter:this.bindings.resetCounter}}},{actionSpinner:!1})},postback:function(t){"postback"===t.type&&t.postback&&t.label&&""!==t.label&&""!==t.label.trim()&&(this.bindings.uiConversation.push({id:this.bindings.lastId,type:"text",text:t.label,party:0,selected:ko.observable(!1)}),this.bindings.lastId++,this.sendPostback(t.postback),this.updateLayout())},openUrl:function(t){if("url"===t.type&&t.url){var e=window.open(t.url,"_blank");e.focus()}},callNumber:function(t){if("call"===t.type&&t.phoneNumber){var e=window.open("tel:"+(0===t.phoneNumber.indexOf("+")?t.phoneNumber:"+"+t.phoneNumber),"_blank");e.focus()}},displayLocationSent:function(t,e){if(e&&e.latitude&&e.longitude){var i={label:n.translate("tester.conversation.location.mapAction"),url:d(e.latitude,e.longitude),type:"url"};this.bindings.uiConversation.push({id:this.bindings.lastId,type:"location",location:{title:t,latitude:e.latitude,longitude:e.longitude},actions:[i],party:0,selected:ko.observable(!1)}),this.bindings.lastId++,this.updateLayout(),this.sendLocation({latitude:e.latitude,longitude:e.longitude})}},requestLocation:function(t){var e=this;if("location"===t.type){var i={latitude:37.2900055,longitude:-121.906558};"https"===window.location.protocol||"localhost"===window.location.hostname?"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(t){e.log(t.coords),e.displayLocationSent(n.translate("tester.conversation.message.location.available"),t.coords)}):e.displayLocationSent(n.translate("tester.conversation.message.location.notSupported"),i):e.displayLocationSent(n.translate("tester.conversation.message.location.notAvailable"),i)}},addText:function(t){""!==t&&""!==t.trim()&&(this.bindings.uiConversation.push({id:this.bindings.lastId,type:c(t.trim())?"link":"text",text:t.trim(),party:0,selected:ko.observable(!1)}),this.bindings.lastId++,this.sendUtterance(t),this.updateLayout())},logResponseMsg:function(t,e,i,n,s,o){s?o?this.log(t,"for",e.botName,"to be processed"):this.log(t,"for",e.botName,"already reset at counter",i.resetCounter):o?this.log(t,"for",e.botName,"not for current bot",n):this.log(t,"for",e.botName,"not for current bot",n,"and already reset at counter",i.resetCounter)},updateLayout:function(t){if(this.scrollToBottom(),this.bindings.jsonResults().length>0)if(this.bindings.jsonResults().length>0&&$("#bottester-jsonSection").length>0){this.log("bot tester: adjusting jsonSection expand/collapse");var e={};e.botSection=$("#bottester-section").innerHeight(),e.content=$("#bottester-form-container").innerHeight(),e.jsonHeader=$("#bottester-json-header").innerHeight();var i=$("#bottester-jsonSection").ojCollapsible("option","expanded");e.json=i?$("#bottester-json").innerHeight():0,e.botSection<e.jsonHeader+e.json+e.content?($("#bottester-jsonSection").css("position","relative"),t||setTimeout(function(){var t=$("#bottester-section");t.scrollTop(i?e.content-.5*e.botSection:e.jsonHeader+e.json+e.content)},200)):setTimeout(function(){$("#bottester-jsonSection").css("position","absolute")},200)}else this.log("bot tester: no json expand/collapse handling needed"),$("#bottester-jsonSection").css("position","absolute")},selectInput:function(){setTimeout(function(){$("#bottester-input").select()},50)},scrollToBottom:function(){setTimeout(function(){var t=document.getElementById("bottester-form-container");t.scrollTop=t.scrollHeight},100)},updateConversation:function(){this.notify({UPDATE_LAYOUT:{data:{bot:!0}}},{actionSpinner:!1})},processResponses:function(t,e){t.responses.length>0&&(u(e),h(t,e)),_.each(t.responses,function(t){if(t.messagePayload){if(t.rawMessagePayload=JSON.parse(JSON.stringify(t.messagePayload)),"text"===t.messagePayload.type)t.messagePayload.actions?t.messagePayload.type="choice":c(t.messagePayload.text.trim())&&(t.messagePayload.type="link");else if("location"===t.messagePayload.type){if(!t.messagePayload.location.url&&!t.messagePayload.actions&&t.messagePayload.location.latitude&&t.messagePayload.location.longitude&&(t.messagePayload.location.url=d(t.messagePayload.location.latitude,t.messagePayload.location.longitude)),t.messagePayload.location.url&&!t.messagePayload.actions){t.messagePayload.actions=[];var i={label:"Open Map",url:t.messagePayload.location.url,type:"url"};t.messagePayload.actions.push(i)}}else"raw"===t.messagePayload.type&&(t.messagePayload.text=JSON.stringify(t.messagePayload.payload));_.bind(l,e)(t.messagePayload,t.rawMessagePayload)}}),this.bindings.selectConversation(_.last(ko.unwrap(this.bindings.uiConversation)))},processError:function(t,i){u(i),404===t.status?e.showWarning(n.translate("tester.messages.failure.disabledTestChannel")):e.showI18nError(t,"tester.messages.failure.testBot")},continuePolling:function(t,e,i,n){if(n)i.isPolling||(i.isPolling=!0,this.doPolling(t,e,i));else{var s=Date.now();if(s-i.timeLastTested<this.__static__.POLL_WINDOW_MS){var o=this;setTimeout(function(){o.doPolling(t,e,i)},500)}else u(i),i.isPolling=!1}},doPolling:function(t,e,i){this.notify({POLL_CONVERSATION:{data:{userId:i.userId,botId:t,botName:e,resetCounter:i.resetCounter}}},{actionSpinner:!1})},updateLayoutHandler:function(t){t&&t.bot&&(t.skipScroll?this.updateLayout(!0):this.updateLayout())},testReturned:function(t){this.handleTestResult(_.extend(t,{startPoll:!0}))},handleTestResult:function(t){var e=i.getCurrentBot().id,n=i.getCurrentBot().name,s=t.startPoll?"Test Responses":"Polling Responses";t.status&&t.status<=204?t.botId===e?t.resetCounter===this.bindings.resetCounter?(t.data&&"object"==typeof t.data&&t.data.responses&&t.data.responses.length>0&&(this.processResponses(t.data,this.bindings),this.updateLayout()),this.continuePolling(t.botId,t.botName,this.bindings,t.startPoll),this.logResponseMsg(s,t,this.bindings,n,!0,!0)):this.logResponseMsg(s,t,this.bindings,n,!0,!1):t.resetCounter===b.state[t.botId].resetCounter?(t.data&&"object"==typeof t.data&&t.data.responses&&t.data.responses.length>0&&this.processResponses(t.data,b.state[t.botId]),this.continuePolling(t.botId,t.botName,b.state[t.botId],t.startPoll),this.logResponseMsg(s,t,b.state[t.botId],n,!1,!0)):this.logResponseMsg(s,t,b.state[t.botId],n,!1,!1):t.status&&t.status>204&&(t.botId===e?t.resetCounter===this.bindings.resetCounter?(this.processError(t,this.bindings),this.logResponseMsg(s+" Error",t,this.bindings,n,!0,!0)):this.logResponseMsg(s+" Error",t,this.bindings,n,!0,!1):t.resetCounter===b.state[t.botId].resetCounter?(this.processError(t,b.state[t.botId]),this.logResponseMsg(s+" Error",t,b.state[t.botId],n,!1,!0)):this.logResponseMsg(s+" Error",t,b.state[t.botId],n,!1,!1))},pollingReturned:function(t){this.handleTestResult(_.extend(t,{startPoll:!1}))},addAttachment:function(t){if(t&&t.type&&1===t.type.length&&["image","video","audio","file"].includes(t.type[0])&&t.url){var e={type:t.type[0],url:t.url,title:t.title};this.bindings.uiConversation.push({id:this.bindings.lastId,type:"attachment",attachment:e,party:0,selected:ko.observable(!1)}),this.bindings.lastId++,$(this.config.attachBaseElement).ojDialog("close"),this.updateLayout(),this.sendAttachment(e)}},switchBot:function(t){t&&t.previousBot&&(this.log("switch bot from",t.previousBot.id,"to",t.selectedBot.id),this.saveState(t.previousBot.id),this.restoreState(t.selectedBot.id),this.bindings.jsonResults().length>0&&$("#tester-bot-jsonSection").length>0&&$("#tester-bot-jsonSection").ojCollapsible("option","expanded")!==this.bindings.expandedJson&&$("#tester-bot-jsonSection").ojCollapsible("option","expanded",this.bindings.expandedJson),this.updateConversation(),this.selectInput())},saveState:function(t){b.state[t]={uiConversation:this.bindings.uiConversation(),lastId:this.bindings.lastId,userId:this.bindings.userId,itemToAdd:this.bindings.itemToAdd(),jsonResults:this.bindings.jsonResults(),isPolling:this.bindings.isPolling,isTesting:this.bindings.isTesting(),timeLastTested:this.bindings.timeLastTested,expandedJson:this.bindings.expandedJson,resetCounter:this.bindings.resetCounter},this.log("Saving state for",t),this.log(b.state[t])},restoreState:function(t){if(b.state[t]){var e=b.state[t];this.bindings.uiConversation(e.uiConversation),this.bindings.lastId=e.lastId,this.bindings.userId=e.userId,this.bindings.itemToAdd(e.itemToAdd),this.bindings.jsonResults(e.jsonResults),this.bindings.isPolling=e.isPolling,this.bindings.isTesting(e.isTesting),this.bindings.timeLastTested=e.timeLastTested,this.bindings.expandedJson=e.expandedJson,this.bindings.resetCounter=e.resetCounter}else this.bindings.resetTest(!0);this.bindings.uiConversation().length&&this.bindings.selectConversation(_.last(ko.unwrap(this.bindings.uiConversation))),this.log("Restoring state for",t),this.log(b.state[t])},_resetResults:function(){this.bindings.resetTest(!1)},_downloadJson:function(t){var e,i,n=JSON.stringify(t.data,null,"\t");i=t.filename||"tester-conversation.json",n.match(/^data:application\/json/i)||(n="data:application/json;charset=utf-8,"+n),e=encodeURI(n),require("suite.security.csrf").downloadFile(e,i)},_resetToState:function(t,e){_.each(t,_.bind(function(t){e&&e.id<t.id||0===t.party&&"text"===t.type&&setTimeout(_.bind(function(){this.bindings.itemToAdd(t.text),this.bindings.sendText()},this),2e3*t.id)},this))}});return g}),define("bots.package.bottester/view.details",["module","suite.package.util/messaging","bots.config","bots.i18n","bots.package.view/view","bots.package.bottester/facade","bots.package.bottester/dataobject","ojs/ojfilmstrip"],function(t,e,i,n,s,o,a){var r=s.extend({module:t,name:"DetailsView"},{deps:{i18n:n,facade:o,botsConfig:i},currentBotId:null,bindings:{conversationDO:{cls:a.BotTesterConversationDataObject,args:[]},intentsDVSeriesSource:{func:ko.observable},intentsDVGroupSource:{func:ko.observable,args:[]},qnaCategoriesDVSeriesSource:{func:ko.observable},qnaCategoriesDVGroupSource:{func:ko.observable,args:[]},variablesTreeDS:{func:ko.observable},intentListDS:{func:ko.observable},entityListDS:{func:ko.observable},qnaAnswerMatchListDS:{func:ko.observable},qnaCategoryMatchListDS:{func:ko.observable},qnaSearchConfigurationTreeDS:{func:ko.observable},qnaQueryTreeDS:{func:ko.observable},actionsPostbackListDS:{func:ko.observable},actionsUrlListDS:{func:ko.observable},actionsCallListDS:{
func:ko.observable},globalActionsPostbackListDS:{func:ko.observable},globalActionsUrlListDS:{func:ko.observable},globalActionsCallListDS:{func:ko.observable},fullJson:{func:ko.observable},json:{func:ko.observable},jsonSearchValue:{func:ko.observable},executedStates:{func:ko.observable},stateDiagramData:{func:ko.observable},currentDialogState:{func:ko.observable},renderResults:{func:ko.observable,args:[!1]},jsonFilter:{func:ko.observable},viewingAllVariables:{func:ko.observable},showRoutingTimelineView:{func:ko.observable},handleKeyUpJsonFilter:function(t,e){var i=this.bindings.fullJson();i&&(""===e.value?this.bindings.json(i):this.bindings.json(this._filterKeyAndValue(i,e.value,[])))},processConversation:function(t){var e=t;this._displayJson(e),this._processConversation(e)},resetResults:function(){this.log("reset conversation"),this._displayJson({}),this._processConversation({}),this.bindings.renderResults(!1)},downloadFileURL:function(){return"data:application/octet-stream,"+encodeURIComponent(JSON.stringify(this.bindings.json(),null,2))},downloadFileName:function(){return i.getCurrentBot().name+"_conversation.json"},downloadFileAction:function(){require("suite.security.csrf").downloadFile(this.downloadFileURL(),this.downloadFileName())},downloadFile:function(t,e){var i=$("#bottester-details-json-saveFileLink");i&&i.length>0?i[0].click():this.error("Could not locate link to download JSON")},viewAllVariables:function(){this.bindings.viewingAllVariables(!0),this.bindings.variablesTreeDS(new oj.JsonTreeDataSource(this.bindings.conversationDO.allVariables()))},viewLessVariables:function(){this.bindings.viewingAllVariables(!1),this.bindings.variablesTreeDS(new oj.JsonTreeDataSource(this.bindings.conversationDO.variables()))},styleDefaults:{nodeDefaults:{icon:{width:60,height:60,shape:"circle"}},linkDefaults:{color:"#ccd2d7",endConnectorType:"arrow",width:2}},containerLayout:function(t){for(var e=t.getNodeCount(),i=0,n=0;n<e;n++){var s=t.getNodeByIndex(n);s.isDisclosed()&&s.getChildNodes()&&this._layoutParent(t,s.getChildNodes());var o=s.getContentBounds();s.setPosition({x:i,y:-o.y-.5*o.h}),this._positionLabel(s),i+=o.w+50}for(var a=t.getLinkCount(),r=0;r<a;r++)this._createLink(t,t.getLinkByIndex(r))}},DetailsView:function(t){this._super(t)},initModule:function(t){if(this._super(t)){var e=this;this.listen({SHOW_DETAILS:e.bindings.processConversation,BOT_SELECT:this._resetResults,RESET_RESULTS:this._resetResults})}},loadModule:function(t){},reloadModule:function(t){},_displayJson:function(t){this.bindings.fullJson(t.rawJson||{}),this.bindings.json(t.rawJson||{})},_processConversation:function(t){this.currentBotId=t.currentBotId,this.bindings.conversationDO.fromJS(t),this.bindings.viewingAllVariables(!1),this.bindings.showRoutingTimelineView(!1),this.bindings.variablesTreeDS(new oj.JsonTreeDataSource(this.bindings.conversationDO.variables()||[])),this.bindings.intentListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.intentMatches()||[])),this.bindings.entityListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.entityMatches()||[])),this.bindings.actionsPostbackListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.actions().postback||[])),this.bindings.actionsUrlListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.actions().url||[])),this.bindings.actionsCallListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.actions().call||[])),this.bindings.globalActionsPostbackListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.globalActions().postback||[])),this.bindings.globalActionsUrlListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.globalActions().url||[])),this.bindings.globalActionsCallListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.globalActions().call||[])),this.bindings.currentDialogState=this.bindings.conversationDO.currentDialogState,this.bindings.executedStates=ko.unwrap(this.bindings.conversationDO.executedStates)?this.bindings.conversationDO.executedStates:ko.observable([ko.unwrap(this.bindings.conversationDO.currentDialogState)]),this.bindings.stateDiagramData(new oj.JsonDiagramDataSource({nodes:this.bindings.conversationDO.stateDiagramNodes(),links:this.bindings.conversationDO.stateDiagramLinks()}));var e=[{name:"",items:[]}],i=[],n=new oj.ColorAttributeGroupHandler;_.each(this.bindings.conversationDO.intentMatches(),function(t,s){e[0].items.push({y:100*t.score,z:100,label:100*t.score,color:n.getValue(s)}),i.push(t.intent)}),this.bindings.intentsDVSeriesSource(e),this.bindings.intentsDVGroupSource(i);var s=[{name:"",items:[]}],o=[];_.each(this.bindings.conversationDO.qnaDO.qnaCategoryMatchList(),function(t,e){s[0].items.push({y:t.count,z:100,label:t.count,color:n.getValue(e)}),o.push(t.category.name)}),this.bindings.qnaCategoriesDVSeriesSource(s),this.bindings.qnaCategoriesDVGroupSource(o),this.bindings.qnaSearchConfigurationTreeDS(new oj.JsonTreeDataSource(this.bindings.conversationDO.qnaDO.qnaResultsSearchConfiguration())),this.bindings.qnaQueryTreeDS(new oj.JsonTreeDataSource(this.bindings.conversationDO.qnaDO.qnaResultsQuery())),this.bindings.qnaAnswerMatchListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.qnaDO.qnaAnswerMatchList())),this.bindings.qnaCategoryMatchListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.qnaDO.qnaCategoryMatchList())),this.bindings.renderResults(!0)},_filterKeyAndValue:function(t,e,i){if(t&&e)for(var n in t)t.hasOwnProperty(n)&&("string"==typeof n&&n.toLowerCase().search(e.toLowerCase())>-1?i=this._appendToResult(n,t[n],i):"object"==typeof t[n]?this._filterKeyAndValue(t[n],e,i):t[n]&&"string"==typeof t[n]&&t[n].toLowerCase().search(e.toLowerCase())>-1&&(i=this._appendToResult(n,t[n],i)));return i},_appendToResult:function(t,e,i){var n={};return n[t]=e,i.push(n),i},bindView:function(t){this._super(t)},_resetResults:function(){this.bindings.resetResults(!1)},_layoutChildren:function(t,e){for(var i=20,n=0,s=0,o=e.length,a=0;a<o;a++){var r=e[a];r.getChildNodes()&&this._layoutChildren(t,r.getChildNodes());var l=r.getContentBounds();r.setPosition({x:n-l.x-.5*l.w,y:s}),this._positionLabel(r),n+=l.h+i}},_layoutParent:function(t,e){for(var i=20,n=0,s=0,o=e.length,a=0;a<o;a++){var r=e[a];r.getChildNodes()&&this._layoutChildren(t,r.getChildNodes());var l=r.getContentBounds();r.setPosition({x:n-l.x-.5*l.w,y:s}),this._positionLabel(r),s+=l.h+i}},_positionLabel:function(t){var e=t.getContentBounds(),i=t.getPosition(),n=t.getLabelBounds(),s=0;if(n){s=t.isDisclosed()?e.y+i.y+.5*(20-n.h):e.y+i.y+.5*(e.h-n.h);var o=e.x+i.x+.5*e.w;t.setLabelPosition({x:o,y:s}),t.setLabelHalign("center")}},_createLink:function(t,e){var i=e.getStartId(),n=e.getEndId(),s=t.getNodeById(i),o=t.getNodeById(n),a=t.getCommonContainer(i,n),r=s.getRelativePosition(a),l=o.getRelativePosition(a);e.setCoordinateSpace(a);var d,c,u,h,b=s.getBounds(),g=o.getBounds(),f=.5*(r.x+b.w),p=.5*(l.x+g.w);if(Math.abs(f-p)<10){var m=.5*(r.y+b.h),v=.5*(l.y+g.h);d=r.x+.5*b.w,u=l.x+.5*g.w,m<v?(c=r.y+b.h+e.getStartConnectorOffset(),h=l.y-e.getEndConnectorOffset()):(c=r.y-e.getEndConnectorOffset(),h=l.y+g.h+e.getStartConnectorOffset()),e.setPoints(this._createVerticalLinkPath(d,c,u,h))}else f<p?(d=r.x+b.x+b.w+e.getStartConnectorOffset(),u=l.x-e.getEndConnectorOffset()):(d=r.x-e.getStartConnectorOffset(),u=l.x+g.x+g.w+e.getEndConnectorOffset()),c=r.y+b.y+.5*b.h,h=l.y+g.y+.5*g.h,e.setPoints(this._createSideLinkPath(d,c,u,h));var _=e.getLabelBounds();if(_){var y=d,w=c-_.h;e.setLabelPosition({x:y,y:w})}},_createSideLinkPath:function(t,e,i,n){var s=["M",t,e],o=this._random(.2,.8),a=t+o*(i-t),r=e+o*(n-e),l=a,d=e,c=a,u=n;return s.push("Q"),s.push(l),s.push(d),s.push(a),s.push(r),s.push("Q"),s.push(c),s.push(u),s.push(i),s.push(n),s},_createVerticalLinkPath:function(t,e,i,n){var s=["M",t,e];return s.push("L"),s.push(i),s.push(n),s},_random:function(t,e){var i=e-t;return t+Math.random()*i}});return r}),define("bots.package.bottester/bot.replay.conversation.file",["module","bots.package.shell/validators","bots.package.view/dialog","bots.i18n"],function(t,e,i,n){var s,o=i.extend({module:t,name:"BotReplayConversationFileDialog"},{__static__:{CHUNK_SIZE:102400},config:{type:"ojDialog"},bindings:{botsValidators:e,fileInfo:{func:ko.observable,args:[{}]},fileError:{func:ko.observable,args:[""]},fileStatus:{func:ko.observable,args:["none"]},fileObjects:[],limits:{MAX_FILE_SIZE_MB:20,MAX_LINES:50001},loadBotFile:function(t){t.target.files&&t.target.files.length>0&&this.handleLoadedFile(t.target.files[0])},testBotFile:function(t){this.close();var e={data:{conversation:_.clone(this.bindings.fileObjects)}};this.notify({REPLAY_CONVERSATION:e},{actionSpinner:!1})},closeDialog:function(){},openDialog:function(){this.bindings.fileStatus("none"),$("#botConversationReplayFileUploadDropzone").removeClass("error"),this.bindings.fileInfo({}),this.bindings.fileError(""),this.bindings.fileObjects=[],setTimeout(function(){$("#botConversationReplayFileUploadLink").blur()},50)},clickUpload:function(){var t=$("#botConversationReplayFileUploadFile");t.length>0&&(t[0].value=null),$("#botConversationReplayFileUploadFile").trigger("click")}},fileReference:null,setupEventHandlers:function(){var t=document.getElementById("botConversationReplayFileUploadDropzone");t.addEventListener("drop",this.handleFileSelect,!1),$("#bottester-conversation-replay-file-dialog").on("ojclose",this.bindings.closeDialog),$("#bottester-conversation-replay-file-dialog").on("ojopen",this.bindings.openDialog),$("#botConversationReplayFileUploadFile").on("change",this.bindings.loadBotFile)},bindView:function(t){this._super(t),this.setupEventHandlers()},rebindView:function(t){this._super(t),this.bindView(t)},showFileError:function(t){this.bindings.fileStatus("error"),$("#botConversationReplayFileUploadDropzone").addClass("error"),this.bindings.fileError(t)},handleParsing:function(t){var e=this;try{if(e.bindings.fileObjects=e.validateFileObjects(JSON.parse(t)),!e.bindings.fileObjects.length)return;e.bindings.fileObjects.length<e.bindings.limits.MAX_LINES?e.bindings.fileObjects.length>0?(e.bindings.fileStatus("ready"),$("#botConversationReplayFileUploadDropzone").removeClass("error")):this.showFileError(n.translate("tester.bot.batch.dialog.error.missingRows")):this.showFileError(n.translate("tester.bot.batch.dialog.error.longFile"))}catch(t){this.showFileError(n.translate("tester.bot.batch.dialog.error.unknown"))}},processTestFile:function(){var t=new FileReader,e=new TextDecoder,i=this;t.onload=function(t){return function(t){i.handleParsing(e.decode(t.target.result))}}(this.fileReference),t.onerror=function(){i.showFileError(t.error)},t.readAsArrayBuffer(this.fileReference)},processBigTestFile:function(){var t=this;this.readLines(this.fileReference,this.bindings.limits.MAX_LINES+1,function(e,i){if(e)t.showFileError(e);else if(i&&i.length>=t.bindings.limits.MAX_LINES+1)t.showFileError(n.translate("tester.bot.batch.dialog.error.longFile"));else{var s=i.join("\n");t.handleParsing(s)}})},readLines:function(t,e,i){function n(){if(a===e)return void i(null,l);if(0!==o&&o>=t.size)return r.trim().length>0&&l.push(r),void i(null,l);var n=t.slice(o,o+c.__static__.CHUNK_SIZE);d.readAsArrayBuffer(n)}var s=new TextDecoder,o=0,a=0,r="",l=[],d=new FileReader,c=this;d.onload=function(){r+=s.decode(d.result,{stream:!0});var t=r.split("\n");r=t.pop(),a+=t.length,a>e&&(t.length-=a-e,a=e);for(var i=0;i<t.length;++i)t[i].trim().length>0&&l.push(t[i]);o+=c.__static__.CHUNK_SIZE,n()},d.onerror=function(){i(d.error)},n()},handleLoadedFile:function(t){this.bindings.isLoading(!0),this.bindings.fileStatus("loading");var e={name:t.name,type:t.type||"n/a",size:t.size,lastModified:t.lastModifiedDate};this.bindings.fileInfo(e),this.fileReference=t,e.size<this.__static__.CHUNK_SIZE?this.processTestFile():e.size<1024*this.bindings.limits.MAX_FILE_SIZE_MB*1024?this.processBigTestFile():this.showFileError(n.translate("tester.bot.batch.dialog.error.largeFile"))},handleFileSelect:function(t){t.stopPropagation(),t.preventDefault();var e=t.dataTransfer.files;e.length>=1&&this.handleLoadedFile(e[0])},handleDragOver:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},BotReplayConversationFileDialog:function(t){this._super(t)},resetFields:function(t){this._super(t)},open:function(t,e){return this._super(),s=$.Deferred()},validateFileObjects:function(t){return 0===t.length?(this.showFileError(n.translate("tester.bot.batch.dialog.error.missingRows")),[]):_.contains(_.keys(t[0]),"id","type","text","party")?t:(this.showFileError(n.translate("tester.bot.batch.dialog.error.missingColumns")),[])}});return o}),define("bots.package.bottester/view.main",["module","suite.package.shell/shell","bots.config","bots.i18n","bots.package.view/dialog","bots.package.shell/context.header","bots.package.bottester/facade","bots.package.bottester/view.bot","bots.package.bottester/view.details","bots.package.bottester/bot.replay.conversation.file"],function(t,e,i,n,s,o,a,r,l,d){var c=s.extend({module:t,name:"BotTesterMainView"},{deps:{i18n:n,facade:a,botsConfig:i},heights:{client:0,brandBar:0,contextHeader:0,testerBar:0,testerTab:0,testerBottom:0,testerBottomQnA:0,batchHeight:0},previousClosedTop:void 0,previousOpenTop:void 0,bindings:{i18n:n,currentBot:i.currentBot,resetTest:function(){this.bindings.FullPageTesterView.bindings.resetTest(),this.bindings.DetailsView.bindings.resetResults()},saveTest:function(){this.notify({DOWNLOAD_CONVERSATION:{}})},uploadAndReplayConversation:function(){this.notify({REPLAY_CONVERSATION:{}})},testBotName:{func:ko.observable,args:[]},replayFile:function(t,e){this.bindings.BotReplayConversationFileDialog.open()},menuItemSelect:function(t,e){"replay"===e.item[0].id?this.bindings.replayFile():"download"===e.item[0].id&&this.bindings.saveTest()},FullPageTesterView:{func:function(){return new r({isSubView:!0,baseElement:"#bottester-pane",contentElement:"#bottester-pane",baseTemplate:"bots/bottester/bot/bot-pane",baseTemplateElement:"#bottester",attachBaseElement:"#bottester-attach-dialog",baseTemplateData:i.templateData})}},DetailsView:{func:function(){return new l({isSubView:!0,baseElement:"#bottester-details >",contentElement:"#bottester-details-view",baseTemplate:"bots/bottester/bot/details",baseTemplateElement:"#bottester-details",testerType:"bottester"})}}},BotTesterMainView:function(t){this._super(t)},loadModule:function(t){return!!this._super(t)&&void(this.options=t.options)},open:function(){this._super()},initModule:function(t){this._super(t)&&this.listen({RESET_SYSTEM_CHANNEL_SESSIONS:this.bindings.resetTest,BOT_SELECT:this.botSwitchListener})},bindView:function(t){this._super(t),this.bindings.FullPageTesterView.bindView()},renderView:function(t){this._super(t),this.bindings.testBotName(this.config.parentView.bindings.bot().displayName()||this.config.parentView.bindings.bot().name()),this.bindings.FullPageTesterView.renderView(t),this.bindings.DetailsView.renderView(t)},botSwitchListener:function(t){t&&t.selectedBot&&this.bindings.testBotName(t.selectedBot.displayName||t.selectedBot.name)}});return c}),function(){utils.loadStylesheet("bots-bottester-css","resources/css/bottester.min.css"),require(["bots.libraries.dvt","bots.templates/bottester","bots.package.bottester/model","bots.package.bottester/dataobject","bots.package.bottester/facade","bots.package.bottester/view.main","bots.package.bottester/view.bot","bots.package.bottester/view.details"]),define("bots.package.bottester/package.main",["ojs/ojtable","ojs/ojchart","ojs/ojdiagram","ojs/ojjsondiagramdatasource"])}(),define("bots.package.bottester",["bots.package.bottester/package"],function(t){return t}),define("bots.package.bottester/package",function(){}),function(t){function e(t,e){return e=e.shiftBlocks(a),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:i})}function i(t,e){return e=e.shiftBlocks(a),t.f(e.get(["tester-type"],!1),e,"h").w("-attach-dialog")}function n(t,e){return e=e.shiftBlocks(a),t.h("i18n",e,{},{key:"datester.bot.attach.dialog.title"},"h")}function s(t,e){return e=e.shiftBlocks(a),t.w('<div class="tester-attach-dialog"><div><label for=\'').f(e.get(["tester-type"],!1),e,"h").w("-attachment-title'>").h("i18n",e,{},{key:"tester.bot.attach.dialog.titleLabel"},"h").w('</label><input id="').f(e.get(["tester-type"],!1),e,"h").w("-attachment-title\"data-bind=\"ojComponent: {component: 'ojInputText',value: attachmentTitle}\"><label for='").f(e.get(["tester-type"],!1),e,"h").w("-attachment-type'>").h("i18n",e,{},{key:"tester.bot.attach.dialog.typeLabel"},"h").w("</label><select id='").f(e.get(["tester-type"],!1),e,"h").w("-attachment-type'data-bind=\"ojComponent: {component: 'ojSelect',options: attachmentTypes,value: attachmentType}\"></select><label for='").f(e.get(["tester-type"],!1),e,"h").w("-attachment-url'>").h("i18n",e,{},{key:"tester.bot.attach.dialog.urlLabel"},"h").w('</label><textarea id="').f(e.get(["tester-type"],!1),e,"h").w('-attachment-url" rows="5"data-bind="ojComponent: {component: \'ojTextArea\',value: attachmentUrl,validators: [isAttachmentUrlValidator]}"></textarea></div></div>')}function o(t,e){return e=e.shiftBlocks(a),t.w('<button class="right green-button action-button" default="true"data-bind="ojComponent: { component: \'ojButton\',label: \'').h("i18n",e,{},{key:"tester.bot.attach.dialog.send",filter:"j"},"h").w("'},click: addAttachment\"/>")}t.register("bots/datester/bot/attach-dialog",e);var a={titleLabel:n,bodyHtml:s,footerHtml:o};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="#').f(e.get(["tester-type"],!1),e,"h").w('-initial" class="datester-initial" data-bind="if: jsonResults().length===0 && !isTesting() && !isPolling && !itemToAdd() && userPreferences().botInitialUA"><div class="#').f(e.get(["tester-type"],!1),e,"h").w('-initial-text">').h("i18n",e,{},{key:"datester.initial.bot",filter:"h"},"h").w("</div><span data-bind=\"inlinesvg: {width: 144, height: 169, project: 'bots', basename: 'ua_arrow_1'}\"></span></div>")}return t.register("bots/datester/bot/bot-initial",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="datester-pane" class="oj-flex bots-helper-max-width"><div id="datester-section" class="oj-flex-item bots-helper-max-width">').p("bots/datester/bot/bot-result",e,e,{"tester-type":"datester"}).p("bots/datester/bot/bot-initial",e,e,{"tester-type":"datester"}).p("bots/datester/bottom",e,e,{"tester-type":"datester"}).w("</div><!-- ko nobind -->").p("bots/datester/bot/attach-dialog",e,e,{"tester-type":"datester"}).p("bots/datester/bot/details/view-json-popup",e,e,{"tester-type":"datester"}).w("<!-- /ko --></div>")}return t.register("bots/datester/bot/bot-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="oj-flex" id="').f(e.get(["tester-type"],!1),e,"h").w('-form-container"><div data-bind="if: $data.uiConversation && $data.uiConversation().length>0" class="bot-section oj-flex-item"><!-- ko foreach: uiConversation -->').p("bots/datester/conversation/item",e,e,{"tester-type":"datester"}).w("<!-- /ko --><!-- ko if: isTesting -->").p("bots/datester/conversation/animation",e,e,{"tester-type":"datester"}).w("<!-- /ko --></div></div>")}return t.register("bots/datester/bot/bot-result",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.w('<div id="datester-details-view" class="oj-flex bots-container bots-helper-overflow-auto bots-helper-max-width"><!-- ko if: ko.unwrap(renderResults) --><div id="datester-details-tabs" class="bots-helper-max-width datester-details-tabs"data-bind="ojComponent:{ component: \'ojTabs\',edge: \'top\',selected: 0,rootAttributes: { class: \'bots-custom-horiztabs bots-panel-onlytopborder bots-tab-selection-bottom-bar\'} }"><ul><li><span>').h("i18n",e,{},{key:"datester.details.conversation.label"},"h").w("</span></li><li><span>").h("i18n",e,{},{key:"datester.details.routing.title"},"h").w("</span></li><li><span>").h("i18n",e,{},{key:"datester.details.json"},"h").w('</span></li></ul><div id="datester-details-conversation-tab" class="bots-no-horiz-scroll datester-details-tab">').p("bots/datester/bot/details/conversation-pane",e,e,{"tester-type":"datester-details-conversation"}).w('</div><div id="datester-details-intent-tab" class="bots-no-horiz-scroll datester-details-tab">').p("bots/datester/bot/details/intent-pane",e,e,{"tester-type":"datester-details-intent-qna"}).w('</div><div id="datester-details-json-tab" class="bots-no-horiz-scroll datester-details-tab">').p("bots/datester/bot/details/json-pane",e,e,{"tester-type":"datester-details-json"}).w("</div></div><!-- /ko --><!-- ko ifnot: ko.unwrap($data.renderResults) -->").p("bots/common/no_content",e,e,{noContentId:"datesterDetailsNoContent",noContentAddCss:"bots-helper-max-width bots-helper-margin-top-20"}).w("<!-- /ko --></div>")}function i(t,e){return e=e.shiftBlocks(o),t.w("<!-- ko inlinesvg: { width: 192, height: 192, project: 'bots', basename: 'qual_chat_192_mono', ariaLabel: $root.i18n.translate('tester.details.nocontent.title') } --><!-- /ko -->")}function n(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"datester.details.nocontent.title"},"h")}function s(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"datester.details.nocontent.desc"},"h")}t.register("bots/datester/bot/details",e);var o={noContentImgSection:i,noContentTitle:n,noContentDesc:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko if: $data.call && $data.call.length --><h3 class="datester-details-section"><!-- ko ifnot: $data.call[0].isGlobal -->').h("i18n",e,{},{key:"datester.details.actions.callActionTitle"},"h").w("<!-- /ko --><!-- ko if: $data.call[0].isGlobal -->").h("i18n",e,{},{key:"datester.details.actions.globalCallActionTitle"},"h").w('<!-- /ko --></h3><div class="white-background"><div class="oj-flex bots-helper-max-width datester-details-conversation-action"><div class="oj-flex-item oj-sm-6"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.actions.label"},"h").w('</span></div><div class="oj-flex-item oj-sm-6"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.actions.phoneNumber"},"h").w('</span></div></div><!-- ko foreach: $data.call --><div class="oj-flex bots-helper-max-width  datester-details-conversation-action"><div class="oj-flex-item oj-sm-6"><div class="datester-details-conversation-action-value bots-helper-ellipsis" data-bind="text: label"></div></div><div class="oj-flex-item oj-sm-6"><div class="datester-details-conversation-action-value bots-helper-ellipsis" data-bind="text: $data.phoneNumber"></div></div></div><!-- /ko --></div><!-- /ko -->')}return t.register("bots/datester/bot/details/actions-call",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko if: $data.postback && $data.postback.length --><h3 class="datester-details-section"><!-- ko ifnot: $data.postback[0].isGlobal -->').h("i18n",e,{},{key:"datester.details.actions.postbackActionTitle"},"h").w("<!-- /ko --><!-- ko if: $data.postback[0].isGlobal -->").h("i18n",e,{},{key:"datester.details.actions.globalPostbackActionTitle"},"h").w('<!-- /ko --></h3><div class="white-background"><div class="oj-flex bots-helper-max-width datester-details-conversation-action"><div class="oj-flex-item oj-sm-4"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.actions.label"},"h").w('</span></div><div class="oj-flex-item oj-sm-3"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.actions.action"},"h").w('</span></div><div class="oj-flex-item oj-sm-5"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.actions.variables"},"h").w('</span></div></div><!-- ko foreach: $data.postback --><div class="oj-flex bots-helper-max-width  datester-details-conversation-action"><div class="oj-flex-item oj-sm-4"><div class="datester-details-conversation-action-value bots-helper-ellipsis" data-bind="text: label"></div></div><div class="oj-flex-item oj-sm-3"><div class="datester-details-conversation-action-value bots-helper-ellipsis" data-bind="text: $data[$data.type].action"></div></div><div class="oj-flex-item oj-sm-5"><!-- ko foreachprop: $data[$data.type].variables --><div class="datester-details-conversation-action-value bots-helper-ellipsis" data-bind="text: $data.key + \': \' + $data.value"></div><!-- /ko --></div></div><!-- /ko --></div><!-- /ko -->')}return t.register("bots/datester/bot/details/actions-postback",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko if: $data.url && $data.url.length --><h3 class="datester-details-section"><!-- ko ifnot: $data.url[0].isGlobal -->').h("i18n",e,{},{key:"datester.details.actions.urlActionTitle"},"h").w("<!-- /ko --><!-- ko if: $data.url[0].isGlobal -->").h("i18n",e,{},{key:"datester.details.actions.globalUrlActionTitle"},"h").w('<!-- /ko --></h3><div class="white-background"><div class="oj-flex bots-helper-max-width datester-details-conversation-action"><div class="oj-flex-item oj-sm-4"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.actions.label"},"h").w('</span></div><div class="oj-flex-item oj-sm-8"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.actions.url"},"h").w('</span></div></div><!-- ko foreach: $data.url --><div class="oj-flex bots-helper-max-width  datester-details-conversation-action"><div class="oj-flex-item oj-sm-4"><div class="datester-details-conversation-action-value bots-helper-ellipsis" data-bind="text: label"></div></div><div class="oj-flex-item oj-sm-8"><div class="datester-details-conversation-action-value bots-helper-ellipsis" data-bind="text: $data.url"></div></div></div><!-- /ko --></div><!-- /ko -->')}return t.register("bots/datester/bot/details/actions-url",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko if: currentDialogState || executedStates --><h3 class="datester-details-section">').h("i18n",e,{},{key:"datester.details.dialog-state"},"h").w("</h3>").p("bots/datester/bot/details/state-pane",e,e,{}).w("<!-- /ko --><!-- ko with: conversationDO.actions() -->").p("bots/datester/bot/details/actions-postback",e,e,{}).p("bots/datester/bot/details/actions-call",e,e,{}).p("bots/datester/bot/details/actions-url",e,e,{}).w("<!-- /ko --><!-- ko with: conversationDO.globalActions() -->").p("bots/datester/bot/details/actions-postback",e,e,{}).p("bots/datester/bot/details/actions-call",e,e,{}).p("bots/datester/bot/details/actions-url",e,e,{}).w('<!-- /ko --><!-- ko if: conversationDO.variables && conversationDO.variables().length --><div class="oj-flex datester-details-section"><div class="oj-flex-item"><h3 class="grey-background">').h("i18n",e,{},{key:"datester.details.variables.title"},"h").w('</h3></div><div class="oj-flex-item"><!-- ko ifnot: viewingAllVariables --><a href="#" data-bind="click: viewAllVariables" class="bots-helper-pointer right bots-helper-padding-top-10">').h("i18n",e,{},{key:"datester.details.variables.viewAll"},"h").w('</a><!-- /ko --><!-- ko if: viewingAllVariables --><a href="#" data-bind="click: viewLessVariables" class="bots-helper-pointer right bots-helper-padding-top-10">').h("i18n",e,{},{key:"datester.details.variables.viewLess"},"h").w('</a><!-- /ko --></div></div><div class="bots-helper-padding-10 white-background bots-helper-ellipsis bots-helper-max-width"data-bind="ojComponent:{component: \'ojTree\',data: variablesTreeDS,icons: false}"></div><!-- /ko -->')}return t.register("bots/datester/bot/details/conversation-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko if: $data.type === \'pipeline.routing.router.routeUserMessage\' && $data.payload --><!-- ko if: $data.payload.nluSentenceAnnotations && $data.payload.nluSentenceAnnotations.nluSentenceAnnotations --><!-- ko foreach: $data.payload.nluSentenceAnnotations.nluSentenceAnnotations --><!-- ko if: sentence --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.sentence\', params: [sentence]}"></div><!-- /ko --><!-- ko if: reformedSentence --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.reformedSentence\', params: [reformedSentence]}"></div><!-- /ko --><!-- /ko --><!-- /ko --><!-- ko if: $data.payload.originalNluSentenceAnnotations && $data.payload.originalNluSentenceAnnotations.nluSentenceAnnotations --><!-- ko foreach: $data.payload.originalNluSentenceAnnotations.nluSentenceAnnotations --><!-- ko if: sentence --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.sentence\', params: [sentence]}"></div><!-- /ko --><!-- ko if: reformedSentence --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.reformedSentence\', params: [reformedSentence]}"></div><!-- /ko --><!-- /ko --><!-- /ko --><!-- /ko --><!-- ko if: $data.type === \'pipeline.routing.action.routingResponse\'--><!-- ko with: $data.payload.routingActionResponse --><!-- ko if: $data.hasOwnProperty(\'finalDecision\') --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.finalDecision\', params: [finalDecision]}"></div><!-- /ko --><!-- ko if: routingAction --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.routingAction\', params: [routingAction]}"></div><!-- /ko --><!-- ko if: $data.hasOwnProperty(\'reroute\') --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.reroute\', params: [reroute]}"></div><!-- /ko --><!-- /ko --><!-- /ko --><!-- ko if: $data.type === \'pipeline.routing.intent.call\'--><!-- ko with: $data.payload --><!-- ko if: intentResult --><!-- ko if: intentResult.botName --><!-- ko if: model !== \'SystemIntents\' && intentResult.appId !== $root.botsConfig.currentBot.id --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.skillName\', params: [intentResult.botName]}"></div><!-- /ko --><!-- ko ifnot: model !== \'SystemIntents\' && intentResult.appId !== $root.botsConfig.currentBot.id --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.digitalAssistantName\', params: [intentResult.botName]}"></div><!-- /ko --><!-- /ko --><!-- ko if: intentResult.intentMatches.summary --><!-- ko foreach: intentResult.intentMatches.summary --><div class="oj-flex datester-details-routing-action bots-helper-padding-left-20"><!-- ko if: intent  && $parent.intentResult.appId !== $root.botsConfig.currentBot.id--><div class="oj-flex-item oj-sm-8" data-bind="i18n: {key: \'tester.details.routing.intentName\', params: [intent]}, css: $root.computeColor($parent, $data)"></div><!-- /ko --><!-- ko if: intent  && $parent.intentResult.appId === $root.botsConfig.currentBot.id--><div class="oj-flex-item oj-sm-8" data-bind="i18n: {key: \'tester.details.routing.skillName\', params: [intent]}, css: $root.computeColor($parent, $data)"></div><!-- /ko --><!-- ko if: $data.hasOwnProperty(\'score\') --><div class="oj-flex-item oj-sm-4" data-bind="i18n: {key: \'tester.details.routing.score\', params: [$root.limitToTwoDecimalPlacesPercentageValue(score)]}, css: $root.computeColor($parent, $data)"></div><!-- /ko --></div><!-- /ko --><!-- ko ifnot: intentResult.intentMatches.summary.length --><div class="datester-details-routing-action no-intents-matched" data-bind="i18n: {key: \'tester.details.routing.noMatch\'}"></div><!-- /ko --><!-- /ko --><!-- /ko --><!-- ko if: $data.hasOwnProperty(\'confidenceThreshold\') --><div class="datester-details-routing-action additional-info" data-bind="i18n: {key: \'tester.details.routing.confidenceThreshold\', params: [$root.limitToTwoDecimalPlacesPercentageValue(confidenceThreshold)]}"></div><!-- /ko --><!-- ko if: $data.hasOwnProperty(\'confidenceWinMargin\') --><div class="datester-details-routing-action additional-info" data-bind="i18n: {key: \'tester.details.routing.confidenceWinMargin\', params: [$root.limitToTwoDecimalPlacesPercentageValue(confidenceWinMargin)]}"></div><!-- /ko --><!-- ko if:$data.hasOwnProperty(\'considerAllConfidenceThreshold\') --><div class="datester-details-routing-action additional-info" data-bind="i18n: {key: \'tester.details.routing.considerAllConfidenceThreshold\', params: [$root.limitToTwoDecimalPlacesPercentageValue(considerAllConfidenceThreshold)]}"></div><!-- /ko --><!-- /ko --><!-- /ko --><!-- ko if: $data.type === \'pipeline.routing.contextAwareStart\'--><!-- ko with: $data.payload --><!-- ko if: $data.hasOwnProperty(\'conversationState\') --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.conversationState\', params: [conversationState]}"></div><!-- /ko --><!-- /ko --><!-- /ko --><!-- ko if: $data.type.indexOf(\'pipeline.routing.rule\') === 0 --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.routingRuleTriggered\'}"></div><!-- /ko --><!-- ko if: $data.type === \'pipeline.routing.routerResponse\' && $data.payload &&  $data.payload.routerResponse--><!-- ko with: $data.payload.routerResponse --><!-- ko if: $data.hasOwnProperty(\'handledByRoutingAction\') && $data.handledByRoutingAction --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.handledByRoutingAction\'}"></div><!-- /ko --><!-- ko if: $data.hasOwnProperty(\'newFlows\') && $data.newFlows && $data.newFlows.length --><!-- ko foreach: $data.newFlows --><!-- ko if: $data.hasOwnProperty(\'botInvocationName\') && $data.botInvocationName && $data.hasOwnProperty(\'botLevelConfidence\')--><div class="oj-flex datester-details-routing-action"><div class="oj-flex-item oj-sm-8" data-bind="i18n: {key: \'tester.details.routing.skillName\', params: [botInvocationName]}"></div><div class="oj-flex-item oj-sm-4" data-bind="i18n: {key: \'tester.details.routing.score\', params: [$root.limitToTwoDecimalPlacesPercentageValue(botLevelConfidence)]}"></div></div><!-- /ko --><div class="oj-flex datester-details-routing-action"><div class="oj-flex-item oj-sm-8" data-bind="i18n: {key: \'tester.details.routing.intentName\', params: [flowConfig.flowName]}"></div></div><!-- /ko --><!-- /ko --><!-- /ko --><!-- /ko --><!-- ko if: ($data.type === \'pipeline.mainContextCreated\' || $data.type === \'pipeline.childContextCreated\') && $data.payload--><!-- ko with: $data.payload --><!-- ko if: contextId --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.contextId\', params: [contextId]}"></div><!-- /ko --><!-- ko if: flowName --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.flowName\', params: [flowName]}"></div><!-- /ko --><!-- /ko --><!-- /ko --><!-- ko if: $data.type === \'pipeline.routing.router.routeDialogResponse && $data.payload && $data.payload.nluContexts\'--><!-- ko foreach: $data.payload.nluContexts --><!-- ko if: sentence --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.sentence\', params: [sentence]}"></div><!-- /ko --><!-- ko if: reformedSentence --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.reformedSentence\', params: [reformedSentence]}"></div><!-- /ko --><!-- /ko --><!-- /ko -->');
}return t.register("bots/datester/bot/details/debug-entry-details",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko if: conversationDO.intentMatches() && conversationDO.intentMatches().length --><h3 class="grey-background bots-helper-padding-5 bots-helper-margin-top-10">').h("i18n",e,{},{key:"datester.intentMatches.summary",filter:"j"},"h").w("</h3><div id=\"intentMatchesBarChart\" class=\"white-background bots-helper-max-width tester-chart\" data-bind=\"ojComponent: {component: 'ojChart',type: 'bar',orientation: 'horizontal',stack: 'off',series: intentsDVSeriesSource,groups: intentsDVGroupSource,animationOnDisplay: 'auto',animationOnDataChange: 'auto',styleDefaults: {barGapRatio: 0.25, seriesTooltipType: 'none'},yAxis: {title: '").h("i18n",e,{},{key:"datester.intentMatches.intentScorePercentage",filter:"j"},"h").w('\'},}"></div><!-- /ko --><!-- ko if: conversationDO.entityMatches() && conversationDO.entityMatches().length --><h3 class="grey-background bots-helper-padding-5 bots-helper-margin-top-10">').h("i18n",e,{},{key:"datester.entityMatches.summary"},"h").w('</h3><ul class="white-background" id="datester-details-entity-list" aria-label="').h("i18n",e,{},{key:"datester.entityMatches.aria-label",filter:"h"},"h").w('"data-bind="ojComponent: {component: \'ojListView\', data: entityListDS, item: {template: \'entity_template\'}, selectionMode: \'single\'}"></ul><!-- /ko --><script type="text/html" id="entity_template"><li data-bind="attr: {id: $data[\'name\']}"><div class="oj-flex"><div class="oj-sm-6 oj-flex-item"><h4 class="header" data-bind="text: name"></h4></div><div class="oj-sm-6 oj-flex-item"><h5 class="data" data-bind="i18n: {key: \'tester.entityMatches.entity-value\', params: [value]}"></h5></div></div></li></script><!-- ko if: conversationDO.qnaDO -->').p("bots/datester/bot/details/qna-pane",e,e,{}).w("<!-- /ko -->").p("bots/datester/bot/details/routing-summary",e,e,{})}return t.register("bots/datester/bot/details/intent-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["tester-type"],!1),e,"h").w('-pane"><div class="oj-flex"><div class="oj-flex-item oj-sm-6"><a id=\'').f(e.get(["tester-type"],!1),e,"h").w("-saveFileLink' style=\"float:right; display: none\" data-bind=\"attr: { href: downloadFileURL(), download: downloadFileName() }\"><span data-bind=\"inlinesvg: {width: 16, height: 16, project: 'bots', basename: 'func_download_16'}, text: '").h("i18n",e,{},{key:"datester.details.downloadJson",filter:"j"},"h").w('\'"></span></a><button id="').f(e.get(["tester-type"],!1),e,"h").w("-saveFileButton\"data-bind=\"ojComponent: {component:'ojButton',chroming: 'half',label: '").h("i18n",e,{},{key:"datester.details.downloadJson",filter:"j"},"h").w('\',}, click: downloadFile"></button></div><div class="oj-flex-item oj-sm-6"><input id="').f(e.get(["tester-type"],!1),e,"h").w("-bundles-key-language-filter\"data-bind=\"ojComponent: { component: 'ojInputText',value: jsonFilter,rootAttributes: { class: 'bots-helper-max-width' },optionChange: handleKeyUpJsonFilter,placeholder: '").h("i18n",e,{},{key:"datester.details.searchJson",filter:"j"},"h").w('\'}"/></div></div><div class="oj-flex"><div class="oj-flex-item"><pre id="datester-details-json-pre" class="jsonhl"><code class="arduino-light hljs json" data-bind="highlight: JSON.stringify($data.json(), null, 2)"></code></pre></div></div></div>')}return t.register("bots/datester/bot/details/json-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko if: conversationDO.qnaDO.qnaAnswerMatchList() && conversationDO.qnaDO.qnaAnswerMatchList().length --><h3 class="grey-background bots-helper-padding-5 bots-helper-margin-top-10">').h("i18n",e,{},{key:"datester.details.qna.qnaAnswers",filter:"j"},"h").w('</h3><div class="white-background"><div class="oj-flex bots-helper-max-width datester-details-conversation-action"><div class="oj-flex-item oj-sm-4"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"tester.details.routing.rank"},"h").w('</span></div><div class="oj-flex-item oj-sm-8"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"tester.details.routing.qna"},"h").w('</span></div></div><!-- ko foreach: conversationDO.qnaDO.qnaAnswerMatchList() --><div class="oj-flex bots-helper-max-width  datester-details-conversation-action"><div class="oj-flex-item oj-sm-4"><div class="datester-details-routing-action" data-bind="text: $index() + 1"></div></div><div class="oj-flex-item oj-sm-8"><div class="datester-details-routing-action" data-bind="text: title"></div></div></div><!-- /ko --></div><!-- /ko -->')}return t.register("bots/datester/bot/details/qna-answer-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko if: conversationDO.qnaDO.qnaCategoryMatchList() && conversationDO.qnaDO.qnaCategoryMatchList().length --><h3 class="grey-background bots-helper-padding-5 bots-helper-margin-top-10">').h("i18n",e,{},{key:"datester.details.qna.qnaCategories",filter:"j"},"h").w("</h3><div id=\"qnaCategoriesBarChart\" class=\"white-background bots-helper-max-width tester-chart\" data-bind=\"ojComponent: {component: 'ojChart',type: 'bar',orientation: 'horizontal',stack: 'off',series: qnaCategoriesDVSeriesSource,groups: qnaCategoriesDVGroupSource,animationOnDisplay: 'auto',animationOnDataChange: 'auto',styleDefaults: {barGapRatio: 0.25, seriesTooltipType: 'none'},yAxis: {title: '").h("i18n",e,{},{key:"datester.details.qna.qnaCategoriesCount",filter:"j"},"h").w("'},}\"></div><!-- /ko -->")}return t.register("bots/datester/bot/details/qna-category-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.p("bots/datester/bot/details/qna-answer-pane",e,e,{}).p("bots/datester/bot/details/qna-category-pane",e,e,{}).w('<!-- ko if: conversationDO.qnaDO.qnaResultsQuery() && conversationDO.qnaDO.qnaResultsQuery().length --><h3 class="grey-background bots-helper-padding-5 bots-helper-margin-top-10">').h("i18n",e,{},{key:"datester.details.qna.qnaQuery"},"h").w('</h3><div id="datester-details-qna-results-pane" class="oj-flex white-background"><div data-bind="ojComponent:{component: \'ojTree\',data: qnaQueryTreeDS,icons: false}"></div></div><!-- /ko --><!-- ko if: conversationDO.qnaDO.qnaResultsSearchConfiguration() && conversationDO.qnaDO.qnaResultsSearchConfiguration().length --><h3 class="grey-background bots-helper-padding-5 bots-helper-margin-top-10">').h("i18n",e,{},{key:"datester.details.qna.qnaSearchConfiguration"},"h").w('</h3><div id="datester-details-qna-search-config-pane" class="oj-flex white-background"><div data-bind="ojComponent:{component: \'ojTree\',data: qnaSearchConfigurationTreeDS,icons: false}"></div></div><!-- /ko -->')}return t.register("bots/datester/bot/details/qna-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko with: conversationDO.debugEntries()--><h3 class="datester-details-section">').h("i18n",e,{},{key:"datester.details.routing.debugEntries"},"h").w('</h3><div class="white-background"><div class="oj-flex bots-helper-max-width datester-details-conversation-action"><div class="oj-flex-item oj-sm-2"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.routing.action"},"h").w('</span></div><div class="oj-flex-item oj-sm-8"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.routing.details"},"h").w('</span></div><div class="oj-flex-item oj-sm-2"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.routing.payload"},"h").w('</span></div></div><!-- ko foreach: $data --><!-- ko if: $data.type !== \'pipeline.routing.action.routingResponse\' --><div class="oj-flex bots-helper-max-width  datester-details-conversation-action"><div class="oj-flex-item oj-sm-2"><!-- ko if: $data.type === \'pipeline.routing.intent.call\'--><div class="datester-details-routing-action" data-bind="text: $data.payload.label"></div><!-- /ko --><!-- ko ifnot: $data.type === \'pipeline.routing.intent.call\'--><div class="datester-details-routing-action" data-bind="text: description"></div><!-- /ko --></div><div class="oj-flex-item oj-sm-8" data-bind="with: $data">').p("bots/datester/bot/details/debug-entry-details",e,e,{}).w("</div><div class=\"oj-flex-item oj-sm-2\"><button class=\"datester-details-routing-action\" data-bind=\"click: $root.onClickViewJson,ojComponent: {component: 'ojButton', label: $root.i18n.translate('tester.details.json'),chroming: 'half'}\"></button></div></div><!-- /ko --><!-- /ko --></div><!-- /ko -->")}return t.register("bots/datester/bot/details/routing-actions",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<!-- ko with: conversationDO.debugEntries()--><!-- ko if: $data[$root.testerEnums.DebugEntryTypeEnum.ROUTER_RESPONSE] && $data[$root.testerEnums.DebugEntryTypeEnum.ROUTE_USER_MESSAGE] && $data[$root.testerEnums.DebugEntryTypeEnum.CONTEXT_AWARE_START] --><h3 class="datester-details-section">').h("i18n",e,{},{key:"datester.details.routing.title"},"h").w('</h3><div class="white-background"><div class="oj-flex bots-helper-max-width datester-details-conversation-action"><div class="oj-flex-item oj-sm-2"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.routing.action"},"h").w('</span></div><div class="oj-flex-item oj-sm-8"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.routing.details"},"h").w('</span></div><div class="oj-flex-item oj-sm-2"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.routing.payload"},"h").w('</span></div></div><!-- ko foreach: $data[$root.testerEnums.DebugEntryTypeEnum.ROUTER_RESPONSE] --><div class="oj-flex bots-helper-max-width  datester-details-conversation-action"><div class="oj-flex-item oj-sm-2"><div class="datester-details-routing-action" data-bind="text: description"></div></div><div class="oj-flex-item oj-sm-8" data-bind="with: $data">').p("bots/datester/bot/details/debug-entry-details",e,e,{}).w('</div><div class="oj-flex-item oj-sm-2"><button class="datester-details-routing-action"data-bind="click: $root.onClickViewJson,ojComponent: {component: \'ojButton\',label: $root.i18n.translate(\'tester.details.json\'),chroming: \'half\'}"></button></div></div><!-- /ko --><!-- ko foreach: $data[$root.testerEnums.DebugEntryTypeEnum.ROUTE_USER_MESSAGE] --><div class="oj-flex bots-helper-max-width  datester-details-conversation-action"><div class="oj-flex-item oj-sm-2"><!-- ko if: $data.type === \'pipeline.routing.router.routeUserMessage\'--><!-- ko if: $data.payload.nluSentenceAnnotations --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.utterances.translated\'}"></div><!-- /ko --><!-- ko if: $data.payload.originalNluSentenceAnnotations --><div class="datester-details-routing-action" data-bind="i18n: {key: \'tester.details.routing.utterances.original\'}"></div><!-- /ko --><!-- /ko --><!-- ko if: $data.type !== \'pipeline.routing.intent.call\' && $data.type !== \'pipeline.routing.router.routeUserMessage\'--><div class="datester-details-routing-action" data-bind="text: description"></div><!-- /ko --></div><div class="oj-flex-item oj-sm-8" data-bind="with: $data">').p("bots/datester/bot/details/debug-entry-details",e,e,{}).w('</div><div class="oj-flex-item oj-sm-2"><button class="datester-details-routing-action"data-bind="click: $root.onClickViewJson,ojComponent: {component: \'ojButton\',label: $root.i18n.translate(\'tester.details.json\'),chroming: \'half\'}"></button></div></div><!-- /ko --><!-- ko foreach: $data[$root.testerEnums.DebugEntryTypeEnum.CONTEXT_AWARE_START] --><div class="oj-flex bots-helper-max-width  datester-details-conversation-action"><div class="oj-flex-item oj-sm-2"><div class="datester-details-routing-action" data-bind="text: description"></div></div><div class="oj-flex-item oj-sm-8" data-bind="with: $data">').p("bots/datester/bot/details/debug-entry-details",e,e,{}).w('</div><div class="oj-flex-item oj-sm-2"><button class="datester-details-routing-action"data-bind="click: $root.onClickViewJson,ojComponent: {component: \'ojButton\',label: $root.i18n.translate(\'tester.details.json\'),chroming: \'half\'}"></button></div></div><!-- /ko --></div><!-- /ko --><!-- ko if: $data[$root.testerEnums.DebugEntryTypeEnum.ROUTING_RULE_TYPE_BEGINS_WITH] --><h3 class="datester-details-section">').h("i18n",e,{},{key:"datester.details.routing.rules"},"h").w('</h3><div class="white-background"><div class="oj-flex bots-helper-max-width datester-details-conversation-action"><div class="oj-flex-item oj-sm-10"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.routing.details"},"h").w('</span></div><div class="oj-flex-item oj-sm-2"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.routing.payload"},"h").w('</span></div></div><!-- ko foreach: $data[$root.testerEnums.DebugEntryTypeEnum.ROUTING_RULE_TYPE_BEGINS_WITH] --><div class="oj-flex bots-helper-max-width  datester-details-conversation-action"><div class="oj-flex-item oj-sm-10"><div class="datester-details-routing-action" data-bind="text: description"></div></div><div class="oj-flex-item oj-sm-2"><button class="datester-details-routing-action"data-bind="click: $root.onClickViewJson,ojComponent: {component: \'ojButton\',label: $root.i18n.translate(\'tester.details.json\'),chroming: \'half\'}"></button></div></div><!-- /ko --></div><!-- /ko --><!-- ko if: $data[$root.testerEnums.DebugEntryTypeEnum.ROUTING_EXPLICIT_INVOCATION_TYPE] && $data[$root.testerEnums.DebugEntryTypeEnum.ROUTING_EXPLICIT_INVOCATION_TYPE].length > 0--><!-- ko foreach: $data[$root.testerEnums.DebugEntryTypeEnum.ROUTING_EXPLICIT_INVOCATION_TYPE] --><!-- ko if: $data.payload.explicitInvocation && $data.payload.explicitInvocation[$root.testerEnums.DebugEntryTypeEnum.ROUTING_HIGHEST_EXPLICIT_INVOCATION_KEY] --><h3 class="datester-details-section" data-bind="i18n: {key: \'tester.details.routing.explicitInvocation\', params:[$data.payload.explicitInvocation[$root.testerEnums.DebugEntryTypeEnum.ROUTING_HIGHEST_EXPLICIT_INVOCATION_KEY].skillInvocationName]}"></h3><div class="white-background" data-bind="with: $data.payload.explicitInvocation[$root.testerEnums.DebugEntryTypeEnum.ROUTING_HIGHEST_EXPLICIT_INVOCATION_KEY]"><div class="oj-flex bots-helper-max-width datester-details-conversation-action"><div class="oj-flex-item oj-sm-10"><div class="oj-flex datester-details-routing-action bots-helper-padding-left-20"><div class="oj-flex-item oj-sm-10"data-bind="i18n: {key: \'tester.details.routing.nonInvocationUtterance\', params: [$data[$root.testerEnums.DebugEntryTypeEnum.ROUTING_NON_INVOCATION_UTTERANCE]]}"></div></div><div class="oj-flex datester-details-routing-action bots-helper-padding-left-20"><div class="oj-flex-item oj-sm-6"data-bind="i18n: {key: \'tester.details.routing.skillName\', params: [$data.skillInvocationName]}, css: $root.computeExplicitInvocationColor($parent, $data)"></div><div class="oj-flex-item oj-sm-6"data-bind="i18n: {key: \'tester.details.routing.score\', params: [$root.limitToTwoDecimalPlacesPercentageValue(score)]}, css: $root.computeExplicitInvocationColor($parent, $data)"></div></div><div class="oj-flex datester-details-routing-action bots-helper-padding-left-20"><!-- ko if: $parent.payload.explicitInvocation.hasOwnProperty(\'confidenceThreshold\') --><div class="datester-details-routing-action additional-info" data-bind="i18n: {key: \'datester.details.routing.explicitInvocationConfidenceThreshold\', params: [$root.limitToTwoDecimalPlacesPercentageValue($parent.payload.explicitInvocation.confidenceThreshold)]}"></div><!-- /ko --></div></div><div class="oj-flex-item oj-sm-2"><button class="datester-details-routing-action"data-bind="click: $root.onClickViewJson.bind($data,$parent),ojComponent: {component: \'ojButton\',label: $root.i18n.translate(\'tester.details.json\'),chroming: \'half\'}"></button></div></div></div><!-- /ko --><!-- /ko --><!-- /ko --><!-- ko if: $data[$root.testerEnums.DebugEntryTypeEnum.INTENT_CALL] --><!-- ko foreach: $data[$root.testerEnums.DebugEntryTypeEnum.INTENT_CALL] --><h3 class="datester-details-section" data-bind="i18n: {key: \'datester.details.routing.intentCalls\', params:[$data[0].payload.intentResult.query]}"></h3><div class="white-background"><div class="oj-flex bots-helper-max-width datester-details-conversation-action"><div class="oj-flex-item oj-sm-2"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.routing.action"},"h").w('</span></div><div class="oj-flex-item oj-sm-8"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.routing.details"},"h").w('</span></div><div class="oj-flex-item oj-sm-2"><span class="datester-details-conversation-action-label">').h("i18n",e,{},{key:"datester.details.routing.payload"},"h").w('</span></div></div><!-- ko foreach: $data --><div class="oj-flex bots-helper-max-width  datester-details-conversation-action"><div class="oj-flex-item oj-sm-2"><!-- ko if: $data.payload --><div class="datester-details-routing-action" data-bind="text: $data.payload.label"></div><!-- /ko --><!-- ko ifnot: $data.payload--><div class="datester-details-routing-action" data-bind="text: $data.description"></div><!-- /ko --></div><div class="oj-flex-item oj-sm-8" data-bind="with: $data">').p("bots/datester/bot/details/debug-entry-details",e,e,{}).w("</div><div class=\"oj-flex-item oj-sm-2\"><button class=\"datester-details-routing-action\"data-bind=\"click: $root.onClickViewJson,ojComponent: {component: 'ojButton',label: $root.i18n.translate('tester.details.json'),chroming: 'half'}\"></button></div></div><!-- /ko --></div><!-- /ko --><!-- /ko --><!-- /ko -->")}return t.register("bots/datester/bot/details/routing-summary",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="datester-state-diagram" data-bind="ojComponent: {component: \'ojDiagram\',layout: containerLayout,data: stateDiagramData,promotedLinkBehavior: \'full\',expanded: conversationDO.stateDiagramExpandedNodes,styleDefaults: styleDefaults,nodeProperties:function(data){return data},linkProperties:function(data){return data}}"style="width:100%;"></div>')}return t.register("bots/datester/bot/details/state-pane",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"datester-view-json-dialog",sizeKlazz:"view-json-dialog"})}function i(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"tester.details.json"},"h")}function n(t,e){return e=e.shiftBlocks(o),t.w('<div class="oj-flex"><div class="oj-flex-item"><pre id="datester-details-view-json-dialog-pre" class="jsonhl view-json-dialog-pre"><code class="arduino-light hljs json" data-bind="highlight: JSON.stringify($data.json(), null, 2)"></code></pre></div></div>')}function s(t,e){return e=e.shiftBlocks(o),t}t.register("bots/datester/bot/details/view-json-popup",e);var o={titleLabel:i,bodyHtml:n,footerHtml:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(o),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"datester-conversation-replay-file-dialog",sizeKlazz:"tester-qna-load-batch-file-dialog"})}function i(t,e){return e=e.shiftBlocks(o),t.h("i18n",e,{},{key:"datester.bot.batch.dialog.load"},"h")}function n(t,e){return e=e.shiftBlocks(o),t.w('<div class="oj-md-labels-inline oj-form-layout"><div id="botConversationReplayFileUploadDropzone" class="dropzone" data-bind="visible: [\'none\', \'loading\', \'error\'].indexOf(fileStatus())>-1"><div id="botConversationReplayFileUploadInit" class="oj-flex oj-sm-center dropzone-content" data-bind="if: [\'none\', \'error\'].indexOf(fileStatus())>-1"><div class="oj-flex-item oj-sm-12"><div class="oj-flex oj-sm-center"><div class="oj-flex-item oj-sm-12"><a data-bind="" id="botConversationReplayFileUploadImageLink"><div class="dropDownIcon bots-col-center"></div></a></div></div><div class="oj-flex oj-sm-center"><div class="oj-flex-item"><a tabindex="0" data-bind="click: clickUpload, enterKey" id="botConversationReplayFileUploadLink">').h("i18n",e,{},{key:"datester.bot.batch.dialog.fileLinkText"},"h").w("</a>  ").h("i18n",e,{},{key:"datester.bot.batch.dialog.dragText"},"h").w('</div></div></div></div><div id="botConversationReplayFileUploadProgress" class="oj-flex oj-sm-center dropzone-content" data-bind="if: fileStatus()===\'loading\'"><div class="oj-flex-item oj-sm-12"><div class="oj-flex oj-sm-center"><div class="oj-flex-item"><span class="dropzone-filename" data-bind="text: fileInfo().name"></span><span>').h("i18n",e,{},{key:"datester.bot.batch.dialog.validatingText"},"h").w('</span><div class="progressbar"><div></div></div></div></div></div></div></div><input id="botConversationReplayFileUploadFile" type="file" accept=".json" style="display: none"/><div id="botConversationReplayFileUploadDone" class="oj-flex oj-sm-center bots-no-margin upload-success-container" data-bind="visible: fileStatus()===\'ready\'"><div class="oj-flex-item oj-sm-12"><div class="oj-flex" style="display:flex"><div class="oj-flex-item upload-status-sm-1 bots-no-padding">').p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"stat_confirm_16"}).w('</div><div class="oj-flex-item upload-status-sm-11 bots-no-padding"><div class="oj-flex"><div class="oj-flex-item oj-sm-12 upload-status-icon-title-gap"><span class="upload-status-title" data-bind="text: fileInfo().name"></span><span> ').h("i18n",e,{},{key:"datester.bot.batch.dialog.validatedText"},"h").w('</span></div></div><div class="oj-flex"><div class="oj-flex-item oj-sm-12 upload-status-icon-title-gap"><span></span></div></div></div></div></div></div><div class="oj-flex oj-sm-center bots-no-margin upload-error-container" data-bind="visible: fileStatus()===\'error\'"><div class="oj-flex-item oj-sm-12"><div class="oj-flex" style="display:flex"><div class="oj-flex-item upload-error-sm-1 bots-no-padding">').p("bots/common/inlinesvg",e,e,{width:"16",height:"16",project:"bots",basename:"stat_error_16"}).w('</div><div class="oj-flex-item upload-error-sm-11 bots-no-padding"><div class="oj-flex"><div class="oj-flex-item oj-sm-12 upload-status-icon-title-gap"><span class="upload-error-title" data-bind="text: $root.i18n.translate(\'tester.bot.batch.dialog.error.title\')"></span></div></div><div class="oj-flex"><div class="oj-flex-item oj-sm-12 upload-status-icon-title-gap"><span data-bind="text: fileError"></span></div></div></div></div></div></div></div>')}function s(t,e){return e=e.shiftBlocks(o),t.w('<button class="right green-button action-button" default="true"data-bind="ojComponent: { component: \'ojButton\',label: \'').h("i18n",e,{},{key:"datester.bot.batch.dialog.test",filter:"j"},"h").w("',disabled: fileStatus() !== 'ready' },click: testBotFile\"></button>")}t.register("bots/datester/bot/load-bot-file-dialog",e);var o={titleLabel:i,bodyHtml:n,footerHtml:s};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester-type"],!1),e,"h").w("-bottom ").f(e.get(["tester-type"],!1),e,"h").w(' bots-helper-max-width"><div class="').f(e.get(["tester-type"],!1),e,"h").w("-bottom-bar-formline\"><div id='").f(e.get(["tester-type"],!1),e,"h").w("-buttonset' ><!-- ko if: '").f(e.get(["tester-type"],!1),e,"h").w("'==='datester' --><button id='attach-").f(e.get(["tester-type"],!1),e,"h").w("' data-bind=\"click: attach, ojComponent: { component: 'ojButton', chroming:'outlined', icons: { start: '").f(e.get(["tester-type"],!1),e,"h").w("-attach-icon' }}\"></button><!-- /ko --></div><input data-bind=\"ojComponent: {component: 'ojInputText', value: $data.itemToAdd, rootAttributes:{'style': 'margin:0'}}\" id=\"").f(e.get(["tester-type"],!1),e,"h").w('-input" placeholder="').h("i18n",e,{},{key:"datester.conversation.placeholder",filter:"h"},"h").w('" /></div></div>')}return t.register("bots/datester/bottom",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="bot-action-list"><!-- ko foreach: $data.actions --><!-- ko if: $index()===0 --><div class="bot-action-item" data-bind="click: $root.clickChoice, attr: { value: $data }"><span data-bind="text: $data.label"></span></div><!-- /ko --><!-- ko if: $index()!==0 --><div class="bot-action-item bot-action-item-border" data-bind="click: $root.clickChoice, attr: { value: $data }"><span data-bind="text: $data.label"></span></div><!-- /ko --><!-- /ko --></div>')}return t.register("bots/datester/conversation/actions",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w("<div data-bind=\"attr: {id: '").f(e.get(["tester-type"],!1),e,"h").w('-li-000\'}" class="').f(e.get(["tester-type"],!1),e,"h").w('-li"><div style="margin-right: 80px; width: 70px"><div class="oj-sm-12 ').f(e.get(["tester-type"],!1),e,"h").w('-bot"><div class="animated-dotx3"><div class="animated-dot"><div class="animated-dot_1 dot"></div><div class="animated-dot_2 dot"></div><div class="animated-dot_3 dot"></div></div></div></div></div></div>')}return t.register("bots/datester/conversation/animation",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w("-").f(e.get(["role"],!1),e,"h").w('"><div class="bot-attachment-item"><!-- ko if: $data.attachment.type===\'image\' --><img style=\'height: 100%; width: 100%; object-fit: contain\' data-bind="attr: {src: $data.attachment.url, onload: $parents[0].imageLoaded()}"/><!-- /ko --><!-- ko if: $data.attachment.type===\'video\' --><video style=\'height: 100%; width: 100%; object-fit: contain\' autoplay controls data-bind="attr: {src: $data.attachment.url, onload: $parents[0].imageLoaded()}"/><!-- /ko --><!-- ko if: $data.attachment.type===\'audio\' --><audio autoplay controls data-bind="attr: {src: $data.attachment.url, onload: $parents[0].imageLoaded()}">Your browser does not support the <code>audio</code> element.</audio><!-- /ko --><!-- ko if: $data.attachment.type===\'file\' --><a class="header" data-bind="text: $data.attachment.url, attr: {href: $data.attachment.url, target: \'_blank\'}" style="word-break: break-all;"></a><!-- /ko --><!-- ko if: $data.actions && $data.actions.length>0 -->').p("bots/datester/conversation/actions",e,e,{}).w("<!-- /ko --></div></div>")}return t.register("bots/datester/conversation/attachment",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="bot-card-item bots-helper-max-width"><div data-bind="text: $data.title" class="bot-card-title"></div><!-- ko if: $data.description --><div data-bind="text: $data.description" class="bot-card-desc"></div><!-- /ko --><!-- ko if: $data.imageUrl --><img style=\'height: 100%; width: 100%; object-fit: contain\' data-bind="attr: {src: $data.imageUrl, alt: $data.title, onload: $root.imageLoaded()}"/><!-- /ko --><!-- ko if: $data.url --><div class="bot-card-url"><a data-bind="text: $data.url, attr: {href: $data.url}" style="overflow-wrap:break-word;"></a></div><!-- /ko --><!-- ko if: $data.actions && $data.actions.length>0 -->').p("bots/datester/conversation/actions",e,e,{}).w("<!-- /ko --></div>")}return t.register("bots/datester/conversation/card",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="oj-sm-12 ').f(e.get(["tester"],!1),e,"h").w("-bot ").f(e.get(["tester"],!1),e,"h").w('-bot-card"><div><!-- ko if: $data.layout===\'vertical\' --><div class="bot-card-list" style="text-align:right; margin-left:10px; margin-right:10px; border: none; background-color:none"><!-- ko foreach: cards -->').p("bots/datester/conversation/card",e,e,{}).w('<!-- /ko --><!-- ko if: $data.actions && $data.actions.length>0--><div class="bot-card-item-action-list">').p("bots/datester/conversation/actions",e,e,{}).w('</div><!-- /ko --></div><!-- /ko --><!-- ko if: $data.layout===\'horizontal\' --><div class="bot-card-list" style="text-align:right; margin-left:10px; margin-right:10px; border: none; background-color:none"><oj-film-strip id="datester-filmStrip bots-helper-outline-0"aria-label="').h("i18n",e,{},{key:"datester.conversation.cards.label",filter:"h"},"h").w('"arrow-placement="overlay"arrow-visibility="visible"><!-- ko foreach: cards --><div class="demo-filmstrip-item bots-helper-max-width oj-panel"data-bind="style: {display: ($index===0 ? \'\' : \'none\')}">').p("bots/datester/conversation/card",e,e,{}).w('</div><!-- /ko --></oj-film-strip><!-- ko if: $data.actions && $data.actions.length>0--><div class="bot-card-item-action-list">').p("bots/datester/conversation/actions",e,e,{}).w("</div><!-- /ko --></div><!-- /ko --></div></div>")}return t.register("bots/datester/conversation/cards",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="oj-sm-12 ').f(e.get(["tester"],!1),e,"h").w("-bot ").f(e.get(["tester"],!1),e,"h").w('-bot-choice"><div class="bot-choice-header" data-bind="text: text"></div><div><ul class="bot-choice-list" style="text-align:right; margin-left:10px; margin-right:10px; border: none; background-color:none"data-bind="ojComponent: { component: \'ojListView\',selectionMode: \'none\' }"><!-- ko foreach: actions --><li class="bot-choice-item" data-bind="click: $root.clickChoice, attr: { value: $data }"><span data-bind="text: $data.label"></span></li><!-- /ko --></ul></div></div>')}return t.register("bots/datester/conversation/choice",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w("-").f(e.get(["role"],!1),e,"h").w('"><div class="header" data-bind="text: $data.footerText" style="overflow-wrap:break-word;"></div></div>')}return t.register("bots/datester/conversation/footerText",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w('-bot-global-actions"><!-- ko foreach: $data.globalActions --><a class="action-button" data-bind="click: $root.clickChoice,ojComponent: { component: \'ojButton\', label: $data.label, chroming: \'outlined\' }"></a><!-- /ko --></div>')}return t.register("bots/datester/conversation/globalActions",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w("-").f(e.get(["role"],!1),e,"h").w('"><div class="header" data-bind="text: $data.headerText" style="overflow-wrap:break-word;"></div></div>')}return t.register("bots/datester/conversation/headerText",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w("    <!-- ko if: party===0 --><div data-bind=\"click: $root.selectConversation,attr: { id: '").f(e.get(["tester-type"],!1),e,"h").w("-li-' + $data['id'], party: $data['party'] },css: {'conversation-selected': selected()}\"class=\"oj-flex ").f(e.get(["tester-type"],!1),e,"h").w('-li bots-helper-pointer" style="margin-left: 80px"><!-- ko if: type===\'text\' -->').p("bots/datester/conversation/text",e,e,{tester:i,role:"self"}).w("<!-- /ko --><!-- ko if: type==='link' --><div class=\"").f(e.get(["tester-type"],!1),e,"h").w('-self"><a class="header" data-bind="text: text, attr: {href: text, target: \'_blank\'}" style="word-break: break-all;"></a></div><!-- /ko --><!-- ko if: type===\'location\' -->').p("bots/datester/conversation/location",e,e,{tester:n,role:"self"}).w("<!-- /ko --><!-- ko if: type==='attachment' -->").p("bots/datester/conversation/attachment",e,e,{tester:s,role:"self"}).w("<!-- /ko --></div><!-- /ko --><!-- ko if: party===1 --><div data-bind=\"click: $root.selectConversation,attr: { id: '").f(e.get(["tester-type"],!1),e,"h").w("-li-' + $data['id'], party: $data['party'] },css: {'conversation-selected': selected()}\"class=\"oj-flex ").f(e.get(["tester-type"],!1),e,"h").w("-li bots-helper-pointer\"><div class=\"oj-flex-item oj-sm-10\"><!-- ko if: $data.hasOwnProperty('headerText') && $data.headerText!=='' -->").p("bots/datester/conversation/headerText",e,e,{
tester:o,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='text' -->").p("bots/datester/conversation/text",e,e,{tester:a,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='link' --><div class=\"").f(e.get(["tester-type"],!1),e,"h").w('-bot"><a class="header" data-bind="text: text, attr: {href: text, target: \'_blank\'}" style="word-break: break-all;"></a></div><!-- /ko --><!-- ko if: type===\'choice\' -->').p("bots/datester/conversation/choice",e,e,{tester:r,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='card' -->").p("bots/datester/conversation/cards",e,e,{tester:l,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='attachment' -->").p("bots/datester/conversation/attachment",e,e,{tester:d,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='location' -->").p("bots/datester/conversation/location",e,e,{tester:c,role:"bot"}).w("<!-- /ko --><!-- ko if: type==='raw' -->").p("bots/datester/conversation/text",e,e,{tester:u,role:"bot"}).w("<!-- /ko --><!-- ko if: $data.globalActions -->").p("bots/datester/conversation/globalActions",e,e,{tester:h,role:"bot"}).w("<!-- /ko --><!-- ko if: $data.hasOwnProperty('footerText') && $data.footerText!=='' -->").p("bots/tester/conversation/footerText",e,e,{tester:b,role:"bot"}).w("<!-- /ko --></div><div class=\"oj-flex-item right oj-sm-2\"><!-- ko if: ko.unwrap($index) < ko.unwrap($parent.uiConversation).length - 1 --><button class=\"right reset-to-state-button\" data-bind=\"ojComponent: {component: 'ojButton',chroming: 'half',display: 'icons',icons: {start: 'bots-svgsprite-func-icon'},label: $root.i18n.translate('tester.conversation.resetToState')},inlinesvg: {width: 32, height: 32, project: 'bots', basename: 'func_flipback_16'},click: $root.resetToState\"></button><!-- /ko --></div></div><!-- /ko -->")}function i(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function n(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function s(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function o(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function a(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function r(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function l(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function d(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function c(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function u(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function h(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}function b(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}return t.register("bots/datester/conversation/item",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,r.__dustBody=!0,l.__dustBody=!0,d.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,b.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('  <div data-bind="if: jsonResults().length > 0"><div id="').f(e.get(["tester-type"],!1),e,"h").w('-jsonSection" class="json-section"data-bind="ojComponent: { component: \'ojCollapsible\',expanded: expandedJson,collapse: handleJson,expand: handleJson }"><h3 id="').f(e.get(["tester-type"],!1),e,"h").w('-json-header" class="oj-header-border">JSON</h3><div><a id=\'').f(e.get(["tester-type"],!1),e,"h").w('-saveFileLink\' style="float:right" data-bind="attr: { href: downloadFileURL(), download: downloadFileName() }"><span data-bind="inlinesvg: {width: 16, height: 16, project: \'bots\', basename: \'func_download_16\'}"></span></a><pre style="clear:both" class="jsonhl"><code id="').f(e.get(["tester-type"],!1),e,"h").w('-json" class="arduino-light" data-bind="highlight: fullJson"></code></pre></div></div></div>')}return t.register("bots/datester/conversation/json",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w("-").f(e.get(["role"],!1),e,"h").w('"><div class="bot-location-item"><!-- ko if: $data.location.title --><div data-bind="text: $data.location.title" class="bot-location-title"></div><!-- /ko --><!-- ko if: $data.actions && $data.actions.length>0 -->').p("bots/datester/conversation/actions",e,e,{}).w("<!-- /ko --></div><!-- ko if: $data.globalActions && $data.globalActions.length>0 -->").p("bots/datester/conversation/globalActions",e,e,{tester:i}).w("<!-- /ko --></div>")}function i(t,e){return t.f(e.get(["tester-type"],!1),e,"h")}return t.register("bots/datester/conversation/location",e),e.__dustBody=!0,i.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="').f(e.get(["tester"],!1),e,"h").w("-").f(e.get(["role"],!1),e,"h").w('"><div class="header" data-bind="text: text" style="overflow-wrap:break-word;"></div></div>')}return t.register("bots/datester/conversation/text",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return e=e.shiftBlocks(a),t.p("bots/common/dialog/gray.dialog",e,e,{grayDialogId:"datester-fullpage",sizeKlazz:"datester-fullpage"})}function i(t,e){return e=e.shiftBlocks(a),t.w("<!-- ko if: $root.bot() && $root.bot().hasOwnProperty('displayName') --><span data-bind=\"text: $root.i18n.translate('datester.botTesterName', [$root.testBotName()])\"></span><!-- /ko -->")}function n(t,e){return e=e.shiftBlocks(a),t.w("<button class=\"right bots-vertical-align reset-button\"data-bind=\"click: resetTest,ojComponent: { component: 'ojButton',chroming: 'half',label: $root.i18n.translate('tester.conversation.clear')}\"></button>")}function s(t,e){return e=e.shiftBlocks(a),t.w('<div class="oj-flex"><div class="oj-flex-item oj-sm-12"><div class="oj-flex"><div class="oj-flex-item oj-sm-5"><div class="oj-flex"><!-- ko nobind --><div id="datester" class="datester oj-flex-item oj-sm-12"></div><!-- /ko --></div></div><!-- ko nobind --><div class="oj-flex-item oj-sm-7 bots-helper-padding-left-10" id="datester-details"></div><!-- /ko --></div></div></div>')}function o(t,e){return e=e.shiftBlocks(a),t}t.register("bots/datester/main",e);var a={titleLabel:i,titleEndToolbar:n,bodyHtml:s,footerHtml:o};return e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,s.__dustBody=!0,o.__dustBody=!0,e}(dust),define("bots.templates/datester",function(){}),define("bots.package.datester/model.rest",["module","bots.model.rest","bots.i18n","bots.config"],function(t,e,i,n){var s=e.__class__.extend({module:t,name:"TesterRestModel"},{config:{stringifyObjects:!1},TesterRestModel:function(t){this._super(t)},testConversation:function(t,e){this.restPost(e,"/bots/{botId}/test/messages",{data:JSON.stringify(_.omit(t,["botId","botName","resetCounter"])),dataType:"text",uriParams:{botId:t.botId}})},pollConversation:function(t,e){this.restGet(e,"/bots/{botId}/test/responses",{cache:!1,uriParams:{botId:t.botId},headers:{"Bots-UserId":t.userId}})}});return new s(_.extend({},e.config,{baseUrl:e.config.baseUrl}))}),define("bots.package.datester/model",["module","mcs.js.framework/model.util","bots.model.rest","bots.package.datester/model.rest"],function(t,e,i,n){var s=n.__class__.extend({module:t,name:"FakeBotTesterRestModel"},{config:{stringifyObjects:!1},FakeBotTesterRestModel:function(t){this._super(t)}},e.stubProxy);return new s(_.extend({},i.config,{baseUrl:i.config.baseUrl}))}),define("bots.package.datester/enums",{DebugEntryTypeEnum:{INTENT_CALL:"pipeline.routing.intent.call",ROUTING_RESPONSE:"pipeline.routing.action.routingResponse",CONTEXT_AWARE_START:"pipeline.routing.contextAwareStart",ROUTE_DIALOG_RESPONSE:"pipeline.routing.router.routeDialogResponse",ROUTE_USER_MESSAGE:"pipeline.routing.router.routeUserMessage",ROUTER_RESPONSE:"pipeline.routing.routerResponse",ROUTING_RULE_TYPE_BEGINS_WITH:"pipeline.routing.rule.",ROUTING_EXPLICIT_INVOCATION_TYPE:"pipeline.routing.explicit.invocation.routing.action.response",ROUTING_HIGHEST_EXPLICIT_INVOCATION_KEY:"highestInvocationInfo",ROUTING_NON_INVOCATION_UTTERANCE:"nonInvocationUtterance"}}),define("bots.package.datester/dataobject",["module","bots.i18n","bots.package.datester/enums","mcs.js.framework/dataobject"],function(t,e,i,n){var s=n.extend({module:t,name:"BotTesterConversationQnADataObject"},{BotTesterConversationQnADataObject:function(t){this.qnaAnswerMatchList=ko.observable(),this.qnaCategoryMatchList=ko.observable(),this.qnaResultsSearchConfiguration=ko.observable(),this.qnaResultsQuery=ko.observable(),this._super(t)},fromJS:function(t,e){var i=t;i?(this.qnaAnswerMatchList(i.answerMatches.answerMatchList),this.qnaCategoryMatchList(i.categoryMatches.categoryMatchList),i.answerMatchMethod.searchConfiguration=this._filterKeys(i.answerMatchMethod.searchConfiguration,[]),this.qnaResultsSearchConfiguration(this._processNodes(i.answerMatchMethod.searchConfiguration,"qna-search-config",0)),i.qnAQuery=this._filterKeys(i.qnAQuery,["sentence","categoriesFilter","categories"]),this.qnaResultsQuery(this._processNodes(i.qnAQuery,"qna-query",0)),i.answerMatchMethod.searchConfiguration={},i.qnAQuery={}):(this.qnaAnswerMatchList([]),this.qnaCategoryMatchList([]),this.qnaResultsSearchConfiguration(this._processNodes({},"qna-search-config",0)),this.qnaResultsQuery(this._processNodes({},"qna-query",0)))},_filterKeys:function(t,e){var i={};return t&&"object"==typeof t&&e&&Array.isArray(e)&&_.filter(Object.keys(t),function(n){_.contains(e,n)||(i[n]=t[n])}),i},_processNodes:function(t,e,i){var n=[];return t=_.pick(t,function(t,e,i){return t}),t&&i<10&&(n=Object.keys(t).map(function(n){var s={title:n,attr:{id:e+n+Math.random().toString(36).substring(7)},value:t[n],expanded:!0};return"object"!=typeof t[n]?(s.value=t[n],s.title=s.title+": "+s.value):s.children=this._processNodes(t[n],e,i+1),s},this)),n}}),o=n.extend({module:t,name:"BotTesterConversationDataObject"},{BotTesterConversationDataObject:function(t){this.variables=ko.observable(),this.allVariables=ko.observable(),this.intentMatches=ko.observable(),this.entityMatches=ko.observable(),this.executedStates=ko.observable(),this.currentDialogState=ko.observable(),this.debugEntries=ko.observable(),this.actions=ko.observable(),this.globalActions=ko.observable(),this.stateDiagramLinks=ko.observable(),this.stateDiagramNodes=ko.observable(),this.stateDiagramExpandedNodes=ko.observable(),this._super(t)},fromJS:function(t,e){this._processConversation(t)},_initConversation:function(){this.variables([]),this.allVariables([]),this.intentMatches([]),this.entityMatches([]),this.executedStates([]),this.debugEntries([]),this.currentDialogState(null),this.actions([]),this.globalActions([]),this.qnaDO=new s(null)},_processConversation:function(t){var i=this,n=[],o=t&&t.channelExtensions&&t.channelExtensions.debugInfo?t.channelExtensions.debugInfo:null;if(o){n=_.pick(o.variables,function(t,e,i){return t});var a=JSON.parse(JSON.stringify(n));this.debugEntries(this._processDebugEntries(o.debugEntries)),a.iResult=_.omit(i._getResult(a),"intentMatches","entityMatches"),a.userInput=_.omit(a.userInput,"intentMatches","entityMatches"),a=_.omit(a,"qna.result","iresult","iResult"),this.variables(this._processNodes(this._filterVariables(a,!1),"variable-",0)),this.allVariables(this._processNodes(a,"variables-",0));var r=this._getResult(n)?this._getResult(n).intentMatches:n.userInput?n.userInput.intentMatches:null;this.intentMatches(this._processIntents(r));var l=this._getResult(n)?this._getResult(n).entityMatches:null;this.entityMatches(this._processEntities(l));var d=n["qna.result"];this.qnaDO=new s(d),this.executedStates(o.executedStates),this.currentDialogState(o.currentDialogState);var c=new oj.ColorAttributeGroupHandler,u=[],h=[],b={},g=null,f=null,p=0,m=[],v=0;_.each(ko.unwrap(this.executedStates),_.bind(function(t){if(t&&t.botName){if(b.hasOwnProperty(t.botId)){var i=_.find(u,function(e){return e.id===t.botId});_.find(i.nodes,function(e){return e.id===t.botId+t.stateName})?(g.id=t.botId+t.stateName,g.icon.color=i.nodes[0].icon.color):(f=this._diagramCreateNode(t.botId+t.stateName,t.stateName,[],b[i.id].color),i.nodes.push(f))}else v++,f=this._diagramCreateNode(t.botId+t.stateName,t.stateName,[],c.getValue(v)),u.push(this._diagramCreateNode(t.botId,e.translate("datester.conversation.botName",[t.botName]),[f])),m.push(t.botId),b[t.botId]={name:t.botName,color:c.getValue(v)};g&&t.stateName&&g.id!==t.botId+t.stateName&&h.push(this._diagramCreateLink(p++,g.id,t.botId+t.stateName,g.icon.color)),g=JSON.parse(JSON.stringify(f))}},this)),this.stateDiagramNodes(u),this.stateDiagramLinks(h),this.stateDiagramExpandedNodes(m)}else this._initConversation();t&&(this.actions(this._processActions(t.actions)),this.globalActions(this._processActions(t.globalActions,!0)))},_processDebugEntries:function(t){var e={};_.each(t,function(t){0===t.type.indexOf(i.DebugEntryTypeEnum.ROUTING_RULE_TYPE_BEGINS_WITH)&&(t.type=i.DebugEntryTypeEnum.ROUTING_RULE_TYPE_BEGINS_WITH),e.hasOwnProperty(t.type)&&Array.isArray(e[t.type])?e[t.type].push(t):e[t.type]=[t]});var n={};_.each(e[i.DebugEntryTypeEnum.INTENT_CALL],function(t){n.hasOwnProperty(t.payload.intentResult.query)&&Array.isArray(n[t.payload.intentResult.query])?n[t.payload.intentResult.query].push(t):n[t.payload.intentResult.query]=[t]}),e[i.DebugEntryTypeEnum.INTENT_CALL]=_.values(n);var s=[];return _.each(e[i.DebugEntryTypeEnum.ROUTER_RESPONSE],function(t){t&&t.payload&&t.payload.routerResponse&&(t.payload.routerResponse.handledByRoutingAction||t.payload.routerResponse.newFlows)&&s.push(t)}),e[i.DebugEntryTypeEnum.ROUTER_RESPONSE]=s,e},_diagramCreateLink:function(t,i,n,s){return{id:t,startNode:i,endNode:n,shortDesc:e.translate("datester.conversation.stateLinkDesc",[i,n]),color:s}},_diagramCreateNode:function(t,e,i,n){return{id:t,label:e,shortDesc:e,nodes:i,icon:{color:n}}},_processEntities:function(t){var e=[];if(t){var i=_.keys(t);_.each(i,function(i){var n=t[i][0];e.push({name:i,value:n})})}return e},_processIntents:function(t){var e=[];return t&&(e=t.detail.final_norm.map(function(t){var e=t;return e},this)),e},_processActions:function(t,e){var i={};return t&&_.each(t,function(t){i[t.type]||(i[t.type]=[]),t.isGlobal=e,i[t.type].push(t)}),i},_processNodes:function(t,e,i){var n=[];t=_.pick(t,function(t,e,i){return null!==t});var s=_.extend({},t);return _.each(_.keys(s),function(e){var i={},n={};return i="system.config.system.routing",n=i.substr(0,i.lastIndexOf(".")),0===e.indexOf(i)?(t.system=t.system||{},t.system.config=t.system.config||{},t.system.config.system=t.system.config.system||{},t.system.config.system.routing=t.system.config.system.routing||{},t.system.config.system.routing[e.slice(n.length+1)]=t[e],void delete t[e]):(i="system.config.system.conversation",n=i.substr(0,i.lastIndexOf(".")),0===e.indexOf(i)?(t.system=t.system||{},t.system.config=t.system.config||{},t.system.config.system=t.system.config.system||{},t.system.config.system.conversation=t.system.config.system.conversation||{},t.system.config.system.conversation[e.slice(n.length+1)]=t[e],void delete t[e]):(i="system.config.system",0===e.indexOf(i)?(t.system=t.system||{},t.system.config=t.system.config||{},t.system.config.system=t.system.config.system||{},t.system.config.system[e.slice(i.length+1)]=t[e],void delete t[e]):(i="system.config",0===e.indexOf(i)?(t.system=t.system||{},t.system.config=t.system.config||{},t.system.config[e.slice(i.length+1)]=t[e],void delete t[e]):(i="system",0===e.indexOf(i)?(t.system=t.system||{},t.system[e.slice(i.length+1)]=t[e],void delete t[e]):void 0))))}),t&&i<10&&(n=Object.keys(t).map(function(n){var s={title:n,attr:{id:e+n+Math.random().toString(36).substring(7)},value:t[n],expanded:!0};return"object"!=typeof t[n]?(s.value=t[n],s.title=s.title+": "+s.value):s.children=this._processNodes(t[n],e,i+1),s},this)),n},_filterVariables:function(t,e){var i={};return t&&"object"==typeof t&&_.filter(Object.keys(t),function(n){e&&0===n.indexOf("profile.")?i[n]=t[n]:e||0===n.indexOf("profile.")||"userInput"===n||"iResult"===n||0===n.indexOf("system.state")||(i[n]=t[n])}),i},_getResult:function(t){return t.iResult||t.iresult}});return{BotTesterConversationDataObject:o,BotTesterConversationQnADataObject:s}}),define("bots.package.datester/facade",["module","bots.facade","bots.package.datester/model"],function(t,e,i){var n=e.__class__.extend({module:t,name:"Facade"},{__static__:{globalChannels:{}},Facade:function(){this._super();this.register({TEST_CONVERSATION:{name:"full.datester.bot.conversation",handler:function(t){var e=t.data.botId,n=t.data.botName,s=t.data.resetCounter;i.testConversation(t.data,_.bind(function(i){t.data=i,t.data.botId=e,t.data.botName=n,t.data.resetCounter=s,this.publish(t)},this))}},POLL_CONVERSATION:{name:"full.datester.bot.pollConversation",handler:function(t){var e=t.data.botId,n=t.data.botName,s=t.data.resetCounter;i.pollConversation(t.data,_.bind(function(i){t.data=i,t.data.botId=e,t.data.botName=n,t.data.resetCounter=s,this.publish(t)},this))}},UPDATE_LAYOUT:{name:"full.datester.updateLayout",handler:function(t){this.publish(t)}},SEND_ATTACHMENT:{name:"full.datester.bot.attachment.send",handler:function(t){this.publish(t)}},RESET_RESULTS:{name:"full.datester.qna.reset",handler:function(t){this.publish(t)}},DOWNLOAD_CONVERSATION:{name:"full.datester.download.conversation",handler:function(t){this.publish(t)}},REPLAY_CONVERSATION:{name:"full.datester.test.conversation",handler:function(t){this.publish(t)}},SHOW_DETAILS:{name:"full.datester.show.details",handler:function(t){this.publish(t)}}})}});return new n}),define("bots.package.datester/attach",["module","bots.package.shell/validators","bots.package.view/dialog","bots.i18n"],function(t,e,i,n){function s(t){var e=document.createElement("a");return e.href=t,"http:"===e.protocol||"https:"===e.protocol?e.host&&e.host!==window.location.host:["file:","ftp:","sftp:","ftps:"].indexOf(e.protocol)>-1}var o,a=i.extend({module:t,name:"AttachDialog"},{__static__:{ATTACHMENT_TYPE:["image","video","audio","file"]},config:{type:"ojDialog"},bindings:{botsValidators:e,attachmentType:{func:ko.observable,args:[["image"]]},attachmentTypes:{func:ko.observableArray,args:[[{value:"image",label:n.translate("tester.bot.attach.dialog.types.image")},{value:"video",label:n.translate("tester.bot.attach.dialog.types.video")},{value:"audio",label:n.translate("tester.bot.attach.dialog.types.audio")},{value:"file",label:n.translate("tester.bot.attach.dialog.types.file")}]]},attachmentTitle:{func:ko.observable},attachmentUrl:{func:ko.observable},addAttachment:function(t){this.deps.uiComponents.validateFields($(this.config.baseElement))&&this.bindings.attachmentUrl()&&this.notify({SEND_ATTACHMENT:{data:{title:this.bindings.attachmentTitle(),type:this.bindings.attachmentType(),url:this.bindings.attachmentUrl()}}},{actionSpinner:!1})},isAttachmentUrlValidator:{func:function(){return{validate:function(t){if(t&&!s(t))throw new oj.ValidatorError(n.translate("datester.conversation.attach.dialog.error.validation.summary"),n.translate("datester.conversation.attach.dialog.error.validation.detail"));return!0}}}},closeDialog:function(){},openDialog:function(){this.bindings.attachmentTitle(""),this.bindings.attachmentUrl(""),this.bindings.attachmentType(["image"])}},setupEventHandlers:function(){$("#tester-attach-dialog").on("ojclose",this.bindings.closeDialog),$("#tester-attach-dialog").on("ojopen",this.bindings.openDialog)},bindView:function(t){this._super(t),this.setupEventHandlers()},rebindView:function(t){this._super(t),this.bindView(t)},AttachDialog:function(t){this._super(t)},resetFields:function(t){this._super(t)},open:function(t,e){return this.config.resetFieldsOnOpen=!1,this._super(),o=$.Deferred(),this.bindings.openDialog(),o}});return a}),define("bots.package.datester/view.bot",["module","suite.package.util/messaging","bots.config","bots.i18n","bots.package.view/view","bots.package.datester/facade","bots.package.datester/attach","ojs/ojfilmstrip"],function(t,e,i,n,s,o,a){function r(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function l(t,e){var i=_.extend(JSON.parse(JSON.stringify(t)),{rawJson:e});i.id=this.lastId,i.party=1,i.selected=ko.observable(!1);var n=_.last(_.filter(this.uiConversation(),function(t){return 1===t.party}));if(n&&n.channelExtensions&&n.channelExtensions.debugInfo&&n.channelExtensions.debugInfo.executedStates){var s=_.last(n.channelExtensions.debugInfo.executedStates);"done"!==_.last(n.channelExtensions.debugInfo.executedStates)&&"unresolved"!==_.last(n.channelExtensions.debugInfo.executedStates)||(n.channelExtensions.debugInfo.executedStates=[]),i.channelExtensions&&i.channelExtensions.debugInfo?i.channelExtensions.debugInfo.currentDialogState!==s?i.channelExtensions.debugInfo.executedStates=n.channelExtensions.debugInfo.executedStates.concat(i.channelExtensions.debugInfo.executedStates||i.channelExtensions.debugInfo.currentDialogState):i.channelExtensions.debugInfo.executedStates=n.channelExtensions.debugInfo.executedStates:i.channelExtensions=n.channelExtensions}this.uiConversation.push(i),this.lastId++}function d(t,e){return"https://www.google.com/maps/search/?api=1&query="+t+","+e}function c(t){var e=document.createElement("a");return e.href=t,"http:"===e.protocol||"https:"===e.protocol?e.host&&e.host!==window.location.host:["mailto:","file:","ftp:","sftp:","ftps:"].indexOf(e.protocol)>-1}function u(t){"function"==typeof t.isTesting?t.isTesting(!1):t.isTesting=!1}function h(t,e){e.jsonResults.push(t)}var b={state:{}},g=s.extend({module:t,name:"FullPageTesterView"},{__static__:{POLL_WINDOW_MS:18e4},deps:{i18n:n,facade:o,botsConfig:i},bindings:{i18n:n,itemToAdd:{func:ko.observable},lastId:0,userId:"",userProfile:{},uiConversation:{func:ko.observableArray,args:[[]]},jsonResults:{func:ko.observableArray,args:[[]]},fullJson:{func:ko.computed,args:[function(){return JSON.stringify(this.bindings.jsonResults(),null,2)},this,{deferEvaluation:!0}]},isPolling:!1,isTesting:{func:ko.observable,args:[!1]},timeLastTested:-1,expandedJson:!1,resetCounter:0,handleJson:function(t,e){"ojexpand"===t.type?(this.bindings.expandedJson=!0,this.updateConversation()):"ojcollapse"===t.type&&(this.bindings.expandedJson=!1,"relative"===$("#tester-bot-jsonSection").css("position")&&this.updateConversation()),this.selectInput(),this.scrollToBottom()},resetToState:function(t){var e=JSON.parse(JSON.stringify(ko.unwrap(this.bindings.uiConversation)));this.bindings.resetTest(),this._resetToState(e,t)},resetTest:function(t){this.bindings.uiConversation([]),this.bindings.lastId=0,this.bindings.userId=(this.bindings.userProfile.userId?this.bindings.userProfile.userId:"")+r(1e6,9999999),this.bindings.itemToAdd(null),this.bindings.jsonResults([]),this.bindings.isPolling=!1,this.bindings.isTesting(!1),this.bindings.timeLastTested=-1,this.bindings.expandedJson=!1,t?this.bindings.resetCounter=0:this.bindings.resetCounter++},downloadConversation:function(){this._downloadJson({data:ko.toJS(this.bindings.uiConversation)})},replayConversation:function(t){this.bindings.resetTest(),this._resetToState(t.conversation,null)},clickChoice:function(t,e,i){"postback"===t.type?this.postback(t):"url"===t.type?this.openUrl(t):"call"===t.type?this.callNumber(t):"location"===t.type?this.requestLocation(t):this.log("action not supported",t),this.selectInput(),this.scrollToBottom()},imageLoaded:function(t,e,i){this.log("Image loaded");var n=_.throttle(this.updateLayout,200,{leading:!1});setTimeout(n,500)},sendText:function(t,e,i){this.bindings.itemToAdd()&&""!==this.bindings.itemToAdd().trim()&&this.addText(this.bindings.itemToAdd().trim()),this.selectInput(),this.scrollToBottom()},AttachDialog:{func:function(){return new a({baseElement:this.config.attachBaseElement,contentElement:this.config.attachBaseElement,parentView:this})}},attach:function(t,e){this.bindings.AttachDialog.open()},downloadFileURL:function(){return"data:application/octet-stream,"+encodeURIComponent(this.bindings.fullJson())},downloadFileName:function(){return i.getCurrentBot().name+"_conversation.json"},selectConversation:function(t){var e=this;_.each(e.bindings.uiConversation(),function(t){t&&t.selected&&"function"==typeof t.selected&&t.selected(!1)},this),t&&t.selected&&"function"==typeof t.selected&&t.selected(!0),t=_.extend(t,{currentBotId:i.getCurrentBot().id}),this.notify({SHOW_DETAILS:{data:t}},{actionSpinner:!1})}},FullPageTesterView:function(t){this._super(t)},bindView:function(t){this._super(t);var e=this;$("#datester-input").keyup(function(t){13===t.keyCode&&e.bindings.sendText()}),this.bindings.AttachDialog.bindView(),this.setUserProfile()},initModule:function(t){this.afterLC("renderView").always(function(){_.defer(function(){})}),this._super(t)&&this.listen({BOT_SELECT:this.switchBot,TEST_CONVERSATION:this.testReturned,POLL_CONVERSATION:this.pollingReturned,UPDATE_LAYOUT:this.updateLayoutHandler,SEND_ATTACHMENT:this.addAttachment,RESET_RESULTS:this._resetResults,DOWNLOAD_CONVERSATION:this.bindings.downloadConversation,REPLAY_CONVERSATION:this.bindings.replayConversation})},setUserProfile:function(){this.bindings.userProfile=i.getUser();var t={};if(this.bindings.userProfile.username){var e=this.bindings.userProfile.username.split(" ");1===e.length?t.firstName=e[0]:2===e.length?(t.firstName=e[0],t.lastName=e[1]):t.firstName=this.bindings.userProfile.username}t.timezoneOffset=60*(new Date).getTimezoneOffset()*1e3,this.log("locale",t.locale),_.defaults(this.bindings.userProfile,t),this.log("userProfile",this.bindings.userProfile),this.bindings.userId=(this.bindings.userProfile.userId?this.bindings.userProfile.userId:"")+r(1e6,9999999)},sendUtterance:function(t){if(this.bindings.timeLastTested=Date.now(),this.bindings.isTesting(!0),this.notify({TEST_CONVERSATION:{data:{messagePayload:{text:t,type:"text"},userId:this.bindings.userId,profile:_.pick(this.bindings.userProfile,["firstName","lastName","timezoneOffset","locale"]),botId:i.getCurrentBot().id,botName:i.getCurrentBot().name,resetCounter:this.bindings.resetCounter}}},{actionSpinner:!1}),this.bindings.userPreferences().botInitialUA){var e=this.bindings.userPreferences();e.botInitialUA=!1,this.bindings.userPreferences(e)}},sendLocation:function(t){this.bindings.timeLastTested=Date.now(),this.bindings.isTesting(!0),this.notify({TEST_CONVERSATION:{data:{messagePayload:{location:t,type:"location"},userId:this.bindings.userId,profile:_.pick(this.bindings.userProfile,["firstName","lastName","timezoneOffset","locale"]),botId:i.getCurrentBot().id,botName:i.getCurrentBot().name,resetCounter:this.bindings.resetCounter}}},{actionSpinner:!1})},sendAttachment:function(t){this.bindings.timeLastTested=Date.now(),this.bindings.isTesting(!0),this.notify({TEST_CONVERSATION:{data:{messagePayload:{attachment:t,type:"attachment"},userId:this.bindings.userId,profile:_.pick(this.bindings.userProfile,["firstName","lastName","timezoneOffset","locale"]),botId:i.getCurrentBot().id,botName:i.getCurrentBot().name,resetCounter:this.bindings.resetCounter}}},{actionSpinner:!1})},sendPostback:function(t){this.bindings.timeLastTested=Date.now(),this.bindings.isTesting(!0),this.notify({TEST_CONVERSATION:{data:{messagePayload:{postback:t,type:"postback"},userId:this.bindings.userId,profile:_.pick(this.bindings.userProfile,["firstName","lastName","timezoneOffset","locale"]),botId:i.getCurrentBot().id,botName:i.getCurrentBot().name,resetCounter:this.bindings.resetCounter}}},{actionSpinner:!1})},postback:function(t){"postback"===t.type&&t.postback&&t.label&&""!==t.label&&""!==t.label.trim()&&(this.bindings.uiConversation.push({id:this.bindings.lastId,type:"text",text:t.label,party:0,selected:ko.observable(!1)}),this.bindings.lastId++,this.sendPostback(t.postback),this.updateLayout())},openUrl:function(t){if("url"===t.type&&t.url){var e=window.open(t.url,"_blank");e.focus()}},callNumber:function(t){if("call"===t.type&&t.phoneNumber){var e=window.open("tel:"+(0===t.phoneNumber.indexOf("+")?t.phoneNumber:"+"+t.phoneNumber),"_blank");e.focus()}},displayLocationSent:function(t,e){if(e&&e.latitude&&e.longitude){var i={label:n.translate("datester.conversation.location.mapAction"),url:d(e.latitude,e.longitude),type:"url"};this.bindings.uiConversation.push({id:this.bindings.lastId,type:"location",location:{title:t,latitude:e.latitude,longitude:e.longitude},actions:[i],party:0,selected:ko.observable(!1)}),this.bindings.lastId++,this.updateLayout(),this.sendLocation({latitude:e.latitude,longitude:e.longitude})}},requestLocation:function(t){var e=this;if("location"===t.type){var i={latitude:37.2900055,longitude:-121.906558};"https"===window.location.protocol||"localhost"===window.location.hostname?"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(t){e.log(t.coords),e.displayLocationSent(n.translate("datester.conversation.message.location.available"),t.coords)}):e.displayLocationSent(n.translate("datester.conversation.message.location.notSupported"),i):e.displayLocationSent(n.translate("datester.conversation.message.location.notAvailable"),i)}},addText:function(t){""!==t&&""!==t.trim()&&(this.bindings.uiConversation.push({id:this.bindings.lastId,type:c(t.trim())?"link":"text",text:t.trim(),party:0,selected:ko.observable(!1)}),this.bindings.lastId++,this.sendUtterance(t),this.updateLayout())},logResponseMsg:function(t,e,i,n,s,o){s?o?this.log(t,"for",e.botName,"to be processed"):this.log(t,"for",e.botName,"already reset at counter",i.resetCounter):o?this.log(t,"for",e.botName,"not for current bot",n):this.log(t,"for",e.botName,"not for current bot",n,"and already reset at counter",i.resetCounter)},updateLayout:function(t){this.scrollToBottom()},selectInput:function(){setTimeout(function(){$("#datester-input").select()},50)},scrollToBottom:function(){setTimeout(function(){var t=document.getElementById("datester-form-container");t.scrollTop=t.scrollHeight},100)},updateConversation:function(){this.notify({UPDATE_LAYOUT:{data:{bot:!0}}},{actionSpinner:!1})},processResponses:function(t,e){t.responses.length>0&&(u(e),h(t,e)),_.each(t.responses,function(t){if(t.messagePayload){if(t.rawMessagePayload=JSON.parse(JSON.stringify(t.messagePayload)),"text"===t.messagePayload.type)t.messagePayload.actions?t.messagePayload.type="choice":c(t.messagePayload.text.trim())&&(t.messagePayload.type="link");else if("location"===t.messagePayload.type){if(!t.messagePayload.location.url&&!t.messagePayload.actions&&t.messagePayload.location.latitude&&t.messagePayload.location.longitude&&(t.messagePayload.location.url=d(t.messagePayload.location.latitude,t.messagePayload.location.longitude)),t.messagePayload.location.url&&!t.messagePayload.actions){t.messagePayload.actions=[];var i={label:"Open Map",url:t.messagePayload.location.url,type:"url"};t.messagePayload.actions.push(i)}}else"raw"===t.messagePayload.type&&(t.messagePayload.text=JSON.stringify(t.messagePayload.payload));_.bind(l,e)(t.messagePayload,t.rawMessagePayload)}}),this.bindings.selectConversation(_.last(ko.unwrap(this.bindings.uiConversation)))},processError:function(t,i){u(i),404===t.status?e.showWarning(n.translate("datester.messages.failure.disabledTestChannel")):e.showI18nError(t,"datester.messages.failure.testBot")},continuePolling:function(t,e,i,n){if(n)i.isPolling||(i.isPolling=!0,this.doPolling(t,e,i));else{var s=Date.now();if(s-i.timeLastTested<this.__static__.POLL_WINDOW_MS){var o=this;setTimeout(function(){o.doPolling(t,e,i)},500)}else u(i),i.isPolling=!1}},doPolling:function(t,e,i){this.notify({POLL_CONVERSATION:{data:{userId:i.userId,botId:t,botName:e,resetCounter:i.resetCounter}}},{actionSpinner:!1})},updateLayoutHandler:function(t){t&&t.bot&&(t.skipScroll?this.updateLayout(!0):this.updateLayout())},testReturned:function(t){this.handleTestResult(_.extend(t,{startPoll:!0}))},handleTestResult:function(t){var e=i.getCurrentBot().id,n=i.getCurrentBot().name,s=t.startPoll?"Test Responses":"Polling Responses";t.status&&t.status<=204?t.botId===e?t.resetCounter===this.bindings.resetCounter?(t.data&&"object"==typeof t.data&&t.data.responses&&t.data.responses.length>0&&(this.processResponses(t.data,this.bindings),this.updateLayout()),this.continuePolling(t.botId,t.botName,this.bindings,t.startPoll),this.logResponseMsg(s,t,this.bindings,n,!0,!0)):this.logResponseMsg(s,t,this.bindings,n,!0,!1):t.resetCounter===b.state[t.botId].resetCounter?(t.data&&"object"==typeof t.data&&t.data.responses&&t.data.responses.length>0&&this.processResponses(t.data,b.state[t.botId]),
this.continuePolling(t.botId,t.botName,b.state[t.botId],t.startPoll),this.logResponseMsg(s,t,b.state[t.botId],n,!1,!0)):this.logResponseMsg(s,t,b.state[t.botId],n,!1,!1):t.status&&t.status>204&&(t.botId===e?t.resetCounter===this.bindings.resetCounter?(this.processError(t,this.bindings),this.logResponseMsg(s+" Error",t,this.bindings,n,!0,!0)):this.logResponseMsg(s+" Error",t,this.bindings,n,!0,!1):t.resetCounter===b.state[t.botId].resetCounter?(this.processError(t,b.state[t.botId]),this.logResponseMsg(s+" Error",t,b.state[t.botId],n,!1,!0)):this.logResponseMsg(s+" Error",t,b.state[t.botId],n,!1,!1))},pollingReturned:function(t){this.handleTestResult(_.extend(t,{startPoll:!1}))},addAttachment:function(t){if(t&&t.type&&1===t.type.length&&["image","video","audio","file"].includes(t.type[0])&&t.url){var e={type:t.type[0],url:t.url,title:t.title};this.bindings.uiConversation.push({id:this.bindings.lastId,type:"attachment",attachment:e,party:0,selected:ko.observable(!1)}),this.bindings.lastId++,$(this.config.attachBaseElement).ojDialog("close"),this.updateLayout(),this.sendAttachment(e)}},switchBot:function(t){t&&t.previousBot&&(this.log("switch bot from",t.previousBot.id,"to",t.selectedBot.id),this.saveState(t.previousBot.id),this.restoreState(t.selectedBot.id),this.bindings.jsonResults().length>0&&$("#tester-bot-jsonSection").length>0&&$("#tester-bot-jsonSection").ojCollapsible("option","expanded")!==this.bindings.expandedJson&&$("#tester-bot-jsonSection").ojCollapsible("option","expanded",this.bindings.expandedJson),this.updateConversation(),this.selectInput())},saveState:function(t){b.state[t]={uiConversation:this.bindings.uiConversation(),lastId:this.bindings.lastId,userId:this.bindings.userId,itemToAdd:this.bindings.itemToAdd(),jsonResults:this.bindings.jsonResults(),isPolling:this.bindings.isPolling,isTesting:this.bindings.isTesting(),timeLastTested:this.bindings.timeLastTested,expandedJson:this.bindings.expandedJson,resetCounter:this.bindings.resetCounter},this.log("Saving state for",t),this.log(b.state[t])},restoreState:function(t){if(b.state[t]){var e=b.state[t];this.bindings.uiConversation(e.uiConversation),this.bindings.lastId=e.lastId,this.bindings.userId=e.userId,this.bindings.itemToAdd(e.itemToAdd),this.bindings.jsonResults(e.jsonResults),this.bindings.isPolling=e.isPolling,this.bindings.isTesting(e.isTesting),this.bindings.timeLastTested=e.timeLastTested,this.bindings.expandedJson=e.expandedJson,this.bindings.resetCounter=e.resetCounter}else this.bindings.resetTest(!0);this.bindings.uiConversation().length&&this.bindings.selectConversation(_.last(ko.unwrap(this.bindings.uiConversation))),this.log("Restoring state for",t),this.log(b.state[t])},_resetResults:function(){this.bindings.resetTest(!1)},_downloadJson:function(t){var e,i,n=JSON.stringify(t.data,null,"\t");i=t.filename||"tester-conversation.json",n.match(/^data:application\/json/i)||(n="data:application/json;charset=utf-8,"+n),e=encodeURI(n),require("suite.security.csrf").downloadFile(e,i)},_resetToState:function(t,e){_.each(t,_.bind(function(t){e&&e.id<t.id||0===t.party&&"text"===t.type&&setTimeout(_.bind(function(){this.bindings.itemToAdd(t.text),this.bindings.sendText()},this),2e3*t.id)},this))}});return g}),define("bots.package.datester/view.json",["module","bots.package.view/dialog","bots.i18n"],function(t,e,i){var n,s=e.extend({module:t,name:"ViewJsonDialog"},{__static__:{DA_TESTER_VIEW_JSON_DIALOG_SELECTOR:"#datester-view-json-dialog"},config:{type:"ojDialog"},bindings:{json:{func:ko.observable},closeDialog:function(){},openDialog:function(){}},setupEventHandlers:function(){$(this.__static__.DA_TESTER_VIEW_JSON_DIALOG_SELECTOR).on("ojclose",this.bindings.closeDialog),$(this.__static__.DA_TESTER_VIEW_JSON_DIALOG_SELECTOR).on("ojopen",this.bindings.openDialog)},bindView:function(t){this._super(t),this.setupEventHandlers()},rebindView:function(t){this._super(t),this.bindView(t)},ViewJsonDialog:function(t){this._super(t)},resetFields:function(t){this._super(t)},open:function(t,e){return this.config.resetFieldsOnOpen=!1,this._super(),n=$.Deferred()}});return s}),define("bots.package.datester/view.details",["module","suite.package.util/messaging","bots.config","bots.i18n","bots.package.view/view","bots.package.datester/facade","bots.package.datester/dataobject","bots.package.datester/enums","bots.package.datester/view.json","ojs/ojfilmstrip"],function(t,e,i,n,s,o,a,r,l){var d=s.extend({module:t,name:"DetailsView"},{deps:{i18n:n,facade:o,botsConfig:i},__static__:{INTENT_SELECTED_CSS:"intent-selected",INTENT_REJECTED_CSS:""},currentBotId:null,bindings:{testerEnums:r,botsConfig:i,conversationDO:{cls:a.BotTesterConversationDataObject,args:[]},intentsDVSeriesSource:{func:ko.observable},intentsDVGroupSource:{func:ko.observable,args:[]},qnaCategoriesDVSeriesSource:{func:ko.observable},qnaCategoriesDVGroupSource:{func:ko.observable,args:[]},variablesTreeDS:{func:ko.observable},intentListDS:{func:ko.observable},entityListDS:{func:ko.observable},qnaAnswerMatchListDS:{func:ko.observable},qnaCategoryMatchListDS:{func:ko.observable},qnaSearchConfigurationTreeDS:{func:ko.observable},qnaQueryTreeDS:{func:ko.observable},actionsPostbackListDS:{func:ko.observable},actionsUrlListDS:{func:ko.observable},actionsCallListDS:{func:ko.observable},globalActionsPostbackListDS:{func:ko.observable},globalActionsUrlListDS:{func:ko.observable},globalActionsCallListDS:{func:ko.observable},fullJson:{func:ko.observable},json:{func:ko.observable},jsonSearchValue:{func:ko.observable},executedStates:{func:ko.observable},stateDiagramData:{func:ko.observable},currentDialogState:{func:ko.observable},renderResults:{func:ko.observable,args:[!1]},jsonFilter:{func:ko.observable},viewingAllVariables:{func:ko.observable},showRoutingTimelineView:{func:ko.observable},ViewJsonDialog:{func:function(){return new l({baseElement:this.config.viewJsonBaseElement,contentElement:this.config.viewJsonBaseElement,parentView:this})}},handleKeyUpJsonFilter:function(t,e){var i=this.bindings.fullJson();i&&(""===e.value?this.bindings.json(i):this.bindings.json(this._filterKeyAndValue(i,e.value,[])))},processConversation:function(t){var e=t;this._displayJson(e),this._processConversation(e)},resetResults:function(){this.log("reset conversation"),this._displayJson({}),this._processConversation({}),this.bindings.renderResults(!1)},downloadFileURL:function(){return"data:application/octet-stream,"+encodeURIComponent(JSON.stringify(this.bindings.json(),null,2))},downloadFileName:function(){return i.getCurrentBot().name+"_conversation.json"},downloadFileAction:function(){require("suite.security.csrf").downloadFile(this.downloadFileURL(),this.downloadFileName())},downloadFile:function(t,e){var i=$("#datester-details-json-saveFileLink");i&&i.length>0?i[0].click():this.error("Could not locate link to download JSON")},viewAllVariables:function(){this.bindings.viewingAllVariables(!0),this.bindings.variablesTreeDS(new oj.JsonTreeDataSource(this.bindings.conversationDO.allVariables()))},viewLessVariables:function(){this.bindings.viewingAllVariables(!1),this.bindings.variablesTreeDS(new oj.JsonTreeDataSource(this.bindings.conversationDO.variables()))},styleDefaults:{nodeDefaults:{icon:{width:60,height:60,shape:"circle"}},linkDefaults:{color:"#ccd2d7",endConnectorType:"arrow",width:2}},containerLayout:function(t){for(var e=t.getNodeCount(),i=0,n=0;n<e;n++){var s=t.getNodeByIndex(n);s.isDisclosed()&&s.getChildNodes()&&this._layoutParent(t,s.getChildNodes());var o=s.getContentBounds();s.setPosition({x:i,y:-o.y-.5*o.h}),this._positionLabel(s),i+=o.w+50}for(var a=t.getLinkCount(),r=0;r<a;r++)this._createLink(t,t.getLinkByIndex(r))},onClickViewJson:function(t){this.bindings.ViewJsonDialog.bindings.json(t),this.bindings.ViewJsonDialog.open()},computeColor:function(t,e){if(e.score<t.confidenceThreshold)return this.__static__.INTENT_REJECTED_CSS;if(t.considerAllConfidenceThreshold<=e.score&&t.considerAllConfidenceThreshold>=0)return this.__static__.INTENT_SELECTED_CSS;var i=_.first(t.intentResult.intentMatches.summary).score;return e.score>i-t.confidenceWinMargin?this.__static__.INTENT_SELECTED_CSS:this.__static__.INTENT_REJECTED_CSS},computeExplicitInvocationColor:function(t,e){return e.score<t.confidenceThreshold?this.__static__.INTENT_REJECTED_CSS:this.__static__.INTENT_SELECTED_CSS},limitToTwoDecimalPlacesPercentageValue:function(t){return Math.floor(1e4*t)/100}},DetailsView:function(t){this._super(t)},initModule:function(t){if(this._super(t)){var e=this;this.listen({SHOW_DETAILS:e.bindings.processConversation,BOT_SELECT:this._resetResults,RESET_RESULTS:this._resetResults})}},loadModule:function(t){},reloadModule:function(t){},_displayJson:function(t){this.bindings.fullJson(t.rawJson||{}),this.bindings.json(t.rawJson||{})},_processConversation:function(t){this.currentBotId=t.currentBotId,this.bindings.conversationDO.fromJS(t),this.bindings.viewingAllVariables(!1),this.bindings.showRoutingTimelineView(!1),this.bindings.variablesTreeDS(new oj.JsonTreeDataSource(this.bindings.conversationDO.variables()||[])),this.bindings.intentListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.intentMatches()||[])),this.bindings.entityListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.entityMatches()||[])),this.bindings.actionsPostbackListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.actions().postback||[])),this.bindings.actionsUrlListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.actions().url||[])),this.bindings.actionsCallListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.actions().call||[])),this.bindings.globalActionsPostbackListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.globalActions().postback||[])),this.bindings.globalActionsUrlListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.globalActions().url||[])),this.bindings.globalActionsCallListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.globalActions().call||[])),this.bindings.currentDialogState=this.bindings.conversationDO.currentDialogState,this.bindings.executedStates=ko.unwrap(this.bindings.conversationDO.executedStates)?this.bindings.conversationDO.executedStates:ko.observable([ko.unwrap(this.bindings.conversationDO.currentDialogState)]),this.bindings.stateDiagramData(new oj.JsonDiagramDataSource({nodes:this.bindings.conversationDO.stateDiagramNodes(),links:this.bindings.conversationDO.stateDiagramLinks()}));var e=[{name:"",items:[]}],i=[],n=new oj.ColorAttributeGroupHandler;_.each(this.bindings.conversationDO.intentMatches(),function(t,s){e[0].items.push({y:100*t.score,z:100,label:100*t.score,color:n.getValue(s)}),i.push(t.intent)}),this.bindings.intentsDVSeriesSource(e),this.bindings.intentsDVGroupSource(i);var s=[{name:"",items:[]}],o=[];_.each(this.bindings.conversationDO.qnaDO.qnaCategoryMatchList(),function(t,e){s[0].items.push({y:t.count,z:100,label:t.count,color:n.getValue(e)}),o.push(t.category.name)}),this.bindings.qnaCategoriesDVSeriesSource(s),this.bindings.qnaCategoriesDVGroupSource(o),this.bindings.qnaSearchConfigurationTreeDS(new oj.JsonTreeDataSource(this.bindings.conversationDO.qnaDO.qnaResultsSearchConfiguration())),this.bindings.qnaQueryTreeDS(new oj.JsonTreeDataSource(this.bindings.conversationDO.qnaDO.qnaResultsQuery())),this.bindings.qnaAnswerMatchListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.qnaDO.qnaAnswerMatchList())),this.bindings.qnaCategoryMatchListDS(new oj.ArrayTableDataSource(this.bindings.conversationDO.qnaDO.qnaCategoryMatchList())),this.bindings.renderResults(!0)},_filterKeyAndValue:function(t,e,i){if(t&&e)for(var n in t)t.hasOwnProperty(n)&&("string"==typeof n&&n.toLowerCase().search(e.toLowerCase())>-1?i=this._appendToResult(n,t[n],i):"object"==typeof t[n]?this._filterKeyAndValue(t[n],e,i):t[n]&&"string"==typeof t[n]&&t[n].toLowerCase().search(e.toLowerCase())>-1&&(i=this._appendToResult(n,t[n],i)));return i},_appendToResult:function(t,e,i){var n={};return n[t]=e,i.push(n),i},bindView:function(t){this._super(t),this.bindings.ViewJsonDialog.bindView()},_resetResults:function(){this.bindings.resetResults(!1)},_layoutChildren:function(t,e){for(var i=20,n=0,s=0,o=e.length,a=0;a<o;a++){var r=e[a];r.getChildNodes()&&this._layoutChildren(t,r.getChildNodes());var l=r.getContentBounds();r.setPosition({x:n-l.x-.5*l.w,y:s}),this._positionLabel(r),n+=l.h+i}},_layoutParent:function(t,e){for(var i=20,n=0,s=0,o=e.length,a=0;a<o;a++){var r=e[a];r.getChildNodes()&&this._layoutChildren(t,r.getChildNodes());var l=r.getContentBounds();r.setPosition({x:n-l.x-.5*l.w,y:s}),this._positionLabel(r),s+=l.h+i}},_positionLabel:function(t){var e=t.getContentBounds(),i=t.getPosition(),n=t.getLabelBounds(),s=0;if(n){s=t.isDisclosed()?e.y+i.y+.5*(20-n.h):e.y+i.y+.5*(e.h-n.h);var o=e.x+i.x+.5*e.w;t.setLabelPosition({x:o,y:s}),t.setLabelHalign("center")}},_createLink:function(t,e){var i=e.getStartId(),n=e.getEndId(),s=t.getNodeById(i),o=t.getNodeById(n),a=t.getCommonContainer(i,n),r=s.getRelativePosition(a),l=o.getRelativePosition(a);e.setCoordinateSpace(a);var d,c,u,h,b=s.getBounds(),g=o.getBounds(),f=.5*(r.x+b.w),p=.5*(l.x+g.w);if(Math.abs(f-p)<10){var m=.5*(r.y+b.h),v=.5*(l.y+g.h);d=r.x+.5*b.w,u=l.x+.5*g.w,m<v?(c=r.y+b.h+e.getStartConnectorOffset(),h=l.y-e.getEndConnectorOffset()):(c=r.y-e.getEndConnectorOffset(),h=l.y+g.h+e.getStartConnectorOffset()),e.setPoints(this._createVerticalLinkPath(d,c,u,h))}else f<p?(d=r.x+b.x+b.w+e.getStartConnectorOffset(),u=l.x-e.getEndConnectorOffset()):(d=r.x-e.getStartConnectorOffset(),u=l.x+g.x+g.w+e.getEndConnectorOffset()),c=r.y+b.y+.5*b.h,h=l.y+g.y+.5*g.h,e.setPoints(this._createSideLinkPath(d,c,u,h));var _=e.getLabelBounds();if(_){var y=d,w=c-_.h;e.setLabelPosition({x:y,y:w})}},_createSideLinkPath:function(t,e,i,n){var s=["M",t,e],o=this._random(.2,.8),a=t+o*(i-t),r=e+o*(n-e),l=a,d=e,c=a,u=n;return s.push("Q"),s.push(l),s.push(d),s.push(a),s.push(r),s.push("Q"),s.push(c),s.push(u),s.push(i),s.push(n),s},_createVerticalLinkPath:function(t,e,i,n){var s=["M",t,e];return s.push("L"),s.push(i),s.push(n),s},_random:function(t,e){var i=e-t;return t+Math.random()*i}});return d}),define("bots.package.datester/bot.replay.conversation.file",["module","bots.package.shell/validators","bots.package.view/dialog","bots.i18n"],function(t,e,i,n){var s,o=i.extend({module:t,name:"BotReplayConversationFileDialog"},{__static__:{CHUNK_SIZE:102400},config:{type:"ojDialog"},bindings:{botsValidators:e,fileInfo:{func:ko.observable,args:[{}]},fileError:{func:ko.observable,args:[""]},fileStatus:{func:ko.observable,args:["none"]},fileObjects:[],limits:{MAX_FILE_SIZE_MB:20,MAX_LINES:50001},loadBotFile:function(t){t.target.files&&t.target.files.length>0&&this.handleLoadedFile(t.target.files[0])},testBotFile:function(t){this.close();var e={data:{conversation:_.clone(this.bindings.fileObjects)}};this.notify({REPLAY_CONVERSATION:e},{actionSpinner:!1})},closeDialog:function(){},openDialog:function(){this.bindings.fileStatus("none"),$("#botConversationReplayFileUploadDropzone").removeClass("error"),this.bindings.fileInfo({}),this.bindings.fileError(""),this.bindings.fileObjects=[],setTimeout(function(){$("#botConversationReplayFileUploadLink").blur()},50)},clickUpload:function(){var t=$("#botConversationReplayFileUploadFile");t.length>0&&(t[0].value=null),$("#botConversationReplayFileUploadFile").trigger("click")}},fileReference:null,setupEventHandlers:function(){var t=document.getElementById("botConversationReplayFileUploadDropzone");t.addEventListener("drop",this.handleFileSelect,!1),$("#datester-conversation-replay-file-dialog").on("ojclose",this.bindings.closeDialog),$("#datester-conversation-replay-file-dialog").on("ojopen",this.bindings.openDialog),$("#botConversationReplayFileUploadFile").on("change",this.bindings.loadBotFile)},bindView:function(t){this._super(t),this.setupEventHandlers()},rebindView:function(t){this._super(t),this.bindView(t)},showFileError:function(t){this.bindings.fileStatus("error"),$("#botConversationReplayFileUploadDropzone").addClass("error"),this.bindings.fileError(t)},handleParsing:function(t){var e=this;try{if(e.bindings.fileObjects=e.validateFileObjects(JSON.parse(t)),!e.bindings.fileObjects.length)return;e.bindings.fileObjects.length<e.bindings.limits.MAX_LINES?e.bindings.fileObjects.length>0?(e.bindings.fileStatus("ready"),$("#botConversationReplayFileUploadDropzone").removeClass("error")):this.showFileError(n.translate("datester.bot.batch.dialog.error.missingRows")):this.showFileError(n.translate("datester.bot.batch.dialog.error.longFile"))}catch(t){this.showFileError(n.translate("datester.bot.batch.dialog.error.unknown"))}},processTestFile:function(){var t=new FileReader,e=new TextDecoder,i=this;t.onload=function(t){return function(t){i.handleParsing(e.decode(t.target.result))}}(this.fileReference),t.onerror=function(){i.showFileError(t.error)},t.readAsArrayBuffer(this.fileReference)},processBigTestFile:function(){var t=this;this.readLines(this.fileReference,this.bindings.limits.MAX_LINES+1,function(e,i){if(e)t.showFileError(e);else if(i&&i.length>=t.bindings.limits.MAX_LINES+1)t.showFileError(n.translate("datester.bot.batch.dialog.error.longFile"));else{var s=i.join("\n");t.handleParsing(s)}})},readLines:function(t,e,i){function n(){if(a===e)return void i(null,l);if(0!==o&&o>=t.size)return r.trim().length>0&&l.push(r),void i(null,l);var n=t.slice(o,o+c.__static__.CHUNK_SIZE);d.readAsArrayBuffer(n)}var s=new TextDecoder,o=0,a=0,r="",l=[],d=new FileReader,c=this;d.onload=function(){r+=s.decode(d.result,{stream:!0});var t=r.split("\n");r=t.pop(),a+=t.length,a>e&&(t.length-=a-e,a=e);for(var i=0;i<t.length;++i)t[i].trim().length>0&&l.push(t[i]);o+=c.__static__.CHUNK_SIZE,n()},d.onerror=function(){i(d.error)},n()},handleLoadedFile:function(t){this.bindings.isLoading(!0),this.bindings.fileStatus("loading");var e={name:t.name,type:t.type||"n/a",size:t.size,lastModified:t.lastModifiedDate};this.bindings.fileInfo(e),this.fileReference=t,e.size<this.__static__.CHUNK_SIZE?this.processTestFile():e.size<1024*this.bindings.limits.MAX_FILE_SIZE_MB*1024?this.processBigTestFile():this.showFileError(n.translate("datester.bot.batch.dialog.error.largeFile"))},handleFileSelect:function(t){t.stopPropagation(),t.preventDefault();var e=t.dataTransfer.files;e.length>=1&&this.handleLoadedFile(e[0])},handleDragOver:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},BotReplayConversationFileDialog:function(t){this._super(t)},resetFields:function(t){this._super(t)},open:function(t,e){return this._super(),s=$.Deferred()},validateFileObjects:function(t){return 0===t.length?(this.showFileError(n.translate("datester.bot.batch.dialog.error.missingRows")),[]):_.contains(_.keys(t[0]),"id","type","text","party")?t:(this.showFileError(n.translate("datester.bot.batch.dialog.error.missingColumns")),[])}});return o}),define("bots.package.datester/view.main",["module","suite.package.shell/shell","bots.config","bots.i18n","bots.package.view/dialog","bots.package.shell/context.header","bots.package.datester/facade","bots.package.datester/view.bot","bots.package.datester/view.details","bots.package.datester/bot.replay.conversation.file"],function(t,e,i,n,s,o,a,r,l,d){var c=s.extend({module:t,name:"DATesterMainView"},{deps:{i18n:n,facade:a,botsConfig:i},heights:{client:0,brandBar:0,contextHeader:0,testerBar:0,testerTab:0,testerBottom:0,testerBottomQnA:0,batchHeight:0},previousClosedTop:void 0,previousOpenTop:void 0,bindings:{i18n:n,currentBot:i.currentBot,resetTest:function(){this.bindings.FullPageTesterView.bindings.resetTest(),this.bindings.DetailsView.bindings.resetResults()},saveTest:function(){this.notify({DOWNLOAD_CONVERSATION:{}})},uploadAndReplayConversation:function(){this.notify({REPLAY_CONVERSATION:{}})},testBotName:{func:ko.observable,args:[]},replayFile:function(t,e){this.bindings.BotReplayConversationFileDialog.open()},menuItemSelect:function(t,e){"replay"===e.item[0].id?this.bindings.replayFile():"download"===e.item[0].id&&this.bindings.saveTest()},FullPageTesterView:{func:function(){return new r({isSubView:!0,baseElement:"#datester-pane",contentElement:"#datester-pane",baseTemplate:"bots/datester/bot/bot-pane",baseTemplateElement:"#datester",attachBaseElement:"#datester-attach-dialog",baseTemplateData:i.templateData})}},DetailsView:{func:function(){return new l({isSubView:!0,baseElement:"#datester-details >",contentElement:"#datester-details-view",baseTemplate:"bots/datester/bot/details",baseTemplateElement:"#datester-details",testerType:"datester",baseTemplateData:i.templateData,viewJsonBaseElement:"#datester-view-json-dialog"})}}},DATesterMainView:function(t){this._super(t)},loadModule:function(t){return!!this._super(t)&&void(this.options=t.options)},open:function(){this._super()},initModule:function(t){this._super(t)&&this.listen({RESET_SYSTEM_CHANNEL_SESSIONS:this.bindings.resetTest,BOT_SELECT:this.botSwitchListener})},bindView:function(t){this._super(t),this.bindings.FullPageTesterView.bindView()},renderView:function(t){this._super(t),this.bindings.testBotName(this.config.parentView.bindings.bot().displayName()||this.config.parentView.bindings.bot().name()),this.bindings.FullPageTesterView.renderView(t),this.bindings.DetailsView.renderView(t)},botSwitchListener:function(t){t&&t.selectedBot&&this.bindings.testBotName(t.selectedBot.displayName||t.selectedBot.name)}});return c}),function(){utils.loadStylesheet("bots-datester-css","resources/css/datester.min.css"),require(["bots.libraries.dvt","bots.templates/datester","bots.package.datester/model","bots.package.datester/dataobject","bots.package.datester/facade","bots.package.datester/view.main","bots.package.datester/view.bot","bots.package.datester/view.details","bots.package.datester/enums"]),define("bots.package.datester/package.main",["ojs/ojtable","ojs/ojchart","ojs/ojdiagram","ojs/ojjsondiagramdatasource"])}(),define("bots.package.datester",["bots.package.datester/package"],function(t){return t}),define("bots.package.datester/package",function(){}),function(t){function e(t,e){return t.w('<div id="').f(e.get(["idPrefix"],!1),e,"h").w('-skills-filter" class="bots-helper-max-width"><!-- ko ifnot: $root.filterEditMode() -->').p("bots/insightscommon/botsfilter/view",e,e,{}).w("<!-- /ko --><!-- ko if: $root.filterEditMode() -->").p("bots/insightscommon/botsfilter/edit",e,e,{}).w("<!-- /ko --></div>")}return t.register("bots/insightscommon/bots.filter",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="oj-flex bots-helper-max-width">    <div class="oj-flex-item oj-sm-12"><div class="oj-flex bots-helper-max-width oj-sm-flex-items-initial oj-sm-align-items-center"><div class="oj-flex-item bots-helper-margin-right-10"><label data-bind="attr: {  for: \'').f(e.get(["idPrefix"],!1),e,"h").w("' +'-filter-bots'}\">").h("i18n",e,{},{key:"dainsights.common.filterBySkills"},"h").w("</label></div><div class=\"oj-flex-item bots-helper-margin-right-10 oj-sm-9\" ><select data-bind=\"ojComponent: {component: 'ojSelect',multiple: true,options: $root.botsList(),value: $root.selectedBots,placeholder: $root.i18n.translate('dainsights.common.selectSkill'),rootAttributes: {class: 'bots-helper-max-width'} },attr:{id: '").f(e.get(["idPrefix"],!1),e,"h").w("' +'-filter-bots'  }\"></select> </div><div class=\"oj-flex-item\"><button data-bind=\"ojComponent: {component: 'ojButton',chroming: 'half',display: 'icons',icons: {start: 'bots-svgsprite-func-icon bots-onb-icon'},label: $root.i18n.translate('dainsights.common.done')}, click: $root.applyFilter,inlinesvg: {width: 16, height: 16, project: 'bots', basename: 'func_checkmark_16'}\"></button></div><div class=\"oj-flex-item\"><button data-bind=\"ojComponent: {component: 'ojButton',chroming: 'half',display: 'icons',icons: {start: 'bots-svgsprite-func-icon bots-onb-icon'},label: $root.i18n.translate('dainsights.common.cancel')}, click: $root.cancelFilter,inlinesvg: {width: 16, height: 16, project: 'bots', basename: 'func_delete_16'}\"></button></div></div></div></div>")}return t.register("bots/insightscommon/botsfilter/edit",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w("<div class=\"oj-flex bots-helper-max-width oj-sm-align-items-center oj-sm-flex-items-initial\"><div class=\"oj-flex-item bots-helper-padding-right-10\"><button class=\"bots-no-margin\" data-bind=\"ojComponent: {component: 'ojButton',chroming: 'half',display: 'icons',icons: {start: 'bots-svgsprite-func-icon bots-onb-icon'},label: $root.i18n.translate('dainsights.common.editFilter')}, click: toggleMode,inlinesvg: {width: 16, height: 16, project: 'bots', basename: 'func_edit_16'}\"></button></div><div class=\"oj-flex-item\" data-bind=\"visible: _.isEmpty($root.selectedBots())\"><span>").h("i18n",e,{},{key:"dainsights.common.all"},"h").w("</span></div><!-- ko ifnot: _.isEmpty($root.selectedBots())--><div class=\"oj-flex-item\"><div data-bind=\"ojComponent: {component: 'ojButtonset', checked: $root.filteredBots,optionChange: $root.filterReports},attr: {id: '").f(e.get(["idPrefix"],!1),e,"h").w("' +'-filter-bots' }\"><!-- ko foreach: $root.selectedBots--><div class=\"oj-col bots-helper-padding-right-5\"><label data-bind=\"attr: {  for: '").f(e.get(["idPrefix"],!1),e,"h").w("' +'-' + $data},text: $data\"></label><input type=\"checkbox\" data-bind=\"attr: {id: '").f(e.get(["idPrefix"],!1),e,"h").w("' +'-' + $data},value: $data\"></div><!-- /ko--></div></div><!-- /ko--></div>")}return t.register("bots/insightscommon/botsfilter/view",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["id"],!1),e,"h").w('-date-picker" class="').f(e.get(["class"],!1),e,"h").w('"><button id="').f(e.get(["id"],!1),e,"h").w('-daterange-button" tabIndex="0" aria-label="').h("i18n",e,{},{key:"daterange.picker.open",filter:"h"},"h").w("\"class=\"green-button shell-daterange-button bots-no-margin\" data-bind=\"ojComponent: {component: 'ojButton',label: dateRangeLabel,display: 'all',chroming: 'outlined',icons: {start: 'bots-svgsprite-func-icon right'}}, inlinesvg: {width: 16, height: 16, project: 'bots', basename: 'func_appmenuarrow_16'},click: showDateRangePicker\"></button><div id=\"").f(e.get(["id"],!1),e,"h").w("-daterange-picker\" class=\"bots-helper-hidden\" data-bind=\"ojComponent: {component: 'ojPopup','position': {'at': {horizontal: 'center', vertical: 'bottom'}, 'my': selectedDateRange() === '").f(e.get(["id"],!1),e,"h").w("-custom' ? {horizontal: 'right', vertical: 'top'} : {horizontal: 'center', vertical: 'top'}},'tail': 'simple',rootAttributes: {class: 'shell-daterange-picker'}},css: {'custom-daterange': selectedDateRange() === '").f(e.get(["id"],!1),e,"h").w('-custom\'}"><div class="oj-flex"><!-- ko if: dateRanges().length --><div id="').f(e.get(["id"],!1),e,"h").w('-daterange-list" class="oj-flex-item" data-bind="ojComponent: {component: \'ojNavigationList\',drillMode: \'none\',selection: selectedDateRange,optionChange: selectDateRange,rootAttributes: {class: \'daterange-list\'}}"><ul data-bind="foreach: dateRanges"><li data-bind="attr: {id: \'').f(e.get(["id"],!1),e,"h").w('-\'+$data.id}"><a href="#" data-bind="text: $root.i18n.translate(\'retrainer.landing.elapsedTime.\' + $data.id)"></a></li></ul></div><!-- /ko --><!-- ko if: selectedDateRange() === \'').f(e.get(["id"],!1),e,"h").w('-custom\' --><div class="oj-flex-item oj-flex"><div class="oj-flex-item calendar-section"><div><input aria-label="').h("i18n",e,{},{key:"daterange.picker.startDate",filter:"h"},"h").w('" data-bind="ojComponent: {component: \'ojInputText\',value: customStartDate,max: customEndDate() || oj.IntlConverterUtils.dateToLocalIso(new Date()),converter: customDateConverter,validators: [customStartDateValidator]}"/></div><div data-bind="ojComponent: {component: \'ojInputDate\',value: customStartDate,max: customEndDate() || oj.IntlConverterUtils.dateToLocalIso(new Date()),converter: customDateConverter,validators: [customStartDateValidator]}"></div></div><div class="oj-flex-item"><div><input aria-label="').h("i18n",e,{},{key:"daterange.picker.endDate",filter:"h"},"h").w('" data-bind="ojComponent: {component: \'ojInputText\',value: customEndDate,min: customStartDate,max: oj.IntlConverterUtils.dateToLocalIso(new Date()),converter: customDateConverter,validators: [customEndDateValidator]}"/></div><div data-bind="ojComponent: {component: \'ojInputDate\', value: customEndDate,min: customStartDate,max: oj.IntlConverterUtils.dateToLocalIso(new Date()),converter: customDateConverter,validators: [customEndDateValidator]}"></div><div><button class="right gray-button" data-bind="ojComponent: {component: \'ojButton\',label: $root.i18n.translate(\'general.cancel\')},click: cancelCustomDateRange"></button><button class="right blue-button" data-bind="ojComponent: {component: \'ojButton\',label: $root.i18n.translate(\'general.apply\')},click: applyCustomDateRange"></button></div></div>    </div><!-- /ko --></div></div></div>')}return t.register("bots/insightscommon/header.date.picker",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<label class="oj-label oj-label-inline" for="').f(e.get(["timeId"],!1),e,"h").w('-last-updated">').h("i18n",e,{},{key:"insights.common.lastUpdated"},"h").w('</label><span id="').f(e.get(["timeId"],!1),e,"h").w('-last-updated"  data-bind="text: ').f(e.get(["lastUpdated"],!1),e,"h").w("\"class=\"oj-sm-align-self-center suite-helper-padding-right-10\"></span><button class=\"suite-no-margin\"data-bind=\"ojComponent: {component: 'ojButton',display: 'icons',chroming: 'half',icons: {start: 'bots-svgsprite-func-icon bots-onb-icon'},label: $root.i18n.translate('general.refresh')}, inlinesvg: {width: 16, height: 16, project: 'bots', basename: 'func_refresh_16'},click: ").f(e.get(["refresh"],!1),e,"h").w('"></button>')}return t.register("bots/insightscommon/last.updated",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div id="').f(e.get(["id"],!1),e,"h").w('-date-picker"><div class="oj-flex oj-sm-flex-items-initial oj-sm-align-items-center"><div class="oj-flex-item"><select id="').f(e.get(["id"],!1),e,"h").w("-dateranges-select\"class=\"left bots-helper-ellipsis oj-popup-content\"data-bind=\"ojComponent: { component: 'ojSelect',value: $root.selectedDateRange,optionChange: $root.selectDateRange,rootAttributes: {class: 'shell-daterange-select'}}\"><!-- ko foreach: dateRanges --><option data-bind=\"attr: { 'value': $data.id }, text: $root.i18n.translate('retrainer.landing.elapsedTime.' + $data.id)\"></option><!-- /ko --></select></div><div class=\"oj-flex-item bots-helper-margin-left-10\"><!-- ko if: _.first($root.selectedDateRange()) === 'custom' && $root.showCustomRange() --><div class='retrainer-form-custom-date-margin'><a href=\"#\" class='retrainer-form-custom-date-label'data-bind=\"text: $root.dateRangeLabel(),click: openCustomDateRange\"title=\"").h("i18n",e,{},{key:"retrainer.landing.changeDateRange",filter:"h"},"h").w('"></a></div><!-- /ko --></div></div><div id="').f(e.get(["id"],!1),e,"h").w("-daterange-picker\" class=\"bots-helper-hidden\"data-bind=\"ojComponent: {component: 'ojPopup','tail': 'simple',rootAttributes: {class: 'shell-report-daterange-picker'}}\"><div class=\"oj-flex oj-sm-align-items-center\"><div class=\"oj-flex-item bots-helper-margin-right-10\"><label for='").f(e.get(["id"],!1),e,"h").w("-report-date-picker-start-date'>").h("i18n",e,{},{key:"daterange.picker.startDate"},"h").w('</label></div><div class="oj-flex-item"><input data-bind="attr: {id: \'').f(e.get(["id"],!1),e,"h").w('-report-date-picker-start-date\'},ojComponent: {component: \'ojInputDate\',value: customStartDate,converter: customDateConverter,validators: [customStartDateValidator]}"></div></div><div class="oj-flex"><div class="oj-flex-item bots-helper-margin-right-10"><label for=\'').f(e.get(["id"],!1),e,"h").w("-report-date-picker-end-date'>").h("i18n",e,{},{key:"daterange.picker.endDate"},"h").w('</label></div><div class="oj-flex-item"><input data-bind="attr: {id: \'').f(e.get(["id"],!1),e,"h").w('-report-date-picker-end-date\'},ojComponent: {component: \'ojInputDate\',value: customEndDate,converter: customDateConverter,validators: [customEndDateValidator]}"></div></div><div class="oj-flex oj-sm-flex-items-initial oj-sm-justify-content-flex-end"><div class="oj-flex-item bots-helper-margin-right-5"><button class="blue-button"data-bind="ojComponent: {component: \'ojButton\',label: $root.i18n.translate(\'general.apply\')},click: applyCustomDateRange"></button></div><div class="oj-flex-item"><button class="gray-button"data-bind="ojComponent: {component: \'ojButton\',label: $root.i18n.translate(\'general.cancel\')},click: cancelCustomDateRange"></button></div></div></div></div>');
}return t.register("bots/insightscommon/report.date.picker",e),e.__dustBody=!0,e}(dust),function(t){function e(t,e){return t.w('<div class="progress-bar-wrapper suite-helper-max-width"><div class="oj-progressbar-embedded" data-bind="ojComponent: {component: \'ojProgressbar\',value: -1,}, visible: ko.unwrap(').f(e.get(["showProgressbar"],!1),e,"h").w(')"></div></div>').b(e.getBlock("report"),e,{block:i},{})}function i(t,e){return t}return t.register("bots/insightscommon/tile",e),e.__dustBody=!0,i.__dustBody=!0,e}(dust),define("bots.templates/insightscommon",function(){}),define("bots.package.insightscommon/model.rest",["module","bots.model.rest"],function(t,e){var i=e.__class__.extend({module:t,name:"InsightsRestModel"},{__static__:{},InsightsRestModel:function(t){this._super(t)},executeConversationMetrics:function(t,e){this.restPost(e,"/conversationmetrics/~/execute/query",{data:t})},executeConversationMetricsSummary:function(t,e){this.restPost(e,"/conversationmetrics/~/execute/summary",{data:t})},executeBotsMetrics:function(t,e){this.restGet(e,"/crossbot/metrics",{stringifyObjects:!1,data:t})},executeBotsSummary:function(t,e){this.restGet(e,"/crossbot/summary",{stringifyObjects:!1,data:t})}});return new i(_.extend({},e.config,{baseUrl:"/miecs/api/v1.0"}))}),define("bots.package.insightscommon/util",["bots.i18n","bots.config","bots.package.util/filter.criteria","moment"],function(t,e,i,n){var s=6048e5,o=4*s,a=12*o,r={OK:200,NO_CONTENT:204},l={CHANNEL:"CHANNEL",CLOSEST_INTENT:"CLOSEST_INTENT",CONVERSATION_COUNT:"CONVERSATION_COUNT",CONVERSATION_INTENT:"CONVERSATION_INTENT",CONVERSATION_STATUS:"CONVERSATION_STATUS",STATE_PATH:"STATE_PATH",COUNT:"count",COUNTS:"COUNTS",DAY:"DAY",END_STATE:"END_STATE",ERROR_CATEGORY:"ERROR_CATEGORY",ERROR_COUNT:"ERROR_COUNT",ERROR_MESSAGE:"ERROR_MESSAGE",ERROR_TYPE:"ERROR_TYPE",INTENT:"INTENT",INTENT_LOWERCASE:"intent",INTENT_COUNT:"intent_count",INTENT_SCORE:"INTENT_SCORE",LOCALE:"LOCALE",PATH:"path",COMPONENTS:"components",SE_CATEGORY:"SE_CATEGORY",SESSION_DURATION:"sessionDuration",STATES:"states",USER_UTTERANCE:"USER_UTTERANCE",CONVERSATION_START_TIMESTAMP:"conversation_start_timestamp",LAST_N_USER_UTTERANCES:"lastNUserUtterances",BOT_NAME:"BOT_NAME",CONVERSATIONS:"CONVERSATIONS",NAME:"name",LOB_CHANNEL:"channel",CONV_COUNT:"COUNT",INTERACTION_MEDIUM:"interaction_medium",ACTIVITY_DATE:"ACTIVITY_DATE",COMPLETED_CONVERSATION:"completed_conversation"},d={ASC:"ASC",DESC:"DESC"},c=6e4,u={DAY:"DAY",WEEK:"WEEK",MONTH:"MONTH",YEAR:"YEAR"},h=[],b={completed:{value:"completed",label:t.translate("insights.common.intentStatus.completed")},incomplete:{value:"incomplete",label:t.translate("insights.common.intentStatus.incomplete")},error:{value:"errors",label:t.translate("insights.common.intentStatus.error")},canceled:{value:"canceled",label:t.translate("insights.common.intentStatus.canceled")},unresolved:{value:"unresolved_intent",label:t.translate("insights.common.intentStatus.unresolved")}},g={ACTIVITY_DATE:oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({formatType:"date",dateFormat:"long"}),WEEK:oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({formatType:"date",dateFormat:"long"}),MONTH:oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({formatType:"date",month:"long",year:"numeric"}),YEAR:oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({formatType:"date",year:"numeric"}),HOUR:oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({formatType:"date",month:"short",year:"numeric",day:"2-digit",hour:"2-digit"})};formatChartResponse=function(e,i,n){var s,o={lineSeries:[],lineGroups:[]},a={total:0,rows:[]},r=e.xAxis,l=e.measure,d=e.seriesName||"name",c=getUniqueGroups(i,r);return o.lineGroups=f(c,n.granularity),_.each(i,function(e){s=getLineSeries(e.data,l,c,r);var i=n.translateKey?t.translate(n.translateKey+e[d].toLowerCase()):e[d];a.rows.push({name:i,count:e[l]}),a.total+=e[l],o.lineSeries.push({name:i,markerShape:"circle",items:s,assignedToY2:_.contains(n&&n.assignedToY2,e[d].toLowerCase())?"on":"off"})}),n&&n.isSummary&&_.extend(o,{summary:a}),o},getUniqueGroups=function(t,e){var i=[];return _.each(t,function(t){i=_.union(i,_.pluck(t.data,e))}),_.sortBy(i,function(t){return t})},getLineSeries=function(t,e,i,n){var s=[],o=!1;return _.each(i,function(i){o=!1;for(var a=0;a<t.length;a++)if(t[a][n]===i){o=!0,s.push(t[a][e]);break}o||s.push(0)}),s},formatResponse=function(e,i,n){var s,o={lineSeries:[],lineGroups:[]},a=i[e.xAxis]=f(i[e.xAxis],e.xAxis),r=i[e.yAxis],l=_.unique(a),d=i[e.groupBy]=f(i[e.groupBy],e.groupBy);if(o.lineGroups=l,n=n||{},s=n.attrGroups||new oj.ColorAttributeGroupHandler,e.groupBy){var c=_.unique(i[e.groupBy]),u=_.map(c,function(e){var i;i=e?n.groupTranslateKey?t.translate(n.groupTranslateKey+e.toString().toLowerCase()):e.toString():t.translate("general.unknown");for(var s=Array.apply(null,new Array(l.length)).map(Number.prototype.valueOf,0),o=0;o<s.length;o++)for(var c=0;c<r.length;c++)d[c]===e&&a[c]===l[o]&&(s[o]+=r[c]);return n.dataLabelOn&&(s=_.map(s,function(t){return{y:t,label:t.toString()}})),{name:i,items:s,markerShape:"circle",assignedToY2:_.contains(n.assignedToY2,i)?"on":"off"}});o.lineSeries=u}else{var h=_.map(l,function(t){for(var e=0,i=0;i<a.length;i++)a[i]===t&&(e+=r[i]);return{y:e,label:e.toString()}});o.lineSeries=[{name:"",items:h,markerShape:"circle"}]}return o};var f=function(t,e){e.toUpperCase()===l.DAY&&(e=l.ACTIVITY_DATE);var i=g[e.toUpperCase()];return i&&(t=_.map(t,function(t){return i.format(t)},this)),t},p=function(t,e,i){var s,o=n(i.dateRange.datetime.endDate).diff(i.dateRange.datetime.beginDate,"days");return o<=30?s=formatResponse(t,e,i):o<=90?(e[u.WEEK]=_.map(e.DAY,function(t){var e=n(t);return e.startOf("isoWeek").format("DD")+"-"+e.endOf("isoWeek").format("DD")+e.format(" MMM YYYY")}),s=formatResponse(t,e,i)):(e.MONTH=_.map(e.DAY,function(t){return n(t).format("MMM YYYY")}),s=formatResponse(t,e,i)),s},m=function(){if(!_.isEmpty(h))return h;var t=["154360","0E6251","145A32"];return _.each(t,function(t){for(var e=.7;e<=2.8;)h.push(v(t,e)),e+=.5}),h},v=function(t,e){t=String(t).replace(/[^0-9a-f]/gi,""),t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),e=e||0;var i,n,s="#";for(n=0;n<3;n++)i=parseInt(t.substr(2*n,2),16),i=Math.round(Math.min(Math.max(0,i+i*e),255)).toString(16),s+=("00"+i).substr(i.length);return s},y=function(t,e){"string"==typeof t&&(t=oj.IntlConverterUtils.isoToLocalDate(t),e=oj.IntlConverterUtils.isoToLocalDate(e));var i,n=e-t;return i=n<=8*s?u.DAY:n<=6*o?u.WEEK:n<=3*a?u.MONTH:u.YEAR,i.toLowerCase()},w=function(e){var i=1e3,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(_.isUndefined(e)||0===e)return{value:void 0,unit:""};var s=Math.floor(Math.log(e)/Math.log(i));return{value:parseFloat((e/Math.pow(i,s)).toFixed(2)),unit:t.translate("dataManagement.monitor.units."+n[s])}};return{INSIGHTS_MEASURES:l,DATE_SCALE:u,ORDER:d,populateChart:p,UPDATE_INTERVAL:c,getChartColors:m,CONVERSATIONS_STATUS:b,RESPONSE_STATUS_CODES:r,formatChartResponse:formatChartResponse,calculateGranularity:y,convertBytesToDisplayValue:w,formatDimension:f}}),define("bots.package.insightscommon/model",["module","mcs.js.framework/model.util","bots.model.rest","bots.package.insightscommon/model.rest","bots.package.insightscommon/util"],function(t,e,i,n,s){var o=n.__class__.extend({module:t,name:"FakeInsightsRestModel"},{__static__:{},flagConversationsListPaging:!0,FakeInsightsRestModel:function(t){this._super(t)},executeConversationMetrics:function(t,e){switch(t.dimensions[0]){case s.INSIGHTS_MEASURES.CONVERSATION_INTENT:switch(t.dimensions[1]){case s.INSIGHTS_MEASURES.DAY:_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-metrics-day.json"});break;case s.INSIGHTS_MEASURES.LOCALE:_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-metrics-locale.json"});break;case s.INSIGHTS_MEASURES.CHANNEL:_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-metrics-intentChannel.json"});break;default:_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-metrics-intents.json"})}break;case s.INSIGHTS_MEASURES.CONVERSATION_STATUS:switch(t.dimensions[1]){case s.INSIGHTS_MEASURES.DAY:_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-metrics-status-day.json"});break;case s.INSIGHTS_MEASURES.CONVERSATION_INTENT:_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-metrics-status-intent.json"})}break;case s.INSIGHTS_MEASURES.CHANNEL:_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-metrics-channel.json"});break;case s.INSIGHTS_MEASURES.END_STATE:_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-metrics-endState.json"});break;case s.INSIGHTS_MEASURES.ERROR_TYPE:_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-metrics-errorType.json"});break;case s.INSIGHTS_MEASURES.BOT_NAME:_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-bots-channel.json"});break;case s.INSIGHTS_MEASURES.DAY:switch(t.dimensions[1]){case s.INSIGHTS_MEASURES.BOT_NAME:_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-bots-day.json"});break;case s.INSIGHTS_MEASURES.CONVERSATION_STATUS:_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-status-day.json"})}break;case s.INSIGHTS_MEASURES.COUNTS:_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/individual-bots.json"});break;case s.INSIGHTS_MEASURES.CONVERSATION_COUNT:_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/total-conversations-by-status.json"});break;case s.INSIGHTS_MEASURES.CONVERSATIONS:_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/completed-conversations.json"});break;case"conversation_summary":_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/oda-conversations-summary.json"});break;case"conversation_trend":_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/oda-conversations-trend.json"});break;case"skills_summary":_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/oda-skills-summary.json"});break;case"skills_trend":_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/oda-skills-trend.json"})}},executeConversationMetricsSummary:function(t,e){_.delay(this.restGet,2200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-metrics-summary.json"})},executeBotsMetrics:function(t,e){var i=t.dimensions.split(",");switch(i[0].toUpperCase()){case s.INSIGHTS_MEASURES.NAME.toUpperCase():i.length>1?_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-bots-channel.json"}):_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/individual-bots.json"});break;case s.INSIGHTS_MEASURES.DAY.toUpperCase():i.length>1?_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-bots-day.json"}):_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-metrics-status-day.json"});break;default:_.delay(this.restGet,1200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-metrics-intents.json"})}},executeBotsSummary:function(t,e){_.delay(this.restGet,2200,e,"",{url:"/botsui/19.1.5-1907122019/mock/json/insights/conversation-bots-summary.json"})}},e.stubProxy);return new o(_.extend({},i.config,{baseUrl:"/miecs/api/v1.0"}))}),define("bots.package.insightscommon/facade",["module","bots.facade","bots.package.insightscommon/model"],function(t,e,i){var n=e.__class__.extend({module:t,name:"Facade"},{__static__:{globalChannels:{}},Facade:function(){this._super(),this.register({DATE_RANGE_UPDATED:{name:"insights.daterange.updated",handler:function(t){this.publish(t)}},GET_DATE_RANGE:{name:"insights.get.daterange",handler:function(t){var e=require("bots.package.insights/view").getCurrentDateRange();t.data=e,this.publish(t)}},RESET_LAST_UPDATED_TIME:{name:"insights.lastupdate.reset",handler:function(t){this.publish(t)}},REFRESH_REPORTS:{name:"insights.refresh.reports",handler:function(t){this.publish(t)}},EXECUTE_CONVERSATION_METRICS_SUMMARY:{name:"insights.execute.conversationmetricssummary",handler:function(t){i.executeConversationMetricsSummary(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},EXECUTE_CONVERSATION_METRICS:{name:"insights.execute.conversationmetrics",handler:function(t){i.executeConversationMetrics(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},EXECUTE_BOTS_METRICS:{name:"insights.bots.metrics",handler:function(t){i.executeBotsMetrics(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},EXECUTE_BOTS_PERFORMANCE:{name:"insights.bots.performance",handler:function(t){i.executeBotsMetrics(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},EXECUTE_BOTS_SUMMARY:{name:"insights.bots.summary",handler:function(t){i.executeBotsSummary(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}}})}});return new n}),define("bots.package.insightscommon/dataobject",["module","bots.i18n","mcs.js.framework/dataobject","moment","bots.package.insightscommon/util"],function(t,e,i,n,s){var o=i.extend({module:t,name:"TrendReport"},{__static__:{mapping:{lineSeries:Array}},TrendReport:function(t){this.lineSeries=ko.observableArray(),this.lineGroups=ko.observableArray(),this.showProgressbar=ko.observable(!0),this.summary=ko.observable(),this.colorCodes=ko.observable(),this._super(t)}}),a=i.extend({module:t,name:"ReportTable"},{ReportTable:function(t){this.showProgressbar=ko.observable(!0),this.summary=ko.observable(),this.rows=ko.observableArray(),this.table=ko.computed(function(){return new oj.ArrayTableDataSource(this.rows)},this),this._super(t)}}),r=i.extend({module:t,name:"PerformanceReport"},{PerformanceReport:function(t){this.name=ko.observable(),this.total=ko.observable(),this.completed=ko.observable(),this.error=ko.observable(),this.totalError=ko.observable(),this.unresolved_utterances=ko.observable(),this.historyChart=ko.observableArray(),this.completionRateTitle=ko.computed(function(){return e.translate("analytics.botsPerformance.completionRateDescription",[this.total(),this.completed()])},this,{deferEvaluation:!0}),this._super(t)}});return{TrendReport:o,ReportTable:a,PerformanceReport:r}}),define("bots.package.insightscommon/date.picker",["module","bots.package.view/view","bots.i18n","bots.config","bots.package.insightscommon/facade","moment"],function(t,e,i,n,s,o){var a=e.extend({module:t,name:"DatePicker"},{__static__:{datePicker:"daterange-picker",datePickerButton:"daterange-button"},deps:{i18n:i,facade:s},bindings:{moment:o,dateRanges:{func:ko.observableArray},dateRangeLabel:{func:ko.computed,args:[function(){var t=this.bindings.dateRange();if(t)return"custom"!==t.id?this.deps.i18n.translate("retrainer.landing.elapsedTime."+t.id):this.deps.i18n.translate("daterange.customLabel",this.bindings.customDateConverter.format(t.startDate),this.bindings.customDateConverter.format(t.endDate))}]},customStartDate:{func:ko.observable,args:[]},customEndDate:{func:ko.observable,args:[]},customDateConverter:{func:function(){return oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({pattern:this.deps.botsConfig.templateData.dateFormats.date2})}},customStartDateValidator:{func:function(){var t=this;return{validate:function(e){if(oj.IntlConverterUtils.isoToLocalDate(e)>oj.IntlConverterUtils.isoToLocalDate(t.bindings.customEndDate()))throw new oj.ValidatorError(i.translate("daterange.picker.validation.dateRangeTitle"),i.translate("daterange.picker.validation.dateRangeMsg"));return!0}}}},customEndDateValidator:{func:function(){var t=this;return{validate:function(e){if(oj.IntlConverterUtils.isoToLocalDate(t.bindings.customStartDate())>oj.IntlConverterUtils.isoToLocalDate(e))throw new oj.ValidatorError(i.translate("daterange.picker.validation.dateRangeTitle"),i.translate("daterange.picker.validation.dateRangeMsg"));return!0}}}},cancelCustomDateRange:function(t,e){$(this.config.datePickerPrefix+"-"+this.__static__.datePicker).ojPopup("close")}},DatePicker:function(t){this._super(t)},loadModule:function(t){if(!this._super(t))return!1;var e=this.getCurrentDateRange();this.bindings.dateRange(e),"custom"===e.id&&this.setCustomDateRange(e.startDate,e.endDate),this.notify({DATE_RANGE_UPDATED:{data:{selectedDateRange:e},postData:{sender:this}}})},reloadModule:function(t){return!!this._super(t)&&void this.loadModule(t)},resetCustomDateRange:function(){var t=o().utc().format(this.deps.botsConfig.templateData.dateFormats.isoDate);this.setCustomDateRange(t,t)},setCustomDateRange:function(t,e){this.bindings.customStartDate(t),this.bindings.customEndDate(e)},getCurrentDateRange:function(){var t=_.isEmpty(this.bindings.dateRange())?_.first(this.bindings.dateRanges()):this.bindings.dateRange();return"custom"!==t.id?this.getDateRange(t.id):this.getDateRange(t.id,t.startDate,t.endDate)},getDateRange:function(t,e,i){var n=_.findWhere(this.deps.botsConfig.getDateRanges(),{id:t}),s=this.deps.botsConfig.templateData.dateFormats,a=o().utc();return"custom"===t&&e&&i?$.extend(!0,{},n,{now:a.format(s.isoDate),startDate:e,endDate:i,datetime:{startDate:this._resetTime("min",o(e)).format(s.isoDateTime),endDate:this._resetTime("max",o(i)).format(s.isoDateTime)}}):"number"==typeof n.startOffset||"number"==typeof n.endOffset?(e=a.clone().subtract(Math.abs(n.startOffset),"days"),i=a,$.extend(!0,{},n,{now:a.format(s.isoDate),startDate:e.format(s.isoDate),endDate:i.format(s.isoDate),datetime:{startDate:this._resetTime("min",o(e)).format(s.isoDateTime),endDate:this._resetTime("max",o(i).utc()).format(s.isoDateTime)}})):n},_resetTime:function(t,e){return"min"===t?e.hour(0).minute(0).second(0).millisecond(0):"max"===t?e.hour(23).minute(59).second(59).millisecond(0):void 0}});return a}),define("bots.package.insightscommon/header.date.picker",["module","bots.package.insightscommon/date.picker","bots.i18n","bots.config","bots.package.insightscommon/facade","moment"],function(t,e,i,n,s,o){var a=e.extend({module:t,name:"DatePicker"},{__static__:{datePicker:"daterange-picker",datePickerButton:"daterange-button"},deps:{i18n:i,facade:s},bindings:{selectedDateRange:{func:ko.observable,args:[null]},dateRange:{func:ko.observable,args:[]},showDateRangePicker:function(){this.bindings.selectedDateRange(this.getSelectedDateRangeId(this.bindings.dateRange().id)),this.deps.uiComponents.resetFields($(this.config.datePickerPrefix+"-"+this.__static__.datePicker)),$(this.config.datePickerPrefix+"-"+this.__static__.datePicker).ojPopup("open",this.config.datePickerPrefix+"-"+this.__static__.datePickerButton)},selectDateRange:function(t,e){if(this.isSelectionEvent(t,e)){var i=this.config.datePickerPrefix+"-",n=e.value?e.value.substring(i.length-1):"",s=e.previousValue?e.previousValue.substring(i.length-1):"";"custom"!==n&&("custom"===s&&this.resetCustomDateRange(),this.bindings.dateRange(_.find(this.bindings.dateRanges(),function(t){return n===t.id})),this.updatePreferences({dateRange:this.bindings.dateRange()}),$(this.config.datePickerPrefix+"-"+this.__static__.datePicker).ojPopup("close"),this.notify({DATE_RANGE_UPDATED:{data:{selectedDateRange:this.getDateRange(n)}}}))}},cancelCustomDateRange:function(t,e){$(this.config.datePickerPrefix+"-"+this.__static__.datePicker).ojPopup("close")},applyCustomDateRange:function(t,e){this.deps.uiComponents.validateFields($(this.config.datePickerPrefix+"-"+this.__static__.datePicker))&&(this.bindings.cancelCustomDateRange(t,e),this.bindings.dateRange({id:"custom",startDate:this.bindings.customStartDate(),endDate:this.bindings.customEndDate()}),this.updatePreferences({dateRange:this.bindings.dateRange()}),this.notify({DATE_RANGE_UPDATED:{data:{selectedDateRange:this.getDateRange("custom",this.bindings.customDateConverter.parse(this.bindings.customStartDate()),this.bindings.customDateConverter.parse(this.bindings.customEndDate()))}}}))}},DatePicker:function(t){this._super(t)},bindView:function(t){this._super(t),this.bindings.dateRange.subscribe(function(t){t&&this.bindings.selectedDateRange(this.getSelectedDateRangeId(t.id))},this),this.bindings.dateRanges(this.deps.botsConfig.getDateRanges()),this.resetCustomDateRange()},updatePreferences:function(t){var e=this.config.parentView.bindings.userPreferences();_.extend(e,t),this.config.parentView.bindings.userPreferences(e)},getSelectedDateRangeId:function(t){return this.config.datePickerPrefix.substring(1)+"-"+t},isSelectionEvent:function(t,e){return e&&"selection"===e.option&&e.optionMetadata&&"shouldWrite"===e.optionMetadata.writeback&&e.value&&t.originalEvent}});return a}),define("bots.package.insightscommon/bots.filter",["module","bots.package.view/view","bots.i18n","bots.config","bots.package.insightscommon/facade","moment"],function(t,e,i,n,s,o){var a=e.extend({module:t,name:"BotsFilter"},{deps:{i18n:i,facade:s},copyofSelectedBots:[],bindings:{bots:{func:ko.observableArray},filteredBots:{func:ko.observableArray,args:[]},filterEditMode:{func:ko.observable},selectedBots:{func:ko.observableArray},botsList:{func:ko.computed,args:[function(){var t={};return _.each(this.bindings.bots(),function(e){t[e.name]={value:e.name,label:e.name}}),ko.observableArray(_.values(t))}]},editFilter:function(){this.bindings.filterEditMode(!0)},toggleMode:function(){this.bindings.filterEditMode(!this.bindings.filterEditMode())},applyFilter:function(){this.bindings.filteredBots([]),this.bindings.toggleMode(),this.copyofSelectedBots=ko.unwrap(this.bindings.selectedBots),this.config.parentView.filterReports(this.copyofSelectedBots)},cancelFilter:function(){this.bindings.selectedBots(this.copyofSelectedBots),this.bindings.toggleMode()},filterReports:function(t,e){this.config.parentView.filterReports(_.isEmpty(this.bindings.filteredBots())?this.bindings.selectedBots():this.bindings.filteredBots())}},BotsFilter:function(t){this._super(t)},loadModule:function(t){return!!this._super(t)&&void this.loadBots()},reloadModule:function(t){return!!this._super(t)&&(t.id&&!_.isEmpty(t.previousBot)&&this.resetSelectedBots(),void this.loadBots())},loadBots:function(){var t={};t[this.config.loadEvent]={data:{orderBy:"name:asc"}},this.notify(t,{actionSpinner:!0}).always(_.bind(function(t){t.status>201?this.deps.messaging.showI18nError(t,"bots.messages"):(this.bindings.bots(t.data.items),this.config.parentView.setBotsCount(t.data.items.length))},this))},resetSelectedBots:function(){this.bindings.bots.removeAll(),this.bindings.filteredBots.removeAll(),this.bindings.selectedBots.removeAll(),this.copyofSelectedBots=[]}});return a}),define("bots.package.insightscommon/report.date.picker",["module","bots.package.insightscommon/date.picker","bots.i18n","bots.config","bots.package.insightscommon/facade","moment"],function(t,e,i,n,s,o){var a=e.extend({module:t,name:"ReportDatePicker"},{__static__:{datePicker:"daterange-picker",datePickerElement:"dateranges-select"},deps:{i18n:i,facade:s},bindings:{showCustomRange:{func:ko.observable},selectedDateRange:{func:ko.observableArray},selectDateRange:function(t,e){if(this.isSelectionEvent(t,e)){var i=_.first(e.value),n=_.first(e.previousValue);if("custom"!==i)this.bindings.showCustomRange(!1),"custom"===n&&this.resetCustomDateRange(),this.bindings.dateRange(_.find(this.bindings.dateRanges(),function(t){return i===t.id})),this.notify({DATE_RANGE_UPDATED:{data:{selectedDateRange:this.getDateRange(i)},postData:{sender:this}}});else{var s={startDate:this.bindings.customStartDate(),endDate:this.bindings.customEndDate()};this.bindings.dateRange(s),this.bindings.openCustomDateRange()}}},openCustomDateRange:function(){$(this.config.datePickerPrefix+"-"+this.__static__.datePicker).ojPopup("open","#ojChoiceId_"+this.config.datePickerPrefix.substring(1)+"-"+this.__static__.datePickerElement)},closeCustomDateRange:function(){$(this.config.datePickerPrefix+"-"+this.__static__.datePicker).ojPopup("close")},applyCustomDateRange:function(t,e){this.deps.uiComponents.validateFields($(this.config.datePickerPrefix+"-"+this.__static__.datePicker))&&(this.bindings.dateRange(this.deps.botsConfig.getDateRange("custom",this.bindings.customStartDate(),this.bindings.customEndDate())),this.bindings.showCustomRange(!0),this.bindings.closeCustomDateRange(),this.notify({DATE_RANGE_UPDATED:{data:{selectedDateRange:this.getDateRange("custom",this.bindings.customDateConverter.parse(this.bindings.customStartDate()),this.bindings.customDateConverter.parse(this.bindings.customEndDate()))},postData:{sender:this}}}))}},ReportDatePicker:function(t){this._super(t)},bindView:function(t){this._super(t),this.bindings.dateRange.subscribe(function(t){t&&this.bindings.selectedDateRange([t.id?t.id:"custom"])},this),this.bindings.dateRanges(this.deps.botsConfig.getDateRanges()),this.resetCustomDateRange(),$(this.config.datePickerPrefix+"-"+this.__static__.datePickerElement).ojSelect("refresh")},isSelectionEvent:function(t,e){return e&&"value"===e.option&&e.optionMetadata&&"shouldWrite"===e.optionMetadata.writeback&&e.value&&t.originalEvent}});return a}),function(){require(["bots.templates/insightscommon","bots.package.insightscommon/facade","bots.package.insightscommon/model","bots.package.insightscommon/util","bots.package.insightscommon/dataobject","bots.package.insightscommon/date.picker","bots.package.insightscommon/header.date.picker","bots.package.insightscommon/bots.filter","bots.package.insightscommon/report.date.picker"]),define("bots.package.insightscommon/package.main",[],function(){})}(),define("bots.package.insightscommon",["bots.package.insightscommon/package"],function(t){return t}),define("bots.package.insightscommon/package",function(){}),define("bots.package.da/router",["module","bots.router.tab","bots.enums"],function(t,e,i){var n=e.extend({module:t,name:"DATabRouter"},{__static__:{routes:{"da(/)":"viewDALanding","dapromo/:extraParam(/)":"viewDAPromoLanding","da/:tabName(/)":"viewDA","da/:tabName/:extraParam(/)":"viewDA","da/:tabName/:tab2Name/:tab3Name(/)":"viewDA","da/:tabName/:tab2Name/:tab3Name/:extraParam(/)":"viewDA","da/:tabName/:tab2Name/:tab3Name/:extraParam1/:extraParam2(/)":"viewDA"},permissions:{viewDALanding:"BOTS_READ",viewDA:"BOTS_READ",viewDARetrainer:"BOTS_READ"},routeEvents:{bot:{route:"da",dom:"#daBody",radioId:"navRadioDevelopment"}}},DATabRouter:function(t){this._super(t)},openAsset:function(t,e,n){var s=(t||"").toUpperCase();if(s===i.BotAssetEnum.DA.value)if(e)this.navigateDA(e,"skills");else if(n){var o={promoJourney:!0};this.navigateDAWithName(n,"skills/"+JSON.stringify(o))}},viewDALanding:function(){var t=this,e=this.showFirstUseUAIfNeeded();return e?e:t.deps.facade.notify({DEVELOPMENT_SUBVIEW_DISPLAY:{data:{subview:t.config.defaultRoute,trash:!1,callback:_.bind(function(){this.visitRoute(_.extend({},require("suite.package.applications/router").__static__.routeEvents.applications,{subview:this.config.defaultRoute}))},t)}}},{promise:!0})},viewDAPromoLanding:function(t){var e={promoJourney:!0};this.navigateBotWithName(t,"skills/"+JSON.stringify(e))},_tabHasChild:function(t,e){if(e)return"string"==typeof t&&(t=_.findWhere(this.config.tabs.children,{tabName:t})),t&&t.children?_.findWhere(t.children,{tabName:e}):void 0},_viewDAExtraParams:function(){var t,e=this,i=0;_.has(arguments[0],"then")&&"function"==typeof arguments[0].then&&(t=arguments[i++]);var n,s,o=arguments[i++],a=i,r=[o];if(arguments.length>a){var l=this._tabHasChild(o,arguments[a]);if(l&&(n=arguments[i++],a=i,r.push(n),arguments.length>a)){var d=this._tabHasChild(l,arguments[a]);d&&(s=arguments[i++],a=i,r.push(s))}}var c=_.map(_.rest(arguments,i),function(t){var e;if(t)try{e=decodeURIComponent(t)}catch(t){e=void 0}return e});return e.visitRoute(_.extend({},e.__static__.routeEvents.bot,{tabNames:r,meta:c.length>0?{extraParams:c}:void 0}),t)},viewDA:function(t){var e=this.showFirstUseUAIfNeeded();return e?e:this._viewDAExtraParams.apply(this,arguments)},viewDARetrainer:function(){var t=this.showFirstUseUAIfNeeded();if(!t){for(var e=$.Deferred(),i=[e,"quality","retrainer"],n=0;n<arguments.length;n++)i.push(arguments[n]);return this.loadPackage("bots.package.quality",_.bind(function(t){this._viewDAExtraParams.apply(this,i)},this)),e}return t},loadPackage:function(t){var e=this._super.apply(this,arguments);return"bots.package.quality"===t?this.loadPackage("bots.package.retrainer",$.noop,!1,e):e},tabsToFragmentRoute:function(t,e,i,n){var s=i+t.tabName.length+1,o=n+this.config.defaultRoute+"/"+t.tabName.join("/");return e.length>s&&this.getFragment().indexOf(o)>=0&&(o+="/"+e.slice(s).join("/")),o}});return new n({defaultRoute:"da",tabs:{selector:"#da-details",children:[{tabName:"skills",tabId:"da-details-tab-skills",tabPackage:"bots.package.skills",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"intents",tabId:"da-details-tab-intents",tabPackage:"bots.package.daintents",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"insights",tabId:"da-details-tab-insights",tabPackage:"bots.package.dainsights",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ",selector:"#da-insights-tabs",children:[{tabName:"overview",tabId:"da-insights-overview-tab",tabPackage:"bots.package.dainsights",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"}]},{tabName:"settings",tabId:"da-details-tab-settings",tabPackage:"bots.package.dasettings",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ",selector:"#dasettings-tabs",children:[{tabName:"general",tabId:"dasettings-general-tab",tabPackage:"bots.package.dasettings",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"configuration",tabId:"dasettings-configuration-tab",tabPackage:"bots.package.dasettings",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"events",tabId:"dasettings-events-tab",tabPackage:"bots.package.dasettings",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"}]}]}})}),function(){require(["bots.package.da/router"]),define("bots.package.da/stylesheet",[],function(){utils.loadStylesheet("bots-da-css","resources/css/da.min.css")})}(),define("bots.package.da",["bots.package.da/package"],function(t){return t}),define("bots.package.da/package",function(){}),define("bots.package.daintents/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"intents",routes:{},routeEvents:{intents:{route:"intents",dom:"#da-details-tab-intents",template:"bots/daintents/landing/landing",container:"#da-details-tab-intents"}}},Router:function(t){this._super(t)}});return new i({defaultRoute:"intents"})}),function(){require(["bots.package.daintents/router"]),define("bots.package.daintents/stylesheet",[],function(){utils.loadStylesheet("bots-daintents-css","resources/css/daintents.min.css")})}(),define("bots.package.daintents",["bots.package.daintents/package"],function(t){return t}),define("bots.package.daintents/package",function(){}),define("bots.package.dasettings/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"settings",routes:{},routeEvents:{settings:{route:"settings",dom:"#da-details-tab-setttings",template:"bots/dasettings/body",container:"#da-details-tab-setttings"}}},Router:function(t){this._super(t)}});return new i}),function(){require(["bots.package.dasettings/router"]),define("bots.package.dasettings/stylesheet",[],function(){utils.loadStylesheet("bots-dasettings-css","resources/css/dasettings.min.css")})}(),define("bots.package.dasettings",["bots.package.dasettings/package"],function(t){return t}),define("bots.package.dasettings/package",function(){}),define("bots.package.bot/router",["module","bots.router.tab","bots.enums"],function(t,e,i){var n=e.extend({module:t,name:"BotTabRouter"},{__static__:{routes:{"bot(/)":"viewBotsLanding","botpromo/:extraParam(/)":"viewBotPromoLanding",
"bot/:tabName(/)":"viewBot","bot/:tabName/:extraParam(/)":"viewBot","bot/:tabName/:tab2Name/:tab3Name(/)":"viewBot","bot/:tabName/:tab2Name/:tab3Name/:extraParam(/)":"viewBot","bot/:tabName/:tab2Name/:tab3Name/:extraParam1/:extraParam2(/)":"viewBot","bot/quality/retrainer(/)":"viewBotRetrainer","bot/quality/retrainer/:extraParam(/)":"viewBotRetrainer"},permissions:{viewBotsLanding:"BOTS_READ",viewBot:"BOTS_READ",viewBotRetrainer:"BOTS_READ"},routeEvents:{bot:{route:"bot",dom:"#botsBody",radioId:"navRadioDevelopment"}}},BotTabRouter:function(t){this._super(t)},openAsset:function(t,e,n){if(i.BotAssetEnum.SKILL.value===(t||"").toUpperCase())if(e)this.navigateBot(e,"intents");else if(n){var s={promoJourney:!0};this.navigateBotWithName(n,"intents/"+JSON.stringify(s))}},viewBotsLanding:function(){var t=this,e=this.showFirstUseUAIfNeeded();return e?e:t.deps.facade.notify({DEVELOPMENT_SUBVIEW_DISPLAY:{data:{subview:t.config.defaultRoute,trash:!1,callback:_.bind(function(){this.visitRoute(_.extend({},require("suite.package.applications/router").__static__.routeEvents.applications,{subview:this.config.defaultRoute}))},t)}}},{promise:!0})},viewBotPromoLanding:function(t){var e={promoJourney:!0};this.navigateBotWithName(t,"intents/"+JSON.stringify(e))},_tabHasChild:function(t,e){if(e)return"string"==typeof t&&(t=_.findWhere(this.config.tabs.children,{tabName:t})),t&&t.children?_.findWhere(t.children,{tabName:e}):void 0},_viewBotExtraParams:function(){var t,e=this,i=0;_.has(arguments[0],"then")&&"function"==typeof arguments[0].then&&(t=arguments[i++]);var n,s,o=arguments[i++],a=i,r=[o];if(arguments.length>a){var l=this._tabHasChild(o,arguments[a]);if(l&&(n=arguments[i++],a=i,r.push(n),arguments.length>a)){var d=this._tabHasChild(l,arguments[a]);d&&(s=arguments[i++],a=i,r.push(s))}}var c=_.map(_.rest(arguments,i),function(t){var e;if(t)try{e=decodeURIComponent(t)}catch(t){e=void 0}return e});return e.visitRoute(_.extend({},e.__static__.routeEvents.bot,{tabNames:r,meta:c.length>0?{extraParams:c}:void 0}),t)},viewBot:function(t){var e=this.showFirstUseUAIfNeeded();return e?e:this._viewBotExtraParams.apply(this,arguments)},viewBotRetrainer:function(){var t=this.showFirstUseUAIfNeeded();if(!t){for(var e=$.Deferred(),i=[e,"quality","retrainer"],n=0;n<arguments.length;n++)i.push(arguments[n]);return this.loadPackage("bots.package.quality",_.bind(function(t){this._viewBotExtraParams.apply(this,i)},this)),e}return t},loadPackage:function(t){var e=this._super.apply(this,arguments);return"bots.package.quality"===t?this.loadPackage("bots.package.retrainer",$.noop,!1,e):e},tabsToFragmentRoute:function(t,e,i,n){var s=i+t.tabName.length+1,o=n+this.config.defaultRoute+"/"+t.tabName.join("/");return e.length>s&&this.getFragment().indexOf(o)>=0&&(o+="/"+e.slice(s).join("/")),o}});return new n({defaultRoute:"bot",tabs:{selector:"#bot-details",children:[{tabName:"intents",tabId:"bot-details-tab-intents",tabPackage:"bots.package.intents",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"entities",tabId:"bot-details-tab-entities",tabPackage:"bots.package.entities",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"flows",tabId:"bot-details-tab-flows",tabPackage:"bots.package.flows",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"builder",tabId:"bot-details-tab-builder",tabPackage:"bots.package.builder",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ",selector:"#bot-builder-tabs",children:[{tabName:"mock",tabId:"bot-builder-conversation-tab",tabPackage:"bots.package.builder",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"build",tabId:"bot-builder-flow-tab",tabPackage:"bots.package.builder",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"}]},{tabName:"bundles",tabId:"bot-details-tab-bundles",tabPackage:"bots.package.bundles",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"qna",tabId:"bot-details-tab-qna",tabPackage:"bots.package.qna",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"quality",tabId:"bot-details-tab-quality",tabPackage:"bots.package.quality",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ",selector:"#quality-tabs",children:[{tabName:"utterances",tabId:"quality-utterances-tab",tabPackage:"bots.package.quality",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"suggestions",tabId:"quality-suggestions-tab",tabPackage:"bots.package.quality",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"retrainer",tabId:"quality-retrainer-tab",tabPackage:"bots.package.retrainer",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"}]},{tabName:"insights",tabId:"bot-details-tab-insights",tabPackage:"bots.package.insights",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ",selector:"#insights-tabs",children:[{tabName:"overview",tabId:"insights-pathing-overview-tab",tabPackage:"bots.package.insights",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"intents",tabId:"insights-pathing-intents-tab",tabPackage:"bots.package.insights",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"paths",tabId:"insights-pathing-paths-tab",tabPackage:"bots.package.insights",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"conversations",tabId:"insights-pathing-conversations-tab",tabPackage:"bots.package.insights",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"retrainer",tabId:"insights-pathing-retrainer-tab",tabPackage:"bots.package.insights",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"export",tabId:"insights-pathing-export-tab",tabPackage:"bots.package.insights",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"}]},{tabName:"components",tabId:"bot-details-tab-components",tabPackage:"bots.package.components",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ",selector:"#components-tabs",children:[{tabName:"general",tabId:"components-custom-tab",tabPackage:"bots.package.components",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"configuration",tabId:"components-webview-tab",tabPackage:"bots.package.components",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"}]},{tabName:"settings",tabId:"bot-details-tab-settings",tabPackage:"bots.package.settings",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ",selector:"#settings-tabs",children:[{tabName:"general",tabId:"settings-general-tab",tabPackage:"bots.package.settings",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"configuration",tabId:"settings-configuration-tab",tabPackage:"bots.package.settings",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"da",tabId:"settings-da-tab",tabPackage:"bots.package.settings",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"events",tabId:"settings-events-tab",tabPackage:"bots.package.settings",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"routingconfig",tabId:"settings-routingconfig-tab",tabPackage:"bots.package.settings",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"}]}]}})}),function(){require(["bots.package.bot/router"]),define("bots.package.bot/stylesheet",[],function(){utils.loadStylesheet("bots-bot-css","resources/css/bot.min.css")})}(),define("bots.package.bot",["bots.package.bot/package"],function(t){return t}),define("bots.package.bot/package",function(){}),define("bots.package.flows/router",["module","bots.router","bots.package.defectviewer/view"],function(t,e,i,n){var s=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"flows",routes:{},routeEvents:{flows:{route:"flows",dom:"#bot-details-tab-flows",template:"bots/flows/body",container:"#bot-details-tab-flows"}}},Router:function(t){this._super(t)}});return new s}),function(){require(["bots.package.flows/router"]),define("bots.package.flows/stylesheet",[],function(){utils.loadStylesheet("bots-flows-css","resources/css/flows.min.css")})}(),define("bots.package.flows",["bots.package.flows/package"],function(t){return t}),define("bots.package.flows/package",function(){}),define("bots.package.skills/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"skills",routes:{},routeEvents:{skills:{route:"skills",dom:"#da-details-tab-skills",template:"bots/skills/landing/landing",container:"#da-details-tab-skills"}}},Router:function(t){this._super(t)}});return new i({defaultRoute:"skills"})}),function(){require(["bots.package.skills/router"]),define("bots.package.skills/stylesheet",[],function(){utils.loadStylesheet("bots-skills-css","resources/css/skills.min.css")})}(),define("bots.package.skills",["bots.package.skills/package"],function(t){return t}),define("bots.package.skills/package",function(){}),define("bots.package.intents/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"intents",routes:{},routeEvents:{intents:{route:"intents",dom:"#bot-details-tab-intents",template:"bots/intents/landing/landing",container:"#bot-details-tab-intents"}}},Router:function(t){this._super(t)}});return new i({defaultRoute:"intents"})}),function(){require(["bots.package.intents/router"]),define("bots.package.intents/stylesheet",[],function(){utils.loadStylesheet("bots-intents-css","resources/css/intents.min.css")})}(),define("bots.package.intents",["bots.package.intents/package"],function(t){return t}),define("bots.package.intents/package",function(){}),define("bots.package.bundles/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"bundles",routes:{},routeEvents:{bundles:{route:"bundles",dom:"#bot-details-tab-bundles",template:"bots/bundles/landing/landing",container:"#bot-details-tab-bundles"}}},Router:function(t){this._super(t)}});return new i({defaultRoute:"bundles"})}),function(){require(["bots.package.bundles/router"]),define("bots.package.bundles/stylesheet",[],function(){utils.loadStylesheet("bots-bundles-css","resources/css/bundles.min.css")})}(),define("bots.package.bundles",["bots.package.bundles/package"],function(t){return t}),define("bots.package.bundles/package",function(){}),define("bots.package.entities/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"entities",routes:{},routeEvents:{entities:{route:"entities",dom:"#bot-details-tab-entities",template:"bots/entities/landing/landing",container:"#bot-details-tab-entities"}}},Router:function(t){this._super(t)}});return new i({defaultRoute:"entities"})}),function(){require(["bots.package.entities/router"]),define("bots.package.entities/stylesheet",[],function(){utils.loadStylesheet("bots-entities-css","resources/css/entities.min.css")})}(),define("bots.package.entities",["bots.package.entities/package"],function(t){return t}),define("bots.package.entities/package",function(){}),define("bots.package.qna/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"qna",routes:{},routeEvents:{qna:{route:"qna",dom:"#bot-details-tab-qna",template:"bots/qna/landing/landing",container:"#bot-details-tab-qna"}}},Router:function(t){this._super(t)}});return new i({defaultRoute:"qna"})}),function(){require(["bots.package.qna/router"]),define("bots.package.qna/stylesheet",[],function(){utils.loadStylesheet("bots-qna-css","resources/css/qna.min.css")})}(),define("bots.package.qna",["bots.package.qna/package"],function(t){return t}),define("bots.package.qna/package",function(){}),define("bots.package.components/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"components",routes:{},routeEvents:{components:{route:"components",dom:"#bot-details-tab-components",template:"bots/components/body",container:"#bot-details-tab-components"}}},Router:function(t){this._super(t)}});return new i}),function(){require(["bots.package.components/router"]),define("bots.package.components/stylesheet",[],function(){utils.loadStylesheet("bots-components-css","resources/css/components.min.css")})}(),define("bots.package.components",["bots.package.components/package"],function(t){return t}),define("bots.package.components/package",function(){}),define("bots.package.settings/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"settings",routes:{},routeEvents:{settings:{route:"settings",dom:"#bot-details-tab-settings",template:"bots/settings/body",container:"#bot-details-tab-setttings"}}},Router:function(t){this._super(t)}});return new i}),function(){require(["bots.package.settings/router"]),define("bots.package.settings/stylesheet",[],function(){utils.loadStylesheet("bots-settings-css","resources/css/settings.min.css")})}(),define("bots.package.settings",["bots.package.settings/package"],function(t){return t}),define("bots.package.settings/package",function(){}),define("bots.package.quality/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"quality",routes:{},routeEvents:{quality:{route:"quality",dom:"#bot-details-tab-quality",template:"bots/quality/landing",container:"#bot-details-tab-quality"}}},Router:function(t){this._super(t)}});return new i({defaultRoute:"quality"})}),function(){require(["bots.package.quality/router"]),define("bots.package.quality/stylesheet",[],function(){utils.loadStylesheet("bots-quality-css","resources/css/quality.min.css"),utils.loadStylesheet("bots-retrainer-css","resources/css/retrainer.min.css")})}(),define("bots.package.quality",["bots.package.quality/package"],function(t){return t}),define("bots.package.quality/package",function(){}),define("bots.package.retrainer/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"retrainer",routes:{},routeEvents:{entities:{route:"retrainer",dom:"#quality-retrainer-tab",template:"bots/retrainer/landing/landing",container:"#quality-retrainer-tab"}}},Router:function(t){this._super(t)}});return new i({defaultRoute:"retrainer"})}),function(){require(["bots.package.retrainer/router"]),define("bots.package.retrainer/stylesheet",[],function(){utils.loadStylesheet("bots-retrainer-css","resources/css/retrainer.min.css")})}(),define("bots.package.retrainer",["bots.package.retrainer/package"],function(t){return t}),define("bots.package.retrainer/package",function(){}),define("bots.package.insights/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"insights",routes:{},routeEvents:{insights:{route:"insights",dom:"#bot-details-tab-insights",template:"bots/insights/landing",container:"#bot-details-tab-insights"}}},Router:function(t){this._super(t)}});return new i({defaultRoute:"insights"})}),function(){require(["bots.package.insights/router"]),define("bots.package.insights/stylesheet",[],function(){utils.loadStylesheet("bots-insights-css","resources/css/insights.min.css")}),require.config({shim:{"bots.package.insights/package.min":{deps:["bots.libraries.dvt"]}}})}(),define("bots.package.insights",["bots.package.insights/package"],function(t){return t}),define("bots.package.insights/package",function(){}),define("bots.package.assistance/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"assistance",routes:{"assistance(/)":"viewInitialTour"},permissions:{viewInitialTour:"BOTS_READ"}},Router:function(t){this._super(t)},viewInitialTour:function(){return this.visitRoute({route:"assistance",dom:"#assistanceBody",radioId:"navRadioHome",template:"bots/assistance/initialtour.body",container:"#assistanceBody",permission:"BOTS_READ"})}});return new i({defaultRoute:"assistance"})}),function(){require(["bots.package.assistance/router"]),define("bots.package.assistance/stylesheet",[],function(){utils.loadStylesheet("bots-assistance-css","resources/css/assistance.min.css")})}(),define("bots.package.assistance",["bots.package.assistance/package"],function(t){return t}),define("bots.package.assistance/package",function(){}),define("bots.package.getstarted/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"GetStartedRouter"},{__static__:{baseRoute:"explorebot",routes:{"explorebot(/)":"viewExploreBot"},routeEvents:{promojourneyRouteEvent:{dom:"#getStartedBody",radioId:"navRadioGetStarted",template:"bots/getstarted/body.promojourney",container:"#getStartedBody",permission:"BOTS_READ"}},permissions:{viewExploreBot:"BOTS_READ"}},GetStartedRouter:function(t){this._super(t)},viewExploreBot:function(t){return this.visitRoute(_.extend({route:"explorebot"},this.__static__.routeEvents.promojourneyRouteEvent,t))}});return new i({defaultRoute:"explorebot"})}),function(){require(["bots.package.getstarted/router"]),define("bots.package.getstarted/stylesheet",[],function(){utils.loadStylesheet("bots-getstarted-css","resources/css/getstarted.min.css")})}(),define("bots.package.getstarted",["bots.package.getstarted/package"],function(t){return t}),define("bots.package.getstarted/package",function(){}),define("bots.package.analytics/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"analytics",routes:{"analytics(/)":"viewAnalytics"}},Router:function(t){this._super(t)},viewAnalytics:function(){return this.visitRoute({route:"analytics",dom:"#botsAnalyticsBody",radioId:"navRadioAnalytics",template:"bots/analytics/body",container:"#botsAnalyticsBody"})}});return new i({defaultRoute:"analytics"})}),function(){require(["bots.package.analytics/router"]),define("bots.package.analytics/stylesheet",[],function(){utils.loadStylesheet("bots-analytics-css","resources/css/analytics.min.css")}),require.config({shim:{"bots.package.analytics/package.min":{deps:["bots.libraries.dvt"]}}})}(),define("bots.package.analytics",["bots.package.analytics/package"],function(t){return t}),define("bots.package.analytics/package",function(){}),define("bots.package.channels/model.rest",["module","bots.model.rest","bots.i18n","bots.config","bots.collection"],function(t,e,i,n,s){var o=e.__class__.extend({module:t,name:"ChannelsRestModel"},{config:{stringifyObjects:!0,uriParams:{botId:function(){return n.getCurrentBot().id}}},ChannelsRestModel:function(t){this._super(t)},getChannels:function(t,e){var i=s.getPath("/channels",t),n=_.pick(t,"orderBy","offset","limit","filterType","totalResults","disableFetch","type","q","exclude");this.restGet(e,i,{stringifyObjects:!1,data:n})},createChannel:function(t,e){this.restPost(e,"/channels",{data:_.omit(t,"id")})},getChannel:function(t,e){this.restGet(e,"/channels/{channelId}",{uriParams:{channelId:t.id}})},deleteChannel:function(t,e){this.restDelete(e,"/channels/{channelId}",{uriParams:{channelId:t.id}})},resetChannelSessions:function(t,e){this.restDelete(e,"/channels/{channelId}/sessions",{uriParams:{channelId:t.id}})}});return new o(_.extend({},e.config,{baseUrl:e.config.baseUrl}))}),define("bots.package.channels/facade",["module","bots.facade","bots.package.channels/model.rest"],function(t,e,i){var n=e.__class__.extend({module:t,name:"Facade"},{__static__:{globalChannels:{RESET_SYSTEM_CHANNEL_SESSIONS:{name:"channels.reset.system.channel.sessions",handler:function(t){var e=t.data.id,n=t.data.name;i.resetChannelSessions(t.data,_.bind(function(i){t.data=_.extend(i,{id:e,name:n}),this.publish(t)},this))}}}},Facade:function(){this._super();this.register({LOAD_USER_CHANNELS:{name:"channels.load.user.channels",handler:function(t){i.getChannels(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_AGENT_CHANNELS:{name:"channels.load.agent.channels",handler:function(t){i.getChannels(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_APPLICATION_CHANNELS:{name:"channels.load.application.channels",handler:function(t){i.getChannels(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_SYSTEM_CHANNELS:{name:"channels.load.system.channels",handler:function(t){i.getChannels(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},CREATE_USER_CHANNEL:{name:"channels.create.user.channel",handler:function(t){i.createChannel(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},CREATE_AGENT_CHANNEL:{name:"channels.create.agent.channel",handler:function(t){i.createChannel(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},CREATE_APPLICATION_CHANNEL:{name:"channels.create.application.channel",handler:function(t){i.createChannel(t.data,_.bind(function(e){t.data=e,this.publish(t)},this))}},LOAD_USER_CHANNEL:{name:"channels.load.user.channel",handler:function(t){var e=t.data.id;i.getChannel(t.data,_.bind(function(i){t.data=_.extend(i,{id:e}),this.publish(t)},this))}},LOAD_AGENT_CHANNEL:{name:"channels.load.agent.channel",handler:function(t){var e=t.data.id;i.getChannel(t.data,_.bind(function(i){t.data=_.extend(i,{id:e}),this.publish(t)},this))}},LOAD_APPLICATION_CHANNEL:{name:"channels.load.application.channel",handler:function(t){var e=t.data.id;i.getChannel(t.data,_.bind(function(i){t.data=_.extend(i,{id:e}),this.publish(t)},this))}},LOAD_SYSTEM_CHANNEL:{name:"channels.load.system.channel",handler:function(t){var e=t.data.id;i.getChannel(t.data,_.bind(function(i){t.data=_.extend(i,{id:e}),this.publish(t)},this))}},UPDATE_AGENT_CHANNEL:{name:"channels.update.agent.channel",handler:function(t){var e=t.data.id,n=t.data.name,s=t.txnId;i.updateChannel(t.data,_.bind(function(i){t.data=_.extend(i,{id:e,name:n,txnId:s}),this.publish(t)},this))}},UPDATE_APPLICATION_CHANNEL:{name:"channels.update.application.channel",handler:function(t){var e=t.data.id,n=t.data.name,s=t.txnId;i.updateChannel(t.data,_.bind(function(i){t.data=_.extend(i,{id:e,name:n,txnId:s}),this.publish(t)},this))}},UPDATE_SYSTEM_CHANNEL:{name:"channels.update.system.channel",handler:function(t){var e=t.data.id,n=t.data.name,s=t.txnId;i.updateChannel(t.data,_.bind(function(i){t.data=_.extend(i,{id:e,name:n,txnId:s}),this.publish(t)},this))}},DELETE_USER_CHANNEL:{name:"channels.delete.user.channel",handler:function(t){var e=t.data.id,n=t.data.name;i.deleteChannel(t.data,_.bind(function(i){t.data=_.extend(i,{id:e,name:n}),this.publish(t)},this))}},DELETE_AGENT_CHANNEL:{name:"channels.delete.agent.channel",handler:function(t){var e=t.data.id,n=t.data.name;i.deleteChannel(t.data,_.bind(function(i){t.data=_.extend(i,{id:e,name:n}),this.publish(t)},this))}},DELETE_APPLICATION_CHANNEL:{name:"channels.delete.application.channel",handler:function(t){var e=t.data.id,n=t.data.name;i.deleteChannel(t.data,_.bind(function(i){t.data=_.extend(i,{id:e,name:n}),this.publish(t)},this))}},RESET_USER_CHANNEL_SESSIONS:{name:"channels.reset.user.channel.sessions",handler:function(t){var e=t.data.id,n=t.data.name;i.resetChannelSessions(t.data,_.bind(function(i){t.data=_.extend(i,{id:e,name:n}),this.publish(t)},this))}},RESET_AGENT_CHANNEL_SESSIONS:{name:"channels.reset.agent.channel.sessions",handler:function(t){var e=t.data.id,n=t.data.name;i.resetChannelSessions(t.data,_.bind(function(i){t.data=_.extend(i,{id:e,name:n}),this.publish(t)},this))}},RESET_APPLICATION_CHANNEL_SESSIONS:{name:"channels.reset.application.channel.sessions",handler:function(t){var e=t.data.id,n=t.data.name;i.resetChannelSessions(t.data,_.bind(function(i){t.data=_.extend(i,{id:e,name:n}),this.publish(t)},this))}}})}});return new n}),define("bots.package.channels/router",["module","bots.router.tab","bots.package.channels/facade"],function(t,e,i){var n=e.extend({module:t,name:"ChannelsTabRouter"},{__static__:{baseRoute:"channels",routes:{"channels(/)":"viewChannelsLanding","channels/:tabName(/)":"viewChannelsTab","channels/:tabName/:extraParam(/)":"viewChannelsTab"},permissions:{viewChannelsLanding:"BOTS_READ",viewChannelsTab:"BOTS_READ"},routeEvents:{channels:{route:"channels",dom:"#channelsBody",radioId:"navRadioDevelopment"}}},ChannelsTabRouter:function(t){this._super(t)},tabsToFragmentRoute:function(t,e,i,n){var s=i+t.tabName.length+1,o=n+this.config.defaultRoute+"/"+t.tabName.join("/");return e.length>s&&this.getFragment().indexOf(o)>=0&&(o+="/"+e.slice(s).join("/")),o},viewChannelsLanding:function(){var t=this.config.tabs.children[0].tabName;return this.navigate(this.config.defaultRoute+"/"+t,{trigger:!1,replace:!0}),this.viewChannelsTab(t)},viewChannelsTab:function(t){var e,i=this,n=[t||this.config.tabs.children[0].tabName],s=[];arguments.length>1&&(s=_.map(_.rest(arguments,1),function(t){var e;if(t)try{e=decodeURIComponent(t)}catch(t){e=void 0}return e}));var o=this.visitRoute(_.extend({},this.__static__.routeEvents.channels,{tabNames:n,meta:s.length>0?{extraParams:s}:void 0}),e);return o.then(function(){i.navigate(i.config.defaultRoute+"/"+t,{trigger:!1,replace:!0})}),o}});return new n({defaultRoute:"channels",tabs:{selector:"#channels-tabs",children:[{tabName:"user",tabId:"channels-user-tab",tabPackage:"bots.package.channels",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"agent",tabId:"channels-agent-integration-tab",tabPackage:"bots.package.channels",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"application",tabId:"channels-application-tab",tabPackage:"bots.package.channels",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"system",tabId:"channels-system-tab",tabPackage:"bots.package.channels",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"}]}})}),function(){require(["bots.package.channels/router"]),define("bots.package.channels/stylesheet",[],function(){utils.loadStylesheet("bots-channels-css","resources/css/channels.min.css")})}(),define("bots.package.channels",["bots.package.channels/package"],function(t){return t}),define("bots.package.channels/package",function(){}),define("bots.package.dainsights/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"insights",routes:{},routeEvents:{insights:{route:"insights",dom:"#da-details-tab-insights",template:"bots/dainsights/body",container:"#da-details-tab-insights"}}},Router:function(t){this._super(t)}});return new i({defaultRoute:"insights"})}),function(){require(["bots.package.dainsights/router"]),define("bots.package.dainsights/stylesheet",[],function(){utils.loadStylesheet("bots-dainsights-css","resources/css/dainsights.min.css")}),require.config({shim:{"bots.package.dainsights/package.min":{deps:["bots.libraries.dvt"]}}})}(),define("bots.package.dainsights",["bots.package.dainsights/package"],function(t){return t}),define("bots.package.dainsights/package",function(){});define("bots.package.skillstore/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"SkillStoreRouter"},{__static__:{routes:{"store(/)":"viewSkillStore","store/:name(/)":"viewSkillVersions","store/:name/:version(/)":"viewSkill"},routeEvents:{store:{route:"store",radioId:"navRadioSkillStore",template:"bots/skillstore/skills.landing",dom:"#skillStoreBody"},skillVersions:{route:"skillVersions",radioId:"navRadioSkillStore",template:"bots/skillstore/skill.versions",dom:"#skillVersionsBody"},skill:{route:"skill",radioId:"navRadioSkillStore",template:"bots/skillstore/skill",dom:"#skillBody"}}},SkillStoreRouter:function(t){this._super(t)},viewSkillStore:function(){return this.visitRoute(this.__static__.routeEvents.store)},viewSkillVersions:function(t){return this.visitRoute(_.extend({skillName:t},this.__static__.routeEvents.skillVersions))},viewSkill:function(t,e){return this.visitRoute(_.extend({skillName:t,skillVersion:e},this.__static__.routeEvents.skill))}});return new i({defaultRoute:"store"})});!function(){require(["bots.package.skillstore/router"]),define("bots.package.skillstore/stylesheet",[],function(){utils.loadStylesheet("bots-skillstore-css","resources/css/skillstore.min.css")})}(),define("bots.package.skillstore",["bots.package.skillstore/package"],function(t){return t}),define("bots.package.skillstore/package",function(){}),define("bots.package.sysconf/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"SysConfRouter"},{__static__:{routes:{"authenticators(/)":"viewAuthenticators","translators(/)":"viewTranslators"},routeEvents:{authenticators:{route:"authenticators",radioId:"navRadioAuthenticators",template:"bots/sysconf/auth.services.landing",dom:"#authenticatorsBody"},translators:{route:"translators",radioId:"navRadioTranslators",template:"bots/sysconf/translation.services.landing",dom:"#translatorsBody"}}},SysConfRouter:function(t){this._super(t)},viewAuthenticators:function(){return this.visitRoute(this.__static__.routeEvents.authenticators)},viewTranslators:function(){return this.visitRoute(this.__static__.routeEvents.translators)}});return new i({defaultRoute:""})}),function(){require(["bots.package.sysconf/router"]),define("bots.package.sysconf/stylesheet",[],function(){utils.loadStylesheet("bots-sysconf-css","resources/css/sysconf.min.css")})}(),define("bots.package.sysconf",["bots.package.sysconf/package"],function(t){return t}),define("bots.package.sysconf/package",function(){}),define("bots.package.datamanagement/router",["module","bots.router.tab"],function(t,e){var i=e.extend({module:t,name:"DataManagementRouter"},{__static__:{baseRoute:"datamanagement",routes:{"datamanagement(/)":"viewDataManagementLanding","datamanagement/:tabName(/)":"viewDataManagementTab","datamanagement/:tabName/:extraParam(/)":"viewDataManagementTab"},permissions:{viewDataManagementLanding:"BOTS_READ",viewDataManagementTab:"BOTS_READ"},routeEvents:{datamanagement:{route:"datamanagement",dom:"#datamanagementBody",radioId:"navRadioDataManagement"}}},DataManagementRouter:function(t){this._super(t)},tabsToFragmentRoute:function(t,e,i,n){var s=i+t.tabName.length+1,o=n+this.config.defaultRoute+"/"+t.tabName.join("/");return e.length>s&&this.getFragment().indexOf(o)>=0&&(o+="/"+e.slice(s).join("/")),o},viewDataManagementLanding:function(){var t=this.config.tabs.children[0].tabName;return this.navigate(this.config.defaultRoute+"/"+t,{trigger:!1,replace:!0}),this.viewDataManagementTab(t)},viewDataManagementTab:function(t){var e,i=this,n=[t||this.config.tabs.children[0].tabName],s=[];arguments.length>1&&(s=_.map(_.rest(arguments,1),function(t){var e;if(t)try{e=decodeURIComponent(t)}catch(t){e=void 0}return e}));var o=this.visitRoute(_.extend({},this.__static__.routeEvents.datamanagement,{tabNames:n,meta:s.length>0?{extraParams:s}:void 0}),e);return o.then(function(){i.navigate(i.config.defaultRoute+"/"+t,{trigger:!1,replace:!0})}),o}});return new i({defaultRoute:"datamanagement",tabs:{selector:"#datamanagement-tabs",children:[{tabName:"monitor",tabId:"datamanagement-monitor-tab",tabPackage:"bots.package.datamanagement",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"},{tabName:"manage",tabId:"datamanagement-manage-tab",tabPackage:"bots.package.datamanagement",vetoablePending:!1,vetoableValid:!1,permission:"BOTS_READ"}]}})}),function(){require(["bots.package.datamanagement/router"]),define("bots.package.datamanagement/stylesheet",[],function(){utils.loadStylesheet("bots-datamanagement-css","resources/css/datamanagement.min.css")}),require.config({shim:{"bots.package.datamanagement/package.min":{deps:["bots.libraries.dvt"]}}})}(),define("bots.package.datamanagement",["bots.package.datamanagement/package"],function(t){return t}),define("bots.package.datamanagement/package",function(){}),define("bots.package.builder/router",["module","bots.router"],function(t,e){var i=e.__class__.extend({module:t,name:"Router"},{__static__:{baseRoute:"builder",routes:{},routeEvents:{}},Router:function(t){this._super(t)}});return new i}),function(){require(["bots.package.builder/router"]),define("bots.package.builder/stylesheet",[],function(){
utils.loadStylesheet("bots-builder-css","resources/css/builder.min.css")})}(),define("bots.package.builder",["bots.package.builder/package"],function(t){return t}),define("bots.package.builder/package",function(){});