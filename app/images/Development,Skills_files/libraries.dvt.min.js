!function(){function t(t,e,i,n,o,r){return e[t]||(t=t.replace(/^zh-(Hans|Hant)-([^-]+)$/,"zh-$2")),!!e[t]&&(i.push(t),!0!==e[t]&&1!==e[t]||n.push(o+t+"/"+r),!0)}function e(t){var e=t.toLowerCase().split(/-|_/);t=[e[0]];var i,n=1;for(i=1;i<e.length;i++){var o=e[i],r=o.length;if(1==r)break;switch(n){case 1:if(n=2,4==r){t.push(o.charAt(0).toUpperCase()+o.slice(1));break}case 2:n=3,t.push(o.toUpperCase());break;default:t.push(o)}}return"zh"!=t[0]||1<t.length&&4==t[1].length||(e="Hans",n=1<t.length?t[1]:null,"TW"!==n&&"MO"!==n&&"HK"!==n||(e="Hant"),t.splice(1,0,e)),t}function i(t,e){for(var n in e)e.hasOwnProperty(n)&&(null==t[n]?t[n]=e[n]:"object"==typeof e[n]&&"object"==typeof t[n]&&i(t[n],e[n]))}var n=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("ojL10n",["module"],function(o){var r=o.config?o.config():{};return{version:"2.0.1+",load:function(o,s,a,l){l=l||{},l.locale&&(r.locale=l.locale);var h,u,d,c,p,_,g,m,f,y=n.exec(o),v=y[1],S=y[5],C=[],E={},b="";for(y[5]?(v=y[1],o=v+S,h=y[4]):(S=y[4],h=r.locale,"undefined"!=typeof document?(h||(h=l.isBuild?"root":document.documentElement.lang)||(h=void 0===navigator?"root":navigator.language||navigator.userLanguage||"root"),r.locale=h):h="root"),u=e(h),c=r.noOverlay,p=r.defaultNoOverlayLocale,(y=r.merge)&&(_=y[v+S])&&(y=n.exec(_),g=y[1],m=y[4]),f=[],y=0;y<u.length;y++)d=u[y],b+=(b?"-":"")+d,f.push(b);l.isBuild?(C.push(o),_&&C.push(_),s(C,function(){a()})):("query"==r.includeLocale&&(o=s.toUrl(o+".js"),o+=(-1===o.indexOf("?")?"?":"&")+"loc="+h),l=[o],_&&l.push(_),s(l,function(e,n){var o=[],r=function(e,i,n){for(var r=c||!0===e.__noOverlay,s=p||e.__defaultNoOverlayLocale,a=!1,l=f.length-1;0<=l&&(!a||!r);l--)a=t(f[l],e,o,C,i,n);l=1===f.length&&"root"===f[0],r&&(l||!a)&&s&&t(s,e,o,C,i,n),l||t("root",e,o,C,i,n)};r(e,v,S);var l=o.length;n&&r(n,g,m),s(C,function(){var t=function(t,e,n,r,a){for(;e<n&&o[e];e++){var l=o[e],h=t[l];!0!==h&&1!==h||(h=s(r+l+"/"+a)),i(E,h)}};t(n,l,o.length,g,m),t(e,0,l,v,S),E._ojLocale_=u.join("-"),a(E)})}))}}})}(),define("ojs/ojmessaging",["ojs/ojcore","jquery"],function(t,e){t.Message=function(t,e,i){this.Init(t,e,i)},t.Message.SEVERITY_TYPE={CONFIRMATION:"confirmation",INFO:"info",WARNING:"warning",ERROR:"error",FATAL:"fatal"},t.Message.SEVERITY_LEVEL={FATAL:5,ERROR:4,WARNING:3,INFO:2,CONFIRMATION:1},t.Object.createSubclass(t.Message,t.Object,"oj.Message"),t.Message.prototype.Init=function(e,i,n){t.Message.superclass.Init.call(this),this.summary=e,this.detail=i,this.severity=n||t.Message.SEVERITY_TYPE.ERROR},t.Message.prototype.canDisplay=function(){return!0},t.Message.prototype.equals=function(e){return!(!e||t.Message.getSeverityLevel(this.severity)!==t.Message.getSeverityLevel(e.severity)||this.summary!==e.summary||this.detail!==e.detail)},t.Message.prototype.clone=function(){return new t.Message(this.summary,this.detail,this.severity)},t.Message.getSeverityLevel=function(e){var i;return e&&("string"==typeof e?(i=t.Message._LEVEL_TO_TYPE.indexOf(e,1),e=i===-1?t.Message.SEVERITY_LEVEL.ERROR:i):"number"==typeof e&&e<t.Message.SEVERITY_LEVEL.CONFIRMATION&&e>t.Message.SEVERITY_LEVEL.FATAL&&(e=t.Message.SEVERITY_LEVEL.ERROR)),e?e:t.Message.SEVERITY_LEVEL.ERROR},t.Message.getSeverityType=function(e){var i;return e&&("string"==typeof e?(i=t.Message._LEVEL_TO_TYPE.indexOf(e,1),i===-1&&(e=t.Message.SEVERITY_TYPE.ERROR)):"number"==typeof e&&(e=e<t.Message.SEVERITY_LEVEL.CONFIRMATION&&e>t.Message.SEVERITY_LEVEL.FATAL?t.Message.SEVERITY_TYPE.ERROR:t.Message._LEVEL_TO_TYPE[e])),e||t.Message.SEVERITY_TYPE.ERROR},t.Message.getMaxSeverity=function(i){var n,o=-1;return i&&i.length>0&&e.each(i,function(e,i){i&&(n=t.Message.getSeverityLevel(i.severity)),o=o<n?n:o}),o},t.Message.isValid=function(e){var i=t.Message.getMaxSeverity(e);return!(i>=t.Message.SEVERITY_LEVEL.ERROR)},t.Message._LEVEL_TO_TYPE=["none",t.Message.SEVERITY_TYPE.CONFIRMATION,t.Message.SEVERITY_TYPE.INFO,t.Message.SEVERITY_TYPE.WARNING,t.Message.SEVERITY_TYPE.ERROR,t.Message.SEVERITY_TYPE.FATAL],t.ComponentMessage=function(t,e,i,n){this.Init(t,e,i,n)},t.Object.createSubclass(t.ComponentMessage,t.Message,"oj.ComponentMessage"),t.ComponentMessage.DISPLAY={SHOWN:"shown",HIDDEN:"hidden"},t.ComponentMessage._DEFAULT_OPTIONS={display:t.ComponentMessage.DISPLAY.SHOWN,context:""},t.ComponentMessage.prototype.Init=function(i,n,o,r){t.ComponentMessage.superclass.Init.call(this,i,n,o),this._options=e.extend({},t.ComponentMessage._DEFAULT_OPTIONS,r)},t.ComponentMessage.prototype.equals=function(e){var i=t.ComponentMessage.superclass.equals.call(this,e);return i&&this._options.display===e._options.display},t.ComponentMessage.prototype.clone=function(){return new t.ComponentMessage(this.summary,this.detail,this.severity,this._options)},t.ComponentMessage.prototype.canDisplay=function(){return!(!(!this._options||!this._options.display)&&this._options.display===t.ComponentMessage.DISPLAY.HIDDEN)},t.ComponentMessage.prototype._forceDisplayToShown=function(){return!(!this._options||t.ComponentMessage.DISPLAY.HIDDEN!==this._options.display)&&(this._options.display=t.ComponentMessage.DISPLAY.SHOWN,!0)},t.ComponentMessage.prototype._isMessageAddedByComponent=function(){return!(!this._options||!this._options.context)}}),define("ojs/ojvalidation-base",["ojs/ojcore","jquery","ojL10n!ojtranslations/nls/localeElements","ojs/ojmessaging"],function(t,e,i){t.LocaleData={},t.LocaleData.setBundle=function(e){t.LocaleData._bundle=e},t.LocaleData.getFirstDayOfWeek=function(){return t.LocaleData._getWeekData("firstDay")},t.LocaleData.getWeekendStart=function(){return t.LocaleData._getWeekData("weekendStart")},t.LocaleData.getWeekendEnd=function(){return t.LocaleData._getWeekData("weekendEnd")},t.LocaleData.getDayNames=function(e){(null==e||"abbreviated"!==e&&"narrow"!==e)&&(e="wide");var i=t.LocaleData._getCalendarData().days["stand-alone"][e];return[i.sun,i.mon,i.tue,i.wed,i.thu,i.fri,i.sat]},t.LocaleData.getMonthNames=function(e){(null==e||"abbreviated"!==e&&"narrow"!==e)&&(e="wide");var i=t.LocaleData._getCalendarData().months["stand-alone"][e];return[i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12]]},t.LocaleData.isMonthPriorToYear=function(){var e=t.LocaleData._getCalendarData().dateFormats.long.toUpperCase(),i=e.indexOf("M"),n=e.indexOf("Y");return i<n},t.LocaleData._getWeekData=function(e){var i=t.LocaleData.__getBundle(),n="001",o=t.LocaleData._getRegion()||n,r=i.supplemental.weekData[e],s=r[o];return void 0===s&&(s=r[n]),s},t.LocaleData._getCalendarData=function(){var e,i,n=t.LocaleData.__getBundle(),o=n.main;for(i in o)if(o.hasOwnProperty(i)){e=o[i];break}return e.dates.calendars.gregorian},t.LocaleData._getRegion=function(){var e=t.Config.getLocale();if(e){var i=e.toUpperCase().split(/-|_/);if(i.length>=2){var n=i[1];if(4!=n.length)return n;if(i.length>=3)return i[2]}}return null},t.LocaleData.__getBundle=function(){var e=t.LocaleData._bundle;return e?e:t.__isAmdLoaderPresent()?(t.Assert.assert(void 0!==i,"LocaleElements module must be loaded"),i):{}},t.LocaleData.__updateBundle=function(t){i=t},t.OraI18nUtils={},t.OraI18nUtils.numeringSystems={latn:"0123456789",arab:"٠١٢٣٤٥٦٧٨٩",thai:"๐๑๒๓๔๕๖๗๘๙"},t.OraI18nUtils.regexTrim=/^\s+|\s+$|\u200f|\u200e/g,t.OraI18nUtils.regexTrimNumber=/\s+|\u200f|\u200e/g,t.OraI18nUtils.regexTrimRightZeros=/0+$/g,t.OraI18nUtils.zeros=["0","00","000"],t.OraI18nUtils._ISO_DATE_REGEXP=/^\d{4}(?:-?\d{2}(?:-?\d{2})?)?(?:T\d{2}:?\d{2}(?::?\d{2}(?:\.\d{1,3})?)?(Z|[+-]\d{2}:\d{2})?)?$|^T\d{2}:?\d{2}(?::?\d{2}(?:\.\d{1,3})?)?(Z|[+-]\d{2}:\d{2})?$/,t.OraI18nUtils.getLocalTimeZoneOffset=function(){var e=new Date,i=e.getTimezoneOffset();return t.OraI18nUtils.getTimeStringFromOffset("Etc/GMT",i,!1,!1)},t.OraI18nUtils._getTimeZone=function(e){if(!e||"string"!=typeof e)return null;var i=t.OraI18nUtils._ISO_DATE_REGEXP.exec(e);return null===i&&t.OraI18nUtils._throwInvalidISOString(e),void 0!==i[1]?i[1]:null},t.OraI18nUtils.dateToLocalIso=function(e){var i=t.OraI18nUtils.padZeros(e.getFullYear(),4)+"-"+t.OraI18nUtils.padZeros(e.getMonth()+1,2)+"-"+t.OraI18nUtils.padZeros(e.getDate(),2)+"T"+t.OraI18nUtils.padZeros(e.getHours(),2)+":"+t.OraI18nUtils.padZeros(e.getMinutes(),2)+":"+t.OraI18nUtils.padZeros(e.getSeconds(),2);return e.getMilliseconds()>0&&(i+="."+t.OraI18nUtils.trimRightZeros(t.OraI18nUtils.padZeros(e.getMilliseconds(),3))),i},t.OraI18nUtils.partsToIsoString=function(e){var i=t.OraI18nUtils.padZeros(e[0],4)+"-"+t.OraI18nUtils.padZeros(e[1],2)+"-"+t.OraI18nUtils.padZeros(e[2],2)+"T"+t.OraI18nUtils.padZeros(e[3],2)+":"+t.OraI18nUtils.padZeros(e[4],2)+":"+t.OraI18nUtils.padZeros(e[5],2);return e[6]>0&&(i+="."+t.OraI18nUtils.trimRightZeros(t.OraI18nUtils.padZeros(e[6],3))),i},t.OraI18nUtils.isoToLocalDate=function(t){return t&&"string"==typeof t?this._isoToLocalDateIgnoreTimezone(t):null},t.OraI18nUtils._isoToLocalDateIgnoreTimezone=function(e){var i=t.OraI18nUtils._IsoStrParts(e);return new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5],i[6])},t.OraI18nUtils._IsoStrParts=function(e){var i,n=e.split("T"),o=e.indexOf("T"),r=new Date,s=[r.getFullYear(),r.getMonth()+1,r.getDate(),0,0,0,0];if(""!==n[0]){var a=n[0].split("-");for(i=0;i<a.length;i++)s[i]=parseInt(a[i],10)}if(o!==-1){var l=n[1].split("."),h=l[0].split(":");for(i=0;i<h.length;i++)s[3+i]=parseInt(h[i],10);2===l.length&&l[1]&&(s[6]=parseInt(t.OraI18nUtils.zeroPad(l[1],3,!1),10))}return s},t.OraI18nUtils.getISOStrFormatInfo=function(e){var i={format:null,dateTime:null,timeZone:"",isoStrParts:null},n=t.OraI18nUtils._ISO_DATE_REGEXP.exec(e);return null===n&&t.OraI18nUtils._throwInvalidISOString(e),void 0===n[1]&&void 0===n[2]?(i.format="local",i.dateTime=e,i.isoStrParts=t.OraI18nUtils._IsoStrParts(i.dateTime),i):(i.timeZone=void 0!==n[1]?n[1]:n[2],"Z"===i.timeZone?i.format="zulu":i.format="offset",i.dateTime=e.substring(0,e.indexOf(i.timeZone)),i.isoStrParts=t.OraI18nUtils._IsoStrParts(i.dateTime),i)},t.OraI18nUtils._throwTimeZoneNotSupported=function(){var t,e,i;throw t="time zone is not supported",e=new Error(t),i={errorCode:"timeZoneNotSupported"},e.errorInfo=i,e},t.OraI18nUtils._throwInvalidISOString=function(t){var e,i,n;throw e="The string "+t+" is not a valid ISO 8601 string.",i=new Error(e),n={errorCode:"invalidISOString",parameterMap:{isoStr:t}},i.errorInfo=n,i},t.OraI18nUtils.trim=function(e){return(e+"").replace(t.OraI18nUtils.regexTrim,"")},t.OraI18nUtils.trimRightZeros=function(e){return(e+"").replace(t.OraI18nUtils.regexTrimRightZeros,"")},t.OraI18nUtils.trimNumber=function(e){var i=(e+"").replace(t.OraI18nUtils.regexTrimNumber,"");return i},t.OraI18nUtils.startsWith=function(t,e){return 0===t.indexOf(e)},t.OraI18nUtils.toUpper=function(t){return t.split(" ").join(" ").toUpperCase()},t.OraI18nUtils.padZeros=function(e,i){var n,o=e+"";return i>1&&o.length<i?(n=t.OraI18nUtils.zeros[i-2]+o,n.substr(n.length-i,i)):n=o},t.OraI18nUtils.zeroPad=function(t,e,i){t=""+t;var n;for(n=t.length;n<e;n+=1)t=i?"0"+t:t+"0";return t},t.OraI18nUtils.getTimeStringFromOffset=function(e,i,n,o){var r=n?i>=0:i<0;i=Math.abs(i);var s=i/60<<0,a=i%60,l=r?"-":"+";o&&(s=t.OraI18nUtils.zeroPad(s,2,!0));var h=e+l+s;return(a>0||o)&&(h+=":"+t.OraI18nUtils.zeroPad(a,2,!0)),h},t.OraI18nUtils.getNumberingSystemKey=function(e,i){if(void 0===i)return"latn";var n=t.OraI18nUtils.getNumberingExtension(i),o="symbols-numberSystem-"+n;return void 0===e.numbers[o]&&(n="latn"),n},t.OraI18nUtils.getBCP47Lang=function(t){var e=t.split("-");return e[0]},t.OraI18nUtils.getBCP47Region=function(t){var e=t.split("-");return 3===e.length?e[2]:2===e.length&&2===e[1].length?e[1]:"001"},t.OraI18nUtils.getNumberingExtension=function(t){t=t||"en-US";var e=t.indexOf("-u-nu-"),i="latn";return e!==-1&&(i=t.substr(e+6,4)),i},t.OraI18nUtils.haveSamePropertiesLength=function(t){var e=0;for(var i in t)e++;return e},t.OraI18nUtils.getLocaleElementsMainNode=function(t){var e,i=t.main;for(var n in i){e=n;break}return i[e]},t.OraI18nUtils.getLocaleElementsMainNodeKey=function(t){var e,i=t.main;for(var n in i){e=n;break}return e},t.OraI18nUtils._toBoolean=function(t){if("string"==typeof t){var e=t.toLowerCase().trim();switch(e){case"true":case"1":return!0;case"false":case"0":return!1;default:return t}}return t},t.OraI18nUtils.getGetOption=function(e,i){if(void 0===e)throw new Error("Internal "+i+" error. Default options missing.");var n=function(n,o,r,s){if(void 0!==e[n]){var a=e[n];switch(o){case"boolean":a=t.OraI18nUtils._toBoolean(a);break;case"string":a=String(a);break;case"number":a=Number(a);break;default:throw new Error("Internal error. Wrong value type.")}if(void 0!==r&&r.indexOf(a)===-1){for(var l=[],h=0;h<r.length;h++)l.push(r[h]);var u="The value '"+e[n]+"' is out of range for '"+i+"' options property '"+n+"'. Valid values: "+l,d=new RangeError(u),c={errorCode:"optionOutOfRange",parameterMap:{propertyName:n,propertyValue:e[n],propertyValueValid:l,caller:i}};throw d.errorInfo=c,d}return a}return s};return n},t.OraI18nUtils.matchString=function(e,i,n,o){void 0===o&&(o={sensitivity:"base",usage:"sort"});var r=t.OraI18nUtils.getGetOption(o,"oj.OraI18nUtils.matchString");o.usage=r("usage","string",["sort","search"],"sort"),o.sensitivity=r("sensitivity","string",["base","accent","case","variant"],"base");var s,a,l=e.length,h=i.length-1;for(s=0;s<l;s++)for(a=0;a<3;a++){var u=l-s;u=Math.min(u,h+a);var d=e.substr(s,u),c=d.localeCompare(i,n,o);if(0===c){var p=s+u-1,_=[s,p];return _}}return null};var n="T00:00:00.000",o={fullYear:{pos:0,pad:4},month:{pos:1,pad:2},date:{pos:2,pad:2},hours:{pos:3,pad:2},minutes:{pos:4,pad:2},seconds:{pos:5,pad:2},milliseconds:{pos:6,pad:3},timeZone:{pos:7}};t.OraI18nUtils.isoToDate=function(t){return new Date(this._normalizeIsoString(t))},t.OraI18nUtils._copyTimeOver=function(t,e){if(!t||!e)throw new Error("Provided invalid arguments");e=this._normalizeIsoString(e);var i=t.indexOf("T"),o=e.indexOf("T"),r=e.substring(0,o),s=i!==-1?t.substring(i):n;return r+s},t.OraI18nUtils._clearTime=function(t){return this._dateTime(t,{hours:0,minutes:0,seconds:0,milliseconds:0})},t.OraI18nUtils._dateTime=function(t,i,n){if(!t||!i)throw new Error("Invalid argument invocation");var r,s,a,l=null,h=null,u=o,d=this.padZeros,c=this._normalizeIsoString(t),p=/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):?(\d{2})?\.?(\d{3})?(.*)?/.exec(c);if(!p)throw new Error("Unable to capture anything");if(p=p.slice(1),Array.isArray(i)){l={};for(var _=0,g=i.length;_<g;_++)if(h=i[_],h in u){if(r=u[h].pos,s=p[r],n&&"timeZone"===h)throw new Error("Dude you tried to ask timezone to be parsed");if(n){var m=parseInt(s,10);l[h]=1===r?m-1:m}else l[h]=s}}else if(e.isPlainObject(i)){for(var f in i)a=u[f],r=a.pos,s=i[f],1===r&&"number"==typeof s&&s++,p[r]=a.pad?d(s,a.pad):s;l=p[0]+"-"+p[1]+"-"+p[2]+"T"+p[3]+":"+p[4]+":"+p[5]+(p.length>6&&p[6]?"."+p[6]+(8===p.length&&p[7]?p[7]:""):"")}return l},t.OraI18nUtils._normalizeIsoString=function(t){if(!t)throw new Error("Provided invalid arguments");var e=function(t){var e=t.split(":");return e.length>1?t:t+":00"},i=(new Date).toISOString(),o=i.substring(0,i.indexOf("T")),r=t.indexOf("T"),s=r===-1?t:t.substring(0,r),a=r!==-1?e(t.substring(r)):n;return s=s||o,s+a},t.Validation={},t.Validation._converterFactories={},t.Validation._validatorFactories={},t.Validation._defaultConverterFactories={},t.Validation._defaultValidatorFactories={},t.Validation._CONTRACTS={converter:{name:"oj.ConverterFactory",type:t.ConverterFactory},validator:{name:"oj.ValidatorFactory",type:t.ValidatorFactory}},t.Validation.converterFactory=function(e,i){var n;return e&&!i?n=t.Validation._getFactory(e,t.Validation._converterFactories):e&&i&&(n=t.Validation._registerFactory(e,i,t.Validation._converterFactories,t.Validation._CONTRACTS.converter)),n},t.Validation.validatorFactory=function(e,i){var n;return e&&!i?n=t.Validation._getFactory(e,t.Validation._validatorFactories):e&&i&&(n=t.Validation._registerFactory(e,i,t.Validation._validatorFactories,t.Validation._CONTRACTS.validator)),n},t.Validation.getDefaultConverterFactory=function(e){return t.Validation._getFactory(e,t.Validation._defaultConverterFactories)},t.Validation.getDefaultValidatorFactory=function(e){return t.Validation._getFactory(e,t.Validation._defaultValidatorFactories)},t.Validation.__registerDefaultConverterFactory=function(e,i){var n=t.Validation._CONTRACTS.converter;t.Validation._registerFactory(e,i,t.Validation._defaultConverterFactories,n),t.Validation._registerFactory(e,i,t.Validation._converterFactories,n)},t.Validation.__registerDefaultValidatorFactory=function(e,i){var n=t.Validation._CONTRACTS.validator;t.Validation._registerFactory(e,i,t.Validation._defaultValidatorFactories,n),t.Validation._registerFactory(e,i,t.Validation._validatorFactories,n)},t.Validation._doImplementsCheck=function(e,i,n){if(i&&!t.Validation._quacksLike(e,i))throw new Error("Factory instance does not implement the methods expected by the factory of type "+n)},t.Validation._getFactory=function(e,i){t.Assert.assertString(e);var n=null;if(e){e=e.toLowerCase();var o=i[e]||{};n=o.instance||null}return n},t.Validation._quacksLike=function(e,i){var n,o=!0;t.Assert.assertObject(e),t.Assert.assertObject(i);for(n in i)if(i.hasOwnProperty(n)&&"function"==typeof i[n]&&!e[n]&&"function"!=typeof e[n]){o=!1;break}return o},t.Validation._registerFactory=function(e,i,n,o){if(t.Assert.assertString(e),t.Assert.assertObject(i),e){var r={};r.instance=i,t.Validation._doImplementsCheck(i,o.type,o.name),n[e.toLowerCase()]=r}},t.ConverterFactory={CONVERTER_TYPE_NUMBER:"number",CONVERTER_TYPE_DATETIME:"datetime",CONVERTER_TYPE_COLOR:"color",createConverter:function(t){}},t.ValidatorFactory={VALIDATOR_TYPE_REQUIRED:"required",VALIDATOR_TYPE_REGEXP:"regexp",VALIDATOR_TYPE_NUMBERRANGE:"numberRange",VALIDATOR_TYPE_LENGTH:"length",VALIDATOR_TYPE_DATETIMERANGE:"dateTimeRange",VALIDATOR_TYPE_DATERESTRICTION:"dateRestriction",createValidator:function(t){}},t.Converter=function(t){this.Init(t)},t.Object.createSubclass(t.Converter,t.Object,"oj.Converter"),t.Converter.prototype.Init=function(e){t.Converter.superclass.Init.call(this),this._options=e},t.Converter.prototype.getOptions=function(){return this._options||{}},t.Converter.prototype.resolvedOptions=function(){var t={};return e.extend(t,this._options),t},t.ConverterError=function(e,i){var n=new t.Message(e,i,t.Message.SEVERITY_LEVEL.ERROR);this.Init(n)},t.ConverterError.prototype=new Error,t.ConverterError.prototype.Init=function(t){var e=t.detail,i=t.summary;this._message=t,this.name="Converter Error",this.message=e||i},t.ConverterError.prototype.getMessage=function(){return this._message},t.Validator=function(){this.Init()},t.Object.createSubclass(t.Validator,t.Object,"oj.Validator"),t.Validator.prototype.Init=function(){t.Validator.superclass.Init.call(this)},t.ValidatorError=function(e,i){var n=new t.Message(e,i,t.Message.SEVERITY_LEVEL.ERROR);this.Init(n)},t.ValidatorError.prototype=new Error,t.ValidatorError.prototype.Init=function(t){var e=t.detail,i=t.summary;this._message=t,this.name="Validator Error",this.message=e||i},t.ValidatorError.prototype.getMessage=function(){return this._message},t.RequiredValidator=function(t){this.Init(t)},t.Object.createSubclass(t.RequiredValidator,t.Validator,"oj.RequiredValidator"),t.RequiredValidator._BUNDLE_KEY_DETAIL="oj-validator.required.detail",t.RequiredValidator._BUNDLE_KEY_SUMMARY="oj-validator.required.summary",t.RequiredValidator.prototype.Init=function(e){t.RequiredValidator.superclass.Init.call(this),this._options=e},t.RequiredValidator.prototype.validate=function(e){var i,n,o,r,s="",a={};if("number"==typeof e&&0===e||e&&0!==e.length)return!0;throw this._options&&(i=this._options.messageDetail||this._options.message||null,r=this._options.messageSummary||null,s=this._options.label||""),a={label:s},o=r?t.Translations.applyParameters(r,a):t.Translations.getTranslatedString(this._getSummaryKey(),a),n=i?t.Translations.applyParameters(i,a):t.Translations.getTranslatedString(this._getDetailKey(),a),new t.ValidatorError(o,n)},t.RequiredValidator.prototype.getHint=function(){var e="";return this._options&&this._options.hint&&(e=t.Translations.getTranslatedString(this._options.hint)),e},t.RequiredValidator.prototype._getSummaryKey=function(){return t.RequiredValidator._BUNDLE_KEY_SUMMARY},t.RequiredValidator.prototype._getDetailKey=function(){return t.RequiredValidator._BUNDLE_KEY_DETAIL},function(){function e(t,e){return"#"+n(t,e)}function i(t){var e=s(t._r,t._g,t._b),i=Math.round(360*e.h),n=Math.round(100*e.s),o=Math.round(100*e.l);return 1==t._a?"hsl("+i+", "+n+"%, "+o+"%)":"hsla("+i+", "+n+"%, "+o+"%, "+t._a+")"}function n(t,e){return r(t._r,t._g,t._b,e)}function o(t){var e=a(t._r,t._g,t._b),i=Math.round(360*e.h),n=Math.round(100*e.s),o=Math.round(100*e.v);return 1==t._a?"hsv("+i+", "+n+"%, "+o+"%)":"hsva("+i+", "+n+"%, "+o+"%, "+t._a+")"}function r(t,e,i,n){var o=[d(Math.round(t).toString(16)),d(Math.round(e).toString(16)),d(Math.round(i).toString(16))];return n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function s(t,e,i){t=l(t,255),e=l(e,255),i=l(i,255);var n,o,r=Math.max(t,e,i),s=Math.min(t,e,i),a=(r+s)/2;if(r==s)n=o=0;else{var h=r-s;switch(o=a>.5?h/(2-r-s):h/(r+s),r){case t:n=(e-i)/h+(e<i?6:0);break;case e:n=(i-t)/h+2;break;case i:n=(t-e)/h+4}n/=6}return{h:n,s:o,l:a}}function a(t,e,i){t=l(t,255),e=l(e,255),i=l(i,255);var n,o,r=Math.max(t,e,i),s=Math.min(t,e,i),a=r,h=r-s;if(o=0===r?0:h/r,r==s)n=0;else{switch(r){case t:n=(e-i)/h+(e<i?6:0);break;case e:n=(i-t)/h+2;break;case i:n=(t-e)/h+4}n/=6}return{h:n,s:o,v:a}}function l(t,e){h(t)&&(t="100%");var i=u(t);return t=Math.min(e,Math.max(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function h(t){return"string"==typeof t&&t.indexOf(".")!=-1&&1===parseFloat(t)}function u(t){return"string"==typeof t&&t.indexOf("%")!=-1}function d(t){return 1==t.length?"0"+t:""+t}function c(){var e,i,n;throw e="Invalid color specification",i="Color specification does not conform to CSS3 standard",n=new t.ConverterError(e,i)}function p(){var e,i,n;throw e="Invalid color format",i="Invalid color format option specification",n=new t.ConverterError(e,i)}t.ColorConverter=function(t){this.Init(t)},t.Object.createSubclass(t.ColorConverter,t.Converter,"oj.ColorConverter"),t.ColorConverter.prototype.Init=function(e){e=e||{},e.format=e.format||"rgb",t.ColorConverter.superclass.Init.call(this,e)},t.ColorConverter.prototype.format=function(n){var r=this._getFormat(),s=null;return"rgb"===r?s=n.toString():"hsl"===r?s=i(n):"hex"===r?s=e(n):"hex3"===r?s=e(n,!0):"hsv"===r?s=o(n):p(),s?s:t.ColorConverter.superclass.format.call(this,n)},t.ColorConverter.prototype.parse=function(e){try{return new t.Color(e)}catch(t){c()}},t.ColorConverter.prototype.getHint=function(){return this._getFormat()},t.ColorConverter.prototype.resolvedOptions=function(){return{format:this._getFormat()}},t.ColorConverter.prototype._getFormat=function(){return t.ColorConverter.superclass.getOptions.call(this).format}}(),t.ColorConverterFactory=function(){function e(e){return new t.ColorConverter(e)}return{createConverter:function(t){return e(t)}}}(),t.Validation.__registerDefaultConverterFactory(t.ConverterFactory.CONVERTER_TYPE_COLOR,t.ColorConverterFactory),t.RequiredValidatorFactory=function(){function e(e){return new t.RequiredValidator(e)}return{createValidator:function(t){return e(t)}}}(),t.Validation.__registerDefaultValidatorFactory(t.ValidatorFactory.VALIDATOR_TYPE_REQUIRED,t.RequiredValidatorFactory),t.RegExpValidatorFactory=function(){function e(e){return new t.RegExpValidator(e)}return{createValidator:function(t){return e(t)}}}(),t.Validation.__registerDefaultValidatorFactory(t.ValidatorFactory.VALIDATOR_TYPE_REGEXP,t.RegExpValidatorFactory),t.LengthValidatorFactory=function(){function e(e){return new t.LengthValidator(e)}return{createValidator:function(t){return e(t)}}}(),t.Validation.__registerDefaultValidatorFactory(t.ValidatorFactory.VALIDATOR_TYPE_LENGTH,t.LengthValidatorFactory),t.RegExpValidator=function(t){this.Init(t)},t.Object.createSubclass(t.RegExpValidator,t.Validator,"oj.RegExpValidator"),t.RegExpValidator._BUNDLE_KEY_DETAIL="oj-validator.regExp.detail",t.RegExpValidator._BUNDLE_KEY_SUMMARY="oj-validator.regExp.summary",t.RegExpValidator.prototype.Init=function(e){t.RegExpValidator.superclass.Init.call(this),this._options=e},t.RegExpValidator.prototype.validate=function(e){var i,n,o,r,s=this._options&&this._options.pattern||"";if(null===e||void 0===e||""===e)return!0;e=e||0===e?e.toString():e;var a,l,h,u="^("+s+")$",d=!1;if(h=e.match(u),null===h||h[0]!==e)throw this._options&&(r=this._options.messageSummary||null,i=this._options.messageDetail||null,n=this._options&&this._options.label||""),o={label:n,pattern:s,value:e},l=r?t.Translations.applyParameters(r,o):t.Translations.getTranslatedString(this._getSummaryKey(),o),a=i?t.Translations.applyParameters(i,o):t.Translations.getTranslatedString(this._getDetailKey(),o),new t.ValidatorError(l,a);return d=!0},t.RegExpValidator.prototype.getHint=function(){var e=null,i={};return this._options&&this._options.hint&&(i={pattern:this._options.pattern},e=t.Translations.applyParameters(this._options.hint,i)),e},t.RegExpValidator.prototype._getSummaryKey=function(){return t.RegExpValidator._BUNDLE_KEY_SUMMARY},t.RegExpValidator.prototype._getDetailKey=function(){return t.RegExpValidator._BUNDLE_KEY_DETAIL},t.IntlConverterUtils={},t.IntlConverterUtils.isoToDate=function(e){return t.OraI18nUtils.isoToDate(e)},t.IntlConverterUtils.isoToLocalDate=function(e){return t.OraI18nUtils.isoToLocalDate(e)},t.IntlConverterUtils.dateToLocalIso=function(e){return t.OraI18nUtils.dateToLocalIso(e)},t.IntlConverterUtils._getTimeZone=function(e){return t.OraI18nUtils._getTimeZone(e)},t.IntlConverterUtils.getLocalTimeZoneOffset=function(){return t.OraI18nUtils.getLocalTimeZoneOffset()},t.IntlConverterUtils.getConverterInstance=function(e){var i,n="",o={},r=null;return e&&("object"==typeof e&&(e instanceof t.Converter||e.parse&&"function"==typeof e.parse||e.format&&"function"==typeof e.format?r=e:(n=e.type,o=e.options||{})),r||(n=n||e,n&&"string"==typeof n&&(i=t.Validation.converterFactory(n),r=i.createConverter(o)))),r},t.IntlConverterUtils._minMaxIsoString=function(t,e){if(t){e=e||this.dateToLocalIso(new Date);var i=e.indexOf("T");0===t.indexOf("T")&&i>0&&(t=e.substring(0,i)+t)}return t},t.IntlConverterUtils.__getConverterOptionError=function(e,i){t.Assert.assertObject(i);var n,o,r="",s="",a=i.propertyName;return"optionTypesMismatch"===e?(n=i.requiredPropertyName,o=i.requiredPropertyValueValid,r=t.Translations.getTranslatedString("oj-converter.optionTypesMismatch.summary",{propertyName:a,propertyValue:i.propertyValue,requiredPropertyName:n}),s=t.IntlConverterUtils._getOptionValueDetailMessage(n,o)):"optionTypeInvalid"===e?(a=i.propertyName,o=i.propertyValueValid,r=t.Translations.getTranslatedString("oj-converter.optionTypeInvalid.summary",{propertyName:a}),s=t.IntlConverterUtils._getOptionValueDetailMessage(a,o)):"optionOutOfRange"===e?(r=t.Translations.getTranslatedString("oj-converter.optionOutOfRange.summary",{propertyName:a,propertyValue:i.propertyValue}),o=i.propertyValueValid,s=t.IntlConverterUtils._getOptionValueDetailMessage(a,o)):"optionValueInvalid"===e&&(r=t.Translations.getTranslatedString("oj-converter.optionValueInvalid.summary",{propertyName:a,propertyValue:i.propertyValue}),o=i.propertyValueHint,s=t.IntlConverterUtils._getOptionValueDetailMessage(a,o)),new t.ConverterError(r,s)},t.IntlConverterUtils._getOptionValueDetailMessage=function(e,i){var n;return i?("string"==typeof i?n="oj-converter.optionHint.detail":(n="oj-converter.optionHint.detail-plural",i=i.join(t.Translations.getTranslatedString("oj-converter.plural-separator"))),t.Translations.getTranslatedString(n,{propertyName:e,propertyValueValid:i})):""},t.IntlConverterUtils.__getNullFormattedValue=function(){return""},t.IntlConverterUtils._copyTimeOver=function(e,i){return t.OraI18nUtils._copyTimeOver(e,i)},t.IntlConverterUtils._clearTime=function(e){return t.OraI18nUtils._clearTime(e)},t.IntlConverterUtils._dateTime=function(e,i,n){return t.OraI18nUtils._dateTime(e,i,n)},t.IntlConverterUtils._normalizeIsoString=function(e){return t.OraI18nUtils._normalizeIsoString(e)},t.LengthValidator=function(t){this.Init(t)},t.LengthValidator.defaults={countBy:"codeUnit"},t.Object.createSubclass(t.LengthValidator,t.Validator,"oj.LengthValidator"),t.LengthValidator.prototype.Init=function(e){var i=e.countBy;if(t.LengthValidator.superclass.Init.call(this),this._min=void 0!==e.min?parseInt(e.min,10):null,this._max=void 0!==e.max?parseInt(e.max,10):null,isNaN(this._min))throw new Error("length validator's min option is not a number. min option is "+e.min);if(isNaN(this._max))throw new Error("length validator's max option is not a number. max option is "+e.min);if(null!==this._min&&this._min<0)throw new Error("length validator's min option cannot be less than 0. min option is "+e.min);if(null!==this._max&&this._max<1)throw new Error("length validator's max option cannot be less than 1. max option is "+e.max);this._countBy=void 0===i?t.LengthValidator.defaults.countBy:i,e&&(this._hint=e.hint||{},this._customMessageSummary=e.messageSummary||{},this._customMessageDetail=e.messageDetail||{})},t.LengthValidator.prototype.getHint=function(){var e,i=null,n=this._hint,o=n.exact,r=n.inRange,s=n.max,a=n.min,l=this._max,h=this._min,u=t.Translations;return null!==h&&null!==l?h!==l?(e={min:h,max:l},i=r?u.applyParameters(r,e):u.getTranslatedString("oj-validator.length.hint.inRange",e)):(e={length:h},i=o?u.applyParameters(o,e):u.getTranslatedString("oj-validator.length.hint.exact",e)):null!==h?(e={min:h},i=a?u.applyParameters(a,e):u.getTranslatedString("oj-validator.length.hint.min",e)):null!==l&&(e={max:l},i=s?u.applyParameters(s,e):u.getTranslatedString("oj-validator.length.hint.max",e)),i},t.LengthValidator.prototype.validate=function(e){var i,n,o,r=this._customMessageDetail,s=this._customMessageSummary,a="",l=this._max,h=s.tooLong,u=s.tooShort,d=r.tooLong,c=r.tooShort,p=this._min,_="",g=t.Translations;if(o=""+e,i=this._getLength(o),(null===p||i>=this._min)&&(null===l||i<=this._max))return o;throw i<this._min?(n={value:e,min:p},_=u?g.applyParameters(u,n):g.getTranslatedString("oj-validator.length.messageSummary.tooShort"),a=c?g.applyParameters(c,n):g.getTranslatedString("oj-validator.length.messageDetail.tooShort",n)):(n={value:e,max:l},_=h?g.applyParameters(h,n):g.getTranslatedString("oj-validator.length.messageSummary.tooLong"),a=d?g.applyParameters(d,n):g.getTranslatedString("oj-validator.length.messageDetail.tooLong",n)),new t.ValidatorError(_,a)},t.LengthValidator.prototype._getLength=function(e){var i,n,o=this._countBy.toLowerCase(),r=e.length,s=0;switch(o){case"codepoint":for(i=0;i<r;i++)55296===(63488&e.charCodeAt(i))&&s++;t.Assert.assert(s%2===0,"the number of surrogate chars must be an even number."),n=r-s/2;break;case"codeunit":default:n=r}return n}}),define("ojs/ojvalidation-number",["ojs/ojcore","jquery","ojL10n!ojtranslations/nls/localeElements","ojs/ojvalidation-base"],function(t,e,i){t.NumberConverter=function(){this.Init()},t.Object.createSubclass(t.NumberConverter,t.Converter,"oj.NumberConverter"),t.NumberConverter.prototype.Init=function(e){t.NumberConverter.superclass.Init.call(this,e)},t.NumberConverter.prototype.format=function(e){return t.NumberConverter.superclass.format.call(this,e)},t.NumberConverter.prototype.parse=function(e){return t.NumberConverter.superclass.parse.call(this,e)},t.NumberRangeValidator=function(t){this.Init(t)},t.Object.createSubclass(t.NumberRangeValidator,t.Validator,"oj.NumberRangeValidator"),t.NumberRangeValidator.prototype.Init=function(e){t.NumberRangeValidator.superclass.Init.call(this),e&&(this._min=e.min,this._max=e.max,this._converter=t.IntlConverterUtils.getConverterInstance(e.converter),this._hint=e.hint||{},this._customMessageSummary=e.messageSummary||{},this._customMessageDetail=e.messageDetail||{});
},t.NumberRangeValidator.prototype.validate=function(e){var i=e?e.toString():e,n=parseFloat(i),o=this._customMessageSummary,r=this._customMessageDetail,s=r.rangeOverflow,a=r.rangeUnderflow,l=r.exact,h=o.rangeOverflow,u=o.rangeUnderflow,d=void 0!==this._min?parseFloat(this._min):null,c=void 0!==this._max?parseFloat(this._max):null,p=d&&this._converter?this._converter.format(d):d,_=c&&this._converter?this._converter.format(c):c,g="",m="",f=null,y=t.Translations;if(null===e)return e;if(null!==d&&null!==c){if(n>=d&&n<=c||d>c)return i}else if(null!==d){if(n>=d)return i}else if(null===c||n<=c)return i;throw null!==c&&null!==d&&d===c?(f={value:e,num:_},m=l?y.applyParameters(l,f):y.getTranslatedString("oj-validator.range.number.messageDetail.exact",f),n>c?g=h?h:y.getTranslatedString("oj-validator.range.number.messageSummary.rangeOverflow"):n<d&&(g=h?u:y.getTranslatedString("oj-validator.range.number.messageSummary.rangeUnderflow"))):null!==c&&n>c?(f={value:e,max:_},g=h?h:y.getTranslatedString("oj-validator.range.number.messageSummary.rangeOverflow"),m=s?y.applyParameters(s,f):y.getTranslatedString("oj-validator.range.number.messageDetail.rangeOverflow",f)):null!==d&&n<d&&(f={value:e,min:p},g=u?u:y.getTranslatedString("oj-validator.range.number.messageSummary.rangeUnderflow"),m=a?y.applyParameters(a,f):y.getTranslatedString("oj-validator.range.number.messageDetail.rangeUnderflow",f)),new t.ValidatorError(g,m)},t.NumberRangeValidator.prototype.getHint=function(){var e=null,i=this._hint,n=i.inRange,o=i.exact,r=i.min,s=i.max,a=t.Translations,l=void 0!==this._min?parseFloat(this._min):null,h=void 0!==this._max?parseFloat(this._max):null,u=l&&this._converter?this._converter.format(l):l,d=h&&this._converter?this._converter.format(h):h;return null!==l&&null!==h?e=l!==h?n?a.applyParameters(n,{min:u,max:d}):a.getTranslatedString("oj-validator.range.number.hint.inRange",{min:u,max:d}):o?a.applyParameters(o,{num:u}):a.getTranslatedString("oj-validator.range.number.hint.exact",{num:u}):null!==l?e=r?a.applyParameters(r,{min:u}):a.getTranslatedString("oj-validator.range.number.hint.min",{min:u}):null!==h&&(e=s?a.applyParameters(s,{max:d}):a.getTranslatedString("oj-validator.range.number.hint.max",{max:d})),e},t.IntlNumberConverter=function(t){this.Init(t)},t.Object.createSubclass(t.IntlNumberConverter,t.NumberConverter,"oj.IntlNumberConverter"),t.IntlNumberConverter.prototype.Init=function(e){t.IntlNumberConverter.superclass.Init.call(this,e)},t.IntlNumberConverter.prototype._getWrapped=function(){return this._wrapped||(this._wrapped=n.getInstance()),this._wrapped},t.IntlNumberConverter.prototype.format=function(e){var i,n,o,r;if(null==e||"string"==typeof e&&0===t.StringUtils.trim(""+e).length||"number"==typeof e&&isNaN(e))return t.IntlConverterUtils.__getNullFormattedValue();n=t.Config.getLocale(),o=t.LocaleData.__getBundle(),r=this.resolvedOptions();try{return this._getWrapped().format(e,o,r,n)}catch(t){throw i=this._processConverterError(t,e)}},t.IntlNumberConverter.prototype.getHint=function(){return null},t.IntlNumberConverter.prototype.getOptions=function(){return t.IntlNumberConverter.superclass.getOptions.call(this)},t.IntlNumberConverter.prototype.parse=function(e){var i,n,o,r;if(null==e||""===e)return null;n=t.Config.getLocale(),o=t.LocaleData.__getBundle(),r=this.resolvedOptions();try{return this._getWrapped().parse(t.StringUtils.trim(e),o,r,n)}catch(t){throw i=this._processConverterError(t,e)}},t.IntlNumberConverter.prototype.resolvedOptions=function(){var e,i,n=t.Config.getLocale();if(n!==this._locale||!this._resolvedOptions){i=t.LocaleData.__getBundle();try{if(!i)return t.Logger.error("locale bundle for the current locale %s is unavailable",n),{};this._resolvedOptions=this._getWrapped().resolvedOptions(i,this.getOptions(),n),this._locale=n}catch(t){throw e=this._processConverterError(t)}}return this._resolvedOptions},t.IntlNumberConverter.prototype._processConverterError=function(e,i){var n,o,r,s,a,l,h,u=e.errorInfo;if(u){switch(o=u.errorCode,s=u.parameterMap,t.Assert.assertObject(s),a=s.propertyName,o){case"optionTypesMismatch":case"optionTypeInvalid":n=t.IntlConverterUtils.__getConverterOptionError(o,s);break;case"optionOutOfRange":n=t.IntlConverterUtils.__getConverterOptionError(o,s);break;case"optionValueInvalid":n=t.IntlConverterUtils.__getConverterOptionError(o,s);break;case"decimalFormatMismatch":l="oj-converter.number.decimalFormatMismatch.summary";break;case"currencyFormatMismatch":l="oj-converter.number.currencyFormatMismatch.summary";break;case"percentFormatMismatch":l="oj-converter.number.percentFormatMismatch.summary";break;case"unsupportedParseFormat":h=t.Translations.getTranslatedString("oj-converter.number.decimalFormatUnsupportedParse.summary"),r=t.Translations.getTranslatedString("oj-converter.number.decimalFormatUnsupportedParse.detail"),n=new t.ConverterError(h,r)}l&&(h=t.Translations.getTranslatedString(l,{value:i||s.value,format:s.format}),r=t.Translations.getTranslatedString("oj-converter.hint.detail",{exampleValue:this._getHintValue()}),n=new t.ConverterError(h,r))}return n||(h=e.message,r=e.message,n=new t.ConverterError(h,r)),n},t.IntlNumberConverter.prototype._getHintValue=function(){var e="";try{e=this.format(12345.98765)}catch(i){i instanceof t.ConverterError&&(e="",t.Logger.error("error retrieving hint value in format"))}finally{return e}},t.NumberConverterFactory=function(){function e(e){return new t.IntlNumberConverter(e)}return{createConverter:function(t){return e(t)}}}(),t.Validation.__registerDefaultConverterFactory(t.ConverterFactory.CONVERTER_TYPE_NUMBER,t.NumberConverterFactory),t.NumberRangeValidatorFactory=function(){function e(e){return new t.NumberRangeValidator(e)}return{createValidator:function(t){return e(t)}}}(),t.Validation.__registerDefaultValidatorFactory(t.ValidatorFactory.VALIDATOR_TYPE_NUMBERRANGE,t.NumberRangeValidatorFactory);var n;n=function(){function e(){return{format:function(t,e,i,o){(arguments.length<=2||void 0===i)&&(i={useGrouping:!0,style:"decimal"}),p(i,"OraNumberConverter.format");var r={};return c(e,r,i,o),n(t,i,e,r,o)},parse:function(t,e,i,n){return"number"==typeof t?t:"[object Number]"===Object.prototype.toString.call(t)?Number(t):((arguments.length<=2||void 0===i)&&(i={useGrouping:!0,style:"decimal"}),p(i,"OraNumberConverter.parse"),o(t,e,i,n))},resolvedOptions:function(e,i,n){(arguments.length<3||void 0===n)&&(n=t.OraI18nUtils.getLocaleElementsMainNodeKey(e)),(arguments.length<2||void 0===i)&&(i={useGrouping:!0,style:"decimal"});var o=N(e,i,n);return U(o,i,n)}}}var i,n,o,r,s,a,l,h,u,d,c,p,_,g,m,f,y,v,S,C,E,b,T,A,O,P,I,D,x,M,L,R,w,N,U,B=/^[+\-]?infinity$/i,H=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,k=/([^+-.0-9]*)([+\-]?\d*\.?\d*(E[+\-]?\d+)?).*$/,F=/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,G=/(^0\.0*)([^0].*$)/,j={trillion:[1e14,1e13,1e12],billion:[1e11,1e10,1e9],million:[1e8,1e7,1e6],thousand:[1e5,1e4,1e3]},V={trillion:1e12,billion:1e9,million:1e6,thousand:1e3},Y={HALF_UP:"ceil",HALF_DOWN:"floor",DEFAULT:"round"};i=function(t,e,i){var n;for(n=t.length;n<e;n+=1)t=i?"0"+t:t+"0";return t},y=function(t,e,i,n){var o=t+" is out of range.  Enter a value between "+e+" and "+i+" for "+n,r=new RangeError(o),s={errorCode:"numberOptionOutOfRange",parameterMap:{value:t,minValue:e,maxValue:i,propertyName:n}};throw r.errorInfo=s,r},E=function(t,e,i,n,o){var r=t[e];return void 0!==r?(r=Number(r),(isNaN(r)||r<i||r>n)&&y(r,i,n,e),Math.floor(r)):o},m=function(t,e){if(void 0===e)return"latn";var i=b(e),n="symbols-numberSystem-"+i;return void 0===t.numbers[n]&&(i="latn"),i},f=function(t){var e=t.split("-");return e[0]},b=function(t){t=t||"en-US";var e=t.indexOf("-u-nu-"),i="latn";return e!==-1&&(i=t.substr(e+6,4)),i},c=function(e,i,n,o){var r,s=t.OraI18nUtils.getLocaleElementsMainNode(e),a=m(s,o);i.numberingSystemKey=a,i.numberingSystem="symbols-numberSystem-"+a;var h=n.lenientParse;if(i.lenientParse=h||"full",void 0!==n.pattern&&n.pattern.length>0)r=n.pattern;else{var u;switch(n.style){case"decimal":u="decimalFormats-numberSystem-";break;case"currency":u="currencyFormats-numberSystem-";break;case"percent":u="percentFormats-numberSystem-";break;default:u="decimalFormats-numberSystem-"}u+=i.numberingSystemKey,r=s.numbers[u].standard;var d=n.decimalFormat;void 0!==d&&"decimal"===n.style&&(i.shortDecimalFormat=s.numbers["decimalFormats-numberSystem-latn"][d].decimalFormat)}var c=s.numbers[i.numberingSystem].decimal,p=s.numbers[i.numberingSystem].group,_=n.separators;if(void 0!==_){i.separators=_;var g=_.decimal,y=_.group;void 0!==g&&""!==g&&(c=_.decimal),void 0!==y&&(p=_.group)}var v=t.OraI18nUtils.getLocaleElementsMainNodeKey(e),S=f(v);i.plurals=e.supplemental.plurals,i.lang=S,i.pat=r,i.minusSign=s.numbers[i.numberingSystem].minusSign,i.decimalSeparator=c,i.exponential=s.numbers[i.numberingSystem].exponential,i.groupingSeparator=p,i.currencyDisplay=n.currencyDisplay,void 0!==n.currency&&(i.currencyCode=n.currency.toUpperCase()),i.style=n.style,l(n,r,s,i),void 0===n.pattern&&(i.minimumIntegerDigits=E(n,"minimumIntegerDigits",1,21,i.minimumIntegerDigits),void 0!==n.maximumFractionDigits&&(i.maximumFractionDigits=E(n,"maximumFractionDigits",0,20,i.maximumFractionDigits),i.maximumFractionDigits<i.minimumFractionDigits&&(i.minimumFractionDigits=i.maximumFractionDigits)),void 0!==n.minimumFractionDigits&&(i.minimumFractionDigits=E(n,"minimumFractionDigits",0,20,i.minimumFractionDigits)),i.maximumFractionDigits<i.minimumFractionDigits&&(i.maximumFractionDigits=i.minimumFractionDigits))},g=function(t){var e=new TypeError('The property "currency" is required whenthe property "'+t+'" is "currency". An accepted value is a three-letter ISO 4217 currency code.'),i={errorCode:"optionTypesMismatch",parameterMap:{propertyName:t,propertyValue:"currency",requiredPropertyName:"currency",requiredPropertyValueValid:"a three-letter ISO 4217 currency code"}};throw e.errorInfo=i,e},O=function(){var t,e,i="unsupportedParseFormat",n="long and short decimalFormats are not supported for parsing";throw t=new Error(n),e={errorCode:i,parameterMap:{value:"decimal"}},t.errorInfo=e,t},p=function(e,i){var n=t.OraI18nUtils.getGetOption(e,i),o=n("style","string",["currency","decimal","percent","perMill"],"decimal");"decimal"===o&&(o=n("decimalFormat","string",["standard","short","long"]),"OraNumberConverter.parse"===i&&void 0!==o&&"standard"!==o&&O());var r=n("currency","string");"currency"===o&&void 0===r&&g("style");n("roundingMode","string",["HALF_UP","HALF_DOWN","HALF_EVEN"],"DEFAULT"),n("lenientParse","string",["none","full"],"full")},D=function(t,e,i){function n(t){var e=0,i=0,n=0,o="";if("0"!==t[0]){for(;"0"!==t[e]&&e<t.length;)e++;o=t.substr(0,e),n=e}for(e=n;e<t.length&&"0"===t[e];e++)i++;return[o,i]}function o(t){var e,i,n;for(e in j)for(n=j[e].length,i=0;i<n;i++)if(j[e][i]<=t)return[e,j[e][i]];return[t,null]}var r=o(t),s="";if(null!==r[1]){var a=i.lang,l=i.plurals[a](Math.floor(t/V[r[0]])),h=""+r[1]+"-count-"+l;h=i.shortDecimalFormat[h],void 0===h&&(l="other",h=""+r[1]+"-count-"+l,h=i.shortDecimalFormat[h]);var u=n(h),d=u[1];if(s=u[0],d<h.length){var c=1*Math.pow(10,d);c=r[1]/c*10,t/=c}}var p,_="";return void 0!==h&&(_=h.substr(d+u[0].length)),p=P(t,e,i),_=s+p+_},I=function(t,e){var n=t+"",o=0,r=n.split(/e/i),s=r[0];G.lastIndex=0;var a=G.exec(s);null!==a?(o=a[1].length-1,s=a[2]):s=s.replace(".","");var l=r.length>1?parseInt(r[1],10):0,h=parseInt(s,10),u=e.minimumIntegerDigits+e.maximumFractionDigits;if(s.length>u){u-=s.length;var d=Math.pow(10,u);h=Math.round(h*d)}var c=e.minimumIntegerDigits+e.minimumFractionDigits;h+="",h=i(h,c,!1),l-=n.indexOf(".")!==-1?e.minimumIntegerDigits-n.indexOf(".")+o:c-s.length-e.minimumFractionDigits;var p=Math.abs(l);p=i(p+"",e.minExponentDigits,!0),l<0&&(p=e.minusSign+p);var _=h.slice(0,e.minimumIntegerDigits),g=h.slice(e.minimumIntegerDigits);return _+=g.length>0?e.decimalSeparator+h.slice(e.minimumIntegerDigits)+e.exponential+p:e.exponential+p},P=function(t,e,n){var o=n.groupingSize,r=n.groupingSize0,s=n.decimalSeparator,a=t+"",l=a.split(/e/i),h=l.length>1?parseInt(l[1],10):0;a=l[0],l=a.split(".");var u=l.length>1?l[1]:"";if(l.length>1&&u.length>h){var d=Math.min(n.maximumFractionDigits,u.length-h),c=e.roundingMode||"DEFAULT";t=v(t,d,c)}a=t+"",l=a.split(/e/i),h=l.length>1?parseInt(l[1],10):0,a=l[0],l=a.split("."),a=l[0],u=l.length>1?l[1]:"",h>0?(u=i(u,h,!1),a+=u.slice(0,h),u=u.substr(h)):h<0&&(h=-h,a=i(a,h+1,!0),u=a.slice(-h,a.length)+u,a=a.slice(0,-h)),u=d>0&&u.length>0?s+(u.length>d?u.slice(0,d):i(u,d,!1)):n.minimumFractionDigits>0?s:"";var p=s.length+n.minimumFractionDigits;u=i(u,p,!1);var _=n.groupingSeparator,g="";e.useGrouping===!1&&void 0===e.pattern&&(_=""),a=i(a,n.minimumIntegerDigits,!0);var m=a.length-1;u=u.length>1?u:"";for(var f;m>=0;){if(0===o||o>m)return f=a.slice(0,m+1)+(g.length?_+g+u:u);g=a.slice(m-o+1,m+1)+(g.length?_+g:""),m-=o,r>0&&(o=r)}return f=a.slice(0,m+1)+_+g+u},T=function(t,e,i){if("HALF_DOWN"===i||"HALF_EVEN"===i){var n=t.substr(e);n=parseInt(n,10),n>5&&(i="HALF_UP")}return i},v=function(t,e,i){var n=t.toString().split(".");if(void 0===n[1])return t;if("5"===n[1][e]&&"DEFAULT"!==i){var o=T(n[1],e,i);return o=C(n,o,e),S(t,-e,o,n)}var r=Math.pow(10,e),s=Math.round(t*r)/r;return isFinite(s)?s:t},C=function(t,e,i){var n=Y[e];if("HALF_EVEN"===e){var o;if(0===i){var r=t[0].length;o=parseInt(t[0][r-1],10)}else o=parseInt(t[1][i-1],10);n=o%2==0?Y.HALF_DOWN:Y.HALF_UP}return n},S=function(t,e,i,n){if(0===e)return"5"===n[1][0]?Math[i](t):Math.round(t);var o=t.toString().split("e"),r=o[0],s=o[1],a=r+"e"+(s?parseInt(s,10)-e:-e),l=parseFloat(a);return t=Math[i](l),o=t.toString().split("e"),r=o[0],s=o[1],a=r+"e"+(s?parseInt(s,10)+e:e),l=parseFloat(a)},n=function(e,i,n,o,r){var s=t.OraI18nUtils.getLocaleElementsMainNode(n);if(!isFinite(e))return e===1/0?s.numbers[o.numberingSystem].infinity:e===-(1/0)?s.numbers[o.numberingSystem].infinity:s.numbers[o.numberingSystem].nan;var a=Math.abs(e);o.isPercent===!0||"percent"===i.style?a*=100:o.isPerMill===!0&&(a*=1e3),a="decimal"===i.style&&void 0!==i.decimalFormat&&"standard"!==i.decimalFormat?D(a,i,o):o.useExponentialNotation===!0?I(a,o):P(a,i,o);var l="";l+=e<0&&a-0!=0?o.negativePrefix+a+o.negativeSuffix:o.positivePrefix+a+o.positiveSuffix;var h=b(r);if(void 0===t.OraI18nUtils.numeringSystems[h]&&(h="latn"),"latn"!==h){var u,d=[];for(u=0;u<l.length;u++)l[u]>="0"&&l[u]<="9"?d.push(t.OraI18nUtils.numeringSystems[h][l[u]]):d.push(l[u]);return d.join("")}return l},h=function(e,i,n,o){var r,s=t.OraI18nUtils.trimNumber(e),l="",h=!1,d=o.numbers[n.numberingSystem].plusSign,c=new RegExp("^"+d.replace(F,"\\$1"));s=s.replace(c,"");var p=t.OraI18nUtils.trimNumber(n.positivePrefix),_=t.OraI18nUtils.trimNumber(n.positiveSuffix),g=t.OraI18nUtils.trimNumber(n.negativePrefix),m=t.OraI18nUtils.trimNumber(n.negativeSuffix),f=new RegExp("^"+(p||"").replace(F,"\\$1")),y=new RegExp((_||"").replace(F,"\\$1")+"$"),v=new RegExp("^"+(g||"").replace(F,"\\$1")),S=new RegExp((m||"").replace(F,"\\$1")+"$");if(v.test(s)===!0&&S.test(s)===!0)s=s.replace(v,""),s=s.replace(S,""),l="-",h=!0;else if(f.test(s)===!0&&y.test(s)===!0)s=s.replace(f,""),s=s.replace(y,""),l="+",h=!0;else if("currency"===i.style){var C,E,b,T,A,O=n.currencyCode,P=O;void 0!==o.numbers.currencies[O]&&(P=o.numbers.currencies[O].symbol),void 0===n.currencyDisplay||"symbol"===n.currencyDisplay?A=P:"code"===n.currencyDisplay&&(A=O),void 0!==A&&(C=(p||"").replace(A,""),E=(_||"").replace(A,""),b=(g||"").replace(A,""),T=(m||"").replace(A,""),f=new RegExp(("^"+C).replace(F,"\\$1")),y=new RegExp(E.replace(F,"\\$1")+"$"),v=new RegExp(("^"+b).replace(F,"\\$1")),S=new RegExp(T.replace(F,"\\$1")+"$"),v.test(s)===!0&&S.test(s)===!0?(s=s.replace(v,""),s=s.replace(S,""),l="-",h=!0):f.test(s)===!0&&y.test(s)===!0&&(s=s.replace(f,""),s=s.replace(y,""),l="+",h=!0))}return h?r=[l,s]:"full"===n.lenientParse?(r=u(s,n),r[2]=!0):a(i.style,n,e),r},u=function(e,i){var n=i.groupingSeparator,o=i.decimalSeparator,r=i.minusSign,s="+",a="-",l="",h="",u=t.OraI18nUtils.toUpper(i.exponential);e=t.OraI18nUtils.toUpper(e),e=e.split(u).join("E");var d=n;e=e.split(d).join("");var c=d.replace(/\u00A0/g," ");d!==c&&(e=e.split(c).join("")),e=e.split(o).join("."),"."===e.charAt(0)&&(e=e.substr(1),h="."),e=e.replace(r,a);var p=k.exec(e),_=h+p[2];return t.OraI18nUtils.startsWith(_,a)?(_=_.substr(a.length),l="-"):t.OraI18nUtils.startsWith(e,s)&&(_=_.substr(s.length),l="+"),[l,_]},d=function(e,i){var n,o=i.minusSign,r=i.plusSign;return e=t.OraI18nUtils.trimNumber(e),o=t.OraI18nUtils.trimNumber(o),r=t.OraI18nUtils.trimNumber(r),t.OraI18nUtils.startsWith(e,o)?n=["-",e.substr(o.length)]:t.OraI18nUtils.startsWith(e,t.OraI18nUtils.trimNumber(r))&&(n=["+",e.substr(r.length)]),n||["",e]},r=function(e,i){var n=b(i);if(void 0===t.OraI18nUtils.numeringSystems[n])return e;var o,r=[];for(o=0;o<e.length;o++){var s=t.OraI18nUtils.numeringSystems[n].indexOf(e[o]);s!==-1?r.push(s):r.push(e[o])}var a=r.join("");return a},s=function(e,i){var n={},o=i.decimalSeparator,r=i.groupingSeparator;e=e.replace(/ /g,"");var s,a,l=i.exponential,h=e.indexOf(l.toLowerCase());h<0&&(h=e.indexOf(t.OraI18nUtils.toUpper(l))),h<0?(a=e,n.exponent=null):(a=e.substr(0,h),n.exponent=e.substr(h+l.length));var u=o,d=a.indexOf(u);d<0?(s=a,n.fraction=null):(s=a.substr(0,d),n.fraction=a.substr(d+u.length)),s=s.split(r).join("");var c=r.replace(/\u00A0/g," ");return r!==c&&(s=s.split(c).join("")),n.integer=s,n},A=function(e,i,n,o){isNaN(e)&&a(i.style,n,o),n.isPercent===!0||"percent"===i.style?e/=100:n.isPerMill===!0&&(e/=1e3);var r=t.OraI18nUtils.getGetOption(i,"OraNumberConverter.parse"),s=r("roundDuringParse","boolean",[!0,!1],!1);return s&&(e=_(e,n,i)),e},a=function(t,e,i){var n,o,r,s;switch(n="Unparsable number "+i+" The expected number pattern is "+e.pat,t){case"decimal":s="decimalFormatMismatch";break;case"currency":s="currencyFormatMismatch";break;case"percent":s="percentFormatMismatch"}throw o=new Error(n),r={errorCode:s,parameterMap:{value:i,format:e.pat}},o.errorInfo=r,o},o=function(e,i,n,o){var l=t.OraI18nUtils.getLocaleElementsMainNode(i),p={},_=r(e,o);c(i,p,n,o);var g=NaN,m=_.replace(/ /g,"");if(B.test(m))return g=parseFloat(_);var f=h(_,n,p,l),y=f[0],v=f[1];if(y=y||"+",f[2])return g=parseFloat(y+v),A(g,n,p,e);var S=s(v,p),C=S.integer,E=S.fraction,b=S.exponent,T=y+C;if(null!==E&&(T+="."+E),null!==b){var O=d(b,p);T+="e"+(O[0]||"+")+O[1]}return H.test(T)?g=parseFloat(T):"full"===p.lenientParse?(T=u(_,p),g=parseFloat(T[0]+T[1])):a(n.style,p,e),A(g,n,p,e)};var W,z,K,Z,X="0",q=",",Q=".",J="%",$="‰",tt="#",et=";",it="E",nt="-",ot="'",rt="¤",st=2147483647,at=2147483647;return w=function(t){var e,i,n,o="#,##0.###";throw e='Unexpected character(s) encountered in the pattern "'+t+' An example of a valid pattern is "'+o+'".',i=new SyntaxError(e),n={errorCode:"optionValueInvalid",parameterMap:{propertyName:"pattern",propertyValue:t,propertyValueHint:o}},i.errorInfo=n,i},M=function(t,e,i){var n=t.substr(e,i.length),o=new RegExp(i,"i");return null!==o.exec(n)},R=function(t,e){var i={};null!==W&&(e.positivePrefix=L(W,t,e,i)),null!==z&&(e.positiveSuffix=L(z,t,e,i)),null!==K&&(e.negativePrefix=L(K,t,e,i)),null!==Z&&(e.negativeSuffix=L(Z,t,e,i)),void 0!==i.name&&(e.positiveSuffix=" "+i.name,e.positivePrefix="","ar"===e.lang?(e.negativeSuffix=t.numbers[e.numberingSystem].minusSign+" "+i.name,e.negativePrefix=""):(e.negativeSuffix=" "+i.name,e.negativePrefix=t.numbers[e.numberingSystem].minusSign))},L=function(t,e,i,n){for(var o="",r=0;r<t.length;){var s=t.charAt(r++);if(s!==ot){switch(s){case rt:var a=i.currencyCode,l=a,h=a;void 0!==e.numbers.currencies[a]&&(l=e.numbers.currencies[a].displayName,h=e.numbers.currencies[a].symbol),void 0===i.currencyDisplay||"symbol"===i.currencyDisplay?s=h:"code"===i.currencyDisplay?s=a:(s=l,n.name=s);break;case J:s=e.numbers[i.numberingSystem].percentSign;break;case $:s=e.numbers[i.numberingSystem].perMille;break;case nt:s=e.numbers[i.numberingSystem].minusSign}o=o.concat(s)}}return o},l=function(t,e,i,n){for(var o=!1,r=!1,s=0,a=0,l=!0,h=1;h>=0&&a<e.length;--h){var u,d=!1,c="",p="",_=-1,m=1,f=0,y=0,v=0,S=-1,C=-1,E=0;l=!0;for(var b=a;b<e.length;++b){var T=e.charAt(b);switch(E){case 0:case 2:if(d){if(T===ot){b+1<e.length&&e.charAt(b+1)===ot?(++b,l?c=c.concat("''"):p=p.concat("''")):d=!1;continue}}else{if(T===tt||T===X||T===q||T===Q){E=1,--b;continue}if(T===rt){void 0===t.currency&&g("pattern"),t.style="currency";var A=b+1<e.length&&e.charAt(b+1)===rt;A&&++b,l?c=c.concat(A?"'¤¤":"'¤"):p=p.concat(A?"'¤¤":"'¤");continue}if(T===ot){if(T===ot){b+1<e.length&&e.charAt(b+1)===ot?(++b,l?c=c.concat("''"):p=p.concat("''")):d=!0;continue}}else{if(T===et){0!==E&&0!==h||w(e),a=b+1,b=e.length;continue}if(T===J){t.style="percent",1!==m&&w(e),n.isPercent=!0,m=100,l?c=c.concat("'%"):p=p.concat("'%");continue}if(T===$){1!==m&&w(e),t.style="perMill",n.isPerMill=!0,m=1e3,l?c=c.concat("'‰"):p=p.concat("'‰");continue}if(T===nt){l?c=c.concat("'-"):p=p.concat("'-");continue}}}l?c=c.concat(T):p=p.concat(T);break;case 1:if(1!==h){0===--s&&(E=2,l=!1);continue}if(++s,T===tt)y>0?++v:++f,S>=0&&_<0&&++S;else if(T===X)v>0&&w(e),++y,S>=0&&_<0&&++S;else if(T===q)C=S,S=0;else{if(T!==Q){if(M(e,b,it)){for(r&&w(e),r=!0,u=0,b+=it.length;b<e.length&&e.charAt(b)===X;)++u,++s,++b;(f+y<1||u<1)&&w(e),E=2,l=!1,--b;continue}E=2,l=!1,--b,--s;continue}_>=0&&w(e),_=f+y+v}}}if(0===y&&f>0&&_>=0){var O=_;0===O&&++O,v=f-O,f=O-1,y=1}if((_<0&&v>0||_>=0&&(_<f||_>f+y)||0===S||d)&&w(e),1===h){W=c,z=p,K=W,Z=z;var P=f+y+v,I=_>=0?_:P;n.minimumIntegerDigits=I-f,n.maximumIntegerDigits=r?f+n.minimumIntegerDigits:st,n.maximumFractionDigits=_>=0?P-_:0,n.minimumFractionDigits=_>=0?f+y-_:0,n.groupingSize=S>0?S:0,n.groupingSize0=C}else K=c,Z=p,o=!0}0===e.length&&(W=z="",n.minimumIntegerDigits=0,n.maximumIntegerDigits=st,n.minimumFractionDigits=0,n.maximumFractionDigits=at),n.useExponentialNotation=r,n.minExponentDigits=u,(!o||0===K.localeCompare(W)&&0===Z.localeCompare(z))&&("currency"===t.style&&"ar"===n.lang?(Z=z+"'‏-",K=W):(Z=z,K="'-"+W)),R(i,n)},_=function(t,e,i){var n=e.maximumFractionDigits,o=t<0,r=i.roundingMode||"DEFAULT",s=v(Math.abs(t),n,r);return o?-s:s},N=function(e,i,n){var o={};return p(i,"OraNumberConverter.resolvedOptions"),c(e,o,i,n),o.numberingSystemKey=b(n),void 0===t.OraI18nUtils.numeringSystems[o.numberingSystemKey]&&(o.numberingSystemKey="latn"),o},U=function(t,e,i){var n={locale:i,style:void 0===e.style?"decimal":e.style,useGrouping:void 0===e.useGrouping||e.useGrouping,numberingSystem:t.numberingSystemKey};n.minimumIntegerDigits=t.minimumIntegerDigits,n.minimumFractionDigits=t.minimumFractionDigits,n.maximumFractionDigits=t.maximumFractionDigits,"decimal"===e.style&&void 0!==e.decimalFormat&&(n.decimalFormat=e.decimalFormat),"currency"===e.style&&(n.currency=e.currency,n.currencyDisplay=void 0===e.currencyDisplay?"symbol":e.currencyDisplay),void 0!==e.pattern&&(n.pattern=e.pattern);var o=e.roundingMode,r=e.roundDuringParse;void 0!==o&&(n.roundingMode=o),void 0!==r&&(n.roundDuringParse=r);var s=t.lenientParse;void 0!==s&&(n.lenientParse=s);var a=t.separators;return void 0!==a&&(n.separators=a),n},{getInstance:function(){return x||(x=e()),x}}}()}),define("ojs/internal-deps/dvt/DvtToolkit",["jquery"],function(t){var e;return e=function(){var e={};e.exportProperty=function(t,e,i){t[e]=i},e.Obj=function(){},e.Obj._GET_FUNCTION_NAME_REGEXP=/function\s+([\S^]+)\s*\(/,e.Obj.createSubclass=function(t,i,n){if(void 0!==t&&null!==t&&(void 0===i&&(i=Object),t!=i)){var o=e.Obj._tempSubclassConstructor;o.prototype=i.prototype,t.prototype=new o,t.prototype.constructor=t,t.superclass=i.prototype,n&&(t._typeName=n)}},e.Obj._tempSubclassConstructor=function(){},e.Obj.getTypeName=function(t){var i=t._typeName;if(null==i){var n=t.toString(),o=e.Obj._GET_FUNCTION_NAME_REGEXP.exec(n);o&&(i=o[1],t._typeName=i)}return i},e.Obj.prototype.getTypeName=function(){return e.Obj.getTypeName(this.constructor)},e.Obj.prototype.clone=function(){return null},e.Obj.prototype.mergeProps=function(t){},e.Obj.createCallback=function(t,e){return function(){return e.apply(t,arguments)}},e.Obj.defineConstant=function(t){return t},e.ArrayUtils=new Object,e.Obj.createSubclass(e.ArrayUtils,e.Obj),e.ArrayUtils.NONE=0,e.ArrayUtils.ADD=1,e.ArrayUtils.SUB=2,e.ArrayUtils.DIV=3,e.ArrayUtils.MULT=4,e.ArrayUtils.MOD=5,e.ArrayUtils.argsToArray=function(t){if(t){var e=new Array(t.length);if(t.length>0)for(var i=0;i<t.length;i++)e[i]=t[i];return e}return t},e.ArrayUtils.isArray=function(t){return"undefined"!=typeof t&&"[object Array]"===Object.prototype.toString.apply(t)},e.ArrayUtils.toFloat=function(t,i,n){if(!e.ArrayUtils.isArray(t))return t;i||(n=e.ArrayUtils.NONE),n=null===n||isNaN(n)?e.ArrayUtils.NONE:n,n!==e.ArrayUtils.NONE&&("number"!=typeof i&&(i=parseFloat(i)),isNaN(i)&&(n=e.ArrayUtils.NONE));var o,r=t.length;if(n===e.ArrayUtils.NONE)for(o=0;o<r;o++)t[o]=parseFloat(t[o]);else for(o=0;o<r;o++){var s=parseFloat(t[o]);switch(n){case e.ArrayUtils.MULT:s*=i;break;case e.ArrayUtils.ADD:s+=i;break;case e.ArrayUtils.SUB:s-=i;break;case e.ArrayUtils.DIV:s/=i;break;case e.ArrayUtils.MOD:s%=i}t[o]=s}return t},e.ArrayUtils.copy=function(t){var e;if(t){e=[];for(var i=t.length,n=0;n<i;n++)e.push(t[n])}return e},e.ArrayUtils.getIndex=function(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i}return-1},e.ArrayUtils.getLastIndex=function(t,e){if(t.lastIndexOf)return t.lastIndexOf(e);for(var i=t.length-1;i>=0;i--)if(t[i]===e)return i;return-1},e.ArrayUtils.equals=function(t,e){if(!t&&e)return!1;if(t&&!e)return!1;if(t||e){if(t.length!=e.length)return!1;for(var i=0;i<=t.length;i++)if(t[i]!==e[i])return!1;return!0}return!0},e.ArrayUtils.hasAnyMapItem=function(t,e){if(!t||!e)return!1;for(var i=0;i<e.length;i++)if(t[e[i]])return!0;return!1},e.ArrayUtils.hasAllMapItems=function(t,e){if(!t||!e)return!1;for(var i=0;i<e.length;i++)if(!t[e[i]])return!1;return!0},e.ArrayUtils.hasAnyItem=function(t,i){return e.ArrayUtils.hasAnyMapItem(e.ArrayUtils.createBooleanMap(t),i)},e.ArrayUtils.hasAllItems=function(t,i){return e.ArrayUtils.hasAllMapItems(e.ArrayUtils.createBooleanMap(t),i)},e.ArrayUtils.createBooleanMap=function(t){if(!t)return null;for(var e={},i=0;i<t.length;i++)e[t[i]]=!0;return e},e.ArrayUtils.reduce=function(t,e){if(t.reduce)return t.reduce(e);for(var i=t.length,n=t[0],o=1;o<i;o++)n=e(n,t[o],o,t);return n},e.ArrayUtils.map=function(t,e){if(t.map)return t.map(e);for(var i=t.length,n=[],o=0;o<i;o++)n[o]=e(t[o],o,t);return n},e.ArrayUtils.forEach=function(t,e){if(t.map)t.forEach(e);else for(var i=t.length,n=0;n<i;n++)e(t[n],n,t)},e.StringUtils={},e.Obj.createSubclass(e.StringUtils,e.Obj),e.StringUtils._hasTrim=null!="hello".trim,e.StringUtils._hasEndsWith=null!="hello".endsWith,e.StringUtils.trim=function(t){return e.StringUtils._hasTrim?t.trim():t.replace(/^\s+|\s+$/g,"")},e.StringUtils.endsWith=function(t,i){return e.StringUtils._hasEndsWith?t.endsWith(i):t.match(i+"$")==i},e.StringUtils.processAriaLabel=function(t){var e=t;return e=e.replace(/(<|&#60;)/g,"&lt;"),e=e.replace(/(>|&#62;)/g,"&gt;"),e=e.replace(/&lt;b&gt;/g,""),e=e.replace(/&lt;\/b&gt;/g,""),e=e.replace(/&lt;i&gt;/g,""),e=e.replace(/&lt;\/i&gt;/g,""),e=e.replace(/\n/g,"; "),e=e.replace(/&#92;n/g,"; "),e=e.replace(/&lt;br&gt;/g,"; "),e=e.replace(/&lt;br\/&gt;/g,"; ")},e.Context=function(t,i,n){var o=i?i+"_svg":null;this._root=e.ToolkitUtils.createSvgDocument(o),t.appendChild(this._root),this._parentDiv=t,this._referenceDiv=n,this._implFactory=new j(this),this._defs=this._implFactory.newDefs(),e.ToolkitUtils.appendChildElem(this._root,this._defs),this._keyboardFocusArray=[],this._keyboardFocusIndex=0,this._dndEventManagers=[],this._defaultFontFamily=e.Context._DEFAULT_FONT_FAMILY,this._defaultFontSize=e.Context._DEFAULT_FONT_SIZE,this._normalizedFontFamilyCache={},this._customElement=!1,this.Init(this._implFactory,this._root,i),e.ToolkitUtils.appendChildElem(this._root,this._stage.getElem())},e.Obj.createSubclass(e.Context,e.Obj),e.Context._DATATIP_POPUP_STYLE_CLASS="OraDVTDatatipPopup",e.Context._TOOLTIP_POPUP_STYLE_CLASS="OraDVTTooltipPopup",e.Context._DEFAULT_FONT_FAMILY="'Helvetica Neue',Helvetica,Arial,sans-serif",e.Context._DEFAULT_FONT_SIZE="12px",e.Context._id=0,e.Context.prototype.Init=function(t,i,n){this._implFactory=t;var o=(n?n:"_dvt"+e.Context._id)+"_stage";this._stage=new C(this,i,o),e.Context._id++,e.ToolkitUtils.setAttrNullNS(this._stage.getElem(),"font-family",this.getDefaultFontFamily()),e.ToolkitUtils.setAttrNullNS(this._stage.getElem(),"font-size",this.getDefaultFontSize()),this._tooltipManagers=new Object,this._customTooltipManagers=new Object,this._scheduler=null,this._globalDefsMap={}},e.Context.prototype.getDefaultFontFamily=function(){return this._defaultFontFamily},e.Context.prototype.setDefaultFontFamily=function(t){t&&(this._defaultFontFamily=this._normalizeFontFamily(t),e.ToolkitUtils.setAttrNullNS(this._stage.getElem(),"font-family",this.getDefaultFontFamily()))},e.Context.prototype.isDefaultFontFamily=function(t){return!!t&&this._defaultFontFamily===this._normalizeFontFamily(t)},e.Context.prototype.getDefaultFontSize=function(){return this._defaultFontSize},e.Context.prototype.setDefaultFontSize=function(t){t&&(this._defaultFontSize=t,e.ToolkitUtils.setAttrNullNS(this._stage.getElem(),"font-size",this.getDefaultFontSize()))},e.Context.prototype._normalizeFontFamily=function(t){var e=this._normalizedFontFamilyCache[t];return e||(e=t.replace(/, /g,",").replace(/"/g,"'"),this._normalizedFontFamilyCache[t]=e),e},e.Context.prototype.getImplFactory=function(){return this._implFactory},e.Context.prototype.getStage=function(){return this._stage},e.Context.prototype.isReadyToRender=function(){if(null!=this._parentDiv.offsetParent)return!0;var t=window.getComputedStyle(this._parentDiv);return!(!t||"fixed"!=t.position)&&"none"!=t.display},e.Context.prototype.getSvgDocument=function(){return this._root},e.Context.prototype.setReadingDirection=function(t){this._readingDirection=t},e.Context.prototype.getReadingDirection=function(){return this._readingDirection},e.Context.prototype.existsGlobalDefReference=function(t){return this._globalDefsMap[t]>0},e.Context.prototype.increaseGlobalDefReference=function(t){null!=t&&(this._globalDefsMap[t]?this._globalDefsMap[t]++:this._globalDefsMap[t]=1)},e.Context.prototype.decreaseGlobalDefReference=function(t){if(null!=t){var e=this._globalDefsMap[t];e&&(1==e?delete this._globalDefsMap[t]:this._globalDefsMap[t]=e-1),this._globalDefsMap[t]||this.removeDefsById(t)}},e.Context.prototype.getTooltipManager=function(t){t||(t="_dvtTooltip");var e=this.getStage().getId();t+=e;var i=this._tooltipManagers[t];return i||(this._tooltipManagers[t]=this._implFactory.newTooltipManager(t)),this._tooltipManagers[t]},e.Context.prototype.hideTooltips=function(){for(var t in this._tooltipManagers)this._tooltipManagers[t].hideTooltip()},e.Context.prototype.getScheduler=function(){return this._scheduler||(this._scheduler=new o(this)),this._scheduler},e.Context.prototype.getDocumentUtils=function(){return this._implFactory.getDocumentUtils()},e.Context.prototype.pageToStageCoords=function(t,i){var n=this.getStageAbsolutePosition(),o=t-n.x,r=i-n.y;return new e.Point(o,r)},e.Context.prototype.stageToPageCoords=function(t,i){var n=this.getStageAbsolutePosition(),o=t+n.x,r=i+n.y;return new e.Point(o,r)},e.Context.prototype.getStageAbsolutePosition=function(){var t=this._referenceDiv;if(!t){var i=this.getStage().getImpl().getSVGRoot();t=i.parentNode?i.parentNode:i}var n=e.Agent.getElementPosition(t);return new e.Point(parseInt(n.x),parseInt(n.y))},e.Context.prototype.isOffscreen=function(){if(null!=this._bOffscreen)return this._bOffscreen;var t=this.getStage().getSVGRoot();try{var e=t.getBoundingClientRect();this._bOffscreen=e.bottom<0||e.right<0||e.top>(window.innerHeight||document.documentElement.clientHeight)||e.left>(window.innerWidth||document.documentElement.clientWidth)}catch(t){this._bOffscreen=!0}return this._bOffscreen},e.Context.prototype.resetIsOffscreen=function(){this._bOffscreen=null},e.Context.prototype.getCustomTooltipManager=function(t){
t||(t="_dvtCustomTooltip");var e=this.getStage().getId();t+=e;var i=this._customTooltipManagers[t];return i||(this._customTooltipManagers[t]=new w(this,t)),this._customTooltipManagers[t]},e.Context.prototype.appendDefs=function(t){e.ToolkitUtils.appendChildElem(this._defs,t)},e.Context.prototype.getDefs=function(){return this._defs},e.Context.prototype.getImplFactory=function(){return this._implFactory},e.Context.prototype.removeDefs=function(t){t._obj&&t._obj.destroy(),this._defs.removeChild(t)},e.Context.prototype.removeDefsById=function(t){for(var e=this._defs.childNodes,i=e.length,n=0;n<i;n++){var o=e[n];if(o.id===t)return void this.removeDefs(o)}},e.Context.prototype.getRootAttribute=function(t){return e.ToolkitUtils.getAttrNullNS(this._root,t)},e.Context.resetUniqueSeeds=function(){e.Agent.isEnvironmentBrowser()||("undefined"!=typeof e.AfComponent&&(e.AfComponent._uniqueSeed=0),Y._counter=0,e.ClipPath._uniqueSeed=0,e.SvgShapeUtils._uniqueSeed=0,e.Mask._uniqueSeed=0,e.Agent._bInitialized=!1)},e.Context.resetCaches=function(){e.Agent.isEnvironmentBrowser()||("undefined"!=typeof e.AfComponent&&e.AfStyleUtils.resetStyles(),e.OutputText._cache=null,e.TextUtils._cachedTextDimensions={},e.LedGaugeRenderer&&(e.LedGaugeRenderer._cache=null))},e.Context.prototype.setActiveElement=function(t){if(e.Agent.isEnvironmentBrowser()){this._activeElement&&(e.ToolkitUtils.removeAttrNullNS(this._activeElement.getElem(),"id"),this._activeElement=null);var i=t.getElem(),n=e.ToolkitUtils.getAttrNullNS(i,"id");n||(n=t.getActiveElementId(),n?e.ToolkitUtils.setAttrNullNS(i,"id",n):(n=e.EventManager._getActiveElementId(),e.ToolkitUtils.setAttrNullNS(i,"id",n),this._activeElement=t)),t.applyAriaProperties(),"application"==this._role&&this._parentDiv.setAttribute("aria-activedescendant",n)}},e.Context.prototype.setAriaLabel=function(t){this._parentDiv.getAttribute("aria-label")||(t?this._parentDiv.setAttribute("aria-label",e.StringUtils.processAriaLabel(t)):this._parentDiv.removeAttribute("aria-label"))},e.Context.prototype.setAriaRole=function(t){t?this._parentDiv.setAttribute("role",t):this._parentDiv.removeAttribute("role"),this._role=t},e.Context.prototype.setTooltipAttachedCallback=function(t){this._tooltipAttachedCallback=t},e.Context.prototype.getTooltipAttachedCallback=function(){return this._tooltipAttachedCallback},e.Context.prototype.setTooltipStyleClass=function(t){this._tooltipStyleClass=t},e.Context.prototype.getTooltipStyleClass=function(){return this._tooltipStyleClass?this._tooltipStyleClass:e.Context._TOOLTIP_POPUP_STYLE_CLASS},e.Context.prototype.setDatatipStyleClass=function(t){this._datatipStyleClass=t},e.Context.prototype.getDatatipStyleClass=function(){return this._datatipStyleClass?this._datatipStyleClass:e.Context._DATATIP_POPUP_STYLE_CLASS},e.Context.prototype.resetCurrentKeyboardFocus=function(t){this._keyboardFocusArray&&0!==this._keyboardFocusArray.length&&(t.keyCode==e.KeyboardEvent.TAB&&t.shiftKey?this.setCurrentKeyboardFocus(this._keyboardFocusArray[this._keyboardFocusArray.length-1]):t.keyCode==e.KeyboardEvent.TAB&&this.setCurrentKeyboardFocus(this._keyboardFocusArray[0]))},e.Context.prototype.setKeyboardFocusArray=function(t){if(this._keyboardFocusArray=t,this._keyboardFocusIndex=0,t.length>0){var e=this._root.parentNode;e._currentObj=this._keyboardFocusArray[this._keyboardFocusIndex]}},e.Context.prototype.getCurrentKeyboardFocus=function(){return this._keyboardFocusArray.length<=this._keyboardFocusIndex?null:this._keyboardFocusArray[this._keyboardFocusIndex]},e.Context.prototype.setCurrentKeyboardFocus=function(t){var i=e.ArrayUtils.getIndex(this._keyboardFocusArray,t);if(i==-1)return!1;var n=this._keyboardFocusArray[i];this._keyboardFocusIndex=i;var o=this._root.parentNode;return o._currentObj=n,!0},e.Context.prototype.nextKeyboardFocus=function(){var t=this._keyboardFocusArray[this._keyboardFocusIndex+1];if(t){this._keyboardFocusIndex++;var e=this._root.parentNode;return e._currentObj=t,t}return null},e.Context.prototype.previousKeyboardFocus=function(){var t=this._keyboardFocusArray[this._keyboardFocusIndex-1];if(t){this._keyboardFocusIndex--;var e=this._root.parentNode;return e._currentObj=t,t}return null},e.Context.prototype.getNumberConverter=function(t){var e=this.getLocaleHelpers();return e.numberConverterFactory?e.numberConverterFactory.createConverter(t):null},e.Context.prototype.getLocaleHelpers=function(){return this._localeHelpers?this._localeHelpers:{}},e.Context.prototype.setLocaleHelpers=function(t){this._localeHelpers=t},e.Context.requestAnimationFrame=function(t){return e.Agent.isTouchDevice()&&e.Agent.isBrowserChrome()?window.setTimeout(t,1e3/60):window.requestAnimationFrame(t)},e.Context.cancelAnimationFrame=function(t){e.Agent.isTouchDevice()&&e.Agent.isBrowserChrome()?clearTimeout(t):window.cancelAnimationFrame(t)},e.Context.prototype.getContainer=function(){return this._parentDiv},e.Context.prototype.createOverlayDiv=function(){var t=document.createElement("div");return t.style.top="-100%",t.style.position="relative",t},e.Context.prototype.setOverlayAttachedCallback=function(t){this._overlayAttachedCallback=t},e.Context.prototype.getOverlayAttachedCallback=function(){return this._overlayAttachedCallback},e.Context.prototype.addDndEventManager=function(t){this._dndEventManagers.push(t)},e.Context.prototype.removeDndEventManager=function(t){var e=this._dndEventManagers.indexOf(t);this._dndEventManagers.splice(e,1)},e.Context.prototype.isLastDndEventManager=function(t){return this._dndEventManagers[this._dndEventManagers.length-1]===t},e.Context.prototype.setFixContextCallback=function(t){this._fixContextCallback=t},e.Context.prototype.fixRendererContext=function(t){return this._fixContextCallback?this._fixContextCallback(t):t},e.Context.prototype.setCustomElement=function(t){this._customElement=t},e.Context.prototype.isCustomElement=function(){return this._customElement};var i=function(){this._Init()};e.Obj.createSubclass(i,e.Obj),i.prototype._Init=function(){this._bLocked=!1},i.prototype.isLocked=function(){return this._bLocked},i.prototype.__lock=function(){this._bLocked=!0};var n=function(t,e,i,n,o){this.Init(t,e,i,n,o)};e.Obj.createSubclass(n,e.Obj),n._STATE_INITIALIZE=0,n._STATE_BEGIN=1,n._STATE_RUN=2,n.CalcProgress=function(t,e,i){var n=i-e;if(0==n)return.5;var o=(t-e)/n;return o>1&&(o=1),o},n.prototype.Init=function(t,e,i,o,r){this._context=t,this._scheduler=e,this.setDuration(i),this.setDelay(o),this.setEasing(r),this._bRunning=!1,this._startTime=null,this._progress=0,this._state=n._STATE_INITIALIZE,this._onInit=null,this._onInitObj=null,this._onEnd=null,this._onEndObj=null},n.prototype.getDuration=function(){return this._duration},n.prototype.setDuration=function(t){this._duration=t?t:.5},n.prototype.getDelay=function(){return this._delay},n.prototype.setDelay=function(t){this._delay=t?t:0},n.prototype.getEasing=function(){return this._easing},n.prototype.setEasing=function(t){this._easing=t?t:e.Easing.cubicInOut},n.prototype.setOnInit=function(t,e){this._onInit=t,e?this._onInitObj=e:this._onInitObj=null},n.prototype.getOnInit=function(){return[this._onInit,this._onInitObj]},n.prototype.setOnEnd=function(t,e){this._onEnd=t,e?this._onEndObj=e:this._onEndObj=null},n.prototype.getOnEnd=function(){return[this._onEnd,this._onEndObj]},n.prototype.isRunning=function(){return this._bRunning},n.prototype.play=function(t){t?this._play():this._animationRequestId=e.Context.requestAnimationFrame(e.Obj.createCallback(this,this._play))},n.prototype._play=function(){this._bRunning||(this._bRunning=!0,this.ProcessPlay(),this._scheduler.addScheduled(this)),this._context.isOffscreen()&&this.stop(!0),this._animationRequestId=null},n.prototype.stop=function(t){this._animationRequestId&&(e.Context.cancelAnimationFrame(this._animationRequestId),this._animationRequestId=null),this._scheduler.removeScheduled(this),t&&this.ProcessStep(1),this.ProcessEnd()},n.prototype.processTime=function(t){if(this._bRunning){var e=t-this._startTime;if(e<0)return!1;var i=1e3*this.GetTotalDuration(),n=1;0!=i&&(n=e/i),n>1&&(n=1),this.ProcessStep(n);var o=n>=1;return o&&this.ProcessEnd(),o}},n.prototype.GetTotalDuration=function(){return this._delay+this._duration},n.prototype.ProcessPlay=function(){if(this._state==n._STATE_INITIALIZE&&this.ProcessInitialize(),this._state==n._STATE_BEGIN)this._startTime=(new Date).getTime(),this.ProcessStart();else{var t=1e3*this._progress*this.GetTotalDuration();this._startTime=(new Date).getTime()-t}this._state=n._STATE_RUN},n.prototype.ProcessInitialize=function(){this._onInit&&this._onInit.call(this._onInitObj),this.Initialize(),this._state=n._STATE_BEGIN},n.prototype.ProcessStart=function(){this._bRunning=!0,this._progress=0},n.prototype.ProcessStep=function(t){this._progress=t;var e=t;this._delay>0&&(e=n.CalcProgress(t,this._delay/this.GetTotalDuration(),1)),e>=0&&(this._easing&&(e=this._easing(e)),this.Step(e))},n.prototype.ProcessEnd=function(){this._bRunning&&(this._bRunning=!1,this._progress=1,this._state=n._STATE_BEGIN),this._onEnd&&this._onEnd.call(this._onEndObj)},n.prototype.Initialize=function(){},n.prototype.Step=function(t){};var o=function(t){this.Init(t)};e.Obj.createSubclass(o,e.Obj),o.prototype.Init=function(t){this._scheduledItems=new Array,this._bRunning=!1},o.prototype.HandleTimer=function(){for(var t=(new Date).getTime(),i=0;i<this._scheduledItems.length;i++){var n=this._scheduledItems[i];n.processTime(t)&&this.removeScheduled(n)}this._scheduledItems.length<1?(this._bRunning&&(this._bRunning=!1,this._animationRequestId&&e.Context.cancelAnimationFrame(this._animationRequestId)),this._animationRequestId=null):this._animationRequestId=e.Context.requestAnimationFrame(e.Obj.createCallback(this,this.HandleTimer)),o._frameCount++},o.prototype.addScheduled=function(t){var i=e.ArrayUtils.getIndex(this._scheduledItems,t);i<0&&this._scheduledItems.push(t),this.play()},o.prototype.removeScheduled=function(t){var i=e.ArrayUtils.getIndex(this._scheduledItems,t);i>=0&&this._scheduledItems.splice(i,1)},o.prototype.play=function(){if(!this._bRunning){for(var t=0;t<this._scheduledItems.length;t++){var i=this._scheduledItems[t];i.isRunning()||i.play()}this._bRunning=!0,this._animationRequestId=e.Context.requestAnimationFrame(e.Obj.createCallback(this,this.HandleTimer))}},e.Animator=function(t,e,i,n){this.Init(t,e,i,n)},e.Obj.createSubclass(e.Animator,n),e.Animator.TYPE_NUMBER="typeNumber",e.Animator.TYPE_MATRIX="typeMatrix",e.Animator.TYPE_NUMBER_ARRAY="typeNumberArray",e.Animator.TYPE_COLOR="typeColor",e.Animator.TYPE_COLOR_ARRAY="typeColorArray",e.Animator.TYPE_GROW_POLYLINE="typeGrowPolyline",e.Animator.TYPE_RECTANGLE="typeRectangle",e.Animator.TYPE_POINT="typePoint",e.Animator.TYPE_PATH="typePath",e.Animator.TYPE_GROW_PATH="typeGrowPath",e.Animator.TYPE_FILL="typeFill",e.Animator.TYPE_STROKE="typeStroke",e.Animator.TYPE_POLYLINE="typePolyline",e.Animator._KEY_PREFIX="dvtAnimPropMap_",e.Animator.prototype.Init=function(t,i,n,o){e.Animator.superclass.Init.call(this,t,t.getScheduler(),i,n,o),this._context=t,this._props={}},e.Animator.prototype.addProp=function(t,i,n,o,s){var a=this.GetPropItem(i,n);if(a)a.destVal=s;else{var a=new r(t,i,n,o,s),l=e.Animator.GetKey(i);this._props[l]||(this._props[l]={}),this._props[l][e.Animator.GetKey(n)]=a}},e.Animator.prototype.removeProp=function(t,i){var n=this.GetPropItem(t,i);if(n){var o=n.destVal;return delete this._props[e.Animator.GetKey(t)][e.Animator.GetKey(i)],o}return null},e.Animator.prototype.getDestVal=function(t,e,i){var n=this.GetPropItem(t,e);return n?n.destVal:i?e.call(t):null},e.Animator.prototype.GetPropItem=function(t,i){var n=e.Animator.GetKey(t);return this._props[n]?this._props[n][e.Animator.GetKey(i)]:null},e.Animator.GetKey=function(t){return t._dvtAnimPropMapKey||(t._dvtAnimPropMapKey=e.Animator._KEY_PREFIX+Math.random()),t._dvtAnimPropMapKey},e.Animator.prototype.Initialize=function(){for(var t in this._props)for(var e in this._props[t]){var i=this._props[t][e];i.startVal=i.getter.call(i.obj)}},e.Animator.prototype.Step=function(t){for(var e in this._props)for(var i in this._props[e]){var n=this._props[e][i],o=n.type,r=n.obj,a=n.setter,l=n.destVal,h=n.startVal,u=s.interpolate(this._context,o,h,l,t);a.call(r,u)}};var r=function(t,e,i,n,o){this.type=t,this.obj=e,this.getter=i,this.setter=n,this.destVal=o,this.startVal=null};e.Obj.createSubclass(r,e.Obj),e.Playable=function(t){this.Init(t)},e.Obj.createSubclass(e.Playable,e.Obj),e.Playable.appendOnEnd=function(t,e,i){if(t&&e){var n=t.getOnEnd();if(n&&n[0]){var o=function(){n[0].call(n[1]),e.call(i)};t.setOnEnd(o)}else t.setOnEnd(e,i)}},e.Playable.prependOnEnd=function(t,e,i){if(t&&e){var n=t.getOnEnd();if(n&&n[0]){var o=function(){e.call(i),n[0].call(n[1])};t.setOnEnd(o)}else t.setOnEnd(e,i)}},e.Playable.appendOnInit=function(t,e,i){if(t&&e&&t.getOnInit&&t.setOnInit){var n=t.getOnInit();if(n&&n[0]){var o=function(){n[0].call(n[1]),e.call(i)};t.setOnInit(o)}else t.setOnInit(e,i)}},e.Playable.prependOnInit=function(t,e,i){if(t&&e&&t.getOnInit&&t.setOnInit){var n=t.getOnInit();if(n&&n[0]){var o=function(){e.call(i),n[0].call(n[1])};t.setOnInit(o)}else t.setOnInit(e,i)}},e.Playable.prototype.Init=function(t){this.Context=t,this._onEnd=null,this._onEndObj=null},e.Playable.prototype.setOnEnd=function(t,e){this._onEnd=t,e?this._onEndObj=e:this._onEndObj=null,this.OnEndUpdated()},e.Playable.prototype.getOnEnd=function(){return[this._onEnd,this._onEndObj]},e.Playable.prototype.OnEndUpdated=function(){},e.Playable.prototype.getDuration=function(){return 0},e.Playable.prototype.initialize=function(){},e.Playable.prototype.play=function(t){},e.Playable.prototype.stop=function(t){},e.ParallelPlayable=function(t){var i;arguments&&arguments.length>1&&arguments[1]instanceof Array?i=arguments[1]:(i=e.ArrayUtils.argsToArray(arguments),i.splice(0,1)),this.Init(t,i)},e.Obj.createSubclass(e.ParallelPlayable,e.Playable),e.ParallelPlayable.prototype.Init=function(t,i){e.ParallelPlayable.superclass.Init.call(this,t),this._runningCounter=0,this._arPlayables=i?i:[],this._bStarted=!1},e.ParallelPlayable.prototype.getPlayables=function(){return this._arPlayables},e.ParallelPlayable.prototype.getDuration=function(){for(var t=0,i=0;i<this._arPlayables.length;i++){var n=this._arPlayables[i];n instanceof e.Playable&&(t=Math.max(t,n.getDuration()))}return t},e.ParallelPlayable.prototype.initialize=function(){for(var t=0;t<this._arPlayables.length;t++)this._arPlayables[t]instanceof e.Playable&&this._arPlayables[t].initialize()},e.ParallelPlayable.prototype.play=function(t){this._arPlayables.length>0?t?this._play():(this.initialize(),this._animationRequestId=e.Context.requestAnimationFrame(e.Obj.createCallback(this,this._play))):this._animationRequestId=e.Context.requestAnimationFrame(e.Obj.createCallback(this,this.DoEnd))},e.ParallelPlayable.prototype._play=function(){var t;if(!this._bStarted)for(var i=0;i<this._arPlayables.length;i++)t=this._arPlayables[i],t instanceof e.Playable&&(this._runningCounter++,e.Playable.appendOnEnd(t,this.OnPlayableEnd,this));for(var i=0;i<this._arPlayables.length;i++)t=this._arPlayables[i],t instanceof e.Playable&&t.play(!0);this._bStarted=!0,this._animationRequestId=null},e.ParallelPlayable.prototype.stop=function(t){if(this._animationRequestId)return e.Context.cancelAnimationFrame(this._animationRequestId),void this.DoEnd();for(var i,n=0;n<this._arPlayables.length;n++)i=this._arPlayables[n],i instanceof e.Playable&&i.stop(t)},e.ParallelPlayable.prototype.OnPlayableEnd=function(){this._runningCounter--,this._runningCounter<1&&this.DoEnd()},e.ParallelPlayable.prototype.DoEnd=function(){this._onEnd&&this._onEnd.call(this._onEndObj),this._animationRequestId=null},e.SequentialPlayable=function(t){var i;arguments&&arguments.length>1&&arguments[1]instanceof Array?i=arguments[1]:(i=e.ArrayUtils.argsToArray(arguments),i.splice(0,1)),this.Init(t,i)},e.Obj.createSubclass(e.SequentialPlayable,e.Playable),e.SequentialPlayable.prototype.Init=function(t,i){e.SequentialPlayable.superclass.Init.call(this,t),this._arPlayables=i?i:[],this._currIndex=-1,this._bStarted=!1},e.SequentialPlayable.prototype.getPlayables=function(){return this._arPlayables},e.SequentialPlayable.prototype.getDuration=function(){for(var t=0,i=0;i<this._arPlayables.length;i++){var n=this._arPlayables[i];n instanceof e.Playable&&(t+=n.getDuration())}return t},e.SequentialPlayable.prototype.initialize=function(){this._arPlayables.length>0&&this._arPlayables[0]instanceof e.Playable&&this._arPlayables[0].initialize()},e.SequentialPlayable.prototype.play=function(t){this._arPlayables&&this._arPlayables.length>0?t?this._play():(this.initialize(),this._animationRequestId=e.Context.requestAnimationFrame(e.Obj.createCallback(this,this._play))):this._animationRequestId=e.Context.requestAnimationFrame(e.Obj.createCallback(this,this.DoEnd))},e.SequentialPlayable.prototype._play=function(){if(this._bStarted){var t=this._arPlayables[this._currIndex];return void(t instanceof e.Playable&&t.play(!0))}var i;this._arPlayables[0]instanceof e.Playable&&(i=this._arPlayables[0]);var n;this._arPlayables[this._arPlayables.length-1]instanceof e.Playable&&(n=this._arPlayables[this._arPlayables.length-1]);for(var o,r=0;r<this._arPlayables.length-1;r++)o=this._arPlayables[r],o instanceof e.Playable&&e.Playable.appendOnEnd(o,this.DoSequenceStep,this);n&&e.Playable.appendOnEnd(n,this.DoEnd,this),this._bStarted=!0,this._currIndex=0,i&&i.play(!0),this._animationRequestId=null},e.SequentialPlayable.prototype.DoSequenceStep=function(){var t=this._arPlayables[++this._currIndex];t instanceof e.Playable?t.play(!0):this.DoSequenceStep()},e.SequentialPlayable.prototype.stop=function(t){if(this._animationRequestId)return e.Context.cancelAnimationFrame(this._animationRequestId),void this.DoEnd();if(this._arPlayables)for(var i,n=this._currIndex;n<this._arPlayables.length;n++)i=this._arPlayables[n],i&&i instanceof e.Playable&&i.stop(t)},e.SequentialPlayable.prototype.DoEnd=function(){this._onEnd&&this._onEnd.call(this._onEndObj),this._animationRequestId=null},e.BlackBoxAnimationHandler=function(){},e.Obj.createSubclass(e.BlackBoxAnimationHandler,e.Obj),e.BlackBoxAnimationHandler.ALPHA_FADE="alphaFade",e.BlackBoxAnimationHandler.CONVEYOR_FROM_RIGHT="conveyorFromRight",e.BlackBoxAnimationHandler.CONVEYOR_FROM_LEFT="conveyorFromLeft",e.BlackBoxAnimationHandler.CUBE_TO_RIGHT="cubeToRight",e.BlackBoxAnimationHandler.CUBE_TO_LEFT="cubeToLeft",e.BlackBoxAnimationHandler.FLIP_RIGHT="flipRight",e.BlackBoxAnimationHandler.FLIP_LEFT="flipLeft",e.BlackBoxAnimationHandler.TRANSITION_TO_RIGHT="transitionToRight",e.BlackBoxAnimationHandler.TRANSITION_TO_LEFT="transitionToLeft",e.BlackBoxAnimationHandler.SLIDE_TO_RIGHT="slideToRight",e.BlackBoxAnimationHandler.SLIDE_TO_LEFT="slideToLeft",e.BlackBoxAnimationHandler.ZOOM="zoom",e.BlackBoxAnimationHandler.isSupported=function(t){return t==e.BlackBoxAnimationHandler.ALPHA_FADE||t==e.BlackBoxAnimationHandler.CONVEYOR_FROM_RIGHT||t==e.BlackBoxAnimationHandler.CONVEYOR_FROM_LEFT||t==e.BlackBoxAnimationHandler.CUBE_TO_RIGHT||t==e.BlackBoxAnimationHandler.CUBE_TO_LEFT||t==e.BlackBoxAnimationHandler.FLIP_RIGHT||t==e.BlackBoxAnimationHandler.FLIP_LEFT||t==e.BlackBoxAnimationHandler.TRANSITION_TO_RIGHT||t==e.BlackBoxAnimationHandler.TRANSITION_TO_LEFT||t==e.BlackBoxAnimationHandler.SLIDE_TO_RIGHT||t==e.BlackBoxAnimationHandler.SLIDE_TO_LEFT||t==e.BlackBoxAnimationHandler.ZOOM},e.BlackBoxAnimationHandler.getInAnimation=function(t,i,n,o,r){return i==e.BlackBoxAnimationHandler.ALPHA_FADE?new e.AnimFadeIn(t,n,r):i==e.BlackBoxAnimationHandler.CONVEYOR_FROM_RIGHT?new a(t,n,e.BaseAnimation.DIR_E,r):i==e.BlackBoxAnimationHandler.CONVEYOR_FROM_LEFT?new a(t,n,e.BaseAnimation.DIR_W,r):i==e.BlackBoxAnimationHandler.CUBE_TO_RIGHT?new d(t,n,e.BaseAnimation.AXIS_Y,e.BaseAnimation.ROT_DIR_CLOCKWISE,r):i==e.BlackBoxAnimationHandler.CUBE_TO_LEFT?new d(t,n,e.BaseAnimation.AXIS_Y,e.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE,r):i==e.BlackBoxAnimationHandler.FLIP_RIGHT?new h(t,n,e.BaseAnimation.AXIS_Y,e.BaseAnimation.ROT_DIR_CLOCKWISE,r):i==e.BlackBoxAnimationHandler.FLIP_LEFT?new h(t,n,e.BaseAnimation.AXIS_Y,e.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE,r):i==e.BlackBoxAnimationHandler.TRANSITION_TO_RIGHT?new e.AnimScaleFadeIn(t,n,o,e.BaseAnimation.DIR_NW,.5,r):i==e.BlackBoxAnimationHandler.TRANSITION_TO_LEFT?new e.AnimScaleFadeIn(t,n,o,e.BaseAnimation.DIR_NE,.5,r):i==e.BlackBoxAnimationHandler.SLIDE_TO_RIGHT?(e.BlackBoxAnimationHandler._offsetObjects(n,-o.w,0),new e.AnimMoveBy(t,n,new e.Point(o.w,0),r)):i==e.BlackBoxAnimationHandler.SLIDE_TO_LEFT?(e.BlackBoxAnimationHandler._offsetObjects(n,o.w,0),new e.AnimMoveBy(t,n,new e.Point(-o.w,0),r)):i==e.BlackBoxAnimationHandler.ZOOM?new e.AnimScaleFadeIn(t,n,o,e.BaseAnimation.DIR_C,.5,r):null},e.BlackBoxAnimationHandler.getCombinedAnimation=function(t,i,n,o,r,s){return i==e.BlackBoxAnimationHandler.ALPHA_FADE?new _(t,n,o,s):i==e.BlackBoxAnimationHandler.CONVEYOR_FROM_RIGHT?new p(t,n,o,e.BaseAnimation.DIR_W,e.BaseAnimation.DIR_E,s):i==e.BlackBoxAnimationHandler.CONVEYOR_FROM_LEFT?new p(t,n,o,e.BaseAnimation.DIR_E,e.BaseAnimation.DIR_W,s):i==e.BlackBoxAnimationHandler.CUBE_TO_RIGHT?new e.CombinedAnimCube(t,n,o,e.BaseAnimation.AXIS_Y,e.BaseAnimation.ROT_DIR_CLOCKWISE,s):i==e.BlackBoxAnimationHandler.CUBE_TO_LEFT?new e.CombinedAnimCube(t,n,o,e.BaseAnimation.AXIS_Y,e.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE,s):i==e.BlackBoxAnimationHandler.FLIP_RIGHT?new e.CombinedAnimFlip(t,n,o,e.BaseAnimation.AXIS_Y,e.BaseAnimation.ROT_DIR_CLOCKWISE,s):i==e.BlackBoxAnimationHandler.FLIP_LEFT?new e.CombinedAnimFlip(t,n,o,e.BaseAnimation.AXIS_Y,e.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE,s):i==e.BlackBoxAnimationHandler.TRANSITION_TO_RIGHT?new g(t,n,o,r,e.BaseAnimation.DIR_SE,e.BaseAnimation.DIR_NW,.5,s):i==e.BlackBoxAnimationHandler.TRANSITION_TO_LEFT?new g(t,n,o,r,e.BaseAnimation.DIR_SW,e.BaseAnimation.DIR_NE,.5,s):i==e.BlackBoxAnimationHandler.SLIDE_TO_RIGHT?(e.BlackBoxAnimationHandler._offsetObjects(o,-r.w,0),new e.CombinedAnimMoveBy(t,n,o,new e.Point(r.w,0),new e.Point(r.w,0),s)):i==e.BlackBoxAnimationHandler.SLIDE_TO_LEFT?(e.BlackBoxAnimationHandler._offsetObjects(o,r.w,0),new e.CombinedAnimMoveBy(t,n,o,new e.Point(-r.w,0),new e.Point(-r.w,0),s)):i==e.BlackBoxAnimationHandler.ZOOM?new g(t,n,o,r,e.BaseAnimation.DIR_C,e.BaseAnimation.DIR_C,.5,s):null},e.BlackBoxAnimationHandler._offsetObjects=function(t,i,n){if(t.length)for(var o=0;o<t.length;o++)e.BlackBoxAnimationHandler._offsetObjects(t[o],i,n);else t&&t.setTranslate(t.getTranslateX()+i,t.getTranslateY()+n)},e.DataAnimationHandler=function(t,e){this.Init(t,e)},e.Obj.createSubclass(e.DataAnimationHandler,e.Obj),e.DataAnimationHandler._OVERLAP_RATIO=.4,e.DataAnimationHandler.prototype.Init=function(t,e){this._context=t,this._deleteContainer=e,this._playables=[]},e.DataAnimationHandler.prototype.getCtx=function(){return this._context},e.DataAnimationHandler.prototype.constructAnimation=function(t,e){if(e&&!this._context.isOffscreen()){if(e=e.slice(0),t)for(var i=0;i<t.length;i++){var n=t[i];if(n){for(var o=n.getId(),r=!1,s=0;s<e.length;s++){var a=e[s];if(a){var l=a.getId();if(o===l||o&&o.equals&&o.equals(l)){a.animateUpdate(this,n),e.splice(s,1),r=!0;break}}}r||n.animateDelete(this,this._deleteContainer)}}for(var h=0;h<e.length;h++)e[h]&&e[h].animateInsert(this)}},e.DataAnimationHandler.prototype.add=function(t,e){if(t){for(e||(e=0);this._playables.length<=e;)this._playables.push(new Array);this._playables[e].push(t)}},e.DataAnimationHandler.prototype.getAnimation=function(t){for(var i=[],n=0;n<this._playables.length;n++)if(this._playables[n].length>0){var o=new e.ParallelPlayable(this._context,this._playables[n]);i.push(o)}if(t){for(var r=[],s=0,a=0;a<i.length;a++){if(s>0){var l=new e.CustomAnimation(this._context,null,s);r.push(new e.SequentialPlayable(this._context,[l,i[a]]))}else r.push(i[a]);s+=(1-e.DataAnimationHandler._OVERLAP_RATIO)*i[a].getDuration()}return new e.ParallelPlayable(this._context,r)}return new e.SequentialPlayable(this._context,i)},e.DataAnimationHandler.prototype.getNumPlayables=function(){return this._playables.length},e.Easing=function(){this.Init()},e.Obj.createSubclass(e.Easing,e.Obj),e.Easing.linear=function(t){return t},e.Easing.quadraticIn=function(t){return e.Easing.PolyIn(t,2)},e.Easing.quadraticOut=function(t){return e.Easing.PolyOut(t,2)},e.Easing.quadraticInOut=function(t){return e.Easing.PolyInOut(t,2)},e.Easing.cubicIn=function(t){return e.Easing.PolyIn(t,3)},e.Easing.cubicOut=function(t){return e.Easing.PolyOut(t,3)},e.Easing.cubicInOut=function(t){return e.Easing.PolyInOut(t,3)},e.Easing.backOut=function(t,e){return e||(e=1.70158),t=1-t,1-t*t*((e+1)*t-e)},e.Easing.backIn=function(t,e){return e||(e=1.70158),t*t*((e+1)*t-e)},e.Easing.elasticIn=function(t,e,i){if(t<=0||t>=1)return t;i||(i=.45);var n;return!e||e<1?(e=1,n=i/4):n=i/(2*Math.PI)*Math.asin(1/e),-(e*Math.pow(2,10*(t-=1))*Math.sin((t-n)*(2*Math.PI)/i))},e.Easing.elasticOut=function(t,i,n){return 1-e.Easing.elasticIn(1-t,i,n)},e.Easing.PolyIn=function(t,e){return t<0?0:t>1?1:Math.pow(t,e)},e.Easing.PolyOut=function(t,e){return t<0?0:t>1?1:1-Math.pow(1-t,e)},e.Easing.PolyInOut=function(t,e){return t<0?0:t>1?1:t<.5?.5*Math.pow(2*t,e):.5*(2-Math.pow(2*(1-t),e))},e.Easing.prototype.Init=function(){};var s=function(){this.Init()};e.Obj.createSubclass(s,e.Obj),s.addInterpolator=function(t,e){s._map[t]=e},s.removeInterpolator=function(t){delete s._map[t]},s.interpolate=function(t,e,i,n,o){var r=s._getInterpolator(e);return r?r(t,i,n,o):n},s._getInterpolator=function(t){return s._map[t]},s.InterpolateNumber=function(t,i,n,o){return e.Math.interpolateNumber(i,n,o)},s.InterpolateNumberArray=function(t,e,i,n){for(var o=e.length,r=i.length,a=[],l=0;l<Math.max(o,r);l++){var h,u;h=l<o?e[l]:e[o-1],u=l<r?i[l]:i[r-1],a.push(s.InterpolateNumber(t,h,u,n))}return a},s.InterpolateMatrix=function(t,i,n,o){var r=s.InterpolateNumber(t,i.getA(),n.getA(),o),a=s.InterpolateNumber(t,i.getB(),n.getB(),o),l=s.InterpolateNumber(t,i.getC(),n.getC(),o),h=s.InterpolateNumber(t,i.getD(),n.getD(),o),u=s.InterpolateNumber(t,i.getTx(),n.getTx(),o),d=s.InterpolateNumber(t,i.getTy(),n.getTy(),o);return new e.Matrix(r,a,l,h,u,d)},s.InterpolateColor=function(t,i,n,o){return e.ColorUtils.interpolateColor(i,n,o)},s.InterpolateColorArray=function(t,e,i,n){for(var o=e.length,r=i.length,a=[],l=0;l<Math.max(o,r);l++){var h,u;h=l<o?e[l]:e[o-1],u=l<r?i[l]:i[r-1],a.push(s.InterpolateColor(t,h,u,n))}return a},s.InterpolateGrowPolyline=function(t,e,i,n){if(0===n)return[i[0],i[1]];if(1===n)return i;for(var o,r=i.length,a=[i[0],i[1]],l=s.CalcPolylineLength(i),h=n*l,u=0,d=2;d<r-1;d+=2){var c=i[d-2],p=i[d-1],_=i[d],g=i[d+1];if(o=s.CalcPolylineLength([c,p,_,g]),u+o>h){var m=(h-u)/o,f=_-c,y=g-p;a.push(c+m*f),a.push(p+m*y);break}u+=o,a.push(_),a.push(g)}return a},s.InterpolateGrowPath=function(t,e,i,n){if(0===n)return[i[0],i[1]];if(1===n)return i;for(var o,r,a,l,h,u,d,c,p,_=i.length,g=[],m=s.CalcPathLength(i),f=n*m,y=0,v=0;v<_;v++){var S,C=i[v];switch(C){case"M":r=i[++v],a=i[++v],c=r,p=a,S=[c,p,c,p];break;case"L":r=i[++v],a=i[++v],S=[c,p,r,a];break;case"Q":l=i[++v],h=i[++v],r=i[++v],a=i[++v],S=[c,p,r,a];break;case"C":l=i[++v],h=i[++v],u=i[++v],d=i[++v],r=i[++v],a=i[++v],S=[c,p,r,a]}if(o=s.CalcPolylineLength(S),y+o>f){var E=(f-y)/o;switch(g.push(C),C){case"Q":g.push(c+E*(l-c),p+E*(h-p));break;case"C":g.push(c+E*(l-c),p+E*(h-p),c+E*(u-c),p+E*(d-p))}g.push(c+E*(r-c),p+E*(a-p));break}switch(y+=o,g.push(C),C){case"Q":g.push(l,h);break;case"C":g.push(l,h,u,d)}g.push(r),g.push(a),c=r,p=a}return g},s.CalcPolylineLength=function(t){for(var e,i,n,o,r=0,s=0;s<t.length;s+=2){if(n=t[s],o=t[s+1],s>0)if(n===e)r+=Math.abs(o-i);else if(o===i)r+=Math.abs(n-e);else{var a=Math.abs(n-e),l=Math.abs(o-i);r+=Math.sqrt(a*a+l*l)}e=n,i=o}return r},s.CalcPathLength=function(t){for(var e,i,n,o,r,s=0,a=0;a<t.length;){switch(r=t[a]){case"M":n=t[a+1],o=t[a+2],e=n,i=o,a+=3;continue;case"L":n=t[a+1],o=t[a+2],a+=3;break;case"Q":n=t[a+3],o=t[a+4],a+=5;break;case"C":n=t[a+5],o=t[a+6],a+=7}if(a>0)if(n===e)s+=Math.abs(o-i);else if(o===i)s+=Math.abs(n-e);else{var l=Math.abs(n-e),h=Math.abs(o-i);s+=Math.sqrt(l*l+h*h)}e=n,i=o}return s},s.InterpolateRectangle=function(t,i,n,o){var r=s.InterpolateNumber(t,i.x,n.x,o),a=s.InterpolateNumber(t,i.y,n.y,o),l=s.InterpolateNumber(t,i.w,n.w,o),h=s.InterpolateNumber(t,i.h,n.h,o);return new e.Rectangle(r,a,l,h)},s.InterpolatePoint=function(t,i,n,o){var r=s.InterpolateNumber(t,i.x,n.x,o),a=s.InterpolateNumber(t,i.y,n.y,o);return new e.Point(r,a)},s.InterpolatePath=function(t,e,i,n){var o=e.length,r=i.length;if(o!=r)return i;for(var a=[],l=0,h=0;l<o&&h<r;){var u=e[l],d=i[h],c=!isNaN(u),p=!isNaN(d);c||p?c&&p&&a.push(s.InterpolateNumber(t,u,d,n)):u===d&&a.push(u),l++,h++}return a},s.InterpolateFill=function(t,i,n,o){if(i instanceof e.SolidFill&&n instanceof e.SolidFill){var r=s.InterpolateColor(t,i.getColor(),n.getColor(),o),a=s.InterpolateNumber(t,i.getAlpha(),n.getAlpha(),o);return new e.SolidFill(r,a)}return n},s.InterpolateStroke=function(t,i,n,o){if(i instanceof e.SolidStroke&&n instanceof e.SolidStroke){var r=s.InterpolateColor(t,i.getColor(),n.getColor(),o),a=s.InterpolateNumber(t,i.getAlpha(),n.getAlpha(),o),l=s.InterpolateNumber(t,i.getWidth(),n.getWidth(),o),h=n.clone();return h.setColor(r),h.setAlpha(a),h.setWidth(l),h}return n},s.InterpolatePolyline=function(t,e,i,n){for(var o=e.length,r=i.length,a=[],l=0;l<Math.max(o,r);l++){var h=2;l%2==1&&(h=1);var u,d;u=l<o?e[l]:e[o-h],d=l<r?i[l]:i[r-h],a.push(s.InterpolateNumber(t,u,d,n))}if(r<o)for(var c=a.length,p=a[c-2],_=a[c-1],l=c-4;l>=0;l-=2){var g=a[l],m=a[l+1];if(g!=p||m!=_)break;a.splice(l,2)}return a},s.prototype.Init=function(){},s._map={},s._map[e.Animator.TYPE_NUMBER]=s.InterpolateNumber,s._map[e.Animator.TYPE_MATRIX]=s.InterpolateMatrix,s._map[e.Animator.TYPE_NUMBER_ARRAY]=s.InterpolateNumberArray,s._map[e.Animator.TYPE_COLOR]=s.InterpolateColor,s._map[e.Animator.TYPE_COLOR_ARRAY]=s.InterpolateColorArray,s._map[e.Animator.TYPE_GROW_POLYLINE]=s.InterpolateGrowPolyline,s._map[e.Animator.TYPE_RECTANGLE]=s.InterpolateRectangle,s._map[e.Animator.TYPE_POINT]=s.InterpolatePoint,s._map[e.Animator.TYPE_PATH]=s.InterpolatePath,s._map[e.Animator.TYPE_GROW_PATH]=s.InterpolateGrowPath,s._map[e.Animator.TYPE_FILL]=s.InterpolateFill,s._map[e.Animator.TYPE_STROKE]=s.InterpolateStroke,s._map[e.Animator.TYPE_POLYLINE]=s.InterpolatePolyline,e.Timer=function(t,e,i,n,o){this.Init(t,e,i,n,o)},e.Obj.createSubclass(e.Timer,e.Obj),e.Timer.prototype.Init=function(t,e,i,n,o){this._interval=e,this._callback=i,this._callbackObj=n,this._repeatCount=o,this._bRunning=!1,this._numIterations=0},e.Timer.prototype.start=function(){this._bRunning||(this._bRunning=!0,this.StartTimer())},e.Timer.prototype.stop=function(){this._bRunning&&(this._bRunning=!1,this.StopTimer())},e.Timer.prototype.reset=function(){this._bRunning&&this.stop(),this._numIterations=0},e.Timer.prototype.isRunning=function(){return this._bRunning},e.Timer.prototype.HandleTimer=function(){this._callback&&(this._callback.call(this._callbackObj),this._repeatCount&&(this._numIterations++,this._numIterations>=this._repeatCount&&this.stop()))},e.Timer.prototype.setInterval=function(t){var e=t;e<0&&(e=0);var i=this._bRunning;i&&this.stop(),this._interval=e,i&&this.start()},e.Timer.prototype.getInterval=function(){return this._interval},e.Timer.prototype.StartTimer=function(){var t=this,e=this.HandleTimer;this._timerId=window.setInterval(function(){e.call(t)},this.getInterval())},e.Timer.prototype.StopTimer=function(){this._timerId&&(window.clearInterval(this._timerId),this._timerId=null)},e.BaseAnimation=function(t,e,i,n){this.Init(t,e,i,n)},e.Obj.createSubclass(e.BaseAnimation,e.Playable),e.BaseAnimation.EASING_LINEAR=1,e.BaseAnimation.EASING_CUBIC_IN_OUT=2,e.BaseAnimation.EASING_CUBIC_IN=3,e.BaseAnimation.EASING_CUBIC_OUT=4,e.BaseAnimation.EASING_QUADRATIC_IN_OUT=5,e.BaseAnimation.EASING_QUADRATIC_IN=6,e.BaseAnimation.EASING_QUADRATIC_OUT=7,
e.BaseAnimation.EASING_BOUNCE_IN=8,e.BaseAnimation.EASING_BOUNCE_OUT=9,e.BaseAnimation.EASING_ELASTIC_IN=10,e.BaseAnimation.EASING_ELASTIC_OUT=11,e.BaseAnimation.DIR_C=1,e.BaseAnimation.DIR_N=2,e.BaseAnimation.DIR_NE=3,e.BaseAnimation.DIR_E=4,e.BaseAnimation.DIR_SE=5,e.BaseAnimation.DIR_S=6,e.BaseAnimation.DIR_SW=7,e.BaseAnimation.DIR_W=8,e.BaseAnimation.DIR_NW=9,e.BaseAnimation.AXIS_X=1,e.BaseAnimation.AXIS_Y=2,e.BaseAnimation.ROT_DIR_CLOCKWISE=1,e.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE=2,e.BaseAnimation.GetEasingFunction=function(t){switch(t){case e.BaseAnimation.EASING_LINEAR:return e.Easing.linear;case e.BaseAnimation.EASING_CUBIC_IN:return e.Easing.cubicIn;case e.BaseAnimation.EASING_CUBIC_OUT:return e.Easing.cubicOut;case e.BaseAnimation.EASING_QUADRATIC_IN_OUT:return e.Easing.quadraticInOut;case e.BaseAnimation.EASING_QUADRATIC_IN:return e.Easing.quadraticIn;case e.BaseAnimation.EASING_QUADRATIC_OUT:return e.Easing.quadraticOut;case e.BaseAnimation.EASING_BOUNCE_IN:return e.Easing.backIn;case e.BaseAnimation.EASING_BOUNCE_OUT:return e.Easing.backOut;case e.BaseAnimation.EASING_ELASTIC_IN:return e.Easing.elasticIn;case e.BaseAnimation.EASING_ELASTIC_OUT:return e.Easing.elasticOut;case e.BaseAnimation.EASING_CUBIC_IN_OUT:default:return e.Easing.cubicInOut}},e.BaseAnimation.GetCompassPoint=function(t,i){switch(i){case e.BaseAnimation.DIR_N:return new e.Point(t.x+.5*t.w,t.y);case e.BaseAnimation.DIR_NE:return new e.Point(t.x+t.w,t.y);case e.BaseAnimation.DIR_E:return new e.Point(t.x+t.w,t.y+.5*t.h);case e.BaseAnimation.DIR_SE:return new e.Point(t.x+t.w,t.y+t.h);case e.BaseAnimation.DIR_S:return new e.Point(t.x+.5*t.w,t.y+t.h);case e.BaseAnimation.DIR_SW:return new e.Point(t.x,t.y+t.h);case e.BaseAnimation.DIR_W:return new e.Point(t.x,t.y+.5*t.h);case e.BaseAnimation.DIR_NW:return new e.Point(t.x,t.y);case e.BaseAnimation.DIR_C:default:return new e.Point(t.x+.5*t.w,t.y+.5*t.h)}},e.BaseAnimation.GetAlignCompassPoint=function(t,i,n){var o=e.BaseAnimation.GetCompassPoint(i,n);switch(n){case e.BaseAnimation.DIR_N:return new e.Point(o.x-.5*t.w,o.y);case e.BaseAnimation.DIR_NE:return new e.Point(o.x-t.w,o.y);case e.BaseAnimation.DIR_E:return new e.Point(o.x-t.w,o.y-.5*t.h);case e.BaseAnimation.DIR_SE:return new e.Point(o.x-t.w,o.y-t.h);case e.BaseAnimation.DIR_S:return new e.Point(o.x-.5*t.w,o.y-t.h);case e.BaseAnimation.DIR_SW:return new e.Point(o.x,o.y-t.h);case e.BaseAnimation.DIR_W:return new e.Point(o.x,o.y-.5*t.h);case e.BaseAnimation.DIR_NW:return new e.Point(o.x,o.y);case e.BaseAnimation.DIR_C:default:return new e.Point(o.x-.5*t.w,o.y-.5*t.h)}},e.BaseAnimation.prototype.Init=function(t,i,n,o){e.BaseAnimation.superclass.Init.call(this,t),this._context=t,i instanceof Array?this._arObjects=i:this._arObjects=[i],this._duration=n?n:.5,this._delay=o?o:0,this._easing=e.BaseAnimation.EASING_CUBIC_IN_OUT,this._bInitialized=!1,this._bSaveAndRestoreOriginalMatrices=!1,this._origMatrixArray=null,this._bHideObjectsOnEnd=!1,this.CreateAnimator(t)},e.BaseAnimation.prototype.GetContext=function(){return this._context},e.BaseAnimation.prototype.isRunning=function(){return!!this._animator&&this._animator.isRunning()},e.BaseAnimation.prototype.initialize=function(){this._bInitialized||(this._initializeEndStates(this._arObjects),this._initializeStartStates(this._arObjects),this.InitializePlay(),this._bInitialized=!0)},e.BaseAnimation.prototype.play=function(t){this.initialize(),this._animator&&this._animator.play(t)},e.BaseAnimation.prototype.stop=function(t){this._animator&&this._animator.stop(t)},e.BaseAnimation.prototype.getDuration=function(){return this._duration},e.BaseAnimation.prototype.setDuration=function(t){this._duration=t?t:0,this._animator&&this._animator.setDuration(this._duration)},e.BaseAnimation.prototype.getDelay=function(){return this._delay},e.BaseAnimation.prototype.setDelay=function(t){this._delay=t?t:0,this._animator&&this._animator.setDelay(this._delay)},e.BaseAnimation.prototype.getEasing=function(){return this._easing},e.BaseAnimation.prototype.setEasing=function(t){this._easing=t,this._animator&&this._animator.setEasing(e.BaseAnimation.GetEasingFunction(this._easing))},e.BaseAnimation.prototype.CreateAnimator=function(t){this._animator=new e.Animator(t,this._duration,this._delay,e.BaseAnimation.GetEasingFunction(this._easing)),this._animator.setOnEnd(this.OnAnimEnd,this)},e.BaseAnimation.prototype.OnAnimEnd=function(){this._bHideObjectsOnEnd&&this.HideObjects(),this._bSaveAndRestoreOriginalMatrices&&this.RestoreOriginalMatrices(),this._onEnd&&this._onEnd.call(this._onEndObj)},e.BaseAnimation.prototype.InitializePlay=function(){},e.BaseAnimation.prototype._initializeStartStates=function(t){if(t)for(var e,i=0;i<t.length;i++)e=t[i],e&&(this._bSaveAndRestoreOriginalMatrices&&(this._origMatrixArray||(this._origMatrixArray=[]),this._origMatrixArray.push(e.getMatrix())),this.InitStartState(e))},e.BaseAnimation.prototype._initializeEndStates=function(t){if(t)for(var e,i=0;i<t.length;i++)e=t[i],e&&this.InitEndState(e)},e.BaseAnimation.prototype.InitStartState=function(t){},e.BaseAnimation.prototype.InitEndState=function(t){},e.BaseAnimation.prototype.ShowObjects=function(){this.SetObjectsVisible(!0)},e.BaseAnimation.prototype.HideObjects=function(){this.SetObjectsVisible(!1)},e.BaseAnimation.prototype.SetObjectsVisible=function(t){if(this._arObjects)for(var e,i=this._arObjects.length-1;i>=0;i--)e=this._arObjects[i],e&&e.setVisible(t)},e.BaseAnimation.prototype.RestoreOriginalMatrices=function(){if(this._arObjects)for(var t,e=this._arObjects.length-1;e>=0;e--)t=this._arObjects[e],t&&this._origMatrixArray&&t.setMatrix(this._origMatrixArray.pop())},e.CustomAnimation=function(t,e,i,n){this.Init(t,e,i,n)},e.Obj.createSubclass(e.CustomAnimation,e.BaseAnimation),e.CustomAnimation.prototype.getAnimator=function(){return this._animator};var a=function(t,e,i,n,o){this.Init(t,e,i,n,o)};e.Obj.createSubclass(a,e.BaseAnimation),a.prototype.Init=function(t,e,i,n,o){a.superclass.Init.call(this,t,e,n,o),this._direction=i,this._SCALE=.2,this._SKEW_ANGLE=Math.PI/12,this._bSaveAndRestoreOriginalMatrices=!0},a.prototype.CreateAnimator=function(t){a.superclass.CreateAnimator.call(this,t),this.setEasing(e.BaseAnimation.EASING_CUBIC_IN),this._animator.setDuration(this.getDuration()/2),this._animator.setOnEnd(this.PlayEndAnim,this),this._endAnim=new e.Animator(t,this.getDuration()/2,0,e.BaseAnimation.GetEasingFunction(e.BaseAnimation.EASING_CUBIC_OUT)),this._endAnim.setOnEnd(this.OnAnimEnd,this)},a.prototype.InitializePlay=function(){a.superclass.InitializePlay.call(this),this.ShowObjects()},a.prototype.InitStartState=function(t){a.superclass.InitStartState.call(this,t),t.setVisible(!1);var i=this._SCALE,n=1-i,o=t.getDimensions(),r=(o.w*n,o.h*n,this.GetConcatenatedRotationMatrix(t,o)),s=new e.Matrix;this._direction===e.BaseAnimation.DIR_W||this._direction===e.BaseAnimation.DIR_E?this._direction===e.BaseAnimation.DIR_W?s.translate(o.w,0):s.translate(-o.w,0):this._direction===e.BaseAnimation.DIR_N?s.translate(0,o.h):s.translate(0,-o.h),s.concat(r),t.setMatrix(s),t.setAlpha(0)},a.prototype.InitEndState=function(t){a.superclass.InitEndState.call(this,t);var i=t.getDimensions(),n=this.GetConcatenatedRotationMatrix(t,i);this._animator.addProp(e.Animator.TYPE_MATRIX,t,t.getMatrix,t.setMatrix,n),this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getAlpha,t.setAlpha,1);var o=t.getMatrix();this._endAnim.addProp(e.Animator.TYPE_MATRIX,t,t.getMatrix,t.setMatrix,o)},a.prototype.PlayEndAnim=function(){this._endAnim.play(!0)},a.prototype.GetConcatenatedRotationMatrix=function(t,i){var n=this._SCALE,o=1-n,r=i.w*o,s=i.h*o,a=this._SKEW_ANGLE;this._direction!==e.BaseAnimation.DIR_W&&this._direction!==e.BaseAnimation.DIR_S||(a=-a);var l=Math.tan(a),h=t.getMatrix(),u=new e.Matrix;return this._direction===e.BaseAnimation.DIR_W||this._direction===e.BaseAnimation.DIR_E?(u.skew(0,a),u.scale(n,1),this._direction===e.BaseAnimation.DIR_W?u.translate(0,0):u.translate(r,-i.w*l)):(u.skew(a,0),u.scale(1,n),this._direction===e.BaseAnimation.DIR_N?u.translate(0,0):u.translate(-i.h*l,s)),u.concat(h),u};var l=function(t,e,i,n,o){this.Init(t,e,i,n,o)};e.Obj.createSubclass(l,e.BaseAnimation),l.prototype.Init=function(t,e,i,n,o){l.superclass.Init.call(this,t,e,n,o),this._direction=i,this._bSaveAndRestoreOriginalMatrices=!0,this._bHideObjectsOnEnd=!0},l.prototype.CreateAnimator=function(t){l.superclass.CreateAnimator.call(this,t),this.setEasing(e.BaseAnimation.EASING_CUBIC_IN),this._animator.setDuration(this.getDuration()/2),this._animator.setOnEnd(this.PlayEndAnim,this),this._endAnim=new e.Animator(t,this.getDuration()/2,0,e.BaseAnimation.GetEasingFunction(e.BaseAnimation.EASING_CUBIC_OUT)),this._endAnim.setOnEnd(this.OnAnimEnd,this)},l.prototype.InitEndState=function(t){l.superclass.InitEndState.call(this,t);var i=.2,n=1-i,o=t.getDimensions(),r=o.w*n,s=o.h*n,a=Math.PI/12;this._direction!==e.BaseAnimation.DIR_W&&this._direction!==e.BaseAnimation.DIR_S||(a=-a);var h=Math.tan(a),u=t.getMatrix(),d=new e.Matrix;this._direction===e.BaseAnimation.DIR_W||this._direction===e.BaseAnimation.DIR_E?(d.skew(0,a),d.scale(i,1),this._direction===e.BaseAnimation.DIR_W?d.translate(0,0):d.translate(r,-o.w*h)):(d.skew(a,0),d.scale(1,i),this._direction===e.BaseAnimation.DIR_N?d.translate(0,0):d.translate(-o.h*h,s)),d.concat(u),this._animator.addProp(e.Animator.TYPE_MATRIX,t,t.getMatrix,t.setMatrix,d);var c=new e.Matrix;this._direction===e.BaseAnimation.DIR_W||this._direction===e.BaseAnimation.DIR_E?this._direction===e.BaseAnimation.DIR_W?c.translate(o.w,0):c.translate(-o.w,0):this._direction===e.BaseAnimation.DIR_N?c.translate(0,o.h):c.translate(0,-o.h),c.concat(d),this._endAnim.addProp(e.Animator.TYPE_MATRIX,t,t.getMatrix,t.setMatrix,c),this._endAnim.addProp(e.Animator.TYPE_NUMBER,t,t.getAlpha,t.setAlpha,0)},l.prototype.PlayEndAnim=function(){this._endAnim.play(!0)};var h=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)};e.Obj.createSubclass(h,e.BaseAnimation),h.prototype.Init=function(t,e,i,n,o,r){h.superclass.Init.call(this,t,e,o,r),this._axis=i,this._rotationDir=n,this._bSaveAndRestoreOriginalMatrices=!0,this._cubeEffect=!1},h.prototype.InitStartState=function(t){h.superclass.InitStartState.call(this,t),t.setVisible(!1);var i=t.getDimensions(),n=i.w/2,o=i.h/2,r=Math.PI/6;this._rotationDir===e.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE&&(r=-r);var s=Math.tan(r),a=t.getMatrix(),l=new e.Matrix;this._axis===e.BaseAnimation.AXIS_Y?(l.skew(0,r),l.scale(0,1),this._cubeEffect?this._rotationDir===e.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE?l.translate(i.w,0):l.translate(0,-i.w*s):l.translate(n,-n*s)):(l.skew(r,0),l.scale(1,0),this._cubeEffect?this._rotationDir===e.BaseAnimation.ROT_DIR_COUNTERCLOCKWISE?l.translate(-i.h*s,0):l.translate(0,i.h):l.translate(-o*s,o)),l.concat(a),t.setMatrix(l),this._cubeEffect&&t.setAlpha(0)},h.prototype.InitEndState=function(t){h.superclass.InitEndState.call(this,t);var i=t.getMatrix();this._animator.addProp(e.Animator.TYPE_MATRIX,t,t.getMatrix,t.setMatrix,i),this._cubeEffect&&this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getAlpha,t.setAlpha,1)},h.prototype.InitializePlay=function(){h.superclass.InitializePlay.call(this),this.ShowObjects()};var u=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)};e.Obj.createSubclass(u,e.BaseAnimation),u.prototype.Init=function(t,e,i,n,o,r){u.superclass.Init.call(this,t,e,o,r),this._axis=i,this._rotationDir=n,this._bSaveAndRestoreOriginalMatrices=!0,this._bHideObjectsOnEnd=!0,this._cubeEffect=!1},u.prototype.InitEndState=function(t){u.superclass.InitEndState.call(this,t);var i=t.getDimensions(),n=i.w/2,o=i.h/2,r=Math.PI/6;this._rotationDir===e.BaseAnimation.ROT_DIR_CLOCKWISE&&(r=-r);var s=Math.tan(r),a=t.getMatrix(),l=new e.Matrix;this._axis===e.BaseAnimation.AXIS_Y?(l.skew(0,r),l.scale(0,1),this._cubeEffect?this._rotationDir===e.BaseAnimation.ROT_DIR_CLOCKWISE?l.translate(i.w,0):l.translate(0,-i.w*s):l.translate(n,-n*s)):(l.skew(r,0),l.scale(1,0),this._cubeEffect?this._rotationDir===e.BaseAnimation.ROT_DIR_CLOCKWISE?l.translate(-i.h*s,0):l.translate(0,i.h):l.translate(-o*s,o)),l.concat(a),this._animator.addProp(e.Animator.TYPE_MATRIX,t,t.getMatrix,t.setMatrix,l),this._cubeEffect&&this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getAlpha,t.setAlpha,0)};var d=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)};e.Obj.createSubclass(d,h),d.prototype.Init=function(t,e,i,n,o,r){d.superclass.Init.call(this,t,e,i,n,o,r),this._cubeEffect=!0};var c=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)};e.Obj.createSubclass(c,u),c.prototype.Init=function(t,e,i,n,o,r){c.superclass.Init.call(this,t,e,i,n,o,r),this._cubeEffect=!0},e.AnimFadeIn=function(t,e,i,n){this.Init(t,e,i,n)},e.Obj.createSubclass(e.AnimFadeIn,e.BaseAnimation),e.AnimFadeIn.prototype.Init=function(t,i,n,o){e.AnimFadeIn.superclass.Init.call(this,t,i,n,o)},e.AnimFadeIn.prototype.InitStartState=function(t){t.setAlpha(0)},e.AnimFadeIn.prototype.InitEndState=function(t){this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getAlpha,t.setAlpha,1)},e.AnimFadeOut=function(t,e,i,n){this.Init(t,e,i,n)},e.Obj.createSubclass(e.AnimFadeOut,e.BaseAnimation),e.AnimFadeOut.prototype.Init=function(t,i,n,o){e.AnimFadeOut.superclass.Init.call(this,t,i,n,o)},e.AnimFadeOut.prototype.InitEndState=function(t){this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getAlpha,t.setAlpha,0)},e.AnimMoveBy=function(t,e,i,n,o){this.Init(t,e,i,n,o)},e.Obj.createSubclass(e.AnimMoveBy,e.BaseAnimation),e.AnimMoveBy.prototype.Init=function(t,i,n,o,r){n instanceof Array?this._arOffsets=n:n instanceof e.Point?this._arOffsets=[n]:this._arOffsets=[new e.Point(0,0)],this._currIndex=0,e.AnimMoveBy.superclass.Init.call(this,t,i,o,r)},e.AnimMoveBy.prototype.InitEndState=function(t){var i;i=this._currIndex<this._arOffsets.length?this._arOffsets[this._currIndex]:this._arOffsets[this._arOffsets.length-1],this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getTranslateX,t.setTranslateX,t.getTranslateX()+i.x),this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getTranslateY,t.setTranslateY,t.getTranslateY()+i.y),this._currIndex++},e.AnimMoveTo=function(t,e,i,n,o){this.Init(t,e,i,n,o)},e.Obj.createSubclass(e.AnimMoveTo,e.BaseAnimation),e.AnimMoveTo.prototype.Init=function(t,i,n,o,r){n instanceof Array?this._arPoints=n:n instanceof e.Point?this._arPoints=[n]:this._arPoints=[new e.Point(0,0)],this._currIndex=0,e.AnimMoveTo.superclass.Init.call(this,t,i,o,r)},e.AnimMoveTo.prototype.InitEndState=function(t){var i;i=this._currIndex<this._arPoints.length?this._arPoints[this._currIndex]:this._arPoints[this._arPoints.length-1],this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getTranslateX,t.setTranslateX,i.x),this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getTranslateY,t.setTranslateY,i.y),this._currIndex++},e.AnimScaleBy=function(t,e,i,n,o){this.Init(t,e,i,n,o)},e.Obj.createSubclass(e.AnimScaleBy,e.BaseAnimation),e.AnimScaleBy.prototype.Init=function(t,i,n,o,r){n instanceof Array?this._arScales=n:n instanceof e.Point?this._arScales=[n]:this._arScales=[new e.Point(1,1)],this._currIndex=0,e.AnimScaleBy.superclass.Init.call(this,t,i,o,r)},e.AnimScaleBy.prototype.InitEndState=function(t){var i;i=this._currIndex<this._arScales.length?this._arScales[this._currIndex]:this._arScales[this._arScales.length-1],this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getScaleX,t.setScaleX,t.getScaleX()*i.x),this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getScaleY,t.setScaleY,t.getScaleY()*i.y),this._currIndex++},e.AnimScaleFadeIn=function(t,e,i,n,o,r,s){this.Init(t,e,i,n,o,r,s)},e.Obj.createSubclass(e.AnimScaleFadeIn,e.AnimFadeIn),e.AnimScaleFadeIn.prototype.Init=function(t,i,n,o,r,s,a){this._boundsRect=n,this._direction=o?o:e.BaseAnimation.DIR_NW,this._minScale=r?r:.5,e.AnimScaleFadeIn.superclass.Init.call(this,t,i,s,a),this._bSaveAndRestoreOriginalMatrices=!0},e.AnimScaleFadeIn.prototype.InitStartState=function(t){e.AnimScaleFadeIn.superclass.InitStartState.call(this,t);var i=this._minScale*t.getScaleX(),n=this._minScale*t.getScaleY(),o=t.getDimensions(),r=new e.Rectangle(0,0,i*o.w,n*o.h),s=e.BaseAnimation.GetAlignCompassPoint(r,this._boundsRect,this._direction);t.setTranslate(s.x,s.y),t.setScale(i,n)},e.AnimScaleFadeIn.prototype.InitEndState=function(t){e.AnimScaleFadeIn.superclass.InitEndState.call(this,t);var i=t.getMatrix();this._animator.addProp(e.Animator.TYPE_MATRIX,t,t.getMatrix,t.setMatrix,i)},e.AnimScaleFadeOut=function(t,e,i,n,o,r,s){this.Init(t,e,i,n,o,r,s)},e.Obj.createSubclass(e.AnimScaleFadeOut,e.AnimFadeOut),e.AnimScaleFadeOut.prototype.Init=function(t,i,n,o,r,s,a){this._boundsRect=n,this._direction=o?o:e.BaseAnimation.DIR_NE,this._minScale=r?r:.5,e.AnimScaleFadeOut.superclass.Init.call(this,t,i,s,a),this._bSaveAndRestoreOriginalMatrices=!0},e.AnimScaleFadeOut.prototype.InitEndState=function(t){e.AnimScaleFadeOut.superclass.InitEndState.call(this,t);var i=this._minScale*t.getScaleX(),n=this._minScale*t.getScaleY(),o=t.getDimensions(),r=new e.Rectangle(0,0,i*o.w,n*o.h),s=e.BaseAnimation.GetAlignCompassPoint(r,this._boundsRect,this._direction);this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getScaleX,t.setScaleX,i),this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getScaleY,t.setScaleY,n),this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getTranslateX,t.setTranslateX,s.x),this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getTranslateY,t.setTranslateY,s.y)},e.AnimScaleTo=function(t,e,i,n,o){this.Init(t,e,i,n,o)},e.Obj.createSubclass(e.AnimScaleTo,e.BaseAnimation),e.AnimScaleTo.prototype.Init=function(t,i,n,o,r){n instanceof Array?this._arScales=n:n instanceof e.Point?this._arScales=[n]:this._arScales=[new e.Point(1,1)],this._currIndex=0,e.AnimScaleTo.superclass.Init.call(this,t,i,o,r)},e.AnimScaleTo.prototype.InitEndState=function(t){var i;i=this._currIndex<this._arScales.length?this._arScales[this._currIndex]:this._arScales[this._arScales.length-1],this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getScaleX,t.setScaleX,i.x),this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getScaleY,t.setScaleY,i.y),this._currIndex++},e.AnimPopIn=function(t,e,i,n,o){this.Init(t,e,i,n,o)},e.Obj.createSubclass(e.AnimPopIn,e.BaseAnimation),e.AnimPopIn.BackOut=function(t){return e.Easing.backOut(t,2.5)},e.AnimPopIn.prototype.Init=function(t,i,n,o,r){this._bCenter=n,this._bCenter&&(this._tempContainers=[],this._currIndex=0),e.AnimPopIn.superclass.Init.call(this,t,i,o,r)},e.AnimPopIn.prototype.setEasing=function(t){},e.AnimPopIn.prototype.CreateAnimator=function(t){e.AnimPopIn.superclass.CreateAnimator.call(this,t),this._animator.setEasing(e.AnimPopIn.BackOut),this._bCenter&&e.Playable.appendOnEnd(this._animator,this.RemoveTempContainers,this)},e.AnimPopIn.prototype.InitStartState=function(t){if(this._bCenter){var e=this._tempContainers[this._currIndex],i=t.getDimensions();e._dvtAnimPopInOrigTx=t.getTranslateX(),e._dvtAnimPopInOrigTy=t.getTranslateY();var n=i.x+.5*i.w,o=i.y+.5*i.h;e.setTranslate(e._dvtAnimPopInOrigTx+n,e._dvtAnimPopInOrigTy+o),t.setTranslate(-n,-o);var r=t.getParent().getChildIndex(t);e._dvtAnimPopInChildIndex=r,t.getParent().addChildAt(e,r),e.addChild(t),e.setScale(.01,.01),this._currIndex++}else t.setScale(.01,.01);t.setVisible(!0)},e.AnimPopIn.prototype.InitEndState=function(t){if(this._bCenter){var i=new e.Container(this._context);this._tempContainers.push(i),this._animator.addProp(e.Animator.TYPE_NUMBER,i,i.getScaleX,i.setScaleX,1),this._animator.addProp(e.Animator.TYPE_NUMBER,i,i.getScaleY,i.setScaleY,1)}else this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getScaleX,t.setScaleX,1),this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getScaleY,t.setScaleY,1)},e.AnimPopIn.prototype.RemoveTempContainers=function(){if(this._tempContainers){for(var t=0;t<this._tempContainers.length;t++){var e=this._tempContainers[t];if(this._tempContainers[t]=null,e.getNumChildren()>0){var i=e.getChildAt(0);i&&(i.setTranslate(e._dvtAnimPopInOrigTx,e._dvtAnimPopInOrigTy),e.getParent().addChildAt(i,e._dvtAnimPopInChildIndex))}e.getParent().removeChild(e)}this._tempContainers=null}},e.AnimPopOut=function(t,e,i,n,o){this.Init(t,e,i,n,o)},e.Obj.createSubclass(e.AnimPopOut,e.BaseAnimation),e.AnimPopOut.BackIn=function(t){return e.Easing.backIn(t,2.5)},e.AnimPopOut.prototype.Init=function(t,i,n,o,r){this._bCenter=n,this._bCenter&&(this._tempContainers=[],this._currIndex=0),e.AnimPopOut.superclass.Init.call(this,t,i,o,r),this._bSaveAndRestoreOriginalMatrices=!this._bCenter,this._bHideObjectsOnEnd=!0},e.AnimPopOut.prototype.setEasing=function(t){},e.AnimPopOut.prototype.CreateAnimator=function(t){e.AnimPopOut.superclass.CreateAnimator.call(this,t),this._animator.setEasing(e.AnimPopOut.BackIn),this._bCenter&&e.Playable.appendOnEnd(this._animator,this.RemoveTempContainers,this)},e.AnimPopOut.prototype.InitStartState=function(t){if(this._bCenter){var e=this._tempContainers[this._currIndex],i=t.getDimensions();e._dvtAnimPopInOrigTx=t.getTranslateX(),e._dvtAnimPopInOrigTy=t.getTranslateY();var n=i.x+.5*i.w,o=i.y+.5*i.h;e.setTranslate(e._dvtAnimPopInOrigTx+n,e._dvtAnimPopInOrigTy+o),t.setTranslate(-n,-o);var r=t.getParent().getChildIndex(t);e._dvtAnimPopInChildIndex=r,t.getParent().addChildAt(e,r),e.addChild(t),this._currIndex++}},e.AnimPopOut.prototype.InitEndState=function(t){if(this._bCenter){var i=new e.Container(this._context);this._tempContainers.push(i),this._animator.addProp(e.Animator.TYPE_NUMBER,i,i.getScaleX,i.setScaleX,.01),this._animator.addProp(e.Animator.TYPE_NUMBER,i,i.getScaleY,i.setScaleY,.01)}else this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getScaleX,t.setScaleX,.01),this._animator.addProp(e.Animator.TYPE_NUMBER,t,t.getScaleY,t.setScaleY,.01)},e.AnimPopOut.prototype.RemoveTempContainers=function(){if(this._tempContainers){for(var t=0;t<this._tempContainers.length;t++){var e=this._tempContainers[t];if(this._tempContainers[t]=null,e.getNumChildren()>0){var i=e.getChildAt(0);i&&(i.setTranslate(e._dvtAnimPopInOrigTx,e._dvtAnimPopInOrigTy),e.getParent().addChildAt(i,e._dvtAnimPopInChildIndex))}e.getParent().removeChild(e)}this._tempContainers=null}};var p=function(t,e,i,n,o,r,s){this.Init(t,e,i,n,o,r,s)};e.Obj.createSubclass(p,e.ParallelPlayable),p.prototype.Init=function(t,e,i,n,o,r,s){r||(r=.5),s||(s=0);var h=new l(t,e,n,r,s),u=new a(t,i,o,r,r/3+s);p.superclass.Init.call(this,t,[h,u])},e.CombinedAnimCube=function(t,e,i,n,o,r,s){this.Init(t,e,i,n,o,r,s)},e.Obj.createSubclass(e.CombinedAnimCube,e.ParallelPlayable),e.CombinedAnimCube.prototype.Init=function(t,i,n,o,r,s,a){s||(s=.5),a||(a=0);var l=new c(t,i,o,r,s,a),h=new d(t,n,o,r,s,a);e.CombinedAnimCube.superclass.Init.call(this,t,[l,h])};var _=function(t,e,i,n,o){this.Init(t,e,i,n,o)};e.Obj.createSubclass(_,e.ParallelPlayable),_.prototype.Init=function(t,i,n,o,r){o||(o=.5),r||(r=0);var s=new e.AnimFadeOut(t,i,o,r),a=new e.AnimFadeIn(t,n,o,.5*s.getDuration()+r);_.superclass.Init.call(this,t,[s,a])},e.CombinedAnimFlip=function(t,e,i,n,o,r,s){this.Init(t,e,i,n,o,r,s)},e.Obj.createSubclass(e.CombinedAnimFlip,e.SequentialPlayable),e.CombinedAnimFlip.prototype.Init=function(t,i,n,o,r,s,a){s||(s=.5),a||(a=0);var l=new u(t,i,o,r,s,a);l.setEasing(e.BaseAnimation.EASING_CUBIC_IN);var d=new h(t,n,o,r,s,a);d.setEasing(e.BaseAnimation.EASING_CUBIC_OUT),d.HideObjects(),e.CombinedAnimFlip.superclass.Init.call(this,t,[l,d])},e.CombinedAnimMoveBy=function(t,e,i,n,o,r,s){this.Init(t,e,i,n,o,r,s)},e.Obj.createSubclass(e.CombinedAnimMoveBy,e.ParallelPlayable),e.CombinedAnimMoveBy.prototype.Init=function(t,i,n,o,r,s,a){s||(s=.5),a||(a=0);var l=new e.AnimMoveBy(t,i,o,s,a),h=new e.AnimMoveBy(t,n,r,s,a);e.CombinedAnimMoveBy.superclass.Init.call(this,t,[l,h])};var g=function(t,e,i,n,o,r,s,a,l){this.Init(t,e,i,n,o,r,s,a,l)};e.Obj.createSubclass(g,e.ParallelPlayable),g.prototype.Init=function(t,i,n,o,r,s,a,l,h){r||(r=e.BaseAnimation.DIR_NE),s||(s=e.BaseAnimation.DIR_NW),a||(a=.5),l||(l=.5),h||(h=0);var u=new e.AnimScaleFadeOut(t,i,o,r,a,l,h),d=new e.AnimScaleFadeIn(t,n,o,s,a,l,.3*u.getDuration()+h);g.superclass.Init.call(this,t,[u,d])},e.CombinedAnimPopIn=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)},e.Obj.createSubclass(e.CombinedAnimPopIn,e.ParallelPlayable),e.CombinedAnimPopIn.prototype.Init=function(t,i,n,o,r,s){var a,l=[];a=i instanceof Array?i:[i],s=null===s||isNaN(s)?0:s;for(var h=0;h<a.length;h++){var u=a[h],d=s+Math.random()*(r-o),c=new e.AnimPopIn(t,u,n,o,d);l.push(c)}e.CombinedAnimPopIn.superclass.Init.call(this,t,l)};var m=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)};e.Obj.createSubclass(m,e.ParallelPlayable),m.prototype.Init=function(t,i,n,o,r,s){var a,l=[];a=i instanceof Array?i:[i],s=null===s||isNaN(s)?0:s;for(var h=0;h<a.length;h++){var u=a[h],d=s+Math.random()*(r-o),c=new e.AnimPopOut(t,u,n,o,d);l.push(c)}m.superclass.Init.call(this,t,l)};var f=function(){this._Init()};e.Obj.createSubclass(f,i),f.prototype._Init=function(){f.superclass._Init.call(this)},f.prototype.getId=function(){return this._id},f.prototype.setId=function(t){this._id=t},f.prototype.mergeProps=function(t){t.setId(this._id)},e.ColorUtils={},e.Obj.createSubclass(e.ColorUtils,e.Obj),e.ColorUtils._RED=0,e.ColorUtils._GREEN=1,e.ColorUtils._BLUE=2,e.ColorUtils._ALPHA=3,e.ColorUtils._RGBA="rgba(",e.ColorUtils._RGB="rgb(",e.ColorUtils._POUND="#",e.ColorUtils._FACTOR=.15,e.ColorUtils._names,e.ColorUtils.getColorFromName=function(t){if(!e.ColorUtils._names){var i=[];i.aliceblue="#f0f8ff",i.antiquewhite="#faEbd7",i.aqua="#00ffff",i.aquamarine="#7fffd4",i.azure="#f0ffff",i.beige="#f5f5dc",i.bisque="#ffE4c4",i.black="#000000",i.blanchedalmond="#ffEbcd",i.blue="#0000ff",i.blueviolet="#8a2bE2",i.brown="#a52a2a",i.burlywood="#dEb887",i.cadetblue="#5f9Ea0",i.chartreuse="#7fff00",i.chocolate="#d2691E",i.coral="#ff7f50",i.cornflowerblue="#6495Ed",i.cornsilk="#fff8dc",i.crimson="#dc143c",i.cyan="#00ffff",i.darkblue="#00008b",i.darkcyan="#008b8b",i.darkgoldenrod="#b8860b",i.darkgray="#a9a9a9",i.darkgreen="#006400",i.darkkhaki="#bdb76b",i.darkmagenta="#8b008b",i.darkolivegreen="#556b2f",i.darkorange="#ff8c00",i.darkorchid="#9932cc",i.darkred="#8b0000",i.darksalmon="#E9967a",i.darkseagreen="#8fbc8f",i.darkslateblue="#483d8b",i.darkslategray="#2f4f4f",i.darkturquoise="#00cEd1",i.darkviolet="#9400d3",i.deeppink="#ff1493",i.deepskyblue="#00bfff",i.dimgray="#696969",i.dodgerblue="#1E90ff",i.firebrick="#b22222",i.floralwhite="#fffaf0",i.forestgreen="#228b22",i.fuchsia="#ff00ff",i.gainsboro="#dcdcdc",i.ghostwhite="#f8f8ff",i.gold="#ffd700",i.goldenrod="#daa520",i.gray="#808080",i.green="#008000",i.greenyellow="#adff2f",i.honeydew="#f0fff0",i.hotpink="#ff69b4",i["indianred "]="#cd5c5c",i["indigo "]="#4b0082",i.ivory="#fffff0",i.khaki="#f0E68c",i.lavender="#E6E6fa",i.lavenderblush="#fff0f5",i.lawngreen="#7cfc00",i.lemonchiffon="#fffacd",i.lightblue="#add8E6",i.lightcoral="#f08080",i.lightcyan="#E0ffff",i.lightgoldenrodyellow="#fafad2",i.lightgray="#d3d3d3",i.lightgreen="#90EE90",i.lightpink="#ffb6c1",i.lightsalmon="#ffa07a",i.lightseagreen="#20b2aa",i.lightskyblue="#87cEfa",i.lightslategray="#778899",i.lightsteelblue="#b0c4dE",i.lightyellow="#ffffE0",i.lime="#00ff00",i.limegreen="#32cd32",i.linen="#faf0E6",i.magenta="#ff00ff",i.maroon="#800000",i.mediumaquamarine="#66cdaa",i.mediumblue="#0000cd",i.mediumorchid="#ba55d3",i.mediumpurple="#9370db",i.mediumseagreen="#3cb371",i.mediumslateblue="#7b68EE",i.mediumspringgreen="#00fa9a",i.mediumturquoise="#48d1cc",i.mediumvioletred="#c71585",i.midnightblue="#191970",i.mintcream="#f5fffa",i.mistyrose="#ffE4E1",i.moccasin="#ffE4b5",i.navajowhite="#ffdEad",i.navy="#000080",i.oldlace="#fdf5E6",i.olive="#808000",i.olivedrab="#6b8E23",i.orange="#ffa500",i.orangered="#ff4500",i.orchid="#da70d6",i.palegoldenrod="#EEE8aa",i.palegreen="#98fb98",i.paleturquoise="#afEEEE",i.palevioletred="#db7093",i.papayawhip="#ffEfd5",i.peachpuff="#ffdab9",i.peru="#cd853f",i.pink="#ffc0cb",i.plum="#dda0dd",i.powderblue="#b0E0E6",i.purple="#800080",i.rebeccapurple="#663399",i.red="#ff0000",i.rosybrown="#bc8f8f",i.royalblue="#4169E1",i.saddlebrown="#8b4513",i.salmon="#fa8072",i.sandybrown="#f4a460",i.seagreen="#2E8b57",i.seashell="#fff5EE",i.sienna="#a0522d",i.silver="#c0c0c0",i.skyblue="#87cEEb",i.slateblue="#6a5acd",i.slategray="#708090",i.snow="#fffafa",i.springgreen="#00ff7f",i.steelblue="#4682b4",i.tan="#d2b48c",i.teal="#008080",i.thistle="#d8bfd8",i.tomato="#ff6347",i.turquoise="#40E0d0",i.violet="#EE82EE",i.wheat="#f5dEb3",i.white="#ffffff",i.whitesmoke="#f5f5f5",i.yellow="#ffff00",i.yellowgreen="#9acd32",i.transparent="rgba(255,255,255,0)",e.ColorUtils._names=i}return e.ColorUtils._names[t]},e.ColorUtils.isColor=function(t,i){if(!i)return t.charAt(0)===e.ColorUtils._POUND||0===t.indexOf(e.ColorUtils._RGBA)||0===t.indexOf(e.ColorUtils._RGB);var n=!1;if(t=e.StringUtils.trim(t),t=t.toLowerCase(),t.charAt(0)===e.ColorUtils._POUND){if(7===t.length){var o=new RegExp(/^#[0-9a-f]{6}$/i);n=o.test(t)}}else{var r,s=0===t.indexOf(e.ColorUtils._RGBA);if(s||(r=0===t.indexOf(e.ColorUtils._RGB)),s||r){var a=t.indexOf(")");if(a>=0){for(var l=t.substring(s?5:4,a).split(","),h=l.length,u=!0,d=0;d<h;d++){var c=l[d];if(c<0||c>255||d>3&&(c<0||c>1)){u=!1;break}}u&&(n=s?4===h:3===h)}}}return n},e.ColorUtils.getAlpha=function(t){return e.ColorUtils._getChannel(t,e.ColorUtils._ALPHA)},e.ColorUtils.setAlpha=function(t,i){return e.ColorUtils._setChannel(t,e.ColorUtils._ALPHA,i)},e.ColorUtils.getRed=function(t){return e.ColorUtils._getChannel(t,e.ColorUtils._RED)},e.ColorUtils.setRed=function(t,i){return e.ColorUtils._setChannel(t,e.ColorUtils._RED,i)},e.ColorUtils.getBlue=function(t){return e.ColorUtils._getChannel(t,e.ColorUtils._BLUE)},e.ColorUtils.setBlue=function(t,i){return e.ColorUtils._setChannel(t,e.ColorUtils._BLUE,i)},e.ColorUtils.getGreen=function(t){return e.ColorUtils._getChannel(t,e.ColorUtils._GREEN)},e.ColorUtils.setGreen=function(t,i){return e.ColorUtils._setChannel(t,e.ColorUtils._GREEN,i)},e.ColorUtils._getChannel=function(t,i){var n=t,o=null,r=e.ColorUtils.getColorFromName(n);if(r&&(n=r),i===e.ColorUtils._ALPHA){if("#"===n.charAt(0))return n.length>7?parseInt(n.substring(1,3),16)/255:1;if("none"===n)return 0}var s=n.indexOf("(");if(s<0)l=[],n.length>7?(l[0]=parseInt(n.substr(3,2),16),l[1]=parseInt(n.substr(5,2),16),l[2]=parseInt(n.substr(7,2),16),l[3]=parseInt(n.substr(1,2),16)/255):(l[0]=parseInt(n.substr(1,2),16),l[1]=parseInt(n.substr(3,2),16),l[2]=parseInt(n.substr(5,2),16),l[3]=1),o=l[i];else{var a=n.indexOf(")"),l=n.substring(s+1,a).split(",");3===l.length&&i===e.ColorUtils._ALPHA?o=1:(o=l[i],o=parseFloat(o))}return o},e.ColorUtils.getDarker=function(t,i){var n=e.ColorUtils._getChannel(t,e.ColorUtils._RED),o=e.ColorUtils._getChannel(t,e.ColorUtils._GREEN),r=e.ColorUtils._getChannel(t,e.ColorUtils._BLUE),s=e.ColorUtils._getChannel(t,e.ColorUtils._ALPHA);return i||(i=e.ColorUtils._FACTOR),n=Math.max(parseInt(n*(1-i)),0),o=Math.max(parseInt(o*(1-i)),0),r=Math.max(parseInt(r*(1-i)),0),e.ColorUtils.makeRGBA(n,o,r,s)},e.ColorUtils.getBrighter=function(t,i){var n=e.ColorUtils._getChannel(t,e.ColorUtils._ALPHA),o=e.ColorUtils._getChannel(t,e.ColorUtils._RED),r=e.ColorUtils._getChannel(t,e.ColorUtils._GREEN),s=e.ColorUtils._getChannel(t,e.ColorUtils._BLUE);i||(i=e.ColorUtils._FACTOR);var a=Math.min(o+parseInt((255-o)*i),255),l=Math.min(r+parseInt((255-r)*i),255),h=Math.min(s+parseInt((255-s)*i),255);return e.ColorUtils.makeRGBA(a,l,h,n)},e.ColorUtils.getGrey=function(t){var i=e.ColorUtils._getChannel(t,e.ColorUtils._RED),n=e.ColorUtils._getChannel(t,e.ColorUtils._BLUE),o=e.ColorUtils._getChannel(t,e.ColorUtils._GREEN),r=Math.round(.3*i+.59*n+.11*o);return this.setRGB(t,r,r,r)},e.ColorUtils.invert=function(t){var i,n=255-e.ColorUtils._getChannel(t,e.ColorUtils._RED),o=255-e.ColorUtils._getChannel(t,e.ColorUtils._BLUE),r=255-e.ColorUtils._getChannel(t,e.ColorUtils._GREEN);return i="#"===t.charAt(0)?e.ColorUtils.makePound(n,o,r):t.substr(0,4)===e.ColorUtils._RGB?e.ColorUtils.makeRGB(n,o,r):e.ColorUtils.makeRGBA(n,o,r,e.ColorUtils._getChannel(t,e.ColorUtils._ALPHA))},e.ColorUtils.isRGBA=function(t){return t.substr(0,5)===e.ColorUtils._RGBA},e.ColorUtils.makeRGB=function(t,i,n){
return n=null===n||isNaN(n)?0:n,i=null===i||isNaN(i)?0:i,t=null===t||isNaN(t)?0:t,e.ColorUtils._RGB+t+","+i+","+n+")"},e.ColorUtils.makeRGBA=function(t,i,n,o){return n=null===n||isNaN(n)?0:Math.round(n),i=null===i||isNaN(i)?0:Math.round(i),t=null===t||isNaN(t)?0:Math.round(t),o=null===o||isNaN(o)?1:o,e.ColorUtils._RGBA+t+","+i+","+n+","+o+")"},e.ColorUtils.makePound=function(t,e,i){var n=Math.round(t),o=Math.round(e),r=Math.round(i),s=n.toString(16),a=o.toString(16),l=r.toString(16);return"#"+(1===s.length?"0":"")+s+(1===a.length?"0":"")+a+(1===l.length?"0":"")+l},e.ColorUtils.getPound=function(t){var i;if("#"===t.charAt(0)){var n=t.length;if(n<=7)return t;i=e.ColorUtils._POUND,i+=t.substring(3,5)+t.substring(5,7)+t.substring(7,9)}else{var o=e.ColorUtils.getRed(t),r=e.ColorUtils.getGreen(t),s=e.ColorUtils.getBlue(t);i=e.ColorUtils.makePound(o,r,s)}return i},e.ColorUtils.getRGB=function(t){var i,n=e.ColorUtils.getColorFromName(t);if(n&&(t=n),"#"===t.charAt(0)){i=e.ColorUtils._RGB;var o=t.length;if(o>7)i+=parseInt(t.substring(3,5),16)+","+parseInt(t.substring(5,7),16)+","+parseInt(t.substring(7,9),16);else if(7===o)i+=parseInt(t.substring(1,3),16)+","+parseInt(t.substring(3,5),16)+","+parseInt(t.substr(5),16);else if(4===o){var r=t.substring(1,2);r+=r;var s=t.substring(2,3);s+=s;var a=t.substring(3);a+=a,i+=parseInt(r,16)+","+parseInt(s,16)+","+parseInt(a,16)}else 5===o?i+=parseInt(t.substring(1,3),16)+","+parseInt(t.substring(3,5),16)+",0,1":3===o&&(i+=parseInt(t.substring(1,3),16)+",0,0,1");i+=")"}else if(t.substr(0,5)===e.ColorUtils._RGBA){var l=t.lastIndexOf(",");i=e.ColorUtils._RGB,i+=t.substring(5,l),i+=")"}else i=t;return i},e.ColorUtils.getRGBA=function(t){var i,n=e.ColorUtils.getColorFromName(t);if(n&&(t=n),"#"===t.charAt(0)){i=e.ColorUtils._RGBA;var o=t.length;if(o>7)i+=parseInt(t.substring(3,5),16)+","+parseInt(t.substring(5,7),16)+","+parseInt(t.substring(7,9),16)+","+parseInt(t.substring(1,3),16)/255;else if(7===o)i+=parseInt(t.substring(1,3),16)+","+parseInt(t.substring(3,5),16)+","+parseInt(t.substr(5),16)+",1";else if(5===o)i+=parseInt(t.substring(1,3),16)+","+parseInt(t.substring(3,5),16)+",0,1";else if(4===o){var r=t.substring(1,2);r+=r;var s=t.substring(2,3);s+=s;var a=t.substring(3);a+=a,i+=parseInt(r,16)+","+parseInt(s,16)+","+parseInt(a,16)+",1"}else 3===o&&(i+=parseInt(t.substring(1,3),16)+",0,0,1");i+=")"}else t.substr(0,4)===e.ColorUtils._RGB?(i=e.ColorUtils._RGBA,i+=t.substring(4,t.length-1)+",1)"):i=t;return i},e.ColorUtils._setChannel=function(t,i,n){if(void 0===i||void 0===n||i<e.ColorUtils._RED||i>e.ColorUtils._ALPHA)return t;var o=e.ColorUtils.getColorFromName(t);o&&(t=o);var r,s,a,l="#"===t.charAt(0);if(l)r=[],r.push(parseInt(t.substr(1,2),16)),r.push(parseInt(t.substr(3,2),16)),r.push(parseInt(t.substr(5,2),16)),i===e.ColorUtils._ALPHA&&(r.push(n),l=!1,s=!0);else{var s=t.substr(0,5)===e.ColorUtils._RGBA,h=t.indexOf("("),u=t.indexOf(")"),r=t.substring(h+1,u).split(",");s||i!==e.ColorUtils._ALPHA||(r.push(n),s=!0)}return r[i]=n,a=l?e.ColorUtils.makePound(r[0],r[1],r[2]):s?e.ColorUtils.makeRGBA(r[0],r[1],r[2],r[3]):e.ColorUtils.makeRGB(r[0],r[1],r[2])},e.ColorUtils.setRGB=function(t,i,n,o){if(o=null===o||isNaN(o)?0:o,n=null===n||isNaN(n)?0:n,i=null===i||isNaN(i)?0:i,"#"===t.charAt(0))return e.ColorUtils.makePound(i,n,o);var r=t.substr(0,5)===e.ColorUtils._RGBA,s=(r?e.ColorUtils._RGBA:e.ColorUtils._RGB)+i+","+n+","+o;if(r){var a=t.lastIndexOf(5,","),l=t.indexOf(")");s+=","+t.substring(a+1,l)}return s+=")"},e.ColorUtils.rgb2hsl=function(t,e,i){t/=255,e/=255,i/=255;var n,o,r=Math.max(t,e,i),s=Math.min(t,e,i),a=r+s,l=a/2;if(r==s)n=0,o=0;else{var h=r-s;o=l>.5?h/(2-a):h/a,r==t?n=(e-i)/h+(e<i?6:0):r==e?n=(i-t)/h+2:r==i&&(n=(t-e)/h+4),n/=6}return{h:360*n,s:o,l:l}},e.ColorUtils.hsl2rgb=function(t,i,n){t/=360;var o,r,s;if(0==i)o=r=s=n;else{var a=n<.5?n*(1+i):n+i-n*i,l=2*n-a;o=e.ColorUtils._hue2rgb(l,a,t+1/3),r=e.ColorUtils._hue2rgb(l,a,t),s=e.ColorUtils._hue2rgb(l,a,t-1/3)}return{r:255*o,g:255*r,b:255*s}},e.ColorUtils._hue2rgb=function(t,e,i){return i<0?i+=1:i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},e.ColorUtils.hsv2rgb=function(t,e,i){var n,o,r,s,a,l,h,u;return t%=360,0==i?{r:0,g:0,v:0}:(e/=100,i/=100,t/=60,s=Math.floor(t),a=t-s,l=i*(1-e),h=i*(1-e*a),u=i*(1-e*(1-a)),0==s?(n=i,o=u,r=l):1==s?(n=h,o=i,r=l):2==s?(n=l,o=i,r=u):3==s?(n=l,o=h,r=i):4==s?(n=u,o=l,r=i):5==s&&(n=i,o=l,r=h),n=Math.floor(255*n),o=Math.floor(255*o),r=Math.floor(255*r),{r:n,g:o,b:r})},e.ColorUtils.rgb2hsv=function(t,e,i){var n,o,r,s,a,l;return t/=255,e/=255,i/=255,n=Math.min(t,e,i),o=Math.max(t,e,i),n==o?{h:void 0,s:0,v:100*o}:(r=t==n?e-i:e==n?i-t:t-e,s=t==n?3:e==n?5:1,a=Math.floor(60*(s-r/(o-n)))%360,l=Math.floor((o-n)/o*100),o=Math.floor(100*o),{h:a,s:l,v:o})},e.ColorUtils.adjustHSL=function(t,i,n,o){e.ColorUtils._hslCache||(e.ColorUtils._hslCache=new e.Cache(100));var r=t+":"+i+":"+n+":"+o,s=e.ColorUtils._hslCache.get(r);if(null!=s)return s;var a=e.ColorUtils._getChannel(t,e.ColorUtils._RED),l=e.ColorUtils._getChannel(t,e.ColorUtils._GREEN),h=e.ColorUtils._getChannel(t,e.ColorUtils._BLUE),u=e.ColorUtils._getChannel(t,e.ColorUtils._ALPHA),d=e.ColorUtils.rgb2hsl(a,l,h),c=Math.min(Math.max(0,d.h+i),360),p=Math.min(Math.max(0,d.s+n),1),_=Math.min(Math.max(0,d.l+o),1),g=e.ColorUtils.hsl2rgb(c,p,_);return s=1==u?e.ColorUtils.makePound(g.r,g.g,g.b):e.ColorUtils.makeRGBA(g.r,g.g,g.b,u),e.ColorUtils._hslCache.put(r,s),s},e.ColorUtils.interpolateColor=function(t,i,n){var o=e.ColorUtils.getRed(t),r=e.ColorUtils.getGreen(t),s=e.ColorUtils.getBlue(t),a=e.ColorUtils.getAlpha(t),l=e.ColorUtils.getRed(i),h=e.ColorUtils.getGreen(i),u=e.ColorUtils.getBlue(i),d=e.ColorUtils.getAlpha(i),c=Math.round(e.Math.interpolateNumber(o,l,n)),p=Math.round(e.Math.interpolateNumber(r,h,n)),_=Math.round(e.Math.interpolateNumber(s,u,n)),g=e.Math.interpolateNumber(a,d,n);return e.ColorUtils.makeRGBA(c,p,_,g)},e.ColorUtils.inferColor=function(t,i,n){if(t==i)return n;if(n==t)return i;var o,r=e.ColorUtils.getRed(t),s=e.ColorUtils.getRed(i);r==s?o=e.ColorUtils.getRed(n):(0==r&&(r=1),o=s/r*e.ColorUtils.getRed(n));var a;r=e.ColorUtils.getGreen(t),s=e.ColorUtils.getGreen(i),r==s?a=e.ColorUtils.getGreen(n):(0==r&&(r=1),a=s/r*e.ColorUtils.getGreen(n));var l;return r=e.ColorUtils.getBlue(t),s=e.ColorUtils.getBlue(i),r==s?l=e.ColorUtils.getBlue(n):(0==r&&(r=1),l=s/r*e.ColorUtils.getBlue(n)),e.ColorUtils.makePound(o,a,l)},e.ColorUtils.getContrastingTextColor=function(t){var i=e.ColorUtils.getRed(t),n=e.ColorUtils.getGreen(t),o=e.ColorUtils.getBlue(t),r=(299*i+587*n+114*o)/1e3;return r>=128?"#000000":"#FFFFFF"},e.ColorUtils.fixColorForPlatform=function(t,i){if(!t)return null;"#"==t.charAt(0)&&t.length>8&&(t=e.ColorUtils.getRGBA(t));var n={};return e.Agent.isEnvironmentBatik()&&t.indexOf("rgba")!==-1?(n.color=e.ColorUtils.getRGB(t),null!=i?n.alpha=e.ColorUtils.getAlpha(t)*i:n.alpha=e.ColorUtils.getAlpha(t)):(n.color=t,null!=i&&(n.alpha=i)),n},e.ClipPath=function(t){this._id=(t?t+"$":"")+"cp"+e.ClipPath._uniqueSeed++,this._regions=[]},e.Obj.createSubclass(e.ClipPath,e.Obj),e.ClipPath._uniqueSeed=0,e.ClipPath.NONE=0,e.ClipPath.RECT=1,e.ClipPath.PATH=2,e.ClipPath.POLYGON=3,e.ClipPath.ELLIPSE=4,e.ClipPath.CIRCLE=5,e.ClipPath.prototype._addRegion=function(t){t&&this._regions.push(t)},e.ClipPath.prototype.getId=function(){return this._id},e.ClipPath.prototype.getRegions=function(t){return this._regions},e.ClipPath.prototype.addRect=function(t,i,n,o,r,s){var a={};a.type=e.ClipPath.RECT,a.x=t,a.y=i,a.w=n,a.h=o,a.rx=r,a.ry=s,this._addRegion(a)},e.ClipPath.prototype.addCircle=function(t,i,n){var o={};o.type=e.ClipPath.CIRCLE,o.cx=t,o.cy=i,o.r=n,this._addRegion(o)},e.ClipPath.prototype.addEllipse=function(t,i,n,o){var r={};r.type=e.ClipPath.ELLIPSE,r.cx=t,r.cy=i,r.rx=n,r.ry=o,this._addRegion(r)},e.ClipPath.prototype.addPolygon=function(t){var i={};i.type=e.ClipPath.POLYGON,i.points=t,this._addRegion(i)},e.ClipPath.prototype.addPath=function(t){var i={};i.type=e.ClipPath.PATH,i.d=t,this._addRegion(i)},e.Mask=function(t,i){this._id="mask"+e.Mask._uniqueSeed++,this._gradient=t,this._bounds=i},e.Obj.createSubclass(e.Mask,e.Obj),e.Mask._uniqueSeed=0,e.Mask.prototype.getId=function(){return this._id},e.Mask.prototype.getGradient=function(){return this._gradient},e.Mask.prototype.getBounds=function(){return this._bounds},e.Fill=function(){this._Init()},e.Obj.createSubclass(e.Fill,i),e.Fill.NONE=0,e.Fill.COLOR=1,e.Fill.GRADIENT=2,e.Fill.PATTERN=3,e.Fill.IMAGE=4,e.Fill.prototype._Init=function(){e.Fill.superclass._Init.call(this)},e.Fill.prototype.getId=function(){return this._id},e.Fill.prototype.setId=function(t){this._id=t},e.Fill.prototype.equals=function(t){return!0},e.SolidFill=function(t,e){this._Init(t,e)},e.Obj.createSubclass(e.SolidFill,e.Fill),e.SolidFill.prototype.clone=function(){var t=new e.SolidFill;return this.mergeProps(t),t},e.SolidFill.prototype._Init=function(t,i){e.SolidFill.superclass._Init.call(this),this._fc=t,this._fa=null!=i?i:1},e.SolidFill.prototype.getColor=function(){return this._fc},e.SolidFill.prototype.setColor=function(t){this.isLocked()||(this._fc=t)},e.SolidFill.prototype.getAlpha=function(){return this._fa},e.SolidFill.prototype.setAlpha=function(t){this.isLocked()||(this._fa=t)},e.SolidFill.prototype.mergeProps=function(t){e.SolidFill.superclass.mergeProps.call(this,t),t._fc=this._fc,t._fa=this._fa},e.SolidFill.invisibleFill=function(){return e.SolidFill._INVISIBLE_FILL||(e.SolidFill._INVISIBLE_FILL=new e.SolidFill("rgba(0,0,0,0)")),e.SolidFill._INVISIBLE_FILL},e.SolidFill.prototype.equals=function(t){return t instanceof e.SolidFill&&t._fc==this._fc&&t._fa==this._fa&&e.SolidFill.superclass.equals.call(this,t)},e.Stroke=function(t,e){this._Init(t,e)},e.Obj.createSubclass(e.Stroke,i),e.Stroke.SOLID=0,e.Stroke.DASHED=1,e.Stroke.DOTTED=2,e.Stroke.DASHED_DOTTED=3,e.Stroke.SQUARE="square",e.Stroke.ROUND="round",e.Stroke.BEVEL="bevel",e.Stroke.MITER="miter",e.Stroke.BUTT="butt",e.Stroke.convertTypeString=function(t){return"solid"==t?e.Stroke.SOLID:"dashed"==t?e.Stroke.DASHED:"dotted"==t?e.Stroke.DOTTED:e.Stroke.SOLID},e.Stroke.prototype._Init=function(t){this._sw=null===t||isNaN(t)?1:t,e.Stroke.superclass._Init.call(this),this._bFixedWidth=!1},e.Stroke.prototype.getId=function(){return this._id},e.Stroke.prototype.setId=function(t){this._id=t},e.Stroke.prototype.mergeProps=function(t){t._sw=this._sw,t._st=this._st,t._sd=this._sd,t._sdo=this._sdo,t._sj=this._sj,t._se=this._se,t._sm=this._sm,t._bFixedWidth=this._bFixedWidth,e.Stroke.superclass.mergeProps.call(this,t)},e.Stroke.prototype.setStyle=function(t,i,n,o,r){this.isLocked()||(t&&!i&&(i=e.Stroke.getDefaultDash(t,this._sw)),this._st=t,this._sd=i,n&&(this._sj=n),o&&(this._se=o),r&&(this._sm=r))},e.Stroke.prototype.getDash=function(){return this._sd},e.Stroke.prototype.getDashOffset=function(){return this._sdo},e.Stroke.prototype.getLineJoin=function(){return this._sj},e.Stroke.prototype.setLineJoin=function(t){this.isLocked()||(this._sj=t)},e.Stroke.prototype.getLineEnd=function(){return this._se},e.Stroke.prototype.setLineEnd=function(t){this.isLocked()||(this._se=t)},e.Stroke.prototype.getMiterLimit=function(){return this._sm},e.Stroke.prototype.setMiterLimit=function(t){this.isLocked()||(this._sm=t)},e.Stroke.prototype.getType=function(){return this._st},e.Stroke.prototype.setType=function(t,i,n){this.isLocked()||(t===e.Stroke.SOLID?(i=null,n=null):i||(i=e.Stroke.getDefaultDash(t,this._sw)),this._st=t,this._sd=i,this._sdo=n)},e.Stroke.prototype.getWidth=function(){return this._sw},e.Stroke.prototype.setWidth=function(t){this.isLocked()||(this._sw=t)},e.Stroke.prototype.setFixedWidth=function(t){this._bFixedWidth=t},e.Stroke.prototype.isFixedWidth=function(){return this._bFixedWidth},e.Stroke.getDefaultDash=function(t,i){i=Math.ceil(i);var n=Math.max(6,2*i),o=Math.max(2,i),r=Math.floor((n+o)/2);return t==e.Stroke.DASHED?""+n:t==e.Stroke.DOTTED?""+o:t==e.Stroke.DASHED_DOTTED?""+n+","+r+","+o+","+r:null},e.GradientStroke=function(t,e,i,n,o,r){this._Init(t,e,i,n,o,r)},e.Obj.createSubclass(e.GradientStroke,e.Stroke),e.GradientStroke.prototype.getAlpha=function(){return 1},e.GradientStroke.prototype.getAlphas=function(){return this._arAlphas},e.GradientStroke.prototype.getBounds=function(){return this._arBounds},e.GradientStroke.prototype.getColors=function(){return this._arColors},e.GradientStroke.prototype.getStops=function(){return this._arStops},e.GradientStroke.prototype._Init=function(t,i,n,o,r,s){e.GradientStroke.superclass._Init.call(this,r,s),this._arColors=t,this._arBounds=o;var a=0;t&&(a=t.length-1),i||(i=e.GradientStroke.createDefaultAlphas(a)),this._arAlphas=i,n||(n=e.GradientStroke.createDefaultStops(a)),this._arStops=n},e.GradientStroke.createDefaultAlphas=function(t){if(t<0)return null;for(var e=[],i=0;i<t;i++)e.push(1);return e},e.GradientStroke.createDefaultStops=function(t){var e=[],i=1/t,n=0;do e.push(n),n+=i;while(--t>0);return e.push(1),e},e.GradientStroke.prototype.mergeProps=function(t){t._arColors=this._arColors,t._arStops=this._arStops,t._arAlphas=this._arAlphas,t._arBounds=this._arBounds,e.GradientStroke.superclass.mergeProps.call(this,t)},e.LinearGradientStroke=function(t,e,i,n,o,r,s){this._Init(t,e,i,n,o,r,s)},e.Obj.createSubclass(e.LinearGradientStroke,e.GradientStroke),e.LinearGradientStroke.prototype.clone=function(){var t=new e.LinearGradientStroke;return this.mergeProps(t),t},e.LinearGradientStroke.prototype._Init=function(t,i,n,o,r,s,a){e.LinearGradientStroke.superclass._Init.call(this,i,n,o,r,s,a),this._angle=null===t||isNaN(t)?0:t},e.LinearGradientStroke.prototype.getAngle=function(){return this._angle},e.LinearGradientStroke.prototype.mergeProps=function(t){e.LinearGradientStroke.superclass.mergeProps.call(this,t),t._angle=this._angle},e.LinearGradientStroke.prototype.setAngle=function(t){this.isLocked()||0!==t&&(Math.abs(t)>360&&(t%=360),this._angle=t)},e.SolidStroke=function(t,e,i){this._Init(t,e,i)},e.Obj.createSubclass(e.SolidStroke,e.Stroke),e.SolidStroke.prototype.clone=function(){var t=new e.SolidStroke;return this.mergeProps(t),t},e.SolidStroke.prototype._Init=function(t,i,n){this._sc=t,this._sa=null!=i?i:1,this._st=e.Stroke.SOLID,e.SolidStroke.superclass._Init.call(this,n)},e.SolidStroke.prototype.getAlpha=function(){return this._sa},e.SolidStroke.prototype.setAlpha=function(t){this.bLocked||(this._sa=t)},e.SolidStroke.prototype.getColor=function(){return this._sc},e.SolidStroke.prototype.setColor=function(t){this.bLocked||(this._sc=t)},e.SolidStroke.prototype.mergeProps=function(t){e.SolidStroke.superclass.mergeProps.call(this,t),t._sc=this._sc,t._sa=this._sa},e.Shadow=function(t,e,i,n,o,r,s,a,l,h){this._Init(t,e,i,n,o,r,s,a,l,h)},e.Obj.createSubclass(e.Shadow,f),e.Shadow._uniqueId=1,e.Shadow.prototype._Init=function(t,i,n,o,r,s,a,l,h,u){e.Shadow.superclass._Init.call(this),this.__type="shadow",this._rgba=t?t:"rgba(48,48,48,0.35)",this._distance=null===i||isNaN(i)?4:i,this._strength=null===s||isNaN(s)?1:s,this._blurX=null===n||isNaN(n)?4:n,this._blurY=null===o||isNaN(o)?4:o,this._angle=null===r||isNaN(r)?45:r,this._quality=null===a||isNaN(a)?1:a,this._bInner=!!l,this._bKnockout=!1,this._bHide=!1,this._Id="ds"+e.Shadow._uniqueId++},e.Shadow.prototype.clone=function(){var t=new e.Shadow;return this.mergeProps(t),t},e.Shadow.prototype.mergeProps=function(t){e.Shadow.superclass.mergeProps.call(this,t),t._rgba=this._rgba,t._distance=this._distance,t._strength=this._strength,t._blurX=this._blurX,t._blurY=this._blurY,t._angle=this._angle,t._quality=this._quality,t._bInner=this._bInner,t._bKnockout=this._bKnockout,t._bHide=this._bHide,t._Id=this._Id},e.GradientFill=function(t,e,i,n){this._Init(t,e,i,n)},e.Obj.createSubclass(e.GradientFill,e.Fill),e.GradientFill.prototype.getAlphas=function(){return this._arAlphas},e.GradientFill.prototype.getBounds=function(){return this._arBounds},e.GradientFill.prototype.getColors=function(){return this._arColors},e.GradientFill.prototype.getStops=function(){return this._arStops},e.GradientFill.prototype._Init=function(t,i,n,o){if(e.GradientFill.superclass._Init.call(this),this._arColors=t,this._arBounds=o,!i&&(i=[],t))for(var r=0;r<t.length;r++)i.push(1);this._arAlphas=i;var s=t?t.length-1:0;if(!n){n=[];var a=s>0?1/s:0,l=0;do n.push(l),l+=a;while(--s>0);n.push(1)}this._arStops=n},e.GradientFill.prototype.mergeProps=function(t){t._arColors=this._arColors,t._arStops=this._arStops,t._arAlphas=this._arAlphas,t._arBounds=this._arBounds,e.GradientFill.superclass.mergeProps.call(this,t)},e.GradientFill.prototype.equals=function(t){return!!(t instanceof e.GradientFill&&e.ArrayUtils.equals(this._arColors,t._arColors)&&e.ArrayUtils.equals(this._arStops,t._arStops)&&e.ArrayUtils.equals(this._arAlphas,t._arAlphas)&&e.ArrayUtils.equals(this._arBounds,t._arBounds))&&e.GradientFill.superclass.equals.call(this,t)},e.LinearGradientFill=function(t,e,i,n,o){this._Init(t,e,i,n,o)},e.Obj.createSubclass(e.LinearGradientFill,e.GradientFill),e.LinearGradientFill.prototype.clone=function(){var t=new e.LinearGradientFill;return this.mergeProps(t),t},e.LinearGradientFill.prototype._Init=function(t,i,n,o,r){e.LinearGradientFill.superclass._Init.call(this,i,n,o,r),this._angle=null===t||isNaN(t)?0:t},e.LinearGradientFill.prototype.getAngle=function(){return this._angle},e.LinearGradientFill.prototype.clone=function(){var t=new e.LinearGradientFill;return this.mergeProps(t),t},e.LinearGradientFill.prototype.mergeProps=function(t){e.LinearGradientFill.superclass.mergeProps.call(this,t),t._angle=this._angle},e.LinearGradientFill.prototype.setAngle=function(t){this.isLocked()||0!==t&&(Math.abs(t)>360&&(t%=360),this._angle=t)},e.LinearGradientFill.prototype.equals=function(t){return t instanceof e.LinearGradientFill&&t._angle==this._angle&&e.LinearGradientFill.superclass.equals.call(this,t)},e.ImageFill=function(t,e,i){this._Init(t,e,i)},e.Obj.createSubclass(e.ImageFill,e.Fill),e.ImageFill.prototype.getBound=function(){return this._bound},e.ImageFill.prototype.getSrc=function(){return this._src},e.ImageFill.prototype.getRepeat=function(){return this._repeat},e.ImageFill.prototype._Init=function(t,i,n){e.ImageFill.superclass._Init.call(this),this._src=t,this._bound=i,this._repeat=n},e.ImageFill.prototype.clone=function(){var t=new e.ImageFill;return this.mergeProps(t),t},e.ImageFill.prototype.mergeProps=function(t){t._src=this._src,t._bound=this._bound,t._repeat=this._repeat,e.ImageFill.superclass.mergeProps.call(this)},e.ImageFill.prototype.equals=function(t){if(t instanceof e.ImageFill&&t._src==this._src&&t._repeat==this._repeat){if(this._bound&&t._bound&&this._bound.x==t.bound.x&&this._bound.y==t.bound.y&&this._bound.w==t.bound.w&&this._bound.h==t.bound.h)return e.ImageFill.superclass.equals.call(this,t);if(!this._bound&&!t._bound)return e.ImageFill.superclass.equals.call(this,t)}return!1},e.PatternFill=function(t,e,i){this.Init(t,e,i)},e.Obj.createSubclass(e.PatternFill,e.Fill),e.PatternFill.SM_DIAG_UP_LT="sDUL",e.PatternFill.LG_DIAG_UP_LT="lDUL",e.PatternFill.SM_DIAG_UP_RT="sDUR",e.PatternFill.LG_DIAG_UP_RT="lDUR",e.PatternFill.SM_CROSSHATCH="sC",e.PatternFill.LG_CROSSHATCH="lC",e.PatternFill.SM_CHECK="sCh",e.PatternFill.LG_CHECK="lCh",e.PatternFill.SM_TRIANGLE_CHECK="sTCh",e.PatternFill.LG_TRIANGLE_CHECK="lTCh",e.PatternFill.SM_DIAMOND_CHECK="sDCh";e.PatternFill.LG_DIAMOND_CHECK="lDCh";e.PatternFill.prototype.Init=function(t,i,n){e.PatternFill.superclass._Init.call(this),this._pattern=t?e.PatternFill._convertPatternValue(t):e.PatternFill.SM_DIAG_UP_LT,this._fillColor=i?i:"#000000",this._backgroundColor=n?n:"#ffffff"},e.PatternFill.prototype.getPattern=function(){return this._pattern},e.PatternFill.prototype.getColor=function(){return this._fillColor},e.PatternFill.prototype.getBackgroundColor=function(){return this._backgroundColor},e.PatternFill.prototype.clone=function(){var t=new e.PatternFill;return this.mergeProps(t),t},e.PatternFill.prototype.mergeProps=function(t){t._pattern=this._pattern,t._fillColor=this._fillColor,t._backgroundColor=this._backgroundColor,e.PatternFill.superclass.mergeProps.call(this)},e.PatternFill.prototype.equals=function(t){return t instanceof e.PatternFill&&t._pattern==this._pattern&&t._fillColor==this._fillColor&&t._backgroundColor==this._backgroundColor&&e.PatternFill.superclass.equals.call(this,t)},e.PatternFill.prototype.getMatrix=function(){return this._matrix?this._matrix:new e.Matrix},e.PatternFill.prototype.setMatrix=function(t){this._matrix=t,this._matrix&&!this._matrix.isLocked()&&this._matrix.__lock()},e.PatternFill._convertPatternValue=function(t){return"smallDiagonalLeft"==t?e.PatternFill.SM_DIAG_UP_LT:"largeDiagonalLeft"==t?e.PatternFill.LG_DIAG_UP_LT:"smallDiagonalRight"==t?e.PatternFill.SM_DIAG_UP_RT:"largeDiagonalRight"==t?e.PatternFill.LG_DIAG_UP_RT:"smallCrosshatch"==t?e.PatternFill.SM_CROSSHATCH:"largeCrosshatch"==t?e.PatternFill.LG_CROSSHATCH:"smallChecker"==t?e.PatternFill.SM_CHECK:"largeChecker"==t?e.PatternFill.LG_CHECK:"smallTriangle"==t?e.PatternFill.SM_TRIANGLE_CHECK:"largeTriangle"==t?e.PatternFill.LG_TRIANGLE_CHECK:"smallDiamond"==t?e.PatternFill.SM_DIAMOND_CHECK:"largeDiamond"==t?e.PatternFill.LG_DIAMOND_CHECK:t},e.RadialGradientFill=function(t,e,i,n,o,r,s){this._Init(t,e,i,n,o,r,s)},e.Obj.createSubclass(e.RadialGradientFill,e.GradientFill),e.RadialGradientFill.prototype.clone=function(){var t=new e.RadialGradientFill;return this.mergeProps(t),t},e.RadialGradientFill.prototype.getRadius=function(){return this._r},e.RadialGradientFill.prototype.getCx=function(){return this._cx},e.RadialGradientFill.prototype.getCy=function(){return this._cy},e.RadialGradientFill.prototype._Init=function(t,i,n,o,r,s,a){e.RadialGradientFill.superclass._Init.call(this,t,i,n,a),this._cx=o,this._cy=r,this._r=s},e.RadialGradientFill.prototype.clone=function(){var t=new e.RadialGradientFill;return this.mergeProps(t),t},e.RadialGradientFill.prototype.mergeProps=function(t){e.RadialGradientFill.superclass.mergeProps.call(this,t),t._cx=this._cx,t._cy=this._cy,t._r=this._r},e.RadialGradientFill.prototype.equals=function(t){return t instanceof e.RadialGradientFill&&t._cx==this._cx&&t._cy==this._cy&&t._r==this._r&&e.RadialGradientFill.superclass.equals.call(this,t)},e.SelectionEffectUtils={},e.Obj.createSubclass(e.SelectionEffectUtils,e.Obj),e.SelectionEffectUtils.getHoverBorderColor=function(t){return e.ColorUtils.adjustHSL(t,0,0,.15)},e.SelectionEffectUtils.applyDrawEffect=function(t,e){var i=t.getNumDrawEffects();if(0==i)t.addDrawEffect(e);else{var n=t.getDrawEffectIndex(e);n>-1?(t.removeDrawEffectAt(n),t.addDrawEffectAt(e,n)):t.addDrawEffect(e)}},e.SelectionEffectUtils.createSelectingStroke=function(t){var i=new e.SolidStroke(e.SelectionEffectUtils.getHoverBorderColor(t),1,2);return i.setMiterLimit(1),i},e.SelectionEffectUtils.getSelectingCursor=function(){return"pointer"},e.KeyboardFocusEffect=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)},e.Obj.createSubclass(e.KeyboardFocusEffect,e.Obj),e.KeyboardFocusEffect.FOCUS_BORDER_RADIUS=1,e.KeyboardFocusEffect.FOCUS_STROKE_WIDTH=1,e.KeyboardFocusEffect.FOCUS_STROKE_ALPHA=1,e.KeyboardFocusEffect.FOCUS_STROKE_TYPE=e.Stroke.DOTTED,e.KeyboardFocusEffect.prototype.Init=function(t,i,n,o,r,s){this._container=i,this._focusEffect=new e.Rect(t,n.x,n.y,n.w,n.h,r);var a=this.CreateStroke();this._focusEffect.setStroke(a),this._focusEffect.setRx(e.KeyboardFocusEffect.FOCUS_BORDER_RADIUS),this._focusEffect.setRy(e.KeyboardFocusEffect.FOCUS_BORDER_RADIUS),o&&this._focusEffect.setMatrix(o),this._focusEffect.setFill(null),this._appendLast=s},e.KeyboardFocusEffect.prototype.CreateStroke=function(){var t=e.Agent.getFocusColor(),i=e.KeyboardFocusEffect.FOCUS_STROKE_WIDTH,n=e.KeyboardFocusEffect.FOCUS_STROKE_ALPHA,o=e.KeyboardFocusEffect.FOCUS_STROKE_TYPE;e.Agent.isPlatformWebkit()&&(i=2,o=e.Stroke.SOLID);var r=new e.SolidStroke(t,n,i);return r.setType(o,i,i),r},e.KeyboardFocusEffect.prototype.getEffect=function(){return this._focusEffect},e.KeyboardFocusEffect.prototype.setEffect=function(t){this._focusEffect=t},e.KeyboardFocusEffect.prototype.show=function(){this._focusEffect instanceof e.Shape&&(this._appendLast?this._container.addChild(this._focusEffect):this._container.addChildAt(this._focusEffect,0))},e.KeyboardFocusEffect.prototype.hide=function(){this._focusEffect instanceof e.Shape&&this._container.removeChild(this._focusEffect)},e.Dimension=function(t,e){this.Init(t,e)},e.Obj.createSubclass(e.Dimension,e.Obj),e.Dimension.prototype.Init=function(t,e){this.w=null===t||isNaN(t)?0:t,this.h=null===e||isNaN(e)?0:e},e.Dimension.prototype.getWidth=function(){return this.w},e.Dimension.prototype.getHeight=function(){return this.h},e.Matrix=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)},e.Obj.createSubclass(e.Matrix,i),e.Matrix._DECOMP_TX=0,e.Matrix._DECOMP_TY=1,e.Matrix._DECOMP_R=2,e.Matrix._DECOMP_SKEWX=3,e.Matrix._DECOMP_SX=4,e.Matrix._DECOMP_SY=5,e.Matrix.prototype.Init=function(t,i,n,o,r,s){this._a=null==t?1:t,this._b=null==i?0:i,this._c=null==n?0:n,this._d=null==o?1:o,this._tx=null==r?0:r,this._ty=null==s?0:s,this._u=0,this._v=0,this._w=1,e.Matrix.superclass._Init.call(this)},e.Matrix.prototype.Identity=function(){this._a=1,this._b=0,this._c=0,this._d=1,this._tx=0,this._ty=0},e.Matrix.prototype.getA=function(){return this._a},e.Matrix.prototype.getB=function(){return this._b},e.Matrix.prototype.getC=function(){return this._c},e.Matrix.prototype.getD=function(){return this._d},e.Matrix.prototype.getTx=function(){return this._tx},e.Matrix.prototype.getTy=function(){return this._ty},e.Matrix.prototype.clone=function(){return new e.Matrix(this._a,this._b,this._c,this._d,this._tx,this._ty)},e.Matrix.prototype.concat=function(t){if(!this.isLocked()){var e=this._a*t._a+this._c*t._b+this._u*t._tx,i=this._b*t._a+this._d*t._b+this._v*t._tx,n=this._tx*t._a+this._ty*t._b+this._w*t._tx,o=this._a*t._c+this._c*t._d+this._u*t._ty,r=this._b*t._c+this._d*t._d+this._v*t._ty,s=this._tx*t._c+this._ty*t._d+this._w*t._ty;this._a=e,this._b=i,this._c=o,this._d=r,this._tx=n,this._ty=s}},e.Matrix.prototype.translate=function(t,i){if(!this.isLocked()){var n=new e.Matrix;n._tx=t,n._ty=i,this.concat(n)}},e.Matrix.prototype.scale=function(t,i,n,o){if(!this.isLocked()){(n||o)&&this.translate(-n,-o);var r=new e.Matrix;r._a=t,r._d=i,this.concat(r),(n||o)&&this.translate(n,o)}},e.Matrix.prototype.rotate=function(t){if(!this.isLocked()){var i=new e.Matrix;i._a=Math.cos(t),i._d=i._a,i._c=Math.sin(t),i._b=-i._c,this.concat(i)}},e.Matrix.prototype.skew=function(t,i){if(!this.isLocked()){var n=new e.Matrix;n._b=Math.tan(t),n._c=Math.tan(i),this.concat(n)}},e.Matrix.prototype.Determinant=function(){var t=this._a*(this._d*this._w-this._ty*this._v)-this._b*(this._c*this._w-this._ty*this._u)+this._tx*(this._c*this._v-this._d*this._u);return t},e.Matrix.prototype.invert=function(){if(!this.isLocked()){var t=this.Determinant(),e=this._d*this._w-this._ty*this._v,i=this._tx*this._v-this._b*this._w,n=this._b*this._ty-this._tx*this._d,o=this._ty*this._u-this._c*this._w,r=this._a*this._w-this._tx*this._u,s=this._tx*this._c-this._a*this._ty;this._a=e/t,this._b=i/t,this._tx=n/t,this._c=o/t,this._d=r/t,this._ty=s/t}},e.Matrix.prototype._decompose=function(){var t=this._a,e=this._b,i=this._c,n=this._d,o=this._tx,r=this._ty;if(t*n-e*i===0)return null;var s=Math.sqrt(t*t+i*i);t/=s,i/=s;var a=t*e+i*n;e-=t*a,n-=i*a;var l=Math.sqrt(e*e+n*n);e/=l,n/=l,a/=l;var h=t*n-e*i;h===-1&&(a=-a,l=-l);var u=Math.atan2(i,t),d=Math.atan(a);return[o,r,u,d,s,l]},e.Matrix.prototype._recompose=function(t){if(!this.isLocked()){this.Identity();var e=t[0],i=t[1],n=t[2],o=t[3],r=t[4],s=t[5];this.scale(r,s),this.skew(o,0),this.rotate(n),this.translate(e,i)}},e.Matrix.prototype.equals=function(t){return!(!this&&t)&&(!(this&&!t)&&(!this&&!t||this._a==t._a&&this._b==t._b&&this._c==t._c&&this._d==t._d&&this._tx==t._tx&&this._ty==t._ty))},e.Matrix.prototype.transformPoint=function(t){var i=this._a*t.x+this._b*t.y+1*this._tx,n=this._c*t.x+this._d*t.y+1*this._ty;return new e.Point(i,n)},e.Matrix.prototype.isIdentity=function(){return 1==this._a&&0==this._b&&0==this._c&&1==this._d&&0==this._tx&&0==this._ty},e.Point=function(t,e){this.Init(t,e)},e.Obj.createSubclass(e.Point,e.Obj),e.Point.prototype.Init=function(t,e){this.x=null===t||isNaN(t)?0:t,this.y=null===e||isNaN(e)?0:e},e.Point.prototype.equals=function(t){return t instanceof e.Point&&this.x===t.x&&this.y===t.y},e.Rectangle=function(t,e,i,n){this.x=null===t||isNaN(t)?0:t,this.y=null===e||isNaN(e)?0:e,this.w=null===i||isNaN(i)?0:i,this.h=null===n||isNaN(n)?0:n},e.Obj.createSubclass(e.Rectangle,e.Obj),e.Rectangle.create=function(t){return new e.Rectangle(t[0],t[1],t[2],t[3])},e.Rectangle.prototype.containsPoint=function(t,e){return t>=this.x&&t<=this.x+this.w&&e>=this.y&&e<=this.y+this.h},e.Rectangle.prototype.getCenter=function(){return new e.Point(this.x+this.w/2,this.y+this.h/2)},e.Rectangle.prototype.getUnion=function(t){var i=new e.Rectangle;if(t&&0!==t.w&&0!==t.h)if(0!==this.w&&0!==this.h){var n=this.x+this.w,o=this.y+this.h,r=t.x+t.w,s=t.y+t.h,a=Math.min(this.x,t.x),l=Math.min(this.y,t.y);i.w=n<r?r-a:n-a,i.h=o>s?o-l:s-l,i.x=a,i.y=l}else i.x=t.x,i.y=t.y,i.w=t.w,i.h=t.h;else i.x=this.x,i.y=this.y,i.w=this.w,i.h=this.h;return i},e.Rectangle.prototype.getIntersection=function(t){var i=new e.Rectangle;if(!t||0===t.w||0===t.h)return null;if(0===this.w||0===this.h)return null;var n=this.x+this.w,o=this.y+this.h,r=t.x+t.w,s=t.y+t.h,a=Math.max(this.x,t.x),l=Math.max(this.y,t.y);return a>=n||a>=r||l>=o||l>=s?null:(i.w=n<r?n-a:r-a,i.h=o>s?s-l:o-l,i.x=a,i.y=l,i)},e.Rectangle.prototype.grow=function(t,e){var i=this.x,n=this.y,o=this.x+this.w,r=this.y+this.h;t<i&&(i=t),t>o&&(o=t),e<n&&(n=e),e>r&&(r=e),this.x=i,this.y=n,this.w=o-i,this.h=r-n},e.Rectangle.prototype.intersects=function(t){if(t&&0!==t.w&&0!==t.h&&0!==this.w&&0!==this.h){var e=this.x+this.w,i=this.y+this.h,n=t.x+t.w,o=t.y+t.h;return!(t.x>e||n<this.x||t.y>i||o<this.y)}return!1},e.Rectangle.prototype.clone=function(){return new e.Rectangle(this.x,this.y,this.w,this.h)},e.Rectangle.prototype.equals=function(t){return t instanceof e.Rectangle&&this.x==t.x&&this.y==t.y&&this.w==t.w&&this.h==t.h},e.Rectangle.prototype.toString=function(){return this.x+", "+this.y+", "+this.w+", "+this.h},e.VectorUtils={},e.Obj.createSubclass(e.VectorUtils,e.Obj),e.VectorUtils.createVector=function(t,e){var i={};return i.x=t,i.y=e,i},e.VectorUtils.addVectors=function(t,i){return e.VectorUtils.createVector(t.x+i.x,t.y+i.y)},e.VectorUtils.subtractVectors=function(t,i){return e.VectorUtils.createVector(t.x-i.x,t.y-i.y)},e.VectorUtils.scaleVector=function(t,i){return e.VectorUtils.createVector(t.x*i,t.y*i)},e.VectorUtils.getMagnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.Array2D=function(){this.Init()},e.Obj.createSubclass(e.Array2D,e.Obj),e.Array2D.prototype.Init=function(){this._data=[]},e.Array2D.prototype.get=function(t,e){return this._getInner(t)[e]},e.Array2D.prototype.put=function(t,e,i){var n=this._getInner(t),o=n[e];return n[e]=i,o},e.Array2D.prototype._getInner=function(t){var e=this._data[t];return e||(e=[],this._data[t]=e),e},e.Cache=function(t){this.Init(t)},e.Obj.createSubclass(e.Cache,e.Obj),e.Cache._TARGET_SIZE=1e3,e.Cache._BUFFER_SIZE=.5,e.Cache.prototype.Init=function(t){this._targetSize=null!=t?t:e.Cache._TARGET_SIZE,this._maxSize=Math.ceil(this._targetSize*(1+e.Cache._BUFFER_SIZE)),this._cache={},this._lruArray=[],this._hits=0,this._misses=0},e.Cache.prototype.get=function(t){var e=this._cache[t];return null!=e?(this._hits++,e):(this._misses++,null)},e.Cache.prototype.put=function(t,i){var n=null!=this._cache[t];if(this._cache[t]=i,n){var o=e.ArrayUtils.getIndex(this._lruArray,t);this._lruArray.splice(o,1),this._lruArray.push(t)}else if(this._lruArray.push(t),this._lruArray.length>this._maxSize)for(var r=this._lruArray.splice(0,this._maxSize-this._targetSize),s=0;s<r.length;s++)delete this._cache[r[s]]},e.Cache.prototype.toString=function(){var t="Cache Size: "+this._lruArray.length;return t+="\nHits: "+this._hits,t+="\nMisses: "+this._misses,
t+="\nHit %: "+Math.round(1e4*this._hits/(this._hits+this._misses))/100},e.DragAndDropUtils={},e.Obj.createSubclass(e.DragAndDropUtils,e.Obj),e.DragAndDropUtils.getDragFeedbackBounds=function(t,e){if(!t)return null;var i=null;if(t instanceof Array){if(t.length>0){i=t[0].getDimensions(e?e:t[0].getParent());for(var n=1;n<t.length;n++){var o=t[n],r=o.getDimensions(e?e:o.getParent());r.x<i.x&&(i.w+=i.x-r.x,i.x=r.x),r.y<i.y&&(i.h+=i.y-r.y,i.y=r.y),r.x+r.w>i.x+i.w&&(i.w=r.x+r.w-i.x),r.y+r.h>i.y+i.h&&(i.h=r.y+r.h-i.y)}}}else i=t.getDimensions(e?e:t.getParent());return i},e.LayoutUtils={},e.Obj.createSubclass(e.LayoutUtils,e.Obj),e.LayoutUtils.position=function(t,i,n,o,r,s){n&&(s=o*r>0?s:0,"start"==i?i=e.Agent.isRightToLeft(n.getCtx())?"right":"left":"end"==i&&(i=e.Agent.isRightToLeft(n.getCtx())?"left":"right"),"top"==i?(n.setTranslate(t.x+t.w/2-o/2,t.y),t.y+=r+s,t.h-=r+s):"bottom"==i?(n.setTranslate(t.x+t.w/2-o/2,t.y+t.h-r),t.h-=r+s):"left"==i?(n.setTranslate(t.x,t.y+t.h/2-r/2),t.x+=o+s,t.w-=o+s):"right"==i&&(n.setTranslate(t.x+t.w-o,t.y+t.h/2-r/2),t.w-=o+s))},e.LayoutUtils.align=function(t,i,n,o){if(n){var r=i;"start"==r?r=e.Agent.isRightToLeft(n.getCtx())?"right":"left":"end"==r&&(r=e.Agent.isRightToLeft(n.getCtx())?"left":"right"),"left"==r?n.setX(t.x):"center"==r?n.setX(t.x+t.w/2-o/2):"right"==r&&n.setX(t.x+t.w-o)}},e.LayoutUtils.getBubbleSize=function(t,e,i,n,o){if(t<=0)return 0;var r=n*n,s=o*o;if(i/e<s/r){var a=Math.sqrt(r*s),l=Math.sqrt(e*i);if(t==l)return Math.sqrt(a);s=i/l*a,r=e/l*a}var h=r+(t-e)/(i-e)*(s-r);return Math.sqrt(h)},e.Math=new Object,e.Obj.createSubclass(e.Math,e.Obj),e.Math.RADS_PER_DEGREE=Math.PI/180,e.Math.DEGREES_PER_RAD=180/Math.PI,e.Math.TWO_PI=2*Math.PI,e.Math.HALF_PI=Math.PI/2,e.Math.QUARTER_PI=Math.PI/4,e.Math.TOLERANCE=.1,e.Math.cantorPairing=function(t,e){return t<0||e<0?-1:(t+e)*(t+e+1)/2+t},e.Math.degreesToRads=function(t){return t*e.Math.RADS_PER_DEGREE},e.Math.radsToDegrees=function(t){return t*e.Math.DEGREES_PER_RAD},e.Math.interpolateNumber=function(t,e,i){return t+i*(e-t)},e.Math.log10=function(t){return Math.log(t)/Math.LN10},e.Math.calculateAngleBetweenTwoVectors=function(t,i,n,o){var r=Math.atan2(o,n)-Math.atan2(i,t);return r<0?r+e.Math.TWO_PI:r},e.Map2D=function(){this.Init()},e.Obj.createSubclass(e.Map2D,e.Obj),e.Map2D.prototype.Init=function(){this._map={}},e.Map2D.prototype.get=function(t,e){return this._getInnerMap(t)[e]},e.Map2D.prototype.put=function(t,e,i){var n=this._getInnerMap(t),o=n[e];return n[e]=i,o},e.Map2D.prototype._getInnerMap=function(t){var e=this._map[t];return e||(e={},this._map[t]=e),e},e.PixelMap=function(t,e){this.Init(t,e)},e.Obj.createSubclass(e.PixelMap,e.Array2D),e.PixelMap._INITIAL_SIZE=1500,e.PixelMap.prototype.Init=function(t,i){e.PixelMap.superclass.Init.call(this),this._innerMap=i,this._innerMap&&(this._innerMap._outerMap=this,this._innerMap._bOuterMap=!0),this._scale=t||1,this._capacity=this._scale*this._scale,this._bInnerMap=null!=this._innerMap,this._bOuterMap=!1;for(var n=e.PixelMap._INITIAL_SIZE/this._scale,o=0;o<n;o++)for(var r=0;r<n;r++)this.put(o,r,0)},e.PixelMap.prototype.isObscured=function(t,e,i,n){for(var o=this._adjustForScale(t),r=this._adjustForScale(e),s=this._adjustForScale(i),a=this._adjustForScale(n),l=o;l<=s;l++)for(var h=r;h<=a;h++){var u=this.get(l,h);if(u!==!0){if(!this._bInnerMap)return!1;var d=Math.max(t,l*this._scale),c=Math.max(e,h*this._scale),p=Math.min(i,(l+1)*this._scale-1),_=Math.min(n,(h+1)*this._scale-1);if(!this._innerMap.isObscured(d,c,p,_))return!1}}return!0},e.PixelMap.prototype.obscure=function(t,e,i,n,o){for(var r=this._adjustForScale(t),s=this._adjustForScale(e),a=this._adjustForScale(i),l=this._adjustForScale(n),h=r;h<=a;h++)for(var u=s;u<=l;u++){var d=this.get(h,u);if(d!==!0)if(this._bInnerMap){var c=Math.max(t,h*this._scale),p=Math.max(e,u*this._scale),_=Math.min(i,(h+1)*this._scale-1),g=Math.min(n,(u+1)*this._scale-1);this._innerMap.obscure(c,p,_,g,o)}else this._increment(h,u,o)}},e.PixelMap.prototype._increment=function(t,e,i){var n=this._adjustForScale(t),o=this._adjustForScale(e),r=this.get(n,o);r=null!=r?r+i:i,r>=this._capacity&&(r=!0),this.put(n,o,r),r===!0&&this._bOuterMap&&this._outerMap._increment(t,e,this._capacity)},e.PixelMap.prototype._adjustForScale=function(t){return Math.floor(t/this._scale)},e.PropMap=function(){this.Init()},e.PropMap.REGEXP=new RegExp("#\\{([^\\}]*)\\}","g"),e.Obj.createSubclass(e.PropMap,e.Obj),e.PropMap.prototype.Init=function(){this._props={}},e.PropMap.prototype.getProperty=function(t){return this._props[t]},e.PropMap.prototype.setProperty=function(t,e){this._props[t]=e},e.PropMap.prototype.getStringProp=function(t,e){var i=this._props[t];return i?i:e},e.PropMap.prototype.getBooleanProp=function(t,e){var i=this._props[t],n=e;return"boolean"==typeof i?n=i:0===i?n=!1:1===i?n=!0:"string"==typeof i&&(n="true"===i.toLowerCase()||"yes"===i.toLowerCase()||"on"===i.toLowerCase()),n},e.PropMap.prototype.getIntegerProp=function(t,e){var i,n=this._props[t];return n&&(i=parseInt(n)),i?i:e},e.PropMap.prototype.getFloatProp=function(t,e){var i,n=this._props[t];return n&&(i=parseFloat(n)),i?i:e},e.PropMap.prototype.getId=function(){return this.getProperty("id")},e.PropMap.prototype.setId=function(t){this.setProperty("id",t)},e.PropMap.prototype.setProperties=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.name&&void 0!==i.value&&this.setProperty(i.name,i.value)}},e.PropMap.prototype.stamp=function(t){var i=new this.constructor,n={};for(var o in this._props)this._props[o]&&this._props[o].replace?n[o]=this._props[o].replace(e.PropMap.REGEXP,function(e,i){return t&&void 0!==t[i]?t[i]:e}):n[o]=this._props[o];return i._props=n,i},e.PropMap.toELContext=function(t){for(var e,i=t.getAttributes(),n={},o=0;o<i.length;o++)e=i[o],n[e.name]=e.value;return n},e.ImageLoader={},e.Obj.createSubclass(e.ImageLoader,e.Obj),e.ImageLoader.loadImage=function(t,e,i){var n=t.getImplFactory().getImageLoader();return n.loadImage(e,i)},e.JsonUtils=new Object,e.Obj.createSubclass(e.JsonUtils,e.Obj),e.JsonUtils.clone=function(t,i,n){if(null==t)return null;var o=null;if(t instanceof Array){o=[];for(var r=0;r<t.length;r++)e.JsonUtils._isDeepClonable(t[r])?o[r]=e.JsonUtils.clone(t[r],i,n):o[r]=t[r]}else if(t instanceof e.CSSStyle)o=t.clone();else if(t instanceof Date)o=t.getTime();else if(e.JsonUtils._isClonableObject(t)){o={};for(var s in t)if(!i||i(s)){var a=t[s];if(n&&1==n[s]||!e.JsonUtils._isDeepClonable(a)||"_widgetConstructor"==s)o[s]=a;else{var l=n?n[s]:null;o[s]=e.JsonUtils.clone(a,i,l)}}}return o},e.JsonUtils.merge=function(t,i,n){var o=e.JsonUtils.clone(t,null,n),r=e.JsonUtils.clone(i,null,n);return null==o?r:null==r?o:(e.JsonUtils._copy(o,r),r)},e.JsonUtils._copy=function(t,i){for(var n in t){var o=t[n];void 0!==o&&(o&&o instanceof Array||"_widgetConstructor"==n?i[n]=o:i[n]&&i[n]instanceof e.CSSStyle?o instanceof e.CSSStyle?i[n].merge(o):i[n].merge(new e.CSSStyle(o)):e.JsonUtils._isDeepClonable(o)&&i[n]?e.JsonUtils._copy(o,i[n]):i[n]=o)}},e.JsonUtils._isDeepClonable=function(t){return"undefined"!=typeof t&&!(!(t instanceof Object)||t instanceof Boolean||t instanceof String||t instanceof Number||t instanceof Function||t.then)},e.JsonUtils._isClonableObject=function(t){return t instanceof Object&&(!t.then&&(!t.jquery&&(!("undefined"!=typeof NodeList&&t instanceof NodeList)&&!("undefined"!=typeof Node&&t instanceof Node))))},e.BaseEvent=function(){},e.Obj.createSubclass(e.BaseEvent,e.Obj),e.BaseEvent.prototype.Init=function(t){this.type=t.type,this.type=this.type,this.target=e.BaseEvent.FindDisplayable(t.target),this._isPropagationStopped=!1,this._event=t},e.BaseEvent.prototype.getNativeEvent=function(){return this._event},e.BaseEvent.prototype.preventDefault=function(){this._event.cancelable&&this._event.preventDefault()},e.BaseEvent.prototype.stopPropagation=function(){this._event.stopPropagation&&this._event.stopPropagation(),this._event.cancelBubble=!0,this._event.cancel=!0,this._event.returnValue=!1,this._isPropagationStopped=!0},e.BaseEvent.prototype.isPropagationStopped=function(){return this._isPropagationStopped},e.BaseEvent.prototype.getType=function(){return this.type},e.BaseEvent.FindDisplayable=function(t){for(;t;){if(t._obj&&t._obj.getObj&&t._obj.getObj())return t._obj.getObj();t=t.parentNode}return null},e.BaseComponentEvent=function(){},e.Obj.createSubclass(e.BaseComponentEvent,e.Obj),e.BaseComponentEvent.CLIENT_ROW_KEY="clientRowKey",e.BaseComponentEvent.prototype.Init=function(t){this._type=t,this.type=t},e.BaseComponentEvent.prototype.getType=function(){return this._type},e.BaseComponentEvent.prototype.addParam=function(t,e){this._paramKeys||(this._paramKeys=[],this._paramValues=[]),this._paramKeys.push(t),this._paramValues.push(e),this[t]=e},e.BaseComponentEvent.prototype.getParamValue=function(t){if(!t||!this._paramKeys||!this._paramValues)return null;for(var e=-1,i=0;i<this._paramKeys.length;i++)if(this._paramKeys[i]==t){e=i;break}return e!=-1?this._paramValues[e]:this[t]};var y=function(t){this.Init(t)};e.Obj.createSubclass(y,e.BaseEvent),y.FOCUS=e.Obj.defineConstant("focus"),y.FOCUSIN=e.Obj.defineConstant("focusin"),y.FOCUSOUT=e.Obj.defineConstant("focusout"),y.BLUR=e.Obj.defineConstant("blur"),y.prototype.Init=function(t){y.superclass.Init.call(this,t),this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.view=t.view,null!=t.relatedTarget&&(this.relatedTarget=e.BaseEvent.FindDisplayable(t.relatedTarget))},e.KeyboardEvent=function(t){this.Init(t)},e.Obj.createSubclass(e.KeyboardEvent,e.BaseEvent),e.KeyboardEvent.KEYDOWN=e.Obj.defineConstant("keydown"),e.KeyboardEvent.KEYUP=e.Obj.defineConstant("keyup"),e.KeyboardEvent.KEYPRESS=e.Obj.defineConstant("keypress"),e.KeyboardEvent.TAB=9,e.KeyboardEvent.ENTER=13,e.KeyboardEvent.SHIFT=16,e.KeyboardEvent.CONTROL=17,e.KeyboardEvent.HOME=36,e.KeyboardEvent.END=35,e.KeyboardEvent.ESCAPE=27,e.KeyboardEvent.SPACE=32,e.KeyboardEvent.PAGE_UP=33,e.KeyboardEvent.PAGE_DOWN=34,e.KeyboardEvent.UP_ARROW=38,e.KeyboardEvent.DOWN_ARROW=40,e.KeyboardEvent.DELETE=46,e.KeyboardEvent.LEFT_ARROW=37,e.KeyboardEvent.RIGHT_ARROW=39,e.KeyboardEvent.OPEN_BRACKET=219,e.KeyboardEvent.CLOSE_BRACKET=221,e.KeyboardEvent.BACK_SLASH=220,e.KeyboardEvent.FORWARD_SLASH=191,e.KeyboardEvent.ZERO=48,e.KeyboardEvent.NUMPAD_ZERO=96,e.KeyboardEvent.ONE=49,e.KeyboardEvent.NUMPAD_ONE=97,e.KeyboardEvent.TWO=50,e.KeyboardEvent.NUMPAD_TWO=98,e.KeyboardEvent.THREE=51,e.KeyboardEvent.NUMPAD_THREE=99,e.KeyboardEvent.FOUR=52,e.KeyboardEvent.NUMPAD_FOUR=100,e.KeyboardEvent.FIVE=53,e.KeyboardEvent.NUMPAD_FIVE=101,e.KeyboardEvent.SIX=54,e.KeyboardEvent.NUMPAD_PLUS=107,e.KeyboardEvent.NUMPAD_MINUS=109,e.KeyboardEvent.WEBKIT_PLUS=187,e.KeyboardEvent.WEBKIT_MINUS=189,e.KeyboardEvent.GECKO_PLUS=61,e.KeyboardEvent.GECKO_MINUS=173,e.KeyboardEvent.WEBKIT_SEMICOLON=186,e.KeyboardEvent.GECKO_SEMICOLON=59,e.KeyboardEvent.A=65,e.KeyboardEvent.F=70,e.KeyboardEvent.L=76,e.KeyboardEvent.M=77,e.KeyboardEvent.N=78,e.KeyboardEvent.PERIOD=190,e.KeyboardEvent.NUMPAD_PERIOD=110,e.KeyboardEvent.SINGLE_QUOTE=222,e.KeyboardEvent.STAR=56,e.KeyboardEvent.NUMPAD_STAR=144,e.KeyboardEvent.OPEN_ANGLED_BRACKET=188,e.KeyboardEvent.CLOSE_ANGLED_BRACKET=190,e.KeyboardEvent.GRAVE_ACCENT=192,e.KeyboardEvent.prototype.Init=function(t){e.KeyboardEvent.superclass.Init.call(this,t),this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.view=t.view,this.charCode=t.charCode,this.keyCode=t.keyCode,this.location=t.location,this.ctrlKey=t.ctrlKey||t.metaKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.repeat=t.repeat,this.locale=t.locale},e.KeyboardEvent.isPlus=function(t){var i=t.keyCode;return i==e.KeyboardEvent.NUMPAD_PLUS||(e.Agent.isPlatformGecko()?!(i!=e.KeyboardEvent.GECKO_PLUS||!t.shiftKey):!(i!=e.KeyboardEvent.WEBKIT_PLUS||!t.shiftKey))},e.KeyboardEvent.isEquals=function(t){var i=t.keyCode;return e.Agent.isPlatformGecko()?i==e.KeyboardEvent.GECKO_PLUS&&!t.shiftKey:i==e.KeyboardEvent.WEBKIT_PLUS&&!t.shiftKey},e.KeyboardEvent.isMinus=function(t){var i=t.keyCode;return i==e.KeyboardEvent.NUMPAD_MINUS||(e.Agent.isPlatformGecko()?i==e.KeyboardEvent.GECKO_MINUS&&!t.shiftKey:i==e.KeyboardEvent.WEBKIT_MINUS&&!t.shiftKey)},e.KeyboardEvent.isUnderscore=function(t){var i=t.keyCode;return e.Agent.isPlatformGecko()?!(i!=e.KeyboardEvent.GECKO_MINUS||!t.shiftKey):!(i!=e.KeyboardEvent.WEBKIT_MINUS||!t.shiftKey)},e.KeyboardEvent.isSemicolon=function(t){var i=t.keyCode;return e.Agent.isPlatformGecko()?i==e.KeyboardEvent.GECKO_SEMICOLON:i==e.KeyboardEvent.WEBKIT_SEMICOLON},e.MouseEvent=function(t){this.Init(t)},e.Obj.createSubclass(e.MouseEvent,e.BaseEvent),e.MouseEvent.CLICK=e.Obj.defineConstant("click"),e.MouseEvent.DBLCLICK=e.Obj.defineConstant("dblclick"),e.MouseEvent.MOUSEOVER=e.Obj.defineConstant("mouseover"),e.MouseEvent.MOUSEOUT=e.Obj.defineConstant("mouseout"),e.MouseEvent.MOUSEDOWN=e.Obj.defineConstant("mousedown"),e.MouseEvent.MOUSEUP=e.Obj.defineConstant("mouseup"),e.MouseEvent.MOUSEMOVE=e.Obj.defineConstant("mousemove"),e.MouseEvent.MOUSEWHEEL=e.Obj.defineConstant("wheel"),e.MouseEvent.RIGHT_CLICK_BUTTON=2,e.MouseEvent.prototype.Init=function(t){e.MouseEvent.superclass.Init.call(this,t),null!=t.relatedTarget&&(this.relatedTarget=e.BaseEvent.FindDisplayable(t.relatedTarget)),this.button=t.button,this.ctrlKey=t.ctrlKey||t.metaKey,this.shiftKey=t.shiftKey,this.pageX=t.pageX,this.pageY=t.pageY,this._isEventModifiedForIE=!1,null!=t.wheelDeltaY?this.wheelDelta=t.wheelDeltaY/40:null!=t.deltaY?(this.deltaMode=t.deltaMode,this.deltaY=t.deltaY,t.deltaMode==t.DOM_DELTA_LINE?this.wheelDelta=-t.deltaY:t.deltaMode==t.DOM_DELTA_PIXEL&&(this.wheelDelta=-t.deltaY/15)):null!=t.wheelDelta?this.wheelDelta=t.wheelDelta/40:this.wheelDelta=t.detail},e.MouseEvent.prototype.modifyEventForIE=function(t,i){this._isEventModifiedForIE||(this.type=t,this.relatedTarget=this.target,this.target=e.BaseEvent.FindDisplayable(i),this._isEventModifiedForIE=!0)},e.TouchEvent=function(t){this.Init(t)},e.Obj.createSubclass(e.TouchEvent,e.BaseEvent),e.TouchEvent.TOUCHSTART=e.Obj.defineConstant("touchstart"),e.TouchEvent.TOUCHMOVE=e.Obj.defineConstant("touchmove"),e.TouchEvent.TOUCHEND=e.Obj.defineConstant("touchend"),e.TouchEvent.TOUCHCANCEL=e.Obj.defineConstant("touchcancel"),e.TouchEvent.prototype.Init=function(t){e.TouchEvent.superclass.Init.call(this,t),t.type==e.TouchEvent.TOUCHCANCEL&&(this.type=e.TouchEvent.TOUCHEND),this.touches=e.TouchEvent.createTouchArray(t.touches),this.targetTouches=e.TouchEvent.createTouchArray(t.targetTouches),this.changedTouches=e.TouchEvent.createTouchArray(t.changedTouches),this._touchManager=null},e.TouchEvent.prototype.blockTouchHold=function(){this.getNativeEvent()._touchHoldBlocked=!0},e.TouchEvent.prototype.isInitialTouch=function(){return this.touches.length-this.changedTouches.length==0},e.TouchEvent.prototype.isTouchHoldBlocked=function(){return!!this.getNativeEvent()._touchHoldBlocked},e.TouchEvent.createTouchArray=function(t){for(var i=new Array,n=0;n<t.length;n++){var o=t[n],r=new e.Touch(o);i.push(r)}return i},e.TouchEvent.prototype.stopPropagation=function(){e.TouchEvent.superclass.stopPropagation.call(this),this._touchManager&&this._touchManager.postEventBubble(this)},e.TouchEvent.prototype.setTouchManager=function(t){this._touchManager=t},e.Touch=function(t){this.Init(t)},e.Obj.createSubclass(e.Touch,e.Obj),e.Touch.prototype.Init=function(t){this.clientX=t.clientX,this.clientY=t.clientY,this.screenX=t.screenX,this.screenY=t.screenY,this.pageX=t.pageX,this.pageY=t.pageY,this.target=t.target,this.identifier=null==t.identifier||isNaN(t.identifier)?1:t.identifier},e.TouchManager=function(t,e){this.Init(t,e)},e.Obj.createSubclass(e.TouchManager,e.Obj),e.TouchManager.TOUCH_MODE="mode",e.TouchManager.TOUCH_MODE_DEFAULT="defaultMode",e.TouchManager.TOUCH_MODE_LONG_PRESS="longPressMode",e.TouchManager.PREV_HOVER_OBJ="prevHoverObj",e.TouchManager.HOVER_TOUCH_KEY="hoverTouch",e.TouchManager.prototype.Init=function(t,i){this._context=i,this._id=t,this._touchCount=0,this._touchHoldTimer=new e.Timer(this._context,200,this._handleTouchHoldStartTimer,this),this._blockTouchHold=!1,this._touchMap=new Object,this._savedTouchInfo=new Array,this._addTouchHoldMoveEventListener(this._onTouchHoldHover,this),this._doubleTapTimer=new e.Timer(this._context,600,this._handleDoubleTapTimer,this,1),this._dvtTouchEvent=null},e.TouchManager.prototype.blockTouchHold=function(){this._stopTouchHoldTimer(),this._blockTouchHold=!0},e.TouchManager.prototype.unblockTouchHold=function(){this._blockTouchHold=!1},e.TouchManager.prototype._addTouchHoldMoveEventListener=function(t,i){this.addTouchEventListener(e.ComponentTouchEvent.TOUCH_HOLD_START_TYPE,t,i),this.addTouchEventListener(e.ComponentTouchEvent.TOUCH_HOLD_MOVE_TYPE,t,i),this.addTouchEventListener(e.ComponentTouchEvent.TOUCH_HOLD_END_TYPE,t,i)},e.TouchManager.prototype._onTouchHoldHover=function(t){var i=t.getType(),n=t.touch,o=t.getNativeEvent(),r=this._touchMap[n.identifier],s=t.target;if(i==e.ComponentTouchEvent.TOUCH_HOLD_END_TYPE){var a=new e.ComponentTouchEvent(e.ComponentTouchEvent.TOUCH_HOVER_END_TYPE,n,s,null,o);a._isCancelEvent=this._isCancelEvent,null!=s&&this.FireListener(new e.ComponentTouchEvent(e.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE,n,s,null,o)),r[e.TouchManager.PREV_HOVER_OBJ]=null,this.FireListener(a)}else i==e.ComponentTouchEvent.TOUCH_HOLD_START_TYPE?(r[e.TouchManager.PREV_HOVER_OBJ]=null,null!=s&&this.FireListener(new e.ComponentTouchEvent(e.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE,n,s,null,o)),r[e.TouchManager.PREV_HOVER_OBJ]=s,this.FireListener(new e.ComponentTouchEvent(e.ComponentTouchEvent.TOUCH_HOVER_START_TYPE,n,s,null,o))):i==e.ComponentTouchEvent.TOUCH_HOLD_MOVE_TYPE&&(this._fireHoverOverOutEvents(s,r[e.TouchManager.PREV_HOVER_OBJ],n,o),r[e.TouchManager.PREV_HOVER_OBJ]=s,this.FireListener(new e.ComponentTouchEvent(e.ComponentTouchEvent.TOUCH_HOVER_MOVE_TYPE,n,s,null,o)))},e.TouchManager.prototype._getObjFromTouch=function(t){var e=null;if(t){var i=this._context.getDocumentUtils();i&&(e=i.elementFromTouch(t))}return e},e.TouchManager.prototype._fireHoverOverOutEvents=function(t,i,n,o){i!=t&&(null!=i&&this.FireListener(new e.ComponentTouchEvent(e.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE,n,i,t,o)),null!=t&&this.FireListener(new e.ComponentTouchEvent(e.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE,n,t,i,o)))},e.TouchManager.prototype.addTouchEventListener=function(t,e,i){var n=this._getListeners(t,!0);n.push(e),n.push(i)},e.TouchManager.prototype.removeTouchEventListener=function(t,e,i){var n=this._getListeners(t,!1);if(n)for(var o=0;o<n.length;o+=2)if(n[o]===e&&n[o+1]===i){n.splice(o,2);break}},e.TouchManager.prototype._getListeners=function(t,e){if(!this._listenerObj){if(!e)return null;this._listenerObj={}}var i=t,n=this._listenerObj[i];return!n&&e&&(n=[],this._listenerObj[i]=n),n},e.TouchManager.prototype.FireListener=function(t){var e=this._getListeners(t.getType(),!1);if(e)for(var i=0;i<e.length;i+=2){var n=e[i+1];e[i].call(n,t)}},e.TouchManager.prototype.startTouchHold=function(t){var i=this._startSingleFingerTouchId;if(null!=i&&!isNaN(i)){var n=this._touchMap[i];if(n){for(var o=n.startTarget,r=n.startTouch,s=t.getNativeEvent(),a=this._findMatches("touchId",i),l=0;l<a.length;l++){var h=a[l],u=h.touchObj,d=h.touchId;if(u!=e.TouchManager.HOVER_TOUCH_KEY){var c=this.getTouchInfo(d),p=c.startTouch;this.performAssociatedTouchEnd(p,u,null)}}n[e.TouchManager.TOUCH_MODE]=e.TouchManager.TOUCH_MODE_LONG_PRESS,this.saveProcessedTouch(i,e.TouchManager.HOVER_TOUCH_KEY,null,e.TouchManager.HOVER_TOUCH_KEY,e.TouchManager.HOVER_TOUCH_KEY,this.HoverMoveInternal,this.HoverEndInternal,this);var _=new e.ComponentTouchEvent(e.ComponentTouchEvent.TOUCH_HOLD_START_TYPE,r,o,null,s);this.FireListener(_)}}},e.TouchManager.prototype.fireLogicalEvents=function(t){var i=t.type,n=t.getNativeEvent();if(i==e.TouchEvent.TOUCHSTART?(t.isTouchHoldBlocked()||this.processAssociatedTouchAttempt(t,e.TouchManager.HOVER_TOUCH_KEY,this.HoverStartInternal,this),this._doubleTapAttemptStarted&&t.preventDefault()):i==e.TouchEvent.TOUCHMOVE?this.processAssociatedTouchMove(t,e.TouchManager.HOVER_TOUCH_KEY):i==e.TouchEvent.TOUCHEND&&this.processAssociatedTouchEnd(t,e.TouchManager.HOVER_TOUCH_KEY),i==e.TouchEvent.TOUCHEND)for(var o=this._getStoredTouches(t.changedTouches),r=0;r<o.length;r++){var s=o[r],a=s.identifier,l=this.getTouchInfo(a),h=l.currentObj;if(l[e.TouchManager.TOUCH_MODE]!=e.TouchManager.TOUCH_MODE_LONG_PRESS&&l.fireClick){var u=new e.ComponentTouchEvent(e.ComponentTouchEvent.TOUCH_CLICK_TYPE,s,h,null,n);if(u.touchEvent=t,this.FireListener(u),this._doubleTapAttemptStarted){var d=this._doubleTapAttemptObj;if(this.resetDoubleTap(),h==d){var c=new e.ComponentTouchEvent(e.ComponentTouchEvent.TOUCH_DOUBLE_CLICK_TYPE,s,h,null,n);c.touchEvent=t,this.FireListener(c)}}else this.resetDoubleTap(),this._doubleTapTimer.start(),this._doubleTapAttemptStarted=!0,this._doubleTapAttemptObj=h}}},e.TouchManager.prototype.getTouchInfo=function(t){return this._touchMap[t]},e.TouchManager.prototype.HoverStartInternal=function(t,e){if(!this._blockTouchHold){var i=e.identifier;this._startSingleFingerTouchId=i,this._stopTouchHoldTimer(),this._startTouchHoldTimer(t)}},e.TouchManager.prototype.HoverMoveInternal=function(t,i){var n=i.identifier,o=this.getTouchInfo(n),r=o.currentObj,s=new e.ComponentTouchEvent(e.ComponentTouchEvent.TOUCH_HOLD_MOVE_TYPE,i,r,null,t.getNativeEvent());this.FireListener(s),t.preventDefault()},e.TouchManager.prototype.HoverEndInternal=function(t,i){var n=i.identifier,o=this.getTouchInfo(n),r=o.currentObj,s=new e.ComponentTouchEvent(e.ComponentTouchEvent.TOUCH_HOLD_END_TYPE,i,r,null,t.getNativeEvent());this.FireListener(s),t&&t.preventDefault()},e.TouchManager.prototype.resetTouchHold=function(){this._startSingleFingerTouchId=null,this._stopTouchHoldTimer()},e.TouchManager.prototype.preEventBubble=function(t){t.setTouchManager&&t.setTouchManager(this);var i=t.type;i==e.TouchEvent.TOUCHSTART?this.processTouchStart(t):i==e.TouchEvent.TOUCHMOVE?this.processTouchMove(t):i==e.TouchEvent.TOUCHEND&&this.processTouchEnd(t)},e.TouchManager.prototype.postEventBubble=function(t){var i=t.type;if(i==e.TouchEvent.TOUCHSTART);else if(i==e.TouchEvent.TOUCHMOVE);else if(i==e.TouchEvent.TOUCHEND)for(var n=this._getStoredTouches(t.changedTouches),o=0;o<n.length;o++){var r=n[o],s=r.identifier;delete this._touchMap[s],this._startSingleFingerTouchId==s&&(this._startSingleFingerTouchId=null);for(var a=this._findMatches("touchId",s),l=0;l<a.length;l++){var h=a[l];this.removeTooltipInfo(h.touchId,h.touchObj)}}},e.TouchManager.prototype.saveProcessedTouch=function(t,i,n,o,r,s,a,l){if(null!=t&&!isNaN(t)){var h=e.TouchManager.createSavedTouchInfo(t,i,n,o,r,s,a,l);return this._savedTouchInfo.push(h),!0}return!1},e.TouchManager.prototype.saveProcessedTouchDefault=function(t,e,i,n,o,r){var s=null;r.immediateTouchMoved&&(s=r.immediateTouchMoved);var a=null;r.immediateTouchEnded&&(a=r.immediateTouchEnded),this.saveProcessedTouch(t,e,i,n,o,s,a,r)},e.TouchManager.prototype.processAssociatedTouch=function(t,i,n,o){var r=t.type;r==e.TouchEvent.TOUCHSTART?this.processAssociatedTouchAttempt(t,i,n,o):r==e.TouchEvent.TOUCHMOVE?this.processAssociatedTouchMove(t,i):r==e.TouchEvent.TOUCHEND&&this.processAssociatedTouchEnd(t,i)},e.TouchManager.prototype.processAssociatedTouchDefault=function(t,e){this.processAssociatedTouch(t,e,e.immediateTouchAttempted,e)},e.TouchManager.prototype.cancelTouchHold=function(){for(var t=e.TouchManager.HOVER_TOUCH_KEY,i=this.getTouchIdsForObj(t),n=0;n<i.length;n++){var o=i[n],r=this.getTouchInfo(o),s=r.startTouch;s&&(this._isCancelEvent=!0,this.performAssociatedTouchEnd(s,t,null),this._isCancelEvent=!1,delete this._touchMap[o])}},e.TouchManager.prototype.performAssociatedTouchEnd=function(t,e,i){for(var n=t.identifier,o=this._getSavedTouchInfo(n,e),r=0;r<o.length;r++){var s=o[r],a=s.listenerObj,l=s.endListener;this.removeTooltipInfo(n,e),l&&l.call(a,i,t,s)}},e.TouchManager.prototype.processAssociatedTouchAttempt=function(t,e,i,n){for(var o=t.changedTouches,r=0;r<o.length;r++){var s=o[r];s&&i&&i.call(n,t,s)}},e.TouchManager.prototype.processAssociatedTouchMove=function(t,i){for(var n=this.getTouchIdsForObj(i),o=0;o<n.length;o++){var r=n[o];if(null!=r&&!isNaN(r)){var s=e.TouchManager.getTouchById(r,this._getStoredTouches(t.changedTouches));if(s)for(var a=this._getSavedTouchInfo(s.identifier,i),o=0;o<a.length;o++){var l=a[o],h=l.listenerObj,u=l.moveListener;u&&u.call(h,t,s)}}}},e.TouchManager.prototype.processAssociatedTouchEnd=function(t,i){for(var n=this.getTouchIdsForObj(i),o=0;o<n.length;o++){var r=n[o],s=e.TouchManager.getTouchById(r,this._getStoredTouches(t.changedTouches));s&&this.performAssociatedTouchEnd(s,i,t)}},e.TouchManager.prototype._findMatch=function(t,e){for(var i=-1,n=0;n<this._savedTouchInfo.length;n++){var o=this._savedTouchInfo[n];o[t]==e&&(i=n)}return i},e.TouchManager.prototype._findMatches=function(t,e){for(var i=new Array,n=0;n<this._savedTouchInfo.length;n++){var o=this._savedTouchInfo[n];o[t]==e&&i.push(o)}return i},e.TouchManager.prototype._getSavedTouchInfo=function(t,e){for(var i=this._findMatches("touchId",t),n=[],o=0;o<i.length;o++){var r=i[o];r.touchObj==e&&n.push(r)}return n},e.TouchManager.prototype.containsTouchId=function(t){var e=this._findMatches("touchId",t);return e.length>0},e.TouchManager.prototype.getTouchIdsForObj=function(t){for(var e=new Array,i=this._findMatches("touchObj",t),n=0;n<i.length;n++){var o=i[n],r=o.touchId;e.push(r)}return e},e.TouchManager.prototype.removeTooltipInfo=function(t,e){for(var i=this._findMatches("touchId",t),n=new Array,o=0;o<i.length;o++){var r=i[o];r.touchObj==e&&n.push(r)}for(var o=0;o<n.length;o++){for(var s=n[o],a=-1,l=0;l<this._savedTouchInfo.length;l++){var r=this._savedTouchInfo[l];r==s&&(a=l)}a!=-1&&(this._savedTouchInfo.splice(a,1),0==this._savedTouchInfo.length&&this._context.getTooltipManager().hideTooltip())}},e.TouchManager.prototype.setTooltipEnabled=function(t,e){for(var i=this._savedTouchInfo,n=0;n<i.length;n++){var o=i[n],r=o.touchId;r==t&&(o.allowTooltips=e)}},e.TouchManager.prototype.getTooltipInfo=function(){for(var t=new Object,e=new Array,i=null,n=null,o=!1,r=this._findMatches("allowTooltips",!0),s=0;s<r.length;s++){var a=r[s],l=a.touchId;n?a.grouping!=n&&(o=!0):n=a.grouping;var h,u=this._touchMap[l];u&&(h=u.currentObj),a.tooltipObjOverride&&(h=a.tooltipObjOverride),e.push(l),i=h}return o&&(e=new Array),t.touchIds=e,t.tooltipTarget=i,t},e.TouchManager.prototype.containsGrouping=function(t){var e=this._findMatches("grouping",t);return e.length>0},e.TouchManager.prototype.processTouchStart=function(t){var i=t.changedTouches,n=t.touches;this._touchCount=n.length;for(var o=0;o<i.length;o++){var r=i[o],s=r.screenX,a=r.screenY,l=r.identifier,h=this._getObjFromTouch(r),u={x:s,y:a,prevX:s,prevY:a,pageX:r.pageX,pageY:r.pageY,prevPageX:r.pageX,prevPageY:r.pageY,dx:0,dy:0,fireClick:!0,startTarget:h,currentObj:h,touchMoved:!1,touchtype:null,startTouch:r};u[e.TouchManager.TOUCH_MODE]=e.TouchManager.TOUCH_MODE_DEFAULT,u.origx=s,u.origy=a,this._touchMap[l]=u}return!this._isHovering()&&this._isTouchHoldAllowed()||t.blockTouchHold(),!0},e.TouchManager.prototype._isTouchHoldAllowed=function(){var t=!1,e=0;for(var i in this._touchMap){var n=this.getTouchInfo(i);n.touchMoved&&(t=!0),e++}return!(e>1&&!t)||(this.resetTouchHold(),!1)},e.TouchManager.prototype._isHovering=function(){for(var t in this._touchMap){var i=this.getTouchInfo(t);if(i[e.TouchManager.TOUCH_MODE]==e.TouchManager.TOUCH_MODE_LONG_PRESS)return!0}return!1},e.TouchManager.prototype._getStoredTouches=function(t){for(var e=new Array,i=0;i<t.length;i++){var n=t[i],o=n.identifier,r=this.getTouchInfo(o);r&&e.push(n)}return e},e.TouchManager.prototype.processTouchMove=function(t){for(var i=this._getStoredTouches(t.changedTouches),n=this._getStoredTouches(t.touches),o=0;o<i.length;o++){var r=i[o],s=this._getObjFromTouch(r),a=r.identifier,l=this.getTouchInfo(a);if(l.currentObj=s,l.touchMoved=!0,l[e.TouchManager.TOUCH_MODE]!=e.TouchManager.TOUCH_MODE_LONG_PRESS){var h=Math.abs(l.pageX-r.pageX),u=Math.abs(l.pageY-r.pageY);this._startSingleFingerTouchId==a&&(h>0||u>0)&&this.resetTouchHold(),l.touchMoved=h>3||u>3}l.fireClick&&(l[e.TouchManager.TOUCH_MODE]==e.TouchManager.TOUCH_MODE_LONG_PRESS||l.currentObj!=l.startTarget&&(l.fireClick=!1))}for(var o=0;o<n.length;o++){var r=n[o],d=r.identifier,l=this.getTouchInfo(d),c=r.screenX,p=r.screenY,_=c-l.x,g=p-l.y;l.prevX=l.x,l.prevY=l.y,l.dx=_,l.dy=g,l.x=c,l.y=p,l.prevPageX=l.pageX,l.prevPageY=l.pageY,l.pageX=r.pageX,l.pageY=r.pageY}return!0},e.TouchManager.prototype.processTouchEnd=function(t){var i=t.changedTouches;this._touchCount=t.touches.length;for(var n=0;n<i.length;n++){var o=i[n],r=this._getObjFromTouch(o),s=o.identifier,a=this.getTouchInfo(s);if(a&&a.fireClick)if(a[e.TouchManager.TOUCH_MODE]==e.TouchManager.TOUCH_MODE_LONG_PRESS)this._startSingleFingerTouchId=null;else{var l=r==a.startTarget,h=a.touchMoved,u=l&&!h;a.fireClick=u}}return!0},e.TouchManager.getTouchById=function(t,e){if(null!=t&&!isNaN(t))for(var i=0;i<e.length;i++){var n=e[i];if(n.identifier==t)return n}return null},e.TouchManager.createSavedTouchInfo=function(t,e,i,n,o,r,s,a){var l={touchId:t,tooltipObjOverride:i,grouping:n,type:o,touchObj:e,allowTooltips:!0};return l.moveListener=r,l.endListener=s,l.listenerObj=a,l},e.TouchManager.prototype._handleTouchHoldStartTimer=function(){var t=this._dvtTouchEvent;this._stopTouchHoldTimer(),this.startTouchHold(t)},e.TouchManager.prototype._startTouchHoldTimer=function(t){this._dvtTouchEvent=t,this._touchHoldTimer&&this._touchHoldTimer.start()},e.TouchManager.prototype._stopTouchHoldTimer=function(){this._dvtTouchEvent=null,this._touchHoldTimer&&this._touchHoldTimer.stop()},e.TouchManager.prototype._handleDoubleTapTimer=function(){this.resetDoubleTap()},e.TouchManager.prototype.resetDoubleTap=function(){this._doubleTapAttemptStarted=!1,this._doubleTapAttemptObj=null,this._doubleTapTimer.stop()},e.TouchManager.prototype.getMultiTouchData=function(t){if(2==t.length){var e=this._touchMap[t[0]],i=this._touchMap[t[1]];if(null==e||null==i)return null;if(0==e.dx&&0==i.dy)return null;var n=e.pageX-i.pageX,o=e.pageY-i.pageY,r=Math.sqrt(n*n+o*o),s=e.prevPageX-i.prevPageX,a=e.prevPageY-i.prevPageY,l=Math.sqrt(s*s+a*a),h=r-l,u=(e.pageX+i.pageX)/2,d=(e.pageY+i.pageY)/2,c=(e.prevPageX+i.prevPageX)/2,p=(e.prevPageY+i.prevPageY)/2,_=u-c,g=d-p;return{dz:h,cx:u,cy:d,dcx:_,dcy:g,dist:r}}return null},e.TouchManager.prototype.getMultiTouchDelta=function(t){if(t){var e,i;if(2==t.length){var n=this._touchMap[t[0]],o=this._touchMap[t[1]];if(null==n||null==o)return;if(null==n.touchtype){var r=this._determineTouchDirection(n);if(null!=r){var s=this._determineTouchDirection(o);null!=s&&(i=this._isSameDirection(r,s)?"scroll":"pinch",n.touchtype=i)}}if(i=n.touchtype,null==i)return;if("pinch"==i)return null}for(var a=0,l=0,h=0;h<t.length;h++)e=this._touchMap[t[h]],a+=e.dx,l+=e.dy;a/=t.length,l/=t.length;var u=!0;if(u){var d=1;return{deltaX:a*d,deltaY:l*d}}}return null},e.TouchManager.prototype._isSameDirection=function(t,e){return t==e||(2==t.length&&1==e.length?t.charAt(0)==e||t.charAt(1)==e:1==t.length&&2==e.length&&(t==e.charAt(0)||e==t.charAt(1)))},e.TouchManager.prototype._determineTouchDirection=function(t){var e=t.origx,i=t.origy;if(null==e||null==i)return null;var n=t.x,o=t.y,r=.01,s=n-e,a=o-i,l=Math.sqrt(Math.pow(s,2)+Math.pow(a,2)),h=window.innerWidth*r;if(l<h)return null;var u=.25,d=null;Math.abs(s/a)>=u&&(d=s<0?"l":"r");var c=null;return Math.abs(a/s)>=u&&(c=a<0?"u":"d"),null!=d&&null!=c?c+d:null==d?c:null==c?d:null},e.TouchManager.prototype.calcAveragePosition=function(t){for(var i=0,n=0,o=t.length,r=0;r<o;r++){var s=t[r],a=this.getTouchInfo(s);i+=a.pageX,n+=a.pageY}return i/=o,n/=o,new e.Point(i,n)},e.TouchManager.prototype.getStartTargetsByIds=function(t){for(var e=new Array,i=0;i<t.length;i++){var n=this.getTouchInfo(t[i]);e.push(n.startTarget)}return e},e.TouchManager.prototype.reset=function(){this._touchMap=new Object,
this._savedTouchInfo=new Array,this.resetTouchHold(),this.resetDoubleTap()},e.ViewportChangeEvent=function(t,i,n){this.Init(e.ViewportChangeEvent.TYPE),this._oldDim=t,this._newDim=i,this._evt=n},e.ViewportChangeEvent.TYPE="viewportChange",e.Obj.createSubclass(e.ViewportChangeEvent,e.BaseComponentEvent),e.ViewportChangeEvent.prototype.getNativeEvent=function(){return this._evt},e.ViewportChangeEvent.prototype.getOldDimensions=function(){return this._oldDim},e.ViewportChangeEvent.prototype.getNewDimensions=function(){return this._newDim};var v=function(t,e){this.Init(t),this.target=e};v.TOOLTIP_CLOSED_TYPE="actiontooltipclosed",v.TOOLTIP_STARTED_TYPE="actiontooltipstarted",e.Obj.createSubclass(v,e.BaseComponentEvent),v.prototype.Init=function(t){v.superclass.Init.call(this,t)},e.ComponentTouchEvent=function(t,e,i,n,o){this.Init(t,e,i,n,o)},e.ComponentTouchEvent.TOUCH_HOLD_START_TYPE="touchholdstart",e.ComponentTouchEvent.TOUCH_HOLD_MOVE_TYPE="touchholdmove",e.ComponentTouchEvent.TOUCH_HOLD_END_TYPE="touchholdend",e.ComponentTouchEvent.TOUCH_HOVER_START_TYPE="touchhoverstart",e.ComponentTouchEvent.TOUCH_HOVER_MOVE_TYPE="touchhovermove",e.ComponentTouchEvent.TOUCH_HOVER_END_TYPE="touchhoverend",e.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE="touchhoverover",e.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE="touchhoverout",e.ComponentTouchEvent.TOUCH_CLICK_TYPE="touchclick",e.ComponentTouchEvent.TOUCH_DOUBLE_CLICK_TYPE="touchdblclick",e.Obj.createSubclass(e.ComponentTouchEvent,e.BaseComponentEvent),e.ComponentTouchEvent.prototype.Init=function(t,i,n,o,r){e.ComponentTouchEvent.superclass.Init.call(this,t),this.target=n,this.touch=i,this.relatedTarget=o,this._isPropagationStopped=!1,this._nativeEvent=r},e.ComponentTouchEvent.prototype.preventDefault=function(){},e.ComponentTouchEvent.prototype.stopPropagation=function(){this._isPropagationStopped=!0},e.ComponentTouchEvent.prototype.isPropagationStopped=function(){return this._isPropagationStopped},e.ComponentTouchEvent.prototype.getNativeEvent=function(){return this._nativeEvent},e.ResizeEvent=function(t,e,i,n){this.Init(t,e,i,n)},e.Obj.createSubclass(e.ResizeEvent,e.Obj),e.ResizeEvent.RESIZE_EVENT="dvtResizeEvent",e.ResizeEvent.prototype.Init=function(t,i,n,o){this.type=e.ResizeEvent.RESIZE_EVENT,this._ww=t,this._hh=i,this._xx=n,this._yy=o},e.ResizeEvent.prototype.getWidth=function(){return this._ww},e.ResizeEvent.prototype.getHeight=function(){return this._hh},e.ResizeEvent.prototype.getX=function(){return this._xx},e.ResizeEvent.prototype.getY=function(){return this._yy},e.ResizeEvent.prototype.getType=function(){return this.type},e.ScrollEvent=function(t,e){this.Init(t,e)},e.Obj.createSubclass(e.ScrollEvent,e.Obj),e.ScrollEvent.SCROLL_EVENT="dvtScrollEvent",e.ScrollEvent.prototype.Init=function(t,i){this.type=e.ScrollEvent.SCROLL_EVENT,this._x=t,this._y=i},e.ScrollEvent.prototype.getX=function(){return this._x},e.ScrollEvent.prototype.getY=function(){return this._y},e.ScrollEvent.prototype.getType=function(){return this.type},e.MarqueeEvent=function(t,i,n,o,r,s){this.Init(e.MarqueeEvent.TYPE),this.subtype=t,this.x=i,this.y=n,this.w=o,this.h=r,this.ctrlKey=s},e.Obj.createSubclass(e.MarqueeEvent,e.BaseComponentEvent),e.MarqueeEvent.TYPE="dvtMarquee",e.MarqueeEvent.SUBTYPE_START="dvtMarqueeStartEvent",e.MarqueeEvent.SUBTYPE_MOVE="dvtMarqueeMoveEvent",e.MarqueeEvent.SUBTYPE_END="dvtMarqueeEndEvent",e.MarqueeEvent.prototype.getSubtype=function(){return this.subtype},e.PanZoomEvent=function(t,i,n,o,r,s,a,l,h){this.Init(e.PanZoomEvent.TYPE),this.subtype=t,this.dxMin=i,this.dxMax=n,this.dyMin=o,this.dyMax=r,this.dxMinTotal=s,this.dxMaxTotal=a,this.dyMinTotal=l,this.dyMaxTotal=h},e.Obj.createSubclass(e.PanZoomEvent,e.BaseComponentEvent),e.PanZoomEvent.TYPE="dvtPanZoom",e.PanZoomEvent.SUBTYPE_PAN_START="dvtPanStartEvent",e.PanZoomEvent.SUBTYPE_PAN_MOVE="dvtPanMoveEvent",e.PanZoomEvent.SUBTYPE_PAN_END="dvtPanEndEvent",e.PanZoomEvent.SUBTYPE_ZOOM="dvtZoomEvent",e.PanZoomEvent.SUBTYPE_PINCH_START="dvtPinchStartEvent",e.PanZoomEvent.SUBTYPE_PINCH_MOVE="dvtPinchMoveEvent",e.PanZoomEvent.SUBTYPE_PINCH_END="dvtPinchEndEvent",e.PanZoomEvent.prototype.getSubtype=function(){return this.subtype},e.SimpleScrollbarEvent=function(t,i,n){this.Init(e.SimpleScrollbarEvent.TYPE),this._subtype=t,this._newMin=i,this._newMax=n},e.Obj.createSubclass(e.SimpleScrollbarEvent,e.BaseComponentEvent),e.SimpleScrollbarEvent.TYPE="dvtSimpleScrollbar",e.SimpleScrollbarEvent.SUBTYPE_MOVE="dvtMoveEvent",e.SimpleScrollbarEvent.SUBTYPE_END="dvtEndEvent",e.SimpleScrollbarEvent.prototype.getSubtype=function(){return this._subtype},e.SimpleScrollbarEvent.prototype.getNewMin=function(){return this._newMin},e.SimpleScrollbarEvent.prototype.getNewMax=function(){return this._newMax},e.DomEventFactory=new Object,e.Obj.createSubclass(e.DomEventFactory,e.Obj),e.DomEventFactory.newEvent=function(t,i){var n=t.type;return n==e.TouchEvent.TOUCHSTART||n==e.TouchEvent.TOUCHMOVE||n==e.TouchEvent.TOUCHEND||n==e.TouchEvent.TOUCHCANCEL?new e.TouchEvent(t):n==e.KeyboardEvent.KEYDOWN||n==e.KeyboardEvent.KEYUP||n==e.KeyboardEvent.KEYPRESS?new e.KeyboardEvent(t):(i._nativeEvent!=t&&(i._nativeEvent=t,n==y.FOCUS||n==y.FOCUSIN||n==y.FOCUSOUT||n==y.BLUR?i._logicalEvent=new y(t):i._logicalEvent=new e.MouseEvent(t)),i._logicalEvent)},e.DomEventFactory.generateMouseEventFromKeyboardEvent=function(t,i,n,o,r,s){var a=null;if(document.createEvent){a=document.createEvent("MouseEvents");var l=i.stageToPageCoords(r,s);a.initMouseEvent(n,!0,!0,window,1,l.x,l.y,l.x,l.y,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null)}if(a){var h=e.DomEventFactory.newEvent(a,i);return h.target=t.target,h}return null},e.PanEvent=function(t,i,n,o,r,s){this.Init(e.PanEvent.TYPE),this.type=this.getType(),this._subtype=t,this._newX=i,this._newY=n,this._oldX=o,this._oldY=r,this._animator=s},e.Obj.createSubclass(e.PanEvent,e.BaseComponentEvent),e.PanEvent.TYPE="dvtPan",e.PanEvent.SUBTYPE_DRAG_PAN_BEGIN="dragPanBegin",e.PanEvent.SUBTYPE_DRAG_PAN_END="dragPanEnd",e.PanEvent.SUBTYPE_PANNED="panned",e.PanEvent.SUBTYPE_PANNING="panning",e.PanEvent.SUBTYPE_ELASTIC_ANIM_BEGIN="elasticAnimBegin",e.PanEvent.SUBTYPE_ELASTIC_ANIM_END="elasticAnimEnd",e.PanEvent.prototype.getSubType=function(){return this._subtype},e.PanEvent.prototype.getNewX=function(){return this._newX},e.PanEvent.prototype.getNewY=function(){return this._newY},e.PanEvent.prototype.getOldX=function(){return this._oldX},e.PanEvent.prototype.getOldY=function(){return this._oldY},e.PanEvent.prototype.getAnimator=function(){return this._animator},e.ZoomEvent=function(t,i,n,o,r,s,a,l){this.Init(e.ZoomEvent.TYPE),this.type=this.getType(),this._subtype=t,this._newZoom=i,this._oldZoom=n,this._animator=o,this._zoomToFitBounds=r,this._centerPoint=s,this._tx=a,this._ty=l},e.Obj.createSubclass(e.ZoomEvent,e.BaseComponentEvent),e.ZoomEvent.TYPE="dvtZoom",e.ZoomEvent.SUBTYPE_ZOOMED="zoomed",e.ZoomEvent.SUBTYPE_ZOOMING="zooming",e.ZoomEvent.SUBTYPE_ZOOM_END="zoomEnd",e.ZoomEvent.SUBTYPE_DRAG_ZOOM_BEGIN="dragZoomBegin",e.ZoomEvent.SUBTYPE_DRAG_ZOOM_END="dragZoomEnd",e.ZoomEvent.SUBTYPE_ZOOM_AND_CENTER="zoomAndCenter",e.ZoomEvent.SUBTYPE_ZOOM_TO_FIT_CALC_BOUNDS="zoomToFitCalcBounds",e.ZoomEvent.SUBTYPE_ZOOM_TO_FIT_BEGIN="zoomToFitBegin",e.ZoomEvent.SUBTYPE_ZOOM_TO_FIT_END="zoomToFitEnd",e.ZoomEvent.SUBTYPE_ELASTIC_ANIM_BEGIN="elasticAnimBegin",e.ZoomEvent.SUBTYPE_ELASTIC_ANIM_END="elasticAnimEnd",e.ZoomEvent.SUBTYPE_ADJUST_PAN_CONSTRAINTS="adjustPanConstraints",e.ZoomEvent.prototype.getSubType=function(){return this._subtype},e.ZoomEvent.prototype.getNewZoom=function(){return this._newZoom},e.ZoomEvent.prototype.getOldZoom=function(){return this._oldZoom},e.ZoomEvent.prototype.getAnimator=function(){return this._animator},e.ZoomEvent.prototype.setZoomToFitBounds=function(t){this._zoomToFitBounds=t},e.ZoomEvent.prototype.getZoomToFitBounds=function(){return this._zoomToFitBounds},e.ZoomEvent.prototype.getCenterPoint=function(){return this._centerPoint},e.ZoomEvent.prototype.getTx=function(){return this._tx},e.ZoomEvent.prototype.getTy=function(){return this._ty};var S={};e.Obj.createSubclass(S,e.Obj),S.lineLinear=function(t){return t.join("L")},S.lineCardinalClosed=function(t,e){return t.length<3?S.lineLinear(t):t[0]+S.lineHermite((t.push(t[0]),t),S.lineCardinalTangents([t[t.length-2]].concat(t,[t[1]]),e))},S.lineCardinal=function(t,e){return t.length<3?S.lineLinear(t):t[0]+S.lineHermite(t,S.lineCardinalTangents(t,e))},S.lineHermite=function(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return S.lineLinear(t);var i=t.length!=e.length,n="",o=t[0],r=t[1],s=e[0],a=s,l=1;if(i&&(n+="Q"+Math.round(r[0]-2*s[0]/3)+","+Math.round(r[1]-2*s[1]/3)+","+Math.round(r[0])+","+Math.round(r[1]),o=t[1],l=2),e.length>1){a=e[1],r=t[l],l++,n+="C"+Math.round(o[0]+s[0])+","+Math.round(o[1]+s[1])+","+Math.round(r[0]-a[0])+","+Math.round(r[1]-a[1])+","+Math.round(r[0])+","+Math.round(r[1]);for(var h=2;h<e.length;h++,l++)r=t[l],a=e[h],n+="S"+Math.round(r[0]-a[0])+","+Math.round(r[1]-a[1])+","+Math.round(r[0])+","+Math.round(r[1])}if(i){var u=t[l];n+="Q"+Math.round(r[0]+2*a[0]/3)+","+Math.round(r[1]+2*a[1]/3)+","+Math.round(u[0])+","+Math.round(u[1])}return n},S.lineCardinalTangents=function(t,e){for(var i,n=[],o=(1-e)/2,r=t[0],s=t[1],a=1,l=t.length;++a<l;)i=r,r=s,s=t[a],n.push([o*(s[0]-i[0]),o*(s[1]-i[1])]);return n},S.lineSlope=function(t,e){return(e[1]-t[1])/(e[0]-t[0])},S.lineFiniteDifferences=function(t){for(var e=0,i=t.length-1,n=[],o=t[0],r=t[1],s=n[0]=S.lineSlope(o,r);++e<i;)n[e]=(s+(s=S.lineSlope(o=r,r=t[e+1])))/2;return n[e]=s,n},S.lineMonotoneTangents=function(t,e){e&&(t=S._rotatePoints(t));for(var i,n,o,r,s=[],a=S.lineFiniteDifferences(t),l=-1,h=t.length-1;++l<h;)i=S.lineSlope(t[l],t[l+1]),Math.abs(i)<1e-6?a[l]=a[l+1]=0:(n=a[l]/i,o=a[l+1]/i,r=n*n+o*o,r>9&&(r=3*i/Math.sqrt(r),a[l]=r*n,a[l+1]=r*o));for(l=-1;++l<=h;)r=(t[Math.min(h,l+1)][0]-t[Math.max(0,l-1)][0])/(6*(1+a[l]*a[l])),s.push([r||0,a[l]*r||0]);return e&&(s=S._rotatePoints(s)),s},S.lineMonotone=function(t,e){return t.length<3?S.lineLinear(t):t[0]+S.lineHermite(t,S.lineMonotoneTangents(t,e))},S._rotatePoints=function(t){for(var e=[],i=0;i<t.length;i++)e.push([t[i][1],t[i][0]]);return e},e.DisplayableUtils=function(){},e.Obj.createSubclass(e.DisplayableUtils,e.Obj),e.DisplayableUtils.getDimensionsForced=function(t,e){var i,n=e.getParent();n&&(i=n.getChildIndex(e));var o=t.getStage();o.addChild(e);var r=e.getDimensions();return o.removeChild(e),n&&n.addChildAt(e,i),r},e.DisplayableUtils.getDimForced=function(t,i){if(i._dim||!t)return i._dim;var n=e.DisplayableUtils.getDimensionsForced(t,i);return e.DisplayableUtils._setDimForced(i,n),n},e.DisplayableUtils._setDimForced=function(t,e){t._dim=e},e.DisplayableUtils.isAncestor=function(t,i){for(var n=i;n;){if(n==t)return!0;n instanceof e.Container&&(n=n.getParent())}return!1},e.PathUtils={},e.Obj.createSubclass(e.PathUtils,e.Obj),e.PathUtils.SPLINE_TYPE_MONOTONE_VERTICAL="mv",e.PathUtils.SPLINE_TYPE_MONOTONE_HORIZONTAL="mh",e.PathUtils.SPLINE_TYPE_CARDINAL_CLOSED="cc",e.PathUtils.SPLINE_TYPE_CARDINAL="c",e.PathUtils._MIN_CORNER_RADIUS=2.5,e.PathUtils.moveTo=function(t,i){return"M"+e.ToolkitUtils.roundDecimal(t)+","+e.ToolkitUtils.roundDecimal(i)},e.PathUtils.lineTo=function(t,i){return"L"+e.ToolkitUtils.roundDecimal(t)+","+e.ToolkitUtils.roundDecimal(i)},e.PathUtils.quadTo=function(t,i,n,o){return"Q"+e.ToolkitUtils.roundDecimal(t)+","+e.ToolkitUtils.roundDecimal(i)+","+e.ToolkitUtils.roundDecimal(n)+","+e.ToolkitUtils.roundDecimal(o)},e.PathUtils.horizontalLineTo=function(t){return"H"+e.ToolkitUtils.roundDecimal(t)},e.PathUtils.verticalLineTo=function(t){return"V"+e.ToolkitUtils.roundDecimal(t)},e.PathUtils.cubicTo=function(t,i,n,o,r,s){return"C"+e.ToolkitUtils.roundDecimal(t)+","+e.ToolkitUtils.roundDecimal(i)+","+e.ToolkitUtils.roundDecimal(n)+","+e.ToolkitUtils.roundDecimal(o)+","+e.ToolkitUtils.roundDecimal(r)+","+e.ToolkitUtils.roundDecimal(s)},e.PathUtils.arcTo=function(t,i,n,o,r,s){var a="A"+e.ToolkitUtils.roundDecimal(t)+","+e.ToolkitUtils.roundDecimal(i)+",0,";return a+=n>Math.PI?"1,":"0,",a+=o+","+e.ToolkitUtils.roundDecimal(r)+","+e.ToolkitUtils.roundDecimal(s)},e.PathUtils.closePath=function(){return"Z"},e.PathUtils.roundedRectangle=function(t,i,n,o,r,s,a,l){return e.PathUtils._roundedRectangle(t,i,n,o,r,r,s,s,a,a,l,l)},e.PathUtils.rectangleWithBorderRadius=function(t,i,n,o,r,s,a){var l=a,h=a,u=a,d=a,c=a,p=a,_=a,g=a;if(r)if(r.indexOf("/")!=-1){var m=r.split("/"),f=e.StringUtils.trim(m[0]).split(/\s+/),y=e.StringUtils.trim(m[1]).split(/\s+/);1==f.length?l=u=c=_=f[0]:2==f.length?(l=c=f[0],u=_=f[1]):3==f.length?(l=f[0],u=_=f[1],c=f[2]):4==f.length&&(l=f[0],u=f[1],c=f[2],_=f[3]),1==y.length?h=d=p=g=y[0]:2==y.length?(h=p=y[0],d=g=y[1]):3==y.length?(h=y[0],d=g=y[1],p=y[2]):4==y.length&&(h=y[0],d=y[1],p=y[2],g=y[3])}else if("auto"!=r){var v=e.StringUtils.trim(r).split(/\s+/);1==v.length?l=u=c=_=h=d=p=g=v[0]:2==v.length?(l=c=h=p=v[0],u=_=d=g=v[1]):3==v.length?(l=h=v[0],u=_=d=g=v[1],c=p=v[2]):4==v.length&&(l=h=v[0],u=d=v[1],c=p=v[2],_=g=v[3])}return r&&"0"!=r?e.PathUtils._roundedRectangle(t,i,n,o,e.PathUtils._parseBorderRadiusItem(l,s),e.PathUtils._parseBorderRadiusItem(h,s),e.PathUtils._parseBorderRadiusItem(u,s),e.PathUtils._parseBorderRadiusItem(d,s),e.PathUtils._parseBorderRadiusItem(c,s),e.PathUtils._parseBorderRadiusItem(p,s),e.PathUtils._parseBorderRadiusItem(_,s),e.PathUtils._parseBorderRadiusItem(g,s)):e.PathUtils._rectangle(t,i,n,o)},e.PathUtils._parseBorderRadiusItem=function(t,i){var n=Math.min(parseFloat(t),i/2);return t.indexOf("%")!=-1&&(n=.01*Math.min(50,parseFloat(t))*i),n<e.PathUtils._MIN_CORNER_RADIUS?0:n},e.PathUtils._roundedRectangle=function(t,i,n,o,r,s,a,l,h,u,d,c){s=Math.min(s,.5*o),l=Math.min(l,.5*o),u=Math.min(u,.5*o),c=Math.min(c,.5*o),r=Math.min(r,.5*n),a=Math.min(a,.5*n),h=Math.min(h,.5*n),d=Math.min(d,.5*n);var p=e.PathUtils.moveTo(t+r,i)+e.PathUtils.lineTo(t+n-a,i)+e.PathUtils.arcTo(a,l,Math.PI/2,1,t+n,i+l)+e.PathUtils.lineTo(t+n,i+o-u)+e.PathUtils.arcTo(h,u,Math.PI/2,1,t+n-h,i+o)+e.PathUtils.lineTo(t+d,i+o)+e.PathUtils.arcTo(d,c,Math.PI/2,1,t,i+o-c)+e.PathUtils.lineTo(t,i+s)+e.PathUtils.arcTo(r,s,Math.PI/2,1,t+r,i)+e.PathUtils.closePath();return p},e.PathUtils.polyline=function(t,i){if(t.length<2)return"";for(var n=i?e.PathUtils.lineTo(t[0],t[1]):e.PathUtils.moveTo(t[0],t[1]),o=2;o<t.length;o+=2)n+=e.PathUtils.lineTo(t[o],t[o+1]);return n},e.PathUtils.curveThroughPoints=function(t,i,n){if(0==t.length)return"";for(var o=[],r=0;r<t.length;r+=2)o.push([t[r],t[r+1]]);var s=i?"L":"M";return n==e.PathUtils.SPLINE_TYPE_MONOTONE_VERTICAL?s+S.lineMonotone(o,!1):n==e.PathUtils.SPLINE_TYPE_MONOTONE_HORIZONTAL?s+S.lineMonotone(o,!0):n==e.PathUtils.SPLINE_TYPE_CARDINAL_CLOSED?s+S.lineCardinalClosed(o,.7):s+S.lineCardinal(o,.7)},e.PathUtils.createPathArray=function(t){if(!t)return null;var e,i=t.replace(/([mlqhvzca])/gi,",$1,"),n=i.split(/[ ,]/g),o=n.length;for(e=0;e<o;e++){var r=n[e];r?isNaN(r)||(n[e]=parseFloat(r)):(n.splice(e,1),e--,o--)}return n},e.PathUtils.getDimensions=function(t){if(!t||!t.length)return new e.Rectangle;var i,n,o,r,s,a,l,h,u,d,c,p,_,g=t.length,m=!0,f=Number.MAX_VALUE,y=Number.MIN_VALUE,v=Number.MAX_VALUE,S=Number.MIN_VALUE,C=[];for(c=0;c<g;c++){r=!1;var E=0;switch(p=0,i=t[c]){case"m":r=!0;case"M":do s=t[c+1],a=t[c+2],m?m=!1:r&&(s+=n,a+=o),n=s,o=a,C[p++]=s,C[p++]=a,E++,c+=2;while(!isNaN(t[c+1]));break;case"c":r=!0;case"C":do s=t[c+1],a=t[c+2],l=t[c+3],h=t[c+4],u=t[c+5],d=t[c+6],r&&(s+=n,a+=o,l+=n,h+=o,u+=n,d+=o),n=u,o=d,C[p++]=u,C[p++]=d,E++,c+=6;while(!isNaN(t[c+1]));break;case"q":r=!0;case"Q":do s=t[c+1],a=t[c+2],l=t[c+3],h=t[c+4],r&&(s+=n,a+=o,l+=n,h+=o),n=l,o=h,C[p++]=l,C[p++]=h,E++,c+=4;while(!isNaN(t[c+1]));break;case"l":r=!0;case"L":do s=t[c+1],a=t[c+2],r&&(s+=n,a+=o),n=s,o=a,C[p++]=s,C[p++]=a,E++,c+=2;while(!isNaN(t[c+1]));break;case"h":r=!0;case"H":do s=t[c+1],r&&(s+=n),n=s,C[p++]=s,C[p++]=o,E++,c+=1;while(!isNaN(t[c+1]));break;case"v":r=!0;case"V":do a=t[c+1],r&&(a+=o),o=a,C[p++]=n,C[p++]=a,E++,c+=1;while(!isNaN(t[c+1]));break;case"z":case"Z":}for(p=0,_=0;_<E;_++)s=C[p++],a=C[p++],f=Math.min(f,s),y=Math.max(y,s),v=Math.min(v,a),S=Math.max(S,a)}return new e.Rectangle(f,v,Math.abs(y-f),Math.abs(S-v))},e.PathUtils.getPathString=function(t){for(var e,i="",n=t.length,o=0;o<n;o++)e=t[o],void 0!==e&&null!==e&&(i+=(o>0?" ":"")+t[o]);return i},e.PathUtils.transformPath=function(t,i,n,o,r){var s="";if(t){for(var a=t.match(/[a-z][^a-z]*/gi),l=0;l<a.length;l++){var h=a[l],u=h.charAt(0),d=u===u.toUpperCase();s+=u+" ";var c=h.substring(1);if(c=c.replace(/,/g," "),c=c.replace(/^\s+|\s+$/g,""),c.length>0){var p=c.split(/\s+/g);if("A"===u.toUpperCase())for(var _=0;_<p.length;_+=7)s+=e.ToolkitUtils.roundDecimal(parseFloat(p[_])*o)+" ",s+=e.ToolkitUtils.roundDecimal(parseFloat(p[_+1])*r)+" ",s+=e.ToolkitUtils.roundDecimal(p[_+2])+" ",s+=e.ToolkitUtils.roundDecimal(p[_+3])+" ",s+=e.ToolkitUtils.roundDecimal(p[_+4])+" ",s+=e.ToolkitUtils.roundDecimal(parseFloat(p[_+5])*o+(d?i:0))+" ",s+=e.ToolkitUtils.roundDecimal(parseFloat(p[_+6])*r+(d?n:0))+" ";else{var g=[],m=[];"H"===u.toUpperCase()?(g.push(o),m.push(d?i:0)):"V"===u.toUpperCase()?(g.push(r),m.push(d?n:0)):(g.push(o),g.push(r),m.push(d?i:0),m.push(d?n:0));for(var _=0;_<p.length;_++){var f=g[_%g.length],y=m[_%m.length];s+=e.ToolkitUtils.roundDecimal(parseFloat(p[_])*f+y)+" "}}}}return s}},e.PathUtils._fitsInScale=function(t,e,i){return Math.abs(t)>i||Math.abs(e)>i},e.PathUtils.simplifyPath=function(t,i){for(var n,o,r="",s="",a=0,l=0,h=0,u=0,d=0,c=0;c<t.length;c++)if(isNaN(t[c]))n=t[c],"Z"!=n&&"z"!=n||(o=n,s+=n,d>0&&(r+=s,h=0,u=0),s="",d=0,a=0,l=0);else switch(n){case"M":h=0,u=0;case"m":h+=t[c],u+=t[c+1],s=s+n+h+" "+u,o=n,c++;break;case"l":a+=t[c],l+=t[c+1],e.PathUtils._fitsInScale(a,l,i)&&(o!=n?(o=n,s+=n):s+=" ",s=s+a+" "+l,a=0,l=0,d++),c++;break;case"h":case"v":"h"==n?a+=t[c]:l+=t[c],e.PathUtils._fitsInScale(a,l,i)&&(0!=a&&0!=l?("l"!=o?(o="l",s+="l"):s+=" ",s=s+a+" "+l):(o=n,s=s+n+("h"==n?a:l)),a=0,l=0,d++)}return r},e.PathUtils._rectangle=function(t,i,n,o){var r=e.PathUtils.moveTo(t,i)+e.PathUtils.horizontalLineTo(t+n)+e.PathUtils.verticalLineTo(i+o)+e.PathUtils.horizontalLineTo(t)+e.PathUtils.closePath();return r},e.MarkerGradient=function(){},e.Obj.createSubclass(e.MarkerGradient,e.Obj),e.MarkerGradient.createMarkerGradient=function(t,i,n){var o=[],r=[],s=[n,n,n,n],a=null,l=i.getType(),h=e.DisplayableUtils.getDimForced(i.getCtx(),i),u=h.getCenter(),d=Math.min(h.w,h.h);if(l!=e.SimpleMarker.HUMAN){r=[0,.5,.75,1];var c=e.ColorUtils.getBrighter(t,.2),p=e.ColorUtils.getBrighter(t,.1),_=e.ColorUtils.getDarker(t,.2),g=d/2,m=u.x,f=u.y,o=[e.ColorUtils.getPound(c),e.ColorUtils.getPound(p),t,e.ColorUtils.getPound(_)],y=new e.Rectangle(-g,-g,2*g,2*g),v=[y.x,y.y,y.w,y.h];a=new e.RadialGradientFill(o,s,r,m,f,g,v)}else{r=[0,.3,.7,1];var c=e.ColorUtils.getBrighter(t,.2),p=e.ColorUtils.getDarker(t,.1),_=e.ColorUtils.getDarker(t,.2),o=[e.ColorUtils.getPound(c),e.ColorUtils.getPound(p),t,e.ColorUtils.getPound(_)],y=new e.Rectangle(-d/2,-d/2,d,d),v=[y.x,y.y,y.w,y.h];a=new e.LinearGradientFill(135,o,s,r,v)}return a},e.PolygonUtils={},e.Obj.createSubclass(e.PolygonUtils,e.Obj),e.PolygonUtils.getDimensions=function(t){if(!t||0===t.length)return new e.Rectangle;for(var i,n,o=Number.MAX_VALUE,r=Number.MIN_VALUE,s=Number.MAX_VALUE,a=Number.MIN_VALUE,l=t.length,h=0;h<l;h++)i=t[h++],n=t[h],o=Math.min(o,i),r=Math.max(r,i),s=Math.min(s,n),a=Math.max(a,n);return new e.Rectangle(o,s,Math.abs(r-o),Math.abs(a-s))},e.PolygonUtils.getRegularPolygonPoints=function(t,e,i,n,o,r){for(var s,a=[],l=0;l<i;l++)s=o+l/i*2*Math.PI*(0==r?-1:1),a.push(t+n*Math.sin(s),e-n*Math.cos(s));return a},e.PolygonUtils.scale=function(t,e,i){for(var n=[],o=0;o<t.length-1;o+=2)n.push(t[o]*e),n.push(t[o+1]*i);return n},e.PolygonUtils.translate=function(t,e,i){for(var n=[],o=0;o<t.length-1;o+=2)n.push(t[o]+e),n.push(t[o+1]+i);return n},e.TextUtils={},e.Obj.createSubclass(e.TextUtils,e.Obj),e.TextUtils._cachedTextDimensions={},e.TextUtils.EMPTY_TEXT_BUFFER=2,e.TextUtils.getMaxTextDimensions=function(t){for(var i=0,n=0,o=0;o<t.length;o++)if(null!=t[o]){var r=t[o].getDimensions();i=Math.max(i,r.w),n=Math.max(n,r.h)}return new e.Dimension(i,n)},e.TextUtils.getTextStringDimensions=function(t,i,n){var o=e.OutputText.getCachedDimensions(i,n);if(null!=o)return o;var r=new e.OutputText(t,i);return r.setCSSStyle(n),r.getDimensions()},e.TextUtils.getTextWidth=function(t){return t.getDimensions().w},e.TextUtils.getTextStringWidth=function(t,i,n){return e.TextUtils.getTextStringDimensions(t,i,n).w},e.TextUtils.getTextHeight=function(t){return e.TextUtils.guessTextDimensions(t).h},e.TextUtils.getTextStringHeight=function(t,i){return e.TextUtils._getRepresentativeDimensions(t,i).h},e.TextUtils.guessTextDimensions=function(t,i){var n=t.getTextString(),o=e.TextUtils._getRepresentativeDimensions(t.getCtx(),t.getCSSStyle()),r=o.w*e.TextUtils._getTextLength(n);i=isNaN(i)||null==i?1:i;var s=Math.min(.3*r,o.w*(.3*i+1));return t instanceof e.MultilineText||t instanceof e.BackgroundMultilineText?{w:r,h:o.h*t.getLineCount(),wMin:s}:{w:r,h:o.h,wMin:s}},e.TextUtils.fitText=function(t,i,n,o,r){r=isNaN(r)||null==r?1:r;var s=t.getTextString(),a=e.TextUtils._guessFit(t,i,n,o,r);if(1==a)return o.addChild(t),!0;if(0==a){var l=t.getParent();return l&&l.removeChild(t),!1}return o.addChild(t),t instanceof e.MultilineText||t instanceof e.BackgroundMultilineText?t.__fitText(i,n,r):(t instanceof e.OutputText||t instanceof e.BackgroundOutputText?e.TextUtils._truncateOutputText(t,i,r):t.setMaxWidth(i,r),""==t.getTextString()?(o.removeChild(t),t.setTextString(s),!1):(t.getTextString()!=s&&t.setUntruncatedTextString(s),!0))},e.TextUtils.renderEmptyText=function(t,i,n,o,r){var s=new e.OutputText(t.getCtx(),i,n.x+n.w/2,n.y+n.h/2);r&&s.setCSSStyle(r),s.alignCenter(),s.alignMiddle();var a=n.w-2*e.TextUtils.EMPTY_TEXT_BUFFER;return e.TextUtils.fitText(s,a,1/0,t,0)&&(s.isTruncated()&&o.associate(s,new e.SimpleObjPeer(s.getUntruncatedTextString())),s.setAriaProperty("hidden",null)),s},e.TextUtils.centerTextVertically=function(t,i){if(e.Agent.isPlatformIE())t.setY(i),t.alignMiddle();else{var n=0;t instanceof e.OutputText?n=e.TextUtils.getTextHeight(t):t instanceof e.MultilineText&&(n=t.getDimensions().h),t.setY(i-n/2)}},e.TextUtils._guessFit=function(t,i,n,o,r){if(t instanceof e.MultilineText)return null;var s=e.TextUtils.guessTextDimensions(t,r);return!(s.h>n||s.wMin>i&&e.TextUtils._getTextLength(t.getTextString())>3)&&(s.w<i||null)},e.TextUtils._truncateOutputText=function(t,i,n){if(i<=0)return void t.setTextString("");var o=t.measureDimensions();if(!(o.w<=i)){var r=t.getTextString(),s=r.length,a=o.w/e.TextUtils._getTextLength(r),l=Math.max(Math.floor(i/a)-2,n),h=r.substring(0,l)+e.OutputText.ELLIPSIS;t.setTextString(h),o=t.measureDimensions();for(var u=h,d=o;o.w<i&&!(l>=r.length);){var c=i-o.w,p=Math.min(s-l,Math.max(Math.floor(c/a),1));if(l+=p,h=r.substring(0,l)+e.OutputText.ELLIPSIS,t.setTextString(h),o=t.measureDimensions(),1==p&&o.w>i){t.setTextString(u),o=d;break}u=h,d=o}for(;o.w>i;){if(l<=n){t.setTextString("");break}l-=1,h=r.substring(0,l)+e.OutputText.ELLIPSIS,t.setTextString(h),o=t.measureDimensions()}}},e.TextUtils._getTextLength=function(t){return t=t.replace(/[\u200A\u200B\u200C\u200D\u200E\u200F\uFEFF]/g,""),t.length},e.TextUtils._getRepresentativeDimensions=function(t,i){var n=null!=i?i.hashCodeForTextMeasurement():"",o=e.TextUtils._cachedTextDimensions[n];if(null==o){var r=new e.OutputText(t,e.OutputText.REPRESENTATIVE_TEXT);r.alignAuto(),r.setCSSStyle(i);var s=r.measureDimensions();o={x:s.x,y:s.y,w:.5*s.w,h:s.h},e.TextUtils._cachedTextDimensions[n]=o}return o},e.TextUtils.getBaselineTranslation=function(t){var i=t.getVertAlignment();if(i!=e.OutputText.V_ALIGN_AUTO){var n=e.TextUtils._getRepresentativeDimensions(t.getCtx(),t.getCSSStyle());if(i==e.OutputText.V_ALIGN_TOP)return-n.y;if(i==e.OutputText.V_ALIGN_MIDDLE)return-n.y-n.h/2;if(i==e.OutputText.V_ALIGN_BOTTOM)return-n.y-n.h}return 0},e.SvgShapeUtils=function(){},e.Obj.createSubclass(e.SvgShapeUtils,e.Obj),e.SvgShapeUtils._uniqueSeed=0,e.SvgShapeUtils.addClipPath=function(t,i){var n=t.getId();if(!n)return!1;var o=i.getDefs();if(!o)return!1;for(var r=o.childNodes,s=r.length,a=0;a<s;a++){var l=r[a];if(l.id===n)return!0}var h=e.SvgShapeUtils.createElement("clipPath",n);i.appendDefs(h);for(var u=t.getRegions(),a=0;a<u.length;a++){var d=u[a];if(d){var c=null;d.type===e.ClipPath.RECT?(c=e.SvgShapeUtils.createElement("rect"),e.ToolkitUtils.setAttrNullNS(c,"x",d.x),e.ToolkitUtils.setAttrNullNS(c,"y",d.y),e.ToolkitUtils.setAttrNullNS(c,"width",d.w),e.ToolkitUtils.setAttrNullNS(c,"height",d.h),d.rx&&e.ToolkitUtils.setAttrNullNS(c,"rx",d.rx),d.ry&&e.ToolkitUtils.setAttrNullNS(c,"ry",d.ry)):d.type===e.ClipPath.PATH?(c=e.SvgShapeUtils.createElement("path"),e.ToolkitUtils.setAttrNullNS(c,"d",d.d)):d.type===e.ClipPath.POLYGON?(c=e.SvgShapeUtils.createElement("polygon"),e.ToolkitUtils.setAttrNullNS(c,"points",d.points)):d.type===e.ClipPath.ELLIPSE?(c=e.SvgShapeUtils.createElement("ellipse"),e.ToolkitUtils.setAttrNullNS(c,"cx",d.cx),e.ToolkitUtils.setAttrNullNS(c,"cy",d.cy),e.ToolkitUtils.setAttrNullNS(c,"rx",d.rx),e.ToolkitUtils.setAttrNullNS(c,"ry",d.ry)):d.type===e.ClipPath.CIRCLE&&(c=e.SvgShapeUtils.createElement("circle"),e.ToolkitUtils.setAttrNullNS(c,"cx",d.cx),e.ToolkitUtils.setAttrNullNS(c,"cy",d.cy),e.ToolkitUtils.setAttrNullNS(c,"r",d.r)),c&&e.ToolkitUtils.appendChildElem(h,c)}}return!0},e.SvgShapeUtils.addMask=function(t,i){var n=t.getId();if(!n)return!1;var o=i.getDefs();if(!o)return!1;for(var r=o.childNodes,s=r.length,a=0;a<s;a++){var l=r[a];if(l.id===n)return!0}var h=e.SvgShapeUtils.createElement("mask",n);i.appendDefs(h);var u=t.getGradient();e.SvgShapeUtils.addSpecialFill(u,i);var d=t.getBounds(),c=e.SvgShapeUtils.createElement("rect");return e.ToolkitUtils.setAttrNullNS(c,"x",d.x),e.ToolkitUtils.setAttrNullNS(c,"y",d.y),e.ToolkitUtils.setAttrNullNS(c,"width",d.w),e.ToolkitUtils.setAttrNullNS(c,"height",d.h),e.ToolkitUtils.setAttrNullNS(c,"fill",e.ToolkitUtils.getUrlById(u.getId())),e.ToolkitUtils.appendChildElem(h,c),!0},e.SvgShapeUtils.addSpecialFill=function(t,i){var n;if(t.isLocked()?n=t.getId():(n=t.getId(),n||(n=t instanceof e.PatternFill?e.SvgShapeUtils.getUniqueId("pat"):e.SvgShapeUtils.getUniqueId("Gr"),t.setId(n))),!t._defPresent){var o=t._defElem;o||(t instanceof e.GradientFill?o=W.createElem(t,n):t instanceof e.ImageFill?o=z.createElem(t,n):t instanceof e.PatternFill&&(o=K.createElem(t,n))),t._defElem=o,i.appendDefs(o),t._defPresent=!0}},e.SvgShapeUtils.addSpecialStroke=function(t,i){var n;if(t.isLocked()?n=t.getId():(n=t.getId(),n||(n=e.SvgShapeUtils.getUniqueId("Gr"),t.setId(n))),!t._defPresent){var o=t._defElem;o||(o=W.createElem(t,n)),t._defElem=o,i.appendDefs(o),t._defPresent=!0}},e.SvgShapeUtils.createElement=function(t,i){var n=document.createElementNS(e.ToolkitUtils.SVG_NS,t);return i&&e.ToolkitUtils.setAttrNullNS(n,"id",i),n},e.SvgShapeUtils.getUniqueId=function(t){return(t?t:"$")+e.SvgShapeUtils._uniqueSeed++},e.SvgShapeUtils.convertPointsArray=function(t){for(var i=t.length,n="",o=0;o<i;o++)o>0&&(n+=" "),n+=e.ToolkitUtils.roundDecimal(t[o]);return n},e.Displayable=function(){},e.Obj.createSubclass(e.Displayable,e.Obj),e.Displayable._ATTRS_TRANSFERABLE_TO_OUTER=["clip-path"],e.Displayable._CREATE_EVENT_TYPE_MAP={click:e.MouseEvent.CLICK,mouseover:e.MouseEvent.MOUSEOVER,mouseout:e.MouseEvent.MOUSEOUT,mousemove:e.MouseEvent.MOUSEMOVE,keydown:e.KeyboardEvent.KEYDOWN,keyup:e.KeyboardEvent.KEYUP,keypress:e.KeyboardEvent.KEYPRESS},e.Displayable.SET_ID_ON_DOM=!1,e.Displayable.prototype.Init=function(t,i,n){this._context=t,this._elem=e.SvgShapeUtils.createElement(i),this._elem._obj=this,this.setId(n),this._bVisible=!0,this._pixelHinting=!1,this._cursor=null,this._bMouseEnabled=!0,this._alpha=1,this._matrix=null,this._ariaProperties={},this._properties={}},e.Displayable.prototype.getCtx=function(){return this._context},e.Displayable.prototype.getImpl=function(){return this},e.Displayable.prototype.getObj=function(){return this},e.Displayable.prototype.getElem=function(){return this._elem},e.Displayable.prototype.getOuterElem=function(){return this._outerElem?this._outerElem:this.getElem()},e.Displayable.prototype.getId=function(){return this._id},e.Displayable.prototype.setId=function(t,i){this._id!==t&&(t&&0===t.length&&(t=null),this._id=t,(e.Displayable.SET_ID_ON_DOM||i)&&(t?e.ToolkitUtils.setAttrNullNS(this.getOuterElem(),"id",t):e.ToolkitUtils.removeAttrNullNS(this.getOuterElem(),"id")))},e.Displayable.prototype.getParent=function(){return this._parent},e.Displayable.prototype.setParent=function(t){this._parent=t},e.Displayable.prototype.isDescendantOf=function(t){return!(!t||!this.getParent())&&(this.getParent()==t||this.getParent().isDescendantOf(t))},e.Displayable.prototype.getPixelHinting=function(){return this._pixelHinting},e.Displayable.prototype.setPixelHinting=function(t){this._pixelHinting=t,t?e.ToolkitUtils.setAttrNullNS(this._elem,"shape-rendering","crispEdges"):e.ToolkitUtils.removeAttrNullNS(this._elem,"shape-rendering")},e.Displayable.prototype.getVisible=function(){return this._bVisible},e.Displayable.prototype.setVisible=function(t){if(this._bVisible!==t){this._bVisible=t;var i=this.getElem();t?e.ToolkitUtils.removeAttrNullNS(i,"visibility"):e.ToolkitUtils.setAttrNullNS(i,"visibility","hidden")}},e.Displayable.prototype.setClipPath=function(t){if(t){if(this.ClipPathId==t.getId())return;this.ClipPathId&&this._context.decreaseGlobalDefReference(this.ClipPathId),this.ClipPathId=t.getId(),this._context.increaseGlobalDefReference(this.ClipPathId),!this._outerElem&&this._matrix&&this._createOuterGroupElem();var i=t.getId();if(i){var n=this.getCtx();e.SvgShapeUtils.addClipPath(t,n)&&e.ToolkitUtils.setAttrNullNS(this.getOuterElem(),"clip-path",e.ToolkitUtils.getUrlById(i))}}else if(!t&&this.ClipPathId)return this._context.decreaseGlobalDefReference(this.ClipPathId),this.ClipPathId=null,void e.ToolkitUtils.removeAttrNullNS(this.getOuterElem(),"clip-path")},e.Displayable.prototype.setMask=function(t){if(t){if(this.MaskId==t.getId())return;this.MaskId&&this._context.decreaseGlobalDefReference(this.MaskId),this.MaskId=t.getId(),this._context.increaseGlobalDefReference(this.MaskId),!this._outerElem&&this._matrix&&this._createOuterGroupElem();var i=t.getId();if(i){var n=this.getCtx();e.SvgShapeUtils.addMask(t,n)&&e.ToolkitUtils.setAttrNullNS(this.getOuterElem(),"mask",e.ToolkitUtils.getUrlById(i))}}else if(!t&&this.MaskId)return this._context.decreaseGlobalDefReference(this.MaskId),this.MaskId=null,void e.ToolkitUtils.removeAttrNullNS(this.getOuterElem(),"mask")},e.Displayable.prototype.ConvertCoordSpaceRect=function(t,i){if(!i||i===this)return t;var n=this.localToStage(new e.Point(t.x,t.y)),o=this.localToStage(new e.Point(t.x+t.w,t.y+t.h)),r=i.stageToLocal(n),s=i.stageToLocal(o);return new e.Rectangle(Math.min(r.x,s.x),Math.min(r.y,s.y),Math.abs(s.x-r.x),Math.abs(s.y-r.y))},e.Displayable.prototype.GetSvgDimensions=function(){try{var t=this.getElem().getBBox()}catch(t){return e.Agent.isEnvironmentTest()&&print("Error in dvt.Displayable.prototype.GetSvgDimensions: "+t),null}return new e.Rectangle(t.x,t.y,t.width,t.height)},e.Displayable.prototype.getDimensions=function(t){var e=this.GetSvgDimensions();return this.ConvertCoordSpaceRect(e,t)},e.Displayable.prototype.getDimensionsWithStroke=function(t){var e=this.GetDimensionsWithStroke();return this.ConvertCoordSpaceRect(e,t)},e.Displayable.prototype.GetDimensionsWithStroke=function(t){var e=this.GetElemDimensionsWithStroke();return t&&t!==this?this.ConvertCoordSpaceRect(e,t):e},e.Displayable.prototype.GetElemDimensionsWithStroke=function(){return this.GetSvgDimensions()},e.Displayable.HasAttributes=function(t,i){if(i)for(var n=i.length,o=0;o<n;o++)if(e.ToolkitUtils.getAttrNullNS(t,i[o]))return!0;return!1},e.Displayable.TransferAttributes=function(t,i,n){if(n)for(var o,r,s=n.length,a=0;a<s;a++)o=n[a],
r=e.ToolkitUtils.getAttrNullNS(t,o),r&&(e.ToolkitUtils.removeAttrNullNS(t,o),e.ToolkitUtils.setAttrNullNS(i,o,r),e.Agent.isPlatformIE()&&e.ToolkitUtils.setAttrNullNS(t,o,null))},e.Displayable.prototype._createOuterGroupElem=function(){if(!this._outerElem){var t=this._id?this._id+"_outer":null;this._outerElem=e.SvgShapeUtils.createElement("g",t);var i=this.getParent();if(i){var n=i.getElem();n.replaceChild(this._outerElem,this.getElem())}e.ToolkitUtils.appendChildElem(this._outerElem,this.getElem()),e.Displayable.TransferAttributes(this.getElem(),this._outerElem,e.Displayable._ATTRS_TRANSFERABLE_TO_OUTER)}},e.Displayable.prototype.getCSSStyle=function(){return this._cssStyle},e.Displayable.prototype.setCSSStyle=function(t){this._cssStyle=t},e.Displayable.prototype.setCursor=function(t){this._cursor=t,e.Agent.isEnvironmentBatik()||(t?e.ToolkitUtils.setAttrNullNS(this.getElem(),"cursor",t):e.ToolkitUtils.removeAttrNullNS(this.getElem(),"cursor"))},e.Displayable.prototype.getCursor=function(){return this._cursor},e.Displayable.prototype.setMouseEnabled=function(t){this._bMouseEnabled=t;var i=t?"visiblePainted":"none";e.ToolkitUtils.setAttrNullNS(this.getElem(),"pointer-events",i)},e.Displayable.prototype.isMouseEnabled=function(){return this._bMouseEnabled},e.Displayable.prototype.getAlpha=function(){return this._alpha},e.Displayable.prototype.setAlpha=function(t){t<1e-5&&(t=0),t!==this._alpha&&(this._alpha=t,e.ToolkitUtils.setAttrNullNS(this.getElem(),"opacity",this._alpha,1))},e.Displayable.prototype.applyAriaProperties=function(){if(e.Agent.deferAriaCreation()){this._ariaRole&&this._setAriaRole(this._ariaRole);for(var t in this._ariaProperties)this._setAriaProperty(t,this._ariaProperties[t])}},e.Displayable.prototype.setAriaRole=function(t){e.Agent.deferAriaCreation()||this._setAriaRole(t),this._ariaRole=t},e.Displayable.prototype._setAriaRole=function(t){var i=this.GetAriaElem();t?e.ToolkitUtils.setAttrNullNS(i,"role",t):e.ToolkitUtils.removeAttrNullNS(i,"role")},e.Displayable.prototype.getActiveElementId=function(){return this.getId()},e.Displayable.prototype.getAriaRole=function(){return this._ariaRole},e.Displayable.prototype.GetAriaElem=function(){return this.getElem()},e.Displayable.prototype.setAriaProperty=function(t,i){t&&(e.Agent.deferAriaCreation()||this._setAriaProperty(t,i),this._ariaProperties[t]=i)},e.Displayable.prototype._setAriaProperty=function(t,i){var n=this.GetAriaElem();null!=i&&""!==i?("label"==t&&(i=e.StringUtils.processAriaLabel(i)),e.ToolkitUtils.setAttrNullNS(n,"aria-"+t,i)):e.ToolkitUtils.removeAttrNullNS(n,"aria-"+t)},e.Displayable.prototype.getAriaProperty=function(t){return t?this._ariaProperties[t]:null},e.Displayable.prototype.stageToLocal=function(t){for(var e,i=this.getPathToStage(),n=t,o=i.length-1;o>=0;o--)e=i[o].getMatrix().clone(),e.invert(),n=e.transformPoint(n);return n},e.Displayable.prototype.localToStage=function(t){for(var e,i=this.getPathToStage(),n=t,o=0;o<i.length;o++)e=i[o].getMatrix(),n=e.transformPoint(n);return n},e.Displayable.prototype.getPathToStage=function(){for(var t=this,e=[];t;)e.push(t),t=t.getParent();return e},e.Displayable.prototype.removeFromParent=function(){this._parent&&this._parent.removeChild(this)},e.Displayable.prototype.destroy=function(){this.removeAllDrawEffects(),this.ClipPathId&&this.setClipPath(null)},e.Displayable.prototype.createCopy=function(){var t=new e.Container(this.getCtx(),"clonedContainer"),i=this.getElem().cloneNode(!0);return e.ToolkitUtils.appendChildElem(t.getElem(),i),this._disableEvents(i),t},e.Displayable.prototype._disableEvents=function(t){for(var i=t.firstChild;null!=i;)i.setAttributeNS&&(e.ToolkitUtils.setAttrNullNS(i,"pointer-events","none"),e.ToolkitUtils.setAttrNullNS(i,"id",null)),this._disableEvents(i),i=i.nextSibling},e.Displayable.prototype.dispatchNativeEvent=function(t){},e.Displayable.prototype.GetProperty=function(t){return this._properties[t]},e.Displayable.prototype.SetProperty=function(t,e){return e!==this._properties[t]&&(this._properties[t]=e),this},e.Displayable.prototype.SetSvgProperty=function(t,i,n){return i!==this._properties[t]&&(this._properties[t]=i,e.ToolkitUtils.setAttrNullNS(this._elem,t,i,n),this.SvgPropertyChanged(t)),this},e.Displayable.prototype.SvgPropertyChanged=function(t){},e.Displayable.generateAriaLabel=function(t,i){var n="",o=i&&i.length>0;if(t){var r=e.Bundle.getTranslatedString(e.Bundle.UTIL_PREFIX,"ARIA_LABEL_DESC_DELIMITER");n=t,o&&(n+=r)}if(o)for(var s=e.Bundle.getTranslatedString(e.Bundle.UTIL_PREFIX,"ARIA_LABEL_STATE_DELIMITER"),a=0;a<i.length;a++)n+=i[a],a!=i.length-1&&(n+=s);return n},e.Displayable.prototype.getNumDrawEffects=function(){return this._drawEffects?this._drawEffects.length:0},e.Displayable.prototype.addDrawEffect=function(t){this._drawEffects||(this._drawEffects=[]),t.__lock(),this._drawEffects.push(t),this._applyDrawEffects(this._drawEffects)},e.Displayable.prototype.addDrawEffectAt=function(t,e){this._drawEffects||(this._drawEffects=[]),t.__lock(),e>=this._drawEffects.length?this._drawEffects.push(t):this._drawEffects.splice(e,0,t),this._applyDrawEffects(this._drawEffects)},e.Displayable.prototype.removeDrawEffect=function(t){var e=this.getDrawEffectIndex(t);e>-1&&(this._drawEffects.splice(e,1),this._applyDrawEffects(this._drawEffects))},e.Displayable.prototype.removeDrawEffectAt=function(t){if(this._drawEffects){var e=this._drawEffects.length;t>=0&&t<e&&(this._drawEffects.splice(t,1),this._applyDrawEffects(this._drawEffects))}},e.Displayable.prototype.removeAllDrawEffects=function(){this._drawEffects&&(this._drawEffects=null,this._applyDrawEffects(this._drawEffects))},e.Displayable.prototype.getDrawEffectIndex=function(t){if(this._drawEffects)for(var e=this._drawEffects.length,i=0;i<e;i++)if(t===this._drawEffects[i])return i;return-1},e.Displayable.prototype._applyDrawEffects=function(){var t=this._drawEffects;if(this._filter&&(e.ToolkitUtils.removeAttrNullNS(this.getOuterElem(),"filter"),this.getCtx().removeDefs(this._filter),this._filter=null),!this._outerElem&&this._matrix&&this._createOuterGroupElem(),t&&t.length>0&&(this._filter=Y.createFilter(t,this),this._filter)){this.getCtx().appendDefs(this._filter);var i=e.ToolkitUtils.getAttrNullNS(this._filter,"id");e.ToolkitUtils.setAttrNullNS(this.getOuterElem(),"filter",e.ToolkitUtils.getUrlById(i))}},e.Displayable.prototype.addEvtListener=function(t,e,i,n){var o=this._getListeners(t,i,!0);o.push(e),o.push(n),this._addListener(t,i)},e.Displayable.prototype.removeEvtListener=function(t,e,i,n){var o=this._getListeners(t,i,!1);if(o)for(var r=0;r<o.length;r+=2)if(o[r]===e&&o[r+1]===n){o.splice(r,2);break}o&&o.length<=0&&this._removeListener(t,i)},e.Displayable.prototype.dispatchDisplayableEvent=function(t,i){var n,o=e.Displayable._CREATE_EVENT_TYPE_MAP[t];if(e.MouseEvent.CLICK==o||e.MouseEvent.MOUSEOVER==o||e.MouseEvent.MOUSEOUT==o||e.MouseEvent.MOUSEMOVE==o){if(document.createEvent){n=this.getCtx();var r=this.getDimensions(),s=this.localToStage(new e.Point(r.x,r.y)),a=n.getStageAbsolutePosition(),l=new e.Point(a.x+s.x,a.y+s.y),h=document.createEvent("MouseEvents");h.initMouseEvent(o,!0,!0,window,1,l.x,l.y,l.x,l.y,!1,!1,!1,!1,0,null),this.getElem().dispatchEvent(h)}}else if((e.KeyboardEvent.KEYDOWN==o||e.KeyboardEvent.KEYUP==o||e.KeyboardEvent.KEYPRESS==o)&&document.createEvent){var u,d=document.createEvent("KeyboardEvent");i instanceof e.KeyboardEvent?(u=i.keyCode,this._ctrlKeyPressed=i.ctrlKey,this._shiftKeyPressed=i.shiftKey):(u=parseInt(i),void 0===this._ctrlKeyPressed&&(this._ctrlKeyPressed=!1),void 0===this._shiftKeyPressed&&(this._shiftKeyPressed=!1),u==e.KeyboardEvent.CONTROL?this._ctrlKeyPressed&&o==e.KeyboardEvent.KEYUP?this._ctrlKeyPressed=!1:this._ctrlKeyPressed||o!=e.KeyboardEvent.KEYDOWN||(this._ctrlKeyPressed=!0):u==e.KeyboardEvent.SHIFT&&(this._shiftKeyPressed&&o==e.KeyboardEvent.KEYUP?this._shiftKeyPressed=!1:this._shiftKeyPressed||o!=e.KeyboardEvent.KEYDOWN||(this._shiftKeyPressed=!0))),"undefined"!=typeof d.initKeyboardEvent?d.initKeyboardEvent(o,!0,!0,window,this._ctrlKeyPressed,!1,this._shiftKeyPressed,!1,u,u):d.initKeyEvent(o,!0,!0,window,this._ctrlKeyPressed,!1,!1,this._shiftKeyPressed,u,u);var c=e.DomEventFactory.newEvent(d);c.keyCode=u,c.ctrlKey=this._ctrlKeyPressed,c.shiftKey=this._shiftKeyPressed,n=this.getCtx();var p=n.getStage(),_=p.getSVGRoot().parentNode;e.HtmlKeyboardListenerUtils._bubbleListener.call(_,c)}},e.Displayable.prototype.AddElemListener=function(t,i,n){e.ToolkitUtils.addDomEventListener(this.getElem(),t,i,n),t==e.TouchEvent.TOUCHEND&&e.ToolkitUtils.addDomEventListener(this.getElem(),e.TouchEvent.TOUCHCANCEL,i,n)},e.Displayable.prototype.FireListener=function(t,e){var i=t.getType?t.getType():t.type,n=this._getListeners(i,e,!1);if(n)for(var o=0;o<n.length;o+=2){var r=n[o+1];n[o]&&n[o].call(r,t)}},e.Displayable.prototype.fireKeyboardListener=function(t,e){this.FireListener(t,e)},e.Displayable.prototype._getListeners=function(t,e,i){if(!this._listenerObj){if(!i)return null;this._listenerObj={}}var n=t+"_"+!!e,o=this._listenerObj[n];return!o&&i&&(o=[],this._listenerObj[n]=o),o},e.Displayable.prototype._addListener=function(t,i){var n=this._getListener(i);if(t==e.KeyboardEvent.KEYUP||t==e.KeyboardEvent.KEYDOWN||t==e.KeyboardEvent.KEYPRESS||t==y.FOCUS||t==y.FOCUSIN||t==y.FOCUSOUT||t==y.BLUR){var o=this.getCtx(),r=o.getStage(),s=r.getSVGRoot().parentNode;if(!s)return;s._obj||(s._obj=[]),e.ArrayUtils.getIndex(s._obj,this)==-1&&s._obj.push(this),n=e.HtmlKeyboardListenerUtils.getListener(i),e.ToolkitUtils.addDomEventListener(s,t,n,i)}else this.AddElemListener(t,n,i)},e.Displayable.prototype._removeListener=function(t,i){var n=this._getListener(i);if(t==e.KeyboardEvent.KEYUP||t==e.KeyboardEvent.KEYDOWN||t==e.KeyboardEvent.KEYPRESS||t==y.FOCUS||t==y.FOCUSIN||t==y.FOCUSOUT||t==y.BLUR){var o=this.getCtx().getStage().getSVGRoot().parentNode;e.ToolkitUtils.removeDomEventListener(o,t,n,i);var r=e.ArrayUtils.getIndex(o._obj,this);r!==-1&&o._obj.splice(r,1)}else e.ToolkitUtils.removeDomEventListener(this.getElem(),t,n,i)},e.Displayable.prototype._getListener=function(t){var e=this;return t?(this._captureClosure||(this._captureClosure=function(t){e._captureListener(t)}),this._captureClosure):(this._bubbleClosure||(this._bubbleClosure=function(t){e._bubbleListener(t)}),this._bubbleClosure)},e.Displayable.prototype._bubbleListener=function(t){if(e.Agent.isPlatformIE())if(t.type==e.MouseEvent.MOUSEOVER){if(this._bubbleHoverItem){if(this._bubbleHoverItem==t.target)return;var i=e.DomEventFactory.newEvent(t,this.getCtx());i.modifyEventForIE(e.MouseEvent.MOUSEOUT,this._bubbleHoverItem),this.FireListener(i,!1)}this._bubbleHoverItem=t.target}else t.type==e.MouseEvent.MOUSEOUT&&(this._bubbleHoverItem=null);var i=e.DomEventFactory.newEvent(t,this.getCtx());this.FireListener(i,!1)},e.Displayable.prototype._captureListener=function(t){if(e.Agent.isPlatformIE())if(t.type==e.MouseEvent.MOUSEOVER){if(this._captureHoverItem){if(this._captureHoverItem==t.target)return;var i=e.DomEventFactory.newEvent(t,this.getCtx());i.modifyEventForIE(e.MouseEvent.MOUSEOUT,this._captureHoverItem),this.FireListener(i,!0)}this._captureHoverItem=t.target}else t.type==e.MouseEvent.MOUSEOUT&&(this._captureHoverItem=null);var i=e.DomEventFactory.newEvent(t,this.getCtx());this.FireListener(i,!0)},e.Displayable.prototype.getFill=function(){return this.GetProperty("fill")},e.Displayable.prototype.setFill=function(t){if(this._manageDefinitions(this.GetProperty("fill"),t),!t)return e.ToolkitUtils.setAttrNullNS(this._elem,"fill","none"),e.ToolkitUtils.removeAttrNullNS(this._elem,"fill-opacity"),void this.SetProperty("fill",null);if(this.GetProperty("fill")!==t){if(this.SetProperty("fill",t),t instanceof e.GradientFill||t instanceof e.ImageFill||t instanceof e.PatternFill)e.SvgShapeUtils.addSpecialFill(t,this.getCtx()),e.ToolkitUtils.setAttrNullNS(this._elem,"fill",e.ToolkitUtils.getUrlById(t.getId()));else{var i=e.ColorUtils.fixColorForPlatform(t.getColor(),t.getAlpha());i&&i.color&&(e.ToolkitUtils.setAttrNullNS(this._elem,"fill",i.color),null!=i.alpha&&e.ToolkitUtils.setAttrNullNS(this._elem,"fill-opacity",i.alpha,1))}t.__lock(),this.UpdateSelectionEffect()}},e.Displayable.prototype.getClassName=function(){return this._className},e.Displayable.prototype.setClassName=function(t){return this._className&&!t?e.ToolkitUtils.removeAttrNullNS(this._elem,"class"):t&&e.ToolkitUtils.setAttrNullNS(this._elem,"class",t),this._className=t,this},e.Displayable.prototype.getStyle=function(){return this._style},e.Displayable.prototype.setStyle=function(t){return this._style&&!t?e.ToolkitUtils.removeAttrNullNS(this._elem,"style"):t&&e.ToolkitUtils.setAttrNullNS(this._elem,"style",e.CSSStyle.cssObjectToString(t),""),this._style=t,this},e.Displayable.prototype.setSolidFill=function(t,i){this.setFill(new e.SolidFill(t,i))},e.Displayable.prototype.setInvisibleFill=function(){this.setFill(e.SolidFill.invisibleFill())},e.Displayable.prototype.getStroke=function(){return this._stroke},e.Displayable.prototype.setStroke=function(t){if(this._manageDefinitions(this._stroke,t),this._stroke=t,!t)return e.ToolkitUtils.removeAttrNullNS(this._elem,"stroke"),e.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-opacity"),e.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-width"),e.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-dasharray"),e.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-dashoffset"),e.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-linejoin"),e.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-linecap"),void e.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-miterlimit");if(t instanceof e.GradientStroke){e.SvgShapeUtils.addSpecialStroke(t,this.getCtx()),e.ToolkitUtils.setAttrNullNS(this._elem,"stroke",e.ToolkitUtils.getUrlById(t.getId()));var i=t.getAlpha();null!=i&&e.ToolkitUtils.setAttrNullNS(this._elem,"stroke-opacity",i)}else{var n=e.ColorUtils.fixColorForPlatform(t.getColor(),t.getAlpha());n&&n.color?(e.ToolkitUtils.setAttrNullNS(this._elem,"stroke",n.color),null!=n.alpha&&e.ToolkitUtils.setAttrNullNS(this._elem,"stroke-opacity",n.alpha,1)):(e.ToolkitUtils.removeAttrNullNS(this._elem,"stroke"),e.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-opacity"))}e.ToolkitUtils.setAttrNullNS(this._elem,"stroke-width",t.getWidth(),1),t.isFixedWidth()&&e.ToolkitUtils.setAttrNullNS(this._elem,"vector-effect","non-scaling-stroke");var o=t.getType();o!==e.Stroke.SOLID?(t.getDash()&&e.ToolkitUtils.setAttrNullNS(this._elem,"stroke-dasharray",t.getDash()),t.getDashOffset()&&e.ToolkitUtils.setAttrNullNS(this._elem,"stroke-dashoffset",t.getDashOffset())):(e.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-dasharray"),e.ToolkitUtils.removeAttrNullNS(this._elem,"stroke-dashoffset"));var r=t.getLineJoin();r&&e.ToolkitUtils.setAttrNullNS(this._elem,"stroke-linejoin",r),r=t.getLineEnd(),r&&e.ToolkitUtils.setAttrNullNS(this._elem,"stroke-linecap",r),r=t.getMiterLimit(),r&&e.ToolkitUtils.setAttrNullNS(this._elem,"stroke-miterlimit",r),t.__lock()},e.Displayable.prototype.setSolidStroke=function(t,i,n){this.setStroke(new e.SolidStroke(t,i,n))},e.Displayable.prototype._manageDefinitions=function(t,e){t!=e&&(t&&(t._referenceCount--,0==t._referenceCount&&t._defElem&&(this.getCtx().removeDefs(t._defElem),t._defPresent=!1)),e&&(e._referenceCount||(e._referenceCount=0),e._referenceCount++))},e.Displayable.prototype.setTranslate=function(t,i){var n=this.getMatrix().clone(),o=n._decompose();null!=t&&(o[e.Matrix._DECOMP_TX]=t),null!=i&&(o[e.Matrix._DECOMP_TY]=i),n._recompose(o),this.setMatrix(n)},e.Displayable.prototype.getTranslateX=function(){var t=this.getMatrix();return t?t._decompose()[e.Matrix._DECOMP_TX]:0},e.Displayable.prototype.setTranslateX=function(t){var i=this.getMatrix().clone(),n=i._decompose();n[e.Matrix._DECOMP_TX]=t,i._recompose(n),this.setMatrix(i)},e.Displayable.prototype.getTranslateY=function(){var t=this.getMatrix();return t?t._decompose()[e.Matrix._DECOMP_TY]:0},e.Displayable.prototype.setTranslateY=function(t){var i=this.getMatrix().clone(),n=i._decompose();n[e.Matrix._DECOMP_TY]=t,i._recompose(n),this.setMatrix(i)},e.Displayable.prototype.setScale=function(t,i){var n=this.getMatrix().clone(),o=n._decompose();t&&(o[e.Matrix._DECOMP_SX]=t),i&&(o[e.Matrix._DECOMP_SY]=i),n._recompose(o),this.setMatrix(n)},e.Displayable.prototype.getScaleX=function(){var t=this.getMatrix();return t?t._decompose()[e.Matrix._DECOMP_SX]:1},e.Displayable.prototype.setScaleX=function(t){var i=this.getMatrix().clone(),n=i._decompose();n[e.Matrix._DECOMP_SX]=t,i._recompose(n),this.setMatrix(i)},e.Displayable.prototype.getScaleY=function(){var t=this.getMatrix();return t?t._decompose()[e.Matrix._DECOMP_SY]:1},e.Displayable.prototype.setScaleY=function(t){var i=this.getMatrix().clone(),n=i._decompose();n[e.Matrix._DECOMP_SY]=t,i._recompose(n),this.setMatrix(i)},e.Displayable.prototype.getRotation=function(){var t=this.getMatrix();return t?t._decompose()[e.Matrix._DECOMP_R]:0},e.Displayable.prototype.setRotation=function(t){var i=this.getMatrix().clone(),n=i._decompose();n[e.Matrix._DECOMP_R]=t,i._recompose(n),this.setMatrix(i)},e.Displayable.prototype.getMatrix=function(){return this._matrix?this._matrix:new e.Matrix},e.Displayable.prototype.setMatrix=function(t){if(t&&t.isIdentity()&&(t=null),this._matrix!=t)if(this._matrix=t,this._matrix&&!this._matrix.isLocked()&&this._matrix.__lock(),!this._outerElem&&e.Displayable.HasAttributes(this.getElem(),e.Displayable._ATTRS_TRANSFERABLE_TO_OUTER)&&this._createOuterGroupElem(),this._matrix=t,t){var i="matrix("+e.ToolkitUtils.roundDecimal(t.getA())+","+e.ToolkitUtils.roundDecimal(t.getC())+","+e.ToolkitUtils.roundDecimal(t.getB())+","+e.ToolkitUtils.roundDecimal(t.getD())+","+e.ToolkitUtils.roundDecimal(t.getTx())+","+e.ToolkitUtils.roundDecimal(t.getTy())+")";e.ToolkitUtils.setAttrNullNS(this.getElem(),"transform",i,"matrix(1,0,0,1,0,0)")}else{var n=e.ToolkitUtils.getAttrNullNS(this.getElem(),"transform");n&&(e.ToolkitUtils.removeAttrNullNS(this.getElem(),"transform"),e.Agent.isPlatformIE()&&e.ToolkitUtils.setAttrNullNS(this.getElem(),"transform",null));var o;o&&e.ToolkitUtils.removeAttrNullNS(this.getElem(),"vector-effect")}},e.Container=function(t,e){this.Init(t,"g",e)},e.Obj.createSubclass(e.Container,e.Displayable),e.Container.prototype.Init=function(t,i,n){this._bShapeContainer=this instanceof e.Shape,e.Container.superclass.Init.call(this,t,null!=i?i:"g",n),this._childGroupElem=null},e.Container.AttributesTransferableToGroup=["transform","opacity","visibility","pointer-events","clip-path","cursor"],e.Container.prototype.addChild=function(t){if(t){var i=t.getParent();i&&i.removeChild(t),this._arList||(this._arList=[]),t.setParent(this),this._bShapeContainer&&this.CreateChildGroupElem(!1);var n=this.getContainerElem();e.ToolkitUtils.appendChildElem(n,t.getOuterElem()),this._arList.push(t)}},e.Container.prototype.addChildAt=function(t,e){this.AddChildAt(t,e)},e.Container.prototype.AddChildAt=function(t,e){if(e>=0&&e<=this.getNumChildren()&&t){var i=this._findChild(t);if(i>=0&&i==e)return;var n=t.getParent();n&&n.removeChild(t),t.setParent(this),i>=0&&e==this.getNumChildren()+1&&e--;var o=e;this._bShapeContainer&&(this.CreateChildGroupElem(!1),o++);var r=this.getContainerElem(),s=r.childNodes[o];s||(s=null),r.insertBefore(t.getOuterElem(),s),this._arList||(this._arList=[]),this._arList.splice(e,0,t)}},e.Container.prototype.contains=function(t){return this._findChild(t)>=0},e.Container.prototype._findChild=function(t){var e=-1;if(this._arList)for(var i=this._arList.length,n=0;n<i;n++)if(this._arList[n]===t){e=n;break}return e},e.Container.prototype.getChildAfter=function(t){var e=null,i=this._findChild(t);return i>=0&&++i<this._arList.length&&(e=this._arList[i]),e};e.Container.prototype.getChildBefore=function(t){var e=null,i=this._findChild(t);return i>0&&(e=this._arList[--i]),e};e.Container.prototype.getChildAt=function(t){var e=null;return this._arList&&this._arList.length>t&&t>=0&&(e=this._arList[t]),e},e.Container.prototype.getChildIndex=function(t){return this._findChild(t)},e.Container.prototype.getNumChildren=function(){return this._arList?this._arList.length:0},e.Container.prototype.removeChild=function(t){var e=this._findChild(t);e!==-1&&this._removeObj(t,e)},e.Container.prototype.removeChildImpl=function(t){var i=t.getOuterElem(),n=t.getParent();if(i&&n){var o=this.getContainerElem();o.removeChild(i)}if(!this._anchorElem&&this._bShapeContainer&&1===this.getNumChildren()){var r=this._childGroupElem,s=r?r.parentNode:null;s&&(e.Displayable.TransferAttributes(r,this._elem,this.GetAttributesTransferableToGroup()),s.replaceChild(this._elem,r),this._childGroupElem=null)}},e.Container.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e&&this._removeObj(e,t),e},e.Container.prototype.removeChildren=function(){if(this._arList)for(var t=this._arList;this.getNumChildren()>0;)this._removeObj(t[0],0)},e.Container.prototype._removeObj=function(t,e){this.removeChildImpl(t),t.setParent(null),this._arList.splice(e,1),0===this._arList.length&&(this._arList=null)},e.Container.prototype.destroy=function(){e.Container.superclass.destroy.call(this);for(var t=this.getNumChildren(),i=0;i<t;i++){var n=this.getChildAt(i);n.destroy()}},e.Container.prototype.getHyperlink=function(){return this._linkObj},e.Container.prototype.GetAttributesTransferableToGroup=function(){return e.Container.AttributesTransferableToGroup},e.Container.prototype.getElem=function(){return this._childGroupElem?this._childGroupElem:this._elem},e.Container.prototype.CreateChildGroupElem=function(t,i){if(this._childGroupElem||!i&&0!==this.getNumChildren())t&&this.removeChildren();else{var n=e.Displayable.SET_ID_ON_DOM&&this._id?this._id+"_g":null;this._childGroupElem=e.SvgShapeUtils.createElement("g",n);var o,r=this.getParent();r&&(o=r.getElem(),o.replaceChild(this._childGroupElem,this._elem)),t||e.ToolkitUtils.appendChildElem(this._childGroupElem,this._elem),e.Displayable.TransferAttributes(this._elem,this._childGroupElem,this.GetAttributesTransferableToGroup()),this._elem._obj&&(this._childGroupElem._obj=this._elem._obj),e.Agent.isEnvironmentTest()&&document.shapeContainerCount++}},e.Container.prototype.getDimensionsWithStroke=function(){for(var t=[],e=this.getNumChildren(),i=0;i<e;i++)t.push(this.getChildAt(i));for(var n=null;t.length>0;){var o=t.shift(),r=o.GetDimensionsWithStroke(this);r&&(n=n?n.getUnion(r):r),e=o.getNumChildren();for(var i=0;i<e;i++)t.push(o.getChildAt(i))}return n},e.Container.prototype.GetDimensionsWithStroke=function(t){return null},e.Container._reparentChildren=function(t,i){var n=i.childNodes;if(n)for(var o,r,s=n.length-1;s>=0;s--)o=n[s],r?t.insertBefore(o,r):e.ToolkitUtils.appendChildElem(t,o),r=o},e.Container.prototype.getContainerElem=function(){return this._anchorElem?this._anchorElem:this.getElem()},e.Container.prototype.dispatchNativeEvent=function(t){var e=t.getNativeEvent(),i=null;i=this._bShapeContainer?this._childGroupElem:this._anchorElem?this._anchorElem:this._elem,i.dispatchEvent&&i.dispatchEvent(e)},e.Container.prototype.UpdateSelectionEffect=function(){},e.Container.prototype.setHollow=function(t,e){for(var i=0;i<this.getNumChildren();i++){var n=this.getChildAt(i),o=n.getFill()?n.getFill().getColor():t;n.setHollow(o,e)}};var C=function(t,e,i){this.Init(t,"g",i),this._SVGRoot=e,this.disableSelection(this._elem),this.setCursor("default")};e.Obj.createSubclass(C,e.Container),C.prototype.addChild=function(t){C.superclass.addChild.call(this,t)},C.prototype.appendDefs=function(t){e.ToolkitUtils.appendChildElem(this._elemDefs,t)},C.prototype.getDefs=function(){return this._elemDefs},C.prototype.getSVGRoot=function(){return this._SVGRoot},C.prototype.disableSelection=function(t){t.onselectstart=function(){return!1},t.onselect=function(){return!1}},e.Shape=function(){},e.Obj.createSubclass(e.Shape,e.Container),e.Shape.prototype.Init=function(t,i,n){e.Shape.superclass.Init.call(this,t,i,n),this._bSelectable=!1,this.IsSelected=!1,this.InnerShape=null,this.HoverInnerStroke=null,this.HoverOuterStroke=null,this.SelectedInnerStroke=null,this.SelectedOuterStroke=null,this.SelectedHoverInnerStroke=null,this.SelectedHoverOuterStroke=null,this.OriginalStroke=null,this._isOriginalStrokeSet=!1,this.IsShowingHoverEffect=!1},e.Shape.prototype.setHollow=function(t,i){if(this._bHollow)this.setFill(this._origFill),this.setStroke(this._origStroke),this._bHollow=!1;else{this._origFill=this.GetProperty("fill"),this._origStroke=this.getStroke();var n,o=e.SolidFill.invisibleFill();n=t?new e.SolidStroke(e.ColorUtils.getRGB(t),e.ColorUtils.getAlpha(t),i):new e.SolidStroke(this.GetProperty("fill").getColor(),this.GetProperty("fill").getAlpha(),i),this.setFill(o),this.setStroke(n),this._bHollow=!0}},e.Shape.prototype.isHollow=function(){return this._bHollow},e.Shape.prototype.destroy=function(){e.Shape.superclass.destroy.call(this),this.setFill(null),this.setStroke(null)},e.Shape.prototype.getDimensionsWithStroke=function(){var t=this.GetElemDimensionsWithStroke(),i=e.Shape.superclass.getDimensionsWithStroke.call(this);return t&&i?t=t.getUnion(i):i&&(t=i),t},e.Shape.prototype.GetDimensionsWithStroke=function(t){var e=this.GetElemDimensionsWithStroke();return t&&t!==this?this.ConvertCoordSpaceRect(e,t):e},e.Shape.prototype.GetElemDimensionsWithStroke=function(){var t=this.getDimensionsSelf&&this.getNumChildren()-this._getInnerShapeCount()==0?this.getDimensionsSelf():e.Shape.superclass.getDimensions.call(this),i=this.getStroke();if(t&&i){var n=i.getWidth();if(n){var o=.5*n;t.x-=o,t.y-=o,t.w+=n,t.h+=n}}return t},e.Shape.prototype.UpdateSelectionEffect=function(){if(this.isSelected()||this.isHoverEffectShown()){var t;this.InnerShape&&(t=this.InnerShape.getStroke(),this.removeChild(this.InnerShape)),this.InnerShape=this.copyShape(),this.InnerShape.setMouseEnabled(!1),this.InnerShape.setFill(this.getFill()),this.InnerShape.setStyle(this.getStyle()).setClassName(this.getClassName()),t&&this.InnerShape.setStroke(t),this.InnerShape.setMouseEnabled(!1),this.InnerShape.setCursor(e.SelectionEffectUtils.getSelectingCursor()),this.AddChildAt(this.InnerShape,0)}},e.Shape.prototype.setHoverStroke=function(t,e){return this.HoverInnerStroke=t,this.HoverOuterStroke=e,this},e.Shape.prototype.setSelectedStroke=function(t,e){return this.SelectedInnerStroke=t,this.SelectedOuterStroke=e,this},e.Shape.prototype.setSelectedHoverStroke=function(t,e){return this.SelectedHoverInnerStroke=t,this.SelectedHoverOuterStroke=e,this},e.Shape.prototype.setSelectable=function(t){this._bSelectable=t,this._bSelectable?this.setCursor(e.SelectionEffectUtils.getSelectingCursor()):this.setCursor(null)},e.Shape.prototype.isSelectable=function(){return this._bSelectable},e.Shape.prototype.isSelected=function(){return this.IsSelected},e.Shape.prototype.setSelected=function(t){this.IsSelected!=t&&(this._isOriginalStrokeSet||(this._isOriginalStrokeSet=!0,this.OriginalStroke=this.getStroke()),this.IsSelected=t,this.isSelected()?(this.UpdateSelectionEffect(),this.isHoverEffectShown()?(this.CreateSelectedHoverStrokes(),this.InnerShape.setStroke(this.SelectedHoverInnerStroke),this.setStroke(this.SelectedHoverOuterStroke)):(this.InnerShape.setStroke(this.SelectedInnerStroke),this.setStroke(this.SelectedOuterStroke))):(this.removeChild(this.InnerShape),this.setStroke(this.OriginalStroke)))},e.Shape.prototype.showHoverEffect=function(){this.IsShowingHoverEffect||(this.IsShowingHoverEffect=!0,this._isOriginalStrokeSet||(this._isOriginalStrokeSet=!0,this.OriginalStroke=this.getStroke()),this.UpdateSelectionEffect(),this.isSelected()?(this.CreateSelectedHoverStrokes(),this.InnerShape.setStroke(this.SelectedHoverInnerStroke),this.setStroke(this.SelectedHoverOuterStroke)):(this.InnerShape.setStroke(this.HoverInnerStroke),this.setStroke(this.HoverOuterStroke)))},e.Shape.prototype.CreateSelectedHoverStrokes=function(){this.SelectedHoverInnerStroke||(this.SelectedHoverInnerStroke=this.HoverInnerStroke.clone()),this.SelectedHoverOuterStroke||(this.SelectedHoverOuterStroke=this.SelectedOuterStroke.clone(),this.SelectedHoverOuterStroke.setWidth(this.SelectedOuterStroke.getWidth()+(this.HoverInnerStroke.getWidth()-this.SelectedInnerStroke.getWidth())))},e.Shape.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect&&(this.IsShowingHoverEffect=!1,this.isSelected()?(this.InnerShape.setStroke(this.SelectedInnerStroke),this.setStroke(this.SelectedOuterStroke)):(this.removeChild(this.InnerShape),this.setStroke(this.OriginalStroke)))},e.Shape.prototype.isHoverEffectShown=function(){return this.IsShowingHoverEffect},e.Shape.prototype.addChildAt=function(t,i){e.Shape.superclass.addChildAt.call(this,t,i+this._getInnerShapeCount())},e.Shape.prototype.getChildAt=function(t,i){return e.Shape.superclass.getChildAt.call(this,t,i+this._getInnerShapeCount())},e.Shape.prototype.getChildIndex=function(t){return e.Shape.superclass.getChildIndex.call(this,t)-this._getInnerShapeCount()},e.Shape.prototype.removeChildAt=function(t){e.Shape.superclass.removeChildAt.call(this,t+this._getInnerShapeCount())},e.Shape.prototype.getDimensions=function(t){return this.getDimensionsSelf&&this.getNumChildren()-this._getInnerShapeCount()==0?this.getDimensionsSelf(t):e.Shape.superclass.getDimensions.call(this,t)},e.Shape.prototype._getInnerShapeCount=function(){return this.isSelected()||this.isHoverEffectShown()?1:0},e.Shape.prototype.SvgPropertyChanged=function(t){this.UpdateSelectionEffect()},e.Shape.prototype.copyShape=function(){return null};var E=function(){};e.Obj.createSubclass(E,e.Shape),E.prototype.Init=function(t,e,i,n,o){E.superclass.Init.call(this,t,e,o),this.setCx(i).setCy(n)},E.prototype.getCx=function(){return this.GetProperty("cx")},E.prototype.setCx=function(t){return this.SetSvgProperty("cx",t,0)},E.prototype.getCy=function(){return this.GetProperty("cy")},E.prototype.setCy=function(t){return this.SetSvgProperty("cy",t,0)};var b=function(){};e.Obj.createSubclass(b,e.Shape),b.prototype.Init=function(t,e,i,n){b.superclass.Init.call(this,t,e,n),i&&this.setPoints(i)},b.prototype.getPoints=function(){return this.GetProperty("arPoints")},b.prototype.setPoints=function(t){return this.SetProperty("arPoints",t),this.SetSvgProperty("points",e.SvgShapeUtils.convertPointsArray(t))},b.prototype.getDimensionsSelf=function(t){var i=e.PolygonUtils.getDimensions(this.getPoints());return this.ConvertCoordSpaceRect(i,t)},e.Arc=function(t,e,i,n,o,r,s,a,l){this.Init(t,e,i,n,o,r,s,a,l)},e.Obj.createSubclass(e.Arc,e.Shape),e.Arc.OPEN="OPEN",e.Arc.CHORD="CHORD",e.Arc.PIE="PIE",e.Arc.prototype.Init=function(t,i,n,o,r,s,a,l,h){e.Arc.superclass.Init.call(this,t,"path",h),this._sa=0,this._ae=0,r=null===r||isNaN(r)?o:r,this._bInInit=!0,this.setCx(i),this.setCy(n),this.setRx(o),this.setRy(r),this.setAngleStart(s),this.setAngleExtent(a),this.setClosure(l?l:e.Arc.OPEN),this._bInInit=!1,this._createArc()},e.Arc.prototype._addClosure=function(t){return this._ct===e.Arc.CHORD?t+=" z":this._ct===e.Arc.PIE?t+=" L "+this._cx+","+this._cy+" z":this._ct===e.Arc.OPEN&&this.setFill(null),t},e.Arc.prototype._createArc=function(){if(!this._bInInit){var t=this._sa*e.Math.RADS_PER_DEGREE,i=this._ae*e.Math.RADS_PER_DEGREE,n=this._cx+this._rx*Math.cos(t),o=this._cy-this._ry*Math.sin(t),r=this._cx+this._rx*Math.cos(t+i),s=this._cy-this._ry*Math.sin(t+i),a=Math.abs(this._ae)>180?"1":"0",l=this._ae>0?"0":"1",h="M "+e.ToolkitUtils.roundDecimal(n)+" "+e.ToolkitUtils.roundDecimal(o)+" A "+e.ToolkitUtils.roundDecimal(this._rx)+","+e.ToolkitUtils.roundDecimal(this._ry)+" 0 "+a+","+l+" "+e.ToolkitUtils.roundDecimal(r)+","+e.ToolkitUtils.roundDecimal(s);h=this._addClosure(h),e.ToolkitUtils.setAttrNullNS(this._elem,"d",h),null!==this._stroke&&this.setStroke(this._stroke)}},e.Arc.prototype.getAngleExtent=function(){return this._ae},e.Arc.prototype.setAngleExtent=function(t){t=null===t||isNaN(t)?0:t,this._ae!==t&&(360===t&&(t=359.99),this._ae=t,this._createArc(),this.UpdateSelectionEffect())},e.Arc.prototype.getAngleStart=function(){return this._sa},e.Arc.prototype.setAngleStart=function(t){
t=null===t||isNaN(t)?0:t,this._sa!==t&&(this._sa=t,this._createArc(),this.UpdateSelectionEffect())},e.Arc.prototype.getClosure=function(){return this._ct},e.Arc.prototype.setClosure=function(t){t!==this._ct&&(this._ct=t,this._createArc(),this.UpdateSelectionEffect())},e.Arc.prototype.getCx=function(){return this._cx},e.Arc.prototype.setCx=function(t){t!==this._cx&&(this._cx=t,e.ToolkitUtils.setAttrNullNS(this._elem,"cx",t),this.UpdateSelectionEffect())},e.Arc.prototype.getCy=function(){return this._cy},e.Arc.prototype.setCy=function(t){t!==this._cy&&(this._cy=t,e.ToolkitUtils.setAttrNullNS(this._elem,"cy",t),this.UpdateSelectionEffect())},e.Arc.prototype.getRx=function(){return this._rx},e.Arc.prototype.setRx=function(t){t!==this._rx&&(this._rx=t,e.ToolkitUtils.setAttrNullNS(this._elem,"rx",this._rx),this._createArc(),this.UpdateSelectionEffect())},e.Arc.prototype.getRy=function(){return this._ry},e.Arc.prototype.setRy=function(t){t!==this._ry&&(this._ry=t,e.ToolkitUtils.setAttrNullNS(this._elem,"ry",this._ry),this._createArc(),this.UpdateSelectionEffect())},e.Arc.prototype.setArc=function(t,e){this.setAngleStart(t),this.setAngleExtentStart(e)},e.Arc.prototype.setRadius=function(t,e){this.setRx(t),this.setRy(e)},e.Arc.prototype.copyShape=function(){return new e.Arc(this.getCtx(),this.getCx(),this.getCy(),this.getRx(),this.getRy(),this.getAngleStart(),this.getAngleExtent(),this.getClosure())},e.Arc.prototype.GetAriaElem=function(){return e.Agent.isTouchDevice()&&this.CreateChildGroupElem(!1,!0),e.Arc.superclass.GetAriaElem.call(this)},e.Circle=function(t,e,i,n,o){this.Init(t,e,i,n,o)},e.Obj.createSubclass(e.Circle,E),e.Circle.prototype.Init=function(t,i,n,o,r){e.Circle.superclass.Init.call(this,t,"circle",i,n,r),this.setRadius(o)},e.Circle.prototype.getRadius=function(){return this.GetProperty("r")},e.Circle.prototype.setRadius=function(t){return this.SetSvgProperty("r",t)},e.Circle.prototype.copyShape=function(){return new e.Circle(this.getCtx(),this.getCx(),this.getCy(),this.getRadius())},e.Circle.prototype.getDimensionsSelf=function(t){var i=new e.Rectangle(this.getCx()-this.getRadius(),this.getCy()-this.getRadius(),2*this.getRadius(),2*this.getRadius());return this.ConvertCoordSpaceRect(i,t)},e.Image=function(t,e,i,n,o,r,s){this.Init(t,e,i,n,o,r,s)},e.Obj.createSubclass(e.Image,e.Shape),e.Image.prototype.Init=function(t,i,n,o,r,s,a){e.Image.superclass.Init.call(this,t,"image",a),i=e.ToolkitUtils.getImageUrl(t,i),e.Agent.isPlatformIE()&&(e.ToolkitUtils.setAttrNullNS(this._elem,"fill","#FFFFFF"),e.ToolkitUtils.setAttrNullNS(this._elem,"fill-opacity","0")),this.setImage(i,n,o,r,s),this.setAriaProperty("hidden","true")},e.Image.prototype.getX=function(){return this.GetProperty("x")},e.Image.prototype.setX=function(t){return this.SetSvgProperty("x",t)},e.Image.prototype.getY=function(){return this.GetProperty("y")},e.Image.prototype.setY=function(t){return this.SetSvgProperty("y",t)},e.Image.prototype.getWidth=function(){return this.GetProperty("width")},e.Image.prototype.setWidth=function(t){return this.SetSvgProperty("width",t)},e.Image.prototype.getHeight=function(){return this.GetProperty("height")},e.Image.prototype.setHeight=function(t){return this.SetSvgProperty("height",t)},e.Image.prototype.getSrc=function(){return this._src},e.Image.prototype.setSrc=function(t){if(t!==this._src){var i=t;if(this._src=t,e.Agent.isEnvironmentBatik()){var n=e.JavaImageLoader.getImageInfo(t);n&&(i=n.uri)}e.ToolkitUtils.setHref(this._elem,i)}return this},e.Image.prototype.getPos=function(){return new e.Point(this._x,this._y)},e.Image.prototype.setPos=function(t,e){this.setX(t).setY(e)},e.Image.prototype.setImage=function(t,i,n,o,r){i instanceof e.Image?(this.setSrc(t.src),this.setPos(t.x,t.y),this.setWidth(t.w),this.setHeight(t.h)):(this.setSrc(t),this.setPos(i,n),this.setWidth(o),this.setHeight(r)),e.ToolkitUtils.setAttrNullNS(this._elem,"preserveAspectRatio","none")},e.Image.prototype.getDimensions=function(t){if(this.getDimensionsSelf&&this.getNumChildren()-this._getInnerShapeCount()==0)return this.getDimensionsSelf(t);var i=this.getElem().getBBox();return i=i.width&&i.height?new e.Rectangle(i.x,i.y,i.width,i.height):new e.Rectangle(i.x,i.y,this.getWidth(),this.getHeight()),this.ConvertCoordSpaceRect(i,t)},e.Image.prototype.__setDimensions=function(t){this.setWidth(t.width),this.setHeight(t.height)},e.Image.prototype.UpdateSelectionEffect=function(){},e.Image.prototype.copyShape=function(){return new e.Image(this.getCtx(),this.getSrc(),this.getX(),this.getY(),this.getWidth(),this.getHeight())},e.Image.prototype.getDimensionsSelf=function(t){var i=new e.Rectangle(this.getX(),this.getY(),this.getWidth(),this.getHeight());return this.ConvertCoordSpaceRect(i,t)},e.Image.prototype.setAriaProperty=function(t,i){e.Image.superclass.setAriaProperty.call(this,t,i),"hidden"!=t&&e.Image.superclass.setAriaProperty.call(this,"hidden",null)},e.Line=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)},e.Obj.createSubclass(e.Line,e.Shape),e.Line.prototype.Init=function(t,i,n,o,r,s){e.Line.superclass.Init.call(this,t,"line",s),this.setX1(i).setY1(n).setX2(o).setY2(r),this._bHollow=!1},e.Line.prototype.getX1=function(){return this.GetProperty("x1")},e.Line.prototype.setX1=function(t){return this.SetSvgProperty("x1",t,0)},e.Line.prototype.getY1=function(){return this.GetProperty("y1")},e.Line.prototype.setY1=function(t){return this.SetSvgProperty("y1",t,0)},e.Line.prototype.getX2=function(){return this.GetProperty("x2")},e.Line.prototype.setX2=function(t){return this.SetSvgProperty("x2",t,0)},e.Line.prototype.getY2=function(){return this.GetProperty("y2")},e.Line.prototype.setY2=function(t){return this.SetSvgProperty("y2",t,0)},e.Line.prototype.setHollow=function(){var t=this._elem.parentNode;if(this._bHollow)this._origElem&&(t.replaceChild(this._origElem,this._elem),e.ToolkitUtils.setAttrNullNS(this._origElem,"opacity",this._alpha),this._elem=this._origElem,this._origElem=null,this._bHollow=!1);else{this._origElem=this._elem;var i,n=this.getX2()-this.getX1(),o=n,r=this.getY1()-n/2,s=this.getStroke();i=e.SvgShapeUtils.createElement("rect"),e.ToolkitUtils.setAttrNullNS(i,"x",this.getX1()),e.ToolkitUtils.setAttrNullNS(i,"y",r),e.ToolkitUtils.setAttrNullNS(i,"width",this.getX2()-this.getX1()),e.ToolkitUtils.setAttrNullNS(i,"height",o);var a=s.getColor();if(a){var l=s.getAlpha();e.Agent.isBrowserSafari()&&a.indexOf("rgba")!==-1?(e.ToolkitUtils.setAttrNullNS(i,"stroke",e.ColorUtils.getRGB(a)),null!=l?e.ToolkitUtils.setAttrNullNS(i,"stroke-opacity",e.ColorUtils.getAlpha(a)*l):e.ToolkitUtils.setAttrNullNS(i,"stroke-opacity",e.ColorUtils.getAlpha(a))):(e.ToolkitUtils.setAttrNullNS(i,"stroke",a),null!=l&&e.ToolkitUtils.setAttrNullNS(i,"stroke-opacity",l))}e.ToolkitUtils.setAttrNullNS(i,"fill","#ffffff"),e.ToolkitUtils.setAttrNullNS(i,"fill-opacity","0.001"),e.ToolkitUtils.setAttrNullNS(i,"shape-rendering","crispEdges"),i._obj=this,t.replaceChild(i,this._elem),this._elem=i,e.ToolkitUtils.setAttrNullNS(this._elem,"opacity",this._alpha),this._bHollow=!0}},e.Line.prototype.getDimensions=function(t){var i=e.Line.superclass.getDimensions.call(this,t);if(this._childGroupElem&&this._elem){var n=this._childGroupElem.getBBox();if(0==n.x&&0==n.y&&0==n.width&&0==n.height){var o=this._elem.getBBox();i=new e.Rectangle(o.x,o.y,o.width,o.height)}}return i},e.Line.prototype.copyShape=function(){return new e.Line(this.getCtx(),this.getX1(),this.getY1(),this.getX2(),this.getY2())},e.Line.prototype.getDimensionsSelf=function(t){var i=Math.min(this.getX1(),this.getX2()),n=Math.min(this.getY1(),this.getY2()),o=Math.abs(this.getX1()-this.getX2()),r=Math.abs(this.getY1()-this.getY2()),s=new e.Rectangle(i,n,o,r);return this.ConvertCoordSpaceRect(s,t)},e.Line.prototype._adjustDimensionsForStyle=function(){this.getX1()==this.getX2()?this.setX2(this.getX2()+.001):this.getY1()==this.getY2()&&this.setY2(this.getY2()+.001)},e.Line.prototype.setStyle=function(t,i){return t&&!i&&this._adjustDimensionsForStyle(),e.Line.superclass.setStyle.call(this,t)},e.Line.prototype.setClassName=function(t,i){return t&&!i&&this._adjustDimensionsForStyle(),e.Line.superclass.setClassName.call(this,t)},e.SimpleMarker=function(t,e,i,n,o,r,s,a,l,h,u){this.Init(t,e,i,n,o,r,s,a,l,h,u)},e.Obj.createSubclass(e.SimpleMarker,e.Shape),e.SimpleMarker.CIRCLE="circle",e.SimpleMarker.ELLIPSE="ellipse",e.SimpleMarker.SQUARE="square",e.SimpleMarker.RECTANGLE="rectangle",e.SimpleMarker.DIAMOND="diamond",e.SimpleMarker.TRIANGLE_UP="triangleUp",e.SimpleMarker.TRIANGLE_DOWN="triangleDown",e.SimpleMarker.PLUS="plus",e.SimpleMarker.HUMAN="human",e.SimpleMarker.STAR="star",e.SimpleMarker._CIRCLE_ELEM="circle",e.SimpleMarker._ELLIPSE_ELEM="ellipse",e.SimpleMarker._RECT_ELEM="rect",e.SimpleMarker._PATH_ELEM="path",e.SimpleMarker._POLYGON_ELEM="polygon",e.SimpleMarker._SHAPE_ELEM_MAP={},e.SimpleMarker._SHAPE_ELEM_MAP[e.SimpleMarker.CIRCLE]=e.SimpleMarker._CIRCLE_ELEM,e.SimpleMarker._SHAPE_ELEM_MAP[e.SimpleMarker.ELLIPSE]=e.SimpleMarker._ELLIPSE_ELEM,e.SimpleMarker._SHAPE_ELEM_MAP[e.SimpleMarker.SQUARE]=e.SimpleMarker._PATH_ELEM,e.SimpleMarker._SHAPE_ELEM_MAP[e.SimpleMarker.RECTANGLE]=e.SimpleMarker._PATH_ELEM,e.SimpleMarker._SHAPE_ELEM_MAP[e.SimpleMarker.DIAMOND]=e.SimpleMarker._POLYGON_ELEM,e.SimpleMarker._SHAPE_ELEM_MAP[e.SimpleMarker.TRIANGLE_UP]=e.SimpleMarker._POLYGON_ELEM,e.SimpleMarker._SHAPE_ELEM_MAP[e.SimpleMarker.TRIANGLE_DOWN]=e.SimpleMarker._POLYGON_ELEM,e.SimpleMarker._SHAPE_ELEM_MAP[e.SimpleMarker.PLUS]=e.SimpleMarker._POLYGON_ELEM,e.SimpleMarker._SHAPE_ELEM_MAP[e.SimpleMarker.HUMAN]=e.SimpleMarker._PATH_ELEM,e.SimpleMarker._SHAPE_ELEM_MAP[e.SimpleMarker.STAR]=e.SimpleMarker._POLYGON_ELEM,e.SimpleMarker.DEFAULT_BORDER_RADIUS="6",e.SimpleMarker._HUMAN_CMDS="M 38.07,36.467856 q 13.414,0 13.414,-13.406 l 0,-9.258 q 0,-13.4039999 -13.414,-13.4039999 -13.414,0 -13.414,13.4039999 l 0,9.258 q 0,13.406 13.414,13.406 l 0,0 z m 16.219,7.275 -32.435999,0 q -10.139552,0 -15.9400009,7.443875 Q 0.5,58.133383 0.5,69.156856 l 0,54.396004 12.746001,0 0,-51.609004 q 0,-2.824 0.793,-2.824 0.742,0 0.742,2.709 l 0,124.267994 q 0,2.82401 2.823999,2.82401 l 12.531,0 q 2.824,0 2.824,-2.824 l 0,-66.25 10.219,0 0,66.25 q 0,2.824 2.824,2.824 l 12.528,0 q 2.825,0 2.825,-2.824 l 0,-124.268004 q 0,-2.709 0.839,-2.709 0.792,0 0.792,2.824 l 0,51.609004 12.65,0 0,-54.396004 Q 75.6386,58.132927 70.227626,51.186731 64.428999,43.742856 54.289,43.742856 l 0,0 z",e.SimpleMarker._HUMAN2_CMDS="M 306.40625 386.78125 C 304.19988 386.78125 302.40625 389.07579 302.40625 391.90625 C 302.40625 394.73671 304.19988 397.03125 306.40625 397.03125 C 308.61263 397.03125 310.40625 394.73671 310.40625 391.90625 C 310.40625 389.07579 308.61263 386.78125 306.40625 386.78125 z M 301.78125 396.0625 C 300.43025 397.2945 298.28125 400.28125 298.90625 403.15625 C 302.41725 405.79925 309.20225 406.154 314.03125 403 C 314.21825 399.828 312.68325 397.5635 310.90625 396.0625 C 308.65625 400.7185 304.28125 399.7815 301.78125 396.0625 z ",e.SimpleMarker._SHAPE_STAR_CMDS=[-50,-11.22,-16.69,-17.94,0,-47.55,16.69,-17.94,50,-11.22,26.69,13.8,30.9,47.56,0,33.42,-30.9,47.56,-26.69,13.8],e.SimpleMarker.prototype.Init=function(t,i,n,o,r,s,a,l,h,u,d){u&&(o=Math.round(o),r=Math.round(r),s=Math.round(s),a=Math.round(a),a=a%2==1?a+1:a,s=s%2==1?s+1:s),this._bMaintainAspectRatio=!0,h===!1&&(this._bMaintainAspectRatio=!1,i==e.SimpleMarker.CIRCLE&&(i=e.SimpleMarker.ELLIPSE)),l&&"0"!=l&&(this._borderRadius=l),this._skin=n,this._shape=i?i:e.SimpleMarker.RECTANGLE,this._dataColor="#000000";var c=i?e.SimpleMarker._SHAPE_ELEM_MAP[i]:e.SimpleMarker._PATH_ELEM;null==c&&(this._isCustomShape=!0,this._path=new e.Path(t,i),c=e.SimpleMarker._PATH_ELEM),e.SimpleMarker.superclass.Init.call(this,t,c,d),this._shape!=e.SimpleMarker.SQUARE&&this._shape!=e.SimpleMarker.RECTANGLE||(this._path=this._getBorderRadiusPath(t,o,r,s,a,l)),this._shape==e.SimpleMarker.HUMAN&&(this._path=new e.Path(t,e.CSSStyle.afterSkinAlta(this._skin)?e.SimpleMarker._HUMAN2_CMDS:e.SimpleMarker._HUMAN_CMDS)),this._propertyChange={},this.setCenter(o,r,!0).setSize(s,a)},e.SimpleMarker.prototype.setCenterDimensions=function(t){return this.setCenter(t.x,t.y,!0).setSize(t.w,t.h)},e.SimpleMarker.prototype.getCenterDimensions=function(){return new e.Rectangle(this._cx,this._cy,this._width,this._height)},e.SimpleMarker.prototype.setSize=function(t,e,i){return this.setWidth(t,!0).setHeight(e,i)},e.SimpleMarker.prototype.setCenter=function(t,e,i){return this.setCx(t,!0).setCy(e,i)},e.SimpleMarker.prototype._updateSvgProperties=function(){if(this._propertyChange.width||this._propertyChange.height){var t=Math.min(this._width,this._height);this._propertyChange.s=this._s!=t,this._s=t}if(this._shape!=e.SimpleMarker.RECTANGLE&&this._shape!=e.SimpleMarker.SQUARE||this._borderRadius)this._shape==e.SimpleMarker.CIRCLE||this._shape==e.SimpleMarker.ELLIPSE?(this._propertyChange.cx&&e.ToolkitUtils.setAttrNullNS(this._elem,"cx",this._cx,0),this._propertyChange.cy&&e.ToolkitUtils.setAttrNullNS(this._elem,"cy",this._cy,0),this._shape==e.SimpleMarker.CIRCLE?this._propertyChange.s&&e.ToolkitUtils.setAttrNullNS(this._elem,"r",this._s/2,0):(this._propertyChange.width&&e.ToolkitUtils.setAttrNullNS(this._elem,"rx",this._width/2,0),this._propertyChange.height&&e.ToolkitUtils.setAttrNullNS(this._elem,"ry",this._height/2,0))):this._isPolygon()?(this._propertyChange.s||this._propertyChange.cx||this._propertyChange.cy)&&this._setPolygon(this._getPolygonArray()):this._isPath()&&(this._propertyChange.width||this._propertyChange.height||this._propertyChange.cx||this._propertyChange.cy)&&this._setCmds(this._getCmds());else if(this._propertyChange.width||this._propertyChange.height||this._propertyChange.cx||this._propertyChange.cy){var i=e.PathUtils.rectangleWithBorderRadius(this._cx-this._width/2,this._cy-this._height/2,this._width,this._height);this._setCmds(i)}return this.UpdateSelectionEffect(),this._propertyChange={},this},e.SimpleMarker.prototype.getCx=function(){return this._cx},e.SimpleMarker.prototype.setCx=function(t,e){return this._propertyChange.cx=this._cx!=t,this._cx=t,e?this:this._updateSvgProperties()},e.SimpleMarker.prototype.getCy=function(){return this._cy},e.SimpleMarker.prototype.setCy=function(t,e){return this._propertyChange.cy=this._cy!=t,this._cy=t,e?this:this._updateSvgProperties()},e.SimpleMarker.prototype.getSize=function(){return this._s},e.SimpleMarker.prototype.getWidth=function(){return this._width},e.SimpleMarker.prototype.setWidth=function(t,e){return this._propertyChange.width=this._width!=t,this._width=t,e?this:this._updateSvgProperties()},e.SimpleMarker.prototype.getHeight=function(){return this._height},e.SimpleMarker.prototype.setHeight=function(t,e){return this._propertyChange.height=this._height!=t,this._height=t,e?this:this._updateSvgProperties()},e.SimpleMarker.prototype._getPolygonArray=function(){var t=[],i=this._cx,n=this._cy,o=this.getMaintainAspectRatio()?this._s/2:this._width/2,r=this.getMaintainAspectRatio()?this._s/2:this._height/2,s=this.getMaintainAspectRatio()?this._s/6:this._width/6,a=this.getMaintainAspectRatio()?this._s/6:this._height/6;return this._shape==e.SimpleMarker.TRIANGLE_UP?t=[i-o,n+r,i,n-r,i+o,n+r]:this._shape==e.SimpleMarker.TRIANGLE_DOWN?t=[i-o,n-r,i,n+r,i+o,n-r]:this._shape==e.SimpleMarker.DIAMOND?t=[i-o,n,i,n-r,i+o,n,i,n+r]:this._shape==e.SimpleMarker.PLUS?t=[i-o,n-a,i-s,n-a,i-s,n-r,i+s,n-r,i+s,n-a,i+o,n-a,i+o,n+a,i+s,n+a,i+s,n+r,i-s,n+r,i-s,n+a,i-o,n+a]:this._shape==e.SimpleMarker.STAR&&(t=e.SimpleMarker._SHAPE_STAR_CMDS,t=e.PolygonUtils.scale(t,this.getMaintainAspectRatio()?this._s/100:this._width/100,this.getMaintainAspectRatio()?this._s/100:this._height/100),t=e.PolygonUtils.translate(t,i,n)),t},e.SimpleMarker.prototype._setPolygon=function(t){e.ToolkitUtils.setAttrNullNS(this._elem,"points",e.SvgShapeUtils.convertPointsArray(t))},e.SimpleMarker.prototype._getCmds=function(){var t=e.DisplayableUtils.getDimForced(this.getCtx(),this._path),i=Math.max(t.w,t.h),n=this.getMaintainAspectRatio();this._shape==e.SimpleMarker.RECTANGLE&&(n=!1);var o=n?this._s/i:this._width/t.w,r=n?this._s/i:this._height/t.h,s=this._cx-t.x*o-t.w*o/2,a=this._cy-t.y*r-t.h*r/2;return e.PathUtils.transformPath(this._path.getCmds(),s,a,o,r)},e.SimpleMarker.prototype._setCmds=function(t){e.ToolkitUtils.setAttrNullNS(this._elem,"d",t)},e.SimpleMarker.prototype.getType=function(){return this._shape},e.SimpleMarker.prototype._isPolygon=function(){return e.SimpleMarker._SHAPE_ELEM_MAP[this._shape]==e.SimpleMarker._POLYGON_ELEM},e.SimpleMarker.prototype._isPath=function(){return e.SimpleMarker._SHAPE_ELEM_MAP[this._shape]==e.SimpleMarker._PATH_ELEM||this._isCustomShape},e.SimpleMarker.prototype.SetStrokeWidth=function(t){var e=this.getStroke();e&&(e=e.clone(),e.setWidth(t),this.setStroke(e))},e.SimpleMarker.prototype.GetStrokeWidth=function(){var t=this.getStroke();return t?t.getWidth():0},e.SimpleMarker.prototype._getBorderRadiusPath=function(t,i,n,o,r,s){if(this._shape==e.SimpleMarker.SQUARE||this._shape==e.SimpleMarker.RECTANGLE){var a=Math.min(o,r),l=this._shape==e.SimpleMarker.SQUARE?a:o,h=this._shape==e.SimpleMarker.SQUARE?a:r,u=i-l/2,d=n-h/2,c=e.PathUtils.rectangleWithBorderRadius(u,d,l,h,s,a,"0");return new e.Path(t,c)}return null},e.SimpleMarker.prototype._getBorderRadius=function(){return this._borderRadius},e.SimpleMarker.prototype.setDataColor=function(t,i){if(this._dataColor=t,!i){var n=e.SelectionEffectUtils.getHoverBorderColor(t),o="#FFFFFF",r="#5A5A5A";this.setHoverStroke(new e.SolidStroke(o,1,1),new e.SolidStroke(n,1,3.5)),this.setSelectedStroke(new e.SolidStroke(o,1,1.5),new e.SolidStroke(r,1,4.5)),this.setSelectedHoverStroke(new e.SolidStroke(o,1,1.5),new e.SolidStroke(n,1,4.5)),this.HoverInnerStroke.setFixedWidth(!0),this.HoverOuterStroke.setFixedWidth(!0),this.SelectedInnerStroke.setFixedWidth(!0),this.SelectedOuterStroke.setFixedWidth(!0),this.SelectedHoverInnerStroke.setFixedWidth(!0),this.SelectedHoverOuterStroke.setFixedWidth(!0)}},e.SimpleMarker.prototype.getDataColor=function(){return this._dataColor},e.SimpleMarker.prototype.setHollow=function(t){var i=this.GetStrokeWidth();i=i?i:1,e.SimpleMarker.superclass.setHollow.call(this,t,i)},e.SimpleMarker.prototype.setText=function(t){this._markerText=t},e.SimpleMarker.prototype.setAlpha=function(t){e.SimpleMarker.superclass.setAlpha.call(this,t),t!==this.getAlpha()&&(this._markerText&&this._markerText.setAlpha(t),this.UpdateSelectionEffect())},e.SimpleMarker.prototype.copyShape=function(){return new e.SimpleMarker(this.getCtx(),this._shape,this._skin,this.getCx(),this.getCy(),this.getWidth(),this.getHeight(),this._getBorderRadius(),this.getMaintainAspectRatio())},e.SimpleMarker.prototype.getDimensions=function(t){return this.getDimensionsSelf(t)},e.SimpleMarker.prototype.getDimensionsSelf=function(t){var i=this.getCx()-this.getWidth()/2,n=this.getCy()-this.getHeight()/2,o=new e.Rectangle(i,n,this.getWidth(),this.getHeight());return this.ConvertCoordSpaceRect(o,t)},e.SimpleMarker.prototype.setMaintainAspectRatio=function(t){this._bMaintainAspectRatio=t},e.SimpleMarker.prototype.getMaintainAspectRatio=function(){return this._bMaintainAspectRatio},e.ImageMarker=function(t,e,i,n,o,r,s,a,l,h,u){this.Init(t,e,i,n,o,r,s,a,l,h,u)},e.Obj.createSubclass(e.ImageMarker,e.Shape),e.ImageMarker.prototype.Init=function(t,i,n,o,r,s,a,l,h,u,d){e.ImageMarker.superclass.Init.call(this,t,"image",d),this._setMarkerImageStates(a,l,h,u);var c=this._getImage();this._setSource(c),this._propertyChange={},this.setCenter(i,n,!0).setSize(o,r),this._updateBorder(s),e.Agent.isPlatformIE()&&(e.ToolkitUtils.setAttrNullNS(this._elem,"fill","#FFFFFF"),e.ToolkitUtils.setAttrNullNS(this._elem,"fill-opacity","0"))},e.ImageMarker.prototype.setPreserveAspectRatio=function(t){e.ToolkitUtils.setAttrNullNS(this._elem,"preserveAspectRatio",t,"xMidYMid")},e.ImageMarker.prototype.setCenterDimensions=function(t){return this.setCenter(t.x,t.y,!0).setSize(t.w,t.h)},e.ImageMarker.prototype.getCenterDimensions=function(){return new e.Rectangle(this._cx,this._cy,this._width,this._height)},e.ImageMarker.prototype.setSize=function(t,e,i){return this.setWidth(t,!0).setHeight(e,i)},e.ImageMarker.prototype.getSize=function(){return Math.max(this.getWidth(),this.getHeight())},e.ImageMarker.prototype.setCenter=function(t,e,i){return this.setCx(t,!0).setCy(e,i)},e.ImageMarker.prototype._updateSvgProperties=function(){return(this._propertyChange.cx||this._propertyChange.width)&&e.ToolkitUtils.setAttrNullNS(this._elem,"x",this._cx-this._width/2,0),(this._propertyChange.cy||this._propertyChange.height)&&e.ToolkitUtils.setAttrNullNS(this._elem,"y",this._cy-this._height/2,0),this._propertyChange.width&&e.ToolkitUtils.setAttrNullNS(this._elem,"width",this._width,0),this._propertyChange.height&&e.ToolkitUtils.setAttrNullNS(this._elem,"height",this._height,0),this._updateBorder(this._borderRadius),this.UpdateSelectionEffect(),this._propertyChange={},this},e.ImageMarker.prototype.getCx=function(){return this._cx},e.ImageMarker.prototype.setCx=function(t,e){return this._propertyChange.cx=this._cx!=t,this._cx=t,e?this:this._updateSvgProperties()},e.ImageMarker.prototype.getCy=function(){return this._cy},e.ImageMarker.prototype.setCy=function(t,e){return this._propertyChange.cy=this._cy!=t,this._cy=t,e?this:this._updateSvgProperties()},e.ImageMarker.prototype.getWidth=function(){return this._width},e.ImageMarker.prototype.setWidth=function(t,e){return this._propertyChange.width=this._width!=t,this._width=t,e?this:this._updateSvgProperties()},e.ImageMarker.prototype.getHeight=function(){return this._height},e.ImageMarker.prototype.setHeight=function(t,e){return this._propertyChange.height=this._height!=t,this._height=t,e?this:this._updateSvgProperties()},e.ImageMarker.prototype._setSource=function(t){if(e.Agent.isEnvironmentBatik()){var i=e.JavaImageLoader.getImageInfo(t);i&&(t=i.uri)}e.ToolkitUtils.setHref(this._elem,t)},e.ImageMarker.prototype._setMarkerImageStates=function(t,e,i,n){var o=t;this._imageStates=[o],this._imageStates.push(e?e:o),this._imageStates.push(i?i:o),this._imageStates.push(n?n:this._imageStates[1])},e.ImageMarker.prototype._getImage=function(){return this._imageStates[0]},e.ImageMarker.prototype._getImageSelected=function(){return this._imageStates[1]},e.ImageMarker.prototype._getImageHover=function(){return this._imageStates[2]},e.ImageMarker.prototype._getImageHoverSelected=function(){return this._imageStates[3]},e.ImageMarker.prototype.showHoverEffect=function(){this.IsShowingHoverEffect=!0,this.isSelected()?this._setSource(this._getImageHoverSelected()):this._setSource(this._getImageHover())},e.ImageMarker.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect=!1,this.isSelected()?this._setSource(this._getImageSelected()):this._setSource(this._getImage())},e.ImageMarker.prototype.setSelected=function(t){this.IsSelected!=t&&(this.IsSelected=t,t?this.isHoverEffectShown()?this._setSource(this._getImageHoverSelected()):this._setSource(this._getImageSelected()):this._setSource(this._getImage()))},e.ImageMarker.prototype._updateBorder=function(t){if(t||this._borderPath){if(t&&"0"!=t){var i=e.PathUtils.rectangleWithBorderRadius(this._cx-this._width/2,this._cy-this._height/2,this._width,this._height,t,Math.min(this._width,this._height),"0"),n=new e.ClipPath;n.addPath(i),this.setClipPath(n)}if(this._borderPath){var o=e.PathUtils.rectangleWithBorderRadius(this._cx-this._width/2+this._borderWidth/2,this._cy-this._height/2+this._borderWidth/2,this._width-this._borderWidth,this._height-this._borderWidth,t,Math.min(this._width,this._height),"0");this._borderPath.setCmds(o)}}this._borderRadius=t},e.ImageMarker.prototype._getBorderRadius=function(){return this._borderRadius},e.ImageMarker.prototype.setStroke=function(t){if(!t||t.getWidth()<=0)return this._borderWidth=0,void(this._borderPath&&(this.removeChild(this._borderPath),this._borderPath=null));var i=t.getWidth();if(!this._borderPath||i!=this._borderWidth){var n=e.PathUtils.rectangleWithBorderRadius(this._cx-this._width/2+i/2,this._cy-this._height/2+i/2,this._width-i,this._height-i,this._borderRadius,Math.min(this._width,this._height),"0");this._borderPath?this._borderPath.setCmds(n):(this._borderPath=new e.Path(this.getCtx(),n),this._borderPath.setInvisibleFill(),this.addChild(this._borderPath))}this._borderWidth=i,this._borderPath.setStroke(t)},e.ImageMarker.prototype.setHollow=function(t,i){e.ImageMarker.superclass.setHollow.call(this,t,i);var n=this.isHollow();n?(this._imageContainer=this._elem.parentElement,this._imageContainer.removeChild(this._elem)):!n&&this._imageContainer&&this._imageContainer.appendChild(this._elem)},e.ImageMarker.prototype.copyShape=function(){return new e.ImageMarker(this.getCtx(),this.getCx(),this.getCy(),this.getWidth(),this.getHeight(),this._getBorderRadius(),this._getImage(),this._getImageSelected(),this._getImageHover(),this._getImageHoverSelected(),null)},e.ImageMarker.prototype.getDimensionsSelf=function(t){var i=this.getCx()-this.getWidth()/2,n=this.getCy()-this.getHeight()/2,o=new e.Rectangle(i,n,this.getWidth(),this.getHeight());return this.ConvertCoordSpaceRect(o,t)},e.Oval=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)},e.Obj.createSubclass(e.Oval,E),e.Oval.prototype.Init=function(t,i,n,o,r,s){e.Oval.superclass.Init.call(this,t,"ellipse",i,n,s),this.setRx(o).setRy(r)},e.Oval.prototype.getRx=function(){return this.GetProperty("rx")},e.Oval.prototype.setRx=function(t){return this.SetSvgProperty("rx",t)},e.Oval.prototype.getRy=function(){return this.GetProperty("ry")},e.Oval.prototype.setRy=function(t){return this.SetSvgProperty("ry",t)},e.Oval.prototype.copyShape=function(){return new e.Oval(this.getCtx(),this.getCx(),this.getCy(),this.getRx(),this.getRy())},e.Oval.prototype.getDimensionsSelf=function(t){var i=new e.Rectangle(this.getCx()-this.getRx(),this.getCy()-this.getRy(),2*this.getRx(),2*this.getRy());return this.ConvertCoordSpaceRect(i,t)},e.Path=function(t,e,i){this.Init(t,e,i)},e.Obj.createSubclass(e.Path,e.Shape),e.Path.prototype.Init=function(t,i,n){e.Path.superclass.Init.call(this,t,"path",n),e.ArrayUtils.isArray(i)?this.setCmds(e.PathUtils.getPathString(i)):this.setCmds(i)},e.Path.prototype.getCmds=function(){return this.GetProperty("d")},e.Path.prototype.setCmds=function(t){return t&&this.SetSvgProperty("d",t),this.SetProperty("arCmds",null),this},e.Path.prototype.getCommands=function(){var t=this.GetProperty("arCmds");return t||(t=this.GetProperty("d")?e.PathUtils.createPathArray(this.GetProperty("d")):null,this.SetProperty("arCmds",t)),t},e.Path.prototype.setCommands=function(t){var i=t?e.PathUtils.getPathString(t):null;return this.setCmds(i),this.SetProperty("arCmds",t),this},e.Path.prototype.copyShape=function(){return new e.Path(this.getCtx(),this.getCmds())},e.Path.prototype.GetAriaElem=function(){return e.Agent.isTouchDevice()&&this.CreateChildGroupElem(!1,!0),e.Path.superclass.GetAriaElem.call(this)},e.Polygon=function(t,e,i){this.Init(t,e,i)},e.Obj.createSubclass(e.Polygon,b),e.Polygon.prototype.Init=function(t,i,n){e.Polygon.superclass.Init.call(this,t,"polygon",i,n)};e.Polygon.prototype.copyShape=function(){return new e.Polygon(this.getCtx(),this.getPoints())};e.Polygon.prototype.GetAriaElem=function(){return e.Agent.isTouchDevice()&&this.CreateChildGroupElem(!1,!0),e.Polygon.superclass.GetAriaElem.call(this)},e.Polyline=function(t,e,i){this.Init(t,e,i)},e.Obj.createSubclass(e.Polyline,b),e.Polyline.prototype.Init=function(t,i,n){e.Polyline.superclass.Init.call(this,t,"polyline",i,n),e.ToolkitUtils.setAttrNullNS(this._elem,"fill","none")},e.Polyline.prototype.copyShape=function(){return new e.Polyline(this.getCtx(),this.getPoints())},e.Rect=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)},e.Obj.createSubclass(e.Rect,e.Shape),e.Rect._cssAttrs=["background-color","border-color","border-width"],e.Rect.prototype.Init=function(t,i,n,o,r,s){e.Rect.superclass.Init.call(this,t,"rect",s),this.setX(i).setY(n).setWidth(o).setHeight(r)},e.Rect.prototype.getX=function(){return this.GetProperty("x")},e.Rect.prototype.setX=function(t){return this.SetSvgProperty("x",t,0)},e.Rect.prototype.getY=function(){return this.GetProperty("y")},e.Rect.prototype.setY=function(t){return this.SetSvgProperty("y",t,0)},e.Rect.prototype.getWidth=function(){return this.GetProperty("width")},e.Rect.prototype.setWidth=function(t){return this.SetSvgProperty("width",null!=t?t:0)},e.Rect.prototype.getHeight=function(){return this.GetProperty("height")},e.Rect.prototype.setHeight=function(t){return this.SetSvgProperty("height",null!=t?t:0)},e.Rect.prototype.getRx=function(){return this.GetProperty("rx")},e.Rect.prototype.setRx=function(t){return this.SetSvgProperty("rx",t)},e.Rect.prototype.getRy=function(){return this.GetProperty("ry")},e.Rect.prototype.setRy=function(t){return this.SetSvgProperty("ry",t)},e.Rect.prototype.setCSSStyle=function(t){e.Rect.superclass.setCSSStyle.call(this,t);var i=this._elem;if(t){var n=t.getStyle("background-color");if(n&&e.ToolkitUtils.setAttrNullNS(i,"fill",n),n=t.getStyle("border-color"),n&&e.ToolkitUtils.setAttrNullNS(i,"stroke",n),n=t.getStyle("border-width"),n&&e.ToolkitUtils.setAttrNullNS(i,"stroke-width",n),n=t.getStyle("border-radius")){var o=e.StringUtils.trim(n).split(" ");o.length>0&&o[0]&&this.setRx(o[0]),o.length>1&&o[1]&&this.setRy(o[1])}}else e.ToolkitUtils.removeAttrNullNS(this._elem,"style")},e.Rect.prototype.setPos=function(t,e){this.setX(t).setY(e)},e.Rect.prototype.setCornerRadius=function(t,e){this.setRx(t).setRy(e)},e.Rect.prototype.setRect=function(t,i,n,o){t instanceof e.Rectangle?this.setX(t.x).setY(t.y).setWidth(t.w).setHeight(t.h):this.setX(t).setY(i).setWidth(n).setHeight(o)},e.Rect.prototype.copyShape=function(){var t=new e.Rect(this.getCtx(),this.getX(),this.getY(),this.getWidth(),this.getHeight());return t.setRx(this.getRx()).setRy(this.getRy()),t},e.Rect.prototype.getDimensionsSelf=function(t){var i=new e.Rectangle(this.getX(),this.getY(),this.getWidth(),this.getHeight());return this.ConvertCoordSpaceRect(i,t)},e.OutputText=function(t,e,i,n,o){this.Init(t,e,i,n,o)},e.Obj.createSubclass(e.OutputText,e.Shape),e.OutputText.ELLIPSIS="…",e.OutputText.REPRESENTATIVE_TEXT="MW",e.OutputText.BIDI_ZERO_WIDTH="​",e.OutputText.H_ALIGN_LEFT="left",e.OutputText.H_ALIGN_CENTER="center",e.OutputText.H_ALIGN_RIGHT="right",e.OutputText.V_ALIGN_TOP="top",e.OutputText.V_ALIGN_MIDDLE="middle",e.OutputText.V_ALIGN_BOTTOM="bottom",e.OutputText.V_ALIGN_AUTO="auto",e.OutputText.prototype.Init=function(t,i,n,o,r){e.OutputText.superclass.Init.call(this,t,"text",r),this._x=null!=n?n:0,this._baseline=!1,e.Agent.isRightToLeft(t)&&e.Agent.isPlatformIE()&&e.ToolkitUtils.setAttrNullNS(this.getElem(),"unicode-bidi","embed"),this.alignLeft(),this.alignTop(),this.setTextString(i),this.setX(n),this.setY(o),e.ToolkitUtils.removeAttrNullNS(this.getElem(),"fill"),this.setAriaProperty("hidden","true")},e.OutputText.prototype.getTextString=function(){return this._textString},e.OutputText.prototype.setTextString=function(t){t=null!=t?e.StringUtils.trim(String(t)):"",e.OutputText.needsTextAnchorAdjustment()&&e.Agent.isPlatformIE()&&t.charAt(0)!=e.OutputText.BIDI_ZERO_WIDTH&&(t=e.OutputText.BIDI_ZERO_WIDTH+t),this._textString=t;var i=this.getElem().firstChild;return null!==i?i.nodeValue=t:(i=document.createTextNode(t),e.ToolkitUtils.appendChildElem(this.getElem(),i)),e.Agent.isPlatformIE()&&this.setX(this._x),this},e.OutputText.prototype.isTruncated=function(){return null!=this.getUntruncatedTextString()},e.OutputText.prototype.getUntruncatedTextString=function(){return this._untruncatedTextString},e.OutputText.prototype.setUntruncatedTextString=function(t){t!=this.getTextString()&&(this._untruncatedTextString=t)},e.OutputText.prototype.getX=function(){var t;return t=e.Agent.isPlatformIE()?this._x:this.GetProperty("x"),t?t:0},e.OutputText.prototype.setX=function(t){return this._x=null!=t?t:0,e.Agent.isPlatformIE()?this.SetSvgProperty("x",this._x+this._getIEAlignmentOffset(),0):this.SetSvgProperty("x",t,0);
},e.OutputText.prototype._getIEAlignmentOffset=function(){var t=this.getHorizAlignment(),i=e.Agent.isRightToLeft();return t==e.OutputText.H_ALIGN_LEFT?i?this.measureDimensions().w:0:t==e.OutputText.H_ALIGN_CENTER?i?this.measureDimensions().w/2:-this.measureDimensions().w/2:t==e.OutputText.H_ALIGN_RIGHT?i?0:-this.measureDimensions().w:void 0},e.OutputText.prototype.getY=function(){var t=this.GetProperty("y");return t?t:0},e.OutputText.prototype.setY=function(t){return this.SetSvgProperty("y",t,0)},e.OutputText.prototype.setFontSize=function(t){var i=this.getCSSStyle();i=i?i.clone():new e.CSSStyle,i.setFontSize(e.CSSStyle.FONT_SIZE,String(t)),this.setCSSStyle(i)},e.OutputText.prototype.getHorizAlignment=function(){return this._horizAlign},e.OutputText.prototype.setHorizAlignment=function(t){t==e.OutputText.H_ALIGN_LEFT?this.alignLeft():t==e.OutputText.H_ALIGN_CENTER?this.alignCenter():t==e.OutputText.H_ALIGN_RIGHT&&this.alignRight()},e.OutputText.prototype.getVertAlignment=function(){return this._vertAlign},e.OutputText.prototype.setVertAlignment=function(t){t==e.OutputText.V_ALIGN_TOP?this.alignTop():t==e.OutputText.V_ALIGN_MIDDLE?this.alignMiddle():t==e.OutputText.V_ALIGN_BOTTOM?this.alignBottom():t==e.OutputText.V_ALIGN_AUTO&&this.alignAuto()},e.OutputText.prototype.alignLeft=function(){if(this._horizAlign!=e.OutputText.H_ALIGN_LEFT)if(this._horizAlign=e.OutputText.H_ALIGN_LEFT,e.Agent.isPlatformIE())this.setX(this._x);else{var t=e.OutputText.needsTextAnchorAdjustment();e.ToolkitUtils.setAttrNullNS(this.getElem(),"text-anchor",t?"end":"start","start")}},e.OutputText.prototype.alignCenter=function(){this._horizAlign!=e.OutputText.H_ALIGN_CENTER&&(this._horizAlign=e.OutputText.H_ALIGN_CENTER,e.Agent.isPlatformIE()?this.setX(this._x):e.ToolkitUtils.setAttrNullNS(this.getElem(),"text-anchor","middle","start"))},e.OutputText.prototype.alignRight=function(){if(this._horizAlign!=e.OutputText.H_ALIGN_RIGHT)if(this._horizAlign=e.OutputText.H_ALIGN_RIGHT,e.Agent.isPlatformIE())this.setX(this._x);else{var t=e.OutputText.needsTextAnchorAdjustment();e.ToolkitUtils.setAttrNullNS(this.getElem(),"text-anchor",t?"start":"end","start")}},e.OutputText.prototype.alignTop=function(){this._vertAlign!=e.OutputText.V_ALIGN_TOP&&(this._vertAlign==e.OutputText.V_ALIGN_BOTTOM&&e.Agent.isBrowserSafari()&&this._setBaseline(!1),this._vertAlign=e.OutputText.V_ALIGN_TOP,e.Agent.isPlatformIE()?this._setBaseline(!0):this.SetDominantBaselineAttr("text-before-edge"))},e.OutputText.prototype.alignMiddle=function(){this._vertAlign!=e.OutputText.V_ALIGN_MIDDLE&&(this._vertAlign==e.OutputText.V_ALIGN_BOTTOM&&e.Agent.isBrowserSafari()&&this._setBaseline(!1),this._vertAlign=e.OutputText.V_ALIGN_MIDDLE,e.Agent.isPlatformIE()?this._setBaseline(!0):this.SetDominantBaselineAttr("middle"))},e.OutputText.prototype.alignBottom=function(){this._vertAlign!=e.OutputText.V_ALIGN_BOTTOM&&(this._vertAlign=e.OutputText.V_ALIGN_BOTTOM,e.Agent.isPlatformIE()?this._setBaseline(!0):e.Agent.isBrowserSafari()?(this._setBaseline(!0),this.SetDominantBaselineAttr(null)):this.SetDominantBaselineAttr("text-after-edge"))},e.OutputText.prototype.alignAuto=function(){this._vertAlign!=e.OutputText.V_ALIGN_AUTO&&(this._vertAlign==e.OutputText.V_ALIGN_BOTTOM&&e.Agent.isBrowserSafari()&&this._setBaseline(!1),this._vertAlign=e.OutputText.V_ALIGN_AUTO,e.Agent.isPlatformIE()?this._setBaseline(!1):this.SetDominantBaselineAttr(null))},e.OutputText.prototype._setBaseline=function(t){this._baseline=t,this.setMatrix(this.getMatrix())},e.OutputText.prototype.SetDominantBaselineAttr=function(t){t?e.ToolkitUtils.setAttrNullNS(this.getElem(),"dominant-baseline",t):e.ToolkitUtils.removeAttrNullNS(this.getElem(),"dominant-baseline")},e.OutputText.prototype.setCSSStyle=function(t){e.OutputText.superclass.setCSSStyle.call(this,t);var i=this.getOuterElem();if(t){var n=t.getStyle("color"),o=e.ColorUtils.fixColorForPlatform(n);o&&o.color&&(e.ToolkitUtils.setAttrNullNS(i,"fill",o.color),null!=o.alpha&&e.ToolkitUtils.setAttrNullNS(i,"fill-opacity",o.alpha,1)),n=t.getStyle("font-family"),n&&!this.getCtx().isDefaultFontFamily(n)?e.ToolkitUtils.setAttrNullNS(i,"font-family",n):e.ToolkitUtils.removeAttrNullNS(i,"font-family"),n=t.getStyle("font-size"),n&&n!=this.getCtx().getDefaultFontSize()?(e.ToolkitUtils.setAttrNullNS(i,"font-size",n),(e.Agent.isPlatformIE()||e.Agent.isBrowserSafari())&&this.setMatrix(this.getMatrix())):e.ToolkitUtils.removeAttrNullNS(i,"font-size"),n=t.getStyle("font-style"),n&&e.ToolkitUtils.setAttrNullNS(i,"font-style",n),n=t.getStyle("font-weight"),n&&e.ToolkitUtils.setAttrNullNS(i,"font-weight",n),n=t.getStyle("text-decoration"),n&&e.ToolkitUtils.setAttrNullNS(i,"text-decoration",n),n=t.getStyle("cursor"),n&&e.ToolkitUtils.setAttrNullNS(i,"cursor",n),e.Agent.isPlatformIE()&&this.setX(this._x)}},e.OutputText.prototype._getBaselineTranslation=function(){if(this._baseline){if(this._textString&&!this._isRepresentativeText())return e.TextUtils.getBaselineTranslation(this);var t=this.getVertAlignment();if(t!=e.OutputText.V_ALIGN_AUTO){var i=e.ToolkitUtils.getAttrNullNS(this.getElem(),"font-size");if(i||(i=e.ToolkitUtils.getAttrNullNS(this.getOuterElem(),"font-size")),(!i||isNaN(i)&&i.indexOf("px")==-1)&&(i=e.StyleUtils.DEFAULT_FONT_SIZE),i=parseFloat(i),t==e.OutputText.V_ALIGN_TOP)return.8*i;if(t==e.OutputText.V_ALIGN_MIDDLE)return.3*i;if(t==e.OutputText.V_ALIGN_BOTTOM)return-.2*i}}return 0},e.OutputText.prototype._getBaselineAdjustedMatrix=function(t){if(this._baseline){t||(t=new e.Matrix);var i=new e.Matrix(null,null,null,null,null,this._getBaselineTranslation());i.concat(t),t=i}return t},e.OutputText.prototype.setMatrix=function(t){(e.Agent.isPlatformIE()||e.Agent.isBrowserSafari())&&(this._matrixForIE=t,t=this._getBaselineAdjustedMatrix(t)),e.OutputText.superclass.setMatrix.call(this,t)},e.OutputText.prototype.getMatrix=function(){var t=null;return(e.Agent.isPlatformIE()||e.Agent.isBrowserSafari())&&(t=this._matrixForIE),t||(t=e.OutputText.superclass.getMatrix.call(this)),t},e.OutputText.prototype._isRepresentativeText=function(){return this._textString==e.OutputText.REPRESENTATIVE_TEXT||this._textString==e.OutputText.BIDI_ZERO_WIDTH||this._textString==e.OutputText.BIDI_ZERO_WIDTH+e.OutputText.REPRESENTATIVE_TEXT},e.OutputText.prototype.GetSvgDimensions=function(){var t=e.OutputText.superclass.GetSvgDimensions.call(this);return t&&(t.y+=this._getBaselineTranslation(),this._isRepresentativeText()||(t.h=e.TextUtils.getTextStringHeight(this.getCtx(),this.getCSSStyle()))),t},e.OutputText.prototype.UpdateSelectionEffect=function(){},e.OutputText.prototype.getOptimalFontSize=function(t){for(var e=Math.max(Math.min(t.w/this.getTextString().length,t.h/2),9);e<51;e+=1){this.setFontSize(e);var i=this.measureDimensions();if(i.w>t.w||i.h>t.h)return Math.min(e-1,50)}return 50},e.OutputText.prototype.measureDimensions=function(t){var i=null!=this.getTextString()?this.getTextString():"",n=this.getHorizAlignment(),o=this.getVertAlignment();e.OutputText._cache||(e.OutputText._cache=new e.Cache);var r,s=this.getCSSStyle(),a=null!=s?s.hashCodeForTextMeasurement():"",l=i.length>0?i+a:"",h=e.OutputText._cache.get(l);if(null!=h)r=new e.Rectangle(h.x+this.getX(),h.y+this.getY(),h.w,h.h);else{e.Agent.isPlatformIE()||this.alignLeft(),this.alignAuto();for(var u=!1,d=this.getCtx().getStage(),c=this.getParent();c;){if(c==d){u=!0;break}c=c.getParent()}if(u&&(r=this.GetSvgDimensions()),r||(r=new e.Rectangle(0,0,0,0)),r.w<=0&&r.h<=0&&i.length>0){var p,_=this.getParent();_&&(p=_.getChildIndex(this)),d.addChild(this),r=this.GetSvgDimensions(),d.removeChild(this),_&&_.addChildAt(this,p)}e.Agent.isPlatformIE()?n===e.OutputText.H_ALIGN_RIGHT?r.x+=r.w:n===e.OutputText.H_ALIGN_CENTER&&(r.x+=r.w/2):this.setHorizAlignment(n),this.setVertAlignment(o),h=new e.Rectangle(0,r.y-this.getY(),r.w,r.h),e.OutputText._cache.put(l,h),r.x=this.getX()}return n===e.OutputText.H_ALIGN_RIGHT?r.x-=r.w:n===e.OutputText.H_ALIGN_CENTER&&(r.x-=r.w/2),o===e.OutputText.V_ALIGN_TOP?r.y-=h.y:o===e.OutputText.V_ALIGN_BOTTOM?r.y-=h.y+h.h:o===e.OutputText.V_ALIGN_MIDDLE&&(r.y-=h.y+h.h/2),t&&t!==this?this.ConvertCoordSpaceRect(r,t):r},e.OutputText.prototype.copyShape=function(){var t=new e.OutputText(this.getCtx(),this.getTextString(),this.getX(),this.getY());return t.setCSSStyle(this.getCSSStyle()),t.setHorizAlignment(this.getHorizAlignment()),t.setVertAlignment(this.getVertAlignment()),t},e.OutputText.prototype.addChild=function(t){if(e.Agent.isEnvironmentTest()){print("dvt.OutputText.prototype.addChild: Text should not be used as a shape container.");var i=null;i.errorShouldOccurDueToInvalidAddChild()}},e.OutputText.needsTextAnchorAdjustment=function(){return e.Agent.isRightToLeft()&&!e.Agent.isEnvironmentBatik()},e.OutputText.prototype.getDimensionsSelf=function(t){return this.measureDimensions(t)},e.OutputText.getCachedDimensions=function(t,i){var n=null!=i?i.hashCodeForTextMeasurement():"",o=t.length>0?t+n:"";return e.OutputText._cache?e.OutputText._cache.get(o):null},e.BackgroundOutputText=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)},e.Obj.createSubclass(e.BackgroundOutputText,e.Container),e.BackgroundOutputText._PADDING=.15,e.BackgroundOutputText.prototype.Init=function(t,i,n,o,r,s){e.BackgroundOutputText.superclass.Init.call(this,t,"g",s),this.TextInstance=this.CreateTextInstance(t,i,n,o,s),this._backgroundRect=null,r&&this.setCSSStyle(r),this.addChild(this.TextInstance)},e.BackgroundOutputText.prototype.getTextString=function(){return this.TextInstance.getTextString()},e.BackgroundOutputText.prototype.setTextString=function(t){return this.TextInstance.setTextString(t),this},e.BackgroundOutputText.prototype.isTruncated=function(){return this.TextInstance.isTruncated()},e.BackgroundOutputText.prototype.getUntruncatedTextString=function(){return this.TextInstance.getUntruncatedTextString()},e.BackgroundOutputText.prototype.setUntruncatedTextString=function(t){this.TextInstance.setUntruncatedTextString(t)},e.BackgroundOutputText.prototype.getX=function(){return this.TextInstance.getX()},e.BackgroundOutputText.prototype.setX=function(t){return this.TextInstance=this.TextInstance.setX(t),this._realignBackground(),this},e.BackgroundOutputText.prototype.getY=function(){return this.TextInstance.getY()},e.BackgroundOutputText.prototype.setY=function(t){return this.TextInstance=this.TextInstance.setY(t),this._realignBackground(),this},e.BackgroundOutputText.prototype.setFontSize=function(t){this.TextInstance.setFontSize(t),this._style.setFontSize(e.CSSStyle.FONT_SIZE,String(t)),this._realignBackground()},e.BackgroundOutputText.prototype.getHorizAlignment=function(){return this.TextInstance.getHorizAlignment()},e.BackgroundOutputText.prototype.setHorizAlignment=function(t){this.TextInstance.setHorizAlignment(t),this._realignBackground()},e.BackgroundOutputText.prototype.getVertAlignment=function(){return this.TextInstance.getVertAlignment()},e.BackgroundOutputText.prototype.setVertAlignment=function(t){this.TextInstance.setVertAlignment(t),this._realignBackground()},e.BackgroundOutputText.prototype.alignLeft=function(){this.TextInstance.alignLeft(),this._realignBackground()},e.BackgroundOutputText.prototype.alignCenter=function(){this.TextInstance.alignCenter(),this._realignBackground()},e.BackgroundOutputText.prototype.alignRight=function(){this.TextInstance.alignRight(),this._realignBackground()},e.BackgroundOutputText.prototype.alignTop=function(){this.TextInstance.alignTop(),this._realignBackground()},e.BackgroundOutputText.prototype.alignMiddle=function(){this.TextInstance.alignMiddle(),this._realignBackground()},e.BackgroundOutputText.prototype.alignBottom=function(){this.TextInstance.alignBottom(),this._realignBackground()},e.BackgroundOutputText.prototype.alignAuto=function(){this.TextInstance.alignAuto(),this._realignBackground()},e.BackgroundOutputText.prototype.setCSSStyle=function(t){t.getStyle(e.CSSStyle.BACKGROUND_COLOR)&&!t.getStyle(e.CSSStyle.COLOR)&&t.setStyle(e.CSSStyle.COLOR,e.ColorUtils.getContrastingTextColor(t.getStyle(e.CSSStyle.BACKGROUND_COLOR))),this.TextInstance&&this.TextInstance.setCSSStyle(t),(this._backgroundRect||e.BackgroundOutputText._hasBackgroundStyles(t))&&(this._backgroundRect||(this._backgroundRect=this.CreateBackground(this.getCtx(),this.TextInstance),this.addChildAt(this._backgroundRect,0)),this._setBackgroundCSSStyle(this._backgroundRect,t)),this._style=t},e.BackgroundOutputText.prototype.getCSSStyle=function(){return this._style},e.BackgroundOutputText.prototype.setMatrix=function(t){this.TextInstance.setMatrix(t),this._backgroundRect&&this._backgroundRect.setMatrix(t)},e.BackgroundOutputText.prototype.getMatrix=function(){return this.TextInstance.getMatrix()},e.BackgroundOutputText.prototype.getOptimalFontSize=function(t){return this.TextInstance.getOptimalFontSize(t)},e.BackgroundOutputText.prototype.measureDimensions=function(t){return this.getDimensions(t)},e.BackgroundOutputText.prototype.getTextDimensions=function(t){return this.TextInstance.getDimensions(t)},e.BackgroundOutputText.prototype.getDimensions=function(t){var i=this.TextInstance.getDimensions(t),n=i.h*e.BackgroundOutputText._PADDING;return i.x-=n,i.w+=2*n,i},e.BackgroundOutputText.prototype.copyShape=function(){return this.TextInstance.copyShape()},e.BackgroundOutputText.needsTextAnchorAdjustment=function(t){return this.TextInstance.needsTextAnchorAdjustment(t)},e.BackgroundOutputText.getCachedDimensions=function(t,e){return this.TextInstance.getCachedDimensions(t,e)},e.BackgroundOutputText.prototype.CreateTextInstance=function(t,i,n,o,r){return new e.OutputText(t,i,n,o,r)},e.BackgroundOutputText.prototype.CreateBackground=function(t,i){var n=i.getDimensions(),o=n.h*e.BackgroundOutputText._PADDING;return new e.Rect(t,n.x-o,n.y,n.w+2*o,n.h)},e.BackgroundOutputText.prototype._realignBackground=function(){if(this._backgroundRect){var t=this.TextInstance.getDimensions(),i=.15*t.h,n=this.getHorizAlignment(),o=this.getVertAlignment();n==e.OutputText.H_ALIGN_LEFT?this._backgroundRect.setX(this.getX()-i):n==e.OutputText.H_ALIGN_CENTER?this._backgroundRect.setX(this.getX()-.5*t.w-i):n==e.OutputText.H_ALIGN_RIGHT&&this._backgroundRect.setX(this.getX()-t.w-i);var r=parseFloat(this._style.getFontSize());isNaN(r)&&(r=0);var s=0;(e.Agent.isBrowserChrome()||e.Agent.isEnvironmentTest())&&o==e.OutputText.V_ALIGN_MIDDLE?s=.12*r:e.Agent.isPlatformIE()&&o==e.OutputText.V_ALIGN_BOTTOM&&(s=.4*-r);var a=this.GetTextDimensionsForRealign(t);o==e.OutputText.V_ALIGN_TOP?this._backgroundRect.setY(this.getY()):o==e.OutputText.V_ALIGN_MIDDLE?this._backgroundRect.setY(this.getY()-.5*a-s):o==e.OutputText.V_ALIGN_BOTTOM?this._backgroundRect.setY(this.getY()-a-s):o==e.OutputText.V_ALIGN_AUTO&&this._backgroundRect.setY(t.y),this._backgroundRect.setWidth(t.w+2*i),this._backgroundRect.setHeight(t.h)}},e.BackgroundOutputText.prototype._setBackgroundCSSStyle=function(t,i){if(i){var n=i.getStyle(e.CSSStyle.BACKGROUND_COLOR);null!=n?t.setSolidFill(n):t.setInvisibleFill();var o=i.getStyle(e.CSSStyle.BORDER_COLOR),r=i.getStyle(e.CSSStyle.BORDER_WIDTH),s=i.getStyle(e.CSSStyle.BORDER_RADIUS);if(o||r||s){var a=new e.CSSStyle;a.setStyle(e.CSSStyle.BORDER_COLOR,o),a.setStyle(e.CSSStyle.BORDER_WIDTH,r),a.setStyle(e.CSSStyle.BORDER_RADIUS,s),t.setCSSStyle(a)}}else t.setInvisibleFill();t.setMouseEnabled(!1)},e.BackgroundOutputText.prototype.GetTextDimensionsForRealign=function(t){return t.h},e.BackgroundOutputText._hasBackgroundStyles=function(t){return!!t&&!!(t.getStyle(e.CSSStyle.BORDER_COLOR)||t.getStyle(e.CSSStyle.BORDER_WIDTH)||t.getStyle(e.CSSStyle.BORDER_RADIUS)||t.getStyle(e.CSSStyle.BACKGROUND_COLOR))},e.MultilineText=function(t,e,i,n,o){this.Init(t,e,i,n,o)},e.Obj.createSubclass(e.MultilineText,e.Container),e.MultilineText._LINE_SPACE=0,e.MultilineText.H_ALIGN_LEFT="left",e.MultilineText.H_ALIGN_CENTER="center",e.MultilineText.H_ALIGN_RIGHT="right",e.MultilineText.V_ALIGN_TOP="top",e.MultilineText.V_ALIGN_MIDDLE="middle",e.MultilineText.V_ALIGN_BOTTOM="bottom",e.MultilineText.prototype.Init=function(t,i,n,o,r){e.MultilineText.superclass.Init.call(this,t,null,r),this._textInstance=null,this._additionalLines=[],this._lineHeight=null,this._yCoord=null,this._noWrap=!1,this.setTextString(i),this.setX(n?n:0),this.setY(o?o:0),this.setMaxLines(1/0)},e.MultilineText.prototype.getTextString=function(){return this._textString},e.MultilineText.prototype.setTextString=function(t){this._textString=null!=t?String(t):null,this._textInstance?(this._textInstance.setTextString(t),this._removeAdditionalLines()):(this._textInstance=new e.OutputText(this.getCtx(),this._textString),this.addChild(this._textInstance)),this._bTruncated=!1},e.MultilineText.prototype._getTextLines=function(){var t=this._additionalLines.slice();return this._textInstance.getParent()==this&&t.unshift(this._textInstance),t},e.MultilineText.prototype.getX=function(){return this._textInstance.getX()},e.MultilineText.prototype.setX=function(t){return e.ArrayUtils.forEach(this._getTextLines(),function(e){e.setX(t)}),this},e.MultilineText.prototype.getY=function(){return this._textInstance.getY()},e.MultilineText.prototype.getYAlignCoord=function(){return this._yCoord},e.MultilineText.prototype.setY=function(t){if(this._yCoord=t,this._vertAlign)this._alignVerticalText();else{var i=t-this._textInstance.getY();i||(i=t),e.ArrayUtils.forEach(this._getTextLines(),function(t){var e=t.getY();t.setY(e?e+i:i)})}return this},e.MultilineText.prototype.getMaxLines=function(){return this.GetProperty("maxLines")},e.MultilineText.prototype.setMaxLines=function(t){if(t>0)return this.SetProperty("maxLines",t)},e.MultilineText.prototype.isTruncated=function(){return this._bTruncated},e.MultilineText.prototype.getHorizAlignment=function(){return this._textInstance.getHorizAlignment()},e.MultilineText.prototype.setHorizAlignment=function(t){return e.ArrayUtils.forEach(this._getTextLines(),function(e){e.setHorizAlignment(t)}),this},e.MultilineText.prototype.alignLeft=function(){this._horizAlign!=e.MultilineText.H_ALIGN_LEFT&&(this._horizAlign=e.MultilineText.H_ALIGN_LEFT,e.ArrayUtils.forEach(this._getTextLines(),function(t){t.alignLeft()}))},e.MultilineText.prototype.alignCenter=function(){this._horizAlign!=e.MultilineText.H_ALIGN_CENTER&&(this._horizAlign=e.MultilineText.H_ALIGN_CENTER,e.ArrayUtils.forEach(this._getTextLines(),function(t){t.alignCenter()}))},e.MultilineText.prototype.alignRight=function(){this._horizAlign!=e.MultilineText.H_ALIGN_RIGHT&&(this._horizAlign=e.MultilineText.H_ALIGN_RIGHT,e.ArrayUtils.forEach(this._getTextLines(),function(t){t.alignRight()}))},e.MultilineText.prototype.alignTop=function(){this._vertAlign!=e.MultilineText.V_ALIGN_TOP&&(this._vertAlign=e.MultilineText.V_ALIGN_TOP,this._alignVerticalText(),e.ArrayUtils.forEach(this._getTextLines(),function(t){t.alignTop()}))},e.MultilineText.prototype.alignMiddle=function(){this._vertAlign!=e.MultilineText.V_ALIGN_MIDDLE&&(this._vertAlign=e.MultilineText.V_ALIGN_MIDDLE,this._alignVerticalText(),e.ArrayUtils.forEach(this._getTextLines(),function(t){t.alignMiddle()}))},e.MultilineText.prototype.alignBottom=function(){this._vertAlign!=e.MultilineText.V_ALIGN_BOTTOM&&(this._vertAlign=e.MultilineText.V_ALIGN_BOTTOM,this._alignVerticalText(),e.ArrayUtils.forEach(this._getTextLines(),function(t){t.alignBottom()}))},e.MultilineText.prototype._alignVerticalText=function(){if(this._vertAlign)for(var t=this.getYAlignCoord(),i=this.getLineCount(),n=this.getLineHeight(),o=this._getTextLines(),r=0,s=0;s<o.length;s++){var a=o[s];if(this._vertAlign==e.MultilineText.V_ALIGN_TOP)r=n*s;else if(this._vertAlign==e.MultilineText.V_ALIGN_MIDDLE){var l=n*(i-1);r=n*s-l/2}else this._vertAlign==e.MultilineText.V_ALIGN_BOTTOM&&(r=-n*(i-s-1));a.setY(t+r)}},e.MultilineText.prototype.getCSSStyle=function(){return this._textInstance.getCSSStyle()},e.MultilineText.prototype.setCSSStyle=function(t){return e.ArrayUtils.forEach(this._getTextLines(),function(e){e.setCSSStyle(t)}),this},e.MultilineText.prototype.copyShape=function(){var t=new e.MultilineText(this.getCtx(),this.getTextString(),this.getX(),this.getY());return t.setCSSStyle(this.getCSSStyle()).setHorizAlignment(this.getHorizAlignment()).setMaxLines(this.getMaxLines()),t},e.MultilineText.prototype._removeAdditionalLines=function(){for(var t=0;t<this._additionalLines.length;t++)this.removeChild(this._additionalLines[t]);this._additionalLines=[]},e.MultilineText.prototype.__fitText=function(t,i,n){return this._textInstance.setTextString(this.getTextString()),this._removeAdditionalLines(),e.TextUtils.fitText(this._textInstance,t,i,this,n)?!this._textInstance.isTruncated()||(!this.isWrapEnabled()||this.wrapText(t,i,n,!1)):(this.getParent().removeChild(this),!1)},e.MultilineText.prototype.wrapText=function(t,i,n,o){var r=this.getLineHeight(),s=r*e.MultilineText._LINE_SPACE,a=this.getMaxLines(),l=Math.min(i,a*(r+s)-s)-r-s;this.getLineCount()>1&&this._removeAdditionalLines();var h=this.getTextString().split(/\s+/);h.reverse();for(var u=this._textInstance,d=null,c=!0;h.length>0;){var p=h.pop(),_=d?d+" "+p:p;if(u.setTextString(_),u.setUntruncatedTextString(null),!e.TextUtils.fitText(u,t,1/0,this,n))return!c;if(u.isTruncated()){if(l<s+r)return this._bTruncated=!0,!0;if(d)u.setTextString(d),h.push(p);else{if(o)return this._textInstance.setTextString(this.getTextString()),this._removeAdditionalLines(),!1;this._bTruncated=!0}if(h.length>0){var g=u.copyShape();g.setY(u.getY()+s+r),this.addChild(g),this._additionalLines.push(g),u=g,d=null,l-=s+r}}else d=_;c=!1}return!0},e.MultilineText.prototype.GetSvgDimensions=function(t){var i;return e.ArrayUtils.forEach(this._getTextLines(),function(e){i=i?i.getUnion(e.measureDimensions(t)):e.measureDimensions(t)}),i?i:new e.Rectangle(0,0,0,0)},e.MultilineText.prototype.getLineCount=function(){return this._additionalLines.length+1},e.MultilineText.prototype.getLineHeight=function(){return this._lineHeight||(this._lineHeight=this._textInstance.measureDimensions().h),this._lineHeight},e.MultilineText.prototype.setWrapEnabled=function(t){0==t&&(this._textInstance.getParent()!=this&&this.addChild(this._textInstance),this._textInstance.getTextString()||this._textInstance.setTextString(this.getTextString()),this._removeAdditionalLines()),this._noWrap=!t},e.MultilineText.prototype.isWrapEnabled=function(){return 0==this._noWrap},e.MultilineText.prototype.getUntruncatedTextString=function(){return this.isTruncated()?this.getTextString():null},e.MultilineText.prototype.setUntruncatedTextString=function(t){},e.MultilineText.prototype.measureDimensions=function(t){return this.GetSvgDimensions(t)},e.MultilineText.prototype.getDimensions=function(t){return this.GetSvgDimensions(t)},e.MultilineText.prototype.UpdateSelectionEffect=function(){},e.MultilineText.prototype.getHorizAlignment=function(){return this._horizAlign},e.MultilineText.prototype.setHorizAlignment=function(t){t==e.MultilineText.H_ALIGN_LEFT?this.alignLeft():t==e.MultilineText.H_ALIGN_CENTER?this.alignCenter():t==e.MultilineText.H_ALIGN_RIGHT&&this.alignRight()},e.MultilineText.prototype.getVertAlignment=function(){return this._vertAlign},e.MultilineText.prototype.setVertAlignment=function(t){t==e.MultilineText.V_ALIGN_TOP?this.alignTop():t==e.MultilineText.V_ALIGN_MIDDLE?this.alignMiddle():t==e.MultilineText.V_ALIGN_BOTTOM&&this.alignBottom()},e.BackgroundMultilineText=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)},e.Obj.createSubclass(e.BackgroundMultilineText,e.BackgroundOutputText),e.BackgroundMultilineText.prototype.Init=function(t,i,n,o,r,s){e.BackgroundMultilineText.superclass.Init.call(this,t,i,n,o,r,s)},e.BackgroundMultilineText.prototype.wrapText=function(t,e,i,n){return this.TextInstance.wrapText(t,e,i,n)},e.BackgroundMultilineText.prototype.CreateTextInstance=function(t,i,n,o,r){return new e.MultilineText(t,i,n,o,r)},e.BackgroundMultilineText.prototype.GetTextDimensionsForRealign=function(){return this.getLineHeight()},e.BackgroundMultilineText.prototype.measureDimensions=function(){return this.TextInstance.measureDimensions()},e.BackgroundMultilineText.prototype.__fitText=function(t,e,i){return this.TextInstance.__fitText(t,e,i)},e.BackgroundMultilineText.prototype._getTextLines=function(){return this.TextInstance._getTextLines()},e.BackgroundMultilineText.prototype.getLineHeight=function(){return this.TextInstance.getLineHeight()},e.BackgroundMultilineText.prototype.getLineCount=function(){return this.TextInstance.getLineCount()},e.BackgroundMultilineText.prototype.getYAlignCoord=function(){return this.TextInstance.getYAlignCoord()},e.BackgroundMultilineText.prototype.setWrapEnabled=function(t){this.TextInstance.setWrapEnabled(t)},e.BackgroundMultilineText.prototype.isWrapEnabled=function(){return this.TextInstance.isWrapEnabled()},e.BackgroundMultilineText.prototype.UpdateSelectionEffect=function(){},e.Use=function(t,e,i,n,o){this.Init(t,e,i,n,o)},e.Obj.createSubclass(e.Use,e.Displayable),e.Use._uniqueSeed=0,e.Use.prototype.Init=function(t,i,n,o,r){e.Use.superclass.Init.call(this,t,"use",r);var s=o.getId();if(s||(s="use"+e.Use._uniqueSeed++,o.setId(s)),t.existsGlobalDefReference(s))t.increaseGlobalDefReference(s);else{var a=o.getElem();e.ToolkitUtils.setAttrNullNS(a,"id",s),t.appendDefs(a),t.increaseGlobalDefReference(s)}this._targetId=s,e.ToolkitUtils.setHref(this._elem,e.ToolkitUtils.getUrlPathById(s)),this.setX(i).setY(n)},e.Use.prototype.getX=function(){return this.GetProperty("x")},e.Use.prototype.setX=function(t){return this.SetSvgProperty("x",t,0)},e.Use.prototype.getY=function(){return this.GetProperty("y")},e.Use.prototype.setY=function(t){return this.SetSvgProperty("y",t,0)},e.Use.prototype.destroy=function(){this.getCtx().decreaseGlobalDefReference(this._targetId),e.Use.superclass.destroy.call(this)},e.StyleUtils={},e.Obj.createSubclass(e.StyleUtils,e.Obj),e.StyleUtils.DEFAULT_FONT_FAMILY="Tahoma,Verdana,Helvetica,sans-serif",e.StyleUtils.DEFAULT_FONT_SIZE="11px",e.StyleUtils.DEFAULT_FONT_COLOR="black";e.StyleUtils.getStyle=function(t,e,i){return t&&null!==t[e]&&"undefined"!=typeof t[e]?t[e]:i};e.StyleUtils.setStyle=function(t,e,i){t&&null!==i&&"undefined"!=typeof i&&(t[e]=i)},e.StyleUtils.getShadow=function(t){var i=null;if(null!=t&&"none"!=t){var n,o=0,r=0,s=0,a=t.replace(/, /g,",").split(" ");if(null==t.match(/rgb/i)&&(a[a.length]="rgba(0, 0, 0, 0.2)"),a.length<3)return null;for(var l=0;l<a.length;l++)0==l?o=parseInt(a[0]):1==l?r=parseInt(a[1]):2==l&&null==a[l].match(/rgb/i)?s=parseInt(a[l]):a[l].match(/rgb/i)&&(n=a[l]);var h=Math.sqrt(o*o+r*r),u=180*Math.atan2(r,o)/Math.PI;i=new e.Shadow(n,h,s,s,u,1,3,!1,!1,!1)}return i},e.StyleUtils.getTimeMilliseconds=function(t){return"string"==typeof t&&(t="ms"==t.slice(-2)?parseInt(t.slice(0,-2)):"s"==t.slice(-1)?1e3*parseFloat(t.slice(0,-1)):parseInt(t)),t},e.CSSGradient=function(t){this.Init(t)},e.Obj.createSubclass(e.CSSGradient,e.Obj),e.CSSGradient.LINEAR=0,e.CSSGradient.RADIAL=1,e.CSSGradient.prototype.Init=function(t){this._type=t},e.CSSGradient.prototype.getGradientType=function(){return this._type},e.CSSGradient.prototype.getAlphas=function(){return this._arAlphas},e.CSSGradient.prototype.setAlphas=function(t){this._arAlphas=t},e.CSSGradient.prototype.getColors=function(){return this._arColors},e.CSSGradient.prototype.setColors=function(t){this._arColors=t},e.CSSGradient.prototype.getRatios=function(){return this._arRatios},e.CSSGradient.prototype.setRatios=function(t){this._arRatios=t};var T=function(){this.Init()};e.Obj.createSubclass(T,e.CSSGradient),T.LEFT=0,T.BOTTOM_LEFT=45,T.BOTTOM=90,T.BOTTOM_RIGHT=135,T.RIGHT=180,T.TOP_RIGHT=225,T.TOP=270,T.TOP_LEFT=315,T.prototype.Init=function(){T.superclass.Init.call(this,e.CSSGradient.LINEAR)},T.prototype.getAngle=function(){return this._angle},T.prototype.setAngle=function(t){this._angle=t},e.GradientParser=function(){},e.Obj.createSubclass(e.GradientParser,e.Obj),e.GradientParser.WEBKIT_GD_LINEAR="-webkit-linear-gradient",e.GradientParser.FIREFOX_GD_LINEAR="-moz-linear-gradient",e.GradientParser.IE_GD_LINEAR="progid:DXImageTransform.Microsoft.gradient",e.GradientParser.IE_GD_LINEAR2="progid:DXImageTransform.Microsoft.Gradient",e.GradientParser.IE7_GD_FILTER="filter",e.GradientParser.IE8_GD_FILTER="-ms-filter",e.GradientParser.IE10_GD_LINEAR="-ms-linear-gradient",e.GradientParser.IE_GD_START_COLOR_STR="startColorstr",e.GradientParser.IE_GD_END_COLOR_STR="endColorstr",e.GradientParser.IE_GD_GRADIENT_TYPE="GradientType",e.GradientParser.OLD_WEBKIT_GD_LINEAR="-webkit-gradient",e.GradientParser.GD_LINEAR="linear-gradient",e.GradientParser.GD_RADIAL="radial-gradient",e.GradientParser.GD_TOP="top",e.GradientParser.GD_BOTTOM="bottom",e.GradientParser.GD_LEFT="left",e.GradientParser.GD_RIGHT="right",e.GradientParser.GD_CENTER="center",e.GradientParser.GD_TO="to",e.GradientParser.parseCSSGradient=function(t){if(null!=t){if(t=e.StringUtils.trim(t),e.GradientParser._startsWith(t,e.GradientParser.WEBKIT_GD_LINEAR))return t=e.GradientParser._removeParenthesis(t,e.GradientParser.WEBKIT_GD_LINEAR),e.GradientParser._parseLinearGradient(t);if(e.GradientParser._startsWith(t,e.GradientParser.FIREFOX_GD_LINEAR))return t=e.GradientParser._removeParenthesis(t,e.GradientParser.FIREFOX_GD_LINEAR),e.GradientParser._parseLinearGradient(t);if(e.GradientParser._startsWith(t,e.GradientParser.IE_GD_LINEAR))return t=e.GradientParser._removeParenthesis(t,e.GradientParser.IE_GD_LINEAR),e.GradientParser._parseIELinearGradient(t);if(e.GradientParser._startsWith(t,e.GradientParser.IE_GD_LINEAR2))return t=e.GradientParser._removeParenthesis(t,e.GradientParser.IE_GD_LINEAR2),e.GradientParser._parseIELinearGradient(t);if(e.GradientParser._startsWith(t,e.GradientParser.IE10_GD_LINEAR))return t=e.GradientParser._removeParenthesis(t,e.GradientParser.IE10_GD_LINEAR),e.GradientParser._parseLinearGradient(t);if(e.GradientParser._startsWith(t,e.GradientParser.GD_LINEAR))return t=e.GradientParser._removeParenthesis(t,e.GradientParser.GD_LINEAR),e.GradientParser._parseLinearGradient(t)}return null},e.GradientParser._parseLinearGradient=function(t){var i=new RegExp("(-?(?:\\d*\\.)?\\d+)"),n=new RegExp("(deg|rad|grad|turn)"),o=new RegExp("(left|right)"),r=new RegExp("(top|bottom)"),s=new RegExp("(?:(to)\\s+)"),a=new RegExp("(?:"+i.source+n.source+")"),l=new RegExp("(?:"+o.source+"(?:\\s+"+r.source+")?)"),h=new RegExp("(?:"+r.source+"(?:\\s+"+o.source+")?)"),u=new RegExp("(?:"+l.source+"|"+h.source+")"),d=new RegExp("(?:"+a.source+"|(?:"+s.source+"?"+u.source+"))"),c=new RegExp("(?:\\s*"+d.source+"\\s*,\\s*)","i"),p=t.match(c);if(null==p||0==p.length)return null;var _=(p.length,new T),g=p[5]==e.GradientParser.GD_TOP||p[6]==e.GradientParser.GD_TOP,m=p[5]==e.GradientParser.GD_BOTTOM||p[6]==e.GradientParser.GD_BOTTOM,f=p[4]==e.GradientParser.GD_LEFT||p[7]==e.GradientParser.GD_LEFT,y=p[4]==e.GradientParser.GD_RIGHT||p[7]==e.GradientParser.GD_RIGHT,v=p[3]==e.GradientParser.GD_TO;if(v&&((g||m)&&(g=!g,m=!m),(f||y)&&(f=!f,y=!y)),g)f?_.setAngle(T.TOP_LEFT):y?_.setAngle(T.TOP_RIGHT):_.setAngle(T.TOP);else if(m)f?_.setAngle(T.BOTTOM_LEFT):y?_.setAngle(T.BOTTOM_RIGHT):_.setAngle(T.BOTTOM);else if(f)_.setAngle(T.LEFT);else if(y)_.setAngle(T.RIGHT);else if(p[2]){var a=parseFloat(p[1]);isNaN(a)||("grad"==p[2]?a=a/200*180:"rad"==p[2]?a=a/Math.PI*180:"turn"==p[2]&&(a=a/.5*180),_.setAngle(a))}return t=t.substring(p[0].length),e.GradientParser._parseCSSColorStops(t,_),_},e.GradientParser._parseIELinearGradient=function(t){var i,n=t.split(","),o=n.length,r=[],s=new T;s.setAngle(T.TOP);for(var a=0;a<o;a++)i=e.StringUtils.trim(n[a]).split("="),2==i.length&&(i[0]=e.StringUtils.trim(i[0]),i[0]==e.GradientParser.IE_GD_START_COLOR_STR?r[0]=e.GradientParser.removeQuotes(i[1],e.CSSStyle.SINGLE_QUOTE):i[0]==e.GradientParser.IE_GD_END_COLOR_STR?r[1]=e.GradientParser.removeQuotes(i[1],e.CSSStyle.SINGLE_QUOTE):i[0]==e.GradientParser.IE_GD_GRADIENT_TYPE&&"1"==i[1]&&s.setAngle(T.LEFT));return e.GradientParser._parseColorStops(r,s),s},e.GradientParser._parseCSSColorStops=function(t,i){var n=t.match(/(#[0-9a-f]+|rgb\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\)|rgba\(\s*(\d+),\s*(\d+),\s*(\d+),\s*(\d?)(\.\d+)?\s*\)|[a-z]+)(\s+\d+\.?\d*%)?/gi);
null!=n&&n.length>0&&e.GradientParser._parseColorStops(n,i)},e.GradientParser._parseColorStops=function(t,i){for(var n,o,r,s=t.length,a=[],l=[],h=[],u=!0,d=[],c=0;c<t.length;c++)r=e.CSSStyle.parseBorderColor(t[c],d),n=d.pop(),l[c]=n,a[c]=e.ColorUtils.getAlpha(n),r=e.StringUtils.trim(r),r.length>0&&(o=parseFloat(r),isNaN(o)||e.StringUtils.endsWith(r,"%")&&(h[c]=o/100,u=!1));if(s>1&&u)for(var p=0;p<s;p++)h[p]=p/(s-1);else u&&(h[0]=0);i.setColors(l),i.setAlphas(a),i.setRatios(h)},e.GradientParser._removeParenthesis=function(t,i){return")"!=t.charAt(t.length-1)?null:(t=t.substring(i.length),e.GradientParser.removeQuotes(t,"(",")"))},e.GradientParser.removeQuotes=function(t,i,n){if(t=e.StringUtils.trim(t),t.charAt(0)!=i)return t;null==n&&(n=i);var o=1,r=t.lastIndexOf(n);return r<0?t.substring(o):t.substring(o,r)},e.GradientParser._startsWith=function(t,e){return 0==t.indexOf(e)},e.CSSStyle=function(t){this.Init(t)},e.Obj.createSubclass(e.CSSStyle,e.Obj),e.CSSStyle.SKIN_FUSION="fusion",e.CSSStyle.SKIN_SKYROS="skyros",e.CSSStyle.SKIN_ALTA="alta",e.CSSStyle.SKIN_NEXT="next",e.CSSStyle.BACKGROUND="background",e.CSSStyle.BACKGROUND_COLOR="background-color",e.CSSStyle.BACKGROUND_IMAGE="background-image",e.CSSStyle.BACKGROUND_REPEAT="background-repeat",e.CSSStyle.BACKGROUND_POSITION="background-position",e.CSSStyle.BORDER="border",e.CSSStyle.BORDER_TOP="border-top",e.CSSStyle.BORDER_BOTTOM="border-bottom",e.CSSStyle.BORDER_LEFT="border-left",e.CSSStyle.BORDER_RIGHT="border-right",e.CSSStyle.BORDER_WIDTH="border-width",e.CSSStyle.BORDER_TOP_WIDTH="border-top-width",e.CSSStyle.BORDER_BOTTOM_WIDTH="border-bottom-width",e.CSSStyle.BORDER_LEFT_WIDTH="border-left-width",e.CSSStyle.BORDER_RIGHT_WIDTH="border-right-width",e.CSSStyle.BORDER_COLOR="border-color",e.CSSStyle.BORDER_TOP_COLOR="border-top-color",e.CSSStyle.BORDER_BOTTOM_COLOR="border-bottom-color",e.CSSStyle.BORDER_LEFT_COLOR="border-left-color",e.CSSStyle.BORDER_RIGHT_COLOR="border-right-color",e.CSSStyle.BORDER_STYLE="border-style",e.CSSStyle.BORDER_RADIUS="border-radius",e.CSSStyle.BORDER_TOP_LEFT_RADIUS="border-top-left-radius",e.CSSStyle.BORDER_TOP_RIGHT_RADIUS="border-top-right-radius",e.CSSStyle.BORDER_BOTTOM_RIGHT_RADIUS="border-bottom-right-radius",e.CSSStyle.BORDER_BOTTOM_LEFT_RADIUS="border-bottom-left-radius",e.CSSStyle.MARGIN="margin",e.CSSStyle.MARGIN_TOP="margin-top",e.CSSStyle.MARGIN_BOTTOM="margin-bottom",e.CSSStyle.MARGIN_LEFT="margin-left",e.CSSStyle.MARGIN_RIGHT="margin-right",e.CSSStyle.PADDING="padding",e.CSSStyle.PADDING_TOP="padding-top",e.CSSStyle.PADDING_BOTTOM="padding-bottom",e.CSSStyle.PADDING_LEFT="padding-left",e.CSSStyle.PADDING_RIGHT="padding-right",e.CSSStyle.COLOR="color",e.CSSStyle.FONT_FAMILY="font-family",e.CSSStyle.FONT_SIZE="font-size",e.CSSStyle.FONT_STYLE="font-style",e.CSSStyle.FONT_WEIGHT="font-weight",e.CSSStyle.TEXT_DECORATION="text-decoration",e.CSSStyle.TEXT_ALIGN="text-align",e.CSSStyle.BORDER_BOX="border-box",e.CSSStyle.CONTENT_BOX="content-box",e.CSSStyle.HEIGHT="height",e.CSSStyle.WIDTH="width",e.CSSStyle.NONE="none",e.CSSStyle.NO_REPEAT="no-repeat",e.CSSStyle.REPEAT="repeat",e.CSSStyle.REPEAT_X="repeat-x",e.CSSStyle.REPEAT_Y="repeat-y",e.CSSStyle.AUTO="auto",e.CSSStyle.AUTO_MARGIN="8",e.CSSStyle.BORDER_TYPE="border-type",e.CSSStyle.FILL_TYPE="fill-type",e.CSSStyle.CONTENT="content",e.CSSStyle.INNER_COLOR="-tr-inner-color",e.CSSStyle.OUTER_COLOR="-tr-outer-color",e.CSSStyle.WHITE_SPACE="white-space",e.CSSStyle._NAMED_FONT_SIZE_MAP={"xx-small":"9","x-small":"10",small:"13",medium:"16",large:"18","x-large":"24","xx-large":"32"},e.CSSStyle._NAMED_WIDTH_MAP={thin:"2",medium:"4",thick:"6"},e.CSSStyle._NAMED_COLOR_MAP={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",white:"#FFFFFF",fuchsia:"#FF00FF",gray:"#848284",lime:"#00FF00",maroon:"#840000",green:"#008200",navy:"#000084",olive:"#848200",red:"#FF0000",silver:"#C6C3C6",teal:"#008284",yellow:"#FFFF00",purple:"#800080",cyan:"#D2B48C",goldenrod:"#DAA520",lightblue:"#ADD8E6",lightyellow:"#FFFFE0",orange:"#FFA500",paleGoldenRod:"#EEE8AA",paleturquoise:"#AFEEEE",peachpuff:"#FFDAB9",pink:"#FFC0CB",tan:"#D2B48C",thistle:"#D8BFD8",transparent:"transparent"},e.CSSStyle._numericAttrsList=[e.CSSStyle.WIDTH,e.CSSStyle.HEIGHT,e.CSSStyle.BORDER_WIDTH,e.CSSStyle.BORDER_TOP_WIDTH,e.CSSStyle.BORDER_BOTTOM_WIDTH,e.CSSStyle.BORDER_LEFT_WIDTH,e.CSSStyle.BORDER_RIGHT_WIDTH,e.CSSStyle.MARGIN,e.CSSStyle.MARGIN_TOP,e.CSSStyle.MARGIN_BOTTOM,e.CSSStyle.MARGIN_LEFT,e.CSSStyle.MARGIN_RIGHT,e.CSSStyle.PADDING,e.CSSStyle.PADDING_TOP,e.CSSStyle.PADDING_BOTTOM,e.CSSStyle.PADDING_LEFT,e.CSSStyle.PADDING_RIGHT],e.CSSStyle._DOUBLE_QUOTE='"',e.CSSStyle._SINGLE_QUOTE="'",e.CSSStyle.COLORS_SKYROS=["#003366","#CC3300","#666699","#006666","#FF9900","#993366","#99CC33","#624390","#669933","#FFCC33","#006699","#EBEA79"],e.CSSStyle.COLORS_ALTA=["#267db3","#68c182","#fad55c","#ed6647","#8561c8","#6ddbdb","#ffb54d","#e371b2","#47bdef","#a2bf39","#a75dba","#f7f37b"],e.CSSStyle.prototype.Init=function(t){this._styleMap={},this.parseInlineStyle(t)},e.CSSStyle.prototype.parseInlineStyle=function(t){if(t){var i=this;if(t instanceof Object)for(var n in t){var o=t[n];n=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i.setStyle(n,o)}else e.CSSStyle._parseStyleString(t,function(t,e){i.setStyle(t,e)})}},e.CSSStyle.prototype.setStyle=function(t,i){if(null==i)this._setStyleAttr(t,i);else switch(t){case"background-repeat":this._setBackgroundRepeat(t,i);break;case"color":case"background-color":case"border-top-color":case"border-bottom-color":case"border-left-color":case"border-right-color":this._setColorAttr(t,i);break;case"border-top":case"border-bottom":case"border-left":case"border-right":this._setBorderSide(t,i);break;case"border":this._setBorderShorthand(t,i);break;case"border-color":this._setBorderColorShorthand(t,i);break;case"border-width":this._setBorderWidthShorthand(t,i);break;case"border-radius":this._setBorderRadius(t,i);break;case"padding":this._setPaddingShorthand(t,i);break;case"margin":this._setMarginShorthand(t,i);break;case"font-size":this.setFontSize(t,i);break;case"background-image":var n=e.GradientParser.parseCSSGradient(i);n&&(i=n),this._setStyleAttr(t,i);break;case e.GradientParser.IE7_GD_FILTER:case e.GradientParser.IE8_GD_FILTER:var o=e.GradientParser.removeQuotes(i,e.CSSStyle._DOUBLE_QUOTE),n=e.GradientParser.parseCSSGradient(o);n&&(t=e.CSSStyle.BACKGROUND_IMAGE,i=n),this._setStyleAttr(t,i);break;default:this._setStyleAttr(t,i)}return this},e.CSSStyle.prototype.getStyle=function(t){return this._styleMap[t]},e.CSSStyle.prototype._setStyleAttr=function(t,e){return null!=e?this._styleMap[t]=e:delete this._styleMap[t],this},e.CSSStyle.prototype.setFontSize=function(t,i){var n=e.StringUtils.trim(i),o=e.CSSStyle._NAMED_FONT_SIZE_MAP[n];o?this._setStyleAttr(t,String(o)+"px"):this._setStyleAttr(t,isNaN(parseFloat(n))?e.StyleUtils.DEFAULT_FONT_SIZE:n)},e.CSSStyle.prototype._setBorderWidthShorthand=function(t,i){var n=i.split(" "),o=null;switch(n.length){case 1:this._setStyleAttr(t,e.CSSStyle._getBorderWidth(n[0])),this._setStyleAttr(e.CSSStyle.BORDER_TOP_WIDTH,null),this._setStyleAttr(e.CSSStyle.BORDER_BOTTOM_WIDTH,null),this._setStyleAttr(e.CSSStyle.BORDER_RIGHT_WIDTH,null),this._setStyleAttr(e.CSSStyle.BORDER_LEFT_WIDTH,null);break;case 2:o=e.CSSStyle._getBorderWidth(n[0]),this._setStyleAttr(e.CSSStyle.BORDER_TOP_WIDTH,o),this._setStyleAttr(e.CSSStyle.BORDER_BOTTOM_WIDTH,o),o=e.CSSStyle._getBorderWidth(n[1]),this._setStyleAttr(e.CSSStyle.BORDER_LEFT_WIDTH,o),this._setStyleAttr(e.CSSStyle.BORDER_RIGHT_WIDTH,o);break;case 3:this._setStyleAttr(e.CSSStyle.BORDER_TOP_WIDTH,e.CSSStyle._getBorderWidth(n[0])),o=e.CSSStyle._getBorderWidth(n[1]),this._setStyleAttr(e.CSSStyle.BORDER_LEFT_WIDTH,o),this._setStyleAttr(e.CSSStyle.BORDER_RIGHT_WIDTH,o),this._setStyleAttr(e.CSSStyle.BORDER_BOTTOM_WIDTH,e.CSSStyle._getBorderWidth(n[2]));break;case 4:this._setStyleAttr(e.CSSStyle.BORDER_TOP_WIDTH,e.CSSStyle._getBorderWidth(n[0])),this._setStyleAttr(e.CSSStyle.BORDER_RIGHT_WIDTH,e.CSSStyle._getBorderWidth(n[1])),this._setStyleAttr(e.CSSStyle.BORDER_BOTTOM_WIDTH,e.CSSStyle._getBorderWidth(n[2])),this._setStyleAttr(e.CSSStyle.BORDER_LEFT_WIDTH,e.CSSStyle._getBorderWidth(n[3]));break;case 0:}},e.CSSStyle._getBorderWidth=function(t){var i=e.StringUtils.trim(t),n=e.CSSStyle._NAMED_WIDTH_MAP[i];return n||(n=isNaN(parseFloat(i))?"0px":i),n},e.CSSStyle.prototype._setBorderSide=function(t,i){for(var n,o=i.split(" "),r=null,s=!1,a=0;a<o.length;a++)if(r=o[a],n=t,0==r.indexOf("rgb")){for(var l=a+1;l<o.length&&(r+=o[l],a++,o[l].indexOf(")")==-1);l++);e.StringUtils.endsWith(t,"-"+e.CSSStyle.COLOR)||(n=t+"-"+e.CSSStyle.COLOR),this._setStyleAttr(n,r)}else e.CSSStyle._isColorValue(r)?(e.StringUtils.endsWith(t,"-"+e.CSSStyle.COLOR)||(n=t+"-"+e.CSSStyle.COLOR),this._setStyleAttr(n,e.CSSStyle._parseHexColor(r))):e.CSSStyle._isBorderWidthValue(r)?(e.StringUtils.endsWith(t,"-"+e.CSSStyle.WIDTH)||(n=t+"-"+e.CSSStyle.WIDTH),this._setStyleAttr(n,r)):"none"==i&&(s=!0);s&&this._setStyleAttr(t+"-"+e.CSSStyle.WIDTH,"0")},e.CSSStyle.prototype.getBorderSideWidth=function(t){return this._getSideWidth(t,e.CSSStyle.BORDER_WIDTH)},e.CSSStyle.prototype.getMargin=function(t){return this._getSideWidth(t,e.CSSStyle.MARGIN)},e.CSSStyle.prototype.getPadding=function(t){return this._getSideWidth(t,e.CSSStyle.PADDING)},e.CSSStyle.prototype.getBorderWidth=function(){var t=this.getStyle(e.CSSStyle.BORDER_WIDTH);return t?e.CSSStyle.toNumber(t):(t=this.getStyle(e.CSSStyle.BORDER_TOP_WIDTH))?e.CSSStyle.toNumber(t):(t=this.getStyle(e.CSSStyle.BORDER_RIGHT_WIDTH))?e.CSSStyle.toNumber(t):(t=this.getStyle(e.CSSStyle.BORDER_BOTTOM_WIDTH))?e.CSSStyle.toNumber(t):(t=this.getStyle(e.CSSStyle.BORDER_LEFT_WIDTH),t?e.CSSStyle.toNumber(t):0)},e.CSSStyle.prototype.getWidth=function(){return this.getStyle(e.CSSStyle.WIDTH)},e.CSSStyle.prototype.getHeight=function(){return this.getStyle(e.CSSStyle.HEIGHT)},e.CSSStyle.toNumber=function(t){return t?(t=parseFloat(t),isNaN(t)?0:t):0},e.CSSStyle.isInheritable=function(t){switch(t){case e.CSSStyle.COLOR:case e.CSSStyle.FONT_FAMILY:case e.CSSStyle.FONT_SIZE:case e.CSSStyle.FONT_STYLE:case e.CSSStyle.FONT_WEIGHT:case e.CSSStyle.TEXT_ALIGN:return!0;default:return!1}},e.CSSStyle.prototype._setBorderColorShorthand=function(t,i){var n,o=e.CSSStyle._parseBorderColorString(t,i);switch(o.length){case 1:this._setStyleAttr(t,o[0]),this._setStyleAttr(e.CSSStyle.BORDER_TOP_COLOR,null),this._setStyleAttr(e.CSSStyle.BORDER_BOTTOM_COLOR,null),this._setStyleAttr(e.CSSStyle.BORDER_RIGHT_COLOR,null),this._setStyleAttr(e.CSSStyle.BORDER_LEFT_COLOR,null);break;case 2:n=o[0],this._setStyleAttr(e.CSSStyle.BORDER_TOP_COLOR,n),this._setStyleAttr(e.CSSStyle.BORDER_BOTTOM_COLOR,n),n=o[1],this._setStyleAttr(e.CSSStyle.BORDER_LEFT_COLOR,n),this._setStyleAttr(e.CSSStyle.BORDER_RIGHT_COLOR,n);break;case 3:this._setStyleAttr(e.CSSStyle.BORDER_TOP_COLOR,o[0]),n=o[1],this._setStyleAttr(e.CSSStyle.BORDER_LEFT_COLOR,n),this._setStyleAttr(e.CSSStyle.BORDER_RIGHT_COLOR,n),this._setStyleAttr(e.CSSStyle.BORDER_BOTTOM_COLOR,o[2]);break;case 4:this._setStyleAttr(e.CSSStyle.BORDER_TOP_COLOR,o[0]),this._setStyleAttr(e.CSSStyle.BORDER_RIGHT_COLOR,o[1]),this._setStyleAttr(e.CSSStyle.BORDER_BOTTOM_COLOR,o[2]),this._setStyleAttr(e.CSSStyle.BORDER_LEFT_COLOR,o[3]);break;case 0:}},e.CSSStyle.prototype._setPaddingShorthand=function(t,i){var n=i.split(" "),o=null;switch(n.length){case 1:this._setStyleAttr(t,this._getPercent(n[0])),this._setStyleAttr(e.CSSStyle.PADDING_TOP,null),this._setStyleAttr(e.CSSStyle.PADDING_BOTTOM,null),this._setStyleAttr(e.CSSStyle.PADDING_RIGHT,null),this._setStyleAttr(e.CSSStyle.PADDING_LEFT,null);break;case 2:o=this._getPercent(n[0]),this._setStyleAttr(e.CSSStyle.PADDING_TOP,o),this._setStyleAttr(e.CSSStyle.PADDING_BOTTOM,o),o=this._getPercent(n[1]),this._setStyleAttr(e.CSSStyle.PADDING_LEFT,o),this._setStyleAttr(e.CSSStyle.PADDING_RIGHT,o);break;case 3:this._setStyleAttr(e.CSSStyle.PADDING_TOP,this._getPercent(n[0])),o=this._getPercent(n[1]),this._setStyleAttr(e.CSSStyle.PADDING_LEFT,o),this._setStyleAttr(e.CSSStyle.PADDING_RIGHT,o),this._setStyleAttr(e.CSSStyle.PADDING_BOTTOM,this._getPercent(n[2]));break;case 4:this._setStyleAttr(e.CSSStyle.PADDING_TOP,this._getPercent(n[0])),this._setStyleAttr(e.CSSStyle.PADDING_RIGHT,this._getPercent(n[1])),this._setStyleAttr(e.CSSStyle.PADDING_BOTTOM,this._getPercent(n[2])),this._setStyleAttr(e.CSSStyle.PADDING_LEFT,this._getPercent(n[3]));break;case 0:}},e.CSSStyle.prototype._setMarginShorthand=function(t,i){var n=i.split(" "),o=null;switch(n.length){case 1:this._setStyleAttr(t,this._getMargin(n[0])),this._setStyleAttr(e.CSSStyle.MARGIN_TOP,null),this._setStyleAttr(e.CSSStyle.MARGIN_BOTTOM,null),this._setStyleAttr(e.CSSStyle.MARGIN_RIGHT,null),this._setStyleAttr(e.CSSStyle.MARGIN_LEFT,null);break;case 2:o=this._getMargin(n[0]),this._setStyleAttr(e.CSSStyle.MARGIN_TOP,o),this._setStyleAttr(e.CSSStyle.MARGIN_BOTTOM,o),o=this._getMargin(n[1]),this._setStyleAttr(e.CSSStyle.MARGIN_LEFT,o),this._setStyleAttr(e.CSSStyle.MARGIN_RIGHT,o);break;case 3:this._setStyleAttr(e.CSSStyle.MARGIN_TOP,this._getMargin(n[0])),o=this._getMargin(n[1]),this._setStyleAttr(e.CSSStyle.MARGIN_LEFT,o),this._setStyleAttr(e.CSSStyle.MARGIN_RIGHT,o),this._setStyleAttr(e.CSSStyle.MARGIN_BOTTOM,this._getMargin(n[2]));break;case 4:this._setStyleAttr(e.CSSStyle.MARGIN_TOP,this._getMargin(n[0])),this._setStyleAttr(e.CSSStyle.MARGIN_RIGHT,this._getMargin(n[1])),this._setStyleAttr(e.CSSStyle.MARGIN_BOTTOM,this._getMargin(n[2])),this._setStyleAttr(e.CSSStyle.MARGIN_LEFT,this._getMargin(n[3]));break;case 0:}},e.CSSStyle.prototype._getMargin=function(t){var i=e.StringUtils.trim(t);return e.CSSStyle.AUTO==i?e.CSSStyle.AUTO_MARGIN:this._getPercent(i)},e.CSSStyle.prototype._getPercent=function(t){return e.StringUtils.trim(t)},e.CSSStyle.prototype._setBorderShorthand=function(t,i){for(var n=i.split(" "),o=null,r=!1,s=0;s<n.length;s++)if(o=n[s],0==o.indexOf("rgb")){for(var a=s+1;a<n.length&&(o+=n[a],s++,n[a].indexOf(")")==-1);a++);this._setBorderColorShorthand(e.CSSStyle.BORDER_COLOR,o)}else e.CSSStyle._isColorValue(o)?this._setBorderColorShorthand(e.CSSStyle.BORDER_COLOR,o):e.CSSStyle._isBorderWidthValue(o)?this._setBorderWidthShorthand(e.CSSStyle.BORDER_WIDTH,o):"none"==i&&(r=!0);r&&this._setBorderWidthShorthand(e.CSSStyle.BORDER_WIDTH,"0")},e.CSSStyle._getBorderRadius=function(t){var i=e.StringUtils.trim(t);return isNaN(parseFloat(i))?"0px":i},e.CSSStyle.prototype._setBorderRadius=function(t,i){var n=i.split("/");if(null==n[0])return void this._setStyleAttr(t,"0px");var o=e.StringUtils.trim(n[0]).split(" ");switch(o.length){case 1:default:this._setStyleAttr(t,e.CSSStyle._getBorderRadius(o[0])),this._setStyleAttr(e.CSSStyle.BORDER_TOP_LEFT_RADIUS,null),this._setStyleAttr(e.CSSStyle.BORDER_TOP_RIGHT_RADIUS,null),this._setStyleAttr(e.CSSStyle.BORDER_BOTTOM_RIGHT_RADIUS,null),this._setStyleAttr(e.CSSStyle.BORDER_BOTTOM_LEFT_RADIUS,null)}if(2==n.length&&null!=n[1]){var r=e.StringUtils.trim(n[1]).split(" ");switch(r.length){case 1:this.getStyle(t)?this._setStyleAttr(t,this.getStyle(t)+" "+e.CSSStyle._getBorderRadius(r[0])):this._setStyleAttr(t,e.CSSStyle._getBorderRadius(r[0]));break;case 0:}}},e.CSSStyle.prototype.getBorderRadius=function(){return"undefined"!==this.getStyle(e.CSSStyle.BORDER_RADIUS)&&null!==this.getStyle(e.CSSStyle.BORDER_RADIUS)?e.CSSStyle.toNumber(this.getStyle(e.CSSStyle.BORDER_RADIUS)):0},e.CSSStyle.prototype._setBackgroundRepeat=function(t,i){var n=i.split(" ");2==n.length&&(n[0]==n[1]?i=n[0]:n[0]==e.CSSStyle.REPEAT&&n[1]==e.CSSStyle.NO_REPEAT&&(i=e.CSSStyle.REPEAT_X),n[0]==e.CSSStyle.NO_REPEAT&&n[1]==e.CSSStyle.REPEAT&&(i=e.CSSStyle.REPEAT_Y)),this._setStyleAttr(t,i)},e.CSSStyle.prototype._setColorAttr=function(t,i){var n=e.CSSStyle._toColorVal(i);n?this._setStyleAttr(t,n):e.CSSStyle._isColorValue(i)&&this._setStyleAttr(t,i)},e.CSSStyle._toColorVal=function(t){t=e.StringUtils.trim(t);var i=e.CSSStyle._NAMED_COLOR_MAP[t.toLowerCase()];return i?i:null},e.CSSStyle.prototype.setColor=function(t,e){this._setStyleAttr(t,e)},e.CSSStyle._isValueInEM=function(t){return t.toLowerCase().indexOf("em")>=0},e.CSSStyle.prototype._resolveEMx=function(t,i){var n=this.getStyle(t);return!n||!e.CSSStyle._isValueInEM(n)||!!i&&(this._setStyleAttr(t,String(Math.round(parseFloat(n)*parseFloat(i)))+"px"),!0)},e.CSSStyle.prototype.getAbsoluteFontSize=function(){var t=this.getFontSize();return t&&!e.CSSStyle._isValueInEM(t)?t:null},e.CSSStyle.prototype.resolveEM=function(t){var i=this.getFontSize();i&&(e.CSSStyle._isValueInEM(i)?this._resolveEMx(e.CSSStyle.FONT_SIZE,t):t=i);for(var n=e.CSSStyle._numericAttrsList,o=0;o<n.length;o++)if(!this._resolveEMx(n[o],t))return!1;return!0},e.CSSStyle.prototype.clone=function(){var t=new e.CSSStyle;for(var i in this._styleMap)t._setStyleAttr(i,this.getStyle(i));return t},e.CSSStyle.prototype.merge=function(t){if(t)for(var e in t._styleMap)this._setStyleAttr(e,t.getStyle(e));return this},e.CSSStyle.prototype.mergeUnder=function(t){if(t)for(var e in t._styleMap)this.getStyle(e)||this._setStyleAttr(e,t.getStyle(e));return this},e.CSSStyle.prototype.toString=function(){var t="";for(var e in this._styleMap)t+=e+":"+this.getStyle(e)+"; ";return t},e.CSSStyle.prototype.getBackgroundImage=function(){var t,i,n=this.getStyle(e.CSSStyle.BACKGROUND_IMAGE);return n&&n instanceof e.CSSGradient?n:(n&&(t=n.indexOf("url("),i=n.lastIndexOf(")"),0==t&&i==n.length-1&&(n=n.substring(4,i))),n&&(t=n.indexOf(e.CSSStyle._SINGLE_QUOTE),i=n.lastIndexOf(e.CSSStyle._SINGLE_QUOTE),0==t&&i==n.length-1?n=n.substring(1,i):(t=n.indexOf(e.CSSStyle._DOUBLE_QUOTE),i=n.lastIndexOf(e.CSSStyle._DOUBLE_QUOTE),0==t&&i==n.length-1&&(n=n.substring(1,i)))),n)},e.CSSStyle._isColorValue=function(t){if(t=e.StringUtils.trim(t),0==t.indexOf("rgb")||0==t.indexOf("#"))return!0;var i=e.CSSStyle._NAMED_COLOR_MAP[t.toLowerCase()];return!!i},e.CSSStyle._isBorderWidthValue=function(t){var i=e.StringUtils.trim(t);return!!e.CSSStyle._NAMED_WIDTH_MAP[i]||!isNaN(parseFloat(i))},e.CSSStyle._parseBorderColorString=function(t,i){for(var i=e.StringUtils.trim(i),n=[];null!=i&&i.length>0;)i=e.CSSStyle.parseBorderColor(i,n);return n},e.CSSStyle.parseBorderColor=function(t,i){t=e.StringUtils.trim(t);var n,o=t.length,r=-1;if(!t)return t;if(0==t.indexOf("rgb"))r=t.indexOf(")")+1,n=t.slice(0,r);else{r=t.indexOf(" "),r==-1&&(r=o);var s=t.slice(0,r);n=e.CSSStyle._toColorVal(s),n||(n=e.CSSStyle._parseHexColor(s))}return n&&(i.push(n),t=t.slice(r)),t},e.CSSStyle._parseHexColor=function(t){var e,i;if(t&&t.length>0){var n=t.length>7;if(e=Number("0x"+t.substring(1)),isNaN(e)&&(e=0),n){var o="#"+t.substring(3);i=o}else i=t}return i},e.CSSStyle.prototype._getSideWidth=function(t,i){var n=this.getStyle(t);return n||(n=this.getStyle(i)),e.CSSStyle.toNumber(n)},e.CSSStyle.prototype.getFontSize=function(){return this.getStyle(e.CSSStyle.FONT_SIZE)},e.CSSStyle.mergeStyles=function(t){var i=new e.CSSStyle;if(t)for(var n=0;n<t.length;n++)i.merge(t[n]);return i},e.CSSStyle.prototype.isEmpty=function(){for(var t in this._styleMap)return!1;return!0},e.CSSStyle.prototype.isTextAlignEnd=function(t){var i=this.getStyle(e.CSSStyle.TEXT_ALIGN);return"end"==i||(e.Agent.isRightToLeft(t)?"left"==i:"right"==i)},e.CSSStyle.prototype.parseBackgroundPosition=function(){var t=this.getStyle(e.CSSStyle.BACKGROUND_POSITION);if(!t)return null;var i=t.split(" ");if(0==i.length)return["0%","0%"];var n,o=["50%","50%"];return i.length>0&&(n=e.StringUtils.trim(i[0]),"left"==n?o[0]="0%":"right"==n?o[0]="100%":"top"==n?o[1]="0%":"bottom"==n?o[1]="100%":"center"!=n&&(o[0]=n)),i.length>1&&(n=e.StringUtils.trim(i[1]),"left"==n?o[0]="0%":"right"==n?o[0]="100%":"top"==n?o[1]="0%":"bottom"==n?o[1]="100%":"center"!=n&&(o[1]=n)),o},e.CSSStyle.prototype.getIconUrl=function(){return this.getStyle(e.CSSStyle.CONTENT)},e.CSSStyle.prototype.setIconUrl=function(t){this._setStyleAttr(e.CSSStyle.CONTENT,t)},e.CSSStyle.prototype.hashCodeForTextMeasurement=function(){for(var t="",i=e.CSSStyle.getTextMeasurementProperties(),n=0;n<i.length;n++)this.getStyle(i[n])&&(t+=this.getStyle(i[n]));return t},e.CSSStyle.getTextMeasurementProperties=function(){return[e.CSSStyle.FONT_FAMILY,e.CSSStyle.FONT_SIZE,e.CSSStyle.FONT_STYLE,e.CSSStyle.FONT_WEIGHT]},e.CSSStyle.afterSkinAlta=function(t){return null!=t&&t!=e.CSSStyle.SKIN_FUSION&&t!=e.CSSStyle.SKIN_SKYROS},e.CSSStyle.cssObjectToString=function(t){var e="";return t&&JSON.parse(JSON.stringify(t),function(t,i){t&&(t=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e+=t+":"+i+";")}),e},e.CSSStyle.cssStringToObject=function(t){var i={};return e.CSSStyle._parseStyleString(t,function(t,n){t=e.CSSStyle.cssStringToObjectProperty(t),i[t]=n}),i},e.CSSStyle.cssStringToObjectProperty=function(t){return t&&(t=t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})),t},e.CSSStyle._parseStyleString=function(t,i){if(t&&t.length>0)for(var n=t.split(";"),o=0;o<n.length;o++){var r=n[o];if(r&&r.length>0){var s=r.indexOf(":");if(s>-1){var a=e.StringUtils.trim(r.substring(0,s)),l=e.StringUtils.trim(r.substring(s+1));a&&a.length>0&&l&&l.length>0&&(a==e.CSSStyle.BACKGROUND_IMAGE&&l.indexOf("data:image/")>=0&&(l=l+";"+n[o+1],o++),i(a,l))}}}},e.BaseComponent=function(){},e.Obj.createSubclass(e.BaseComponent,e.Container),e.BaseComponent.prototype.Init=function(t,i,n){e.BaseComponent.superclass.Init.call(this,t),this._callback=i,this._callbackObj=n,this.Defaults=null,this.Options=null,this.Width=0,this.Height=0,this.EventManager=null,this.Animation=null,this.AnimationStopped=!1,this._optionsCache=new e.BaseComponentCache,this._cache=new e.BaseComponentCache},e.BaseComponent.prototype.GetDefaults=function(t){return this.Defaults?this.Defaults.getDefaults(t):{}},e.BaseComponent.prototype.GetComponentDescription=function(){return e.Bundle.getTranslation(this.getOptions(),"componentName")},e.BaseComponent.prototype.IsParentRoot=function(){return this.getParent()==this.getCtx().getStage()},e.BaseComponent.prototype.UpdateAriaAttributes=function(){this.IsParentRoot()&&(this.getCtx().setAriaRole("application"),this.getCtx().setAriaLabel(e.Bundle.getTranslatedString(e.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[e.Bundle.getTranslatedString(e.Bundle.UTIL_PREFIX,"DATA_VISUALIZATION"),e.StringUtils.processAriaLabel(this.GetComponentDescription())])))},e.BaseComponent.prototype.SetOptions=function(t){},e.BaseComponent.prototype.getOptions=function(){return this.Options||(this.Options=this.GetDefaults()),this.Options},e.BaseComponent.prototype.applyOptions=function(t){this.Options&&t&&this.SetOptions(e.JsonUtils.merge(t,this.Options))},e.BaseComponent.prototype.render=function(t,e,i){},e.BaseComponent.prototype.RenderComplete=function(){this.Animation=null,this.AnimationStopped=!1,this.getCtx().resetIsOffscreen(),this.dispatchEvent(e.EventFactory.newReadyEvent())},e.BaseComponent.prototype.getWidth=function(){return this.Width},e.BaseComponent.prototype.getHeight=function(){return this.Height},e.BaseComponent.prototype.highlight=function(t){},e.BaseComponent.prototype.select=function(t){},e.BaseComponent.prototype.dispatchEvent=function(t){e.EventDispatcher.dispatchEvent(this._callback,this._callbackObj,this,t)},e.BaseComponent.prototype.getDimensionsWithStroke=function(t){return this.getDimensions(t)},e.BaseComponent.prototype.getEventManager=function(){return this.EventManager},e.BaseComponent.prototype.getKeyboardFocus=function(){var t=this.getEventManager();return t&&t.getFocus()?t.getFocus().getTargetElem():null},e.BaseComponent.prototype.getCache=function(){return this._cache},e.BaseComponent.prototype.getOptionsCache=function(){return this._optionsCache},e.BaseComponent.prototype.StopAnimation=function(t){this.Animation&&(this.AnimationStopped=!0,this.Animation.stop(t||!1),this.Animation=null)},e.BaseComponent.prototype.destroy=function(){this.StopAnimation(),this.EventManager&&(this.EventManager.removeListeners(this),this.EventManager.destroy(),this.EventManager=null),e.BaseComponent.superclass.destroy.call(this)},e.BaseComponentDefaults=function(){this.Init()},e.Obj.createSubclass(e.BaseComponentDefaults,e.Obj);e.BaseComponentDefaults.FONT_SIZE="font-size: ";e.BaseComponentDefaults.FONT_SIZE_11=e.BaseComponentDefaults.FONT_SIZE+"11px;",e.BaseComponentDefaults.FONT_SIZE_12=e.BaseComponentDefaults.FONT_SIZE+"12px;",e.BaseComponentDefaults.FONT_SIZE_13=e.BaseComponentDefaults.FONT_SIZE+"13px;",e.BaseComponentDefaults.FONT_SIZE_14=e.BaseComponentDefaults.FONT_SIZE+"14px;",e.BaseComponentDefaults.FONT_WEIGHT_BOLD="font-weight: bold;",e.BaseComponentDefaults.FONT_FAMILY_SKYROS="font-family: tahoma, sans-serif;",e.BaseComponentDefaults.FONT_FAMILY_ALTA="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;",e.BaseComponentDefaults.FONT_FAMILY_ALTA_11=e.BaseComponentDefaults.FONT_FAMILY_ALTA+e.BaseComponentDefaults.FONT_SIZE_11,e.BaseComponentDefaults.FONT_FAMILY_ALTA_12=e.BaseComponentDefaults.FONT_FAMILY_ALTA+e.BaseComponentDefaults.FONT_SIZE_12,e.BaseComponentDefaults.FONT_FAMILY_ALTA_13=e.BaseComponentDefaults.FONT_FAMILY_ALTA+e.BaseComponentDefaults.FONT_SIZE_13,e.BaseComponentDefaults.FONT_FAMILY_ALTA_14=e.BaseComponentDefaults.FONT_FAMILY_ALTA+e.BaseComponentDefaults.FONT_SIZE_14,e.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD=e.BaseComponentDefaults.FONT_FAMILY_ALTA+e.BaseComponentDefaults.FONT_WEIGHT_BOLD,e.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_11=e.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD+e.BaseComponentDefaults.FONT_SIZE_11,e.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_12=e.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD+e.BaseComponentDefaults.FONT_SIZE_12,e.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_13=e.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD+e.BaseComponentDefaults.FONT_SIZE_13,e.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_14=e.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD+e.BaseComponentDefaults.FONT_SIZE_14,e.BaseComponentDefaults._SKINS=[e.CSSStyle.SKIN_FUSION,e.CSSStyle.SKIN_SKYROS,e.CSSStyle.SKIN_ALTA,e.CSSStyle.SKIN_NEXT],e.BaseComponentDefaults.prototype.Init=function(t){this._defaults=t?t:{},this.constructor.defaultsCache||(this.constructor.defaultsCache={})},e.BaseComponentDefaults.prototype.getBaseSkinName=function(){return e.CSSStyle.SKIN_NEXT},e.BaseComponentDefaults.prototype.calcOptions=function(t){var i=t?t.skin:null,n=this.getDefaults(i);return t?e.JsonUtils.merge(t,n,this.getNoCloneObject()):n},e.BaseComponentDefaults.prototype.getDefaults=function(t){if(t||(t=this.getBaseSkinName()),this.constructor.defaultsCache[t])return e.JsonUtils.clone(this.constructor.defaultsCache[t]);for(var i=Math.max(e.ArrayUtils.getIndex(e.BaseComponentDefaults._SKINS,t),0),n=e.JsonUtils.clone(this._defaults[e.BaseComponentDefaults._SKINS[0]]),o=1;o<=i;o++)n=e.JsonUtils.merge(this._defaults[e.BaseComponentDefaults._SKINS[o]],n);return this.constructor.defaultsCache[t]=e.JsonUtils.clone(n),n},e.BaseComponentDefaults.prototype.getNoCloneObject=function(){return{}},e.BaseComponentCache=function(){this.Init()},e.BaseComponentCache.prototype.Init=function(){this.Cache={}},e.BaseComponentCache.prototype.clearCache=function(){this.Cache={}},e.BaseComponentCache.prototype.getFromCache=function(t){return this.Cache[t]},e.BaseComponentCache.prototype.putToCache=function(t,e){this.Cache[t]=e},e.BaseComponentCache.prototype.getFromCachedMap=function(t,e){return this._getCachedMap(t)[e]},e.BaseComponentCache.prototype._getCachedMap=function(t){var e=this.getFromCache(t);return e||(e={},this.putToCache(t,e)),e},e.BaseComponentCache.prototype.putToCachedMap=function(t,e,i){this._getCachedMap(t)[e]=i},e.BaseComponentCache.prototype.getFromCachedMap2D=function(t,e,i){var n=this._getCachedMap2D(t);return n.get(e,i)},e.BaseComponentCache.prototype._getCachedMap2D=function(t){var i=this.getFromCache(t);return i||(i=new e.Map2D,this.putToCache(t,i)),i},e.BaseComponentCache.prototype.putToCachedMap2D=function(t,e,i,n){var o=this._getCachedMap2D(t);o.put(e,i,n)},e.ShowPopupBehavior=function(t,e,i,n){this._popupId=t,this._triggerType=e,this._alignId=i,this._align=n},e.Obj.createSubclass(e.ShowPopupBehavior,e.Obj),e.ShowPopupBehavior.TRIGGER_TYPE_ACTION="action",e.ShowPopupBehavior.TRIGGER_TYPE_CLICK="click",e.ShowPopupBehavior.TRIGGER_TYPE_CONTEXT_MENU="contextMenu",e.ShowPopupBehavior.TRIGGER_TYPE_DBL_CLICK="dblClick",e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_HOVER="mouseHover",e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_OVER="mouseOver",e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_DOWN="mouseDown",e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_MOVE="mouseMove",e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_UP="mouseUp",e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_OUT="mouseOut",e.ShowPopupBehavior.TRIGGER_TYPE_KEY_DOWN="keyDown",e.ShowPopupBehavior.TRIGGER_TYPE_KEY_UP="keyUp",e.ShowPopupBehavior.TRIGGER_TYPE_KEY_PRESS="keyPress",e.ShowPopupBehavior.TRIGGER_TYPE_FOCUS="focus",e.ShowPopupBehavior.TRIGGER_TYPE_BLUR="blur",e.ShowPopupBehavior.ALIGN_AFTER_START="afterStart",e.ShowPopupBehavior.ALIGN_AFTER_END="afterEnd",e.ShowPopupBehavior.ALIGN_BEFORE_START="beforeStart",e.ShowPopupBehavior.ALIGN_BEFORE_END="beforeEnd",e.ShowPopupBehavior.ALIGN_END_AFTER="endAfter",e.ShowPopupBehavior.ALIGN_END_BEFORE="endBefore",e.ShowPopupBehavior.ALIGN_START_AFTER="startAfter",e.ShowPopupBehavior.ALIGN_START_BEFORE="startBefore",e.ShowPopupBehavior.ALIGN_OVERLAP="overlap",e.ShowPopupBehavior.createBehaviors=function(t){for(var i=[],n=0;n<t.length;n++){var o=t[n];i.push(e.ShowPopupBehavior.newInstance(o))}return i},e.ShowPopupBehavior.newInstance=function(t){return new e.ShowPopupBehavior(t.popupId,t.triggerType,t.alignId,t.align)},e.ShowPopupBehavior.prototype.getPopupId=function(){return this._popupId},e.ShowPopupBehavior.prototype.getTriggerType=function(){return this._triggerType},e.ShowPopupBehavior.prototype.getAlignId=function(){return this._alignId},e.ShowPopupBehavior.prototype.getAlign=function(){return this._align},e.ClientBehavior=function(t,e){this._type=t,this._triggerType=e,this._props={}},e.Obj.createSubclass(e.ClientBehavior,e.Obj),e.ClientBehavior.TRIGGER_TYPE_ACTION="action",e.ClientBehavior.TRIGGER_TYPE_CLICK="click",e.ClientBehavior.TYPE_ROW_DISCLOSURE="DvtRowDisclosureBehavior",e.ClientBehavior.TYPE_DRILL="DvtDrillBehavior",e.ClientBehavior.TYPE_ISOLATE_LEVELS="DvtIsolateLevelsBehavior",e.ClientBehavior.TYPE_RESTORE="DvtRestoreBehavior",e.ClientBehavior.prototype.getType=function(){return this._type},e.ClientBehavior.prototype.getTriggerType=function(){return this._triggerType},e.ClientBehavior.prototype.setProperty=function(t,e){this._props[t]=e},e.ClientBehavior.prototype.getProperty=function(t){return this._props[t]},e.ClientBehavior.prototype.getProperties=function(){return this._props},e.SimpleScrollbar=function(t,i,n,o){e.SimpleScrollbar.superclass.Init.call(this,t),this._callback=i,this._callbackObj=n,this._dragTarget=o},e.Obj.createSubclass(e.SimpleScrollbar,e.Container),e.SimpleScrollbar._THUMB_MIN_SIZE=12,e.SimpleScrollbar.prototype.render=function(t,i,n){this._width=i,this._height=n,this._globalMin=t.min,this._globalMax=t.max,this._isHoriz=t.isHorizontal,this._isReversed=t.isReversed;var o=new e.Rect(this.getCtx(),0,0,i,n);o.setSolidFill(t.backgroundColor),o.setPixelHinting(!0),this.addChild(o),this._thumb=new e.Rect(this.getCtx(),0,0,i,n),this._thumb.setSolidFill(t.color),this._thumb.setPixelHinting(!0),this.addChild(this._thumb),this._thumbMin=this._globalMin,this._thumbMax=this._globalMax,this._renderedThumbMin=this._thumbMin,this._renderedThumbMax=this._thumbMax;var r=e.Agent.isTouchDevice()?8:4,s=new e.Rect(this.getCtx(),-r,-r,this._width+2*r,this._height+2*r);s.setInvisibleFill(),this.addChild(s);var a=null!=this._dragTarget;e.SvgDocumentUtils.addDragListeners(a?this._dragTarget:this,this._onDragStart,this._onDragMove,this._onDragEnd,this,!a),e.Agent.isTouchDevice()||a||this.addEvtListener(e.MouseEvent.CLICK,this._onClick,!1,this),this._dragged=!1},e.SimpleScrollbar.prototype.setViewportRange=function(t,i,n,o){null!=n&&(this._globalMin=n),null!=o&&(this._globalMax=o),
this._thumbMin=t,this._thumbMax=i;var r=i-t,s=this._globalMax-this._globalMin,a=Math.min(e.SimpleScrollbar._THUMB_MIN_SIZE/(this._isHoriz?this._width:this._height)*s,s);r<a&&(i+=(a-r)/2,t-=(a-r)/2,t<this._globalMin&&(t=this._globalMin,i=this._globalMin+a),i>this._globalMax&&(i=this._globalMax,t=this._globalMax-a)),this._renderedThumbMin=t,this._renderedThumbMax=i;var l=this._getCoord(t),h=this._getCoord(i);this._isHoriz?(this._thumb.setX(Math.min(l,h)),this._thumb.setWidth(Math.abs(h-l))):(this._thumb.setY(Math.min(l,h)),this._thumb.setHeight(Math.abs(h-l)))},e.SimpleScrollbar.prototype._getCoord=function(t){var e=(t-this._globalMin)/(this._globalMax-this._globalMin);return this._isReversed&&(e=1-e),this._isHoriz?e*this._width:e*this._height},e.SimpleScrollbar.prototype._getValue=function(t,e){var i=this.stageToLocal(this.getCtx().pageToStageCoords(t,e)),n=this._isHoriz?i.x/this._width:i.y/this._height;return this._isReversed&&(n=1-n),n=Math.min(Math.max(n,0),1),this._globalMin+n*(this._globalMax-this._globalMin)},e.SimpleScrollbar.prototype._onClick=function(t){var i=this._getValue(t.pageX,t.pageY);if(!(i>=this._renderedThumbMin&&i<=this._renderedThumbMax)){var n=this._thumbMax-this._thumbMin;this._setViewportRange(i-n/2,i+n/2,e.SimpleScrollbarEvent.SUBTYPE_END)}},e.SimpleScrollbar.prototype._onDragStart=function(t){var e;if(t.touches){if(1!=t.touches.length)return!1;e=this._getValue(t.touches[0].pageX,t.touches[0].pageY)}else e=this._getValue(t.pageX,t.pageY);return!!(this._dragTarget||e>=this._renderedThumbMin&&e<=this._renderedThumbMax)&&(this._prevVal=Math.min(Math.max(e,this._thumbMin),this._thumbMax),this._dragged=!0,!0)},e.SimpleScrollbar.prototype._onDragMove=function(t){if(this._dragged){var i;if(t.touches){if(1!=t.touches.length)return;i=this._getValue(t.touches[0].pageX,t.touches[0].pageY)}else i=this._getValue(t.pageX,t.pageY);var n=i-this._prevVal;this._dragTarget&&(n*=-1),this._setViewportRange(this._thumbMin+n,this._thumbMax+n,e.SimpleScrollbarEvent.SUBTYPE_MOVE),this._prevVal=i,t.preventDefault()}},e.SimpleScrollbar.prototype._onDragEnd=function(t){if(this._dragged){if(t.touches)this._setViewportRange(this._thumbMin,this._thumbMax,e.SimpleScrollbarEvent.SUBTYPE_END);else{var i=this._getValue(t.pageX,t.pageY),n=i-this._prevVal;this._setViewportRange(this._thumbMin+n,this._thumbMax+n,e.SimpleScrollbarEvent.SUBTYPE_END)}this._dragged=!1}},e.SimpleScrollbar.prototype._setViewportRange=function(t,i,n){var o=i-t;if(t<this._globalMin&&(t=this._globalMin,i=this._globalMin+o),i>this._globalMax&&(i=this._globalMax,t=this._globalMax-o),this.setViewportRange(t,i),this._callback){var r=new e.SimpleScrollbarEvent(n,t,i);this._callback.call(this._callbackObj,r,this)}},e.SimpleScrollableContainer=function(t,i,n,o){e.SimpleScrollableContainer.superclass.Init.call(this,t),this._contentSize=o?i:n,this._width=i,this._height=n,this._background=new e.Rect(t,0,0,i,n),this._background.setInvisibleFill(),this.addChild(this._background),this._container=new e.Container(t),this.addChild(this._container),this._isHorizontalScrolling=o,this._isScrollbarVisible=!1,e.Agent.isTouchDevice()||this.addEvtListener(e.MouseEvent.MOUSEWHEEL,this._onMouseWheel,!1,this)},e.Obj.createSubclass(e.SimpleScrollableContainer,e.Container),e.SimpleScrollableContainer._SCROLLBAR_WIDTH=3,e.SimpleScrollableContainer._SCROLLBAR_GAP=2,e.SimpleScrollableContainer.prototype.getScrollingPane=function(){return this._container},e.SimpleScrollableContainer.prototype.prepareContentPane=function(){var t=this._container.getDimensions();if(this._isHorizontalScrolling?this._contentSize=t.w+t.x:this._contentSize=t.h+t.y,this.hasScrollingContent()){if(this._isHorizontalScrolling?this._contentSize+=t.x:this._contentSize+=t.y,!this._maskContainer){var i=new e.Rectangle(0,0,this._width,this._height);this._fadeTop=new e.Mask(new e.LinearGradientFill(this._isHorizontalScrolling?0:270,["#FFFFFF","#FFFFFF"],[0,1],[0,.1]),i),this._fadeBottom=new e.Mask(new e.LinearGradientFill(this._isHorizontalScrolling?180:90,["#FFFFFF","#FFFFFF"],[0,1],[0,.1]),i),this._fadeTopBottom=new e.Mask(new e.LinearGradientFill(this._isHorizontalScrolling?180:90,["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],[0,1,1,0],[0,.1,.9,1]),i),this._maskContainer=new e.Container(this.getCtx()),this.addChild(this._maskContainer);var n=new e.ClipPath;n.addRect(0,0,this._width,this._height),this._container.setClipPath(n),this._maskContainer.addChild(this._container),this._scrollbar=new e.SimpleScrollbar(this.getCtx(),this._handleScrollbar,this,this),this._scrollbarTimer=new e.Timer(this.getCtx(),100,this._hideScrollbar,this)}this._maskContainer.setMask(this._fadeBottom);var o={color:"#9E9E9E",backgroundColor:"#F0F0F0",isHorizontal:this._isHorizontalScrolling,isReversed:!1,min:0,max:this._contentSize};this._isHorizontalScrolling?(this._scrollbar.render(o,this._getScrollbarWidth(),e.SimpleScrollableContainer._SCROLLBAR_WIDTH),this._scrollbar.setTranslate(e.SimpleScrollableContainer._SCROLLBAR_GAP,this._height-(e.SimpleScrollableContainer._SCROLLBAR_WIDTH+e.SimpleScrollableContainer._SCROLLBAR_GAP))):(this._scrollbar.render(o,e.SimpleScrollableContainer._SCROLLBAR_WIDTH,this._getScrollbarWidth()),this._scrollbar.setTranslate(e.Agent.isRightToLeft(this.getCtx())?e.SimpleScrollableContainer._SCROLLBAR_GAP:this._width-(e.SimpleScrollableContainer._SCROLLBAR_WIDTH+e.SimpleScrollableContainer._SCROLLBAR_GAP),e.SimpleScrollableContainer._SCROLLBAR_GAP)),this._scrollbar.setViewportRange(0,this._getAvailSize()),e.Agent.isEnvironmentTest()||this._scrollbar.setAlpha(0),this.addChild(this._scrollbar)}else this.addChild(this._container),this.removeChild(this._maskContainer),this.removeChild(this._scrollbar)},e.SimpleScrollableContainer.prototype._getScrollbarWidth=function(){return(this._isHorizontalScrolling?this._width:this._height)-2*e.SimpleScrollableContainer._SCROLLBAR_GAP},e.SimpleScrollableContainer.prototype._getAvailSize=function(){return this._isHorizontalScrolling?this._width:this._height},e.SimpleScrollableContainer.prototype._hideScrollbar=function(t){this._isScrollbarVisible&&(this._isScrollbarVisible=!1,this._scrollbarTimer.reset(),this._fadeOutAnim=new e.AnimFadeOut(this.getCtx(),this._scrollbar,.2),this._fadeOutAnim.play())},e.SimpleScrollableContainer.prototype._showScrollbar=function(t){this._isScrollbarVisible?(this._scrollbarTimer.reset(),this._scrollbarTimer.start()):(this._fadeOutAnim&&(this._fadeOutAnim.stop(!0),this._fadeOutAnim=null),this._scrollbar.setAlpha(1),this._isScrollbarVisible=!0,this._scrollbarTimer.start())},e.SimpleScrollableContainer.prototype._updateFade=function(t){0==t?this._maskContainer.setMask(this._fadeBottom):t+this._getAvailSize()>=this._contentSize?this._maskContainer.setMask(this._fadeTop):this._maskContainer.setMask(this._fadeTopBottom)},e.SimpleScrollableContainer.prototype._onMouseWheel=function(t){if(this.hasScrollingContent()){this._showScrollbar();var i=null!=t.wheelDelta?t.wheelDelta:0;e.Agent.isPlatformGecko()&&(i*=-1);var n=-1*(this._isHorizontalScrolling?this._container.getTranslateX():this._container.getTranslateY())-4*i,o=0,r=Math.max(this._contentSize-this._getAvailSize(),0),s=Math.max(Math.min(n,r),o);this._isHorizontalScrolling?(this._container.setTranslateX(s*-1),this._scrollbar.setViewportRange(s+this._width,s)):(this._container.setTranslateY(s*-1),this._scrollbar.setViewportRange(s,s+this._height)),this._updateFade(s),t.preventDefault()}},e.SimpleScrollableContainer.prototype._handleScrollbar=function(t){this._showScrollbar(),this._isHorizontalScrolling?this._container.setTranslateX(t.getNewMin()*-1):this._container.setTranslateY(t.getNewMin()*-1),this._updateFade(t.getNewMin())},e.SimpleScrollableContainer.prototype.getWidth=function(){return this._width},e.SimpleScrollableContainer.prototype.getHeight=function(){return this._height},e.SimpleScrollableContainer.prototype.scrollIntoView=function(t){if(this.hasScrollingContent()){var e,i=t.getDimensions(t.getParent()),n=this._container.getDimensions();if(this._isHorizontalScrolling){var o=-1*this._container.getTranslateX(),r=i.x-n.x,s=i.x+i.w-this._width+n.x;o<s?(this._container.setTranslateX(-1*s),this._scrollbar.setViewportRange(s+this._width,s),e=s):o>r&&(this._container.setTranslateX(-1*r),this._scrollbar.setViewportRange(r+this._width,r),e=r)}else{var a=-1*this._container.getTranslateY(),l=i.y-n.y,h=i.y+i.h-this._height+n.y;a<h?(this._container.setTranslateY(-1*h),this._scrollbar.setViewportRange(h,h+this._height),e=h):a>l&&(this._container.setTranslateY(-1*l),this._scrollbar.setViewportRange(l,l+this._height),e=l)}void 0!=e&&this._updateFade(e)}},e.SimpleScrollableContainer.prototype.hasScrollingContent=function(){return this._contentSize>this._getAvailSize()},e.DragRecognizer=function(){},e.Obj.createSubclass(e.DragRecognizer,e.Obj),e.DragRecognizer.prototype.prepDrag=function(){},e.DragRecognizer.prototype.abortPrep=function(){},e.DragRecognizer.prototype.recognizeDrag=function(){return!0},e.DragSource=function(t){this.Init(t)},e.Obj.createSubclass(e.DragSource,e.Obj),e.DragSource.DRAG_FEEDBACK_MARGIN=2,e.DragSource.prototype.Init=function(t){this._context=t,this._dragCandidate=null,this._dragObj=null,this._dragCoords=null},e.DragSource.prototype.getDragCandidate=function(){return this._dragCandidate},e.DragSource.prototype.setDragCandidate=function(t){t&&t.isDragAvailable&&t.getDragTransferable?this._dragCandidate=t:this._dragCandidate=null},e.DragSource.prototype.isDragAvailable=function(t){return null!=this._dragCandidate?this._dragCandidate.isDragAvailable(t):null},e.DragSource.prototype.getDragTransferable=function(t,e){return this._dragCandidate?(this._dragObj=this._dragCandidate,this._dragCoords={x:t,y:e},this._dragCandidate.getDragTransferable(t,e)):null},e.DragSource.prototype.getDragOverFeedback=function(t,e){this._context.getTooltipManager().hideTooltip();var i=this.getDragObject();return i&&i.getDragFeedback?i.getDragFeedback(t,e):null},e.DragSource.prototype.getDragContext=function(t,e){return this._dragObj&&this._dragObj.getDragContext?this._dragObj.getDragContext(t,e):null},e.DragSource.prototype.getDragObject=function(){return this._dragObj},e.DragSource.prototype.getDragCoords=function(){return this._dragCoords},e.DragSource.prototype.getDragOffset=function(t,i){var n={},o=this.getDragOverFeedback(t,i);if(o){var r=e.DragAndDropUtils.getDragFeedbackBounds(o,this._context.getStage()),s=this.getDragObject();s&&s.afterDragOverFeedback&&s.afterDragOverFeedback(o),r&&(n.x=t-r.x,n.y=i-r.y,n.x+=e.DragSource.DRAG_FEEDBACK_MARGIN,n.y+=e.DragSource.DRAG_FEEDBACK_MARGIN)}else n.x=0,n.y=0;return n},e.DragSource.prototype.getPointerOffset=function(t,e){return{x:0,y:0}},e.DragSource.prototype.initiateDrag=function(){var t=this.getTouchManager();e.Agent.isTouchDevice()&&t&&t.cancelTouchHold()},e.DragSource.prototype.dragDropEnd=function(){this._dragCandidate=null,this._dragObj=null,this._dragCoords=null},e.DragSource.prototype.setTouchManager=function(t){this._touchManager=t},e.DragSource.prototype.getTouchManager=function(){return this._touchManager},e.DropTarget=function(){},e.Obj.createSubclass(e.DropTarget,e.Obj),e.DropTarget.prototype.acceptDrag=function(t,e,i,n){return null},e.DropTarget.prototype.dragEnter=function(){},e.DropTarget.prototype.dragExit=function(){},e.DropTarget.prototype.getDropSite=function(t,e){return null},e.Button=function(t,e,i,n,o,r,s,a){this.Init(t,e,i,n,o,r,s,a)},e.Obj.createSubclass(e.Button,e.Container),e.Button.STATE_ENABLED=0,e.Button.STATE_OVER=1,e.Button.STATE_DOWN=2,e.Button.STATE_DISABLED=3,e.Button.NO_EVENT_LISTENERS=!0,e.Button.prototype.Init=function(t,i,n,o,r,s,a,l){e.Button.superclass.Init.call(this,t,null,s),this.setCallback(a,l),this._bDuringInit=!0,this.setUpState(i),this.setOverState(n),this.setDownState(o),r&&this.setDisabledState(r),this.setEnabled(!0),this.drawUpState(),this._tooltip=null,this._bToggleEnabled=!1,this._bToggled=!1,this._bDuringInit=!1},e.Button.prototype.isEnabled=function(){return this._enabled},e.Button.prototype.setEnabled=function(t){if(this._enabled!=t){this._enabled=t;var i=e.Agent.isTouchDevice()?e.TouchEvent.TOUCHSTART:e.MouseEvent.CLICK;t?(this.addEvtListener(e.MouseEvent.MOUSEOVER,this.OnMouseOver,!1,this),this.addEvtListener(e.MouseEvent.MOUSEOUT,this.OnMouseOut,!1,this),this.addEvtListener(e.MouseEvent.MOUSEDOWN,this.OnMouseDown,!1,this),this.addEvtListener(e.MouseEvent.MOUSEUP,this.OnMouseUp,!1,this),this.addEvtListener(i,this.OnClick,!1,this),this.setCursor(e.SelectionEffectUtils.getSelectingCursor())):(this.removeEvtListener(e.MouseEvent.MOUSEOVER,this.OnMouseOver,!1,this),this.removeEvtListener(e.MouseEvent.MOUSEOUT,this.OnMouseOut,!1,this),this.removeEvtListener(e.MouseEvent.MOUSEDOWN,this.OnMouseDown,!1,this),this.removeEvtListener(e.MouseEvent.MOUSEUP,this.OnMouseUp,!1,this),this.removeEvtListener(i,this.OnClick,!1,this),this.setCursor(null)),this.initState()}},e.Button.prototype.OnMouseOver=function(t){this._bToggled?this.drawOverDownState():this.drawOverState()},e.Button.prototype.OnMouseOut=function(t){this._bToggled?this.drawDownState():this.drawUpState()},e.Button.prototype.OnMouseDown=function(t){this.drawDownState()},e.Button.prototype.OnMouseUp=function(t){this._bToggled?e.Agent.isTouchDevice()?this.drawDownState():this.drawOverDownState():e.Agent.isTouchDevice()?this.drawUpState():this.drawOverState()},e.Button.prototype.OnClick=function(t){this._bToggleEnabled&&(this._bToggled=!this._bToggled,this._bToggled?e.Agent.isTouchDevice()?this.drawDownState():this.drawOverDownState():e.Agent.isTouchDevice()?this.drawUpState():this.drawOverState()),this._callback&&(this._callback.call(this._callbackObj,t,this),t.stopPropagation(),t.preventDefault())},e.Button.prototype.drawUpState=function(){this._enableButton(this.upState,!0),this._enableButton(this.downState,!1),this._enableButton(this.overState,!1),this._enableButton(this.disabledState,!1),this._enableButton(this.overDownState,!1)},e.Button.prototype.drawOverState=function(){this._enableButton(this.upState,!1),this._enableButton(this.downState,!1),this._enableButton(this.overState,!0),this._enableButton(this.disabledState,!1),this._enableButton(this.overDownState,!1)},e.Button.prototype.drawDownState=function(){this._enableButton(this.upState,!1),this._enableButton(this.downState,!0),this._enableButton(this.overState,!1),this._enableButton(this.disabledState,!1),this._enableButton(this.overDownState,!1)},e.Button.prototype.drawDisabledState=function(){this._enableButton(this.upState,!1),this._enableButton(this.overState,!1),this._enableButton(this.downState,!1),this._enableButton(this.disabledState,!0),this._enableButton(this.overDownState,!1)},e.Button.prototype.drawOverDownState=function(){this.overDownState?(this._enableButton(this.upState,!1),this._enableButton(this.overState,!1),this._enableButton(this.downState,!1),this._enableButton(this.disabledState,!1),this._enableButton(this.overDownState,!0)):this.drawDownState()},e.Button.prototype._enableButton=function(t,e){t&&t.setAlpha(e?1:0)},e.Button.prototype._enableMouseEvents=function(t,e){t.setMouseEnabled&&t.setMouseEnabled(e);for(var i=t.firstChild;null!=i;)this._enableMouseEvents(i,e),i=i.nextSibling},e.Button.prototype.setUpState=function(t){if(!this.upState||this.upState!=t){var e=!1;if(this.upState)e=this._isButtonEnabled(this.upState),this.removeChild(this.upState);else if(!this._bDuringInit){var i=!1,n=!1,o=!1;this.downState&&(i=this._isButtonEnabled(this.downState)),this.overState&&(n=this._isButtonEnabled(this.overState)),this.disabledState&&(o=this._isButtonEnabled(this.disabledState)),i||n||o||(e=!0)}t&&this.addChild(t),this.upState=t,this._enableButton(this.upState,e)}},e.Button.prototype.setDownState=function(t){if(!this.downState||this.downState!=t){var e=!1;this.downState&&(e=this._isButtonEnabled(this.downState),this.removeChild(this.downState)),t&&this.addChild(t),this.downState=t,this._enableButton(this.downState,e)}},e.Button.prototype.setOverState=function(t){if(!this.overState||this.overState!=t){var e=!1;this.overState&&(e=this._isButtonEnabled(this.overState),this.removeChild(this.overState)),t&&this.addChild(t),this.overState=t,this._enableButton(this.overState,e)}},e.Button.prototype.setDisabledState=function(t){if(!this.disabledState||this.disabledState==t){var e=!1;this.disabledState&&(e=this._isButtonEnabled(this.disabledState),this.removeChild(this.disabledState)),t&&this.addChild(t),this.disabledState=t,this._enableButton(this.disabledState,e)}},e.Button.prototype.setOverDownState=function(t){if(!this.overDownState||this.overDownState==t){var e=!1;this.overDownState&&(e=this._isButtonEnabled(this.overDownState),this.removeChild(this.overDownState)),t&&this.addChild(t),this.overDownState=t,this._enableButton(this.overDownState,e)}},e.Button.prototype.setCallback=function(t,e){this._callback=t,this._callbackObj=e},e.Button.prototype.setTooltip=function(t){this._tooltip=t,t&&(this.setAriaRole("button"),this.setAriaProperty("label",t))},e.Button.prototype.getTooltip=function(){return this._tooltip},e.Button.prototype.isClickEventPropagationStopped=function(){return!0},e.Button.prototype.initState=function(){this.isEnabled()?this.drawUpState():this.drawDisabledState()},e.Button.prototype.setSize=function(t,e){var i=this.upState;i&&(i.setWidth&&t&&i.setWidth(t),i.setHeight&&e&&i.setHeight(e));var n=this.downState;n&&(n.setWidth&&t&&n.setWidth(t),n.setHeight&&e&&n.setHeight(e));var o=this.overState;o&&(o.setWidth&&t&&o.setWidth(t),o.setHeight&&e&&o.setHeight(e));var r=this.disabledState;r&&(r.setWidth&&t&&r.setWidth(t),r.setHeight&&e&&r.setHeight(e))},e.Button.prototype.rightAlign=function(t,e,i){var n=t-e,o=this.upState;o&&t&&(i?o.setTranslateX(n):this._setChildX(o,n));var r=this.downState;r&&t&&(i?r.setTranslateX(n):this._setChildX(r,n));var s=this.overState;s&&t&&(i?s.setTranslateX(n):this._setChildX(s,n));var a=this.disabledState;a&&(i?a.setTranslateX(n):this._setChildX(a,n))},e.Button.prototype._setChildX=function(t,i){for(var n=0;n<t.getNumChildren();n++){var o=t.getChildAt(n);o instanceof e.Displayable&&o.setTranslateX(i)}},e.Button.prototype.setToggleEnabled=function(t){this._bToggleEnabled=t},e.Button.prototype.isToggleEnabled=function(){return this._bToggleEnabled},e.Button.prototype.setToggled=function(t){this._bToggleEnabled&&(this._bToggled=t,this._bToggled?this.drawDownState():this.drawUpState())},e.Button.prototype.isToggled=function(){return this._bToggled},e.Button.prototype._isButtonEnabled=function(t){var e=!1;return t&&(e=t.getAlpha()>0),e},e.Button.prototype.getUpState=function(){return this.upState},e.Button.prototype.getDownState=function(){return this.downState},e.Button.prototype.getOverState=function(){return this.overState},e.Button.prototype.showKeyboardFocusEffect=function(){this._keyboardFocusEffect||(this._keyboardFocusEffect=this.CreateKeyboardFocusEffect()),this._keyboardFocusEffect.show(),this._isShowingKeyboardFocusEffect=!0,this.getCtx().setActiveElement(this)},e.Button.prototype.hideKeyboardFocusEffect=function(){this._keyboardFocusEffect&&this._keyboardFocusEffect.hide(),this._isShowingKeyboardFocusEffect=!1},e.Button.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},e.Button.prototype.CreateKeyboardFocusEffect=function(){return new e.KeyboardFocusEffect(this.getCtx(),this,this.getDimensions(),null,null,!0)},e.Button.prototype.handleKeyboardEvent=function(t){var i=t.keyCode;i!=e.KeyboardEvent.ENTER&&i!=e.KeyboardEvent.SPACE||this._callback&&(this._callback.call(this._callbackObj,t,this),t.stopPropagation(),t.preventDefault())},e.TransientButton=function(t,e,i,n,o,r,s){this.Init(t,e,i,n,o,r,s)},e.Obj.createSubclass(e.TransientButton,e.Button),e.TransientButton._DEFAULT_RADIUS=15.5,e.TransientButton.prototype.Init=function(t,i,n,o,r,s,a){e.TransientButton.superclass.Init.call(this,t,i,n,o,r,null,a,s);var l=t.getStage();l.addEvtListener(y.FOCUS,this._onFocus,!0,this),l.addEvtListener(y.BLUR,this._onBlur,!0,this),e.Agent.isTouchDevice()||(e.Agent.isPlatformIE()?(l.addEvtListener("mouseenter",this._onMouseOver,!1,this),l.addEvtListener("mouseleave",this._onMouseOut,!1,this)):(l.addEvtListener(e.MouseEvent.MOUSEOVER,this._onMouseOver,!1,this),l.addEvtListener(e.MouseEvent.MOUSEOUT,this._onMouseOut,!1,this)))},e.TransientButton.getStateFromURL=function(t,i,n,o,r,s){var a=e.TransientButton._DEFAULT_RADIUS,l=a/2,h=new e.Circle(t,a,a,a);h.setSolidFill(r),h.setSolidStroke(s);var u=new e.Image(t,i,l,l,n,o);return h.addChild(u),h},e.TransientButton.prototype.show=function(){this.setAlpha(1)},e.TransientButton.prototype.hide=function(){this.setAlpha(0)},e.TransientButton.prototype._onFocus=function(t){this._isFocused=!0,this.show()},e.TransientButton.prototype._onBlur=function(t){this._isFocused=!1,this._isMouseOver||this.hide()},e.TransientButton.prototype._onMouseOver=function(t){this._mouseOutTimer&&this._mouseOutTimer.isRunning()&&this._mouseOutTimer.stop(),this._isMouseOver=!0,this.show()},e.TransientButton.prototype._onMouseOut=function(t){this._mouseOutTimer||(this._mouseOutTimer=new e.Timer(this.getCtx(),10,this._onMouseOutTimerEnd,this,1)),this._mouseOutTimer.reset(),this._mouseOutTimer.start()},e.TransientButton.prototype._onMouseOutTimerEnd=function(){this._isMouseOver=!1,this._isFocused||this.hide()},e.TransientButton.prototype.OnMouseDown=function(t){e.TransientButton.superclass.OnMouseDown.call(this,t),t.stopPropagation()},e.TransientButton.prototype.OnMouseUp=function(t){e.TransientButton.superclass.OnMouseUp.call(this,t),t.stopPropagation()};var A=function(){};e.Obj.createSubclass(A,e.Obj),A.prototype.getDisplayables=function(){},A.prototype.getAriaLabel=function(){};var O=function(){};e.Obj.createSubclass(O,e.Obj),O.prototype.getTooltip=function(t,e,i){},O.prototype.getDatatip=function(t,e,i){},O.prototype.getDatatipColor=function(){};var P=function(){};e.Obj.createSubclass(P,e.Obj),P.prototype.isSelectable=function(){},P.prototype.isSelected=function(){},P.prototype.setSelected=function(t,e){},P.prototype.showHoverEffect=function(){},P.prototype.hideHoverEffect=function(){};var I=function(){};I.prototype.handleKeyboardEvent=function(t){},I.prototype.hideKeyboardFocusEffect=function(){};var D=function(){};e.Obj.createSubclass(D,e.Obj),D.prototype.getNextNavigable=function(t){},D.prototype.getTargetElem=function(){},D.prototype.getKeyboardBoundingBox=function(t){},D.prototype.showKeyboardFocusEffect=function(){},D.prototype.hideKeyboardFocusEffect=function(){},D.prototype.isShowingKeyboardFocusEffect=function(){},D.prototype.getContextMenuLocation=function(){},D.prototype.getKeyboardTooltipLocation=function(){};var x=function(){};e.Obj.createSubclass(x,e.Obj),x.prototype.getCategories=function(){},x.prototype.highlight=function(t,e){};var M=function(){};e.Obj.createSubclass(M,e.Obj),M.prototype.getContextMenuLocation=function(){};var L=function(){};e.Obj.createSubclass(L,e.Obj),L.prototype.getId=function(){},L.prototype.getShowPopupBehaviors=function(){},e.Automation=function(t){},e.Obj.createSubclass(e.Automation,e.Obj),e.Automation.TOOLTIP_SUBID="tooltip",e.Automation.prototype.getSubIdForDomElement=function(t){var i=e.Automation._findDisplayable(t);return!i||i instanceof Array?t&&this.IsTooltipElement(t)?e.Automation.TOOLTIP_SUBID:null:this.GetSubIdForDomElement(i)},e.Automation.prototype.GetSubIdForDomElement=function(t){return null},e.Automation.prototype.getDomElementForSubId=function(t){return null},e.Automation._findDisplayable=function(t){for(;t;){if(t._obj)return t._obj;t=t.parentNode}return null},e.Automation.prototype.GetTooltipElement=function(t,e){if(t){var i=t.getCtx().getTooltipManager(e).getTooltipElem();return"hidden"==i.style.visibility?null:i}return null},e.Automation.prototype.IsTooltipElement=function(t){var i=t.getAttribute("id");return!(!i||0!=i.indexOf(e.HtmlTooltipManager._TOOLTIP_DIV_ID))},e.CustomDatatipPeer=function(t,e,i,n){this.Init(t,e,i,n)},e.Obj.createSubclass(e.CustomDatatipPeer,e.Obj),e.CustomDatatipPeer.prototype.Init=function(t,e,i,n){this._tooltipManager=t,this._tooltipFunc=e,this._datatipColor=i,this._dataContext=n},e.CustomDatatipPeer.prototype.getDatatip=function(t){return this._tooltipManager.getCustomTooltip(this._tooltipFunc,this._dataContext)},e.CustomDatatipPeer.prototype.getDatatipColor=function(t){return this._datatipColor},e.SimpleObjPeer=function(t,e,i,n){this.Init(t,e,i,n)},e.Obj.createSubclass(e.SimpleObjPeer,e.Obj),e.SimpleObjPeer.prototype.Init=function(t,e,i,n){this._tooltip=t,this._datatip=e,this._datatipColor=i,this._params=n},e.SimpleObjPeer.prototype.setTooltip=function(t){this._tooltip=t},e.SimpleObjPeer.prototype.setDatatip=function(t){this._datatip=t},e.SimpleObjPeer.prototype.setDatatipColor=function(t){this._datatipColor=t},e.SimpleObjPeer.prototype.getParams=function(){return this._params},e.SimpleObjPeer.prototype.getTooltip=function(t){return this._tooltip},e.SimpleObjPeer.prototype.getDatatip=function(t){return this._datatip},e.SimpleObjPeer.prototype.getDatatipColor=function(t){return this._datatipColor},e.Agent=function(){},e.Obj.createSubclass(e.Agent,e.Obj),e.Agent.UNKNOWN_VERSION=-1,e.Agent.IE_PLATFORM="ie",e.Agent.GECKO_PLATFORM="gecko",e.Agent.WEBKIT_PLATFORM="webkit",e.Agent.UNKNOWN_PLATFORM="unknown",e.Agent.WINDOWS_OS="Windows",e.Agent.SOLARIS_OS="Solaris",e.Agent.MAC_OS="Mac",e.Agent.UNKNOWN_OS="Unknown",e.Agent.FOCUS_COLOR_DEFAULT="#0645AD",e.Agent.FOCUS_COLOR_IE="#090909",e.Agent.deferAriaCreation=function(){return!e.Agent.isTouchDevice()&&!e.Agent.isEnvironmentTest()},e.Agent.getDevicePixelRatio=function(){return e.Agent._initialize(),e.Agent._devicePixelRatio},e.Agent.getElementPosition=function(t){return e.Agent.isPlatformIE()?e.Agent._getElementPositionIE(t):e.Agent._getElementPositionDefault(t)},e.Agent.getPlatform=function(){return e.Agent._initialize(),e.Agent._platform},e.Agent.getOS=function(){return e.Agent._initialize(),e.Agent._os},e.Agent.getVersion=function(){return e.Agent._initialize(),e.Agent._version},e.Agent.isBrowserChrome=function(){return e.Agent._initialize(),e.Agent._bChrome},e.Agent.isBrowserSafari=function(){return e.Agent.isPlatformWebkit()&&!e.Agent.isBrowserChrome()},e.Agent.isPlatformGecko=function(){return e.Agent.getPlatform()==e.Agent.GECKO_PLATFORM},e.Agent.isPlatformIE=function(){return e.Agent.getPlatform()==e.Agent.IE_PLATFORM},e.Agent.isPlatformWebkit=function(){return e.Agent.getPlatform()==e.Agent.WEBKIT_PLATFORM},e.Agent.isRightToLeft=function(t){return e.Agent._initialize(),t&&null!=t.getReadingDirection()?"rtl"==t.getReadingDirection():e.Agent._bRtl},e.Agent.isTouchDevice=function(){return e.Agent._initialize(),e.Agent._bTouchDevice},e.Agent.setEnvironment=function(t){e.Agent._environment=t},e.Agent.isEnvironmentTest=function(){return"test"==e.Agent._environment},e.Agent.isEnvironmentBatik=function(){return"batik"==e.Agent._environment},e.Agent.isEnvironmentBrowser=function(){return!e.Agent.isEnvironmentTest()&&!e.Agent.isEnvironmentBatik()},e.Agent.setHighContrast=function(t){e.Agent._highContrast=t},e.Agent.isHighContrast=function(){return e.Agent._highContrast===!0},e.Agent.workaroundFirefoxRepaint=function(t){if(e.Agent.isPlatformGecko()){var i=t.getParent();if(i){var n=i.getChildIndex(t);i.removeChildAt(n),i.addChildAt(t,n)}}},e.Agent._initialize=function(){if(!e.Agent._bInitialized){var t=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():null;e.Agent._os=e.Agent._determineOS(t),e.Agent._platform=e.Agent._determinePlatform(t),e.Agent._bChrome=t&&t.indexOf("chrome/")!=-1&&t.indexOf("edge")===-1,e.Agent._version=e.Agent._determineVersion(t,e.Agent._platform),e.Agent._bRtl=!(!document||!document.documentElement)&&"rtl"==document.documentElement.dir,e.Agent._bTouchDevice=e.Agent._platform==e.Agent.WEBKIT_PLATFORM&&t&&(t.indexOf("mobile")!=-1||t.indexOf("android")!=-1),e.Agent._devicePixelRatio=window&&null!=window.devicePixelRatio?window.devicePixelRatio:1,e.Agent._bInitialized=!0}},e.Agent._determineOS=function(t){if(t){if(t.indexOf("win")!=-1)return e.Agent.WINDOWS_OS;if(t.indexOf("mac")!=-1)return e.Agent.MAC_OS;if(t.indexOf("sunos")!=-1)return e.Agent.SOLARIS_OS}return e.Agent.UNKNOWN_OS},e.Agent._determinePlatform=function(t){if(t){if(t.indexOf("opera")!=-1)return e.Agent.UNKNOWN_PLATFORM;if(t.indexOf("trident")!=-1||t.indexOf("msie")!=-1||t.indexOf("edge")!=-1)return e.Agent.IE_PLATFORM;if(t.indexOf("applewebkit")!=-1||t.indexOf("safari")!=-1)return e.Agent.WEBKIT_PLATFORM;if(t.indexOf("gecko/")!=-1)return e.Agent.GECKO_PLATFORM}return e.Agent.UNKNOWN_PLATFORM},e.Agent._determineVersion=function(t,i){if(t){if(i==e.Agent.GECKO_PLATFORM)return e.Agent._parseFloatVersion(t,/rv:(\d+[.]\d+)/);if(i==e.Agent.IE_PLATFORM){var n=e.Agent._parseFloatVersion(t,/trident\/(\d+[.]\d+)/);if(n!=e.Agent.UNKNOWN_VERSION)return n+4;var o=e.Agent._parseFloatVersion(t,/edge\/(\d+[.]\d+)/);if(o!=e.Agent.UNKNOWN_VERSION)return o;var r=e.Agent._parseFloatVersion(t,/msie (\d+\.\d+);/);return r!=e.Agent.UNKNOWN_VERSION?r:e.Agent._parseFloatVersion(t,/msie (\d+\.\d+)b;/)}if(i==e.Agent.WEBKIT_PLATFORM)return e.Agent._bChrome?e.Agent._parseFloatVersion(t,/chrome\/(\d+([.]\d+)*)/):e.Agent._parseFloatVersion(t,/applewebkit\/(\d+([.]\d+)*)/)}return e.Agent.UNKNOWN_VERSION},e.Agent._parseFloatVersion=function(t,i){try{var n=t.match(i);return n&&n[1]?parseFloat(n[1]):e.Agent.UNKNOWN_VERSION}catch(t){return e.Agent.UNKNOWN_VERSION}},e.Agent._getElementPositionDefault=function(t){var i=t.getBoundingClientRect(),n=Math.round(i.top),o=i.left,r=t.ownerDocument.documentElement,s=t.ownerDocument.body;return o+=r.scrollLeft||s.scrollLeft,n+=r.scrollTop||s.scrollTop,new e.Point(o,n)},e.Agent._getElementPositionIE=function(t){var i=t.getBoundingClientRect(),n=i.top,o=i.left,r=t.ownerDocument.documentElement,s=r.scrollLeft;return o-=r.clientLeft-s,n-=r.clientTop-r.scrollTop,new e.Point(o,n)},e.Agent.getFocusColor=function(){if(e.Agent._initialize(),!e.Agent._focusColor){var t;if(e.Agent.isPlatformWebkit()&&!e.Agent.isEnvironmentTest()){var i=document.getElementsByTagName("body")[0],n=document.createElement("div");i.appendChild(n),n.style.outline="-webkit-focus-ring-color",t=window.getComputedStyle(n).getPropertyValue("outline-color"),i.removeChild(n)}else e.Agent.isPlatformIE()&&(t=e.Agent.FOCUS_COLOR_IE);e.Agent._focusColor=t?t:e.Agent.FOCUS_COLOR_DEFAULT}return e.Agent._focusColor},e.Bundle=function(){},e.Bundle._localizedStrings={},e.Bundle._defaultStrings={},e.Obj.createSubclass(e.Bundle,e.Obj),e.Bundle.SUBCOMPONENT_PREFIX="DvtSubcomponentBundle",e.Bundle.AFCOMPONENT_PREFIX="DvtAfComponentBundle",e.Bundle.UTIL_PREFIX="DvtUtilBundle",e.Bundle.CHART_PREFIX="DvtChartBundle",e.Bundle.GAUGE_PREFIX="DvtGaugeBundle",e.Bundle.TREEMAP_PREFIX="DvtTreemapBundle",e.Bundle.SUNBURST_PREFIX="DvtSunburstBundle",e.Bundle.NBOX_PREFIX="DvtNBoxBundle",e.Bundle.HIERARCHYVIEWER_PREFIX="DvtHierarchyViewerBundle",e.Bundle.ADF_DIAGRAM_PREFIX="DvtAdfDiagramBundle",e.Bundle.DIAGRAM_PREFIX="DvtDiagramBundle",e.Bundle.TAGCLOUD_PREFIX="DvtTagCloudBundle",e.Bundle.TIMELINE_PREFIX="DvtTimelineBundle",e.Bundle.addLocalizedStrings=function(t){for(var i in t)e.Bundle._localizedStrings[i]=t[i]},e.Bundle.addDefaultStrings=function(t,i){for(var n in i)e.Bundle._defaultStrings[t+"."+n]=i[n]},e.Bundle.format=function(t,e){return t.replace(/\{(\d+)\}/g,function(){return e[arguments[1]]})},e.Bundle.getTranslatedString=function(t,i,n){var o=t+"."+i,r=e.Bundle._localizedStrings[o];return r||(r=e.Bundle._defaultStrings[o]),r&&null!==n&&void 0!==n&&(r=n instanceof Array?e.Bundle.format(r,n):e.Bundle.format(r,[n])),r},e.Bundle.getTranslation=function(t,i,n,o,r){var s=t&&t.translations?t.translations[i]:null;if(!s){var a=n+"."+o;s=e.Bundle._localizedStrings[a],s||(s=e.Bundle._defaultStrings[a])}return s&&null!==r&&void 0!==r&&(s=r instanceof Array?e.Bundle.format(s,r):e.Bundle.format(s,[r])),s},e.ContextMenuHandler=function(t,e){this._context=t,this._menus=e},e.Obj.createSubclass(e.ContextMenuHandler,e.Obj),e.ContextMenuHandler.TYPE_BODY_CONTEXT_MENU="bodyContextMenu",
e.ContextMenuHandler.TYPE_CONTEXT_MENU="contextMenu",e.ContextMenuHandler.TYPE_MULTI_SELECT_CONTEXT_MENU="multiSelectContextMenu",e.ContextMenuHandler._ATTR_MENU_CONTAINER_TYPE="t",e.ContextMenuHandler._ATTR_MENU_CONTAINER_POPUP_ID="id",e.ContextMenuHandler.prototype.show=function(t,i){for(var n=0;n<this._menus.length;n++){var o=this._menus[n];if(i==o[e.ContextMenuHandler._ATTR_MENU_CONTAINER_TYPE]){var r=o[e.ContextMenuHandler._ATTR_MENU_CONTAINER_POPUP_ID];return e.EventFactory.newAdfContextMenuEvent(t.getNativeEvent(),r)}}return null};var R=function(t,i,n){this._context=t,this._callback=i,this._callbackObj=n,this._popupPosition=null,this._mouseTarget=null,this._behavior=null,this._hoverPopupShown=!1,this._hoverTimer=new e.Timer(t,500,this._onHoverDelay,this,1),this._overTimer=new e.Timer(t,500,this._onOverDelay,this,1)};e.Obj.createSubclass(R,e.Obj),R.prototype.processPopupHelper=function(t,i,n,o,r,s){var a=!1;if(t&&i&&i.length>0)for(var l=0;l<i.length;l++){var h=i[l];if(h&&e.ArrayUtils.getIndex(n,h.getTriggerType())!=-1){this.HidePopup(r),this._behavior=h;var u=this._createShowPopupEvent(t,h,o),d=this,c=function(){e.EventDispatcher.dispatchEvent(d._callback,d._callbackObj,d,u)};s?setTimeout(c,100):c(),a=!0}}return a},R.prototype.processMousePopup=function(t,i,n,o,r,s){if(t===this._mouseTarget)return!0;if(t&&i&&i.length>0)for(var a=0;a<i.length;a++){var l=i[a],h=l?l.getTriggerType():null;if(h==e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_HOVER&&(h=e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_OVER),s==h)return this.HidePopup(r),this._mouseTarget=t,this._behavior=l,this._hoverDisplayable=o,this._popupPosition=n,s==e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_HOVER||s==e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_OVER?l.getTriggerType()==e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_HOVER?this._hoverTimer.start():this._overTimer.start():this._onOverDelay(),!0}return!1},R.prototype.processMouseOut=function(t,i,n){var o=!1;i&&(o=i.length<1),this._mouseTarget&&this._behavior&&(t===this._mouseTarget||o)&&(i&&this._hoverDisplayable&&e.ArrayUtils.getIndex(i,this._hoverDisplayable)>-1||this.HidePopup(n))},R.prototype.HidePopup=function(t){if(this._hoverPopupShown){var i=e.EventFactory.newAdfHidePopupEvent(this._behavior.getPopupId(),t.getNativeEvent().relatedTarget);e.EventDispatcher.dispatchEvent(this._callback,this._callbackObj,this,i)}else this._hoverTimer.stop();this._mouseTarget=null,this._behavior=null,this._hoverPopupShown=!1,this._hoverDisplayable=null},R.prototype.processMouseMove=function(t){this._popupPosition=t},R.prototype._createShowPopupEvent=function(t,i,n){var o=i,r=i,s=o.getAlign()&&!o.getAlignId();s&&(r=new e.ShowPopupBehavior(o.getPopupId(),o.getTriggerType(),null,null));var a=t.getPopupBounds?t.getPopupBounds(r):null,l=!o.getAlign()&&!o.getAlignId()&&"contextMenu"==o.getTriggerType();if(s&&!a||l){var h=this._context.pageToStageCoords(n.x,n.y);a=new e.Rectangle(h.x,h.y-5,1,5)}else a&&(o=new e.ShowPopupBehavior(o.getPopupId(),o.getTriggerType(),null,o.getAlign()));var u=e.EventFactory.newAdfShowPopupEvent(o,a,null,o.getTriggerType());return e.EventManager._addContextInfo(t,u),u},R.prototype._onHoverDelay=function(){if(this._mouseTarget&&this._behavior){this._hoverPopupShown=!0;var t=this._createShowPopupEvent(this._mouseTarget,this._behavior,this._popupPosition);e.EventDispatcher.dispatchEvent(this._callback,this._callbackObj,this,t)}},R.prototype._onOverDelay=function(){if(this._mouseTarget&&this._behavior){var t=this._createShowPopupEvent(this._mouseTarget,this._behavior,this._popupPosition);e.EventDispatcher.dispatchEvent(this._callback,this._callbackObj,this,t)}},R.prototype.hasPopup=function(t,i){if(!t||!t.getShowPopupBehaviors)return!1;var n=t.getShowPopupBehaviors();if(n)for(var o=0;o<n.length;o++){var r=n[o];if(r&&e.ArrayUtils.getIndex(i,r.getTriggerType())!=-1)return!0}return!1},e.ClientBehaviorHandler=function(t,e,i){this.Init(t,e,i)},e.Obj.createSubclass(e.ClientBehaviorHandler,e.Obj),e.ClientBehaviorHandler.prototype.Init=function(t,e,i){this._context=t,this._callback=e,this._callbackObj=i},e.ClientBehaviorHandler.prototype.processClick=function(t,i){var n=!1;if(t&&i&&i.length>0)for(var o=0;o<i.length;o++){var r=i[o];if(r&&(r.getTriggerType()==e.ClientBehavior.TRIGGER_TYPE_ACTION||r.getTriggerType()==e.ClientBehavior.TRIGGER_TYPE_CLICK)){var s=this.CreateClientBehaviorEvent(t,r);e.EventDispatcher.dispatchEvent(this._callback,this._callbackObj,null,s),n=!0}}return n},e.ClientBehaviorHandler.prototype.CreateClientBehaviorEvent=function(t,i){var n=new e.ClientBehaviorEvent(i);return e.EventManager._addContextInfo(t,n),n},e.SelectionHandler=function(t){this.Init(t)},e.Obj.createSubclass(e.SelectionHandler,e.Obj),e.SelectionHandler.TYPE_SINGLE="s",e.SelectionHandler.TYPE_MULTIPLE="m",e.SelectionHandler.prototype.Init=function(t){this._selection=[],this._type=t?t:e.SelectionHandler.TYPE_SINGLE,this._hiddenSelectedIds=[]},e.SelectionHandler.prototype.getType=function(){return this._type},e.SelectionHandler.prototype.getSelectedCount=function(){return this._selection.length},e.SelectionHandler.prototype.getSelection=function(){return this._selection.slice(0)},e.SelectionHandler.prototype.getSelectedIds=function(){for(var t=[],e=0;e<this._selection.length;e++)t.push(this._selection[e].getId());return t.concat(this._hiddenSelectedIds)},e.SelectionHandler.prototype.processInitialSelections=function(t,e){if(this.clearSelection(!0),t&&e){for(var i={},n=0;n<e.length;n++)null!=e[n].getId()&&(i[e[n].getId()]=e[n]);for(var o=0;o<t.length;o++){var r=i[t[o]];r&&r.isSelectable&&r.isSelectable()?this._addToSelection(r,!0,!0):this._hiddenSelectedIds.push(t[o])}}},e.SelectionHandler.prototype.processClick=function(t,i){if(t&&t.isUnrelatedToSelection&&t.isUnrelatedToSelection())return!1;var n=i&&this._type==e.SelectionHandler.TYPE_MULTIPLE,o=!1;return n?t&&t.isSelectable&&t.isSelectable()&&(o=t.isSelected()?this.removeFromSelection(t):this._addToSelection(t,!0)):o=t&&t.isSelectable&&t.isSelectable()?this._addToSelection(t,!1):this.clearSelection(),o},e.SelectionHandler.prototype.processGroupSelection=function(t,e){e||this.clearSelection();for(var i,n=0;n<t.length;n++)i=t[n],i&&i.isUnrelatedToSelection&&i.isUnrelatedToSelection()||this._addToSelection(i,!0)},e.SelectionHandler.prototype.processMouseOver=function(t){t&&t.isSelectable&&t.isSelectable()&&t.showHoverEffect&&t.showHoverEffect()},e.SelectionHandler.prototype.processMouseOut=function(t){t&&t.isSelectable&&t.isSelectable()&&t.hideHoverEffect&&t.hideHoverEffect()},e.SelectionHandler.prototype._addToSelection=function(t,e,i){return!(t.isSelected()||t.isSelectable&&!t.isSelectable())&&(e||this.clearSelection(i),t.setSelected(!0,i),this._selection.push(t),!0)},e.SelectionHandler.prototype.removeFromSelection=function(t){if(!t.isSelected())return!1;t.setSelected(!1);for(var e=0;e<this._selection.length;e++)if(this._selection[e]==t){this._selection.splice(e,1);break}return!0},e.SelectionHandler.prototype.clearSelection=function(t){if(this._selection.length<=0&&this._hiddenSelectedIds.length<=0)return!1;for(;this._selection.length>0;){var e=this._selection.pop();e.setSelected(!1,t)}return this._hiddenSelectedIds.length=0,!0},e.SelectionHandler._isEquals=function(t,e){return t==e||!(t instanceof String)&&(!(!t||!t.equals)&&t.equals(e))},e.KeyboardHandler=function(t){this.Init(t)},e.Obj.createSubclass(e.KeyboardHandler,e.Obj),e.KeyboardHandler._OPTIMAL_ANGLE1=15/180*Math.PI,e.KeyboardHandler._OPTIMAL_ANGLE2=40/180*Math.PI,e.KeyboardHandler._SUBOPTIMAL_ANGLE_PENALTY1=2,e.KeyboardHandler._SUBOPTIMAL_ANGLE_PENALTY2=6,e.KeyboardHandler.prototype.Init=function(t){this._eventManager=t},e.KeyboardHandler.prototype.processKeyDown=function(t){var i=this._eventManager.getFocus();if(i&&(this.isNavigationEvent(t)||this.isMultiSelectEvent(t))){e.EventManager.consumeEvent(t);var n=i.getNextNavigable(t);return n!=i&&(n&&this._showPopupHelper(n,[e.ShowPopupBehavior.TRIGGER_TYPE_FOCUS],t),this._showPopupHelper(i,[e.ShowPopupBehavior.TRIGGER_TYPE_BLUR],t)),n}return t.keyCode!=e.KeyboardEvent.TAB&&i&&this._showPopupHelper(i,[e.ShowPopupBehavior.TRIGGER_TYPE_KEY_DOWN],t),null},e.KeyboardHandler.prototype.processKeyUp=function(t,i){var n=this._eventManager.getFocus();n&&t.keyCode==e.KeyboardEvent.TAB?this._showPopupHelper(n,[e.ShowPopupBehavior.TRIGGER_TYPE_FOCUS],t):!n||this.isNavigationEvent(t)||this.isMultiSelectEvent(t)||this._showPopupHelper(n,i,t)},e.KeyboardHandler.getNextNavigable=function(t,i,n,o){var r=null,s=0,a=0,l=i.keyCode;if(!t)return!n||n.length<1?null:n[0];for(var h,u=t.getKeyboardBoundingBox(),d=0;d<n.length;d++){var c=n[d];t!==c&&(h=c.getKeyboardBoundingBox(),(o||e.KeyboardHandler._isInBounds(u,h,l))&&(a=e.KeyboardHandler._computeDelta(u,h,l),((l==e.KeyboardEvent.UP_ARROW||l==e.KeyboardEvent.LEFT_ARROW)&&a<0&&(!r||a>s)||(l==e.KeyboardEvent.DOWN_ARROW||l==e.KeyboardEvent.RIGHT_ARROW)&&a>0&&(!r||a<s))&&(r=c,s=a)))}return r?r:t},e.KeyboardHandler.prototype._showPopupHelper=function(t,e,i){var n=this._eventManager.getCtx(),o=t.getKeyboardBoundingBox(n.getStage()).getCenter(),r=n.stageToPageCoords(o.x,o.y),s=t.getShowPopupBehaviors?t.getShowPopupBehaviors():null;return this._eventManager.getPopupHandler().processPopupHelper(t,s,e,r,i)},e.KeyboardHandler.prototype.getDefaultNavigable=function(t){if(!t||t.length<=0)return null;for(var i,n,o=t[0],r=o.getKeyboardBoundingBox(),s=1;s<t.length;s++)i=t[s],n=i.getKeyboardBoundingBox(),((n.x==r.x&&n.y<r.y||n.x<r.x)&&!e.Agent.isRightToLeft(this._eventManager.getCtx())||(n.x+n.w==r.x+r.w&&n.y<r.y||n.x+n.w>r.x+r.w)&&e.Agent.isRightToLeft(this._eventManager.getCtx()))&&(o=i,r=o.getKeyboardBoundingBox());return o},e.KeyboardHandler.prototype.isNavigationEvent=function(t){var i=t.keyCode;switch(i){case e.KeyboardEvent.UP_ARROW:case e.KeyboardEvent.DOWN_ARROW:case e.KeyboardEvent.LEFT_ARROW:case e.KeyboardEvent.RIGHT_ARROW:return!0}return!1},e.KeyboardHandler.prototype.isSelectionEvent=function(t){return!1},e.KeyboardHandler.prototype.isMultiSelectEvent=function(t){return!1},e.KeyboardHandler.prototype.isContextMenuEvent=function(t){return t.keyCode==e.KeyboardEvent.M&&t.altKey&&t.ctrlKey},e.KeyboardHandler._isInBounds=function(t,i,n){if(n==e.KeyboardEvent.UP_ARROW||n==e.KeyboardEvent.DOWN_ARROW){var o=t.x,r=o+t.w,s=i.x,a=s+i.w;return!(o>=a||r<=s)}if(n==e.KeyboardEvent.LEFT_ARROW||n==e.KeyboardEvent.RIGHT_ARROW){var l=t.y,h=l+t.h,u=i.y,d=u+i.h;return!(l>=d||h<=u)}},e.KeyboardHandler._computeDelta=function(t,i,n){var o=0,r=t.getCenter().x,s=t.getCenter().y,a=i.getCenter().x,l=i.getCenter().y;return n==e.KeyboardEvent.UP_ARROW||n==e.KeyboardEvent.DOWN_ARROW?o=l-s:n!=e.KeyboardEvent.LEFT_ARROW&&n!=e.KeyboardEvent.RIGHT_ARROW||(o=a-r),o},e.KeyboardHandler.getNextAdjacentNavigable=function(t,i,n){var o=i.keyCode;if(!n)return null;if(!t)return n[0];for(var r=t,s=Number.MAX_VALUE,a=!1,l=0;l<n.length;l++){var h=n[l];if(h!==t&&e.KeyboardHandler._isValidDestination(h,t,o)){var u=e.KeyboardHandler._calcInContact(h,t,o);if(!a||u){var d=e.KeyboardHandler._calcDistanceAngleWeighted(h,t,o);(!a&&u||d<s&&(a&&u||!a))&&(s=d,r=h,a=u)}}}return r},e.KeyboardHandler._calcInContact=function(t,i,n){var o=t.getKeyboardBoundingBox(),r=i.getKeyboardBoundingBox();switch(n){case e.KeyboardEvent.UP_ARROW:return e.KeyboardHandler._isVerticallyAligned(o,r)&&(r.y<=o.y+o.h||e.KeyboardHandler._areEqualWithinTolerance(r.y,o.y+o.h));case e.KeyboardEvent.DOWN_ARROW:return e.KeyboardHandler._isVerticallyAligned(o,r)&&(o.y<=r.y+r.h||e.KeyboardHandler._areEqualWithinTolerance(o.y,r.y+r.h));case e.KeyboardEvent.RIGHT_ARROW:return e.KeyboardHandler._isHorizontallyAligned(o,r)&&(o.x<=r.x+r.w||e.KeyboardHandler._areEqualWithinTolerance(o.x,r.x+r.w));case e.KeyboardEvent.LEFT_ARROW:return e.KeyboardHandler._isHorizontallyAligned(o,r)&&(r.x<=o.x+o.w||e.KeyboardHandler._areEqualWithinTolerance(r.x,o.x+o.w))}return!1},e.KeyboardHandler._isVerticallyAligned=function(t,e){return t.x>=e.x&&t.x<=e.x+e.w||e.x>=t.x&&e.x<=t.x+t.w},e.KeyboardHandler._isHorizontallyAligned=function(t,e){return t.y>=e.y&&t.y<=e.y+e.h||e.y>=t.y&&e.y<=t.y+t.h},e.KeyboardHandler._calcDistanceAngleWeighted=function(t,i,n){var o=t.getKeyboardBoundingBox(),r=o.x+o.w/2,s=o.y+o.h/2,a=i.getKeyboardBoundingBox(),l=a.x+a.w/2,h=a.y+a.h/2,u=Math.abs(r-l),d=Math.abs(s-h),c=Math.atan2(d,u),p=Math.sqrt(u*u+d*d);return(c>e.KeyboardHandler._OPTIMAL_ANGLE1&&(n==e.KeyboardEvent.RIGHT_ARROW||n==e.KeyboardEvent.LEFT_ARROW)||c<e.Math.HALF_PI-e.KeyboardHandler._OPTIMAL_ANGLE1&&(n==e.KeyboardEvent.UP_ARROW||n==e.KeyboardEvent.DOWN_ARROW))&&(p*=c>e.KeyboardHandler._OPTIMAL_ANGLE2&&(n==e.KeyboardEvent.RIGHT_ARROW||n==e.KeyboardEvent.LEFT_ARROW)||c<e.Math.HALF_PI-e.KeyboardHandler._OPTIMAL_ANGLE2&&(n==e.KeyboardEvent.UP_ARROW||n==e.KeyboardEvent.DOWN_ARROW)?e.KeyboardHandler._SUBOPTIMAL_ANGLE_PENALTY2:e.KeyboardHandler._SUBOPTIMAL_ANGLE_PENALTY1),p},e.KeyboardHandler._isValidDestination=function(t,i,n){var o=t.getKeyboardBoundingBox(),r=i.getKeyboardBoundingBox();switch(n){case e.KeyboardEvent.UP_ARROW:return o.y<r.y||e.KeyboardHandler._areEqualWithinTolerance(o.y,r.y);case e.KeyboardEvent.DOWN_ARROW:return o.y>r.y||e.KeyboardHandler._areEqualWithinTolerance(o.y,r.y);case e.KeyboardEvent.RIGHT_ARROW:return o.x>r.x||e.KeyboardHandler._areEqualWithinTolerance(o.x,r.x);case e.KeyboardEvent.LEFT_ARROW:return o.x<r.x||e.KeyboardHandler._areEqualWithinTolerance(o.x,r.x)}return!0},e.KeyboardHandler._areEqualWithinTolerance=function(t,e){return Math.abs(t-e)<=1e-7},e.MarqueeHandler=function(t,e,i,n,o,r,s,a,l){this.Init(t,e,i,n,o,r,s,a,l)},e.Obj.createSubclass(e.MarqueeHandler,e.Obj),e.MarqueeHandler.prototype.Init=function(t,i,n,o,r,s,a,l,h){this._context=t.getCtx(),this._container=t,this._bounds=i,this._fill=o,this._stroke=r,this._allowHoriz=null==s||s,this._allowVert=null==a||a,this._horizBounds=l,this._vertBounds=h,this._glassPane=new e.Rect(this._context,n.x,n.y,n.w,n.h),this._glassPane.setInvisibleFill(),this._marqueeOn=!1,this._marqueeDrawn=!1,this._resizeHoriz=!1,this._resizeVert=!1},e.MarqueeHandler.prototype.processDragStart=function(t,i){if(!this._marqueeOn){if(this._origPt=this._container.stageToLocal(t),this._resizeHoriz=this._allowHoriz,this._resizeVert=this._allowVert,!this._bounds.containsPoint(this._origPt.x,this._origPt.y))if(this._vertBounds&&this._vertBounds.containsPoint(this._origPt.x,this._origPt.y))this._resizeHoriz=!1;else{if(!this._horizBounds||!this._horizBounds.containsPoint(this._origPt.x,this._origPt.y))return null;this._resizeVert=!1}return this._marqueeOn=!0,this._marquee=null,this._createMarqueeEvent(e.MarqueeEvent.SUBTYPE_START,i)}return null},e.MarqueeHandler.prototype.processDragMove=function(t,i){if(!this._marqueeOn)return null;this._marqueeDrawn||(this._container.addChild(this._glassPane),this._marquee=new e.Rect(this._context,this._bounds.x,this._bounds.y,this._bounds.w,this._bounds.h),this._resizeHoriz&&(this._marquee.setX(this._origPt.x),this._marquee.setWidth(0)),this._resizeVert&&(this._marquee.setY(this._origPt.y),this._marquee.setHeight(0)),this._marquee.setStroke(this._stroke),this._marquee.setFill(this._fill),this._marquee.setPixelHinting(!0),this._glassPane.addChild(this._marquee),this._marqueeDrawn=!0);var n=this._container.stageToLocal(t);return n.x=Math.max(n.x,this._bounds.x),n.x=Math.min(n.x,this._bounds.x+this._bounds.w),n.y=Math.max(n.y,this._bounds.y),n.y=Math.min(n.y,this._bounds.y+this._bounds.h),this._resizeHoriz&&(this._marquee.setWidth(Math.abs(n.x-this._origPt.x)),n.x<this._origPt.x?this._marquee.setX(n.x):this._marquee.setX(this._origPt.x)),this._resizeVert&&(this._marquee.setHeight(Math.abs(n.y-this._origPt.y)),n.y<this._origPt.y?this._marquee.setY(n.y):this._marquee.setY(this._origPt.y)),this._createMarqueeEvent(e.MarqueeEvent.SUBTYPE_MOVE,i)},e.MarqueeHandler.prototype.processDragEnd=function(t,i){return this._marqueeOn&&(this._marqueeOn=!1,this._marqueeDrawn)?(this._glassPane.removeChild(this._marquee),this._container.removeChild(this._glassPane),this._marqueeDrawn=!1,this._createMarqueeEvent(e.MarqueeEvent.SUBTYPE_END,i)):null},e.MarqueeHandler.prototype.cancelMarquee=function(){return!(!this._marqueeOn||(this._marqueeOn=!1,!this._marqueeDrawn))&&(this._glassPane.removeChild(this._marquee),this._container.removeChild(this._glassPane),this._marqueeDrawn=!1,!0)},e.MarqueeHandler.prototype._createMarqueeEvent=function(t,i){var n=null,o=null,r=null,s=null;return this._resizeHoriz&&(n=this._marquee?this._marquee.getX():this._origPt.x,r=this._marquee?this._marquee.getWidth():0),this._resizeVert&&(o=this._marquee?this._marquee.getY():this._origPt.y,s=this._marquee?this._marquee.getHeight():0),new e.MarqueeEvent(t,n,o,r,s,i)},e.MarqueeHandler.prototype.getCursor=function(t){var e=this._container.stageToLocal(t),i=this._bounds.containsPoint(e.x,e.y),n=this._vertBounds&&this._vertBounds.containsPoint(e.x,e.y),o=this._horizBounds&&this._horizBounds.containsPoint(e.x,e.y);return i||n||o?"crosshair":"inherit"},e.PanZoomHandler=function(t,e,i,n){this.Init(t,e,i,n)},e.Obj.createSubclass(e.PanZoomHandler,e.Obj),e.PanZoomHandler.prototype.Init=function(t,i,n,o){this._context=t.getCtx(),this._container=t,this._bounds=i,this._zoomRate=o,this._glassPane=new e.Rect(this._context,n.x,n.y,n.w,n.h),this._glassPane.setInvisibleFill(),this._panOn=!1,this._glassPaneDrawn=!1,this._pinchOn=!1},e.PanZoomHandler.prototype.processDragStart=function(t){return this._panOn?null:(this._origPt=this._container.stageToLocal(t),this._lastPt=this._origPt,this._bounds.containsPoint(this._origPt.x,this._origPt.y)?(this._panOn=!0,new e.PanZoomEvent(e.PanZoomEvent.SUBTYPE_PAN_START,0,0,0,0,0,0,0,0)):null)},e.PanZoomHandler.prototype.processDragMove=function(t){if(!this._panOn)return null;this._glassPaneDrawn||(this._container.addChild(this._glassPane),this._glassPaneDrawn=!0);var i=this._container.stageToLocal(t),n=i.x-this._lastPt.x,o=i.y-this._lastPt.y,r=i.x-this._origPt.x,s=i.y-this._origPt.y;return this._lastPt=i,new e.PanZoomEvent(e.PanZoomEvent.SUBTYPE_PAN_MOVE,-n,-n,-o,-o,-r,-r,-s,-s)},e.PanZoomHandler.prototype.processDragEnd=function(t){if(this._panOn&&(this._panOn=!1,this._glassPaneDrawn)){this._container.removeChild(this._glassPane),this._glassPaneDrawn=!1;var i=t?this._container.stageToLocal(t):this._lastPt,n=i.x-this._lastPt.x,o=i.y-this._lastPt.y,r=i.x-this._origPt.x,s=i.y-this._origPt.y;return this._lastPt=null,new e.PanZoomEvent(e.PanZoomEvent.SUBTYPE_PAN_END,-n,-n,-o,-o,-r,-r,-s,-s)}return null},e.PanZoomHandler.prototype.processMouseWheel=function(t,i){var n=this._container.stageToLocal(t);if(!this._bounds.containsPoint(n.x,n.y))return null;i*=this._zoomRate;var o=i*(n.x-this._bounds.x),r=-i*(this._bounds.x+this._bounds.w-n.x),s=i*(n.y-this._bounds.y),a=-i*(this._bounds.y+this._bounds.h-n.y);return new e.PanZoomEvent(e.PanZoomEvent.SUBTYPE_ZOOM,o,r,s,a,o,r,s,a)},e.PanZoomHandler.prototype.processPinchStart=function(t,i){return this._pinchOn?null:(this._origPt1=this._container.stageToLocal(t),this._origPt2=this._container.stageToLocal(i),this._lastPt1=this._origPt1,this._lastPt2=this._origPt2,this._bounds.containsPoint(this._origPt1.x,this._origPt1.y)&&this._bounds.containsPoint(this._origPt2.x,this._origPt2.y)?(this._pinchOn=!0,new e.PanZoomEvent(e.PanZoomEvent.SUBTYPE_PINCH_START,0,0,0,0,0,0,0,0)):null)},e.PanZoomHandler.prototype.processPinchMove=function(t,i){if(!this._pinchOn)return null;var n=this._container.stageToLocal(t),o=this._container.stageToLocal(i),r=this._computePinchDeltas(n,o,this._lastPt1,this._lastPt2),s=this._computePinchDeltas(n,o,this._origPt1,this._origPt2);return this._lastPt1=n,this._lastPt2=o,new e.PanZoomEvent(e.PanZoomEvent.SUBTYPE_PINCH_MOVE,r.dxMin,r.dxMax,r.dyMin,r.dyMax,s.dxMin,s.dxMax,s.dyMin,s.dyMax)},e.PanZoomHandler.prototype.processPinchEnd=function(){if(this._pinchOn){this._pinchOn=!1;var t=this._computePinchDeltas(this._lastPt1,this._lastPt2,this._origPt1,this._origPt2);return this._lastPt1=null,this._lastPt2=null,new e.PanZoomEvent(e.PanZoomEvent.SUBTYPE_PINCH_END,0,0,0,0,t.dxMin,t.dxMax,t.dyMin,t.dyMax)}return null},e.PanZoomHandler.prototype._computePinchDeltas=function(t,e,i,n){var o=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y),s=Math.abs(i.x-n.x),a=Math.abs(i.y-n.y),l=o>r/2?s/o:1,h=r>o/2?a/r:1,u=(t.x+e.x)/2,d=(t.y+e.y)/2,c=(i.x+n.x)/2,p=(i.y+n.y)/2,_=u-c,g=d-p,m=(1-l)*(u-this._bounds.x),f=(l-1)*(this._bounds.x+this._bounds.w-u),y=(1-h)*(d-this._bounds.y),v=(h-1)*(this._bounds.y+this._bounds.h-d);return m-=_,f-=_,y-=g,v-=g,{dxMin:m,dxMax:f,dyMin:y,dyMax:v}},e.PanZoomHandler.prototype.zoomBy=function(t){var i=(1/t-1)/2,n=-i*this._bounds.w,o=i*this._bounds.w,r=-i*this._bounds.h,s=i*this._bounds.h;return new e.PanZoomEvent(e.PanZoomEvent.SUBTYPE_ZOOM,n,o,r,s,n,o,r,s)},e.PanZoomHandler.prototype.panBy=function(t,i){var n=t*this._bounds.w*(e.Agent.isRightToLeft(this._context)?-1:1),o=i*this._bounds.h;return new e.PanZoomEvent(e.PanZoomEvent.SUBTYPE_PAN_END,n,n,o,o,n,n,o,o)},e.PanZoomHandler.prototype.setPanCursor=function(t,i){e.Agent.isPlatformIE()||(t&&(this._panUpCursor="url("+t+") 8 8, auto"),i&&(this._panDownCursor="url("+i+") 8 8, auto"))},e.PanZoomHandler.prototype.getCursor=function(t){return null==t||this.isWithinBounds(t)?this._panOn?this._panDownCursor?this._panDownCursor:"move":this._panUpCursor?this._panUpCursor:"move":"inherit"},e.PanZoomHandler.prototype.isWithinBounds=function(t){var e=this._container.stageToLocal(t);return this._bounds.containsPoint(e.x,e.y)},e.TooltipManager=function(){},e.Obj.createSubclass(e.TooltipManager,e.Obj),e.TooltipManager.prototype.showDatatip=function(t,e,i,n){},e.TooltipManager.prototype.showTooltip=function(t,e,i,n,o,r){},e.TooltipManager.prototype.hideTooltip=function(){},e.CategoryRolloverHandler=function(t,i){this._callback=t,this._callbackObj=i,this._source=i,this._bHighlightMode=!1,this._hoverDelayCallback=null,this._highlightModeTimeout=null,this._hoverDelay=e.CategoryRolloverHandler._HOVER_DELAY},e.Obj.createSubclass(e.CategoryRolloverHandler,e.Obj),e.CategoryRolloverHandler._HOVER_DELAY=50,e.CategoryRolloverHandler._HOVER_TIMEOUT=1e3,e.CategoryRolloverHandler._FADE_OUT_OPACITY=.35,e.CategoryRolloverHandler.prototype.processEvent=function(t,e,i,n,o){if(t&&e&&0!=e.length){this._hoverDelayCallback&&(clearTimeout(this._hoverDelayCallback),this._hoverDelayCallback=null);var r=t._highlightType;if("over"==r){var s=this._bHighlightMode?this._hoverDelay:i;this._hoverDelayCallback=setTimeout(this.GetRolloverCallback(t,e,n,o),s),this._highlightModeTimeout&&(clearInterval(this._highlightModeTimeout),this._highlightModeTimeout=null)}else"out"==r&&this._bHighlightMode&&(this._hoverDelayCallback=setTimeout(this.GetRolloutCallback(t,e,n,o),this._hoverDelay))}},e.CategoryRolloverHandler.prototype.GetRolloverCallback=function(t,i,n,o){var r=function(){this._bHighlightMode=!0,e.CategoryRolloverHandler.highlight(t.categories,i,n,o),this._callback&&this._callback.call(this._callbackObj,t,this._source)};return e.Obj.createCallback(this,r)},e.CategoryRolloverHandler.prototype.GetRolloutCallback=function(t,i,n,o){var r=function(){e.CategoryRolloverHandler.highlight(t.categories,i,n,o),this.SetHighlightModeTimeout(),this._callback&&this._callback.call(this._callbackObj,t,this._source)};return e.Obj.createCallback(this,r)},e.CategoryRolloverHandler.highlight=function(t,i,n,o){if(i)for(var r=o?o:e.CategoryRolloverHandler._FADE_OUT_OPACITY,s=0;s<i.length;s++){var a=i[s];if(a&&a.getCategories){var l=n?e.CategoryRolloverHandler._hasAnyCategory(a,t):e.CategoryRolloverHandler._hasAllCategories(a,t),h=t&&t.length>0&&!l;e.CategoryRolloverHandler._highlightObj(a,h,r)}}},e.CategoryRolloverHandler._highlightObj=function(t,i,n){var o=i?n:1;if(t.highlight)t.highlight(i,o);else{var r=t.getDisplayables();e.CategoryRolloverHandler._updateAlpha(r,o)}},e.CategoryRolloverHandler._updateAlpha=function(t,e){if(t)for(var i=0;i<t.length;i++)t[i].setAlpha(e)},e.CategoryRolloverHandler._hasAnyCategory=function(t,i){return!(!t||!t.getCategories)&&e.ArrayUtils.hasAnyItem(t.getCategories(),i)},e.CategoryRolloverHandler._hasAllCategories=function(t,i){return!(!t||!t.getCategories)&&e.ArrayUtils.hasAllItems(t.getCategories(),i)},e.CategoryRolloverHandler.prototype.SetHighlightMode=function(t){this._bHighlightMode=t},e.CategoryRolloverHandler.prototype.SetHighlightModeTimeout=function(){var t=e.Obj.createCallback(this,function(){this.SetHighlightMode(!1)});this._highlightModeTimeout=setTimeout(t,e.CategoryRolloverHandler._HOVER_TIMEOUT)},e.CategoryRolloverHandler.prototype.setHoverDelay=function(t){this._hoverDelay=t},e.EventManager=function(t,e,i){this.Init(t,e,i)},e.Obj.createSubclass(e.EventManager,e.Obj),e.EventManager.CLEAR_SELECTION_ACTION_TYPE="clearSelectionActionType",e.EventManager.TOUCH_RESPONSE_TOUCH_START="touchStart",e.EventManager.TOUCH_RESPONSE_TOUCH_HOLD="touchHold",e.EventManager.TOUCH_RESPONSE_AUTO="auto",e.EventManager._TOUCH_RESPONSE_PADDING_CHECK=10,e.EventManager._EVENT_INFO_TOOLTIP_DISPLAYED_KEY="tooltipDisplayed",e.EventManager._EVENT_INFO_CURRENT_TARGET_KEY="currentTarget",e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY="popupDisplayed",e.EventManager.prototype.Init=function(t,i,n){this._context=t,this._callback=i,this._callbackObj=n,this._touchMap={},this._selectionHandler=null,this._marqueeHandler=null,this.PopupHandler=new R(t,i,n),this.ClientBehaviorHandler=this.CreateClientBehaviorHandler(t,i,n),this.KeyboardHandler=null,this.RolloverHandler=this.CreateCategoryRolloverHandler(i,n),this.setTooltipsEnabled(!0);var o=t.getStage().getId();o||(o="undefinedId"),this.CustomTooltipManager=this._context.getCustomTooltipManager(),this.CustomTooltipManager.addTooltipEventListener(v.TOOLTIP_CLOSED_TYPE,this.OnActionTooltipClosed,this),this.CustomTooltipManager.addTooltipEventListener(v.TOOLTIP_STARTED_TYPE,this.OnActionTooltipStarted,this),this.TouchManager=null,e.Agent.isTouchDevice()&&(this.TouchManager=new e.TouchManager("touchmanager",this._context)),this._focusedObj=null,this._shouldDisplayKeyboardFocus=!1,this._rolloverTypes=[],this._keyboardHandlers=[this],this._currentKeyboardHandlerIdx=-1,this._dndListeners={}},e.EventManager.prototype.getCtx=function(){return this._context},e.EventManager.prototype.associate=function(t,i,n){t&&(t._logicalObjects&&!n||(t._logicalObjects=[]),t._logicalObjects.push({logicalObject:i,eventManager:this}),!e.Agent.isEnvironmentBrowser()&&t.getImpl().setLogicalObj&&t.getImpl().setLogicalObj(i))},e.EventManager.prototype.addListeners=function(t){if(t&&(e.Agent.isTouchDevice()?(this.hideTooltip(),t.addEvtListener(e.TouchEvent.TOUCHSTART,this.OnTouchStartBubble,!1,this),t.addEvtListener(e.TouchEvent.TOUCHMOVE,this.OnTouchMoveBubble,!1,this),t.addEvtListener(e.TouchEvent.TOUCHEND,this.OnTouchEndBubble,!1,this),this.TouchManager.addTouchEventListener(e.ComponentTouchEvent.TOUCH_HOVER_START_TYPE,this._preOnComponentTouchHoverStart,this),this.TouchManager.addTouchEventListener(e.ComponentTouchEvent.TOUCH_HOVER_MOVE_TYPE,this._preOnComponentTouchHoverMove,this),this.TouchManager.addTouchEventListener(e.ComponentTouchEvent.TOUCH_HOVER_END_TYPE,this._preOnComponentTouchHoverEnd,this),this.TouchManager.addTouchEventListener(e.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE,this._preOnComponentTouchHoverOut,this),this.TouchManager.addTouchEventListener(e.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE,this._preOnComponentTouchHoverOver,this),this.TouchManager.addTouchEventListener(e.ComponentTouchEvent.TOUCH_CLICK_TYPE,this._preOnComponentTouchClick,this),this.TouchManager.addTouchEventListener(e.ComponentTouchEvent.TOUCH_DOUBLE_CLICK_TYPE,this._preOnComponentTouchDblClick,this)):(t.addEvtListener(e.MouseEvent.CLICK,this.PreOnClick,!1,this),t.addEvtListener(e.MouseEvent.DBLCLICK,this.PreOnDblClick,!1,this),t.addEvtListener("contextmenu",this.PreOnContextMenu,!1,this),t.addEvtListener(e.MouseEvent.MOUSEMOVE,this.PreOnMouseMove,!1,this),t.addEvtListener(e.MouseEvent.MOUSEOVER,this.PreOnMouseOver,!1,this),t.addEvtListener(e.MouseEvent.MOUSEOUT,this.PreOnMouseOut,!1,this),t.addEvtListener(e.MouseEvent.MOUSEDOWN,this.PreOnMouseDown,!1,this),t.addEvtListener(e.MouseEvent.MOUSEUP,this.PreOnMouseUp,!1,this),t.addEvtListener(e.KeyboardEvent.KEYDOWN,this.OnKeyDown,!1,this),t.addEvtListener(e.KeyboardEvent.KEYPRESS,this.OnKeyPress,!1,this),t.addEvtListener(e.KeyboardEvent.KEYUP,this.OnKeyUp,!1,this),t.addEvtListener(y.FOCUS,this.OnFocus,!1,this),t.addEvtListener(y.BLUR,this.OnBlur,!1,this)),this.isDndSupported())){var i=this.getCtx();this.setDragSource(new e.DragSource(i)),this._addDndListener("dragstart",this.OnDndDragStart),this._addDndListener("drag",this.OnDndDrag),this._addDndListener("dragend",this.OnDndDragEnd),this._addDndListener("dragenter",this.OnDndDragEnter),this._addDndListener("dragover",this.OnDndDragOver),this._addDndListener("dragleave",this.OnDndDragLeave),this._addDndListener("drop",this.OnDndDrop);var n=i.getContainer();for(var o in this._dndListeners)e.ToolkitUtils.addDomEventListener(n,o,this._dndListeners[o],!1);this._context.addDndEventManager(this)}},e.EventManager.prototype._addDndListener=function(t,i){var n=e.SvgDocumentUtils.createStaticCallback(this.getCtx(),i,this);this._dndListeners[t]=n},e.EventManager.prototype.removeListeners=function(t,e){t&&(e||this.hideTooltip(),this.RemoveListeners(t))},e.EventManager.prototype.RemoveListeners=function(t){if(e.Agent.isTouchDevice()?(t.removeEvtListener(e.TouchEvent.TOUCHSTART,this.OnTouchStartBubble,!1,this),t.removeEvtListener(e.TouchEvent.TOUCHMOVE,this.OnTouchMoveBubble,!1,this),t.removeEvtListener(e.TouchEvent.TOUCHEND,this.OnTouchEndBubble,!1,this),this.TouchManager.removeTouchEventListener(e.ComponentTouchEvent.TOUCH_HOVER_START_TYPE,this._preOnComponentTouchHoverStart,this),this.TouchManager.removeTouchEventListener(e.ComponentTouchEvent.TOUCH_HOVER_MOVE_TYPE,this._preOnComponentTouchHoverMove,this),this.TouchManager.removeTouchEventListener(e.ComponentTouchEvent.TOUCH_HOVER_END_TYPE,this._preOnComponentTouchHoverEnd,this),this.TouchManager.removeTouchEventListener(e.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE,this._preOnComponentTouchHoverOut,this),this.TouchManager.removeTouchEventListener(e.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE,this._preOnComponentTouchHoverOver,this),this.TouchManager.removeTouchEventListener(e.ComponentTouchEvent.TOUCH_CLICK_TYPE,this._preOnComponentTouchClick,this),this.TouchManager.removeTouchEventListener(e.ComponentTouchEvent.TOUCH_DOUBLE_CLICK_TYPE,this._preOnComponentTouchDblClick,this)):(t.removeEvtListener(e.MouseEvent.CLICK,this.PreOnClick,!1,this),t.removeEvtListener(e.MouseEvent.DBLCLICK,this.PreOnDblClick,!1,this),t.removeEvtListener("contextmenu",this.PreOnContextMenu,!1,this),t.removeEvtListener(e.MouseEvent.MOUSEMOVE,this.PreOnMouseMove,!1,this),t.removeEvtListener(e.MouseEvent.MOUSEOVER,this.PreOnMouseOver,!1,this),t.removeEvtListener(e.MouseEvent.MOUSEOUT,this.PreOnMouseOut,!1,this),t.removeEvtListener(e.MouseEvent.MOUSEDOWN,this.PreOnMouseDown,!1,this),t.removeEvtListener(e.MouseEvent.MOUSEUP,this.PreOnMouseUp,!1,this),t.removeEvtListener(e.KeyboardEvent.KEYDOWN,this.OnKeyDown,!1,this),t.removeEvtListener(e.KeyboardEvent.KEYUP,this.OnKeyUp,!1,this),t.removeEvtListener(e.KeyboardEvent.KEYPRESS,this.OnKeyPress,!1,this),t.removeEvtListener(y.FOCUS,this.OnFocus,!1,this),t.removeEvtListener(y.BLUR,this.OnBlur,!1,this)),this.isDndSupported()){var i=this.getCtx().getContainer();for(var n in this._dndListeners)e.ToolkitUtils.removeDomEventListener(i,n,this._dndListeners[n],!1);this._dndListeners={},this._context.removeDndEventManager(this)}},e.EventManager.prototype.destroy=function(){this.CustomTooltipManager&&(this.CustomTooltipManager.removeTooltipEventListener(v.TOOLTIP_CLOSED_TYPE,this.OnActionTooltipClosed,this),this.CustomTooltipManager.removeTooltipEventListener(v.TOOLTIP_STARTED_TYPE,this.OnActionTooltipStarted,this))},e.EventManager.prototype.PreEventBubble=function(t){this.TouchManager.preEventBubble(t)},e.EventManager.prototype.setSelectionHandler=function(t){this._selectionHandler=t},e.EventManager.prototype.getSelectionHandler=function(t){
return this._selectionHandler},e.EventManager.prototype.getPopupHandler=function(){return this.PopupHandler},e.EventManager.prototype.setMarqueeHandler=function(t){this._marqueeHandler=t},e.EventManager.prototype.setDragSource=function(t){this.DragSource=t,e.Agent.isTouchDevice()&&this.DragSource.setTouchManager(this.TouchManager)},e.EventManager.prototype.setContextMenuHandler=function(t){this.ContextMenuHandler=t},e.EventManager.prototype.setKeyboardHandler=function(t){e.Agent.isTouchDevice()||(this.KeyboardHandler=t)},e.EventManager.prototype.getKeyboardHandler=function(){return this.KeyboardHandler},e.EventManager.prototype.setFocusObj=function(t){var e=this.getFocus();if(t!=e&&(this.setFocus(t),e&&e.hideKeyboardFocusEffect(),this.ShowKeyboardFocusByDefault()&&t.showKeyboardFocusEffect(),this._currentKeyboardHandlerIdx>-1&&this._currentKeyboardHandlerIdx<this._keyboardHandlers.length)){var i=this._keyboardHandlers[this._currentKeyboardHandlerIdx];i!=this&&i.hideKeyboardFocusEffect()}this.setCurrentKeyboardHandler(this)},e.EventManager.prototype.setFocus=function(t){this.KeyboardHandler&&(this._focusedObj=t)},e.EventManager.prototype.getFocus=function(){return this.KeyboardHandler?this._focusedObj:null},e.EventManager.prototype.setFocused=function(t){var e=this.getFocus();e&&this.KeyboardHandler&&(t?this._shouldDisplayKeyboardFocus&&this._currentKeyboardHandlerIdx>=0&&this._currentKeyboardHandlerIdx<this._keyboardHandlers.length&&this._keyboardHandlers[this._currentKeyboardHandlerIdx]===this&&e.showKeyboardFocusEffect():e.hideKeyboardFocusEffect()),t||(this._shouldDisplayKeyboardFocus=!1)},e.EventManager.prototype.ShowKeyboardFocusByDefault=function(){return!1},e.EventManager.prototype.setTooltipsEnabled=function(t){this._tooltipsEnabled=t},e.EventManager.prototype.getTooltipsEnabled=function(t){return this._tooltipsEnabled},e.EventManager.prototype.GetLogicalObject=function(t,e){var i=this.GetLogicalObjectAndDisplayable(t,e);return i?i.logicalObject:null},e.EventManager.prototype.GetLogicalObjectAndDisplayable=function(t,e){for(var i=t;i;){if(i._logicalObjects)for(var n=0;n<i._logicalObjects.length;n++){var o=i._logicalObjects[n];if(o.eventManager==this){var r={};return r.logicalObject=o.logicalObject,r.displayable=i,r}}i=e?null:i.getParent()}return null},e.EventManager.prototype._getShowPopupBehaviors=function(t){if(t&&t.getShowPopupBehaviors)return t.getShowPopupBehaviors()},e.EventManager.prototype._getClientBehaviors=function(t){if(t&&t.getClientBehaviors)return t.getClientBehaviors()},e.EventManager.prototype.GetContextMenuType=function(t){var i=this.getSelectionHandler(t),n=i?i.getSelection().length:0;return n<=0?e.ContextMenuHandler.TYPE_BODY_CONTEXT_MENU:1==n?e.ContextMenuHandler.TYPE_CONTEXT_MENU:e.ContextMenuHandler.TYPE_MULTI_SELECT_CONTEXT_MENU},e.EventManager.prototype.GetTooltipColor=function(t,e,i){if(t&&t.getDatatipColor)return t.getDatatipColor()},e.EventManager.prototype.FireEvent=function(t,e){this._callback&&this._callback.call(this._callbackObj,t,e)},e.EventManager.prototype.fireSelectionEvent=function(t){var i=this.getSelectionHandler(t);if(i){var n=i.getSelectedIds(),o=e.EventFactory.newSelectionEvent(n);this._callback.call(this._callbackObj,o)}},e.EventManager.prototype.PreOnClick=function(t){if(this.IsDoubleClickable(t)){if(this._clickTimer&&this._clickTimer.isRunning()){var i=this._savedClickEvent;if(t.pageX==i.pageX&&t.pageY==i.pageY)return void this._savedClickCount++;this._clickTimer.stop(),this._onClickTimerEnd()}this._savedClickEvent=t,this._savedClickCount=1,this._clickTimer||(this._clickTimer=new e.Timer(this._context,250,this._onClickTimerEnd,this,1)),this._clickTimer.reset(),this._clickTimer.start()}else this._propagateEvent(e.MouseEvent.CLICK,t,this.OnClick)},e.EventManager.prototype._onClickTimerEnd=function(){var t=this._savedClickEvent;this._savedClickEvent=null,this._savedClickCount=0,t&&this._propagateEvent(e.MouseEvent.CLICK,t,this.OnClick)},e.EventManager.prototype.OnClick=function(t){var i=this.GetLogicalObject(this.GetCurrentTargetForEvent(t));if(this.OnClickInternal(t),this.ProcessSelectionEventHelper(i,t.ctrlKey),this._shouldDisplayKeyboardFocus=!1,i){if(this.KeyboardHandler&&i.getNextNavigable){var n=i.getNextNavigable(t);this.setFocusObj(n)}var o=!1;if(this._hasEventInfo(t)&&(o=this.GetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)),!o){var r=new e.Point(t.pageX,t.pageY);o=this.PopupHandler.processPopupHelper(i,this._getShowPopupBehaviors(i),[e.ShowPopupBehavior.TRIGGER_TYPE_ACTION,e.ShowPopupBehavior.TRIGGER_TYPE_CLICK],r,t),o&&this.SetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}if(!o){var s=this._getClientBehaviors(i);s&&(o=this.ClientBehaviorHandler.processClick(i,s))}if(!o&&i.isCommandComponent&&i.isCommandComponent()){var t=e.EventFactory.newActionEvent("action",i.getId());e.EventManager._addContextInfo(i,t),this._callback.call(this._callbackObj,t)}}},e.EventManager.prototype.IsDoubleClickable=function(t){for(var i=t.target,n=this.GetLogicalObject(this.GetCurrentTargetForEvent(t));i;){var o=this.GetLogicalObject(i,!0);if(o){if(o.isDoubleClickable&&o.isDoubleClickable()||this.PopupHandler.hasPopup(n,[e.ShowPopupBehavior.TRIGGER_TYPE_DBL_CLICK]))return!0;if(!this.IsPropagationEnabled(e.MouseEvent.DBLCLICK,null,i))return!1}i=i.getParent()}return!1},e.EventManager.prototype.ProcessSelectionEventHelper=function(t,e){var i=this.getSelectionHandler(t);if(i){var n=i.processClick(t,e);n&&this.fireSelectionEvent(t)}},e.EventManager.prototype.PreOnDblClick=function(t){var i=this.IsDoubleClickable(t);(i&&2===this._savedClickCount||!i)&&this._propagateEvent(e.MouseEvent.DBLCLICK,t,this.OnDblClick),this._savedClickCount=0},e.EventManager.prototype.OnDblClick=function(t){var i=this.GetLogicalObject(this.GetCurrentTargetForEvent(t));if(this._clickTimer&&this._clickTimer.isRunning())this._clickTimer.stop(),this._savedClickEvent=null;else if(e.Agent.isPlatformIE()&&e.Agent.getVersion()<11){if(!i)return;if(!(i.isDoubleClickable&&i.isDoubleClickable()||this.PopupHandler.hasPopup(i,[e.ShowPopupBehavior.TRIGGER_TYPE_DBL_CLICK])))return void this.OnClick(t)}if(this.OnDblClickInternal(t),i){var n=!1;if(this._hasEventInfo(t)&&(n=this.GetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)),!n){var o=new e.Point(t.pageX,t.pageY);n=this.PopupHandler.processPopupHelper(i,this._getShowPopupBehaviors(i),[e.ShowPopupBehavior.TRIGGER_TYPE_DBL_CLICK],o,t),n&&this.SetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}}},e.EventManager.prototype.PreOnContextMenu=function(t){this._propagateEvent("contextmenu",t,this.OnContextMenu)},e.EventManager.prototype.OnContextMenu=function(t){var e=this.GetLogicalObject(this.GetCurrentTargetForEvent(t));e&&e.getNextNavigable&&this.setFocus(e),this._onContextMenuHelper(t,e)},e.EventManager.prototype._onContextMenuHelper=function(t,i){this.OnContextMenuInternal(t);var n=this._processActionPopup(this.GetCurrentTargetForEvent(t),new e.Point(t.pageX,t.pageY));if(n&&t.preventDefault(),i&&i.isSelectable&&i.isSelectable()&&this.ProcessSelectionEventHelper(i,t.ctrlKey),this.ContextMenuHandler){var o=this.GetContextMenuType(i);this.ProcessContextMenuHandler(t,o)}else this.ProcessContextMenuPopup(t,i)},e.EventManager.prototype.ProcessContextMenuHandler=function(t,e){var i=this.ContextMenuHandler.show(t,e);return!!i&&(this._context.getTooltipManager().hideTooltip(),this.PopupHandler.HidePopup(t),this._callback.call(this._callbackObj,i),!0)},e.EventManager.prototype.ProcessContextMenuPopup=function(t,i){var n=!1;if(this._hasEventInfo(t)&&(n=this.GetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)),!n){var o=this._getShowPopupBehaviors(i);if(o){var r,s;if(e.Agent.isTouchDevice()){var a=t.touch;r=a.pageX,s=a.pageY}else r=t.pageX,s=t.pageY;var l=new e.Point(r,s);n=this.PopupHandler.processPopupHelper(i,o,[e.ShowPopupBehavior.TRIGGER_TYPE_CONTEXT_MENU],l,t)}n&&(this.SetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0),t.preventDefault())}},e.EventManager.prototype.OnKeyDown=function(t){this._bKeyDown=!0;var i,n,o=t.keyCode,r=!1;for(i=this._currentKeyboardHandlerIdx<0||this._currentKeyboardHandlerIdx>this._keyboardHandlers.length?o==e.KeyboardEvent.TAB&&t.shiftKey?this._keyboardHandlers.length-1:0:this._currentKeyboardHandlerIdx,n=o==e.KeyboardEvent.TAB&&t.shiftKey?-1:1,i;i>=0&&i<this._keyboardHandlers.length&&!r;i+=n){var s=this._keyboardHandlers[i];r=s===this?this.ProcessKeyboardEvent(t):s.handleKeyboardEvent(t),r&&(this._currentKeyboardHandlerIdx=i)}return r||t.keyCode!=e.KeyboardEvent.UP_ARROW&&t.keyCode!=e.KeyboardEvent.DOWN_ARROW&&t.keyCode!=e.KeyboardEvent.LEFT_ARROW&&t.keyCode!=e.KeyboardEvent.RIGHT_ARROW||e.EventManager.consumeEvent(t),r||o!=e.KeyboardEvent.TAB||(this._currentKeyboardHandlerIdx=-1),r},e.EventManager.prototype.handleKeyboardEvent=function(t){return this.OnKeyDown(t)},e.EventManager.prototype.hideKeyboardFocusEffect=function(){var t=this.getFocus();t&&t.isShowingKeyboardFocusEffect()&&t.hideKeyboardFocusEffect()},e.EventManager.prototype.ProcessKeyboardEvent=function(t){if(!this.KeyboardHandler)return!1;this.hideTooltip();var i=this.getFocus(),n=null;if(t.keyCode==e.KeyboardEvent.TAB&&i){if(i.isShowingKeyboardFocusEffect()){this._bKeyDown=!1,i.hideKeyboardFocusEffect(),this.ProcessRolloverEvent(t,i,!1);var o;return o=t.shiftKey?this._context.previousKeyboardFocus():this._context.nextKeyboardFocus(),!!o&&(o.FireListener(t,!1),e.EventManager.consumeEvent(t),!0)}return this.ShowFocusEffect(t,i),this.ProcessRolloverEvent(t,i,!0),e.EventManager.consumeEvent(t),!0}if(i&&this.KeyboardHandler.isContextMenuEvent(t)){var r;if(i.getContextMenuLocation)r=i.getContextMenuLocation();else{var s=i.getKeyboardBoundingBox();r=e.Agent.isRightToLeft(this._context)?new e.Point(s.x,s.y):new e.Point(s.x+s.w,s.y)}var a=e.DomEventFactory.generateMouseEventFromKeyboardEvent(t,this._context,e.MouseEvent.CLICK,this._context.getStage(),r.x,r.y);return a.ctrlKey=!1,this._onContextMenuHelper(a,i),!0}return n=this.KeyboardHandler.processKeyDown(t),!!n&&(this.setFocus(n),this._shouldDisplayKeyboardFocus=!0,i&&(i.hideKeyboardFocusEffect(),this.ProcessRolloverEvent(t,i,!1)),this.KeyboardHandler.isSelectionEvent(t)?this.ProcessSelectionEventHelper(n,t.shiftKey):this.KeyboardHandler.isMultiSelectEvent(t)&&this.ProcessSelectionEventHelper(n,t.ctrlKey),this.ShowFocusEffect(t,n),this.ProcessRolloverEvent(t,n,!0),!0)},e.EventManager.prototype.ShowFocusEffect=function(t,e){e.showKeyboardFocusEffect();var i=e.getKeyboardTooltipLocation?e.getKeyboardTooltipLocation():e.getKeyboardBoundingBox(this.getCtx().getStage()).getCenter(),n=this.getCtx().stageToPageCoords(i.x,i.y);this.ProcessObjectTooltip(t,n.x,n.y,e,e.getTargetElem()),this.UpdateActiveElement(e)},e.EventManager.prototype.OnKeyUp=function(t){this._bKeyDown=!1,this._handleExternalKeyboardFocus===!0&&t.keyCode==e.KeyboardEvent.TAB&&(this._handleExternalKeyboardFocus=!1,this._callbackObj.dispatchDisplayableEvent(e.KeyboardEvent.KEYDOWN,t)),this.KeyboardHandler.processKeyUp(t,[e.ShowPopupBehavior.TRIGGER_TYPE_KEY_UP])},e.EventManager.prototype.OnKeyPress=function(t){this.KeyboardHandler.processKeyUp(t,[e.ShowPopupBehavior.TRIGGER_TYPE_KEY_PRESS])},e.EventManager.prototype.PreOnMouseMove=function(t){this._propagateEvent(e.MouseEvent.MOUSEMOVE,t,this.OnMouseMove)},e.EventManager.prototype.OnMouseMove=function(t){var i=t.pageX,n=t.pageY,o=this._context.pageToStageCoords(i,n);if(this._marqueeHandler){var r=this._marqueeHandler.processDragMove(o,t.ctrlKey);r&&this._callback.call(this._callbackObj,r)}var s=this.GetCurrentTargetForEvent(t),a=this.GetLogicalObject(s);if(a){this.ProcessObjectTooltip(t,i,n,a,s);var l=new e.Point(i,n);if(this.PopupHandler.processMouseMove(l),!this.GetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var h=this.GetLogicalObjectAndDisplayable(s);h&&this.PopupHandler.processMousePopup(a,this._getShowPopupBehaviors(a),l,h.displayable,t,e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_MOVE)&&this.SetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}this.DragSource&&!t.dragSourceSet&&this.IsDragCandidate(a)&&(this.DragSource.setDragCandidate(a),t.dragSourceSet=!0)}},e.EventManager.prototype.PreOnMouseOver=function(t){this._propagateEvent(e.MouseEvent.MOUSEOVER,t,this.OnMouseOver),this._handlePreOverEvent(t)},e.EventManager.prototype._getDisplayableHierarchy=function(t,e,i){for(var n=[],o=t;o;){var r=!0;e&&(r=e.call(i,o)),r&&n.unshift(o),o=o.getParent()}return n},e.EventManager.prototype._getRolloverHierarchy=function(t){return this._getDisplayableHierarchy(t,this._isRolloverType,this)},e.EventManager.prototype._isRolloverType=function(t){var e=this.GetLogicalObject(t,!0);if(e)for(var i=0;i<this._rolloverTypes.length;i++)if(e instanceof this._rolloverTypes[i])return!0;return!1},e.EventManager.prototype.addRolloverType=function(t){this._rolloverTypes.push(t)},e.EventManager.prototype.removeRolloverType=function(t){var i=e.ArrayUtils.getIndex(this._rolloverTypes,t);i!=-1&&this._rolloverTypes.splice(i,1)},e.EventManager.prototype.OnRollOver=function(t){},e.EventManager.prototype.OnMouseOver=function(t){var i=this.GetCurrentTargetForEvent(t),n=this.GetLogicalObjectAndDisplayable(i),o=null;n&&(o=n.logicalObject);var r=new e.Point(t.pageX,t.pageY);if(o){var s=this.getSelectionHandler(o);s&&s.processMouseOver(o),this.ProcessRolloverEvent(t,o,!0),this.GetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)||n&&this.PopupHandler.processMousePopup(o,this._getShowPopupBehaviors(o),r,n.displayable,t,e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_OVER)&&this.SetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0),this.UpdateActiveElement(o,i)}},e.EventManager.prototype.PreOnMouseOut=function(t){this._handlePreOutEvent(e.MouseEvent.MOUSEOUT,t,this.OnMouseOut)},e.EventManager.prototype.OnRollOut=function(t){},e.EventManager.prototype.OnMouseOut=function(t){var i=this.GetCurrentTargetForEvent(t),n=this.GetLogicalObject(i);if(n){var o=this.GetLogicalObject(t.relatedTarget);if(n!=o){var r=this.getSelectionHandler(n);if(r&&r.processMouseOut(n),this.ProcessRolloverEvent(t,n,!1),this.hideTooltip(),this.DragSource&&!t.dragSourceSet&&(this.DragSource.setDragCandidate(null),t.dragSourceSet=!0),!this.GetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var s=new e.Point(t.pageX,t.pageY),a=this.GetLogicalObjectAndDisplayable(i);a&&this.PopupHandler.processMousePopup(n,this._getShowPopupBehaviors(n),s,a.displayable,t,e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_OUT)&&this.SetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}}}},e.EventManager.prototype.PreOnMouseDown=function(t){this._propagateEvent(e.MouseEvent.MOUSEDOWN,t,this.OnMouseDown)},e.EventManager.prototype.OnMouseDown=function(t){var i=this.isInActionPopup();if(i&&this.CustomTooltipManager.closeActionTooltip(),this._marqueeHandler){var n=this._context.pageToStageCoords(t.pageX,t.pageY),o=this._marqueeHandler.processDragStart(n,t.ctrlKey);o&&this._callback.call(this._callbackObj,o)}var r=this.GetCurrentTargetForEvent(t),s=this.GetLogicalObject(r);if(this.DragSource&&!t.dragSourceSet&&this.IsDragCandidate(s)&&(this.DragSource.setDragCandidate(s),t.dragSourceSet=!0),!this.GetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var a=new e.Point(t.pageX,t.pageY),l=this.GetLogicalObjectAndDisplayable(r);l&&this.PopupHandler.processMousePopup(s,this._getShowPopupBehaviors(s),a,l.displayable,t,e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_DOWN)&&this.SetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}},e.EventManager.prototype.PreOnMouseUp=function(t){this._propagateEvent(e.MouseEvent.MOUSEUP,t,this.OnMouseUp)},e.EventManager.prototype.OnMouseUp=function(t){if(this._marqueeHandler){var i=this._context.pageToStageCoords(t.pageX,t.pageY),n=this._marqueeHandler.processDragEnd(i,t.ctrlKey);n&&this._callback.call(this._callbackObj,n)}var o=this.GetCurrentTargetForEvent(t),r=this.GetLogicalObject(o);if(!this.GetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var s=new e.Point(t.pageX,t.pageY),a=this.GetLogicalObjectAndDisplayable(o);a&&this.PopupHandler.processMousePopup(r,this._getShowPopupBehaviors(r),s,a.displayable,t,e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_UP)&&this.SetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}},e.EventManager.prototype._processTouchTooltip=function(t){var i=this.TouchManager.getTooltipInfo(),n=i.touchIds,o=i.tooltipTarget;if(!(this.GetEventInfo(t,e.EventManager._EVENT_INFO_TOOLTIP_DISPLAYED_KEY)||0!=n.length&&o))return void this.hideTooltip();var r=this.TouchManager.calcAveragePosition(n),s=this.GetLogicalObject(o);this.ProcessObjectTooltip(t,r.x,r.y,s,null)},e.EventManager.prototype.OnTouchStartBubble=function(t){if(this.PreEventBubble(t),t.isInitialTouch()&&(this._popupJustClosed=!1),this.DragSource){var i=this.GetLogicalObject(t.target);!t.dragSourceSet&&this.IsDragCandidate(i)&&(this.DragSource.setDragCandidate(i),t.dragSourceSet=!0)}var n=this.isInActionPopup();n&&(this.CustomTooltipManager.closeActionTooltip(),this.TouchManager.resetTouchHold()),this.HandleImmediateTouchStartInternal(t),this.TouchManager.fireLogicalEvents(t),this.TouchManager.postEventBubble(t),this.isTouchResponseTouchStart()?(this._touchResponseHandled=!0,this.TouchManager.processAssociatedTouchAttempt(t,e.EventManager.TOUCH_RESPONSE_TOUCH_START,this._saveTouchStart,this)):(this._touchResponseHandled=!1,this._processTouchTooltip(t))},e.EventManager.prototype.OnTouchMoveBubble=function(t){this.PreEventBubble(t),this.TouchManager&&(this._prevActionClear=!1,this.HandleImmediateTouchMoveInternal(t),this.TouchManager.fireLogicalEvents(t),this.TouchManager.postEventBubble(t),this._processTouchTooltip(t))},e.EventManager.prototype._handleTouchEndTimer=function(){for(var t=0;t<this._touchEndTimer.length;t++){var e=this._touchEndTimer[t];e.timer.stop();var i=e.event;this.TouchManager&&(this.HandleImmediateTouchEndInternal(i),this.TouchManager.fireLogicalEvents(i),this.TouchManager.postEventBubble(i))}this.DragSource&&!i.dragSourceSet&&(this.DragSource.setDragCandidate(null),i.dragSourceSet=!0),this._touchEndTimer=new Array},e.EventManager.prototype.OnTouchEndBubble=function(t){this.PreEventBubble(t);var i=new e.Timer(this._context,0,this._handleTouchEndTimer,this,1);this._touchEndTimer||(this._touchEndTimer=new Array),this._touchEndTimer.push({event:t,timer:i}),i.start()},e.EventManager.prototype.HandleImmediateTouchStartInternal=function(t){},e.EventManager.prototype.HandleImmediateTouchMoveInternal=function(t){},e.EventManager.prototype.HandleImmediateTouchEndInternal=function(t){},e.EventManager.prototype._preOnComponentTouchHoverStart=function(t){this._propagateEvent(e.ComponentTouchEvent.TOUCH_HOVER_START_TYPE,t,this.OnComponentTouchHoverStart)},e.EventManager.prototype.OnComponentTouchHoverStart=function(t){this.HandleTouchHoverStartInternal(t),this._touchResponseHandled||this.HandleTouchActionsStart(t)},e.EventManager.prototype._preOnComponentTouchHoverMove=function(t){this._propagateEvent(e.ComponentTouchEvent.TOUCH_HOVER_MOVE_TYPE,t,this.OnComponentTouchHoverMove)},e.EventManager.prototype.OnComponentTouchHoverMove=function(t){this.HandleTouchHoverMoveInternal(t),this._touchResponseHandled||this.HandleTouchActionsMove(t)},e.EventManager.prototype._preOnComponentTouchHoverEnd=function(t){this._propagateEvent(e.ComponentTouchEvent.TOUCH_HOVER_END_TYPE,t,this.OnComponentTouchHoverEnd)},e.EventManager.prototype.OnComponentTouchHoverEnd=function(t){var i=this.GetCurrentTargetForEvent(t),n=this.GetLogicalObject(i);if(this.HandleTouchHoverEndInternal(t),this.ProcessTouchContextMenu(t,n),this._callbackObj instanceof e.BaseComponent){var o=this.getCtx().getStageAbsolutePosition(),r=t.touch.pageX,s=t.touch.pageY;r<=o.x+this._callbackObj.getWidth()&&r>=o.x&&s<=o.y+this._callbackObj.getHeight()&&s>=o.y&&this._callback.call(this._callbackObj,e.EventFactory.newTouchHoldReleaseEvent(t.getNativeEvent()))}this._touchResponseHandled||this.HandleTouchActionsEnd(t)},e.EventManager.prototype._preOnComponentTouchHoverOut=function(t){this._handlePreOutEvent(e.ComponentTouchEvent.TOUCH_HOVER_OUT_TYPE,t,this.OnComponentTouchHoverOut)},e.EventManager.prototype.OnComponentTouchHoverOut=function(t){this.HandleTouchHoverOutInternal(t),this._touchResponseHandled||this.HandleTouchActionsOut(t)},e.EventManager.prototype._preOnComponentTouchHoverOver=function(t){this._propagateEvent(e.ComponentTouchEvent.TOUCH_HOVER_OVER_TYPE,t,this.OnComponentTouchHoverOver),this._handlePreOverEvent(t)},e.EventManager.prototype.OnComponentTouchHoverOver=function(t){this.HandleTouchHoverOverInternal(t),this._touchResponseHandled||this.HandleTouchActionsOver(t)};e.EventManager.prototype._preOnComponentTouchDblClick=function(t){this._propagateEvent(e.ComponentTouchEvent.TOUCH_DOUBLE_CLICK_TYPE,t,this.OnComponentTouchDblClick)};e.EventManager.prototype.OnComponentTouchDblClick=function(t){var i=this.GetCurrentTargetForEvent(t),n=t.touch,o=this.GetLogicalObject(i),r=new e.Point(n.pageX,n.pageY),s=!1;this._hasEventInfo(t)&&(s=this.GetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)),s||this.PopupHandler.processPopupHelper(o,this._getShowPopupBehaviors(o),[e.ShowPopupBehavior.TRIGGER_TYPE_DBL_CLICK],r,t)&&this.SetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0),this.HandleTouchDblClickInternal(t)},e.EventManager.prototype._preOnComponentTouchClick=function(t){this._propagateEvent(e.ComponentTouchEvent.TOUCH_CLICK_TYPE,t,this.OnComponentTouchClick)},e.EventManager.prototype.OnComponentTouchClick=function(t){var i=this.GetCurrentTargetForEvent(t),n=t.touch,o=this.GetLogicalObject(i),r=new e.Point(n.pageX,n.pageY),s=!1;if(this._hasEventInfo(t)&&(s=this.GetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)),s||this.PopupHandler.processPopupHelper(o,this._getShowPopupBehaviors(o),[e.ShowPopupBehavior.TRIGGER_TYPE_ACTION,e.ShowPopupBehavior.TRIGGER_TYPE_CLICK],r,t,!0)&&(this.SetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0),s=!0),!s){var a=this._getClientBehaviors(o);a&&this.ProcessClientBehaviorForTouch(o,a)}var l=this.HandleTouchClickInternal(t);if(!l&&(this.isTouchResponseTouchStart()||this._processTouchSelection(o),this._popupJustClosed||this._processTouchSelectionClear(o),this.CustomTooltipManager.displayActionPopup()&&(this.UpdateActionTooltipLaunchedFeedback(i,new e.Point(n.pageX,n.pageY)),this.CustomTooltipManager.startActionPopupAtPosition(n.pageX,n.pageY,i)),o&&!s&&o.isCommandComponent&&o.isCommandComponent())){var t=e.EventFactory.newActionEvent("action",o.getId());e.EventManager._addContextInfo(o,t),this._callback.call(this._callbackObj,t)}},e.EventManager.prototype._processTouchSelection=function(t){var e=!1,i=this.getSelectionHandler(t);i&&t&&t.isSelectable&&t.isSelectable()&&(e=i.processClick(t,!0),e&&this.fireSelectionEvent(t)),this._prevActionClear=!1},e.EventManager.prototype._processTouchSelectionClear=function(t){var i=!1,n=this.getSelectionHandler(t);if(n&&(!t||!t.isSelectable||!t.isSelectable())&&!this._prevActionClear){var o=!1;if(this.isClearMenuAllowed()){var r=n.getType();r==e.SelectionHandler.TYPE_MULTIPLE&&n.getSelectedCount()>1&&(o=!0)}o?this.addClearAllActionItem():(i=n.processClick(null,!1),i&&this.fireSelectionEvent(t))}},e.EventManager.prototype.OnActionTooltipClosed=function(t){var i=t.target;this._popupJustClosed=!0,this._isInActionPopup=!1;var n=this.CustomTooltipManager.getActionTooltip();n.containsMenuId(e.EventManager.CLEAR_SELECTION_ACTION_TYPE)&&(this._prevActionClear=!0),this.CustomTooltipManager.clearActionTooltip(),this.UpdateActionTooltipClosedFeedback(i)},e.EventManager.prototype.OnActionTooltipStarted=function(t){this._isInActionPopup=!0},e.EventManager.prototype._getTooltipInfo=function(t,e,i,n){var o=null,r=!1;return e&&e.getDatatip&&(o=e.getDatatip(t,i,n),o&&(r=!0)),!o&&e&&e.getTooltip&&(o=e.getTooltip(t,i,n)),{text:o,isDatatip:r}},e.EventManager.prototype._processShowTooltip=function(t,e,i,n){if(this.getTooltipsEnabled(e)){var o=this._context.pageToStageCoords(i,n),r=o.x,s=o.y,a=this._getTooltipInfo(t,e,r,s),l=a.isDatatip,h=a.text;if(h){this.CustomTooltipManager.clearActionTooltip();var u=this.GetTooltipColor(e,r,s),d=this._context.getTooltipManager();return l?d.showDatatip(i,n,h,u):d.showTooltip(i,n,h,null,!0,u),this.TooltipLaunched(h,u),this.DispatchElementEvent("tooltiplaunched"),!0}this.hideTooltip()}else this.hideTooltip();return!1},e.EventManager.prototype.hideTooltip=function(){var t=this._context.getTooltipManager();t&&t.hideTooltip(),this.TooltipHidden()},e.EventManager.prototype.ProcessTouchContextMenu=function(t,i){if(!this.ContextMenuHandler)return void this.ProcessContextMenuPopup(t,i);var n=this.GetContextMenuType(i),o=!1;return i&&i.isSelected&&i.isSelected()?o=!0:(i&&i.isSelectable&&i.isSelectable()||(n=e.ContextMenuHandler.TYPE_BODY_CONTEXT_MENU),n==e.ContextMenuHandler.TYPE_BODY_CONTEXT_MENU&&(o=!0)),!!o&&this.ProcessContextMenuHandler(t,n)},e.EventManager.prototype._processActionPopup=function(t,e){return this.CustomTooltipManager.displayActionPopup()?(this.SetupTouchTooltip(t),this.UpdateActionPopupShownFeedback(t),this.CustomTooltipManager.startActionPopupAtPosition(e.x,e.y,t),!0):(this.UpdateActionPopupHiddenFeedback(t),!1)},e.EventManager.prototype.TooltipLaunched=function(t,e){},e.EventManager.prototype.TooltipHidden=function(){},e.EventManager.prototype.SetupTouchTooltip=function(t){var e=this.GetLogicalObject(t),i=this.CustomTooltipManager.getActionTooltip(),n=i.getTooltipBorderColor();if(null==n){var o=this.GetTooltipColor(e);i.setTooltipBorderColor(o)}},e.EventManager.prototype.OnContextMenuInternal=function(t){},e.EventManager.prototype.OnClickInternal=function(t){},e.EventManager.prototype.OnDblClickInternal=function(t){},e.EventManager.prototype.HandleTouchHoverStartInternal=function(t){},e.EventManager.prototype.HandleTouchHoverMoveInternal=function(t){},e.EventManager.prototype.HandleTouchHoverEndInternal=function(t){},e.EventManager.prototype.HandleTouchHoverOverInternal=function(t){},e.EventManager.prototype.HandleTouchHoverOutInternal=function(t){},e.EventManager.prototype.HandleTouchClickInternal=function(t){return!1},e.EventManager.prototype.HandleTouchDblClickInternal=function(t){},e.EventManager.prototype.UpdateActionPopupShownFeedback=function(t){},e.EventManager.prototype.UpdateActionPopupHiddenFeedback=function(t){},e.EventManager.prototype.UpdateActionTooltipClosedFeedback=function(t){},e.EventManager.prototype.UpdateActionTooltipLaunchedFeedback=function(t,e){},e.EventManager.prototype.isInActionPopup=function(){return this._isInActionPopup},e.EventManager.prototype.GetClearSelectionText=function(){return e.Bundle.getTranslatedString(e.Bundle.UTIL_PREFIX,"CLEAR_SELECTION")},e.EventManager.prototype.addClearAllActionItem=function(){var t=this.CustomTooltipManager.getActionTooltip(),i=t.getMenuItems();t&&i.length>0&&i[i.length-1].getId()===e.EventManager.CLEAR_SELECTION_ACTION_TYPE||(this.addActionTooltipMenuItem(e.EventManager.CLEAR_SELECTION_ACTION_TYPE,this.GetClearSelectionText(),this._actionTooltipClearListener,this),t&&t.setTooltipBorderColor(U.DEFAULT_BORDER_COLOR))},e.EventManager.prototype.isClearMenuAllowed=function(){return!0},e.EventManager.prototype.addActionTooltipMenuItem=function(t,e,i,n){var o=this.CustomTooltipManager.getActionTooltip();o.addMenuItem(new B(this._context,t,e,i,n))},e.EventManager.prototype.ContextMenuItemListener=function(t){var e=t.menuItem,i=e.getEvent();this._callback.call(this._callbackObj,i)},e.EventManager.prototype._actionTooltipClearListener=function(t){var e=t.target,i=this.GetLogicalObject(e),n=this.getSelectionHandler(i).processClick(null,!1);n&&this.fireSelectionEvent(i)},e.EventManager.prototype._actionTooltipSelectListener=function(t){var e=t.target,i=this.GetLogicalObject(e),n=this.getSelectionHandler(i).processClick(i,!0);n&&this.fireSelectionEvent(i)},e.EventManager.consumeEvent=function(t){t&&(t.preventDefault(),t.stopPropagation())},e.EventManager._addContextInfo=function(t,i){if(t.getContextCallback&&t.getContextCallbackObj){var n=t.getContextCallback(),o=t.getContextCallbackObj();n&&o&&n.call(o,i)}else i[e.BaseComponentEvent.CLIENT_ROW_KEY]=t.getId()},e.EventManager.prototype.IsPropagationEnabled=function(t,e,i){return!1},e.EventManager.prototype.GetCurrentTargetForEvent=function(t){var i=this.GetEventInfo(t,e.EventManager._EVENT_INFO_CURRENT_TARGET_KEY);return i?i:t.target},e.EventManager.prototype._propagateEvent=function(t,i,n){var o=this.GetLogicalObject(i.target);if(o){var r=i.target;try{for(;r;){var s=this.GetLogicalObject(r,!0);if(s&&(this.SetEventInfo(i,e.EventManager._EVENT_INFO_CURRENT_TARGET_KEY,r),n.call(this,i),!this.IsPropagationEnabled(t,i,r)))return;r=r.getParent()}}finally{this.SetEventInfo(i,e.EventManager._EVENT_INFO_CURRENT_TARGET_KEY,null)}}else n.call(this,i)},e.EventManager.prototype.ConsumesClick=function(t){return t.isSelectable&&t.isSelectable()||t.isClickEventPropagationStopped&&t.isClickEventPropagationStopped()||this._hasClickPopup(t)||this._hasClickClientBehavior(t)},e.EventManager.prototype._hasClickPopup=function(t){return this.PopupHandler.hasPopup(t,[e.ShowPopupBehavior.TRIGGER_TYPE_ACTION,e.ShowPopupBehavior.TRIGGER_TYPE_CLICK])},e.EventManager.prototype.addComponentKeyboardHandler=function(t){t&&this._keyboardHandlers.push(t)},e.EventManager.prototype.addComponentKeyboardHandlerAt=function(t,e){e>this._keyboardHandlers.length||t&&(this._keyboardHandlers.splice(e,0,t),e<=this._currentKeyboardHandlerIdx&&this._currentKeyboardHandlerIdx++)},e.EventManager.prototype.removeComponentKeyboardHandler=function(t){if(t){var e=this._findHandler(t);e>-1&&(this._currentKeyboardHandlerIdx==e&&0==e?this._currentKeyboardHandlerIdx=0:e<=this._currentKeyboardHandlerIdx&&this._currentKeyboardHandlerIdx--,this._keyboardHandlers.splice(e,1))}},e.EventManager.prototype._findHandler=function(t){for(var e=-1,i=this._keyboardHandlers.length,n=0;n<i;n++)this._keyboardHandlers[n]===t&&(e=n);return e},e.EventManager.prototype.setCurrentKeyboardHandler=function(t){var e=this._findHandler(t);e>=0&&(this._currentKeyboardHandlerIdx=e)},e.EventManager.prototype._hasClickClientBehavior=function(t){var i=this._getClientBehaviors(t);if(i)for(var n=0;n<i.length;n++){var o=i[n];if(o&&(o.getTriggerType()==e.ClientBehavior.TRIGGER_TYPE_ACTION||o.getTriggerType()==e.ClientBehavior.TRIGGER_TYPE_CLICK))return!0}return!1},e.EventManager.prototype.CreateClientBehaviorHandler=function(t,i,n){return new e.ClientBehaviorHandler(t,i,n)},e.EventManager.prototype.ProcessClientBehaviorForTouch=function(t,e){return this.ClientBehaviorHandler.processClick(t,e)},e.EventManager.prototype.IsDragCandidate=function(t){return!0},e.EventManager._getActiveElementId=function(){var t="_dvtActiveElement";return t+Math.floor(1e9*Math.random())},e.EventManager.prototype.UpdateActiveElement=function(t,i){if(i||(i=t.getDisplayable?t.getDisplayable():t.getDisplayables?t.getDisplayables()[0]:t),i instanceof e.Displayable){if(t.getAriaLabel){var n=t.getAriaLabel();n&&i.setAriaProperty("label",n)}else for(;!i.getAriaRole()&&i.getParent();)i=i.getParent();i!=this.getCtx().getStage()&&this.getCtx().setActiveElement(i)}},e.EventManager.prototype._handlePreOverEvent=function(t){var i=this._getRolloverHierarchy(t.target),n=this._getRolloverHierarchy(t.relatedTarget);if(i.length>0){var o=i[i.length-1],r=0==n.length?null:n[n.length-1];if(o!=r)try{this.SetEventInfo(t,e.EventManager._EVENT_INFO_CURRENT_TARGET_KEY,o),this.OnRollOver(t)}finally{this.SetEventInfo(t,e.EventManager._EVENT_INFO_CURRENT_TARGET_KEY,null)}}},e.EventManager.prototype._handlePreOutEvent=function(t,i,n){var o=this.GetLogicalObject(i.relatedTarget),r=i.target;try{var s=this._getRolloverHierarchy(i.target),a=this._getRolloverHierarchy(i.relatedTarget);if(s.length>0){var l=s[s.length-1],h=0==a.length?null:a[a.length-1];l!=h&&(this.SetEventInfo(i,e.EventManager._EVENT_INFO_CURRENT_TARGET_KEY,l),this.OnRollOut(i))}var u=this.GetLogicalObject(r);if(u)for(this.PopupHandler.processMouseOut(u,this._getDisplayableHierarchy(i.relatedTarget),i);r;){
var d=this.GetLogicalObject(r,!0);if(d){if(o===d)break;if(this.SetEventInfo(i,e.EventManager._EVENT_INFO_CURRENT_TARGET_KEY,r),n.call(this,i),!this.IsPropagationEnabled(t,i,r))break}r=r.getParent()}else n.call(this,i)}finally{this.SetEventInfo(i,e.EventManager._EVENT_INFO_CURRENT_TARGET_KEY,null)}},e.EventManager.prototype.getTouchManager=function(){return this.TouchManager},e.EventManager.prototype.endDrag=function(){return null},e.EventManager.prototype._hasEventInfo=function(t){if(null==t)return!1;var e=t.getNativeEvent();return!!e._eventInfo},e.EventManager.prototype.GetEventInfo=function(t,e){if(!this._hasEventInfo(t)||null==e)return null;var i;if(this.StoreInfoByEventType(e)){var n=t.type?t.type:t.getType();i=t.getNativeEvent()._eventInfo[n]}else i=t.getNativeEvent()._eventInfo;return i?i[e]:null},e.EventManager.prototype.SetEventInfo=function(t,e,i){if(null!=t&&null!=e){var n=t.getNativeEvent();if(n._eventInfo||(n._eventInfo={}),this.StoreInfoByEventType(e)){var o=t.type?t.type:t.getType();n._eventInfo[o]||(n._eventInfo[o]={}),n._eventInfo[o][e]=i}else n._eventInfo[e]=i}},e.EventManager.prototype.StoreInfoByEventType=function(t){return t!=e.EventManager._EVENT_INFO_TOOLTIP_DISPLAYED_KEY},e.EventManager.prototype.ProcessObjectTooltip=function(t,i,n,o,r){this.GetEventInfo(t,e.EventManager._EVENT_INFO_TOOLTIP_DISPLAYED_KEY)||this._processShowTooltip(r,o,i,n)&&this.SetEventInfo(t,e.EventManager._EVENT_INFO_TOOLTIP_DISPLAYED_KEY,!0)},e.EventManager.prototype._resetExternalKeyboardFocus=function(){this._handleExternalKeyboardFocus=!1},e.EventManager.prototype.OnFocus=function(t){this._handleExternalKeyboardFocus=!1,this._bKeyDown||t.isPropagationStopped()||(this._handleExternalKeyboardFocus=!0,this._keyboardFocusTimer||(this._keyboardFocusTimer=new e.Timer(this._context,200,this._resetExternalKeyboardFocus,this,1)),this._keyboardFocusTimer.reset(),this._keyboardFocusTimer.start(),t.stopPropagation())},e.EventManager.prototype.OnBlur=function(t){this._bKeyDown=!1;var e=this.getFocus();e&&e.isShowingKeyboardFocusEffect()&&e.hideKeyboardFocusEffect()},e.EventManager.prototype.ProcessRolloverEvent=function(t,e,i){},e.EventManager.prototype.CreateCategoryRolloverHandler=function(t,i){return new e.CategoryRolloverHandler(t,i)},e.EventManager.prototype.GetTouchResponse=function(){return e.EventManager.TOUCH_RESPONSE_TOUCH_START},e.EventManager.prototype.isTouchResponseTouchStart=function(){var t=this.GetTouchResponse();if(t===e.EventManager.TOUCH_RESPONSE_TOUCH_START)return!0;if(t===e.EventManager.TOUCH_RESPONSE_TOUCH_HOLD)return!1;for(var i=this.getCtx().getSvgDocument().parentElement.parentElement;i&&"HTML"!==i.nodeName;){var n=window.getComputedStyle(i);if("hidden"!==n.overflow&&(i.scrollWidth>i.clientWidth+e.EventManager._TOUCH_RESPONSE_PADDING_CHECK&&"hidden"!==n["overflow-x"]||i.scrollHeight>i.clientHeight+e.EventManager._TOUCH_RESPONSE_PADDING_CHECK&&"hidden"!==n["overflow-y"])||window.frameElement&&"IFRAME"==window.frameElement.nodeName)return!1;i=i.parentElement}return!0},e.EventManager.prototype._saveTouchStart=function(t,i){var n=this.TouchManager.getTouchIdsForObj(e.EventManager.TOUCH_RESPONSE_TOUCH_START);n.length<=1&&(this.TouchManager.saveProcessedTouch(i.identifier,e.TouchManager.HOVER_TOUCH_KEY,null,e.TouchManager.HOVER_TOUCH_KEY,e.TouchManager.HOVER_TOUCH_KEY,this.HandleTouchActionsMove,this.HandleTouchActionsEnd,this),this.HandleTouchActionsStart(t))},e.EventManager.prototype.HandleTouchActionsStart=function(t){var i=this.GetCurrentTargetForEvent(t),n=this.GetLogicalObject(i),o=t instanceof e.ComponentTouchEvent?t.touch:t.touches[0],r=o.pageX,s=o.pageY;if(t instanceof e.ComponentTouchEvent||(this._touchMap[o.identifier]||(this._touchMap[o.identifier]={}),this._touchMap[o.identifier][e.TouchManager.PREV_HOVER_OBJ]=null,n&&this.HandleTouchActionsOver(t),this._touchMap[o.identifier][e.TouchManager.PREV_HOVER_OBJ]=n),this._marqueeHandler){var a=this._context.pageToStageCoords(r,s),l=this._marqueeHandler.processDragStart(a);l&&(t.preventDefault(),this._callback.call(this._callbackObj,l))}if(n&&this.ProcessRolloverEvent(t,n,!0),this._processTouchTooltip(t),this._prevActionClear=!1,!this.GetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var h=new e.Point(r,s),i=this.GetCurrentTargetForEvent(t),u=this.GetLogicalObjectAndDisplayable(i);u&&this.PopupHandler.processMousePopup(n,this._getShowPopupBehaviors(n),h,u.displayable,t,e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_DOWN)&&this.SetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}},e.EventManager.prototype.HandleTouchActionsMove=function(t){var i,n,o=t instanceof e.ComponentTouchEvent?t.touch:t.touches[0];if(t instanceof e.ComponentTouchEvent)i=this.GetCurrentTargetForEvent(t),n=this.GetLogicalObject(i);else{t.preventDefault(),i=e.SvgDocumentUtils.elementFromTouch(o),n=this.GetLogicalObject(i);var r=this._touchMap[o.identifier][e.TouchManager.PREV_HOVER_OBJ];if(r!=n){if(r){var s;r.getDisplayable?s=r.getDisplayable():r.getDisplayables&&(s=r.getDisplayables()[0]),s&&(t.target=s,this.HandleTouchActionsOut(t,o))}t.target=i,n&&this.HandleTouchActionsOver(t)}this._touchMap[o.identifier][e.TouchManager.PREV_HOVER_OBJ]=n}var a=o.pageX,l=o.pageY,h=this._context.pageToStageCoords(a,l);if(this._marqueeHandler){var u=this._marqueeHandler.processDragMove(h,t.ctrlKey);u&&(t.preventDefault(),this._callback.call(this._callbackObj,u))}n&&this.ProcessRolloverEvent(t,n,!0);var d=new e.Point(o.pageX,o.pageY);if(this.PopupHandler.processMouseMove(d),!this.GetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var c=this.GetLogicalObjectAndDisplayable(i);c&&this.PopupHandler.processMousePopup(n,this._getShowPopupBehaviors(n),d,c.displayable,t,e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_MOVE)&&this.SetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}},e.EventManager.prototype.HandleTouchActionsEnd=function(t,i){var n,o;if(t instanceof e.ComponentTouchEvent)n=this.GetCurrentTargetForEvent(t),o=this.GetLogicalObject(n),i=t.touch;else{t.preventDefault(),n=e.SvgDocumentUtils.elementFromTouch(i),o=this.GetLogicalObject(n);var r;o&&(o.getDisplayable?r=o.getDisplayable():o.getDisplayables&&(r=o.getDisplayables()[0])),r&&(t.target=r,this.HandleTouchActionsOut(t,i)),this._touchMap[i.identifier][e.TouchManager.PREV_HOVER_OBJ]=null}var s=i.pageX,a=i.pageY,l=this._context.pageToStageCoords(s,a);if(this._marqueeHandler){var h=this._marqueeHandler.processDragEnd(l,t.ctrlKey);h&&(t.preventDefault(),this._callback.call(this._callbackObj,h))}if(this._processTouchSelection(o),this._processActionPopup(n,new e.Point(s,a)),!this.GetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var u=new e.Point(s,a),d=this.GetLogicalObjectAndDisplayable(n);d&&this.PopupHandler.processMousePopup(o,this._getShowPopupBehaviors(o),u,d.displayable,t,e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_UP)&&this.SetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}},e.EventManager.prototype.HandleTouchActionsOver=function(t){var i=this.GetCurrentTargetForEvent(t),n=this.GetLogicalObject(i),o=t instanceof e.ComponentTouchEvent?t.touch:t.touches[0],r=new e.Point(o.pageX,o.pageY);n&&this.ProcessRolloverEvent(t,n,!0);var s=this.getSelectionHandler(n);if(s&&s.processMouseOver(n),!this.GetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var a=this.GetLogicalObjectAndDisplayable(i);a&&this.PopupHandler.processMousePopup(n,this._getShowPopupBehaviors(n),r,a.displayable,t,e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_OVER)&&this.SetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}},e.EventManager.prototype.HandleTouchActionsOut=function(t,i){var n=this.GetCurrentTargetForEvent(t),o=this.GetLogicalObject(n);t instanceof e.ComponentTouchEvent&&(i=t.touch),o&&this.ProcessRolloverEvent(t,o,!1);var r=this.getSelectionHandler(o);if(r&&r.processMouseOut(o),!this.GetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY)){var s=new e.Point(i.pageX,i.pageY),a=this.GetLogicalObjectAndDisplayable(n);a&&this.PopupHandler.processMousePopup(o,this._getShowPopupBehaviors(o),s,a.displayable,t,e.ShowPopupBehavior.TRIGGER_TYPE_MOUSE_OUT)&&this.SetEventInfo(t,e.EventManager._EVENT_INFO_POPUP_DISPLAYED_KEY,!0)}},e.EventManager.getComponent=function(){return null},e.EventManager.DROP_OFFSET_X_DATA_TYPE="text/_dvtDropOffsetX",e.EventManager.DROP_OFFSET_Y_DATA_TYPE="text/_dvtDropOffsetY",e.EventManager.prototype.isDndSupported=function(){return!1},e.EventManager.prototype.OnDndDragStart=function(t){var i=e.ToolkitUtils.getEventForSyntax(this._context,t),n=i.dataTransfer;if(!(i.dataTransfer.types&&i.dataTransfer.types.length>0)){var o=this._context.pageToStageCoords(t.pageX,t.pageY),r=this.DragSource.getDragTransferable(o.x,o.y),s=this.GetDragSourceType(t);if(null==r||null==s)return void(this._context.isLastDndEventManager(this)&&t.preventDefault());this._context.getTooltipManager().hideTooltip();var a=this._getDragOptions(t),l=a.dataTypes,h=a.dragStart;if(null==l&&!h)return void(this._context.isLastDndEventManager(this)&&t.preventDefault());var u=this.DragSource.getDragObject(),d=this.getSelectionHandler(u);if(d&&u.isSelected&&!u.isSelected()&&d.processClick(u,!1),u.hideHoverEffect&&u.hideHoverEffect(),null!=l){e.ArrayUtils.isArray(l)||(l=[l]);for(var c=this._getDragData(t),p=0;p<l.length;p++)n.setData(l[p],c)}var _=e.ToolkitUtils.getDragFeedback(this.DragSource.getDragOverFeedback(o.x,o.y),this._context.getStage()),g=_.svg,m=this.DragSource.getDragOffset(o.x,o.y);g.style.width=_.width+"px",g.style.height=_.height+"px",g.style.left=t.pageX-m.x+"px",g.style.top=t.pageY-m.y+"px",g.style.position="absolute",g.style.fontFamily=this._context.getDefaultFontFamily(),g.style.fontSize=this._context.getDefaultFontSize(),e.SvgDocumentUtils.disableMouseEvents(g),document.body.appendChild(g),e.Context.requestAnimationFrame(function(){document.body.removeChild(g)}),n.setDragImage(g,m.x,m.y);var f=this.GetDropOffset(t);if(f&&(n.setData(e.EventManager.DROP_OFFSET_X_DATA_TYPE,f.x),n.setData(e.EventManager.DROP_OFFSET_Y_DATA_TYPE,f.y)),h){var y=this._getDragEventPayload(t);h(i,y)}}},e.EventManager.prototype.OnDndDrag=function(t){this._handleDragSourceEvent(t,"drag")},e.EventManager.prototype.OnDndDragEnd=function(t){this._handleDragSourceEvent(t,"dragEnd")},e.EventManager.prototype.GetDragSourceType=function(t){return null},e.EventManager.prototype.GetDragDataContexts=function(){return[]},e.EventManager.prototype.GetDropOffset=function(t){return null},e.EventManager.prototype._getDragOptions=function(t){var e=this.GetDragSourceType(t);return this.getComponent().getOptions().dnd.drag[e]},e.EventManager.prototype._getDragEventPayload=function(t){var e={},i=this.GetDragSourceType(t);return e[i]=this.GetDragDataContexts(),e},e.EventManager.prototype._getDragData=function(t){for(var e=this.GetDragDataContexts(),i=0;i<e.length;i++)e[i].component=void 0;return JSON.stringify(e)},e.EventManager.prototype._handleDragSourceEvent=function(t,i){var n=this.GetDragSourceType(t);if(null!=n){var o=this._getDragOptions(t)[i];if(o){var r=e.ToolkitUtils.getEventForSyntax(this._context,t);o(r)}}},e.EventManager.prototype.OnDndDragEnter=function(t){this._handleDropTargetEvent(t,"dragEnter",!0)},e.EventManager.prototype.OnDndDragOver=function(t){this._handleDropTargetEvent(t,"dragOver",!0)},e.EventManager.prototype.OnDndDragLeave=function(t){this._handleDropTargetEvent(t,"dragLeave",!1)},e.EventManager.prototype.OnDndDrop=function(t){this._handleDropTargetEvent(t,"drop",!1)},e.EventManager.prototype.GetDropTargetType=function(t){return null},e.EventManager.prototype.GetDropEventPayload=function(t){return null},e.EventManager.prototype.ShowDropEffect=function(t){},e.EventManager.prototype.ShowRejectedDropEffect=function(t){this.ClearDropEffect()},e.EventManager.prototype.ClearDropEffect=function(){},e.EventManager.prototype._getDropOptions=function(t){var e=this.GetDropTargetType(t);return this.getComponent().getOptions().dnd.drop[e]},e.EventManager.prototype._handleDropTargetEvent=function(t,e,i){var n=this._handleDropTargetEventHelper(t,e);n||t.preventDefault(),!n&&i?this.ShowDropEffect(t):n&&i?this.ShowRejectedDropEffect(t):this.ClearDropEffect()},e.EventManager.prototype._handleDropTargetEventHelper=function(t,i){var n=this.GetDropTargetType(t);if(null==n)return!0;var o=e.ToolkitUtils.getEventForSyntax(this._context,t),r=this._getDropOptions(t),s=r[i];if(s){var a=this.GetDropEventPayload(t),l=s(o,a);if(null!=l)return l}var h=r.dataTypes;if(null!=h){e.ArrayUtils.isArray(h)||(h=[h]);for(var u=0;u<h.length;u++)if(e.ArrayUtils.getIndex(o.dataTransfer.types,h[u])>=0)return!1}return!0},e.EventManager.prototype.DispatchElementEvent=function(t,e){this.getCtx().getSvgDocument().dispatchEvent(new CustomEvent(t,{detail:e}))};var w=function(t,e){this.Init(t,e)};e.Obj.createSubclass(w,e.Obj),w.prototype.Init=function(t,e){this._context=t,this._id=e,this._actionTooltip=new U(this._context,this._id+"ActionPopup")},w.prototype.GetRichTooltipManager=function(){if(!this._RichTooltipManager){var t=this._id+"Tooltip";this._RichTooltipManager=this._context.getImplFactory().newRichTooltipManager(t),this._RichTooltipManager.InitializeTooltipElem();var e=this._RichTooltipManager.GetStoredContext();if(e){var i=new N(e,this,null,null);i.addListeners(this._actionTooltip)}}return this._RichTooltipManager},w.prototype.clearActionTooltip=function(){this._actionTooltip&&this._actionTooltip.clearContent()},w.prototype.getActionTooltip=function(){return this._actionTooltip},w.prototype.hideTooltip=function(){this.clearActionTooltip(),this._RichTooltipManager&&this._RichTooltipManager.hideTooltip()},w.prototype.closeActionTooltip=function(){var t=new v(v.TOOLTIP_CLOSED_TYPE,this._actionPopupObj);this.FireListener(t),this._actionPopupObj=null,this.hideTooltip()},w.prototype.showDatatip=function(t,e,i,n){var o=this.getActionTooltip();i=w._formatTextString(i),o.setTooltipText(i),null!=n&&o.setTooltipBorderColor(n),this.GetRichTooltipManager().showRichElement(t,e,o,!0)},w.prototype.showTextAtPosition=function(t,e,i,n,o,r){var s=this.getActionTooltip();i=w._formatTextString(i),s.setTooltipText(i),null!=n&&s.setTooltipBorderColor(n),this.GetRichTooltipManager().showRichElement(t,e,s,o)},w.prototype.displayActionPopup=function(){var t=this.getActionTooltip();return!(!t||!t.hasMenuItems())},w.prototype.startActionPopupAtPosition=function(t,e,i,n){var o=this.getActionTooltip();if(o){this.GetRichTooltipManager().showRichElementAtPosition(t,e,o,!0,!1);var r=new v(v.TOOLTIP_STARTED_TYPE,i);this.FireListener(r),this._actionPopupObj=i}},w.prototype.addTooltipEventListener=function(t,e,i){var n=this._getListeners(t,!0);n.push(e),n.push(i)},w.prototype.removeTooltipEventListener=function(t,e,i){var n=this._getListeners(t,!1);if(null!==n)for(var o=0;o<n.length;o+=2)if(n[o]===e&&n[o+1]===i){n.splice(o,2);break}},w.prototype._getListeners=function(t,e){if(!this._listenerObj){if(!e)return null;this._listenerObj={}}var i=t,n=this._listenerObj[i];return!n&&e&&(n=[],this._listenerObj[i]=n),n},w.prototype.FireListener=function(t){var e=this._getListeners(t.getType(),!1);if(e)for(var i=0;i<e.length;i+=2){var n=e[i+1];e[i].call(n,t)}},w._formatTextString=function(t){var e="";if(!t)return e;t=t.replace(/\n/g,"<br>");var i=t.split("<br>");if(i){for(var n=new Array,o=0;o<i.length;o++){var r=i[o];null!=r&&""!=r&&n.push(r)}for(var o=0;o<n.length;o++)e+=n[o],o<n.length-1&&(e+="\n")}return e};var N=function(t,e,i,n){this._customTooltipManager=e,this.Init(t,i,n)};e.Obj.createSubclass(N,e.EventManager),N.prototype.OnClickInternal=function(t){var e=t.target;this._handleMenuClick(e)},N.prototype.HandleImmediateTouchStartInternal=function(t,e){t.blockTouchHold(),this._handleMenuClick(t.target)},N.prototype.HandleTouchClickInternal=function(t){var e=t.target;this._handleMenuClick(e)},N.prototype._handleMenuClick=function(t){var e=this._customTooltipManager._actionPopupObj,i=t._menu;if(i){var n=!0;i instanceof H&&i._menuItem.isDisabled()&&(n=!1),n&&(this._customTooltipManager.closeActionTooltip(),i.FireActionTooltipItem(e))}};var U=function(t,e){this._Init(t,e)};e.Obj.createSubclass(U,e.Container),U.DEFAULT_BORDER_COLOR="gray",U.DEFAULT_BACKGROUND_COLOR="#ffffff",U.TOOLTIP_ONLY="tooltipOnly",U.MENU_ONLY="menuOnly",U.MENU_AND_TOOLTIP="menuAndTooltip",U.EMPTY="empty",U.MENU_PADDING_LEFT=21,U.MENU_PADDING_RIGHT=10,U.prototype._Init=function(t,i){this._context=t,this.getImpl()||this.setImpl(t.getImplFactory().newContainer("customTT")),U.superclass.Init.call(this,t),this._tooltipText=null,this._tooltipBorderColor=null,this._menuFontSize=11,this._tooltipFill=new e.SolidFill(U.DEFAULT_BACKGROUND_COLOR),this._fontSize=11,this._includePointer=!1,this._pointerLocation=new e.Point(0,0)},U.prototype.setIncludePointer=function(t){this._includePointer=t},U.prototype.getRootDisplayable=function(){return this},U.prototype.UpdateTooltipSize=function(t,e){this._displayWidth=t,this._displayHeight=e},U.prototype.getDisplayWidth=function(){return this._displayWidth},U.prototype.getDisplayHeight=function(){return this._displayHeight},U.prototype.clearContent=function(){this.clearMenuItems(),this.setTooltipBorderColor(null),this.setTooltipText(null)},U.prototype.setMenuFontSize=function(t){this._menuFontSize=t},U.prototype.setTooltipBorderColor=function(t){this._tooltipBorderColor=t},U.prototype.getTooltipBorderColor=function(){return this._tooltipBorderColor},U.prototype.setTooltipFill=function(t){this._tooltipFill=t},U.prototype.setTooltipText=function(t){this._tooltipText=t},U.prototype.getTooltipText=function(){return this._tooltipText},U.prototype.addMenuItem=function(t){this.getMenuItems().push(t)},U.prototype.hasMenuItems=function(){var t=this.getMenuItems();return t&&t.length>0},U.prototype.clearMenuItems=function(){this._menuItems&&(this._menuItems=[])},U.prototype.getMenuItems=function(){return this._menuItems||(this._menuItems=new Array),this._menuItems},U.prototype.containsMenuId=function(t){for(var e=this.getMenuItems(),i=0;i<e.length;i++){var n=e[i];if(n.getId()==t)return!0}return!1},U.prototype.getTooltipType=function(){var t=this.hasMenuItems();return t?U.MENU_ONLY:U.EMPTY},U.prototype.Render=function(){var t=this.getRootDisplayable();t.removeChildren();var i=this.getTooltipType();if(i!=U.EMPTY){var n=4,o=5,r=2;this._includePointer&&(r=3,n=10);var s=this.hasMenuItems(),a=n+r/2,l=0,h=0;i==U.TOOLTIP_ONLY?t.setAlpha(.9):t.setAlpha(1);var u=new Array,d=new Array;if(i==U.MENU_AND_TOOLTIP?l+=o:i==U.MENU_ONLY&&(l+=o/2),s)for(var c=this.getMenuItems(),p=0;p<c.length;p++){var _=c[p],g=new e.OutputText(this._context,_.getText(),0,0,null);g.alignBottom(),g.setFontSize(this._menuFontSize),_ instanceof H&&_._menuItem.isDisabled()&&g.setAlpha(.5),g._menu=_;var m=g.measureDimensions();m.y=a+l;var f=m.w;d.push(m),h=Math.max(f+U.MENU_PADDING_LEFT+U.MENU_PADDING_RIGHT,h),g.setY(m.y),l+=m.h,p<c.length-1&&(l+=o),u.push(g),g.alignLeft(),g.alignTop()}i!=U.MENU_ONLY&&i!=U.MENU_AND_TOOLTIP||(l+=o/2);var y=h+2*n,v=y+r,S=a+l+n+r/2;this._cursorText&&this._cursorText.setTranslateX(n+r/2);var C=12,E=this._pointerLocation.x>v,b=-this._pointerLocation.x,T=this._pointerLocation.y;if(this._includePointer){S/2<C&&(C=S/3);var A=S+r;A=Math.max(T+r,A);var O;E?(this.UpdateTooltipSize(this._pointerLocation.x,A),O=r/2):(this.UpdateTooltipSize(v+b+r,A),O=r/2+b),t.setTranslate(O,r/2)}else this.UpdateTooltipSize(v+r,S+r),t.setTranslate(r/2,r/2);var P=new e.Rect(this._context,0,0,v,S);if(this._includePointer){var I=5,D=S/2;if(E){var x=new e.Point(0,0),M=new e.Point(v,0),L=new e.Point(v,D),R=new e.Point(this._pointerLocation.x,T),w=new e.Point(v,D+C),N=new e.Point(v,S),B=new e.Point(0,S),k=e.PathUtils.moveTo(x.x+I,x.y)+e.PathUtils.lineTo(M.x-I,M.y)+e.PathUtils.arcTo(I,I,Math.PI/2,1,M.x,M.y+I)+e.PathUtils.lineTo(L.x,L.y)+e.PathUtils.lineTo(R.x,R.y)+e.PathUtils.lineTo(w.x,w.y)+e.PathUtils.lineTo(N.x,N.y-I)+e.PathUtils.arcTo(I,I,Math.PI/2,1,N.x-I,N.y)+e.PathUtils.lineTo(B.x+I,B.y)+e.PathUtils.arcTo(I,I,Math.PI/2,1,B.x,B.y-I)+e.PathUtils.lineTo(0,I)+e.PathUtils.arcTo(I,I,Math.PI/2,1,I,0)+e.PathUtils.closePath();P=new e.Path(this._context,k,null)}else{var x=new e.Point(0,0),M=new e.Point(v,0),L=new e.Point(v,S),R=new e.Point(0,S),w=new e.Point(0,D+C),N=new e.Point(-b,T),B=new e.Point(0,D),k=e.PathUtils.moveTo(x.x+I,x.y)+e.PathUtils.lineTo(M.x-I,M.y)+e.PathUtils.arcTo(I,I,Math.PI/2,1,M.x,M.y+I)+e.PathUtils.lineTo(L.x,L.y-I)+e.PathUtils.arcTo(I,I,Math.PI/2,1,L.x-I,L.y)+e.PathUtils.lineTo(R.x+I,R.y)+e.PathUtils.arcTo(I,I,Math.PI/2,1,R.x,R.y-I)+e.PathUtils.lineTo(w.x,w.y)+e.PathUtils.lineTo(N.x,N.y)+e.PathUtils.lineTo(B.x,B.y)+e.PathUtils.lineTo(0,I)+e.PathUtils.arcTo(I,I,Math.PI/2,1,I,0)+e.PathUtils.closePath();P=new e.Path(this._context,k,null)}}P.setSolidStroke("rgb(229,232,238)"),this._tooltipFill||(this._tooltipFill=new e.SolidFill(U.DEFAULT_BACKGROUND_COLOR)),P.setFill(this._tooltipFill),t.addChildAt(P,0);for(var F=.95*y,G=(v-F)/2,p=0;p<u.length;p++){var j=u[p];t.addChild(j);var f=d[p].w;if(j._menu){var V=new e.Rectangle(0,d[p].y-o/2,v,d[p].h+o),Y=new e.Rect(this._context,V.x,V.y,V.w,V.h);if(Y.setInvisibleFill(),Y._menu=j._menu,t.addChild(Y),p>0){var W=j._menu._menuItem,z=u[p-1];if(z._menu instanceof H&&W.hasSeparatorBefore()){var K=new e.SolidFill("gray",.5);this.renderDivider(t,G,d[p].y-o/2,F,K)}}}j.setTranslateX(U.MENU_PADDING_LEFT)}}},U.prototype.renderDivider=function(t,i,n,o,r){var s=new e.Rect(this._context,i,n,o,1);s.setFill(r),t.addChild(s)};var B=function(t,e,i,n,o){this.Init(t,e,i,n,o)};e.Obj.createSubclass(B,e.Obj),B.prototype.Init=function(t,e,i,n,o){this._context=t,this._id=e,this._text=i,this._listener=n,this._listenerObj=o},B.prototype.getId=function(){return this._id},B.prototype.getText=function(){return this._text},B.prototype.FireActionTooltipItem=function(t){if(this._listenerObj&&this._listener){var i=new Object;i.target=t,i.menuItem=this._menuItem,this._menuItemTimer=new e.Timer(this._context,1,this._handleMenuTimer,this),this._menuItemTimer.evt=i,this._menuItemTimer.start()}},B.prototype._handleMenuTimer=function(){this._menuItemTimer&&this._menuItemTimer.stop(),this._listener.call(this._listenerObj,this._menuItemTimer.evt)};var H=function(t,e,i,n,o){this.Init(t,e,i,n,o)};e.Obj.createSubclass(H,B),H.prototype.Init=function(t,e,i,n,o){H.superclass.Init.call(this,t,e,o.getText(),i,n),this._menuItem=o},e.XmlParser=function(t){this._impl||(this._impl=t.getImplFactory().newParser())},e.Obj.createSubclass(e.XmlParser,e.Obj),e.XmlParser.prototype.parse=function(t){return this._impl&&this._impl.parse?this._impl.parse(t):null},e.XmlNode=function(){},e.Obj.createSubclass(e.XmlNode,e.Obj),e.XmlNode.prototype.getAttr=function(t){return null},e.XmlNode.prototype.getChildNodes=function(){return new Array},e.XmlNode.prototype.getChild=function(t){var e=this.getChildNodes();return null!=e&&e.length>t?e[t]:null},e.XmlNode.prototype.getFirstChild=function(){return this.getChild(0)},e.XmlNode.prototype.getName=function(){return null},e.XmlNode.prototype.getAttributes=function(){return null},e.XmlNode.prototype.getAllChildNodes=function(){return new Array},e.XmlNode.prototype.getNodeValue=function(){return null},e.XmlNode.prototype.getTextContent=function(){return null},e.XmlNode.prototype.getElementsByTagName=function(t){return null},e.HtmlTooltipManager=function(t,e){this.Init(t,e)},e.Obj.createSubclass(e.HtmlTooltipManager,e.TooltipManager),e.HtmlTooltipManager._TOOLTIP_DIV_ID="_dvtTooltip",e.HtmlTooltipManager._SHOW_DELAY=500,e.HtmlTooltipManager._BORDER_COLOR="#9ba2b0",e.HtmlTooltipManager._FONT_COLOR="#383a47",e.HtmlTooltipManager._VIEWPORT_BUFFER=15,e.HtmlTooltipManager.prototype.Init=function(t,i){this._context=t,this._domElementId=i?i:e.HtmlTooltipManager._TOOLTIP_DIV_ID,this._isTooltip=!0},e.HtmlTooltipManager.prototype.showDatatip=function(t,e,i,n,o){null==o&&(o=!0),this._isTooltip=!1,this._showTextAtPosition(t,e,i,n,o,this._context.getDatatipStyleClass())},e.HtmlTooltipManager.prototype._showTextAtPosition=function(t,i,n,o,r,s){var a,l=this.getTooltipElem();if("string"==typeof n){for(;l.hasChildNodes();)l.removeChild(l.firstChild);n=n.replace(/(<|&#60;)/g,"&lt;"),n=n.replace(/(>|&#62;)/g,"&gt;"),n=e.HtmlTooltipManager._restoreTag(n,"b"),n=e.HtmlTooltipManager._restoreTag(n,"i"),n=e.HtmlTooltipManager._restoreTag(n,"table"),n=e.HtmlTooltipManager._restoreTag(n,"tr"),n=e.HtmlTooltipManager._restoreTag(n,"td"),n=n.replace(/\n/g,"<br>"),n=n.replace(/\\n/g,"<br>"),n=n.replace(/&#92;n/g,"<br>"),n=e.HtmlTooltipManager._restoreTag(n,"br"),a=document.createElement("span"),a.style.visibility="inherit",a.style.width=null,a.style.height=null,a.innerHTML=n}else 1!=n&&(a=n);this._isCustomClassName||(l.className=s),this._isCustomClassName=!1,o||(o=e.HtmlTooltipManager._BORDER_COLOR),this._isCustomBorderColor||(l.style.borderColor=o),this._isCustomBorderColor=!1,l.style.position="absolute",l.style.zIndex=2147483647,null!=a&&l.appendChild(a),this.PostElement(l,t,i,!0,r)},e.HtmlTooltipManager.prototype.PostElement=function(t,e,i,n,o){if(t.style["pointer-events"]=n?"none":"auto",t.style.width=null,t.style.height=null,t.style.left="0px",t.style.top="0px",o){var r=this._getOffsets(t);this.positionTip(e+r.x,i+r.y,e,i)}else this.positionTip(e,i,e,i);t.style.visibility="visible";var s=this._context.getTooltipAttachedCallback();s&&s(t)},e.HtmlTooltipManager.prototype.hideTooltip=function(){this.clearTooltip(),this._tooltipDisplayed=!1,this._timerIsRunning=!1;var i=document.getElementById(this._domElementId);i&&(i.style.visibility="hidden",i.style.overflow=null,i.style.width="0px",i.style.height="0px",e.Agent.isRightToLeft(this._context)?i.style.left=i.style.right:i.style.left="0px",i.style.top="0px","undefined"==typeof t||this instanceof G||t(i).children().remove())},e.HtmlTooltipManager.prototype.getTooltipElem=function(){var t=document.getElementById(this._domElementId);return t||(t=this.InitializeTooltipElem()),t},e.HtmlTooltipManager.prototype.InitializeTooltipElem=function(){var t=document.createElement("div");return t.id=this._domElementId,t.style.visibility="hidden",document.body.appendChild(t),this.InitContent(t),t},e.HtmlTooltipManager.prototype.InitContent=function(t){},e.HtmlTooltipManager.prototype.showTooltip=function(t,i,n,o,r,s){if(n&&0!=n.length&&(this._x=t,this._y=i,this._text=n,this._trackMouse=r,!this._timerIsRunning)){var a=document.createElement("span");a.className="OraDVTTooltipText",a.innerHTML=n,a.style.color=e.HtmlTooltipManager._FONT_COLOR,s||(s=e.HtmlTooltipManager._BORDER_COLOR);var l=this.getTooltipElem();l.style.borderColor=s,e.Agent.isTouchDevice()||this._tooltipDisplayed&&this._trackMouse?this._displayTooltip(this._x,this._y,this._text,this._borderColor):(this._timerIsRunning=!0,this._showTimerId=window.setTimeout(e.Obj.createCallback(this,this._handleShowTimer),e.HtmlTooltipManager._SHOW_DELAY))}},e.HtmlTooltipManager.prototype.clearTooltip=function(){this._showTimerId&&(window.clearTimeout(this._showTimerId),this._showTimerId=void 0,this._x=void 0,this._y=void 0,this._text=void 0,this._trackMouse=void 0),this._hideTimerId&&(window.clearTimeout(this._hideTimerId),this._hideTimerId=void 0)},e.HtmlTooltipManager.prototype._handleShowTimer=function(t){this._timerIsRunning=!1,this._displayTooltip(this._x,this._y,this._text,this._borderColor),this._tooltipDisplayed=!0},e.HtmlTooltipManager.prototype._displayTooltip=function(t,e,i,n){this._isTooltip=!0,this._showTextAtPosition(t,e,i,n,!0,this._context.getTooltipStyleClass())},e.HtmlTooltipManager.prototype._getOffsets=function(t){var i=this.getTooltipBounds(t);if(e.Agent.isTouchDevice())return new e.Point(0-i.w/2,-30-i.h);var n=-8-i.h,o=8;this._isTooltip&&(n=22,o=0);var r=e.Agent.isRightToLeft(this._context);return r&&(o=-o-i.w),new e.Point(o,n)},e.HtmlTooltipManager.prototype.getTooltipBounds=function(){var t=this.getTooltipElem();return t.style.height="auto",new e.Rectangle(parseInt(t.style.left),parseInt(t.style.top),t.offsetWidth,t.offsetHeight)},e.HtmlTooltipManager.prototype.positionTip=function(t,i){var n=this.getTooltipElem(),o=this.getTooltipBounds(),r=o.w,s=o.h,a=new e.Rectangle(window.pageXOffset+e.HtmlTooltipManager._VIEWPORT_BUFFER,window.pageYOffset+e.HtmlTooltipManager._VIEWPORT_BUFFER,window.innerWidth-2*e.HtmlTooltipManager._VIEWPORT_BUFFER,window.innerHeight-2*e.HtmlTooltipManager._VIEWPORT_BUFFER);r>a.w-2*e.HtmlTooltipManager._VIEWPORT_BUFFER&&(r=a.w-2*e.HtmlTooltipManager._VIEWPORT_BUFFER,n.style.width=r+"px");var l=t;l=Math.max(l,a.x+e.HtmlTooltipManager._VIEWPORT_BUFFER),l=Math.min(l,a.x+a.w-r-e.HtmlTooltipManager._VIEWPORT_BUFFER),Math.abs(a.x)>e.HtmlTooltipManager._VIEWPORT_BUFFER&&(n.style.width=Math.min(n.clientWidth,a.x+a.w-l)+"px",i+=s-n.offsetHeight,s=n.offsetHeight,n.style.overflow="hidden");var h=i;h=Math.min(h,a.y+a.h-s),h=Math.max(h,a.y),n.style.left=l+"px",n.style.top=h+"px"},e.HtmlTooltipManager.prototype.getCustomTooltip=function(t,e){for(var i=this.getTooltipElem();i.hasChildNodes();)i.removeChild(i.firstChild);e.parentElement=i,i.className="",i.style.borderColor="",e=this._context.fixRendererContext(e);var n=t(e);return i.className&&(this._isCustomClassName=!0),i.style.borderColor&&(this._isCustomBorderColor=!0),!(n||!i.hasChildNodes())||n},e.HtmlTooltipManager._restoreTag=function(t,e){var i=new RegExp("&lt;(/?)"+e+"([^&]*)(/?)&gt;","g");return t.replace(i,"<$1"+e+"$2$3>")},e.HtmlTooltipManager.createStartTag=function(t,e){return"<"+t+' style="'+e.toString()+'">'},e.HtmlKeyboardListenerUtils=function(){},e.Obj.createSubclass(e.HtmlKeyboardListenerUtils,e.Obj),e.HtmlKeyboardListenerUtils.ATTR_IGNORE_EVENTS_FROM_TARGET="_dvtIgnoreEventsFromTarget",e.HtmlKeyboardListenerUtils.getListener=function(t){return t?e.HtmlKeyboardListenerUtils._captureListener:e.HtmlKeyboardListenerUtils._bubbleListener},e.HtmlKeyboardListenerUtils._bubbleListener=function(t){e.HtmlKeyboardListenerUtils._commonListener.call(this,t,!1)},e.HtmlKeyboardListenerUtils._captureListener=function(t){e.HtmlKeyboardListenerUtils._commonListener.call(this,t,!0)},e.HtmlKeyboardListenerUtils._commonListener=function(t,i){if(!e.HtmlKeyboardListenerUtils._checkIgnoreTarget(t)){var n;if(this._currentObj){if("focus"==t.type)return void(this._focusEvent=t);var o=this._currentObj.getCtx();this._focusEvent&&(o.resetCurrentKeyboardFocus(t),n=e.DomEventFactory.newEvent(this._focusEvent,o),this._currentObj.FireListener(n,i),this._focusEvent=null),n=e.DomEventFactory.newEvent(t,o),this._currentObj.FireListener(n,i)}else if(this._obj&&this._obj instanceof Array){var r,s,a=this._obj.length;for(r=0;r<a;r++)s=this._obj[r],n=e.DomEventFactory.newEvent(t,s.getCtx()),s.FireListener(n,i)}}},e.HtmlKeyboardListenerUtils._checkIgnoreTarget=function(t){return!!(t&&t.target&&t.target[e.HtmlKeyboardListenerUtils.ATTR_IGNORE_EVENTS_FROM_TARGET])};var k=function(){this._parser=new DOMParser};e.Obj.createSubclass(k,e.Obj),k.prototype.parse=function(t){var i=this._parser.parseFromString(t,"text/xml"),n=i.documentElement;return new e.DomXmlNode(n)},e.DomXmlNode=function(t){this._node=t},e.Obj.createSubclass(e.DomXmlNode,e.XmlNode),e.DomXmlNode.prototype.getAttr=function(t){return this._node.getAttribute(t)},e.DomXmlNode.prototype.getChildNodes=function(){for(var t=new Array,i=this._node.firstChild;null!=i;)1==i.nodeType&&t.push(new e.DomXmlNode(i)),i=i.nextSibling;return t},e.DomXmlNode.prototype.getName=function(){return this._node.nodeName},e.DomXmlNode.prototype.getAttributes=function(){for(var t=[],e=this._node.attributes.length,i=0;i<e;i++){var n=this._node.attributes[i];n.name&&"undefined"!=typeof n.value&&null!=n.value&&t.push({name:n.name,value:n.value})}return t},e.DomXmlNode.prototype.getAllChildNodes=function(){for(var t=new Array,i=this._node.firstChild;null!=i;)t.push(new e.DomXmlNode(i)),i=i.nextSibling;return t},e.DomXmlNode.prototype.getNodeValue=function(){return this._node.nodeValue},e.DomXmlNode.prototype.getTextContent=function(){return this._node.textContent},e.DomXmlNode.prototype.getElementsByTagName=function(t){var i=[],n=this._node.getElementsByTagName(t);
if(n)for(var o=0;o<n.length;o++)i.push(new e.DomXmlNode(n[o]));return i},e.EventFactory=new Object,e.Obj.createSubclass(e.EventFactory,e.Obj),e.EventFactory.newEvent=function(t,e){var i={type:t};return e&&(i.id=e),i},e.EventFactory.newOptionChangeEvent=function(t,i,n){var o=e.EventFactory.newEvent("optionChange");return o.key=t,o.value=i,o.optionMetadata=n,o},e.EventFactory.newAdfPropertyChangeEvent=function(t,i){var n=e.EventFactory.newEvent("adfPropertyChange");return n.properties={},null!=t&&(n.properties[t]=i),n},e.EventFactory.newAdfContextMenuEvent=function(t,i){var n=e.EventFactory.newEvent("adfContextMenu");return n.nativeEvent=t,n.menuId=i,n},e.EventFactory.newAdfHidePopupEvent=function(t,i){var n=e.EventFactory.newEvent("adfHidePopup");return n.popupId=t,n.relatedTarget=i,n},e.EventFactory.newAdfLogEvent=function(t,i){var n=e.EventFactory.newEvent("adfLog");return n.level=t,n.message=i,n},e.EventFactory.newAdfShowPopupEvent=function(t,i,n,o){var r=e.EventFactory.newEvent("adfShowPopup");return r.showPopupBehavior=t,r.launcherBounds=i,r.launcherId=n,r.triggerType=o,r},e.EventFactory.newActionEvent=function(t,i,n){var o=e.EventFactory.newEvent("action");return o.commandId=i,o.clientId=n,o.subType=t,o},e.EventFactory.newCategoryHideEvent=function(t,i){var n=e.EventFactory.newEvent("categoryHide");return n.category=t,n.hiddenCategories=i,n},e.EventFactory.newCategoryShowEvent=function(t,i){var n=e.EventFactory.newEvent("categoryShow");return n.category=t,n.hiddenCategories=i,n},e.EventFactory.newCategoryHighlightEvent=function(t,i){var n=e.EventFactory.newEvent("categoryHighlight");return n._highlightType=i?"over":"out",t=t||[],n.categories=t instanceof Array?t:[t],n},e.EventFactory.newDrillEvent=function(t){return e.EventFactory.newEvent("drill",t)},e.EventFactory.newReadyEvent=function(){return e.EventFactory.newEvent("ready")},e.EventFactory.newSelectionEvent=function(t){var i=e.EventFactory.newEvent("selection");return i.selection=t,i},e.EventFactory.newTouchHoldReleaseEvent=function(t){var i=e.EventFactory.newEvent("touchHoldRelease");return i.nativeEvent=t,i},e.EventFactory.newValueChangeEvent=function(t,i,n){var o=e.EventFactory.newEvent("valueChange");return o.oldValue=t,o.newValue=i,o.complete=n,o},e.EventFactory.newChartDrillEvent=function(t,i,n){var o=e.EventFactory.newDrillEvent(t);return o.series=i,o.group=n,o},e.EventFactory.newChartSelectionEvent=function(t,i,n,o,r,s,a,l,h,u){var d=e.EventFactory.newSelectionEvent(t);return d.complete=i,d.xMin=n,d.xMax=o,d.startGroup=r,d.endGroup=s,d.yMin=a,d.yMax=l,d.y2Min=h,d.y2Max=u,d},e.EventFactory.newChartViewportChangeEvent=function(t,i,n,o,r,s,a){var l=e.EventFactory.newEvent("viewportChange");return l.complete=t,l.xMin=i,l.xMax=n,l.startGroup=o,l.endGroup=r,l.yMin=s,l.yMax=a,l},e.EventFactory.newSunburstExpandCollapseEvent=function(t,i,n,o,r){var s=e.EventFactory.newEvent(t,i);return s.expanded=r,s.data=n,s.component=o,s},e.EventFactory.newTreeDrillEvent=function(t,i,n){var o=e.EventFactory.newDrillEvent(t);return o.data=i,o.component=n,o},e.EventFactory.newSunburstRotationEvent=function(t,i){var n=e.EventFactory.newEvent("rotation");return n.complete=i,n.startAngle=t%360,n},e.EventFactory.newThematicMapViewportChangeEvent=function(t,i,n){var o=e.EventFactory.newEvent("viewportChange");return o.panX=t,o.panY=i,o.zoom=n,o},e.EventFactory.newTimelineViewportChangeEvent=function(t,i,n){var o=e.EventFactory.newEvent("viewportChange");return o.viewportStart=t,o.viewportEnd=i,o.minorAxisScale=n,o},e.EventFactory.newGanttViewportChangeEvent=function(t,i,n,o){var r=e.EventFactory.newTimelineViewportChangeEvent(t,i,o);return r.majorAxisScale=n,r},e.EventFactory.newTreemapIsolateEvent=function(t){return e.EventFactory.newEvent("isolate",t)},e.ClientBehaviorEvent=function(t){this.Init(e.ClientBehaviorEvent.TYPE),this._clientBehavior=t},e.Obj.createSubclass(e.ClientBehaviorEvent,e.BaseComponentEvent),e.ClientBehaviorEvent.TYPE="clientBehavior",e.ClientBehaviorEvent.prototype.getClientBehavior=function(){return this._clientBehavior},e.EventDispatcher={},e.Obj.createSubclass(e.EventDispatcher,e.Obj),e.EventDispatcher.dispatchEvent=function(t,e,i,n){t&&t.call&&t.call(e,n,i)},e.ToolkitUtils={},e.Obj.createSubclass(e.ToolkitUtils,e.Obj),e.ToolkitUtils.SVG_NS="http://www.w3.org/2000/svg",e.ToolkitUtils.XLINK_NS="http://www.w3.org/1999/xlink",e.ToolkitUtils._IMAGE_URL_CACHE={},e.ToolkitUtils.createSvgDocument=function(t){var i=document.createElementNS(e.ToolkitUtils.SVG_NS,"svg");return null!=t&&e.ToolkitUtils.setAttrNullNS(i,"id",t),e.ToolkitUtils.setAttrNullNS(i,"width","100%"),e.ToolkitUtils.setAttrNullNS(i,"height","100%"),e.Agent.isPlatformIE()&&e.ToolkitUtils.setAttrNullNS(i,"focusable","false"),i},e.ToolkitUtils.getDragFeedback=function(t,i){var n=new Object;if(!t)return n.width=1,n.height=1,n.svg=e.ToolkitUtils.createSvgDocument("dnd"),n;t instanceof Array||(t=[t]);var o=e.DragAndDropUtils.getDragFeedbackBounds(t,i),r=e.ToolkitUtils._getDragFeedbackSVG(t,o);return n.width=o.w+2*e.DragSource.DRAG_FEEDBACK_MARGIN,n.height=o.h+2*e.DragSource.DRAG_FEEDBACK_MARGIN,r&&(n.svg=r),n},e.ToolkitUtils._getDragFeedbackSVG=function(t,i){var n=e.ToolkitUtils.createSvgDocument("dnd");e.ToolkitUtils.setAttrNullNS(n,"class","oj-drag");var o=e.DragSource.DRAG_FEEDBACK_MARGIN-i.x,r=e.DragSource.DRAG_FEEDBACK_MARGIN-i.y,s="translate("+o+","+r+")",a=e.SvgShapeUtils.createElement("g");e.ToolkitUtils.setAttrNullNS(a,"transform",s),e.ToolkitUtils.appendChildElem(n,a);for(var l=0;l<t.length;l++){var h=t[l],u=h.getImpl().getElem(),d=u.cloneNode(!0);e.ToolkitUtils.getAttrNullNS(d,"filter")&&e.ToolkitUtils.setAttrNullNS(d,"filter",null);var c=e.SvgShapeUtils.createElement("g");e.ToolkitUtils.appendChildElem(a,c);for(var p=h.getPathToStage(),_=null,g=1;g<p.length;g++)_?(_=_.clone(),_.concat(p[g].getMatrix())):_=p[g].getMatrix();if(_){var m="matrix("+_.getA()+","+_.getC()+","+_.getB()+","+_.getD()+","+_.getTx()+","+_.getTy()+")";e.ToolkitUtils.setAttrNullNS(c,"transform",m)}e.ToolkitUtils.appendChildElem(c,d)}return n},e.ToolkitUtils.addDomEventListener=function(t,e,i,n){t&&t.addEventListener&&t.addEventListener(e,i,n)},e.ToolkitUtils.removeDomEventListener=function(t,e,i,n){t&&t.removeEventListener&&t.removeEventListener(e,i,n)},e.ToolkitUtils.appendChildElem=function(t,e){return t.appendChild(e)},e.ToolkitUtils.getAttrNullNS=function(t,e){return t.getAttribute(e)},e.ToolkitUtils.hasAttrNullNS=function(t,e){return t.hasAttribute(e)},e.ToolkitUtils.setAttrNullNS=function(t,i,n,o){return null!=o&&n==o?void(e.ToolkitUtils.hasAttrNullNS(t,i)&&e.ToolkitUtils.removeAttrNullNS(t,i)):void t.setAttribute(i,n)},e.ToolkitUtils.removeAttrNullNS=function(t,i){e.ToolkitUtils.hasAttrNullNS(t,i)&&t.removeAttribute(i)},e.ToolkitUtils.setHref=function(t,i){e.Agent.isBrowserSafari()||e.Agent.isPlatformGecko()&&e.Agent.getVersion()<51?t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i):e.ToolkitUtils.setAttrNullNS(t,"href",i)},e.ToolkitUtils.getLinkCallback=function(t,e){if(t||e){var i=function(){if(null==t)self.location=e;else{var i=window.open(e,t);i&&i.focus()}};return i}return null},e.ToolkitUtils.roundDecimal=function(t){return e.Agent.isEnvironmentTest()?Math.round(1e3*t)/1e3:t},e.ToolkitUtils.getUrlPathById=function(t){var i=e.Agent.isPlatformIE()?null!=document.querySelector("base"):document.URL!=document.baseURI,n=i?document.URL.split("#")[0]+"#":"#";return n+t},e.ToolkitUtils.getUrlById=function(t){return"url("+e.ToolkitUtils.getUrlPathById(t)+")"},e.ToolkitUtils.setSvgSize=function(t,i,n){var o=t.getSvgDocument();e.ToolkitUtils.setAttrNullNS(o,"width",i+"px"),e.ToolkitUtils.setAttrNullNS(o,"height",n+"px")},e.ToolkitUtils.getOuterDivSize=function(t){var i=t.getSvgDocument().parentNode,n=window.getComputedStyle(i);return new e.Dimension(parseFloat(n.width),parseFloat(n.height))},e.ToolkitUtils.getEventForSyntax=function(e,i){var n=i.getNativeEvent();if(!e.isCustomElement()&&"undefined"!=typeof t){var o=t.event.fix(n);return o.dataTransfer=n.dataTransfer,o}return n},e.ToolkitUtils.getImageUrl=function(i,n){if("undefined"==typeof t||n.indexOf(".")!=-1)return n;var o=e.ToolkitUtils._IMAGE_URL_CACHE[n];if(null!=o)return o;var r=t(document.createElement("div"));r.attr("style","display:none;"),r.addClass(n);var s=t(i.getContainer());return s.append(r),o=r.css("background-image"),o=o&&o.indexOf("url(")!==-1?o.slice(o.indexOf("url(")+4,o.length-1).replace(/["']/g,""):n,r.remove(),e.ToolkitUtils._IMAGE_URL_CACHE[n]=o,o},e.ToolkitUtils.addClassName=function(t,i){if(t&&i)if(e.ToolkitUtils.hasAttrNullNS(t,"class")){var n=e.ToolkitUtils.getAttrNullNS(t,"class").split(" ");e.ArrayUtils.getIndex(n,i)==-1&&(n.push(i),e.ToolkitUtils.setAttrNullNS(t,"class",n.join(" ")))}else e.ToolkitUtils.setAttrNullNS(t,"class",i)},e.ToolkitUtils.removeClassName=function(t,i){if(t&&i&&e.ToolkitUtils.hasAttrNullNS(t,"class")){var n=e.ToolkitUtils.getAttrNullNS(t,"class").split(" "),o=e.ArrayUtils.getIndex(n,i);o>=0&&(n.splice(o,1),e.ToolkitUtils.setAttrNullNS(t,"class",n.join(" ")))}},e.Bundle.addDefaultStrings(e.Bundle.UTIL_PREFIX,{SCALING_SUFFIX_THOUSAND:"K",SCALING_SUFFIX_MILLION:"M",SCALING_SUFFIX_BILLION:"B",SCALING_SUFFIX_TRILLION:"T",SCALING_SUFFIX_QUADRILLION:"Q",NUMBER_FORMAT_DECIMAL_SEPARATOR:".",NUMBER_FORMAT_GROUPING_SEPARATOR:",",NUMBER_FORMAT_GROUPING_SIZE:3,MONTH_JANUARY:"January",MONTH_FEBRUARY:"February",MONTH_MARCH:"March",MONTH_APRIL:"April",MONTH_MAY:"May",MONTH_JUNE:"June",MONTH_JULY:"July",MONTH_AUGUST:"August",MONTH_SEPTEMBER:"September",MONTH_OCTOBER:"October",MONTH_NOVEMBER:"November",MONTH_DECEMBER:"December",MONTH_SHORT_JANUARY:"Jan",MONTH_SHORT_FEBRUARY:"Feb",MONTH_SHORT_MARCH:"Mar",MONTH_SHORT_APRIL:"Apr",MONTH_SHORT_MAY:"May",MONTH_SHORT_JUNE:"Jun",MONTH_SHORT_JULY:"Jul",MONTH_SHORT_AUGUST:"Aug",MONTH_SHORT_SEPTEMBER:"Sep",MONTH_SHORT_OCTOBER:"Oct",MONTH_SHORT_NOVEMBER:"Nov",MONTH_SHORT_DECEMBER:"Dec",DAY_MONDAY:"Monday",DAY_TUESDAY:"Tuesday",DAY_WEDNESDAY:"Wednesday",DAY_THURSDAY:"Thursday",DAY_FRIDAY:"Friday",DAY_SATURDAY:"Saturday",DAY_SUNDAY:"Sunday",DAY_SHORT_MONDAY:"Mon",DAY_SHORT_TUESDAY:"Tue",DAY_SHORT_WEDNESDAY:"Wed",DAY_SHORT_THURSDAY:"Thu",DAY_SHORT_FRIDAY:"Fri",DAY_SHORT_SATURDAY:"Sat",DAY_SHORT_SUNDAY:"Sun",TIME_AM:"AM",TIME_PM:"PM",DURATION_DAYS:"{0} days",DURATION_HOURS:"{0} hours",ROW_INFO:"Row {0}",TASK_INFO:"Start time is {0}, end time is {1}, duration is {2}",MILESTONE_INFO:"Time is {0}",ITEM_START:"Start time is {0}.",ITEM_END:"End time is {0}.",ITEM_TITLE:"Title is {0}.",ITEM_DESCRIPTION:"Description is {0}.",INVALID_DATA:"Invalid data",NO_DATA:"No data to display",CLEAR_SELECTION:"Clear Selection",EXPAND:"Expand",COLLAPSE:"Collapse",DATA_VISUALIZATION:"Data Visualization",STATE_SELECTED:"Selected",STATE_UNSELECTED:"Unselected",STATE_MAXIMIZED:"Maximized",STATE_MINIMIZED:"Minimized",STATE_EXPANDED:"Expanded",STATE_COLLAPSED:"Collapsed",STATE_ISOLATED:"Isolated",STATE_HIDDEN:"Hidden",STATE_VISIBLE:"Visible",STATE_DRILLABLE:"Drillable",ARIA_LABEL_STATE_DELIMITER:", ",ARIA_LABEL_DESC_DELIMITER:". ",COLON_SEP_LIST:"{0}: {1}",COUNT_WITH_TOTAL:"{0} of {1}",ZOOM_IN:"Zoom In",ZOOM_OUT:"Zoom Out",CHART:"Chart",DIAGRAM:"Diagram",GANTT:"Gantt",GAUGE:"Gauge",HIERARCHY_VIEWER:"Hierarchy Viewer",LEGEND:"Legend",NBOX:"{0} Box",PICTOCHART:"Picture Chart",SUNBURST:"Sunburst",TAG_CLOUD:"Tag Cloud",THEMATIC_MAP:"Thematic Map",TIME_AXIS:"Time Axis",TIMELINE:"Timeline",TIMELINE_SERIES:"Series",TREEMAP:"Treemap"}),e.SvgDocumentUtils=function(){},e.Obj.createSubclass(e.SvgDocumentUtils,e.Obj),e.SvgDocumentUtils.elementFromPoint=function(t,e){for(var i=document.elementFromPoint(t,e);i;){if(i._obj&&i._obj.getObj&&i._obj.getObj())return i._obj.getObj();i=i.parentNode}return null},e.SvgDocumentUtils.elementFromTouch=function(t){return this.elementFromPoint(t.clientX,t.clientY)},e.SvgDocumentUtils.isFilterSupported=function(t){return!(e.Agent.isPlatformIE()&&e.Agent.getVersion()<10||e.Agent.isBrowserSafari()&&e.Agent.getVersion()<536||e.Agent.isTouchDevice()&&!e.Agent.isBrowserSafari())},e.SvgDocumentUtils.isEventAvailableOutsideClip=function(){return e.Agent.isBrowserSafari()},e.SvgDocumentUtils.isFilterStraightLineAdjustmentNeeded=function(){return e.Agent.isPlatformGecko()},e.SvgDocumentUtils.fixGeckoContainerForFilter=function(t){if(t&&e.Agent.isPlatformGecko()){var i=t.getImpl().getElem();if(i){var n=e.ToolkitUtils.getAttrNullNS(i,"transform");n||(n="matrix(1 0 0 1 0 0)"),e.ToolkitUtils.setAttrNullNS(i,"transform",n)}}},e.SvgDocumentUtils.cancelDomEvent=function(t){t&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.cancel=!0,t.returnValue=!1)},e.SvgDocumentUtils.addDragListeners=function(t,i,n,o,r,s){var a=e.Agent.isTouchDevice(),l=t.getCtx(),h=e.Agent.isEnvironmentBrowser()?document.body.style:{},u=function(t){i.call(r,t)&&(a?(document.addEventListener("touchmove",d,!0),document.addEventListener("touchend",c,!0)):(document.addEventListener("mousemove",d,!0),document.addEventListener("mouseup",c,!0),s&&document.addEventListener("click",p,!0)),e.SvgDocumentUtils._webkitUserSelect=h.webkitUserSelect,e.SvgDocumentUtils._mozUserSelect=h.MozUserSelect,h.webkitUserSelect="none",h.MozUserSelect="none")},d=e.SvgDocumentUtils.createStaticCallback(l,n,r),c=function(t){a?(document.removeEventListener("touchmove",d,!0),document.removeEventListener("touchend",c,!0)):(document.removeEventListener("mousemove",d,!0),document.removeEventListener("mouseup",c,!0),a||setTimeout(function(){document.removeEventListener("click",p,!0)},50)),h.webkitUserSelect=e.SvgDocumentUtils._webkitUserSelect,h.MozUserSelect=e.SvgDocumentUtils._mozUserSelect;var i=e.DomEventFactory.newEvent(t,l);o.call(r,i)},p=function(t){t.stopPropagation()};return a?t.addEvtListener(e.TouchEvent.TOUCHSTART,u):t.addEvtListener(e.MouseEvent.MOUSEDOWN,u),function(){a?(document.removeEventListener("touchmove",d,!0),document.removeEventListener("touchend",c,!0)):(document.removeEventListener("mousemove",d,!0),document.removeEventListener("mouseup",c,!0),document.removeEventListener("click",p,!0)),h.webkitUserSelect=e.SvgDocumentUtils._webkitUserSelect,h.MozUserSelect=e.SvgDocumentUtils._mozUserSelect}},e.SvgDocumentUtils.createStaticCallback=function(t,i,n){return function(o){var r=e.DomEventFactory.newEvent(o,t);i.call(n,r)}},e.SvgDocumentUtils.disableMouseEvents=function(t){if(t.style&&(t.style.pointerEvents="none"),t.childNodes)for(var i=0;i<t.childNodes.length;i++)e.SvgDocumentUtils.disableMouseEvents(t.childNodes[i])};var F={_cache:{}};e.Obj.createSubclass(F,e.Obj),F.addBubbleEventListener=function(t,i,n){return window.addEventListener?(e.ToolkitUtils.addDomEventListener(t,i,n,!1),!0):!!window.attachEvent&&(t.attachEvent("on"+i,n),!0)},F.loadImage=function(t,e){var i=this._cache[t];if(i){if(!i._image)return e&&e(i),i;F._addListenerToQueue(i._listeners,e)}else this.loadNewImage(t,e);return null},F.loadNewImage=function(t,e){var i=document.createElement("img"),n={_listeners:[],url:t,_image:i};e&&F._addListenerToQueue(n._listeners,e),this._cache[t]=n,F.addBubbleEventListener(i,"load",function(t){n.width=i.width,n.height=i.height,delete n._image;var e,o=n._listeners.length;for(e=0;e<o;e++)n._listeners[e]&&n._listeners[e](n);delete n._listeners}),i.src=t},F._addListenerToQueue=function(t,e){if(e){for(var i=0;i<t.length;i++)if(t[i]===e)return;t.push(e)}};var G=function(t,e){this.Init(t,e)};e.Obj.createSubclass(G,e.HtmlTooltipManager),G.prototype.Init=function(t,e){this._storedContexts=new Object,G.superclass.Init.call(this,t,e)},G.prototype.InitContent=function(t){t.innerHTML="";var i=new e.Context(t,"DvtCustomTooltip");this._storedContexts[this._domElementId]=i},G.prototype.GetStoredContext=function(){return this._storedContexts[this._domElementId]},G.prototype.showRichElement=function(t,e,i,n){this.showRichElementAtPosition(t,e,i,n,!1)},G.prototype.showRichElementAtPosition=function(t,i,n,o,r){var s=this.getTooltipElem();s.style.position="absolute",s.style.zIndex=2147483647;var a=this.GetStoredContext();if(a){var l=a.getStage();l.removeChildren();var h=n.getRootDisplayable();l.addChild(h),n&&n.Render&&n.Render();var u=l.getImpl().getSVGRoot();e.ToolkitUtils.setAttrNullNS(u,"width",n.getDisplayWidth()),e.ToolkitUtils.setAttrNullNS(u,"height",n.getDisplayHeight()),this.PostElement(s,t,i,r,o)}},G.prototype.hideTooltip=function(){G.superclass.hideTooltip.call(this);var t=this.GetStoredContext();if(t){var e=t.getStage();e.removeChildren()}};var j=function(t){this._context=t};e.Obj.createSubclass(j,e.Obj),j.prototype.newDefs=function(){return e.SvgShapeUtils.createElement("defs")},j.prototype.getImageLoader=function(){return e.Agent.isEnvironmentBrowser()?F:e.JavaImageLoader},j.prototype.getDocumentUtils=function(){return e.SvgDocumentUtils},j.prototype.newParser=function(){return e.Agent.isEnvironmentBrowser()?new k:new DvtJavaXmlParser},j.prototype.newTooltipManager=function(t){return new e.HtmlTooltipManager(this._context,t)},j.prototype.newRichTooltipManager=function(t){return new G(this._context,t)};var V=function(){this.Init()};e.Obj.createSubclass(V,e.Obj),V.prototype.Init=function(){this._regionPctRect=new e.Rectangle(-10,-10,120,120),this._counter=0,this._resultIdsUnder=[],this._resultIdsOver=[]},V.prototype.getRegionPctRect=function(){return this._regionPctRect},V.prototype.getResultIdsUnder=function(){return this._resultIdsUnder},V.prototype.getResultIdsOver=function(){return this._resultIdsOver},V.prototype.createResultId=function(t){return t||(t="filtRes"),t+this._counter++};var Y=function(){};e.Obj.createSubclass(Y,e.Obj),Y._counter=0,Y.createFilter=function(t,i){for(var n=e.SvgShapeUtils.createElement("filter",Y.CreateFilterId()),o=new V,r=0;r<t.length;r++){var s=t[r];s&&Y.CreateFilterPrimitives(n,s,i,o)}var a=!1;if(i){var l=i.getElem().getBBox();if(l){var h=l.width,u=l.height;if(0==u||0==h){var d;i.getStroke&&(d=i.getStroke());var c=10;d&&(c=d.getWidth());var p=l.x,_=l.y;if(e.SvgDocumentUtils.isFilterStraightLineAdjustmentNeeded()&&i instanceof e.Polyline){var g=e.ArrayUtils.copy(i.getPoints());0==h&&(g[0]=g[0]+.01),0==u&&(g[1]=g[1]+.01);var m=e.SvgShapeUtils.convertPointsArray(g);e.ToolkitUtils.setAttrNullNS(i.getElem(),"points",m)}0==u&&(u=2*c,_-=c),0==h&&(h=2*c,p-=c),e.ToolkitUtils.setAttrNullNS(n,"x",p),e.ToolkitUtils.setAttrNullNS(n,"y",_),e.ToolkitUtils.setAttrNullNS(n,"width",h),e.ToolkitUtils.setAttrNullNS(n,"height",u),e.ToolkitUtils.setAttrNullNS(n,"filterUnits","userSpaceOnUse"),a=!0}}}a||(o.getRegionPctRect().x!=-10&&"Infinity"!=o.getRegionPctRect().x&&"-Infinity"!=o.getRegionPctRect().x&&e.ToolkitUtils.setAttrNullNS(n,"x",o.getRegionPctRect().x+"%"),o.getRegionPctRect().y!=-10&&"Infinity"!=o.getRegionPctRect().y&&"-Infinity"!=o.getRegionPctRect().y&&e.ToolkitUtils.setAttrNullNS(n,"y",o.getRegionPctRect().y+"%"),120!=o.getRegionPctRect().w&&"Infinity"!=o.getRegionPctRect().w&&"-Infinity"!=o.getRegionPctRect().w&&e.ToolkitUtils.setAttrNullNS(n,"width",o.getRegionPctRect().w+"%"),120!=o.getRegionPctRect().h&&"Infinity"!=o.getRegionPctRect().h&&"-Infinity"!=o.getRegionPctRect().h&&e.ToolkitUtils.setAttrNullNS(n,"height",o.getRegionPctRect().h+"%"));var f,y,v=o.getResultIdsUnder().length,S=o.getResultIdsOver().length,C=e.SvgShapeUtils.createElement("feMerge");if(v>0)for(y=0;y<v;y++)f=e.SvgShapeUtils.createElement("feMergeNode"),e.ToolkitUtils.setAttrNullNS(f,"in",o.getResultIdsUnder()[y]),e.ToolkitUtils.appendChildElem(C,f);if(f=e.SvgShapeUtils.createElement("feMergeNode"),e.ToolkitUtils.setAttrNullNS(f,"in","SourceGraphic"),e.ToolkitUtils.appendChildElem(C,f),S>0)for(y=0;y<S;y++)f=e.SvgShapeUtils.createElement("feMergeNode"),e.ToolkitUtils.setAttrNullNS(f,"in",o.getResultIdsOver()[y]),e.ToolkitUtils.appendChildElem(C,f);return e.ToolkitUtils.appendChildElem(n,C),n},Y.CreateFilterPrimitives=function(t,i,n,o){return i instanceof e.Shadow&&Z.createFilterPrimitives(t,i,n,o),null},Y.CreateFilterId=function(){return"filt"+Y._counter++};var W=function(){};e.Obj.createSubclass(W,e.Obj),W.createElem=function(t,i){var n,o=t instanceof e.LinearGradientFill||t instanceof e.LinearGradientStroke,r=e.SvgShapeUtils.createElement(o?"linearGradient":"radialGradient",i),s=t.getColors(),a=t.getAlphas(),l=t.getStops(),h=t.getBounds(),u=s.length;for(n=0;n<u;n++){var d=e.SvgShapeUtils.createElement("stop");e.ToolkitUtils.setAttrNullNS(d,"offset",""+100*l[n]+"%");var c=s[n];if(c){var p=a[n];(e.Agent.isEnvironmentBatik()||e.Agent.isBrowserSafari())&&c.indexOf("rgba")!==-1?(e.ToolkitUtils.setAttrNullNS(d,"stop-color",e.ColorUtils.getRGB(c)),null!=p?e.ToolkitUtils.setAttrNullNS(d,"stop-opacity",e.ColorUtils.getAlpha(c)*p,1):e.ToolkitUtils.setAttrNullNS(d,"stop-opacity",e.ColorUtils.getAlpha(c),1)):(e.ToolkitUtils.setAttrNullNS(d,"stop-color",c),null!=p&&e.ToolkitUtils.setAttrNullNS(d,"stop-opacity",p,1))}e.ToolkitUtils.appendChildElem(r,d)}var _=!h||0==h[0]&&0==h[1]&&0==h[2]&&0==h[3];if(o){var g=t.getAngle(),m="0%",f="0%",y="100%",v="0%",S=!0;if(_)45===g?(f="100%",y="100%"):90===g?(f="100%",y="0%"):135===g?(m="100%",y="0%",v="100%"):270===g?(y="0%",v="100%"):0!==g&&(g=-g,e.ToolkitUtils.setAttrNullNS(r,"gradientTransform","rotate("+e.ToolkitUtils.roundDecimal(g)+" .5 .5)"),S=!1);else{e.ToolkitUtils.setAttrNullNS(r,"gradientUnits","userSpaceOnUse"),m="0",f="0.5",y="1",v="0.5";var C=h[2],E=h[3],b=h[0],T=h[1];g=-g;var A="rotate("+e.ToolkitUtils.roundDecimal(g)+" .5 .5)",O="scale("+e.ToolkitUtils.roundDecimal(C)+" "+e.ToolkitUtils.roundDecimal(E)+")",P="translate("+e.ToolkitUtils.roundDecimal(b)+" "+e.ToolkitUtils.roundDecimal(T)+")",I=O+" "+A;0==b&&0==T||(I=P+" "+I),e.ToolkitUtils.setAttrNullNS(r,"gradientTransform",I)}S&&(e.ToolkitUtils.setAttrNullNS(r,"x1",m),e.ToolkitUtils.setAttrNullNS(r,"y1",f),e.ToolkitUtils.setAttrNullNS(r,"x2",y),e.ToolkitUtils.setAttrNullNS(r,"y2",v))}else _||(e.ToolkitUtils.setAttrNullNS(r,"gradientUnits","userSpaceOnUse"),e.ToolkitUtils.setAttrNullNS(r,"cx",t.getCx()),e.ToolkitUtils.setAttrNullNS(r,"cy",t.getCy()),e.ToolkitUtils.setAttrNullNS(r,"fx",t.getCx()),e.ToolkitUtils.setAttrNullNS(r,"fy",t.getCy()),e.ToolkitUtils.setAttrNullNS(r,"r",t.getRadius()));return r};var z=function(){};e.Obj.createSubclass(z,e.Obj),z.createElem=function(t,i){var n=e.SvgShapeUtils.createElement("pattern",i),o=e.SvgShapeUtils.createElement("image",i),r=t.getSrc(),s=t.getBound();t.getRepeat();return s&&(e.ToolkitUtils.setAttrNullNS(n,"x",s.x),e.ToolkitUtils.setAttrNullNS(n,"y",s.y),e.ToolkitUtils.setAttrNullNS(o,"x",s.x),e.ToolkitUtils.setAttrNullNS(o,"y",s.y),e.ToolkitUtils.setAttrNullNS(n,"width",s.w),e.ToolkitUtils.setAttrNullNS(n,"height",s.h),e.ToolkitUtils.setAttrNullNS(o,"width",s.w),e.ToolkitUtils.setAttrNullNS(o,"height",s.h),e.ToolkitUtils.setAttrNullNS(n,"patternUnits","userSpaceOnUse"),r&&e.ToolkitUtils.setHref(o,r)),e.ToolkitUtils.appendChildElem(n,o),n};var K=function(){};e.Obj.createSubclass(K,e.Obj),K._SM_WIDTH=8,K._SM_HEIGHT=8,K._LG_WIDTH=16,K._LG_HEIGHT=16,K.createElem=function(t,i){var n,o,r=e.SvgShapeUtils.createElement("pattern",i),s=t.getPattern(),a=K.IsSmallPattern(s);a?(n=K._SM_WIDTH,o=K._SM_HEIGHT):(n=K._LG_WIDTH,o=K._LG_HEIGHT),e.ToolkitUtils.setAttrNullNS(r,"x",0),e.ToolkitUtils.setAttrNullNS(r,"y",0),e.ToolkitUtils.setAttrNullNS(r,"width",n),e.ToolkitUtils.setAttrNullNS(r,"height",o),e.ToolkitUtils.setAttrNullNS(r,"patternUnits","userSpaceOnUse");var l=t.getMatrix();if(l){var h="matrix("+l.getA()+","+l.getC()+","+l.getB()+","+l.getD()+","+l.getTx()+","+l.getTy()+")";e.ToolkitUtils.setAttrNullNS(r,"patternTransform",h)}return K.CreatePatternElems(t,r),r},K.IsSmallPattern=function(t){return"s"===t.charAt(0)},K.CreatePatternElems=function(t,i){var n,o,r,s,a,l,h,u=t.getPattern(),d=t.getColor(),c=e.ColorUtils.getRGB(d),p=e.ColorUtils.getAlpha(d),_=t.getBackgroundColor(),g=e.ColorUtils.getRGB(_),m=e.ColorUtils.getAlpha(_),f=K.IsSmallPattern(u);f?(n=K._SM_WIDTH,o=K._SM_HEIGHT,r=K._SM_WIDTH,s=K._SM_HEIGHT):(n=K._LG_WIDTH,o=K._LG_HEIGHT,r=K._LG_WIDTH,s=K._LG_HEIGHT),g&&m>0&&(h=e.SvgShapeUtils.createElement("rect"),e.ToolkitUtils.setAttrNullNS(h,"stroke",g),e.ToolkitUtils.setAttrNullNS(h,"stroke-opacity",m),e.ToolkitUtils.setAttrNullNS(h,"stroke-width",1),e.ToolkitUtils.setAttrNullNS(h,"fill",g),e.ToolkitUtils.setAttrNullNS(h,"fill-opacity",m),e.ToolkitUtils.setAttrNullNS(h,"x",0),e.ToolkitUtils.setAttrNullNS(h,"y",0),e.ToolkitUtils.setAttrNullNS(h,"width",n),e.ToolkitUtils.setAttrNullNS(h,"height",o),e.ToolkitUtils.appendChildElem(i,h)),u===e.PatternFill.SM_DIAG_UP_LT||u===e.PatternFill.LG_DIAG_UP_LT?(h=e.SvgShapeUtils.createElement("path"),e.ToolkitUtils.setAttrNullNS(h,"stroke",c),e.ToolkitUtils.setAttrNullNS(h,"stroke-opacity",p),e.ToolkitUtils.setAttrNullNS(h,"stroke-width",1),e.ToolkitUtils.setAttrNullNS(h,"stroke-linecap","square"),e.ToolkitUtils.setAttrNullNS(h,"d",e.PathUtils.moveTo(0,-s/2)+e.PathUtils.lineTo(3*r/2,s)+e.PathUtils.moveTo(-r/2,0)+e.PathUtils.lineTo(r/2,s)),e.ToolkitUtils.appendChildElem(i,h)):u===e.PatternFill.SM_DIAG_UP_RT||u===e.PatternFill.LG_DIAG_UP_RT?(h=e.SvgShapeUtils.createElement("path"),e.ToolkitUtils.setAttrNullNS(h,"stroke",c),e.ToolkitUtils.setAttrNullNS(h,"stroke-opacity",p),e.ToolkitUtils.setAttrNullNS(h,"stroke-width",1),e.ToolkitUtils.setAttrNullNS(h,"stroke-linecap","square"),e.ToolkitUtils.setAttrNullNS(h,"d",e.PathUtils.moveTo(-r/2,s)+e.PathUtils.lineTo(r,-s/2)+e.PathUtils.moveTo(0,3*s/2)+e.PathUtils.lineTo(3*r/2,0)),e.ToolkitUtils.appendChildElem(i,h)):u===e.PatternFill.SM_CROSSHATCH||u===e.PatternFill.LG_CROSSHATCH?(h=e.SvgShapeUtils.createElement("path"),e.ToolkitUtils.setAttrNullNS(h,"stroke",c),e.ToolkitUtils.setAttrNullNS(h,"stroke-opacity",p),e.ToolkitUtils.setAttrNullNS(h,"stroke-width",1),e.ToolkitUtils.setAttrNullNS(h,"d","M0,0L"+n+","+o+"M"+n+",0L0,"+o),e.ToolkitUtils.appendChildElem(i,h)):u===e.PatternFill.SM_CHECK||u===e.PatternFill.LG_CHECK?(a=r/2,l=s/2,h=e.SvgShapeUtils.createElement("path"),e.ToolkitUtils.setAttrNullNS(h,"stroke",c),e.ToolkitUtils.setAttrNullNS(h,"stroke-opacity",p),e.ToolkitUtils.setAttrNullNS(h,"stroke-width",1),e.ToolkitUtils.setAttrNullNS(h,"fill",c),e.ToolkitUtils.setAttrNullNS(h,"fill-opacity",p),e.ToolkitUtils.setAttrNullNS(h,"d","M"+a+",0L"+r+",0L"+r+","+l+"L"+a+","+l+"ZM0,"+l+"L"+a+","+l+"L"+a+","+s+"L0,"+s+"Z"),e.ToolkitUtils.appendChildElem(i,h)):u===e.PatternFill.SM_TRIANGLE_CHECK||u===e.PatternFill.LG_TRIANGLE_CHECK?(h=e.SvgShapeUtils.createElement("polygon"),e.ToolkitUtils.setAttrNullNS(h,"stroke",c),e.ToolkitUtils.setAttrNullNS(h,"stroke-opacity",p),e.ToolkitUtils.setAttrNullNS(h,"stroke-width",1),e.ToolkitUtils.setAttrNullNS(h,"fill",c),e.ToolkitUtils.setAttrNullNS(h,"fill-opacity",p),e.ToolkitUtils.setAttrNullNS(h,"points","0,"+o+" "+n+",0 "+n+","+o),e.ToolkitUtils.appendChildElem(i,h)):u!==e.PatternFill.SM_DIAMOND_CHECK&&u!==e.PatternFill.LG_DIAMOND_CHECK||(a=r/2,l=s/2,h=e.SvgShapeUtils.createElement("polygon"),e.ToolkitUtils.setAttrNullNS(h,"stroke",c),e.ToolkitUtils.setAttrNullNS(h,"stroke-opacity",p),e.ToolkitUtils.setAttrNullNS(h,"stroke-width",1),e.ToolkitUtils.setAttrNullNS(h,"fill",c),e.ToolkitUtils.setAttrNullNS(h,"fill-opacity",p),e.ToolkitUtils.setAttrNullNS(h,"points","0,"+l+" "+a+",0 "+n+","+a+" "+a+","+o),e.ToolkitUtils.appendChildElem(i,h))};var Z=function(){};return e.Obj.createSubclass(Z,e.Obj),Z.RADS_PER_DEGREE=Math.PI/180,Z.createFilter=function(t,i){var n;if(!t.isLocked()){var o=new V;n=e.SvgShapeUtils.createElement("filter",t._Id),Z.createFilterPrimitives(n,t,i,o);var r=e.SvgShapeUtils.createElement("feMerge"),s=e.SvgShapeUtils.createElement("feMergeNode");e.ToolkitUtils.setAttrNullNS(s,"in",o.getResultIdsUnder()[0]);var a=e.SvgShapeUtils.createElement("feMergeNode");e.ToolkitUtils.setAttrNullNS(a,"in","SourceGraphic"),e.ToolkitUtils.appendChildElem(n,r),e.ToolkitUtils.appendChildElem(r,s),e.ToolkitUtils.appendChildElem(r,a)}return n},Z.createFilterPrimitives=function(t,e,i,n){e._bInner?Z.CreateInnerFilterPrimitives(t,e,i,n):Z.CreateOuterFilterPrimitives(t,e,i,n)},Z.CreateOuterFilterPrimitives=function(t,i,n,o){var r=i._rgba,s=e.ColorUtils.getRed(r)/255,a=e.ColorUtils.getGreen(r)/255,l=e.ColorUtils.getBlue(r)/255,h=e.ColorUtils.getAlpha(r),u=i._strength,d=i._blurX,c=i._blurY,p=0,_=0;i._blurX>0&&(p=Math.max(i._blurX/3,1)),i._blurY>0&&(_=Math.max(i._blurY/3,1));var g=i._distance,m=i._angle,f=m*Z.RADS_PER_DEGREE,y=Math.cos(f)*g,v=Math.sin(f)*g,S=n.getDimensions(n.getParent());if(S){var C=Math.abs(g),E=2*d,b=2*d,T=2*c,A=2*c;g>0?(E-=C,T-=C,b+=C,A+=C):g<0&&(E+=C,T+=C,b-=C,A-=C),E<0&&(E=0),T<0&&(T=0),b<0&&(b=0),A<0&&(A=0);var O=E/S.w*100,P=b/S.w*100,I=T/S.h*100,D=A/S.h*100;o.getRegionPctRect().x>-O&&(o.getRegionPctRect().x=-O),o.getRegionPctRect().y>-I&&(o.getRegionPctRect().y=-I),o.getRegionPctRect().w<100+O+P&&(o.getRegionPctRect().w=100+O+P),o.getRegionPctRect().h<100+I+D&&(o.getRegionPctRect().h=100+I+D)}if(n instanceof e.Polyline){var x=n.getStroke().getWidth();x>1&&(o.getRegionPctRect().h=o.getRegionPctRect().h+x,o.getRegionPctRect().y=o.getRegionPctRect().y-x)}var M=e.SvgShapeUtils.createElement("feColorMatrix");e.ToolkitUtils.setAttrNullNS(M,"in","SourceGraphic"),e.ToolkitUtils.setAttrNullNS(M,"type","matrix"),e.ToolkitUtils.setAttrNullNS(M,"values","0 0 0 "+s+" 0 0 0 0 "+a+" 0 0 0 0 "+l+" 0 0 0 0 "+h*u+" 0");var L=e.SvgShapeUtils.createElement("feGaussianBlur"),R=p;p!==_&&(R+=" "+_),e.ToolkitUtils.setAttrNullNS(L,"stdDeviation",R);var w=o.createResultId("blur");e.ToolkitUtils.setAttrNullNS(L,"result",w);var N=e.SvgShapeUtils.createElement("feOffset");e.ToolkitUtils.setAttrNullNS(N,"dx",y),e.ToolkitUtils.setAttrNullNS(N,"dy",v),e.ToolkitUtils.setAttrNullNS(N,"in",w);var U=o.createResultId("offset");e.ToolkitUtils.setAttrNullNS(N,"result",U),o.getResultIdsUnder().push(U),e.ToolkitUtils.appendChildElem(t,M),e.ToolkitUtils.appendChildElem(t,L),e.ToolkitUtils.appendChildElem(t,N)},Z.CreateInnerFilterPrimitives=function(t,i,n,o){var r=i._rgba,s=e.ColorUtils.getRed(r)/255,a=e.ColorUtils.getGreen(r)/255,l=e.ColorUtils.getBlue(r)/255,h=e.ColorUtils.makeRGB(s,a,l),u=e.ColorUtils.getAlpha(r),d=(i._blurX,i._blurY,Math.max(i._blurX/2,1)),c=Math.max(i._blurY/2,1),p=i._distance,_=i._angle,g=i._strength,m=_*Z.RADS_PER_DEGREE,f=Math.cos(m)*p,y=Math.sin(m)*p,v=e.SvgShapeUtils.createElement("feFlood");e.ToolkitUtils.setAttrNullNS(v,"in","SourceGraphic"),e.ToolkitUtils.setAttrNullNS(v,"flood-opacity",u),e.ToolkitUtils.setAttrNullNS(v,"flood-color",h);var S=o.createResultId("flood");e.ToolkitUtils.setAttrNullNS(v,"result",S);var C=e.SvgShapeUtils.createElement("feComposite");e.ToolkitUtils.setAttrNullNS(C,"operator","out"),e.ToolkitUtils.setAttrNullNS(C,"in",S),e.ToolkitUtils.setAttrNullNS(C,"in2","SourceGraphic");var E=e.SvgShapeUtils.createElement("feGaussianBlur"),b=d;d!==c&&(b+=" "+c),e.ToolkitUtils.setAttrNullNS(E,"stdDeviation",b);var T=o.createResultId("blur");e.ToolkitUtils.setAttrNullNS(E,"result",T);var A=e.SvgShapeUtils.createElement("feColorMatrix");e.ToolkitUtils.setAttrNullNS(A,"in",T),e.ToolkitUtils.setAttrNullNS(A,"type","matrix"),e.ToolkitUtils.setAttrNullNS(A,"values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 "+g+" 0");var O=o.createResultId("colMat");e.ToolkitUtils.setAttrNullNS(A,"result",O);var P=e.SvgShapeUtils.createElement("feOffset");e.ToolkitUtils.setAttrNullNS(P,"dx",f),e.ToolkitUtils.setAttrNullNS(P,"dy",y),e.ToolkitUtils.setAttrNullNS(P,"in",O);var I=o.createResultId("offset");e.ToolkitUtils.setAttrNullNS(P,"result",I);var D=e.SvgShapeUtils.createElement("feComposite");e.ToolkitUtils.setAttrNullNS(D,"operator","in"),e.ToolkitUtils.setAttrNullNS(D,"in",I),e.ToolkitUtils.setAttrNullNS(D,"in2","SourceGraphic");var x=o.createResultId("comp");e.ToolkitUtils.setAttrNullNS(D,"result",x),o.getResultIdsOver().push(x),e.ToolkitUtils.appendChildElem(t,v),e.ToolkitUtils.appendChildElem(t,C),e.ToolkitUtils.appendChildElem(t,E),e.ToolkitUtils.appendChildElem(t,A),e.ToolkitUtils.appendChildElem(t,P),e.ToolkitUtils.appendChildElem(t,D)},e.exportProperty(e,"Agent",e.Agent),e.exportProperty(e.Agent,"setEnvironment",e.Agent.setEnvironment),e.exportProperty(e.Agent,"setHighContrast",e.Agent.setHighContrast),
e.exportProperty(e.Automation.prototype,"getDomElementForSubId",e.Automation.prototype.getDomElementForSubId),e.exportProperty(e.Automation.prototype,"getSubIdForDomElement",e.Automation.prototype.getSubIdForDomElement),e.exportProperty(e.BaseComponent.prototype,"applyOptions",e.BaseComponent.prototype.applyOptions),e.exportProperty(e.BaseComponent.prototype,"render",e.BaseComponent.prototype.render),e.exportProperty(e.BaseComponent.prototype,"highlight",e.BaseComponent.prototype.highlight),e.exportProperty(e.BaseComponent.prototype,"select",e.BaseComponent.prototype.select),e.exportProperty(e.BaseComponent.prototype,"getKeyboardFocus",e.BaseComponent.prototype.getKeyboardFocus),e.exportProperty(e,"Bundle",e.Bundle),e.exportProperty(e.Bundle,"addLocalizedStrings",e.Bundle.addLocalizedStrings),e.exportProperty(e,"Context",e.Context),e.exportProperty(e.Context,"resetCaches",e.Context.resetCaches),e.exportProperty(e.Context,"resetUniqueSeeds",e.Context.resetUniqueSeeds),e.exportProperty(e.Context.prototype,"getStage",e.Context.prototype.getStage),e.exportProperty(e.Context.prototype,"getSvgDocument",e.Context.prototype.getSvgDocument),e.exportProperty(e.Context.prototype,"hideTooltips",e.Context.prototype.hideTooltips),e.exportProperty(e.Context.prototype,"isReadyToRender",e.Context.prototype.isReadyToRender),e.exportProperty(e.Context.prototype,"setDatatipStyleClass",e.Context.prototype.setDatatipStyleClass),e.exportProperty(e.Context.prototype,"setLocaleHelpers",e.Context.prototype.setLocaleHelpers),e.exportProperty(e.Context.prototype,"setReadingDirection",e.Context.prototype.setReadingDirection),e.exportProperty(e.Context.prototype,"setOverlayAttachedCallback",e.Context.prototype.setOverlayAttachedCallback),e.exportProperty(e.Context.prototype,"setTooltipAttachedCallback",e.Context.prototype.setTooltipAttachedCallback),e.exportProperty(e.Context.prototype,"setTooltipStyleClass",e.Context.prototype.setTooltipStyleClass),e.exportProperty(e.Context.prototype,"setDefaultFontFamily",e.Context.prototype.setDefaultFontFamily),e.exportProperty(e.Context.prototype,"setDefaultFontSize",e.Context.prototype.setDefaultFontSize),e.exportProperty(e.Context.prototype,"setFixContextCallback",e.Context.prototype.setFixContextCallback),e.exportProperty(e.Context.prototype,"setCustomElement",e.Context.prototype.setCustomElement),e.exportProperty(e.Dimension.prototype,"getWidth",e.Dimension.prototype.getWidth),e.exportProperty(e.Dimension.prototype,"getHeight",e.Dimension.prototype.getHeight),e.exportProperty(e,"JsonUtils",e.JsonUtils),e.exportProperty(e.JsonUtils,"clone",e.JsonUtils.clone),e.exportProperty(e.JsonUtils,"merge",e.JsonUtils.merge),e.exportProperty(C.prototype,"addChild",C.prototype.addChild),e}()}),define("ojs/ojdvt-base",["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojvalidation-number","ojs/internal-deps/dvt/DvtToolkit","ojdnd","promise"],function(t,e,i,n,o){t.AttributeGroupHandler=function(t){this.Init(t)},t.Object.createSubclass(t.AttributeGroupHandler,t.Object,"oj.AttributeGroupHandler"),t.AttributeGroupHandler.prototype.Init=function(t){this._assignments={},this._valueIndex=0,this._matchRules={};for(var e in t)this.addMatchRule(e,t[e])},t.AttributeGroupHandler.prototype.getValueRamp=function(){return[]},t.AttributeGroupHandler.prototype.getValue=function(t){return this._matchRules[t]?this._matchRules[t]:(this._assignments[t]||(this._values||(this._values=this.getValueRamp().slice()),this._assignments[t]=this._values[this._valueIndex],this._valueIndex++,this._valueIndex==this._values.length&&(this._valueIndex=0)),this._assignments[t])},t.AttributeGroupHandler.prototype.getCategoryAssignments=function(){var t=[];for(var e in this._assignments)t.push({category:e,value:this._assignments[e]});return t},t.AttributeGroupHandler.prototype.addMatchRule=function(t,e){this._matchRules[t]=e},t.ShapeAttributeGroupHandler=function(t){this.Init(t)},t.Object.createSubclass(t.ShapeAttributeGroupHandler,t.AttributeGroupHandler,"oj.ShapeAttributeGroupHandler"),t.ShapeAttributeGroupHandler._attributeValues=["square","circle","diamond","plus","triangleDown","triangleUp","human"],t.ShapeAttributeGroupHandler.prototype.getValueRamp=function(){return t.ShapeAttributeGroupHandler._attributeValues};var r=function(t,e){this._path=e,this._root=t,this._delimiter="/"};r.prototype._resolveLeafObjectAndProperty=function(t,e,i,n){for(var o={};t&&e.indexOf(i)>-1;){var r=e.substring(0,e.indexOf(i));n&&void 0===t[r]&&(t[r]={}),t=t[r],e=e.substring(e.indexOf(i)+1,e.length)}return t&&(o.object=t,o.parameter=e),o},r.prototype._resolvePath=function(t){if(void 0===this._leaf){var e=this._resolveLeafObjectAndProperty(this._root,this._path,this._delimiter,t);this._leaf=e.object,this._param=e.parameter}},r.prototype.getValue=function(){return this._resolvePath(!1),void 0===this._leaf?void 0:this._leaf[this._param]},r.prototype.setValue=function(t,e){this._resolvePath(!0),!e&&this._leaf[this._param]||(this._leaf[this._param]=t)},t.ColorAttributeGroupHandler=function(i){if(this._attributeValues=[],e(document.body).hasClass("oj-hicontrast"))this._attributeValues=t.ColorAttributeGroupHandler._DEFAULT_COLORS.slice();else{if(!t.ColorAttributeGroupHandler._colors){var n=t.ColorAttributeGroupHandler.createAttrDiv();n&&(t.ColorAttributeGroupHandler.processAttrDiv(n),n.remove())}t.ColorAttributeGroupHandler._colors.length>0?this._attributeValues=t.ColorAttributeGroupHandler._colors.slice():this._attributeValues=t.ColorAttributeGroupHandler._DEFAULT_COLORS.slice()}this.Init(i)},t.Object.createSubclass(t.ColorAttributeGroupHandler,t.AttributeGroupHandler,"oj.ColorAttributeGroupHandler"),t.ColorAttributeGroupHandler._DEFAULT_COLORS=["#267db3","#68c182","#fad55c","#ed6647","#8561c8","#6ddbdb","#ffb54d","#e371b2","#47bdef","#a2bf39","#a75dba","#f7f37b"],t.ColorAttributeGroupHandler._STYLE_CLASSES=["oj-dvt-category1","oj-dvt-category2","oj-dvt-category3","oj-dvt-category4","oj-dvt-category5","oj-dvt-category6","oj-dvt-category7","oj-dvt-category8","oj-dvt-category9","oj-dvt-category10","oj-dvt-category11","oj-dvt-category12"],t.ColorAttributeGroupHandler._colors=null,t.ColorAttributeGroupHandler.prototype.getValueRamp=function(){return this._attributeValues},t.ColorAttributeGroupHandler.createAttrDiv=function(){if(t.ColorAttributeGroupHandler._colors)return null;var i=e(document.createElement("div"));i.attr("style","display:none;"),i.attr("id","attrGps"),e(document.body).append(i);for(var n=0;n<t.ColorAttributeGroupHandler._STYLE_CLASSES.length;n++){var o=e(document.createElement("div"));o.addClass(t.ColorAttributeGroupHandler._STYLE_CLASSES[n]),i.append(o)}return i},t.ColorAttributeGroupHandler.processAttrDiv=function(i){t.ColorAttributeGroupHandler._colors=[];for(var n=i.children(),o=0;o<n.length;o++){var r=e(n[o]),s=r.css("color");s&&t.ColorAttributeGroupHandler._colors.push(s)}};var s={CSS_TEXT_PROPERTIES:function(t){var e={};return t&&(t.hasClass("oj-gauge-metric-label")?(e["font-size"]=!0,e.color=!0):t.hasClass(t,"oj-chart-slice-label")?e.color=!0:t.hasClass("oj-treemap-node-header")&&(e["font-weight"]=!0)),s._buildTextCssPropertiesObject(t,e)},CSS_BACKGROUND_PROPERTIES:function(t,e,i,n){return s._buildCssBackgroundPropertiesObject(t)}};s._INHERITED_FONT_COLOR="rgb(254, 0, 254)",s._INHERITED_FONT_FAMILY="Times",s._INHERITED_FONT_SIZE="1px",s._INHERITED_FONT_WEIGHT="1",s._INHERITED_FONT_STYLE="normal",s._FONT_SIZE_BUFFER=4,s._styleCache={},s.defaultStyleProcessor=function(t,e){return t.css(e)},s._buildCssBackgroundPropertiesObject=function(t){var e={};return t.css("border-top-color")&&(e["border-color"]=t.css("border-top-color")),t.css("border-width")&&t.css("border-style")&&"none"!=t.css("border-style")&&(e["border-width"]=t.css("border-width")),t.css("background-color")&&(e["background-color"]=t.css("background-color")),e},s._buildTextCssPropertiesObject=function(t,e){var i={},n=t.css("font-family");return n&&n!==s._INHERITED_FONT_FAMILY&&(i["font-family"]=n.replace(/"/g,"'")),n=t.css("font-size"),!n||n.indexOf("px")>-1&&parseFloat(n)<s._FONT_SIZE_BUFFER||e["font-size"]||(i["font-size"]=n),n=t.css("font-weight"),n&&n!==s._INHERITED_FONT_WEIGHT&&!e["font-weight"]&&(i["font-weight"]=n),n=t.css("color"),n&&n!==s._INHERITED_FONT_COLOR&&!e.color&&(i.color=n),n=t.css("font-style"),n&&n!==s._INHERITED_FONT_STYLE&&(i["font-style"]=n),i},s.processStyles=function(i,n,o,r){for(var a=null,l=null,h="",u=0;u<o.length;u++)h=h+o[u]+" ";var d={},c={};for(var p in r){var _=r[p];_ instanceof Array||(_=[_]);var g=s._hasUncachedProperty(p,_);l||a||!g||(a=e(document.createElement("div")),a.attr("style","display:none;"),i.append(a),a.attr("class",h),e(document.body).append(a),l=e(document.createElement("div")),l.css("font-size",s._INHERITED_FONT_SIZE),l.css("color",s._INHERITED_FONT_COLOR),l.css("font-weight",s._INHERITED_FONT_WEIGHT),l.css("font-style",s._INHERITED_FONT_STYLE),a.append(l)),d[p]=_,g&&(c[p]=s._createStyleDivs(l,p,_))}var m=t.ColorAttributeGroupHandler.createAttrDiv();for(var p in r)s._processStyle(c[p],n,p,d[p]);m&&(t.ColorAttributeGroupHandler.processAttrDiv(m),m.remove()),a&&a.remove()},s._createStyleDivs=function(t,i,n){s._styleCache[i]||(s._styleCache[i]={});for(var o=null,r=0;r<n.length;r++){var a=n[r],l=a.property;if(l){var h=s._styleCache[i][l];"undefined"==typeof h&&(o||(o=e(document.createElement("div")),o.addClass(i),t.append(o)))}}return o},s._processStyle=function(t,e,i,n){for(var o=0;o<n.length;o++){var a=n[o],l=a.property;if(l){var h=s._styleCache[i][l];if("undefined"==typeof h&&t&&(h=s._resolveStyle(t,l),s._styleCache[i][l]=h),null!=h){var u=new r(e,a.path),d=s[l];if(null!=d){var c=u.getValue(),p="";if(null!=c){var _=s._getStyleString(c);for(var g in h)_.indexOf(g)===-1&&(p+=g+":"+h[g]+";");p+=_}else for(var g in h)p+=g+":"+h[g]+";";h=p}u.setValue(h,null!=d)}}}},s._getStyleString=function(t){if(t instanceof Object){var e="";for(var i in t){var n=i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();e+=n+":"+t[i]+";"}return e}return null!=t&&"string"==typeof t?t:""},s._resolveStyle=function(t,e){var i=s[e],n=i?i(t):s.defaultStyleProcessor(t,e);return null==n||"string"==typeof n&&""==n.replace(/^\s+/g,"")?null:n},s._hasUncachedProperty=function(t,e){var i=s._styleCache[t];if(!i)return!0;for(var n=0;n<e.length;n++){var o=e[n].property;if(o){var r=i[o];if("undefined"==typeof r)return!0}}return!1},t.__registerWidget("oj.dvtBaseComponent",e.oj.baseComponent,{_ComponentCreate:function(){this._super(),this._renderCount=0,this._numDeferredObjs=0,this._optionsCopy=null,this._templateMap={};for(var i=this._GetComponentStyleClasses(),n=0;n<i.length;n++)this.element.addClass(i[n]);this._referenceDiv=e(document.createElement("div")),this._referenceDiv.attr("style","visibility:hidden;"),this.element.append(this._referenceDiv);var r=this.element[0].parentElement;r&&r._dvtcontext?this._context=r._dvtcontext:this._context=new o.Context(this.element[0],null,this._referenceDiv[0]),this._context.setReadingDirection(this._GetReadingDirection()),this._context.setTooltipAttachedCallback(t.Components.subtreeAttached),this._context.setOverlayAttachedCallback(t.Components.subtreeAttached),this._context.setTooltipStyleClass("oj-dvt-tooltip"),this._context.setDatatipStyleClass("oj-dvt-datatip"),this._context.setFixContextCallback(this._FixRendererContext.bind(this)),this._context.setDefaultFontFamily(this._referenceDiv.css("font-family")),this._context.setCustomElement(this._IsCustomElement()),e(document.body).hasClass("oj-hicontrast")&&o.Agent.setHighContrast(!0),this._component=this._CreateDvtComponent(this._context,this._HandleEvent,this),this._context.getStage().addChild(this._component),o.requireJS!==!1&&(this._setLocaleHelpers(),this._processTranslations()),this._LoadResources(),this.options._environment="jet",this.options._widgetConstructor=t.Components.getWidgetConstructor(this.element)},_AfterCreate:function(){this._super(),"off"!=this.options.trackResize&&this._addResizeListener(),this._ProcessOptions(),this._Render()},refresh:function(){this._super(),this._context.setReadingDirection(this._GetReadingDirection()),this._processTranslations(),this._Render()},getNodeBySubId:function(t){var e=this._component&&this._component.getAutomation?this._component.getAutomation():null;if(e){var i=this._ConvertLocatorToSubId(t);return e.getDomElementForSubId(i)}return null},getSubIdByNode:function(t){var e=this._component&&this._component.getAutomation?this._component.getAutomation():null;if(e){var i=e.getSubIdForDomElement(t);return i?this._ConvertSubIdToLocator(i):null}return null},_ConvertLocatorToSubId:function(t){return null},_ConvertSubIdToLocator:function(t){return null},_ProcessStyles:function(){s.processStyles(this.element,this.options,this._GetComponentStyleClasses(),this._GetChildStyleClasses())},_GetComponentStyleClasses:function(){return["oj-dvtbase"]},_GetChildStyleClasses:function(){var t={};return t["oj-dvt-no-data-message"]={path:"_statusMessageStyle",property:"CSS_TEXT_PROPERTIES"},t},_GetEventTypes:function(){return[]},_GetTranslationMap:function(){var e=this.options.translations,i={"DvtUtilBundle.CLEAR_SELECTION":e.labelClearSelection,"DvtUtilBundle.COLON_SEP_LIST":e.labelAndValue,"DvtUtilBundle.INVALID_DATA":e.labelInvalidData,"DvtUtilBundle.NO_DATA":e.labelNoData,"DvtUtilBundle.DATA_VISUALIZATION":e.labelDataVisualization,"DvtUtilBundle.STATE_SELECTED":e.stateSelected,"DvtUtilBundle.STATE_UNSELECTED":e.stateUnselected,"DvtUtilBundle.STATE_MAXIMIZED":e.stateMaximized,"DvtUtilBundle.STATE_MINIMIZED":e.stateMinimized,"DvtUtilBundle.STATE_EXPANDED":e.stateExpanded,"DvtUtilBundle.STATE_COLLAPSED":e.stateCollapsed,"DvtUtilBundle.STATE_ISOLATED":e.stateIsolated,"DvtUtilBundle.STATE_HIDDEN":e.stateHidden,"DvtUtilBundle.STATE_VISIBLE":e.stateVisible,"DvtUtilBundle.SCALING_SUFFIX_THOUSAND":e.labelScalingSuffixThousand,"DvtUtilBundle.SCALING_SUFFIX_MILLION":e.labelScalingSuffixMillion,"DvtUtilBundle.SCALING_SUFFIX_BILLION":e.labelScalingSuffixBillion,"DvtUtilBundle.SCALING_SUFFIX_TRILLION":e.labelScalingSuffixTrillion,"DvtUtilBundle.SCALING_SUFFIX_QUADRILLION":e.labelScalingSuffixQuadrillion},n=t.LocaleData.getMonthNames("abbreviated");return i["DvtUtilBundle.MONTH_SHORT_JANUARY"]=n[0],i["DvtUtilBundle.MONTH_SHORT_FEBRUARY"]=n[1],i["DvtUtilBundle.MONTH_SHORT_MARCH"]=n[2],i["DvtUtilBundle.MONTH_SHORT_APRIL"]=n[3],i["DvtUtilBundle.MONTH_SHORT_MAY"]=n[4],i["DvtUtilBundle.MONTH_SHORT_JUNE"]=n[5],i["DvtUtilBundle.MONTH_SHORT_JULY"]=n[6],i["DvtUtilBundle.MONTH_SHORT_AUGUST"]=n[7],i["DvtUtilBundle.MONTH_SHORT_SEPTEMBER"]=n[8],i["DvtUtilBundle.MONTH_SHORT_OCTOBER"]=n[9],i["DvtUtilBundle.MONTH_SHORT_NOVEMBER"]=n[10],i["DvtUtilBundle.MONTH_SHORT_DECEMBER"]=n[11],i},_processTranslations:function(){var t=this._GetTranslationMap();o.Bundle.addLocalizedStrings(t)},_setLocaleHelpers:function(){var e={};e.numberConverterFactory=t.Validation.getDefaultConverterFactory("number"),e.dateToIsoConverter=function(e){return e instanceof Date?t.IntlConverterUtils.dateToLocalIso(e):e},e.isoToDateConverter=function(e){if("string"==typeof e){var i=t.IntlConverterUtils.isoToDate(e),n=i.toJSON()?t.IntlConverterUtils.dateToLocalIso(i):e;return t.IntlConverterUtils.isoToLocalDate(n)}return e},e.dateToIsoWithTimeZoneConverter=function(e){if(e instanceof Date){var i=-1*e.getTimezoneOffset(),n=i>=0?"+":"-",o=Math.floor(Math.abs(i)/60),r=Math.abs(i)%60,s=n+(2!==o.toString().length?"0"+o:o)+":"+(2!==r.toString().length?r+"0":r);return t.IntlConverterUtils.dateToLocalIso(e)+s}return e},this._context.setLocaleHelpers(e)},_destroy:function(){this._context.hideTooltips(),this._context=null;var t=this.element[0].parentElement;t&&t._dvtcontext&&(t._dvtcontext=null),this._component.destroy&&this._component.destroy(),this._component=null,this._removeResizeListener(),this._CleanAllTemplates(),this.element.children().remove(),this.element.removeAttr("role").removeAttr("tabIndex").removeAttr("aria-activedescendant");for(var e=this._GetComponentStyleClasses(),i=0;i<e.length;i++)this.element.removeClass(e[i]);this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null),this._super()},_setOptions:function(t,i){this._superApply(arguments);var n=this.options.trackResize;if("off"==n&&this._resizeListener?this._removeResizeListener():"off"==n||this._resizeListener||this._addResizeListener(),this._ProcessOptions(),!this._bUserDrivenChange){var o=!1,r=this._GetEventTypes(),s=["highlightedCategories","selection","dataCursorPosition"];e.each(t,function(t,e){if(r.indexOf(t)<0&&s.indexOf(t)<0)return o=!0,!1}),o?this._Render():(void 0!==t.highlightedCategories&&this._component.highlight(t.highlightedCategories),void 0!==t.selection&&this._component.select(t.selection),void 0!==t.dataCursorPosition&&this._component.positionDataCursor&&this._component.positionDataCursor(t.dataCursorPosition))}},_CreateDvtComponent:function(t,e,i){return null},_HandleEvent:function(t){var i=t.type;"selection"===i?this._UserOptionChange("selection",t.selection):"categoryHide"===i||"categoryShow"===i?this._UserOptionChange("hiddenCategories",t.hiddenCategories):"categoryHighlight"===i?this._UserOptionChange("highlightedCategories",t.categories):"optionChange"===i?this._UserOptionChange(t.key,t.value,t.optionMetadata):"touchHoldRelease"===i&&this.options.contextMenu?this._OpenContextMenu(e.Event(t.nativeEvent),"touch"):"ready"===i&&0===this._numDeferredObjs&&this._MakeReady()},_addResizeListener:function(){this._resizeListener||(this._resizeListener=this._handleResize.bind(this),t.DomUtils.addResizeListener(this.element[0],this._resizeListener,250))},_removeResizeListener:function(){this._resizeListener&&(t.DomUtils.removeResizeListener(this.element[0],this._resizeListener),this._resizeListener=null)},_handleResize:function(t,e){var i=this.element.width(),n=this.element.height();(null==this._width||null==this._height||Math.abs(i-this._width)+Math.abs(n-this._height)>=5)&&this._Render(!0)},_LoadResources:function(){},_Render:function(e){this._context.hideTooltips(),this._NotReady(),this._context.isReadyToRender()?(this._width=this._IsFlowingLayoutSupported()?null:this.element.width(),this._height=this._IsFlowingLayoutSupported()?null:this.element.height(),this.options._width=this._width,this.options._height=this._height,this.options._locale=t.Config.getLocale(),this.options.dnd&&this.element.attr("draggable",!0),this._ProcessStyles(),this._renderCount++,e?0===this._numDeferredObjs&&this._renderComponent(e):this._resolveDeferredDataItems()&&this._renderComponent(),this._renderNeeded=!1):(this._renderNeeded=!0,this._MakeReady())},_NotifyShown:function(){this._super(),this._renderNeeded&&this._Render()},_NotifyAttached:function(){this._super(),this._renderNeeded&&this._Render()},_NotifyDetached:function(){this._super(),this._context.hideTooltips()},_NotifyHidden:function(){this._super(),this._context.hideTooltips()},_UserOptionChange:function(t,e,i){this._bUserDrivenChange=!0,this.option(t,e,{_context:{writeback:!0,optionMetadata:i,internalSet:!0}}),this._bUserDrivenChange=!1},_NotifyContextMenuGesture:function(t,e,i){if("touch"!==i)if("keyboard"===i){var n=this.element[0].getBoundingClientRect(),o=this._component.getKeyboardFocus()?this._component.getKeyboardFocus().getBoundingClientRect():null,r=o?"left+"+(o.left+.5*o.width-n.left)+" top+"+(o.top+.5*o.height-n.top):"center";this._OpenContextMenu(e,i,{position:{at:r}})}else this._super(t,e,i)},_GetDvtComponent:function(e){var i=t.Components.getWidgetConstructor(e)("instance");return i?i._component:null},_GetStringFromIndexPath:function(t){for(var e="",i=0;i<t.length;i++)e+="["+t[i]+"]";return e},_GetIndexPath:function(t){for(var e=[],i=0;t.indexOf("[",i)>0;){var n=t.indexOf("[",i)+1,o=t.indexOf("]",i);e.push(Number(t.substring(n,o))),i=o+1}return e},_GetFirstIndex:function(t){return Number(this._GetFirstBracketedString(t))},_GetFirstBracketedString:function(t){var e=t.indexOf("[")+1,i=t.indexOf("]");return t.substring(e,i)},_GetComponentDeferredDataPaths:function(){return{}},_GetComponentNoClonePaths:function(){if(!this._noClonePaths){this._noClonePaths={};var t=this,e=this._GetComponentDeferredDataPaths().root;e&&e.forEach(function(e){t._noClonePaths[e]=!0})}return this._noClonePaths},_resolveDeferredDataItems:function(){this._optionsCopy=o.JsonUtils.clone(this.options,null,this._GetComponentNoClonePaths()),this._numDeferredObjs=0;var t=this,e=this._GetComponentDeferredDataPaths();for(var i in e){var n=e[i];n.forEach(function(e){if("root"===i)t._resolveDeferredDataItem.bind(t)(t.options,t._optionsCopy,e);else{var n=t.options[i];if(n)for(var o=0;o<n.length;o++)t._resolveDeferredDataItem.bind(t)(n[o],t._optionsCopy[i][o],e)}})}return 0===this._numDeferredObjs},_resolveDeferredDataItem:function(t,e,i){var n=new r(t,i),o=n.getValue();if(o instanceof Function?o=Promise.resolve(o(this._GetDataContext(t))):this._IsCustomElement()&&Array.isArray(o)&&(o=Promise.resolve(o),n.setValue(o,!0)),o instanceof Promise){var s=this._renderCount,a=this;o.then(function(t){a._renderDeferredData(s,e,i,t)},function(t){a._renderDeferredData(s,e,i,[])}),this._numDeferredObjs++}},_renderDeferredData:function(t,e,i,n){t===this._renderCount&&(this._numDeferredObjs--,new r(e,i).setValue(n,!0),0===this._numDeferredObjs&&(this._renderComponent(),this._optionsCopy=null))},_renderComponent:function(t){this._CleanAllTemplates();var e=this._IsFlowingLayoutSupported()&&this._resizeListener;e&&this._removeResizeListener(),this._component.render(t?null:this._optionsCopy,this._width,this._height),e&&this._addResizeListener(),this.element.attr("role")?this.element.attr("tabindex",0):this.element.attr("tabindex",null)},_GetDataContext:function(t){return{}},_IsFlowingLayoutSupported:function(){return!1},whenReady:function(){if(this._ready)return Promise.resolve(!0);if(!this._promise){var t=this;this._promise=new Promise(function(e){t._promiseResolve=e})}return this._promise},_NotReady:function(){if(this._ready=!1,0===this._numDeferredObjs&&!this._readyResolveFunc){var e=t.Context.getContext(this.element[0]).getBusyContext(),i={description:"The component identified by '"+this.element.attr("id")+"' is being loaded."};this._readyResolveFunc=e.addBusyState(i)}},_MakeReady:function(){this._promiseResolve&&(this._promiseResolve(!0),this._promiseResolve=null),this._ready=!0,this._promise=null,this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null)},_ProcessOptions:function(){var t=this.options.tooltip;if("function"==typeof t)this.options.tooltip={renderer:t};else if(t&&t._renderer){var e=this;this.options.tooltip={renderer:this._GetTemplateRenderer(t._renderer,"tooltip"),_templateCleanup:function(){e._CleanTemplate("tooltip")}}}},_GetTemplateRenderer:function(t,i){var n=this,o=function(o){var r=document.createElement("div");r.style.display="none",t({parentElement:r,context:o});var s=r.children[0];return s?(n._templateMap[i]||(n._templateMap[i]=[]),n._templateMap[i].push(r),r.removeChild(s),e(r).remove(),s):null};return o},_GetTemplateDataRenderer:function(t,i){var n=this,o=function(o){var r=document.createElement("div");r.style.display="none",r._dvtcontext=n._context,n.element.append(r),t({parentElement:r,data:o.data});var s=r.children[0];return s?(n._templateMap[i]||(n._templateMap[i]=[]),n._templateMap[i].push(r),"http://www.w3.org/2000/svg"===s.namespaceURI?(r.removeChild(s),e(r).remove(),s):n._GetDvtComponent(s)):null};return o},_CleanAllTemplates:function(){for(var t in this._templateMap)e(this._templateMap[t]).remove();this._templateMap={}},_CleanTemplate:function(t){this._templateMap[t]&&(e(this._templateMap[t]).remove(),this._templateMap[t]=[])}},!0),function(){var e={properties:{trackResize:{type:"string"},translations:{properties:{labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"}}}},methods:{},extension:{_WIDGET_NAME:"dvtBaseComponent"}};t.CustomElementBridge.registerMetadata("dvtBaseComponent","baseComponent",e)}()}),define("ojs",["ojs/ojdvt-base"],function(t){return t}),define("ojs/internal-deps/dvt/DvtAxis",["./DvtToolkit"],function(t){return function(t){t.Axis=function(){},t.Obj.createSubclass(t.Axis,t.BaseComponent),t.Axis.newInstance=function(e,i,n){var o=new t.Axis;return o.Init(e,i,n),o},t.Axis.getDefaults=function(t){return(new n).getDefaults(t)},t.Axis.prototype.Init=function(e,i,s){t.Axis.superclass.Init.call(this,e,i,s),this.Defaults=new n,this.EventManager=new o(this),this.EventManager.addListeners(this),t.Agent.isTouchDevice()||this.EventManager.setKeyboardHandler(new r(this.EventManager,this)),this._bounds=null},t.Axis.MINIMUM_AXIS_BUFFER=10,t.Axis.prototype.SetOptions=function(t){t?this.Options="off"==t.rendered?t:this.Defaults.calcOptions(t):this.Options||(this.Options=this.GetDefaults())},t.Axis.prototype.getPreferredSize=function(t,e,i){return this.SetOptions(t),s.getPreferredSize(this,e,i)},t.Axis.prototype.render=function(e,i,n,o,r){this.getCache().clearCache(),this.SetOptions(e),this._navigablePeers=[],this.Width=i,this.Height=n,this.removeChildren(),o||(o=0),r||(r=0);var a=new t.Rectangle(o,r,i,n);s.render(this,a)},t.Axis.prototype.__registerObject=function(t){(null!=t.getDatatip()||null!=t.getAction()||t.isDrillable())&&this._navigablePeers.push(t)},t.Axis.prototype.__getKeyboardObjects=function(){return this._navigablePeers},t.Axis.prototype.isNavigable=function(){return this._navigablePeers.length>0},t.Axis.prototype.getKeyboardFocus=function(){return null!=this.EventManager?this.EventManager.getFocus():null},t.Axis.prototype.setKeyboardFocus=function(e,i){if(null!=this.EventManager){for(var n=this.__getKeyboardObjects(),o=e.getId(),r=!1,s=0;s<n.length;s++){var a=n[s].getId();if(o instanceof Array&&a instanceof Array&&t.ArrayUtils.equals(o,a)||o===a){this.EventManager.setFocusObj(n[s]),r=!0,i&&n[s].showKeyboardFocusEffect();break}}r||this.EventManager.setFocusObj(this.EventManager.getKeyboardHandler().getDefaultNavigable(n));var l=this.getKeyboardFocus();if(l){var h=l.getDisplayable();h.setAriaProperty("label",l.getAriaLabel()),this.getCtx().setActiveElement(h)}}},t.Axis.prototype.processEvent=function(t,e){this===e&&this.dispatchEvent(t)},t.Axis.prototype.getInfo=function(){return this.Info},t.Axis.prototype.__setInfo=function(t){this.Info=t},t.Axis.prototype.getWidth=function(){return this.Width},t.Axis.prototype.getHeight=function(){return this.Height},t.Axis.prototype.__setBounds=function(t){this._bounds=t},t.Axis.prototype.__getBounds=function(){return this._bounds},t.Axis.prototype.getAutomation=function(){return new i(this)};var e={};t.Obj.createSubclass(e,t.Obj),e.TICK_LABEL="tickLabel",e.TITLE="title";var i=function(t){this._axis=t,this._options=this._axis.getOptions(),this._axisInfo=this._axis.getInfo()};t.Obj.createSubclass(i,t.Automation),i.prototype.GetSubIdForDomElement=function(i){var n=this._axis.getEventManager().GetLogicalObject(i);if(n&&n instanceof t.SimpleObjPeer){if(n.getParams().type==e.TITLE)return"title";if(this._options.groups){for(var o=n.getParams().level,r=this._axisInfo.getStartIndex(n.getParams().index,o),s="",a=0;a<=o;a++)for(var l=this._axisInfo.getLabels(this._axis.getCtx(),a),h=0;h<l.length;h++){var u=this._axisInfo.getLabelIndex(l[h]);this._axisInfo.getStartIndex(u,a)<=r&&this._axisInfo.getEndIndex(u,a)>=r&&(s+="["+this._axisInfo.getPosition(u,a)+"]")}if(s.length>0)return"item"+s}}return null},i.prototype.getDomElementForSubId=function(e){if("title"==e){var i=this._axisInfo.getTitle();if(i)return i.getElem()}else if(this._axisInfo instanceof t.GroupAxisInfo)for(var n=e.split("[").length-1,o=n-1,r=0,s=0,a=0;a<=o;a++){var l=e.indexOf("["),h=e.indexOf("]"),u=e.substring(l+1,h);e=e.substring(h+1);for(var d,c=this._axisInfo.getLabels(this._axis.getCtx(),a),p=0;p<c.length;p++)if(d=this._axisInfo.getLabelIndex(c[p]),this._axisInfo.getStartIndex(d,a)==s){r=d;break}for(var _=r;_<c.length;_++)if(d=this._axisInfo.getLabelIndex(c[_]),this._axisInfo.getPosition(d,a)==u){if(0==e.length)return c[_].getElem();s=this._axisInfo.getStartIndex(d,a);break}}return null};var n=function(){this.Init({skyros:n.VERSION_1,alta:n.SKIN_ALTA,next:n.SKIN_NEXT})};t.Obj.createSubclass(n,t.BaseComponentDefaults),n.SKIN_NEXT={skin:t.CSSStyle.SKIN_NEXT,layout:{titleGap:6}},n.SKIN_ALTA={axisLine:{lineColor:"#9E9E9E"},majorTick:{lineColor:"rgba(196,206,215,0.4)",baselineColor:"auto"},minorTick:{lineColor:"rgba(196,206,215,0.2)"},tickLabel:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA)},titleStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_12)},n.VERSION_1={position:null,baselineScaling:"zero",axisLine:{lineColor:"#8A8DAC",lineWidth:1,rendered:"on"},majorTick:{lineColor:"rgba(138,141,172,0.4)",lineWidth:1,rendered:"auto",lineStyle:"solid"},minorTick:{lineColor:"rgba(138,141,172,0.20)",lineWidth:1,rendered:"off",lineStyle:"solid"},tickLabel:{scaling:"auto",style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 11px; color: #333333;"),rotation:"auto",rendered:"on"},titleStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 11px; color: #737373;"),startGroupOffset:0,endGroupOffset:0,layout:{titleGap:4,radialLabelGap:5,insideLabelGapWidth:4,insideLabelGapHeight:2,hierarchicalLabelGapHeight:8,hierarchicalLabelGapWidth:15},_locale:"en-us"},n.getGapSize=function(e,i,n){var o=Math.min(t.TextUtils.getTextStringHeight(e,i.tickLabel.style)/14,1);return Math.ceil(n*o)};var o=function(t){this.Init(t.getCtx(),t.processEvent,t),this._axis=t};t.Obj.createSubclass(o,t.EventManager),o.getUIParams=function(t,e,i,n){return{type:t,id:e,index:i,level:n}},o.prototype.getComponent=function(){return this._axis},o.prototype.OnClick=function(t){o.superclass.OnClick.call(this,t);var e=this.GetLogicalObject(t.target);if(e){var i=this.processActionEvent(e);i&&t.stopPropagation()}},o.prototype.HandleTouchClickInternal=function(t){var e=this.GetLogicalObject(t.target);if(e){var i=t.touchEvent,n=this.processActionEvent(e);n&&i&&i.preventDefault()}},o.prototype.processActionEvent=function(e){return e&&e.getAction&&e.getAction()?(this.FireEvent(t.EventFactory.newActionEvent("action",e.getAction(),e.getId()),this._axis),!0):!!(e instanceof a&&e.isDrillable())&&(this.FireEvent(t.EventFactory.newChartDrillEvent(e.getId(),null,e.getGroup()),this._axis),!0)},o.prototype.isDndSupported=function(){return!0},o.prototype.GetDragSourceType=function(t){var e=this.DragSource.getDragObject();return e instanceof a&&null!=e.getGroup()?"groups":null},o.prototype.GetDragDataContexts=function(){var t=this.DragSource.getDragObject();return t instanceof a?[{id:t.getId(),group:t.getGroup(),label:t.getLabel().getTextString()}]:[]};var r=function(t,e){this.Init(t,e)};t.Obj.createSubclass(r,t.KeyboardHandler),r.prototype.Init=function(t,e){r.superclass.Init.call(this,t),this._axis=e},r.prototype.processKeyDown=function(e){var i=e.keyCode,n=this._eventManager.getFocus(),o=null;if(i==t.KeyboardEvent.TAB){n&&(t.EventManager.consumeEvent(e),o=n);var s=this._axis.__getKeyboardObjects();s.length>0&&(t.EventManager.consumeEvent(e),o=this.getDefaultNavigable(s))}else i==t.KeyboardEvent.ENTER?n&&(this._eventManager.processActionEvent(n),t.EventManager.consumeEvent(e)):o=r.superclass.processKeyDown.call(this,e);return o};var s=new Object;t.Obj.createSubclass(s,t.Obj),s._MAX_TITLE_LINE_WRAP=3,s.getPreferredSize=function(e,i,n){var o=s._createAxisInfo(e,new t.Rectangle(0,0,i,n)),r=e.getCtx(),a=e.getOptions(),l="top"==a.position||"bottom"==a.position;if("off"==a.rendered||i<=0||n<=0)return l?new t.Dimension(i,0):new t.Dimension(0,n);var h=s.getTitleHeight(r,a,.8*(l?i:n),.8*(l?n:i)),u=0!=h?h+s._getTitleGap(e):0;
if("on"==a.tickLabel.rendered&&"inside"!=a.tickLabel.position)if(l){var d=t.TextUtils.getTextStringHeight(r,a.tickLabel.style);o instanceof t.DataAxisInfo?u+=d:o instanceof t.TimeAxisInfo?u+=null!=o.getLabels(r,1)?2*d:d:o instanceof t.GroupAxisInfo&&(u=s._getGroupAxisPreferredSize(e,o,u,n,l))}else if(o instanceof t.DataAxisInfo)u+=t.TextUtils.getMaxTextDimensions(o.getLabels(r)).w;else if(o instanceof t.TimeAxisInfo){var c=o.getLabels(r),p=t.TextUtils.getMaxTextDimensions(c).w,_=o.getLabels(r,1),g=null!=_?t.TextUtils.getMaxTextDimensions(_).w:0;u+=Math.max(p,g)}else o instanceof t.GroupAxisInfo&&(u=s._getGroupAxisPreferredSize(e,o,u,i,l));return l?new t.Dimension(i,Math.min(u,n)):new t.Dimension(Math.min(u,i),n)},s.render=function(t,e){var i=s._createAxisInfo(t,e),n=t.getOptions();"off"!=n.rendered&&(t.__setBounds(e.clone()),s._renderBackground(t,e),s._renderTitle(t,i,e),s._renderLabels(t,i,e))},s._createAxisInfo=function(e,i){var n=t.AxisInfo.newInstance(e.getCtx(),e.getOptions(),i);return e.__setInfo(n),n},s._getTitleGap=function(t){var e=t.getOptions();return n.getGapSize(t.getCtx(),e,e.layout.titleGap)},s._renderBackground=function(e,i){var n=e.getOptions();if(n.dnd){var o=n.dnd.drop;if(Object.keys(o.xAxis).length>0||Object.keys(o.yAxis).length>0||Object.keys(o.y2Axis).length>0){var r=n.position,s="top"==r||"bottom"==r,a=s?4:10,l=s?10:4,h=new t.Rect(e.getCtx(),i.x-l,i.y-a,i.w+2*l,i.h+2*a);h.setInvisibleFill(),e.addChild(h),e.getCache().putToCache("background",h)}}},s._renderTitle=function(i,n,r){var a=i.getOptions();if(a.title){var l=a.position;if("radial"!=l&&"tangential"!=l){var h="top"==a.position||"bottom"==a.position,u=h?r.w:r.h,d=h?r.h:r.w,c=a.titleStyle,p=s.isWrapEnabled(c),_=s._createText(i.getEventManager(),i,a.title,c,0,0,u,d,o.getUIParams(e.TITLE),p);if(_){var g=s._getTitleGap(i),m=(n.getStartOverflow()-n.getEndOverflow())/2,f=t.Agent.isRightToLeft(i.getCtx()),y=t.TextUtils.getTextHeight(_);_.alignCenter(),"top"==l?(_.setX(r.x+m+r.w/2),_.setY(r.y),r.y+=y+g,r.h-=y+g):"bottom"==l?(_.setX(r.x+m+r.w/2),_.setY(r.y+r.h-y),r.h-=y+g):"left"==l?(_.alignMiddle(),_.setRotation(f?Math.PI/2:3*Math.PI/2),_.setTranslate(r.x+y/2,r.y+r.h/2),r.x+=y+g,r.w-=y+g):"right"==l&&(_.alignMiddle(),_.setRotation(f?Math.PI/2:3*Math.PI/2),_.setTranslate(r.x+r.w-y/2,r.y+r.h/2),r.w-=y+g),n.setTitle(_)}}}},s._renderLabels=function(t,e,i){var n=t.getOptions();if("on"==n.tickLabel.rendered){var o=n.position;"top"==o||"bottom"==o?s._renderLabelsHoriz(t,e,i):"tangential"==o?s._renderLabelsTangent(t,e,i):s._renderLabelsVert(t,e,i),s._renderGroupSeparators(t,e,i)}},s._renderLabelsHoriz=function(i,r,s){var l=i.getCtx(),h=i.getOptions(),u=h.position,d="inside"==h.tickLabel.position,c=t.Agent.isRightToLeft(l),p=r instanceof t.GroupAxisInfo,_=p&&r.getNumLevels()>1,g=_?0:null,m=r.getLabels(l,g);for(b=_?n.getGapSize(l,h,h.layout.hierarchicalLabelGapHeight):0;m;){for(var f=0,y=0,v=0;v<m.length;v++){var S=m[v];if(null!=S){var C=S instanceof t.MultilineText||S instanceof t.BackgroundMultilineText;if(r.isLabelRotated(g)){var E=!C||C&&!S.isWrapEnabled();if(E&&!t.TextUtils.fitText(S,s.h,s.w,i))continue;c?S.alignLeft():S.alignRight(),_?(f=t.TextUtils.getTextWidth(S),S.setTranslateY(s.h-f),y=Math.max(y,f)):S.setTranslateY(s.y)}else{if(!d&&t.TextUtils.guessTextDimensions(S).h-1>s.h)continue;if(_&&"bottom"==u?S.setY(s.h):"bottom"==u?S.setY(s.y):S.setY(s.y+s.h),!_&&("bottom"==u&&!d||"top"==u&&d)?S.alignTop():_&&"top"==u?S.alignTop():S.alignBottom(),_)y=Math.max(y,t.TextUtils.guessTextDimensions(S).h);else if(d){var b=n.getGapSize(l,h,h.layout.insideLabelGapWidth);c?S.alignRight():S.alignLeft(),S.setX(S.getX()+b*(c?-1:1))}}var T=p?r.getLabelIndex(S):v,A=r.getDatatip(T,g),O=S.getUntruncatedTextString(),P=r.getAction(T,g),I=r.isDrillable(T,g),D=r.getGroup(T,g),x=o.getUIParams(e.TICK_LABEL,S.getTextString(),T,g);i.getEventManager().associate(S,new a(i,S,D,P,I,O,A,x)),_?r.setLastRenderedLevel(g):y=Math.max(y,t.TextUtils.guessTextDimensions(S).h),i.addChild(S)}}if(_){for(v=0;v<m.length;v++)if(S=m[v],null!=S){var M=r.isLabelRotated(g),L=g<r.getNumLevels()-1;!M&&L?(S.setY(s.h-y/2),S.alignMiddle()):S.setTranslateY(s.h-y)}s.y+=y+b,s.h-=y+b,g++,m=r.getLabels(i.getCtx(),g)}else s.y+=y,s.h-=y,m=null}if(r instanceof t.TimeAxisInfo){m=r.getLabels(i.getCtx());var R=r.getLabels(i.getCtx(),1),w=0;if(null!=R)for(v=0;v<R.length;v++)if(S=R[v],null!=S&&!(t.TextUtils.guessTextDimensions(S).h-1>s.h)){i.getEventManager().associate(S,new t.SimpleObjPeer(null,null,null,o.getUIParams(e.TICK_LABEL,S.getTextString())));var N=0,U=0,B=r.getOptions()._maxOverflowCoord,H=r.getOptions()._minOverflowCoord;if(null!=m[v]&&(w=m[v].measureDimensions().w/2,N=r._level1Overflow[v],U=r._level2Overflow[v]),0==N&&0==U){var k,F=S.getX();c?(k=F+w<=B?F+w:B,S.setX(k)):(k=F-w>=H?F-w:H,S.setX(k))}else N<0?S.setX(H):N>0&&S.setX(B);S.alignTop(),S.setY(s.y),i.addChild(S)}}},s._renderLabelsVert=function(i,r,s){var l,h,u,d=i.getOptions(),c=d.position,p=i.getCtx(),_=t.Agent.isRightToLeft(p),g=r instanceof t.DataAxisInfo,m="inside"==d.tickLabel.position,f=r instanceof t.GroupAxisInfo,y=f&&r.getNumLevels()>1,v=y?0:null;l=r.getLabels(i.getCtx(),v);var S=0;y?(h=n.getGapSize(p,d,d.layout.hierarchicalLabelGapWidth),u=t.TextUtils.getMaxTextDimensions(l).w):"radial"==c?(h=n.getGapSize(p,d,d.layout.radialLabelGap),S=s.x+s.w/2,_?S+=h+t.TextUtils.getMaxTextDimensions(l).w:S-=h):"left"==c?(S=s.x+s.w,g&&m&&(S+=t.TextUtils.getMaxTextDimensions(l).w)):(S=s.x,g&&!m&&(S+=t.TextUtils.getMaxTextDimensions(l).w));for(var C=function(h,C){var E=h instanceof t.MultilineText||h instanceof t.BackgroundMultilineText,b=!E||E&&!h.isWrapEnabled();if(!(y&&t.TextUtils.getMaxTextDimensions(l).w-1>s.w)&&(y||m||!b||t.TextUtils.fitText(h,s.w,s.h,i))){C=f?r.getLabelIndex(h):C;var T=r.getDatatip(C,v),A=h.getUntruncatedTextString(),O=r.getAction(C,v),P=r.isDrillable(C,v),I=r.getGroup(C,v),D=o.getUIParams(e.TICK_LABEL,h.getTextString(),C,v);if(i.getEventManager().associate(h,new a(i,h,I,O,P,A,T,D)),y)h.alignRight(),h.setX(_?s.w:s.x+u),r.setLastRenderedLevel(v);else if(h.setX(S),g||"right"!=c?h.alignRight():h.alignLeft(),m&&(h.alignBottom(),h.setY(h.getY()-n.getGapSize(p,d,d.layout.insideLabelGapHeight))),"radial"==c){var x=h.getY();h.setY(s.y+s.h/2-x);var M=h.getDimensions(),L=.15*M.h,R=t.PathUtils.roundedRectangle(M.x-L,M.y,M.w+2*L,M.h,2,2,2,2),w=new t.Path(i.getCtx(),R),N=h.getCSSStyle().getStyle(t.CSSStyle.BACKGROUND_COLOR),U=x+M.h/2>r.getEndCoord()&&"circle"==i.getOptions().polarGridShape?1:.3;N?w.setSolidFill(N):w.setSolidFill("#FFFFFF",U),i.addChild(w)}i.addChild(h)}};l;){for(var E=0;E<l.length;E++){var b=l[E];null!=b&&C(b,E)}if(!y)break;s.x+=u+h,s.w-=u+h,v++,l=r.getLabels(i.getCtx(),v),u=l?t.TextUtils.getMaxTextDimensions(l).w:null}if(r instanceof t.TimeAxisInfo){var T=r.getLabels(i.getCtx(),1);if(null!=T)for(E=0;E<T.length;E++)b=T[E],null!=b&&C(b,E)}},s._renderLabelsTangent=function(i,n,r){for(var s=n.getLabels(i.getCtx()),l=0;l<s.length;l++){var h=s[l];if(null!=h){var u=r.w/2-Math.abs(h.getX()),d=r.h/2-Math.abs(h.getY());if(t.TextUtils.fitText(h,u,d,i)){var c=n instanceof t.GroupAxisInfo?n.getLabelIndex(h):l,p=n.getDatatip(c),_=h.getUntruncatedTextString(),g=n.getAction(c),m=n.isDrillable(c),f=n.getGroup(c),y=o.getUIParams(e.TICK_LABEL,h.getTextString(),c);i.getEventManager().associate(h,new a(i,h,f,g,m,_,p,y)),h.setTranslateX(r.x+r.w/2),h.setTranslateY(r.y+r.h/2),i.addChild(h)}}}},s._createText=function(e,i,n,o,r,a,l,h,u,d){var c;return d?(c=new t.MultilineText(i.getCtx(),n,r,a),c.setMaxLines(s._MAX_TITLE_LINE_WRAP),c.wrapText(l,h,1)):c=new t.OutputText(i.getCtx(),n,r,a),c.setCSSStyle(o),t.TextUtils.fitText(c,l,h,i)?(e.associate(c,new t.SimpleObjPeer(c.getUntruncatedTextString(),null,null,u)),c):null},s._renderGroupSeparators=function(e,i,o){if(i instanceof t.GroupAxisInfo&&i.areSeparatorsRendered()){var r=i.getNumLevels();if(r<=1||i.getLastRenderedLevel()<=0)return;for(var a,l,h,u,d,c,p=e.getOptions(),_=p.position,g="top"==_||"bottom"==_,m=e.getCtx(),f=t.Agent.isRightToLeft(m),y=i.getSeparatorColor(),v=new t.SolidStroke(y,1,1),S=0,C=g?n.getGapSize(m,p,p.layout.hierarchicalLabelGapHeight):n.getGapSize(m,p,p.layout.hierarchicalLabelGapWidth),E=p.startGroupOffset,b=p.endGroupOffset,T=i.getLastRenderedLevel();T>=0;T--){var A=i.getLabels(e.getCtx(),T),O=t.TextUtils.getMaxTextDimensions(A),P=i.isLabelRotated(T),I=P||!g?O.w:O.h;if(0!=I){var D=!1,x=null;if(T<i.getLastRenderedLevel())for(var M=0;M<A.length;M++){var L=A[M];if(null!=L){var R=i.getLabelIndex(L),w=0==i.getLabelAt(R,T).length;if(!w){var N=w&&0==T&&(0==R||R==A.length-1),U=L&&null==A[R-1],B=L&&null==A[R+1],H=i.getStartIndex(R,T),k=i.getEndIndex(R,T);if(g){if(L){var F;F=L instanceof t.MultilineText||L instanceof t.BackgroundMultilineText?L.getYAlignCoord():L.getY(),a=i.getCoordAt(H-E),l=P?F+.5*S:F-I/2-.5*S-C,h=i.getCoordAt(k+b),u=P?F+I+S+2*C:F,w&&N||0!=D||null==a||s._addSeparatorLine(e,v,a,u,a,l),null==h||N||s._addSeparatorLine(e,v,h,u,h,l)}if(!w){if(L)var G=P?t.TextUtils.getTextHeight(L):t.TextUtils.getTextWidth(L);a=U&&0==x?i.getStartCoord():i.getBoundedCoordAt(H-E),U&&(U=!1);var j=i.getLabelAt(R+1,T);if(h=B&&j&&j.length>0?i.getEndCoord():i.getBoundedCoordAt(k+b),d=L?f?L.getX()+.5*G:L.getX()-.5*G:i.getBoundedCoordAt(k+b),c=L?f?L.getX()-.5*G:L.getX()+.5*G:i.getBoundedCoordAt(H-E),L)if(P)s._addSeparatorLine(e,v,a,u,h,u);else{var V=f?.5*-t.TextUtils.getTextHeight(L):.5*t.TextUtils.getTextHeight(L),Y=f?a>d-V:a<d-V,W=f?c+V>h:c+V<h;Y&&s._addSeparatorLine(e,v,a,u,d-V,u),W&&s._addSeparatorLine(e,v,c+V,u,h,u)}}}else L&&(a=f?L.getX()-I-.5*C:L.getX()+.5*C,l=i.getCoordAt(H-E),h=f?L.getX()+.5*C:L.getX()-I-.5*C,u=i.getCoordAt(k+b),(!w&&0==D||0==R&&w&&0!=T)&&null!=l&&s._addSeparatorLine(e,v,a,l,h,l),null==u||N||s._addSeparatorLine(e,v,h,u,a,u)),w||(l=U&&0==x?0:i.getBoundedCoordAt(H-E),U&&(U=!1),j=i.getLabelAt(R+1,T),u=B&&j&&j.length>0?i.getEndCoord():i.getBoundedCoordAt(k+b),L&&s._addSeparatorLine(e,v,h,l,h,u));D=!w&&null!=L,x=null!=L||null==L&&w}}}S=I}else S=I}}},s._addSeparatorLine=function(e,i,n,o,r,s){var a=new t.Line(e.getCtx(),n,o,r,s);a.setStroke(i),a.setPixelHinting(!0),e.addChild(a)},s._getGroupAxisPreferredSize=function(e,i,o,r,s){for(var a=e.getCtx(),l=e.getOptions(),h=i.getNumLevels(),u=s?"hierarchicalLabelGapHeight":"hierarchicalLabelGapWidth",d=h>1?n.getGapSize(a,l,l.layout[u]):0,c=0;c<h;c++){var p,_=i.getLabels(a,c);if(s){var g=t.TextUtils.getMaxTextDimensions(_);p=i.isLabelRotated(c)?g.w:g.h}else p=t.TextUtils.getMaxTextDimensions(_).w;if(!(o+p<=r)){0==c&&(o=r);break}o+=p+d}return 0!=c&&(o-=d),o},s.getTitleHeight=function(e,i,n,o){var r=0;if(i.title)if(s.isWrapEnabled(i.titleStyle)){var a=new t.MultilineText(e,i.title,0,0);a.setMaxLines(s._MAX_TITLE_LINE_WRAP),a.setCSSStyle(i.titleStyle),a.wrapText(n,o,1),r=a.getDimensions().h}else r=t.TextUtils.getTextStringHeight(e,i.titleStyle);return r},s.isWrapEnabled=function(e){var i=e.getStyle(t.CSSStyle.WHITE_SPACE);return"nowrap"!=i&&"noWrap"!=i},t.AxisInfo=function(){},t.Obj.createSubclass(t.AxisInfo,t.Obj),t.AxisInfo.newInstance=function(e,i,n){return i.timeAxisType&&"disabled"!=i.timeAxisType?new t.TimeAxisInfo(e,i,n):i._isGroupAxis?new t.GroupAxisInfo(e,i,n):new t.DataAxisInfo(e,i,n)},t.AxisInfo.prototype.Init=function(e,i,n){this._context=e,this.Position=i.position,this._radius=i._radius,this._title=null,"top"==this.Position||"bottom"==this.Position?(this.StartCoord=n.x,this.EndCoord=n.x+n.w):"left"==this.Position||"right"==this.Position?(this.StartCoord=n.y,this.EndCoord=n.y+n.h):"radial"==this.Position?(this.StartCoord=0,this.EndCoord=this._radius):"tangential"==this.Position&&(t.Agent.isRightToLeft(e)?(this.StartCoord=2*Math.PI,this.EndCoord=0):(this.StartCoord=0,this.EndCoord=2*Math.PI)),this.MinValue=null,this.MaxValue=null,this.GlobalMin=null,this.GlobalMax=null,this.DataMin=null,this.DataMax=null,this.MinViewportExtent=null,this.StartOverflow=0,this.EndOverflow=0,null==i.leftBuffer&&(i.leftBuffer=1/0),null==i.rightBuffer&&(i.rightBuffer=1/0),this.Options=i},t.AxisInfo.prototype.getCtx=function(){return this._context},t.AxisInfo.prototype.getOptions=function(){return this.Options},t.AxisInfo.prototype.getLabels=function(t,e){return null},t.AxisInfo.prototype.getTitle=function(){return this._title},t.AxisInfo.prototype.setTitle=function(t){this._title=t},t.AxisInfo.prototype.getMajorTickCoords=function(){return[]},t.AxisInfo.prototype.getMinorTickCoords=function(){return[]},t.AxisInfo.prototype.getBaselineCoord=function(){return null},t.AxisInfo.prototype.getValueAt=function(t){if(null==t)return null;var e=Math.min(this.StartCoord,this.EndCoord),i=Math.max(this.StartCoord,this.EndCoord);return t<e||t>i?null:this.getUnboundedValueAt(t)},t.AxisInfo.prototype.getCoordAt=function(t){return null==t?null:t<this.MinValue||t>this.MaxValue?null:this.getUnboundedCoordAt(t)},t.AxisInfo.prototype.getBoundedValueAt=function(t){if(null==t)return null;var e=Math.min(this.StartCoord,this.EndCoord),i=Math.max(this.StartCoord,this.EndCoord);return t<e?t=e:t>i&&(t=i),this.getUnboundedValueAt(t)},t.AxisInfo.prototype.getBoundedCoordAt=function(t){return null==t?null:(t<this.MinValue?t=this.MinValue:t>=this.MaxValue&&(t=this.MaxValue),this.getUnboundedCoordAt(t))},t.AxisInfo.prototype.getUnboundedValueAt=function(t){return null},t.AxisInfo.prototype.getUnboundedCoordAt=function(t){return null},t.AxisInfo.prototype.getDatatip=function(t,e){return null},t.AxisInfo.prototype.getLabelBackground=function(t,e){return null},t.AxisInfo.prototype.getAction=function(t){return null},t.AxisInfo.prototype.isDrillable=function(t){return null},t.AxisInfo.prototype.getBaselineCoord=function(){return null},t.AxisInfo.prototype.isLabelRotated=function(){return!1},t.AxisInfo.prototype.CreateLabel=function(e,i,n,o,r){var s;if("tangential"==this.Position){var a=16/180*Math.PI,l=1/180*Math.PI,h=.5*this.getTickLabelHeight(),u=this._radius+h;(n<l||n>2*Math.PI-l)&&(u+=h);var d=Math.round(u*Math.sin(n)),c=Math.round(-u*Math.cos(n));s=o?new t.BackgroundOutputText(e,i,d,c,o):new t.OutputText(e,i,d,c),n<l||Math.abs(n-Math.PI)<l||n>2*Math.PI-l?s.alignCenter():n<Math.PI?s.alignLeft():s.alignRight(),Math.abs(n-Math.PI/2)<a||Math.abs(n-3*Math.PI/2)<a?s.alignMiddle():n<Math.PI/2||n>3*Math.PI/2?s.alignBottom():s.alignTop()}else r?s=o?new t.BackgroundMultilineText(e,i,n,n,o):new t.MultilineText(e,i,n,n):(s=o?new t.BackgroundOutputText(e,i,n,n,o):new t.OutputText(e,i,n,n),s.alignMiddle()),s.alignCenter();return(s instanceof t.OutputText||s instanceof t.MultilineText)&&s.setCSSStyle(this.Options.tickLabel.style),s},t.AxisInfo.prototype.IsOverlapping=function(e,i){if(!e||e.length<=0)return!1;for(var n,o,r,s,a="left"==this.Position||"right"==this.Position||"radial"==this.Position,l=t.Agent.isRightToLeft(this.getCtx()),h=this.GetTickLabelGapSize(),u=0;u<e.length;u+=i+1)if(null!=e[u])if(null!=n&&null!=o){if(a){if(r=e[u].y,s=e[u].y+e[u].h,r>=n&&r-h<o)return!0;if(r<n&&s+h>n)return!0}else{if(r=e[u].x,s=e[u].x+e[u].w,!l&&r-h<o)return!0;if(l&&s+h>n)return!0}n=r,o=s}else a?(n=e[u].y,o=e[u].y+e[u].h):(n=e[u].x,o=e[u].x+e[u].w);return!1},t.AxisInfo.prototype.IsOverlappingDims=function(t,e){if(!t||!e)return!1;var i=t.y,n=t.y+t.h,o=t.x,r=t.x+t.w,s=e.y,a=e.y+e.h,l=e.x,h=e.x+e.w,u=o<=l&&l<=r||o<=h&&h<=r||l<=o&&o<=h||l<=r&&r<=h,d=s>=i&&s<n||s<=i&&a>=i;return u&&d},t.AxisInfo.prototype.GetTickLabelGapSize=function(){var e=this.getTickLabelHeight(),i=this instanceof t.GroupAxisInfo?.24*e:.79*e,n=this instanceof t.GroupAxisInfo?.08*e:.28*e,o="left"==this.Position||"right"==this.Position||"radial"==this.Position;return o||this.isLabelRotated()?n:i},t.AxisInfo.prototype.getTickLabelHeight=function(){return t.TextUtils.getTextStringHeight(this.getCtx(),this.Options.tickLabel.style)},t.AxisInfo.prototype.SkipLabels=function(t,e){for(var i=0,n=this.IsOverlapping(e,i);n;)i++,n=this.IsOverlapping(e,i);if(i>0){for(var o=[],r=0;r<t.length;r+=i+1)o.push(t[r]);return o}return t},t.AxisInfo.prototype.SkipTangentialLabels=function(t,e){var i=[],n=t.length,o=null;if(n>1){for(var r,s=0;s<n;s++)e[s]&&(!r||r&&!this.IsOverlappingDims(r,e[s]))&&(o||(o=e[s]),i.push(t[s]),r=e[s]);return this.IsOverlappingDims(r,o)&&i.pop(),i}return t},t.AxisInfo.prototype.GetLabelDims=function(t,e){for(var i=[],n=0;n<t.length;n++){var o=t[n];if(null==o)i.push(null);else{var r=o.measureDimensions(e);r.w&&r.h?i.push(r):i.push(null)}}return i},t.AxisInfo.prototype.GuessLabelDims=function(e,i,n,o){var r=[];"undefined"==typeof n&&(n=1);for(var s=0;s<e.length;s++){var a=e[s];if(null==a)r.push(null);else{i.addChild(a);var l=t.TextUtils.guessTextDimensions(a),h=l.w*n,u=l.h;i.removeChild(a);var d;d=this.isLabelRotated(o)?new t.Rectangle(a.getTranslateX()-u/2,a.getTranslateY()-h/2,u,h):new t.Rectangle(a.getX()-h/2,a.getY()-u/2,h,u),r.push(d)}}return r},t.AxisInfo.prototype.getMajorTickCount=function(){return null},t.AxisInfo.prototype.getMinorTickCount=function(){return null},t.AxisInfo.prototype.getMajorIncrement=function(){return null},t.AxisInfo.prototype.getMinorIncrement=function(){return null},t.AxisInfo.prototype.getGlobalMin=function(){return this.GlobalMin},t.AxisInfo.prototype.getGlobalMax=function(){return this.GlobalMax},t.AxisInfo.prototype.getViewportMin=function(){return this.MinValue},t.AxisInfo.prototype.getViewportMax=function(){return this.MaxValue},t.AxisInfo.prototype.getDataMin=function(){return this.DataMin},t.AxisInfo.prototype.getDataMax=function(){return this.DataMax},t.AxisInfo.prototype.getMinimumExtent=function(){return 0},t.AxisInfo.prototype.getStartCoord=function(){return this.StartCoord},t.AxisInfo.prototype.getEndCoord=function(){return this.EndCoord},t.AxisInfo.prototype.getStartOverflow=function(){return this.StartOverflow},t.AxisInfo.prototype.getEndOverflow=function(){return this.EndOverflow},t.AxisInfo.prototype.getGroupWidth=function(){return 0},t.AxisInfo.prototype.getGroup=function(t,e){return null},t.AxisInfo.prototype.linearToActual=function(t){return t},t.AxisInfo.prototype.actualToLinear=function(t){return t},t.DataAxisInfo=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.DataAxisInfo,t.AxisInfo),t.DataAxisInfo._MAX_NUMBER_OF_GRIDS_AUTO=10,t.DataAxisInfo._MINOR_TICK_COUNT=2,t.DataAxisInfo._MAX_ZOOM_FACTOR=64,t.DataAxisInfo.prototype.Init=function(e,i,n){t.DataAxisInfo.superclass.Init.call(this,e,i,n),"top"==this.Position||"bottom"==this.Position?("off"!=i.tickLabel.rendered&&"off"!=i.rendered&&(this.StartOverflow=Math.max(t.Axis.MINIMUM_AXIS_BUFFER-i.leftBuffer,0),this.EndOverflow=Math.max(t.Axis.MINIMUM_AXIS_BUFFER-i.rightBuffer,0)),t.Agent.isRightToLeft(e)?(this._minCoord=this.EndCoord-this.EndOverflow,this._maxCoord=this.StartCoord+this.StartOverflow):(this._minCoord=this.StartCoord+this.StartOverflow,this._maxCoord=this.EndCoord-this.EndOverflow)):"tangential"==this.Position||"radial"==this.Position?(this._minCoord=this.StartCoord,this._maxCoord=this.EndCoord):(this._minCoord=this.EndCoord,this._maxCoord=this.StartCoord),this.DataMin=i.dataMin,this.DataMax=i.dataMax,this._isLog="log"==i.scale&&this.DataMin>0&&this.DataMax>0,this._globalMin=this.actualToLinear(i.min),this._globalMax=this.actualToLinear(i.max),this._minValue=null==i.viewportMin?this._globalMin:this.actualToLinear(i.viewportMin),this._maxValue=null==i.viewportMax?this._globalMax:this.actualToLinear(i.viewportMax),this._dataMin=this.actualToLinear(this.DataMin),this._dataMax=this.actualToLinear(this.DataMax),this._majorIncrement=this.actualToLinear(i.step),this._minorIncrement=this.actualToLinear(i.minorStep),this._minMajorIncrement=this.actualToLinear(i.minStep),this._majorTickCount=i._majorTickCount,this._minorTickCount=i._minorTickCount,this._zeroBaseline=!this._isLog&&"zero"==i.baselineScaling,this._converter=null,null!=i.tickLabel&&(this._converter=i.tickLabel.converter),this._calcAxisExtents(),this.GlobalMin=this.linearToActual(this._globalMin),this.GlobalMax=this.linearToActual(this._globalMax),this.MinValue=this.linearToActual(this._minValue),this.MaxValue=this.linearToActual(this._maxValue)},t.DataAxisInfo.prototype.getMinLabel=function(){return this._zeroBaseline||"on"==this.Options._continuousExtent&&null==this.Options.min?Math.ceil(this._minValue/this._majorIncrement)*this._majorIncrement:Math.ceil((this._minValue-this._globalMin)/this._majorIncrement)*this._majorIncrement+this._globalMin},t.DataAxisInfo.prototype.getLabels=function(e,i){if(i&&i>0)return null;var n=[],o=[],r=e.getStage();if(this.Options.tickLabel&&this.Options.tickLabel.scaling){var s=this.Options.tickLabel.autoPrecision?this.Options.tickLabel.autoPrecision:"on";this._axisValueFormatter=new t.LinearScaleAxisValueFormatter(e,this._minValue,this._maxValue,this._majorIncrement,this.Options.tickLabel.scaling,s)}for(var a=0;a<=this._majorTickCount;a++){var l=a*this._majorIncrement+this.getMinLabel();if(l>this._maxValue)break;var h=this._getUnboundedCoordAt(l);if(this.Options._skipHighestTick){if(l==this._maxValue)continue;if("tangential"!=this.Position&&Math.abs(h-this._maxCoord)<this.getTickLabelHeight())continue}var u;this._isLog?(l=this.linearToActual(l),this._axisValueFormatter=new t.LinearScaleAxisValueFormatter(e,l,l,l,this.Options.tickLabel.scaling,s),u=this._formatValue(l)):u=this._formatValue(l);var d=this.CreateLabel(e,u,h);n.push(d)}return"tangential"!=this.Position&&(o=this.GetLabelDims(n,r),n=this.SkipLabels(n,o)),n},t.DataAxisInfo.prototype.getMajorTickCoords=function(){for(var t=[],e=0;e<=this._majorTickCount;e++){var i=e*this._majorIncrement+this.getMinLabel();if(i>this._maxValue)break;if(!this.Options._skipHighestTick||i!=this._maxValue){var n=this._getUnboundedCoordAt(i);t.push(n)}}return t},t.DataAxisInfo.prototype.getMinorTickCoords=function(){for(var e=[],i=-1;i<=this._majorTickCount;i++){var n=i*this._majorIncrement+this.getMinLabel();if(this._isLog&&1==this._majorIncrement&&1==this._minorIncrement)for(var o=2;o<=9;o++){var r=n+t.Math.log10(o);if(r>this._maxValue)break;r<this._minValue||(a=this._getUnboundedCoordAt(r),e.push(a))}else for(var o=1;o<this._minorTickCount;o++){var s=n+o*this._minorIncrement;if(s>this._maxValue)break;if(!(s<this._minValue)){var a=this._getUnboundedCoordAt(s);e.push(a)}}}return e},t.DataAxisInfo.prototype.getBaselineCoord=function(){return this._isLog?this._minCoord:this.getBoundedCoordAt(0)},t.DataAxisInfo.prototype.getUnboundedValueAt=function(t){if(null==t)return null;var e=(t-this._minCoord)/(this._maxCoord-this._minCoord),i=this._minValue+e*(this._maxValue-this._minValue);return this.linearToActual(i)},t.DataAxisInfo.prototype.getUnboundedCoordAt=function(t){return this._getUnboundedCoordAt(this.actualToLinear(t))},t.DataAxisInfo.prototype._getUnboundedCoordAt=function(t){if(null==t)return null;var e=(t-this._minValue)/(this._maxValue-this._minValue);return e=Math.max(Math.min(1e3,e),-1e3),this._minCoord+e*(this._maxCoord-this._minCoord)},t.DataAxisInfo.prototype._formatValue=function(e){if(!this._converter||!this._converter.getAsString&&!this._converter.format){if(this._axisValueFormatter)return this._axisValueFormatter.format(e);var i=t.Math.log10(this._majorIncrement),n=Math.max(Math.ceil(-i),0);return e.toFixed(n)}return this._axisValueFormatter?this._axisValueFormatter.format(e,this._converter):this._converter.getAsString?this._converter.getAsString(e):this._converter.format?this._converter.format(e):void 0},t.DataAxisInfo.prototype._calcMajorMinorIncr=function(e){this._majorIncrement||(this._majorTickCount?this._majorIncrement=(this._maxValue-this._minValue)/this._majorTickCount:this._majorIncrement=Math.max(e,this._minMajorIncrement)),this._majorTickCount||(this._majorTickCount=(this._maxValue-this._minValue)/this._majorIncrement),this._minorTickCount||(this._minorIncrement?this._minorTickCount=this._majorIncrement/this._minorIncrement:this._isLog?this._minorTickCount=this._majorIncrement:this._minorTickCount=t.DataAxisInfo._MINOR_TICK_COUNT),this._minorIncrement||(this._minorIncrement=this._majorIncrement/this._minorTickCount)},t.DataAxisInfo.prototype._calcAxisExtents=function(){var e="on"==this.Options._continuousExtent;this._zeroBaseline&&(this._dataMin=Math.min(0,this._dataMin),this._dataMax=Math.max(0,this._dataMax));var i=this._calcAxisScale(null!=this._globalMin?this._globalMin:this._dataMin,null!=this._globalMax?this._globalMax:this._dataMax);i=Math.max(i,this._minMajorIncrement),this._dataMin==this._dataMax&&(0==this._dataMin?this._dataMax+=5*i:(this._dataMin-=2*i,this._dataMax+=2*i)),null==this._globalMin&&(this._zeroBaseline&&this._dataMin>=0?this._globalMin=0:e?this._globalMin=this._dataMin-.1*(this._dataMax-this._dataMin):this._zeroBaseline||null==this._globalMax?this._globalMin=(Math.ceil(this._dataMin/i)-1)*i:(this._globalMin=this._globalMax,this._globalMin-=i*(Math.floor((this._globalMin-this._dataMin)/i)+1)),this._dataMin>=0&&(this._globalMin=Math.max(this._globalMin,0))),null==this._globalMax&&(this._majorTickCount?this._globalMax=this._globalMin+this._majorTickCount*i:this._zeroBaseline&&this._dataMax<=0?this._globalMax=0:e?this._globalMax=this._dataMax+.1*(this._dataMax-this._dataMin):this._zeroBaseline?this._globalMax=(Math.floor(this._dataMax/i)+1)*i:(this._globalMax=this._globalMin,this._globalMax+=i*(Math.floor((this._dataMax-this._globalMax)/i)+1)),this._dataMax<=0&&(this._globalMax=Math.min(this._globalMax,0))),this._globalMax==this._globalMin&&(this._globalMax=100,this._globalMin=0,i=(this._globalMax-this._globalMin)/t.DataAxisInfo._MAX_NUMBER_OF_GRIDS_AUTO),null==this._minValue&&(this._minValue=this._globalMin),null==this._maxValue&&(this._maxValue=this._globalMax),this._minValue==this._globalMin&&this._maxValue==this._globalMax||(i=this._calcAxisScale(this._minValue,this._maxValue)),this._globalMin>this._minValue&&(this._globalMin=this._minValue),this._globalMax<this._maxValue&&(this._globalMax=this._maxValue),this._calcMajorMinorIncr(i)},t.DataAxisInfo.prototype._calcAxisScale=function(e,i){if(this._majorIncrement)return this._majorIncrement;var n=i-e;if(this._isLog)return Math.floor(n/8)+1;if(0==n)return 0==e?10:Math.pow(10,Math.floor(t.Math.log10(e))-1);if(this._majorTickCount){var o=n/this._majorTickCount,r=Math.pow(10,Math.ceil(t.Math.log10(o)-1)),s=o/r;return s=s>1&&s<=1.5?1.5:s>5?10:Math.ceil(s),s*r}var a=t.Math.log10(n),r=Math.pow(10,Math.ceil(a)-2),l=Math.round(n/r),h=1;return h=l>=10&&l<=14?2:l>=15&&l<=19?3:l>=20&&l<=24?4:l>=25&&l<=45?5:l>=46&&l<=80?10:20,h*r},t.DataAxisInfo.prototype.getMajorTickCount=function(){return this._majorTickCount},t.DataAxisInfo.prototype.getMinorTickCount=function(){return this._minorTickCount},t.DataAxisInfo.prototype.getMajorIncrement=function(){return this.linearToActual(this._majorIncrement)},t.DataAxisInfo.prototype.getMinorIncrement=function(){return this.linearToActual(this._minorIncrement)},t.DataAxisInfo.prototype.getMinimumExtent=function(){return(this._globalMax-this._globalMin)/t.DataAxisInfo._MAX_ZOOM_FACTOR},t.DataAxisInfo.prototype.getStartOverflow=function(){return"top"!=this.Position&&"bottom"!=this.Position||!t.Agent.isRightToLeft(this.getCtx())?this.StartOverflow:this.EndOverflow},t.DataAxisInfo.prototype.getEndOverflow=function(){return"top"!=this.Position&&"bottom"!=this.Position||!t.Agent.isRightToLeft(this.getCtx())?this.EndOverflow:this.StartOverflow},t.DataAxisInfo.prototype.linearToActual=function(t){return null==t?null:this._isLog?Math.pow(10,t):t},t.DataAxisInfo.prototype.actualToLinear=function(e){return null==e?null:this._isLog?e>0?t.Math.log10(e):null:e},t.GroupAxisInfo=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.GroupAxisInfo,t.AxisInfo),t.GroupAxisInfo._MAX_LINE_WRAP=3,t.GroupAxisInfo._ROTATE_THRESHOLD=12,t.GroupAxisInfo.prototype.Init=function(e,i,o){t.GroupAxisInfo.superclass.Init.call(this,e,i,o);var r=t.Agent.isRightToLeft(e),a="top"==this.Position||"bottom"==this.Position;if(a&&r){var l=this.StartCoord;this.StartCoord=this.EndCoord,this.EndCoord=l}this._levelsArray=[],this._groupCount=this._generateLevelsArray(i.groups,0,this._levelsArray,0),this._numLevels=this._levelsArray.length,this._areSeparatorsRendered="on"==i.groupSeparators.rendered,this._separatorColor=i.groupSeparators.color,this._lastRenderedLevel=null,this._drilling=i.drilling;var h=i.endGroupOffset>0?Number(i.endGroupOffset):0,u=i.startGroupOffset>0?Number(i.startGroupOffset):0;this.DataMin=0,this.DataMax=this._groupCount-1,this.GlobalMin=null==i.min?this.DataMin-u:i.min,this.GlobalMax=null==i.max?this.DataMax+h:i.max;var d=this.getGroupIndex(i.viewportStartGroup),c=this.getGroupIndex(i.viewportEndGroup);d!=-1&&(this.MinValue=d-u),c!=-1&&(this.MaxValue=c+h),null!=i.viewportMin&&(this.MinValue=i.viewportMin),null!=i.viewportMax&&(this.MaxValue=i.viewportMax),null==this.MinValue&&(this.MinValue=this.GlobalMin),null==this.MaxValue&&(this.MaxValue=this.GlobalMax),this.GlobalMin>this.MinValue&&(this.GlobalMin=this.MinValue),this.GlobalMax<this.MaxValue&&(this.GlobalMax=this.MaxValue),this._groupWidthRatios=i._groupWidthRatios,this._processGroupWidthRatios(),this._startBuffer=r?i.rightBuffer:i.leftBuffer,this._endBuffer=r?i.leftBuffer:i.rightBuffer,this._isLabelRotated=[];for(var p=0;p<this._numLevels;p++)this._isLabelRotated.push(!1);if(this._renderGridAtLabels=i._renderGridAtLabels,this._labels=null,this._maxSpace=a?o.h:o.w,"off"!=i.rendered){var _=s.getTitleHeight(e,i,a?o.w:o.h,a?o.h:o.w);this._maxSpace-=0!=_?_+n.getGapSize(e,i,i.layout.titleGap):0}this._maxLineWrap=t.GroupAxisInfo._MAX_LINE_WRAP},t.GroupAxisInfo.prototype._processGroupWidthRatios=function(){if(!this._groupWidthRatios||this._groupWidthRatios.length<2)return void(this._groupWidthRatios=null);for(var e,i,n=0,o=0;o<this._groupCount;o++)e=0==o?this.MinValue:Math.max(o-.5,this.MinValue),i=o==this._groupCount-1?this.MaxValue:Math.min(o+.5,this.MaxValue),i>e&&(n+=(i-e)*this._groupWidthRatios[o]);var r=this.EndCoord-this.StartCoord;this._groupWidths=t.ArrayUtils.map(this._groupWidthRatios,function(t){return t*r/n}),this._borderValues=[];for(var o=0;o<this._groupWidthRatios.length-1;o++)this._borderValues.push(o+.5);this._borderCoords=[];var s=Math.min(Math.max(Math.round(this.MinValue),0),this._borderValues.length-1);this._borderCoords[s]=this.StartCoord+(this._borderValues[s]-this.MinValue)*this._groupWidths[s];for(var o=s+1;o<this._borderValues.length;o++)this._borderCoords[o]=this._borderCoords[o-1]+this._groupWidths[o];for(var o=s-1;o>=0;o--)this._borderCoords[o]=this._borderCoords[o+1]-this._groupWidths[o+1]},t.GroupAxisInfo.prototype._rotateLabels=function(e,i,n,o){var r,a,l=this.getCtx(),h=t.Agent.isRightToLeft(l),u=this._numLevels>1;null==o&&(o=this._numLevels-1),this._isLabelRotated[o]=!0,u||this._setOverflow(n,n,e);for(var d=0;d<e.length;d++)if(r=e[d],null!=r){a=r.getX();var c=r instanceof t.MultilineText||r instanceof t.BackgroundMultilineText;if(c){var p=this.getGroupWidth()*(this.getEndIndex(d,o)-this.getStartIndex(d,o)+1);2*r.getLineHeight()<p&&this._maxSpace>0?r.wrapText(this._maxSpace,r.getLineHeight()*t.GroupAxisInfo._MAX_LINE_WRAP,1):r.setWrapEnabled(!1)}r.setX(0),r.setY(0),h?r.setRotation(Math.PI/2):r.setRotation(3*Math.PI/2),r.setTranslateX(a)}var _=this.GuessLabelDims(e,i,null,o);if(s.isWrapEnabled(this.Options.tickLabel.style)&&this._maxSpace>0){var g=this._sanitizeWrappedText(l,_,e,!0,u);g&&(_=this.GuessLabelDims(e,i,null,o))}return this.SkipLabels(e,_)},t.GroupAxisInfo.prototype._sanitizeWrappedText=function(e,i,o,r,s){for(var a=this._calculateMaxWrap(i,o,r),l=0,h=0;h<o.length;h++){var u=o[h];if(u){var d=u instanceof t.MultilineText||u instanceof t.BackgroundMultilineText;a&&d&&u.isWrapEnabled()&&u.wrapText(this._maxSpace,u.getLineHeight()*this._maxLineWrap,1),s&&(l=Math.max(l,t.TextUtils.getTextWidth(u))),u.alignMiddle()}}if(s){var c=r?this.Options.layout.hierarchicalLabelGapHeight:this.Options.layout.hierarchicalLabelGapWidth;this._maxSpace-=l+n.getGapSize(e,this.Options,c)}return a},t.GroupAxisInfo.prototype._calculateMaxWrap=function(e,i,n){for(var o=!1;this.IsOverlapping(e,0)&&this._maxLineWrap>1;){o=!0;for(var r=0;r<i.length;r++){var s=i[r];if((s instanceof t.MultilineText||s instanceof t.BackgroundMultilineText)&&s.getLineCount()==this._maxLineWrap){
var a=s.getLineHeight();n?e[r].w-=a:(e[r].y+=.5*a,e[r].h-=a)}}this._maxLineWrap--}return o},t.GroupAxisInfo.prototype.isLabelRotated=function(t){return null==t&&(t=this._numLevels-1),this._isLabelRotated[t]},t.GroupAxisInfo.prototype._setOverflow=function(e,i,n){e=Math.max(e-this._startBuffer,0),i=Math.max(i-this._endBuffer,0);var o=t.Agent.isRightToLeft(this.getCtx());this.StartCoord+=(e-this.StartOverflow)*(o?-1:1),this.EndCoord-=(i-this.EndOverflow)*(o?-1:1),this._processGroupWidthRatios();for(var r=0;r<this._numLevels;r++){n=this._labels[r];for(var s=0;s<n.length;s++){var a=n[s];if(a){var l=this._getLabelCoord(r,this.getLabelIndex(a));a.setX(l)}}}this.StartOverflow=e,this.EndOverflow=i},t.GroupAxisInfo.prototype.getLabels=function(t,e){return null==e&&(e=this._numLevels-1),this._labels||this._generateLabels(t),this._labels[e]},t.GroupAxisInfo.prototype._getLabelCoord=function(t,e){var i=this.getStartIndex(e,t),n=this.getEndIndex(e,t);if(null==i||null==n)return null;i<this.MinValue&&n>this.MinValue&&(i=this.MinValue),n>this.MaxValue&&i<this.MaxValue&&(n=this.MaxValue);var o=n?i+(n-i)/2:i;return this.getCoordAt(o)},t.GroupAxisInfo.prototype._generateLabels=function(e){var i=[];this._labels=[];for(var o,r,a,l,h,u=e.getStage(),d="top"==this.Position||"bottom"==this.Position,c=t.Agent.isRightToLeft(e),p=this._numLevels>1,_=this.getGroupWidth(),g=this._maxSpace,m=d?"hierarchicalLabelGapHeight":"hierarchicalLabelGapWidth",f=p?n.getGapSize(e,this.Options,this.Options.layout[m]):0,y="auto"==this.Options.tickLabel.rotation&&d,v=!p&&y&&_<t.GroupAxisInfo._ROTATE_THRESHOLD,S=this.Options.tickLabel.style,C=s.isWrapEnabled(this.Options.tickLabel.style)&&"tangential"!=this.Position&&_>t.TextUtils.getTextStringHeight(e,S),E=0;E<this._numLevels;E++){var b=this._levelsArray[E],T=1;v&&(T=t.GroupAxisInfo._ROTATE_THRESHOLD/(2*_),this.Options._duringZoomAndScroll&&(T*=4),T=Math.max(1,Math.floor(T)));for(var A=0;A<b.length;A+=T)if(b[A]){if(o=this.getLabelAt(A,E),""==o||!o&&0!=o){i.push(null);continue}var O=this._getLabelCoord(E,A);if(null!=O){l=this.getLabelStyleAt(A,E);var P=!v&&C&&"number"!=typeof o&&o.indexOf(" ")>=0;h=this.CreateLabel(e,o,O,l,P);var I=_*(this.getEndIndex(A,E)-this.getStartIndex(A,E)+1),D=P&&this._isTextWrapNeeded(e,o,l,y,d?I:g);D&&g>0?d?h.wrapText(I,g,1,!0):h.wrapText(g,h.getLineHeight()*this._maxLineWrap,1,!1):P&&(!d||g<0)&&h.setWrapEnabled(!1),h._index=A,i.push(h),r||0!=E||(r=h),0==E&&(a=h)}else i.push(null)}else i.push(null);if(C&&p){for(var x=0,M=0;M<i.length;M++)if(i[M]){var L=i[M].measureDimensions();x=Math.max(x,d?L.h:L.w)}g-=x+f}this._labels.push(i),i=[]}i=this._labels[this._numLevels-1];var R=[];if(r){if("tangential"==this.Position)return R=this.GetLabelDims(i,u),void(this._labels[0]=this.SkipTangentialLabels(i,R));var w=r.measureDimensions();if(d){var N,U;if(null!=this.Options._startOverflow&&null!=this.Options._endOverflow)N=this.Options._startOverflow,U=this.Options._endOverflow;else{var B=a.measureDimensions();N=c?w.w+w.x-this.StartCoord:this.StartCoord-w.x,U=c?this.EndCoord-B.x:B.w+B.x-this.EndCoord}!v&&(N>this._startBuffer||U>this._endBuffer)&&this._setOverflow(N,U,i)}for(E=0;E<this._numLevels;E++)if(i=this._labels[E],v)this._labels[E]=this._rotateLabels(i,u,w.h/2,E);else{var H=this.GuessLabelDims(i,u,.3,E),k=this.GuessLabelDims(i,u,null,E);if(this.IsOverlapping(k,0)||(this._labels[E]=i),d)if(y){if(this.IsOverlapping(H,0))this._labels[E]=this._rotateLabels(i,u,w.h/2,E);else if(R=this.GetLabelDims(i,u),this.IsOverlapping(R,0))this._labels[E]=this._rotateLabels(i,u,w.h/2,E);else if(this._labels[E]=i,p){var F=0;for(M=0;M<R.length;M++)R[M]&&(F=Math.max(F,R[M].h));this._maxSpace-=F+f}}else R=this.GetLabelDims(i,u),this._labels[E]=this.SkipLabels(i,R);else{if(C){var G=this._sanitizeWrappedText(e,k,i,!1,p);G&&(k=this.GuessLabelDims(i,u,null,E))}this._labels[E]=this.SkipLabels(i,k)}}}},t.GroupAxisInfo.prototype.getMajorTickCoords=function(){for(var t,e=[],i="tangential"==this.Position?this.getGroupCount():this.getGroupCount()-1,n=0;n<this._levelsArray[0].length;n++)if(this._levelsArray[0][n]){var o=this.getStartIndex(n,0),r=this.getEndIndex(n,0);t=this._renderGridAtLabels?this.getCoordAt(o+.5*(r-o)):r+.5<i?this.getCoordAt(r+.5):null,null!=t&&e.push(t)}return e},t.GroupAxisInfo.prototype.getMinorTickCoords=function(){var t,e=[];if(!this._levelsArray[1])return e;for(var i=0;i<this._levelsArray[1].length;i++)if(this._levelsArray[1][i]){var n=this.getStartIndex(i,1),o=this.getEndIndex(i,1);t=this._renderGridAtLabels?this.getCoordAt(n+.5*(o-n)):o+.5<this.getGroupCount()-1?this.getCoordAt(o+.5):null,null!=t&&e.push(t)}return e},t.GroupAxisInfo.prototype.getUnboundedValueAt=function(t){if(null==t)return null;if(this._groupWidthRatios){for(var e=this._borderCoords.length,i=0;i<this._borderCoords.length;i++)if(t<=this._borderCoords[i]){e=i;break}return 0==e?this._borderValues[0]-(this._borderCoords[0]-t)/this._groupWidths[0]:this._borderValues[e-1]+(t-this._borderCoords[e-1])/this._groupWidths[e]}var n=(this.EndCoord-this.StartCoord)/(this.MaxValue-this.MinValue);return this.MinValue+(t-this.StartCoord)/n},t.GroupAxisInfo.prototype.getUnboundedCoordAt=function(t){if(null==t)return null;if(this._groupWidthRatios){for(var e=this._borderValues.length,i=0;i<this._borderValues.length;i++)if(t<=this._borderValues[i]){e=i;break}return 0==e?this._borderCoords[0]-this._groupWidths[0]*(this._borderValues[0]-t):this._borderCoords[e-1]+this._groupWidths[e]*(t-this._borderValues[e-1])}var n=(this.EndCoord-this.StartCoord)/(this.MaxValue-this.MinValue);return this.StartCoord+(t-this.MinValue)*n},t.GroupAxisInfo.prototype.getLabelAt=function(t,e){if(null==e&&(e=this._numLevels-1),t=Math.round(t),t<0)return null;var i=this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].item:null;return i&&(i.name?i=i.name:null!=i.id&&(i="")),i},t.GroupAxisInfo.prototype.getGroupAt=function(t,e){if(null==e&&(e=this._numLevels-1),t=Math.round(t),t<0)return null;var i=this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].item:null;if(i){if(i.id)return i.id;if(i.name||""==i.name)return i.name}return i},t.GroupAxisInfo.prototype.getLabelStyleAt=function(e,i){var n=this._getGroupAttribute(e,i,"labelStyle");if(n){var o=new t.CSSStyle(n);return o.getStyle("font-size")||o.setStyle("font-size",this.Options.tickLabel.style.getStyle("font-size")),o}return null},t.GroupAxisInfo.prototype.getDatatip=function(t,e){return this._getGroupAttribute(t,e,"shortDesc")},t.GroupAxisInfo.prototype.getAction=function(t,e){return this._getGroupAttribute(t,e,"action")},t.GroupAxisInfo.prototype.isDrillable=function(t,e){var i=this._getGroupAttribute(t,e,"drilling");return"on"==i||"off"!=i&&("on"==this._drilling||"groupsOnly"==this._drilling)},t.GroupAxisInfo.prototype.getGroup=function(t,e){if(t<0||t>this.getGroupCount()-1)return null;if(1==this._numLevels)return this.getGroupAt(t);var i=[];null==e&&(e=this._numLevels-1);for(var n=this.getStartIndex(t,e),o=0;o<=e;o++)for(var r=this._levelsArray[o],s=0;s<r.length;s++)this.getStartIndex(s,o)<=n&&this.getEndIndex(s,o)>=n&&i.push(this.getGroupAt(s,o));return i.length>0?1==i.length?i[0]:i:null},t.GroupAxisInfo.prototype.getLabelBackground=function(e,i,n){null==n&&(n=this._numLevels-1);var o=e.getCSSStyle();if(o){var r=o.getStyle(t.CSSStyle.BACKGROUND_COLOR),s=o.getStyle(t.CSSStyle.BORDER_COLOR),a=o.getStyle(t.CSSStyle.BORDER_WIDTH),l=o.getStyle(t.CSSStyle.BORDER_RADIUS);if(null!=r||null!=s||null!=a||null!=l){var h=e.getDimensions(),u=.15*h.h;(t.Agent.isBrowserChrome()||t.Agent.isPlatformIE())&&e.getVertAlignment()===t.OutputText.V_ALIGN_BOTTOM&&(h.y+=h.h/2);var d=new t.Rect(i,h.x-u,h.y,h.w+2*u,h.h),c=new t.CSSStyle;return null!=r?c.setStyle(t.CSSStyle.BACKGROUND_COLOR,r):d.setInvisibleFill(),c.setStyle(t.CSSStyle.BORDER_COLOR,s),c.setStyle(t.CSSStyle.BORDER_WIDTH,a),c.setStyle(t.CSSStyle.BORDER_RADIUS,l),d.setCSSStyle(c),this._isLabelRotated[n]&&d.setMatrix(e.getMatrix()),d.setMouseEnabled(!1),d}return null}return null},t.GroupAxisInfo.prototype.getGroupIndex=function(e){if(null==e)return-1;for(var i=-1,n=0;n<this._groupCount;n++){var o=this.getGroup(n),r=e instanceof Array&&o instanceof Array?t.ArrayUtils.equals(e,o):e==o;if(r){i=n;break}}return i},t.GroupAxisInfo.prototype.getMinimumExtent=function(){return 1},t.GroupAxisInfo.prototype.getGroupWidth=function(){return Math.abs(this.EndCoord-this.StartCoord)/Math.abs(this.MaxValue-this.MinValue)},t.GroupAxisInfo.prototype.getGroupCount=function(){return this._groupCount},t.GroupAxisInfo.prototype.getNumLevels=function(){return this._numLevels},t.GroupAxisInfo.prototype._generateLevelsArray=function(t,e,i,n){for(var o=0;o<t.length;o++)if(i[e]||(i[e]=[]),i[e].push({item:t[o],start:n,end:n,position:o}),t[o]&&t[o].groups){var r=i[e].length-1,s=this._generateLevelsArray(t[o].groups,e+1,i,i[e][r].start);i[e][r].end=s-1,n=s}else n++;return n},t.GroupAxisInfo.prototype._getGroupAttribute=function(t,e,i){null==e&&(e=this._numLevels-1);var n=this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].item:null;return n?n[i]:null},t.GroupAxisInfo.prototype.areSeparatorsRendered=function(){return this._areSeparatorsRendered},t.GroupAxisInfo.prototype.getSeparatorColor=function(){return this._separatorColor},t.GroupAxisInfo.prototype.getStartIndex=function(t,e){null==e&&(e=this._numLevels-1);var i=this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].start:null;return i},t.GroupAxisInfo.prototype.getEndIndex=function(t,e){null==e&&(e=this._numLevels-1);var i=this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].end:null;return i},t.GroupAxisInfo.prototype.getPosition=function(t,e){null==e&&(e=this._numLevels-1);var i=this._levelsArray[e]&&this._levelsArray[e][t]?this._levelsArray[e][t].position:null;return i},t.GroupAxisInfo.prototype.isRenderGridAtLabels=function(){return this._renderGridAtLabels},t.GroupAxisInfo.prototype.setLastRenderedLevel=function(t){this._lastRenderedLevel=t},t.GroupAxisInfo.prototype.getLastRenderedLevel=function(){return this._lastRenderedLevel},t.GroupAxisInfo.prototype.getLabelIndex=function(t){return t._index>=0?t._index:null},t.GroupAxisInfo.prototype.getMaxLineWrap=function(){return this._maxLineWrap},t.GroupAxisInfo.prototype._isTextWrapNeeded=function(e,i,n,o,r){var s=t.TextUtils.getTextStringWidth(e,i,n);return s>=r&&(s/this._maxLineWrap<r||!o)};var a=function(t,e,i,n,o,r,s,a){this.Init(t,e,i,n,o,r,s,a)};t.Obj.createSubclass(a,t.SimpleObjPeer),a.prototype.Init=function(e,i,n,o,r,s,l,h){a.superclass.Init.call(this,s,l,null,h),this._axis=e,this._label=i,this._group=n,this._action=o,this._drillable=r,(this._action||this._drillable)&&i.setCursor(t.SelectionEffectUtils.getSelectingCursor()),e.__registerObject(this)},a.prototype.getLabel=function(){return this._label},a.prototype.getId=function(){return this._group},a.prototype.getAction=function(){return this._action},a.prototype.isDrillable=function(){return this._drillable},a.prototype.getGroup=function(){return this._group},a.prototype.getNextNavigable=function(e){if(e.type==t.MouseEvent.CLICK)return this;var i=this._axis.__getKeyboardObjects();return t.KeyboardHandler.getNextNavigable(this,e,i)},a.prototype.getKeyboardBoundingBox=function(e){return this._label?this._label.getDimensions(e):new t.Rectangle(0,0,0,0)},a.prototype.getDisplayable=function(){return this._label},a.prototype.getTargetElem=function(){return this._label?this._label.getElem():null},a.prototype.showKeyboardFocusEffect=function(){if(this._isShowingKeyboardFocusEffect=!0,this._label){var e=this.getKeyboardBoundingBox();this._overlayRect=new t.Rect(this._axis.getCtx(),e.x,e.y,e.w,e.h),this._overlayRect.setSolidStroke(t.Agent.getFocusColor()),this._overlayRect.setInvisibleFill(),this._axis.addChild(this._overlayRect)}},a.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1,this._label&&(this._axis.removeChild(this._overlayRect),this._overlayRect=null)},a.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},a.prototype.getAriaLabel=function(){var e;return this.isDrillable()&&(e=[t.Bundle.getTranslation(this._axis.getOptions(),"stateDrillable",t.Bundle.UTIL_PREFIX,"STATE_DRILLABLE")]),null!=this.getDatatip()?t.Displayable.generateAriaLabel(this.getDatatip(),e):null!=e?t.Displayable.generateAriaLabel(this.getLabel().getTextString(),e):void 0},a.prototype.isDragAvailable=function(t){return!0},a.prototype.getDragTransferable=function(t,e){return[this.getId()]},a.prototype.getDragFeedback=function(t,e){return[this.getDisplayable()]},t.LinearScaleAxisValueFormatter=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)},t.Obj.createSubclass(t.LinearScaleAxisValueFormatter,t.Obj),t.LinearScaleAxisValueFormatter.SCALE_NONE="none",t.LinearScaleAxisValueFormatter.SCALE_AUTO="auto",t.LinearScaleAxisValueFormatter.SCALE_THOUSAND="thousand",t.LinearScaleAxisValueFormatter.SCALE_MILLION="million",t.LinearScaleAxisValueFormatter.SCALE_BILLION="billion",t.LinearScaleAxisValueFormatter.SCALE_TRILLION="trillion",t.LinearScaleAxisValueFormatter.SCALE_QUADRILLION="quadrillion",t.LinearScaleAxisValueFormatter.SCALING_FACTOR_DIFFERENCE=3,t.LinearScaleAxisValueFormatter.prototype.Init=function(t,e,i,n,o,r){this._context=t,this._scales={},this._scalesOrder=[],this._factorToScaleMapping={},this.InitScales(),this.InitFormatter(e,i,n,o,r)},t.LinearScaleAxisValueFormatter.prototype.InitScales=function(){var e=function(e,i,n){var o;n&&(o=t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,n));var r={scaleFactor:i,localizedSuffix:o};this._scales[e]=r,this._scalesOrder.push(r),this._factorToScaleMapping[i]=r},i=t.LinearScaleAxisValueFormatter.SCALING_FACTOR_DIFFERENCE;e.call(this,t.LinearScaleAxisValueFormatter.SCALE_NONE,0*i),e.call(this,t.LinearScaleAxisValueFormatter.SCALE_THOUSAND,1*i,"SCALING_SUFFIX_THOUSAND"),e.call(this,t.LinearScaleAxisValueFormatter.SCALE_MILLION,2*i,"SCALING_SUFFIX_MILLION"),e.call(this,t.LinearScaleAxisValueFormatter.SCALE_BILLION,3*i,"SCALING_SUFFIX_BILLION"),e.call(this,t.LinearScaleAxisValueFormatter.SCALE_TRILLION,4*i,"SCALING_SUFFIX_TRILLION"),e.call(this,t.LinearScaleAxisValueFormatter.SCALE_QUADRILLION,5*i,"SCALING_SUFFIX_QUADRILLION"),this._scalesOrder.sort(function(t,e){return t.scaleFactor<e.scaleFactor?-1:t.scaleFactor>e.scaleFactor?1:0})},t.LinearScaleAxisValueFormatter.prototype.InitFormatter=function(t,e,i,n,o){var r,s,a=!1,l=!1;if("off"!==o&&(l=!0),s=this._getScaleFactor(n),"number"!=typeof s&&(a=!0),a){var h=Math.max(Math.abs(t),Math.abs(e)),u=this._getPowerOfTen(h);s=this._findNearestLEScaleFactor(u)}if(l===!0)if(0==i&&t==e){var d=this._getPowerOfTen(e),c=s-d;r=c<=0?Math.max(c+3,0):Math.max(c,4)}else{var p=this._getPowerOfTen(i);r=Math.max(s-p,0)}this._useAutoPrecision=l,this._scaleFactor=s,this._decimalPlaces=r},t.LinearScaleAxisValueFormatter.prototype._findNearestLEScaleFactor=function(t){var e=0;if(t<=this._scalesOrder[0].scaleFactor)e=this._scalesOrder[0].scaleFactor;else if(t>=this._scalesOrder[this._scalesOrder.length-1].scaleFactor)e=this._scalesOrder[this._scalesOrder.length-1].scaleFactor;else for(var i=this._scalesOrder.length-1,n=i;n>=0;n--)if(this._scalesOrder[n].scaleFactor<=t){e=this._scalesOrder[n].scaleFactor;break}return e},t.LinearScaleAxisValueFormatter.prototype._getScaleFactor=function(e){e||(e=t.LinearScaleAxisValueFormatter.SCALE_AUTO);var i,n=this._scales[e];return n&&(i=n.scaleFactor),i},t.LinearScaleAxisValueFormatter.prototype.format=function(t,e){var i=parseFloat(t);if(isNaN(i))return t;var n;if(this._scaleFactor>0){for(var o=0;o<this._scaleFactor;o++)i/=10;n=this._factorToScaleMapping[this._scaleFactor].localizedSuffix}if(e&&e.getAsString)i=e.getAsString(i);else if(e&&e.format)i=e.format(i);else{var r=this._context.getNumberConverter({minimumFractionDigits:this._decimalPlaces,maximumFractionDigits:this._decimalPlaces});r&&r.format?i=r.format(i):this._useAutoPrecision&&!isNaN(parseFloat(i))&&(i=parseFloat(new Number(i).toFixed(this._decimalPlaces)),i=this._formatFraction(i))}return"string"==typeof n&&0!=t&&(i+=n),i},t.LinearScaleAxisValueFormatter.prototype._formatFraction=function(e){var i=e.toString();if(i.indexOf("e")!=-1)return i;var n=".";if(n=t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"NUMBER_FORMAT_DECIMAL_SEPARATOR"),this._decimalPlaces>0){i.indexOf(".")==-1?i+=n:i=i.replace(".",n);for(var o=i.substring(i.indexOf(n)+1).length;o<this._decimalPlaces;)i+="0",o++}return i},t.LinearScaleAxisValueFormatter.prototype._getPowerOfTen=function(t){t=t>=0?t:-t;var e=0;if(t<1e-15)return 0;if(t==1/0)return Number.MAX_VALUE;if(t>=10)for(;t>=10;)e+=1,t/=10;else if(t<1)for(;t<1;)e-=1,t*=10;return e},t.TimeAxisInfo=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.TimeAxisInfo,t.AxisInfo),t.TimeAxisInfo.TIME_SECOND=1e3,t.TimeAxisInfo.TIME_MINUTE=60*t.TimeAxisInfo.TIME_SECOND,t.TimeAxisInfo.TIME_HOUR=60*t.TimeAxisInfo.TIME_MINUTE,t.TimeAxisInfo.TIME_DAY=24*t.TimeAxisInfo.TIME_HOUR,t.TimeAxisInfo.TIME_MONTH_MIN=28*t.TimeAxisInfo.TIME_DAY,t.TimeAxisInfo.TIME_MONTH_MAX=31*t.TimeAxisInfo.TIME_DAY,t.TimeAxisInfo.TIME_YEAR_MIN=365*t.TimeAxisInfo.TIME_DAY,t.TimeAxisInfo.TIME_YEAR_MAX=366*t.TimeAxisInfo.TIME_DAY,t.TimeAxisInfo.prototype.Init=function(e,i,n){t.TimeAxisInfo.superclass.Init.call(this,e,i,n),"top"==this.Position||"bottom"==this.Position?(i._isOverview||"on"!=i.tickLabel.rendered||(this.StartOverflow=Math.max(t.Axis.MINIMUM_AXIS_BUFFER-i.leftBuffer,0),this.EndOverflow=Math.max(t.Axis.MINIMUM_AXIS_BUFFER-i.rightBuffer,0)),t.Agent.isRightToLeft(e)?(this._startCoord=this.EndCoord-this.EndOverflow,this._endCoord=this.StartCoord+this.StartOverflow):(this._startCoord=this.StartCoord+this.StartOverflow,this._endCoord=this.EndCoord-this.EndOverflow)):(this._startCoord=this.StartCoord,this._endCoord=this.EndCoord);var o=null!=i.tickLabel?i.tickLabel.converter:null;this._label1Converter=o&&o[0]?o[0]:o,this._label2Converter=o&&o[1]?o[1]:null,this._dateToIsoWithTimeZoneConverter=e.getLocaleHelpers().dateToIsoWithTimeZoneConverter,this._groups=i.groups;var r=i.timeAxisType;this._skipGaps="skipGaps"==r,this._mixedFrequency="mixedFrequency"==r,this.DataMin=i.dataMin,this.DataMax=i.dataMax,this._groups.length>1?this._averageInterval=(this.DataMax-this.DataMin)/(this._groups.length-1):this.DataMax-this.DataMin>0?this._averageInterval=this.DataMax-this.DataMin:this._averageInterval=6*t.TimeAxisInfo.TIME_MINUTE,this._step=i.step;var s=i.endGroupOffset>0?i.endGroupOffset*this._averageInterval:0,a=i.startGroupOffset>0?i.startGroupOffset*this._averageInterval:0;this.GlobalMin=null!=i.min?i.min:this.DataMin-a,this.GlobalMax=null!=i.max?i.max:this.DataMax+s,null!=i.viewportStartGroup&&(this.MinValue=i.viewportStartGroup-a),null!=i.viewportEndGroup&&(this.MaxValue=i.viewportEndGroup+s),null!=i.viewportMin&&(this.MinValue=i.viewportMin),null!=i.viewportMax&&(this.MaxValue=i.viewportMax),null==this.MinValue&&(this.MinValue=this.GlobalMin),null==this.MaxValue&&(this.MaxValue=this.GlobalMax),this.GlobalMin>this.MinValue&&(this.GlobalMin=this.MinValue),this.GlobalMax<this.MaxValue&&(this.GlobalMax=this.MaxValue),this._timeRange=this.MaxValue-this.MinValue,this._level1Labels=null,this._level2Labels=null,this._level1Coords=null,this._level2Coords=null,this._isOneLevel=!0,this._level1Overflow=[],this._level2Overflow=[],this._locale=i._locale.toLowerCase(),this._monthResources=[t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_JANUARY"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_FEBRUARY"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_MARCH"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_APRIL"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_MAY"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_JUNE"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_JULY"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_AUGUST"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_SEPTEMBER"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_OCTOBER"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_NOVEMBER"),t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"MONTH_SHORT_DECEMBER")]},t.TimeAxisInfo._getAMString=function(t){var e=t.substring(0,2);if("en-au"==t||"en-ie"==t||"en-ph"==t)return"am";if("en-gb"==t)return"";switch(e){case"en":return"AM";case"ar":return"ص";case"el":return"πμ";case"ko":return"오전";case"zh":return"上午";default:return""}},t.TimeAxisInfo._getPMString=function(t){var e=t.substring(0,2);if("en-au"==t||"en-ie"==t||"en-ph"==t)return"pm";if("en-gb"==t)return"";switch(e){case"en":return"PM";case"ar":return"م";case"el":return"μμ";case"ko":return"오후";case"zh":return"下午";default:return""}},t.TimeAxisInfo._getAMPMBefore=function(t){var e=t.substring(0,2);return"ko"==e||"zh"==e},t.TimeAxisInfo._getDMYOrder=function(t){var e=t.substring(0,2);return"en-us"==t||"en-ph"==t?"MDY":"fa"==e||"hu"==e||"ja"==e||"ko"==e||"lt"==e||"mn"==e||"zh"==e?"YMD":"DMY"},t.TimeAxisInfo._getYearTrailingCharacters=function(t){return 0==t.indexOf("ja")||0==t.indexOf("zh")?"年":0==t.indexOf("ko")?"년":""},t.TimeAxisInfo._getDayTrailingCharacters=function(t){return 0==t.indexOf("ja")||0==t.indexOf("zh")?"日":0==t.indexOf("ko")?"일":""},t.TimeAxisInfo.prototype.formatLabel=function(e){var i=new Date(e),n=this._formatAxisLabel(i,null,!0);return null!=n[1]?"YMD"==t.TimeAxisInfo._getDMYOrder(this._locale)||this._timeRange<t.TimeAxisInfo.TIME_MONTH_MIN&&this._step<t.TimeAxisInfo.TIME_DAY?n[1]+" "+n[0]:n[0]+" "+n[1]:n[0]},t.TimeAxisInfo.prototype._formatAxisLabelWithConverter=function(t,e,i){if(i){var n=null,o=null;if(i.getAsString?(n=i.getAsString(t),o=i.getAsString(e)):i.format&&(n=i.format(this._dateToIsoWithTimeZoneConverter&&t?this._dateToIsoWithTimeZoneConverter(t):t),o=i.format(this._dateToIsoWithTimeZoneConverter&&e?this._dateToIsoWithTimeZoneConverter(e):e)),o!=n)return n}return null},t.TimeAxisInfo.prototype._formatAxisLabel=function(e,i,n){var o=null,r=null,s="left"==this.Position||"right"==this.Position;return this._label1Converter||this._label2Converter?(this._label1Converter&&(o=this._formatAxisLabelWithConverter(e,i,this._label1Converter)),this._label2Converter&&(r=this._formatAxisLabelWithConverter(e,i,this._label2Converter)),[o,r]):(this._step>=t.TimeAxisInfo.TIME_YEAR_MIN||this._timeRange>=6*t.TimeAxisInfo.TIME_YEAR_MIN?o=this._formatDate(e,!1,!1,!0):this._step>=t.TimeAxisInfo.TIME_MONTH_MIN||this._timeRange>=6*t.TimeAxisInfo.TIME_MONTH_MIN?(null!=i&&i.getMonth()==e.getMonth()||(o=this._formatDate(e,!1,!0,!1)),null!=i&&i.getYear()==e.getYear()||(r=this._formatDate(e,!1,!1,!0))):this._step>=t.TimeAxisInfo.TIME_DAY||this._timeRange>=6*t.TimeAxisInfo.TIME_DAY?n?o=this._formatDate(e,!0,!0,!0):(null!=i&&i.getDate()==e.getDate()||(o=this._formatDate(e,!0,!1,!1)),null==i||i.getYear()!=e.getYear()?r=this._formatDate(e,!1,!0,!0):i.getMonth()!=e.getMonth()&&(r=this._formatDate(e,!1,!0,!1))):(this._step>=t.TimeAxisInfo.TIME_HOUR||this._timeRange>=6*t.TimeAxisInfo.TIME_HOUR?null!=i&&i.getHours()==e.getHours()||(o=this._formatTime(e,!1,!1)):this._step>=t.TimeAxisInfo.TIME_MINUTE||this._timeRange>=6*t.TimeAxisInfo.TIME_MINUTE?null!=i&&i.getMinutes()==e.getMinutes()||(o=this._formatTime(e,!0,!1)):null!=i&&i.getSeconds()==e.getSeconds()||(o=this._formatTime(e,!0,!0)),s?null!=i&&i.getDate()==e.getDate()||(r=this._formatDate(e,!0,!0,!1)):null==i||i.getYear()!=e.getYear()?r=this._formatDate(e,!0,!0,!0):i.getMonth()!=e.getMonth()?r=this._formatDate(e,!0,!0,!1):i.getDate()!=e.getDate()&&(r=this._formatDate(e,!0,!1,!1))),[o,r])},t.TimeAxisInfo.prototype._formatDate=function(e,i,n,o){var r,s="th"==this._locale.substring(0,2)&&"jet"!=this.Options._environment?e.getFullYear()+543:e.getFullYear();r=this._monthResources&&this._monthResources.length>=12?this._monthResources[e.getMonth()]:e.toString().split(" ")[1];var a=e.getDate();s+=t.TimeAxisInfo._getYearTrailingCharacters(this._locale),a+=t.TimeAxisInfo._getDayTrailingCharacters(this._locale);for(var l=t.TimeAxisInfo._getDMYOrder(this._locale),h="",u=0;u<l.length;u++)i&&"D"==l[u]?h+=a+" ":n&&"M"==l[u]?h+=r+" ":o&&"Y"==l[u]&&(h+=s+" ");return h.length>0?h.slice(0,h.length-1):h},t.TimeAxisInfo.prototype._formatTime=function(e,i,n){var o,r=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),l=t.TimeAxisInfo._getAMString(this._locale),h=t.TimeAxisInfo._getPMString(this._locale),u=t.TimeAxisInfo._getAMPMBefore(this._locale),d=""!=l&&""!=h,c="";return t.Agent.isRightToLeft(this.getCtx())&&(c="‏"),d?(r<12?(o=l,0==r&&(r=12)):(o=h,r>12&&(r-=12)),c+=r,(i||0!=s)&&(c+=":"+this._doubleDigit(s))):c+=this._doubleDigit(r)+":"+this._doubleDigit(s),n&&(c+=":"+this._doubleDigit(a)),d?u?o+" "+c:c+" "+o:c},t.TimeAxisInfo.prototype._doubleDigit=function(t){return t<10?"0"+t:""+t},t.TimeAxisInfo.prototype._getMixedFrequencyStep=function(){return this._timeRange>=6*t.TimeAxisInfo.TIME_YEAR_MIN?t.TimeAxisInfo.TIME_YEAR_MIN:this._timeRange>=6*t.TimeAxisInfo.TIME_MONTH_MIN?t.TimeAxisInfo.TIME_MONTH_MIN:this._timeRange>=6*t.TimeAxisInfo.TIME_DAY?t.TimeAxisInfo.TIME_DAY:this._timeRange>=t.TimeAxisInfo.TIME_DAY?3*t.TimeAxisInfo.TIME_HOUR:this._timeRange>=6*t.TimeAxisInfo.TIME_HOUR?t.TimeAxisInfo.TIME_HOUR:this._timeRange>=t.TimeAxisInfo.TIME_HOUR?15*t.TimeAxisInfo.TIME_MINUTE:this._timeRange>=30*t.TimeAxisInfo.TIME_MINUTE?5*t.TimeAxisInfo.TIME_MINUTE:this._timeRange>=6*t.TimeAxisInfo.TIME_MINUTE?t.TimeAxisInfo.TIME_MINUTE:this._timeRange>=t.TimeAxisInfo.TIME_MINUTE?15*t.TimeAxisInfo.TIME_SECOND:this._timeRange>=30*t.TimeAxisInfo.TIME_SECOND?5*t.TimeAxisInfo.TIME_SECOND:t.TimeAxisInfo.TIME_SECOND},t.TimeAxisInfo._getLabelPositions=function(e,i,n){var o=new Date(e);o.setMonth(0,1),o.setHours(0,0,0,0);var r=o.getTime(),s=[];if(n>=t.TimeAxisInfo.TIME_YEAR_MIN&&n<=t.TimeAxisInfo.TIME_YEAR_MAX){for(;r<e;)r=t.TimeAxisInfo._addOneYear(r);for(;r<=i;)s.push(r),r=t.TimeAxisInfo._addOneYear(r)}else if(n>=t.TimeAxisInfo.TIME_MONTH_MIN&&n<=t.TimeAxisInfo.TIME_MONTH_MAX){for(;r<e;)r=t.TimeAxisInfo._addOneMonth(r);for(;r<=i;)s.push(r),r=t.TimeAxisInfo._addOneMonth(r)}else for(r+=Math.ceil((e-r)/n)*n;r<=i;)s.push(r),r+=n;return s},t.TimeAxisInfo._addOneYear=function(t){var e=new Date(t);return e.setFullYear(e.getFullYear()+1),e.getTime()},t.TimeAxisInfo._addOneMonth=function(t){var e=new Date(t);return e.setMonth(e.getMonth()+1),e.getTime()},t.TimeAxisInfo.prototype._generateLabels=function(e){var i=[],n=[],o=[],r=[],s=[],a=null,l=0,h=0,u=e.getStage(e),d=t.Agent.isRightToLeft(e),c="left"==this.Position||"right"==this.Position,p="off"!=this.Options.zoomAndScroll,_=!0,g=0;c&&t.Agent.isBrowserChrome()&&(g=.16*this.getTickLabelHeight());var m=[];if(null!=this._step)m=t.TimeAxisInfo._getLabelPositions(this.MinValue,this.MaxValue,this._step);else if(this._mixedFrequency)this._step=this._getMixedFrequencyStep(),m=t.TimeAxisInfo._getLabelPositions(this.MinValue,this.MaxValue,this._step);else{for(var f=0;f<this._groups.length;f++)this._groups[f]>=this.MinValue&&this._groups[f]<=this.MaxValue&&m.push(this._groups[f]);if(this._step=this._averageInterval,!this._skipGaps){var y=new t.OutputText(e,this._formatAxisLabel(new Date(m[0]))[0],0,0),v=c?t.TextUtils.guessTextDimensions(y).h:y.measureDimensions().w,S=(v+this.GetTickLabelGapSize())*(m.length-1),C=Math.abs(this._endCoord-this._startCoord);S>C&&(this._step=this._getMixedFrequencyStep(),m=t.TimeAxisInfo._getLabelPositions(this.MinValue,this.MaxValue,this._step))}}0==m.length&&(m=[this.MinValue]);for(var f=0;f<m.length;f++){var E=m[f],b=this.getCoordAt(E);if(null!=b){var T=new Date(E),A=this._formatAxisLabel(T,a),O=A[0],P=A[1];if(null!=O?(o.push({text:O,coord:null!=P?b+g:b}),r.push(b),l++):(o.push(null),r.push(null)),i.push(null),p&&_&&(b=this.MinValue?this.getCoordAt(this.MinValue):b),_=!1,null!=P){var I=this.CreateLabel(e,P,null!=P?b-g:b);s.push(b),c||(d?I.alignRight():I.alignLeft()),n.push(I),this._isOneLevel=!1,h++}else n.push(null),s.push(null);a=T}}if(l=this._skipLabelsUniform(o,i,u,!1,d),!p&&h>1&&l<1.5*h){i=n,n=null;for(var D=0;D<i.length;D++)null!=i[D]&&i[D].alignCenter();l=this._skipLabelsGreedy(i,this.GetLabelDims(i,u),!1,d)}else h=this._skipLabelsGreedy(n,this.GetLabelDims(n,u),!0,d),0==h&&(n=null);c&&null!=n&&this._skipVertLabels(i,n,u),this._level1Labels=i,this._level2Labels=n,this._level1Coords=r,this._level2Coords=s},t.TimeAxisInfo._isOverlapping=function(t,e,i,n,o){return i>=t&&i-o<e||i<t&&n+o>t},t.TimeAxisInfo.prototype._getLabelOverflow=function(t,e,i,n){var o=t-(i?n?e:0:.5*e);if(o<this.Options._minOverflowCoord)return Math.floor(o-this.Options._minOverflowCoord);var r=t+(i?n?0:e:.5*e);return r>this.Options._maxOverflowCoord?Math.ceil(r-this.Options._maxOverflowCoord):0},t.TimeAxisInfo.prototype._skipLabelsGreedy=function(e,i,n,o){if(!i||i.length<=0)return!1;for(var r,s,a,l,h,u="left"==this.Position||"right"==this.Position,d=this.getTickLabelHeight(),c=u?.08*d:.24*d,p=0,_=Math.abs(this._endCoord-this._startCoord),g=0;g<i.length;g++)if(this._level2Overflow.push(0),null!=e[g]){h=e[g];var m=t.TextUtils.getTextWidth(h);if(i[g].w>_)e[g]=null;else{var f=this._getLabelOverflow(h.getX(),m,n,o);this._level2Overflow[g]=f,0!=f&&(h.setX(h.getX()-f),i[g].x-=f)}}for(g=0;g<i.length;g++)null!=i[g]&&(u?(a=i[g].y,l=i[g].y+i[g].h):(a=i[g].x,l=i[g].x+i[g].w),null!=r&&null!=s&&t.TimeAxisInfo._isOverlapping(r,s,a,l,c)&&(e[g]=null),null!=e[g]&&(r=a,s=l,p++));return p},t.TimeAxisInfo.prototype._skipLabelsUniform=function(t,e,i,n){for(var o=[],r=[],s=Math.abs(this._endCoord-this._startCoord),a=0;a<t.length;a++)null!=t[a]&&(o.push(t[a]),r.push(null),this._level1Overflow.push(0));for(var l="left"==this.Position||"right"==this.Position,h=this,u=function(t){if(null==r[t])if(o[t].label=h.CreateLabel(i.getCtx(),o[t].text,o[t].coord),r[t]=o[t].label.measureDimensions(i),r[t].w>s)o[t].label=null,r[t].w=0,r[t].h=0;else{var e=h._getLabelOverflow(o[t].coord,r[t].w,!1,n);0!=e&&(o[t].coord-=e,r[t].x-=e,o[t].label.setX(o[t].label.getX()-e),h._level1Overflow[t]=e)}return l?r[t].h:r[t].w},d=(u(0)+this.GetTickLabelGapSize())*(o.length-1),c=s>0?Math.ceil(d/s)-1:0,p=!0;p;){for(var a=0;a<o.length;a++)a%(c+1)==0?(u(a),o[a].skipped=!1):o[a].skipped=!0;p=this.IsOverlapping(r,c),c++}for(var _=0,a=0;a<t.length;a++)null==t[a]||t[a].skipped||(e[a]=t[a].label,_++);return _},t.TimeAxisInfo.prototype._skipVertLabels=function(e,i,n){for(var o=.08*this.getTickLabelHeight(),r=function(e,i){return t.TimeAxisInfo._isOverlapping(e.y,e.y+e.h,i.y,i.y+i.h,o)},s=null,a=!1,l=0;l<e.length;l++)if(e[l]&&i[l]){if(e[l].alignTop(),i[l].alignBottom(),s&&r(s,i[l].measureDimensions())){a=!0;break}s=e[l].measureDimensions()}else if(e[l]||i[l]){var h=e[l]?e[l]:i[l];if(s&&r(s,h.measureDimensions())){a=!0;break}s=h.measureDimensions()}if(a){var u,d=null,c=null,p=null;for(l=0;l<e.length;l++)i[l]?(e[l]=null,i[l].alignMiddle(),u=i[l].measureDimensions(),c&&r(c,u)&&(e[d]=null),p=u):e[l]&&(u=e[l].measureDimensions(),p&&r(p,u)?e[l]=null:(c=u,d=l))}},t.TimeAxisInfo.prototype.getLabels=function(t,e){return e&&e>1?null:(this._level1Labels||this._generateLabels(t),1==e?this._level2Labels:this._level1Labels)},t.TimeAxisInfo.prototype.getMajorTickCoords=function(){var t=[];if(this._isOneLevel)for(var e=0;e<this._level1Coords.length;e++)null!=this._level1Coords[e]&&null!=this._level1Labels[e]&&t.push(this._level1Coords[e]);else for(var e=1;e<this._level2Coords.length;e++)null!=this._level2Coords[e]&&t.push(this._level2Coords[e]);return t},t.TimeAxisInfo.prototype.getMinorTickCoords=function(){if(this._isOneLevel)return[];for(var t=[],e=0;e<this._level1Coords.length;e++)null!=this._level1Coords[e]&&null!=this._level1Labels[e]&&t.push(this._level1Coords[e]);return t},t.TimeAxisInfo.prototype.getUnboundedValueAt=function(t){if(null==t)return null;var e=(t-this._startCoord)/(this._endCoord-this._startCoord);if(this._skipGaps){var i=this._timeToIndex(this.MinValue),n=this._timeToIndex(this.MaxValue);return this._indexToTime(i+e*(n-i))}return this.MinValue+e*(this.MaxValue-this.MinValue)},t.TimeAxisInfo.prototype.getUnboundedCoordAt=function(t){
if(null==t)return null;var e;if(this._skipGaps){var i=this._timeToIndex(this.MinValue),n=this._timeToIndex(this.MaxValue),o=this._timeToIndex(t);e=(o-i)/(n-i)}else e=(t-this.MinValue)/(this.MaxValue-this.MinValue);return this._startCoord+e*(this._endCoord-this._startCoord)},t.TimeAxisInfo.prototype.linearToActual=function(t){return null==t?null:this._skipGaps?this._indexToTime(t):t},t.TimeAxisInfo.prototype.actualToLinear=function(t){return null==t?null:this._skipGaps?this._timeToIndex(t):t},t.TimeAxisInfo.prototype._timeToIndex=function(t){for(var e=this._groups.length,i=0;i<this._groups.length;i++)if(t<=this._groups[i]){e=i;break}var n=e-1,o=void 0!==this._groups[n]?this._groups[n]:this._groups[0]-this._averageInterval,r=void 0!==this._groups[e]?this._groups[e]:this._groups[this._groups.length-1]+this._averageInterval;return n+(t-o)/(r-o)},t.TimeAxisInfo.prototype._indexToTime=function(t){var e=Math.min(Math.max(Math.ceil(t),0),this._groups.length),i=e-1,n=void 0!==this._groups[i]?this._groups[i]:this._groups[0]-this._averageInterval,o=void 0!==this._groups[e]?this._groups[e]:this._groups[this._groups.length-1]+this._averageInterval;return n+(t-i)*(o-n)},t.TimeAxisInfo.prototype.getGroupWidth=function(){return this._skipGaps?Math.abs(this.getUnboundedCoordAt(this._indexToTime(1))-this.getUnboundedCoordAt(this._indexToTime(0))):Math.abs(this.getUnboundedCoordAt(this.MinValue+this._averageInterval)-this.getUnboundedCoordAt(this.MinValue))},t.TimeAxisInfo.prototype.getMinimumExtent=function(){return this._skipGaps?1:this._mixedFrequency?Math.min((this.getGlobalMax()-this.getGlobalMin())/8,this._averageInterval):this._averageInterval},t.TimeAxisInfo.prototype.getStartOverflow=function(){return"top"!=this.Position&&"bottom"!=this.Position||!t.Agent.isRightToLeft(this.getCtx())?this.StartOverflow:this.EndOverflow},t.TimeAxisInfo.prototype.getEndOverflow=function(){return"top"!=this.Position&&"bottom"!=this.Position||!t.Agent.isRightToLeft(this.getCtx())?this.EndOverflow:this.StartOverflow}}(t),t}),define("ojs/internal-deps/dvt/DvtLegend",["./DvtToolkit"],function(t){return function(t){t.Legend=function(){},t.Obj.createSubclass(t.Legend,t.BaseComponent),t.Legend.newInstance=function(e,i,n){var o=new t.Legend;return o.Init(e,i,n),o},t.Legend.getDefaults=function(t){return(new i).getDefaults(t)},t.Legend.prototype.Init=function(e,o,r){t.Legend.superclass.Init.call(this,e,o,r),this.setId("legend1000"+Math.floor(1e9*Math.random())),this.Defaults=new i,this.EventManager=new n(this),this.EventManager.addListeners(this),this._peers=[],this._navigablePeers=[],this._bounds=null,this._titles=[]},t.Legend.prototype.SetOptions=function(t){this.getOptionsCache().clearCache(),t?(this.Options=this.Defaults.calcOptions(t),this._transferVisibilityProperties(this.Options.sections)):this.Options||(this.Options=this.GetDefaults())},t.Legend.prototype.getPreferredSize=function(e,i,n){this.SetOptions(e),this.getOptions().isLayout=!0;var o=new t.Rectangle(0,0,i,n),r=s.render(this,o);return this.getOptions().isLayout=!1,new t.Dimension(r.w,r.h)},t.Legend.prototype.render=function(e,i,n){this.getCache().clearCache(),this.SetOptions(e),isNaN(i)||isNaN(n)||(this.Width=i,this.Height=n),this.getOptions().isLayout=!1;for(var r=this.getNumChildren(),a=0;a<r;a++){var l=this.getChildAt(a);l.destroy()}this.removeChildren(),this._peers=[],this._navigablePeers=[],this._bounds=null,this._titles=[],t.Agent.isTouchDevice()||this.EventManager.setKeyboardHandler(new o(this.EventManager,this)),this.UpdateAriaAttributes();var h=new t.Rectangle(0,0,this.Width,this.Height);this._contentDimensions=s.render(this,h);var u=this.getOptions().highlightedCategories;return u&&u.length>0&&this.highlight(u),this.RenderComplete(),this._contentDimensions},t.Legend.prototype.highlight=function(e){this.getOptions().highlightedCategories=e&&e.length>0?e.slice():null,t.CategoryRolloverHandler.highlight(e,this.__getObjects(),!0)},t.Legend.prototype.processEvent=function(t,e){var i=t.type;if("categoryHighlight"==i&&"dim"==this.getOptions().hoverBehavior){var n=this.__getObjects();this!=e&&this.highlight(t.categories);for(var o=0;o<n.length;o++)if(n[o].getId()==t.categories){this.container.scrollIntoView(n[o].getDisplayables()[0]);break}}this!=e&&"adfShowPopup"!=i&&"adfHidePopup"!=i||this.dispatchEvent(t)},t.Legend.prototype.__registerObject=function(e){if(e.getDisplayables()[0]instanceof t.Button)this._navigablePeers.push(e);else{var i=this.getOptions().hideAndShowBehavior;(null!=e.getDatatip()||null!=e.getAction()||e.isDrillable()||"none"!=i&&"off"!=i)&&this._navigablePeers.push(e),this._peers.push(e)}},t.Legend.prototype.__getObjects=function(){return this._peers},t.Legend.prototype.__getKeyboardObjects=function(){return this._navigablePeers},t.Legend.prototype.__setBounds=function(t){this._bounds=t.clone()},t.Legend.prototype.__getBounds=function(){return this._bounds},t.Legend.prototype.__registerTitle=function(t){this._titles.push(t)},t.Legend.prototype.__getTitles=function(){return this._titles},t.Legend.prototype.getAutomation=function(){return new e(this)},t.Legend.prototype.getKeyboardFocus=function(){return null!=this.EventManager?this.EventManager.getFocus():null},t.Legend.prototype.setKeyboardFocus=function(t,e){if(null!=this.EventManager){for(var i=this.__getKeyboardObjects(),n=0;n<i.length;n++)if(i[n].getId()==t.getId()){this.EventManager.setFocusObj(i[n]),e&&i[n].showKeyboardFocusEffect();break}var o=this.getKeyboardFocus();if(o){var r=o.getDisplayables()[0];r.setAriaProperty("label",o.getAriaLabel()),this.getCtx().setActiveElement(r)}}},t.Legend.prototype.getDimensions=function(e){var i=new t.Rectangle(0,0,this.Width,this.Height);return e&&e!==this?this.ConvertCoordSpaceRect(i,e):i},t.Legend.prototype.getContentDimensions=function(t){return t&&t!==this?this.ConvertCoordSpaceRect(this._contentDimensions,t):this._contentDimensions},t.Legend.prototype.GetComponentDescription=function(){return t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"LEGEND")},t.Legend.prototype._transferVisibilityProperties=function(e){if(e&&!(e.length<=0))for(var i=this.getOptions().hiddenCategories,n=0;n<e.length;n++){var o=e[n];o.sections&&(i=this._transferVisibilityProperties(o.sections));var r=o.items;if(r&&!(r.length<=0))for(var a=0;a<r.length;a++){var l=r[a],h=s.getItemCategory(l);"hidden"==l.categoryVisibility&&t.ArrayUtils.getIndex(i,h)<0&&i.push(h),l.categoryVisibility=null}}},t.Legend.prototype.UpdateAriaAttributes=function(){if(this.IsParentRoot()){var e=this.getOptions(),i=e.hideAndShowBehavior;("off"!=i&&"none"!=i||"dim"==e.hoverBehavior)&&(this.getCtx().setAriaRole("application"),this.getCtx().setAriaLabel(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"DATA_VISUALIZATION"),t.StringUtils.processAriaLabel(this.GetComponentDescription())])))}},t.Legend.prototype.isNavigable=function(){return this._navigablePeers.length>0},t.Legend.getItemCount=function(e){var i=e.getOptionsCache().getFromCache("itemsCount");if(null!=i)return i;i=0;for(var n=e.getOptions().sections,o=0;o<n.length;o++){var r=n[o];i+=t.Legend.getSectionItemsCount(r)}return e.getOptionsCache().putToCache("itemsCount",i),i},t.Legend.getSectionItemsCount=function(e){var i=0;if(e.items&&(i+=e.items.length),e.sections)for(var n=e.sections,o=0;o<n.length;o++)i+=t.Legend.getSectionItemsCount(n[o]);return i};var e=function(t){this._legend=t,this._options=this._legend.getOptions()};t.Obj.createSubclass(e,t.Automation),e.prototype.GetSubIdForDomElement=function(t){var e=this._legend.getEventManager().GetLogicalObject(t);if(e&&e instanceof r){var i=e.getData(),n=this._getIndicesFromItem(i,this._options);if(n)return"section"+n}return null},e.prototype._getIndicesFromItem=function(t,e){if(e.sections&&e.sections.length>0){for(var i=0;i<e.sections.length;i++){if(e.sections[i]==t)return"["+i+"]";var n=this._getIndicesFromItem(t,e.sections[i]);if(n)return"["+i+"]"+n}return null}if(e.items&&e.items.length>0){for(var o=0;o<e.items.length;o++)if(e.items[o]==t)return":item["+o+"]";return null}},e.prototype.getIndicesFromSeries=function(t,e){if(e.sections&&e.sections.length>0){for(var i=0;i<e.sections.length;i++){var n=this.getIndicesFromSeries(t,e.sections[i]);if(n)return"["+i+"]"+n}return null}if(e.items&&e.items.length>0){for(var o=0;o<e.items.length;o++)if(e.items[o].text==t.name)return":item["+o+"]";return null}},e.prototype.getLegendItem=function(t,e){var i=e.indexOf("["),n=e.indexOf("]");if(i>=0&&n>=0){var o=e.substring(i+1,n),r=e.indexOf(":");e=e.substring(n+1);var s=e.indexOf("["),a=e.indexOf("]");return s>=0&&a>=0?this.getLegendItem(t.sections[o],e):0==r?t.items[o]:t.sections[o]}},e.prototype.getDomElementForSubId=function(e){if(e==t.Automation.TOOLTIP_SUBID)return this.GetTooltipElement(this._legend);for(var i=this.getLegendItem(this._options,e),n=this._legend.__getObjects(),o=0;o<n.length;o++){var r=n[o].getData();if(i==r)return n[o].getDisplayables()[0].getElem()}return null},e.prototype.getTitle=function(){return this._options.title},e.prototype.getItem=function(t){for(var e,i=t.shift(),n=this._options;void 0!=i;)t.length>0?n=n.sections[i]:e=n.items[i],i=t.shift();return e?{text:e.text?e.text:null}:null},e.prototype.getSection=function(t){for(var e,i=t.shift(),n=this._options;void 0!=i;)t.length>0?n=n.sections[i]:e=n.sections[i],i=t.shift();var o={title:e.title?e.title:null,items:e.items?this._generateItemObjects(e.items):null,sections:e.sections?this._generateSectionObjects(e.sections):null};return o},e.prototype._generateItemObjects=function(t){for(var e=[],i=0;i<t.length;i++)e.push({text:t[i].text});return e},e.prototype._generateSectionObjects=function(t){for(var e=[],i=0;i<t.length;i++)e.push({title:t[i].title?t[i].title:null,items:t[i].items?this._generateItemObjects(t[i].items):null,sections:t[i].sections?this._generateSectionObjects(t[i].sections):null});return e};var i=function(){this.Init({skyros:i.VERSION_1,alta:i.SKIN_ALTA,next:i.SKIN_NEXT})};t.Obj.createSubclass(i,t.BaseComponentDefaults),i.SKIN_NEXT={skin:t.CSSStyle.SKIN_NEXT,titleStyle:new t.CSSStyle("color: #737373;"),_sectionTitleStyle:new t.CSSStyle("color: #737373;"),layout:{titleGapWidth:17,titleGapHeight:9,symbolGapWidth:7,symbolGapHeight:4,rowGap:4,columnGap:10,sectionGapHeight:16,sectionGapWidth:24}},i.SKIN_ALTA={skin:t.CSSStyle.SKIN_ALTA,textStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA),titleStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_11+"color: #333333;"),_sectionTitleStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_11+"color: #333333;")},i.VERSION_1={skin:t.CSSStyle.SKIN_SKYROS,orientation:"vertical",position:null,backgroundColor:null,borderColor:null,textStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 11px; color: #333333;"),titleStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 12px; color: #003d5b;"),titleHalign:"start",hiddenCategories:[],hideAndShowBehavior:"off",hoverBehavior:"none",hoverBehaviorDelay:200,scrolling:"asNeeded",halign:"start",valign:"top",drilling:"off",_color:"#a6acb1",_markerShape:"square",_lineWidth:3,layout:{outerGapWidth:3,outerGapHeight:3,titleGapWidth:8,titleGapHeight:3,symbolGapWidth:5,symbolGapHeight:4,rowGap:0,columnGap:8,sectionGapHeight:6,sectionGapWidth:15},isLayout:!1},i.getGapSize=function(e,i){var n=Math.min(t.TextUtils.getTextStringHeight(e.getCtx(),e.getOptions().textStyle)/14,1);return Math.ceil(i*n)},i.prototype.getNoCloneObject=function(t){return{sections:{items:{_dataContext:!0}}}};var n=function(t){this.Init(t.getCtx(),t.processEvent,t),this._legend=t};t.Obj.createSubclass(n,t.EventManager),n.prototype.OnClick=function(t){n.superclass.OnClick.call(this,t);var e=this.GetLogicalObject(t.target);if(e){var i=this.processHideShowEvent(e),o=this.handleClick(e,t);(i||o)&&t.stopPropagation()}},n.prototype.OnMouseOver=function(e){n.superclass.OnMouseOver.call(this,e);var i=this.GetLogicalObject(e.target);if(i){var o=i instanceof t.SimpleObjPeer?i.getParams():null;if(o&&o.isCollapsible&&o.button){var r=o.button;r.drawOverState()}this.UpdateActiveElement(i)}},n.prototype.OnMouseOut=function(e){n.superclass.OnMouseOut.call(this,e);var i=this.GetLogicalObject(e.target);if(i){var o=i instanceof t.SimpleObjPeer?i.getParams():null;if(o&&o.isCollapsible&&o.button){var r=o.button;r.drawUpState()}}},n.prototype.HandleTouchClickInternal=function(t){var e=this.GetLogicalObject(t.target);if(e){var i=t.touchEvent,n=this.processHideShowEvent(e),o=this.handleClick(e,t);(n||o)&&i&&i.preventDefault()}},n.prototype.processHideShowEvent=function(e){var i=this._legend.getOptions().hideAndShowBehavior;if("none"==i||"off"==i)return!1;var n=e.getCategories?e.getCategories():null;if(!n||n.length<=0)return!1;var o=e.getCategories()[0],r=this._legend.getOptions().hiddenCategories||[];r=r.slice();for(var a=e.getDisplayables(),l=0;l<a.length;l++){var h=a[l];h instanceof t.SimpleMarker?h.setHollow(e.getColor()):h instanceof t.Rect&&e.updateAriaLabel()}var u,d=n[0];return s.isCategoryHidden(o,this._legend)?(r.splice(t.ArrayUtils.getIndex(r,o),1),u=t.EventFactory.newCategoryShowEvent(d,r)):(r.push(o),u=t.EventFactory.newCategoryHideEvent(d,r)),this._legend.getOptions().hiddenCategories=r,this.FireEvent(u,this._legend),!0},n.prototype.handleClick=function(e,i){if(e&&e.getAction&&e.getAction())return this.FireEvent(t.EventFactory.newActionEvent("action",e.getAction(),e.getId()),this._legend),!0;if(e instanceof r&&e.isDrillable()){var n=e.getId();return this.FireEvent(t.EventFactory.newChartDrillEvent(n,n,null),this._legend),!0}var o=e instanceof t.SimpleObjPeer?e.getParams():null;return!(!o||!o.isCollapsible)&&(this.toggleSectionCollapse(i,o.id),!0)},n.prototype.ProcessRolloverEvent=function(e,i,n){var o=this._legend.getOptions();if(!("none"==o.hoverBehavior||i.getDisplayables&&i.getDisplayables()[0]instanceof t.Button)){var r=i.getCategories?i.getCategories():[];o.highlightedCategories=n?r.slice():null;var s=t.EventFactory.newCategoryHighlightEvent(o.highlightedCategories,n),a=t.StyleUtils.getTimeMilliseconds(o.hoverBehaviorDelay);this.RolloverHandler.processEvent(s,this._legend.__getObjects(),a,!0)}},n.prototype.onCollapseButtonClick=function(t,e){var i=e.getId();this.toggleSectionCollapse(t,i)},n.prototype.toggleSectionCollapse=function(e,i){for(var n=this._legend.getOptions(),o=0;o<i.length;o++)n=n.sections[i[o]];if(n.expanded="off"==n.expanded?"on":"off",e.type==t.MouseEvent.CLICK){var r=this.GetLogicalObject(this.GetCurrentTargetForEvent(e));r.getNextNavigable&&this.setFocusObj(r.getNextNavigable(e))}var s=this._legend.getKeyboardFocus(),a=!!s&&s.isShowingKeyboardFocusEffect();this._legend.render(),s&&this._legend.setKeyboardFocus(s,a),this.hideTooltip();var l=this._legend.getContentDimensions();this.FireEvent(new t.ResizeEvent(l.w,l.h,l.x,l.y),this._legend)},n.prototype.GetTouchResponse=function(){return this._legend.getOptions()._isScrollingLegend?t.EventManager.TOUCH_RESPONSE_TOUCH_HOLD:t.EventManager.TOUCH_RESPONSE_TOUCH_START},n.prototype.getComponent=function(){return this._legend},n.prototype.isDndSupported=function(){return!0},n.prototype.GetDragSourceType=function(t){var e=this.DragSource.getDragObject();return e instanceof r&&null!=e.getData()._dataContext?"series":null},n.prototype.GetDragDataContexts=function(){var t=this.DragSource.getDragObject();return t instanceof r?[t.getData()._dataContext]:[]},n.prototype.GetDropTargetType=function(t){var e=this._legend.stageToLocal(this.getCtx().pageToStageCoords(t.pageX,t.pageY)),i=this._legend.__getBounds();return i.containsPoint(e.x,e.y)?"legend":null},n.prototype.GetDropEventPayload=function(t){return{}},n.prototype.ShowDropEffect=function(t){var e=this.GetDropTargetType(t);if("legend"==e){var i=this._legend.getOptions()._dropColor,n=this._legend.getCache().getFromCache("background");n&&n.setSolidFill(i)}},n.prototype.ClearDropEffect=function(){var t=this._legend.getCache().getFromCache("background");if(t){var e=this._legend.getOptions().backgroundColor;e?t.setSolidFill(e):t.setInvisibleFill()}};var o=function(t,e){this.Init(t,e)};t.Obj.createSubclass(o,t.KeyboardHandler),o.prototype.Init=function(t,e){o.superclass.Init.call(this,t),this._legend=e},o.prototype.processKeyDown=function(e){var i=e.keyCode,n=this._eventManager.getFocus(),r=n&&n.getDisplayables()[0]instanceof t.Button,s=null;if(null==n&&i==t.KeyboardEvent.TAB){var a=this._legend.__getKeyboardObjects();a.length>0&&(t.EventManager.consumeEvent(e),s=this.getDefaultNavigable(a))}else n&&(i==t.KeyboardEvent.TAB?(t.EventManager.consumeEvent(e),s=n):i==t.KeyboardEvent.ENTER||i==t.KeyboardEvent.SPACE?(i==t.KeyboardEvent.ENTER&&this._eventManager.handleClick(n,e),r?this._eventManager.onCollapseButtonClick(e,n.getDisplayables()[0]):this._eventManager.processHideShowEvent(n),t.EventManager.consumeEvent(e)):!r||i!=t.KeyboardEvent.LEFT_ARROW&&i!=t.KeyboardEvent.RIGHT_ARROW?s=o.superclass.processKeyDown.call(this,e):(this._eventManager.onCollapseButtonClick(e,n.getDisplayables()[0]),t.EventManager.consumeEvent(e)));return s&&this._legend.container.scrollIntoView(s.getDisplayables()[0]),s};var r=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)};t.Obj.createSubclass(r,t.Obj),r.prototype.Init=function(e,i,n,o,r,a){if(this._legend=e,this._displayables=i,this._item=n,this._category=s.getItemCategory(this._item),this._id=this._category?this._category:n.title,this._action=n.action,this._drillable=a,this._spb=n._spb,this._tooltip=o,this._datatip=r,this._isShowingKeyboardFocusEffect=!1,this._action||this._drillable)for(var l=0;l<this._displayables.length;l++)this._displayables[l].setCursor(t.SelectionEffectUtils.getSelectingCursor())},r.associate=function(t,e,i,n,o,s){if(!t||!i)return null;var a=new r(e,t,i,n,o,s);e.__registerObject(a);for(var l=0;l<t.length;l++)e.getEventManager().associate(t[l],a);return a},r.prototype.getData=function(){return this._item},r.prototype.getColor=function(){return this._item.color},r.prototype.getId=function(){return this._id},r.prototype.getDisplayables=function(){return this._displayables},r.prototype.getCategories=function(t){return null!=this._category?[this._category]:null},r.prototype.getAction=function(){return this._action},r.prototype.isDrillable=function(){return this._drillable},r.prototype.getShowPopupBehaviors=function(){return this._spb},r.prototype.getAriaLabel=function(){var e=[],i=this._legend.getOptions(),n=this._legend.getOptions().hideAndShowBehavior,o=s.isCategoryHidden(this._category,this._legend),r=this.getData();return this._displayables[0]instanceof t.Button?(e.push(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"off"==r.expanded?"STATE_COLLAPSED":"STATE_EXPANDED")),t.Displayable.generateAriaLabel(r.title,e)):("off"!=n&&"none"!=n&&e.push(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,o?"STATE_HIDDEN":"STATE_VISIBLE")),this.isDrillable()&&e.push(t.Bundle.getTranslation(i,"stateDrillable",t.Bundle.UTIL_PREFIX,"STATE_DRILLABLE")),null!=r.shortDesc?t.Displayable.generateAriaLabel(r.shortDesc,e):e.length>0?t.Displayable.generateAriaLabel(r.text,e):null)},r.prototype.updateAriaLabel=function(){!t.Agent.deferAriaCreation()&&this._displayables[0]&&this._displayables[0].setAriaProperty("label",this.getAriaLabel())},r.prototype.getNextNavigable=function(e){if(e.type==t.MouseEvent.CLICK)return this;var i=this._legend.__getKeyboardObjects();return t.KeyboardHandler.getNextNavigable(this,e,i,!0)},r.prototype.getKeyboardBoundingBox=function(e){return this._displayables[0]?this._displayables[0].getDimensions(e):new t.Rectangle(0,0,0,0)},r.prototype.getTargetElem=function(){return this._displayables[0]?this._displayables[0].getElem():null},r.prototype.showKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!0,this._displayables[0]&&(this._displayables[0]instanceof t.Button?this._displayables[0].drawOverState():this._displayables[0].setSolidStroke(t.Agent.getFocusColor()))},r.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1,this._displayables[0]&&(this._displayables[0]instanceof t.Button?this._displayables[0].drawUpState():this._displayables[0].setStroke(null))},r.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},r.prototype.getTooltip=function(t){return this._tooltip},r.prototype.getDatatip=function(t){return this._datatip},r.prototype.getDatatipColor=function(t){return this._item.color},r.prototype.isDragAvailable=function(t){return!0},r.prototype.getDragTransferable=function(t,e){return[this.getId()]},r.prototype.getDragFeedback=function(t,e){return this.getDisplayables()};var s=new Object;t.Obj.createSubclass(s,t.Obj),s._DEFAULT_LINE_WIDTH_WITH_MARKER=2,s._LINE_MARKER_SIZE_FACTOR=.6,s._DEFAULT_SYMBOL_SIZE=10,s._BUTTON_SIZE=12,s._FOCUS_GAP=2,s.render=function(e,n){var o=e.getOptions(),r=e.getCtx(),a=t.Agent.isRightToLeft(r);e.__setBounds(n),o.isLayout||s._renderBackground(e,n);var l=new t.SimpleScrollableContainer(r,n.w,n.h),h=new t.Container(r);l.getScrollingPane().addChild(h),e.addChild(l),e.container=l;var u=i.getGapSize(e,o.layout.outerGapWidth),d=i.getGapSize(e,o.layout.outerGapHeight);if(n.x+=u,n.y+=d,n.w-=2*u,n.h-=2*d,n.w<=0||n.h<=0)return new t.Dimension(0,0);var c=s._renderContents(e,h,new t.Rectangle(n.x,n.y,n.w,n.h));if(0==c.w||0==c.h)return new t.Dimension(0,0);l.prepareContentPane(),c.h>n.h?(c.h=n.h,o._isScrollingLegend=!0):o._isScrollingLegend=!1;var p=0,_=0,g=null!=o.hAlign?o.hAlign:o.halign;"center"==g?p=n.x-c.x+(n.w-c.w)/2:"end"==g&&(p=a?n.x-c.x:n.x-c.x+n.w-c.w);var m=null!=o.vAlign?o.vAlign:o.valign;"middle"==m?_=n.y-c.y+(n.h-c.h)/2:"bottom"==m&&(_=n.y-c.y+n.h-c.h);var f=new t.Rectangle(c.x+p-u,c.y+_-d,c.w+2*u,c.h+2*d);if(o.isLayout)return f;(p||_)&&h.setTranslate(p,_);for(var y=e.__getTitles(),v=0;v<y.length;v++)t.LayoutUtils.align(c,y[v].halign,y[v].text,y[v].text.measureDimensions().w);return f},s._renderContents=function(t,e,n){var o=t.getOptions();n=n.clone();var r=s._renderTitle(t,e,o.title,n,null,!0);if(r){var a=r.measureDimensions(),l=i.getGapSize(t,o.layout.titleGapHeight);n.y+=a.h+l,n.h-=Math.floor(a.h+l)}var h=s._renderSections(t,e,o.sections,n,[]);return r?a.getUnion(h):h},s._renderBackground=function(e,i){var n=e.getOptions(),o=n.backgroundColor,r=n.borderColor,s=n.dnd?n.dnd.drop.legend:{};if(o||r||Object.keys(s).length>0){var a=new t.Rect(e.getCtx(),i.x,i.y,i.w,i.h);o?a.setSolidFill(o):a.setInvisibleFill(),r&&(a.setSolidStroke(r),a.setPixelHinting(!0)),e.addChild(a),e.getCache().putToCache("background",a)}},s._renderTitle=function(e,i,n,o,r,s,a,l){var h=e.getOptions(),u=i.getCtx(),d=t.Agent.isRightToLeft(u);if(!n)return null;var c=new t.OutputText(u,n,o.x,o.y),p=h.titleStyle;if(r&&r.titleStyle?p=new t.CSSStyle(r.titleStyle):r&&h._sectionTitleStyle&&(p=h._sectionTitleStyle),c.setCSSStyle(p),t.TextUtils.fitText(c,o.w,1/0,i)){if(d&&c.setX(o.x+o.w-c.measureDimensions().w),h.isLayout)i.removeChild(c);else{var _={id:a,button:l};if(_.isCollapsible=r&&("on"==r.collapsible||1==r.collapsible),e.getEventManager().associate(c,new t.SimpleObjPeer(c.getUntruncatedTextString(),null,null,_)),s){var g=r&&r.titleHalign?r.titleHalign:h.titleHalign;e.__registerTitle({text:c,halign:g})}}return c}return null},s._renderSections=function(e,n,o,r,a){var l=e.getOptions();null==l.symbolWidth&&null==l.symbolHeight?(l.symbolWidth=s._DEFAULT_SYMBOL_SIZE,l.symbolHeight=s._DEFAULT_SYMBOL_SIZE):(null==l.symbolWidth?l.symbolWidth=l.symbolHeight:null==l.symbolHeight&&(l.symbolHeight=l.symbolWidth),l.symbolWidth=parseInt(l.symbolWidth),l.symbolHeight=parseInt(l.symbolHeight));for(var h,u=i.getGapSize(e,l.layout.sectionGapHeight),d=i.getGapSize(e,l.layout.titleGapHeight),c=i.getGapSize(e,l.layout.sectionGapWidth),p=s._getRowHeight(e),_="vertical"!=l.orientation,g=null,m=r.clone(),f=0;f<o.length;f++){var y=a.concat([f]),v="off"==o[f].expanded||0==o[f].expanded?d:u;_?(h=s._renderHorizontalSection(e,n,o[f],m,p),h.w>m.w?(m.w<r.w&&(r.y+=h.h+v,r.h-=h.h+v),h=h.w<=r.w?s._renderHorizontalSection(e,n,o[f],r,p):s._renderVerticalSection(e,n,o[f],r,p,y,!0),r.y+=h.h+v,r.h-=h.h+v,m=r.clone()):(m.w-=h.w+c,t.Agent.isRightToLeft(e.getCtx())||(m.x+=h.w+c))):(h=s._renderVerticalSection(e,n,o[f],r,p,y,!1),r.y+=h.h+v,r.h-=h.h+v),g=g?g.getUnion(h):h}return g},s._createButton=function(e,i,n,o,a,l,h,u,d,c,p){var _=s._createButtonImage(e,o,a+"Enabled",l,h),g=s._createButtonImage(e,o,a+"Over",l,h),m=s._createButtonImage(e,o,a+"Down",l,h),f=new t.Button(e,_,g,m,null,d,c,p),y=r.associate([f],i,n,u,null,!1);return f.setAriaRole("button"),y.updateAriaLabel(),f},s._createButtonImage=function(e,i,n,o,r){var a=t.Agent.isRightToLeft(e)?"RTL":"",l=i[n+a]?i[n+a]:i[n],h=new t.Image(e,l,o,r,s._BUTTON_SIZE,s._BUTTON_SIZE);return h.setInvisibleFill(),h},s._renderVerticalSection=function(e,n,o,r,a,l,h){if(o){var u=e.getOptions(),d=i.getGapSize(e,u.layout.symbolGapWidth),c=i.getGapSize(e,u.layout.rowGap),p=i.getGapSize(e,u.layout.columnGap),_=e.getCtx(),g=t.Agent.isRightToLeft(_),m=r.clone();"off"!=u.scrolling&&(m.h=1/0);var f,y,v="on"==o.collapsible||1==o.collapsible;if(v){var S=g?m.x+m.w-s._BUTTON_SIZE:m.x;if(!u.isLayout){var C="off"==o.expanded||0==o.expanded,E=C?"closed":"open",b=t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,C?"EXPAND":"COLLAPSE",null),T=e.getEventManager();y=s._createButton(_,e,o,u._resources,E,S,m.y,b,l,T.onCollapseButtonClick,T),n.addChild(y)}f=new t.Rectangle(S,m.y,s._BUTTON_SIZE,s._BUTTON_SIZE);var A=i.getGapSize(e,u.layout.symbolGapWidth);g||(m.x+=s._BUTTON_SIZE+A),m.w-=s._BUTTON_SIZE+A}var O=s._renderTitle(e,n,o.title,m,o,!v&&l.length<=1,l,y),P=O?O.measureDimensions():new t.Rectangle(g?m.x+m.w:m.x,m.y,0,0),I=f?P.getUnion(f):P;if(!o.items&&!o.sections||"off"==o.expanded||0==o.expanded)return I;if(I.h>0){var D=i.getGapSize(e,u.layout.titleGapHeight);m.y+=I.h+D,m.h-=I.h+D}if(o.sections){var x=s._renderSections(e,n,o.sections,m,l);I=I.getUnion(x)}if(!o.items)return I;var M=s._calcColumns(e,m,a,o.items,h),L=M.numCols,R=M.numRows,w=M.width,N=m.y;if(0==R||0==L)return I;var U=R*(a+c)-c,B=Math.min(L*(w+p)-p,m.w),H=new t.Rectangle(g?m.x+m.w-B:m.x,m.y,B,U);if(I=I.getUnion(H),u.isLayout)return I;for(var k=w-u.symbolWidth-d,F=0,G=1,j=o.items.length,V=0;V<j;V++){var Y=o.items[V];if(s._createLegendItem(e,n,Y,m,k,a,V),m.y+=a+c,F++,F===R&&G!==L&&(m.y=N,m.w-=w+p,g||(m.x+=w+p),F=0,G++),F===R)break}return I}},s._renderHorizontalSection=function(e,n,o,r,a){if(o){var l=e.getOptions(),h=l.symbolWidth,u=i.getGapSize(e,l.layout.symbolGapWidth),d=i.getGapSize(e,l.layout.columnGap),c=i.getGapSize(e,l.layout.titleGapWidth),p=o.items.length,_=t.Agent.isRightToLeft(e.getCtx()),g=r.clone(),m=s._renderTitle(e,n,o.title,r,o,!1),f=m?m.measureDimensions():new t.Rectangle(_?r.x+r.w:r.x,r.y,0,0);if(!o.items)return f;f.w>0&&(g.w-=f.w+c,_||(g.x+=f.w+c));var y,v,S,C=[],E=r.w-g.w;for(S=0;S<p;S++)y=o.items[S],v=Math.ceil(t.TextUtils.getTextStringWidth(e.getCtx(),y.text,l.textStyle)),E+=v+h+u+d,C.push(v);p>0&&(E-=d);var b=new t.Rectangle(_?r.x+r.w-E:r.x,r.y,E,Math.max(a,f.h));if(l.isLayout||E>r.w)return n.removeChild(m),b;var T;for(S=0;S<p;S++)y=o.items[S],s._createLegendItem(e,n,y,g,C[S],a,S),T=C[S]+h+u,g.w-=T+d,_||(g.x+=T+d);return b}},s._calcColumns=function(e,n,o,r,s){for(var a=e.getOptions(),l=t.Legend.getItemCount(e)>100,h=0,u=0;u<r.length;u++){var d,c=r[u];if(l){var p=new t.OutputText(e.getCtx(),c.text);p.setCSSStyle(a.textStyle),d=t.TextUtils.guessTextDimensions(p).w}else d=t.TextUtils.getTextStringWidth(e.getCtx(),c.text,a.textStyle);d>h&&(h=d)}var _,g,m,f=a.symbolWidth,y=i.getGapSize(e,a.layout.symbolGapWidth),v=i.getGapSize(e,a.layout.rowGap),S=i.getGapSize(e,a.layout.columnGap),C=Math.ceil(f+y+h);s?(m=Math.min(Math.max(Math.floor((n.w+S)/(C+S)),1),r.length),_=Math.min(Math.floor((n.h+v)/(o+v)),Math.ceil(r.length/m)),m=Math.ceil(r.length/_),_=Math.ceil(r.length/m)):n.h==1/0?(m=1,_=r.length):(_=Math.min(Math.floor((n.h+v)/(o+v)),r.length),m=Math.ceil(r.length/_),_=Math.ceil(r.length/m));var E=(n.w-S*(m-1))/m;return g=Math.min(C,E),g<f?{width:0,numCols:0,numRows:0}:{width:g,numCols:m,numRows:_}},s._getRowHeight=function(e){var n=e.getOptions(),o=new t.OutputText(e.getCtx(),"Test");o.setCSSStyle(n.textStyle),o.alignMiddle();var r=t.TextUtils.guessTextDimensions(o).h,s=n.symbolHeight+i.getGapSize(e,n.layout.symbolGapHeight);return Math.ceil(Math.max(r,s))},s._createLegendItem=function(e,n,o,a,l,h,u){var d,c=e.getOptions(),p=e.getCtx(),_=t.Agent.isRightToLeft(p),g=c.symbolWidth,m=i.getGapSize(e,c.layout.symbolGapWidth),f=_?a.x+a.w-g:a.x,y=_?a.x+a.w-g-m:a.x+g+m,v=s._createLegendSymbol(e,f,a.y,h,o,u),S=o.text;if(S){var C=c.textStyle;d=s._createLegendText(n,l,S,C),d&&(d.setX(y),t.TextUtils.centerTextVertically(d,a.y+h/2),_&&d.alignRight())}n.addChild(v);var E=new t.Rect(p,_?y-l-s._FOCUS_GAP:f-s._FOCUS_GAP,a.y-s._FOCUS_GAP,g+m+l+2*s._FOCUS_GAP,h+2*s._FOCUS_GAP);E.setInvisibleFill();var b=c.hideAndShowBehavior;"none"!=b&&"off"!=b&&E.setCursor("pointer"),n.addChild(E);var T=[E,v];null!=d&&T.push(d);var A=r.associate(T,e,o,null!=d?d.getUntruncatedTextString():null,o.shortDesc,s._isItemDrillable(e,o));s.isCategoryHidden(s.getItemCategory(o),e)&&(v.setHollow(A.getColor()),v.setStyle().setClassName()),("none"!=b&&"off"!=b||null!=o.shortDesc)&&(E.setAriaRole("img"),A.updateAriaLabel())},s._isItemDrillable=function(t,e){return"on"==e.drilling||"off"!=e.drilling&&"on"==t.getOptions().drilling},s._createLegendText=function(e,i,n,o){var r=new t.OutputText(e.getCtx(),n);return r.setCSSStyle(o),r=t.TextUtils.fitText(r,i,1/0,e)?r:null},s._createLegendSymbol=function(e,i,n,o,r,a){var l=e.getOptions(),h=e.getCtx(),u=null!=r.type?r.type:r.symbolType;r.markerShape||(r.markerShape=l._markerShape),r.color||(r.color=l._color),r.lineWidth||(r.lineWidth="lineWithMarker"==u?s._DEFAULT_LINE_WIDTH_WITH_MARKER:l._lineWidth);var d,c=l.symbolWidth,p=l.symbolHeight,_=n+o/2,g=i+c/2;if("line"==u)d=s._createLine(h,i,n,c,o,r);else if("lineWithMarker"==u)d=s._createLine(h,i,n,c,o,r),s.isCategoryHidden(s.getItemCategory(r),e)||d.addChild(s._createMarker(e,g,_,c*s._LINE_MARKER_SIZE_FACTOR,p*s._LINE_MARKER_SIZE_FACTOR,r));else if("image"==u)d=s._createImage(e,i,n,c,p,o,r);else if("_verticalBoxPlot"==u)p=Math.max(4*Math.round(p/4),4),d=new t.Container(h),d.addChild(s._createMarker(e,g,_+p/4,c,p/2,s._getBoxPlotOptions(r,"q2"))),d.addChild(s._createMarker(e,g,_-p/4,c,p/2,s._getBoxPlotOptions(r,"q3")));else if("_horizontalBoxPlot"==u){var m=t.Agent.isRightToLeft(h);c=Math.max(4*Math.round(c/4),4);var f=c/4*(m?1:-1);d=new t.Container(h),d.addChild(s._createMarker(e,g+f,_,c/2,p,s._getBoxPlotOptions(r,"q2"))),d.addChild(s._createMarker(e,g-f,_,c/2,p,s._getBoxPlotOptions(r,"q3")))}else d=s._createMarker(e,g,_,c,p,r);return d},s._createImage=function(e,i,n,o,r,s,a){var l=e.getCtx(),h=n+s/2,u=i+o/2;return new t.ImageMarker(l,u,h,o,r,null,a.source)},s._createMarker=function(e,i,n,o,r,s){var a,l=e.getCtx(),h=e.getOptions(),u=s.markerShape,d=s.markerColor?s.markerColor:s.color,c=s.markerStyle||s.markerSvgStyle?s.markerStyle||s.markerSvgStyle:s.style||s.svgStyle,p=s.markerClassName||s.markerSvgClassName?s.markerClassName||s.markerSvgClassName:s.className||s.svgClassName,_=s.pattern;if(_&&"none"!=_?(a=new t.SimpleMarker(l,u,h.skin,0,0,o,r,null,null,!0),a.setFill(new t.PatternFill(_,d,"#FFFFFF")),a.setTranslate(i,n)):(a=new t.SimpleMarker(l,u,h.skin,i,n,o,r,null,null,!0),a.setSolidFill(d)),s.borderColor){var g=s._borderWidth?s._borderWidth:1;a.setSolidStroke(s.borderColor,null,g)}return"square"!=u&&"rectangle"!=u||a.setPixelHinting(!0),a.setClassName(p).setStyle(c),a},s._createLine=function(e,i,n,o,r,s){var a=n+r/2,l=new t.Line(e,i,a,i+o,a),h=new t.SolidStroke(s.color,1,s.lineWidth),u=s.lineStyle;return"dashed"==u?h.setType(t.Stroke.convertTypeString(u),"4,2,4"):"dotted"==u&&h.setType(t.Stroke.convertTypeString(u),"2"),l.setClassName(s.className||s.svgClassName).setStyle(s.style||s.svgStyle),l.setStroke(h),l.setPixelHinting(!0),l},s._getBoxPlotOptions=function(t,e){return{markerShape:"rectangle",color:t._boxPlot[e+"Color"],
pattern:t._boxPlot["_"+e+"Pattern"],className:t._boxPlot[e+"ClassName"]||t._boxPlot[e+"svgClassName"],style:t._boxPlot[e+"Style"]||t._boxPlot[e+"svgStyle"]}},s.getItemCategory=function(t){var e=null;return e=t.categories&&t.categories.length>0?t.categories[0]:t.id?t.id:t.text},s.isCategoryHidden=function(e,i){var n=i.getOptions().hiddenCategories;return!(!n||n.length<=0)&&t.ArrayUtils.getIndex(n,e)!==-1},t.exportProperty(t,"Legend",t.Legend),t.exportProperty(t.Legend,"newInstance",t.Legend.newInstance),t.exportProperty(t.Legend.prototype,"destroy",t.Legend.prototype.destroy),t.exportProperty(t.Legend.prototype,"getAutomation",t.Legend.prototype.getAutomation),t.exportProperty(t.Legend.prototype,"getPreferredSize",t.Legend.prototype.getPreferredSize),t.exportProperty(t.Legend.prototype,"highlight",t.Legend.prototype.highlight),t.exportProperty(t.Legend.prototype,"render",t.Legend.prototype.render),t.exportProperty(e.prototype,"getDomElementForSubId",e.prototype.getDomElementForSubId),t.exportProperty(e.prototype,"getItem",e.prototype.getItem),t.exportProperty(e.prototype,"getSection",e.prototype.getSection),t.exportProperty(e.prototype,"getTitle",e.prototype.getTitle)}(t),t}),define("ojs/internal-deps/dvt/DvtOverview",["./DvtToolkit"],function(t){return function(t){t.OverviewUtils=new Object,t.OverviewUtils.supportsTouch=function(){return t.Agent.isTouchDevice()},t.Obj.createSubclass(t.OverviewUtils,t.Obj),t.OverviewUtils.getDatePosition=function(t,e,i,n){var o=(i-t)*n,r=e-t;return 0==o||0==r?0:o/r},t.OverviewUtils.getPositionDate=function(t,e,i,n){var o=i*(e-t);return 0==o||0==n?t:o/n+t},t.Overview=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.Overview,t.Container),t.Overview.MIN_WINDOW_SIZE=10,t.Overview.DEFAULT_VERTICAL_TIMEAXIS_SIZE=40,t.Overview.DEFAULT_HORIZONTAL_TIMEAXIS_SIZE=20,t.Overview.HANDLE_PADDING_SIZE=20,t.Overview._DEFAULT_AXIS_LABEL_PADDING=5,t.Overview._DEFAULT_WINDOW_BORDER_WIDTH=1,t.Overview.prototype.Init=function(e,n,o){t.Overview.superclass.Init.call(this,e),this._callback=n,this._callbackObj=o,this.isFlashEnvironment()?this._lastChildIndex=7:this._lastChildIndex=6;var r=null!=this._callback||null!=this._callbackObj;r&&(this.EventManager=new i(this,e,n,o),this.EventManager.addListeners(this),t.OverviewUtils.supportsTouch()?(this.addEvtListener(t.TouchEvent.TOUCHSTART,this.HandleTouchStart,!1,this),this.addEvtListener(t.TouchEvent.TOUCHMOVE,this.HandleTouchMove,!1,this),this.addEvtListener(t.TouchEvent.TOUCHEND,this.HandleTouchEnd,!1,this),this.addEvtListener(t.MouseEvent.CLICK,this.HandleShapeClick,!1,this)):(this.addEvtListener(t.MouseEvent.MOUSEOVER,this.HandleShapeMouseOver,!1,this),this.addEvtListener(t.MouseEvent.MOUSEOUT,this.HandleShapeMouseOut,!1,this),this.addEvtListener(t.MouseEvent.CLICK,this.HandleShapeClick,!1,this),this.addEvtListener(t.KeyboardEvent.KEYDOWN,this.HandleKeyDown,!1,this),this.addEvtListener(t.KeyboardEvent.KEYUP,this.HandleKeyUp,!1,this))),this._initPos=0},t.Overview.prototype.setViewportRange=function(t,e,i){null==i&&(i=this.Width);var n=this.getDatePosition(t),o=this.getDatePosition(e);if(!(n<this.getMinimumPosition()||o>this.getMaximumPosition())){var r=Math.max(o-n,this.getMinimumWindowSize());if(r>0&&n>=0&&o<=i){var s=this.getSlidingWindow();this.isHorizontalRTL()?this.setSlidingWindowPos(s,i-(n+r)):this.setSlidingWindowPos(s,n),this.setSlidingWindowSize(s,r),this.ScrollTimeAxis()}}},t.Overview.prototype.setInitialPosition=function(t){t>=this.getMinimumPosition()&&t<=this.getMaximumPosition()&&(this._initPos=t)},t.Overview.prototype.isFeatureOff=function(e){return null!=this._featuresOff&&t.ArrayUtils.getIndex(this._featuresOff,e)!=-1},t.Overview.prototype.isAnimationOnClick=function(){return!("off"===this._animationOnClick)},t.Overview.prototype.render=function(e,i,n){if(null==e){var o=this._start,r=this._end,s=this.getSlidingWindow(),a=this.getSlidingWindowPos(s);null!=s&&0!=a&&(this._renderStart=t.OverviewUtils.getPositionDate(o,r,a,this.Width)),this.removeChildren()}if(null!=i&&null!=n&&(this.Width=i,this.Height=n),e){var l=this.Parse(e);this._applyParsedProperties(l)}var h=null!=this._callback||null!=this._callbackObj;this.createBackground(i,n),h&&this.createSlidingWindow(i,n),this.updateTimeAxis(i,n),this.parseFilledTimeRanges(i,n),this.updateCurrentTime(i,n),this.parseDataXML(i,n),h&&(this.createBorderAroundSlidingWindow(i,n),this.isFlashEnvironment()&&(this._resizeArrow=this.createResizeArrow()),this.updateSlidingWindow(i,n)),null!=this._initialFocusTime&&(this._initPos=Math.max(0,t.OverviewUtils.getDatePosition(this._start,this._end,this._initialFocusTime,this._width))),this._initPos>0&&this.longScrollToPos(this._initPos)},t.Overview.prototype.getParser=function(t){return new e(this)},t.Overview.prototype.Parse=function(t){var e=this.getParser(t);return e.parse(t)},t.Overview.prototype._applyParsedProperties=function(t){this._start=t.start,this._end=t.end,this._width=t.width,this._renderStart=t.renderStart,this._currentTime=t.currentTime,this._initialFocusTime=t.initialFocusTime,this._animationOnClick=t.animationOnClick,this._leftMargin=Math.max(0,t.leftMargin),this._rightMargin=Math.max(0,t.rightMargin),isNaN(this._leftMargin)&&(this._leftMargin=0),isNaN(this._rightMargin)&&(this._rightMargin=0),this._orientation=t.orientation,this._overviewPosition=t.overviewPosition,this._isRtl=t.isRtl,null!=t.featuresOff&&(this._featuresOff=t.featuresOff.split(" ")),null!=t.minimumWindowSize&&t.minimumWindowSize>0&&(this._minimumWindowSize=t.minimumWindowSize),this._borderStyles=t.borderStyles,this._timeAxisInfo=t.timeAxisInfo,null!=t.timeAxisInfo&&(this._ticks=this._timeAxisInfo.ticks),this._formattedTimeRanges=t.formattedTimeRanges,this._borderTopStyle=t.borderTopStyle,this._borderTopColor=t.borderTopColor,this._windowBackgroundColor=t.windowBackgroundColor,this._windowBackgroundAlpha=t.windowBackgroundAlpha,this._windowBorderTopStyle=t.windowBorderTopStyle,this._windowBorderRightStyle=t.windowBorderRightStyle,this._windowBorderBottomStyle=t.windowBorderBottomStyle,this._windowBorderLeftStyle=t.windowBorderLeftStyle,this._windowBorderTopColor=t.windowBorderTopColor,this._windowBorderRightColor=t.windowBorderRightColor,this._windowBorderBottomColor=t.windowBorderBottomColor,this._windowBorderLeftColor=t.windowBorderLeftColor,this._handleTextureColor=t.handleTextureColor,this._handleFillColor=t.handleFillColor,this._handleBackgroundImage=t.handleBackgroundImage,this._handleWidth=t.handleWidth,this._handleHeight=t.handleHeight,this._overviewBackgroundColor=t.overviewBackgroundColor,this._currentTimeIndicatorColor=t.currentTimeIndicatorColor,this._timeIndicatorColor=t.timeIndicatorColor,this._timeAxisBarColor=t.timeAxisBarColor,this._timeAxisBarOpacity=t.timeAxisBarOpacity,this._leftFilterPanelColor=t.leftFilterPanelColor,this._leftFilterPanelAlpha=t.leftFilterPanelAlpha,this._rightFilterPanelColor=t.rightFilterPanelColor,this._rightFilterPanelAlpha=t.rightFilterPanelAlpha},t.Overview.prototype.getDatePosition=function(e){return Math.max(0,t.OverviewUtils.getDatePosition(this._start,this._end,e,this.getOverviewSize()))+this._leftMargin},t.Overview.prototype.getPositionDate=function(e){return t.OverviewUtils.getPositionDate(this._start,this._end,Math.max(0,e-this._leftMargin),this.getOverviewSize())},t.Overview.prototype.isRTL=function(){return"true"==this._isRtl},t.Overview.prototype.isHorizontalRTL=function(){return this.isRTL()&&!this.isVertical()},t.Overview.prototype.isVertical=function(){return"vertical"==this._orientation},t.Overview.prototype.isOverviewAbove=function(){return"above"==this._overviewPosition},t.Overview.prototype.setMargins=function(t,e){!isNaN(t)&&null!=t&&t>0&&(this._leftMargin=t),!isNaN(e)&&null!=e&&e>0&&(this._rightMargin=e)},t.Overview.prototype.getOverviewSize=function(){return this.isVertical()?this.Height-this._leftMargin-this._rightMargin:this.Width-this._leftMargin-this._rightMargin},t.Overview.prototype.getMinimumPosition=function(){return this._leftMargin},t.Overview.prototype.getMaximumPosition=function(){return this.isVertical()?this.Height-this._rightMargin:this.Width-this._rightMargin},t.Overview.prototype.getMinimumWindowSize=function(){return null!=this._minWinSize?this._minWinSize:null!=this._minimumWindowSize?(this._minWinSize=t.OverviewUtils.getDatePosition(this._start,this._end,this._start+this._minimumWindowSize,this.getOverviewSize()),this._minWinSize):t.Overview.MIN_WINDOW_SIZE},t.Overview.prototype.getGrippySize=function(){return 10},t.Overview.prototype.getHandleStart=function(){return t.OverviewUtils.supportsTouch()?this.getHandleSize()/2:0},t.Overview.prototype.getHandleSize=function(){return t.OverviewUtils.supportsTouch()?30:10},t.Overview.prototype.isHandle=function(t){var e=t.getId();return"lh"==e||"rh"==e||"lhb"==e||"rhb"==e||"grpy"==e||"lbgrh"==e||"rbgrh"==e||null!=t.getParent()&&"grpy"==t.getParent().getId()},t.Overview.prototype.getTimeAxisWidth=function(){if(null==this._timeAxisInfo)return 0;if(null==this._timeAxisWidth){var e=parseInt(this._timeAxisInfo.width,10);!isNaN(e)&&e<this.Width?this._timeAxisWidth=e:this._timeAxisWidth=t.Overview.DEFAULT_VERTICAL_TIMEAXIS_SIZE}return this._timeAxisWidth},t.Overview.prototype.getTimeAxisHeight=function(){if(null==this._timeAxisInfo)return 0;if(null==this._timeAxisHeight){var e=parseInt(this._timeAxisInfo.height,10);!isNaN(e)&&e<this.Height?this._timeAxisHeight=e:this._timeAxisHeight=t.Overview.DEFAULT_HORIZONTAL_TIMEAXIS_SIZE}return this._timeAxisHeight},t.Overview.prototype.getPageX=function(e){return t.OverviewUtils.supportsTouch()&&null!=e.targetTouches?e.targetTouches.length>0?e.targetTouches[0].pageX:null:e.pageX},t.Overview.prototype.getPageY=function(e){return t.OverviewUtils.supportsTouch()&&null!=e.targetTouches?e.targetTouches.length>0?e.targetTouches[0].pageY:null:e.pageY},t.Overview.prototype.isLeftAndRightFilterRendered=function(){return!1},t.Overview.prototype.getSlidingWindow=function(){return this.getChildAt(1)},t.Overview.prototype.getLeftBackground=function(){return this.isLeftAndRightFilterRendered()?this.getChildAt(3):null},t.Overview.prototype.getRightBackground=function(){return this.isLeftAndRightFilterRendered()?this.getChildAt(4):null},t.Overview.prototype.getLeftBackgroundHandle=function(){return this.isLeftAndRightFilterRendered()&&!this.isFeatureOff("zoom")?this.getChildAt(5):null},t.Overview.prototype.getRightBackgroundHandle=function(){return this.isLeftAndRightFilterRendered()&&!this.isFeatureOff("zoom")?this.getChildAt(6):null},t.Overview.prototype.getLeftHandle=function(){var t=this._lastChildIndex;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.getRightHandle=function(){var t=this._lastChildIndex-1;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.getLeftTopBar=function(){var t=this._lastChildIndex-2;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.getRightTopBar=function(){var t=this._lastChildIndex-3;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.getBottomBar=function(){var t=this._lastChildIndex-4;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.getTopBar=function(){var t=this._lastChildIndex-5;return this.getChildAt(this.getNumChildren()-t)},t.Overview.prototype.setLinePos=function(t,e,i){this.isVertical()?(e!=-1&&t.setY1(e),i!=-1&&t.setY2(i)):(e!=-1&&t.setX1(e),i!=-1&&t.setX2(i))},t.Overview.prototype.getLinePos1=function(t){return this.isVertical()?t.getY1():t.getX1()},t.Overview.prototype._findDrawable=function(t){var e=t.target;if(null!=e){var i=e.getId();if(null==i)return null;if("_border"==i.substr(i.length-7))return this.getChildAfter(e);if("tick"!=i.substr(0,4)&&"ltb"!=i&&"rtb"!=i&&"bb"!=i&&"tab"!=i)return e}return null},t.Overview.prototype.isMovable=function(t){return!("window"!=t.getId()&&"ftr"!=t.getId()&&"sta"!=t.getId()&&!this.isHandle(t))},t.Overview.prototype.isFlashEnvironment=function(){return window&&window.isFlashEnvironment},t.Overview.prototype.createBackground=function(e,i){var n=new t.Rect(this.getCtx(),0,0,e,i,"bg");return n.setSolidFill(this._overviewBackgroundColor),n.setPixelHinting(!0),this.addChild(n),n},t.Overview.prototype.createSlidingWindow=function(e,i){var n=this.isVertical();if(n)var o=new t.Rect(this.getCtx(),0,0,e,0,"window");else o=new t.Rect(this.getCtx(),0,0,0,i,"window");if(o.setSolidFill(this._windowBackgroundColor,this._windowBackgroundAlpha),o.setPixelHinting(!0),!this.isFeatureOff("zoom")){var r=this.getHandleSize(),s=this.getHandleStart(),a=this.getGrippySize();if(n){var l=(e-36)/2,h=t.PathUtils.moveTo(l,0)+t.PathUtils.quadTo(l+3,6,l+8,8)+t.PathUtils.lineTo(l+28,8)+t.PathUtils.quadTo(l+33,6,l+36,0);t.PathUtils.closePath();var u=t.PathUtils.moveTo(l,0)+t.PathUtils.quadTo(l+3,-6,l+8,-8)+t.PathUtils.lineTo(l+28,-8)+t.PathUtils.quadTo(l+33,-6,l+36,0);t.PathUtils.closePath();var d=new t.Rect(this.getCtx(),0,0,e,r,"lhb"),c=new t.Rect(this.getCtx(),0,0,e,r,"rhb"),p="row-resize";if(this._handleBackgroundImage)var _=this.createGrippyImage(e,a),g=this.createGrippyImage(e,a);else _=this.createGrippy(l),g=this.createGrippy(l)}else{var m=(i-36)/2;h=t.PathUtils.moveTo(0,m)+t.PathUtils.quadTo(6,m+3,8,m+8)+t.PathUtils.lineTo(8,m+28)+t.PathUtils.quadTo(6,m+33,0,m+36),t.PathUtils.closePath(),u=t.PathUtils.moveTo(0,m)+t.PathUtils.quadTo(-6,m+3,-8,m+8)+t.PathUtils.lineTo(-8,m+28)+t.PathUtils.quadTo(-6,m+33,0,m+36),t.PathUtils.closePath(),d=new t.Rect(this.getCtx(),0-s,0,r,i,"lhb"),c=new t.Rect(this.getCtx(),s,0,r,i,"rhb"),p="col-resize",this._handleBackgroundImage?(_=this.createGrippyImage(a,i),g=this.createGrippyImage(a,i)):(_=this.createGrippy(m),g=this.createGrippy(m))}d.setSolidFill(this._windowBackgroundColor,0),c.setSolidFill(this._windowBackgroundColor,0),d.setPixelHinting(!0),c.setPixelHinting(!0);var f=new t.Path(this.getCtx(),h,"lh"),y=new t.Path(this.getCtx(),u,"rh");f.setSolidFill(this._handleFillColor),f.setSolidStroke(this._handleFillColor),y.setSolidFill(this._handleFillColor),y.setSolidStroke(this._handleFillColor),this._windowBackgroundColor==this._handleFillColor&&(f.setPixelHinting(!0),y.setPixelHinting(!0)),d.setCursor(p),c.setCursor(p),f.setCursor(p),y.setCursor(p),_.setCursor(p),g.setCursor(p),o.addChild(d),o.addChild(f),o.addChild(_),o.addChild(c),o.addChild(y),o.addChild(g)}if(o.setCursor("move"),this.addChild(o),n)if(this.isRTL())var v=new t.Line(this.getCtx(),this.getTimeAxisWidth(),0,this.getTimeAxisWidth(),i,"tab");else v=new t.Line(this.getCtx(),e-this.getTimeAxisWidth(),0,e-this.getTimeAxisWidth(),i,"tab");else v=this.isOverviewAbove()?new t.Line(this.getCtx(),0,this.getTimeAxisHeight(),e,this.getTimeAxisHeight(),"tab"):new t.Line(this.getCtx(),0,i-this.getTimeAxisHeight(),e,i-this.getTimeAxisHeight(),"tab");if(v.setSolidStroke(this._timeAxisBarColor,this._timeAxisBarOpacity),v.setPixelHinting(!0),this._timeAxisTopBar=v,this.addChild(v),this.isLeftAndRightFilterRendered()){if(n)var S=new t.Rect(this.getCtx(),0,0,e,0,"lbg"),C=new t.Rect(this.getCtx(),0,0,e,0,"rbg");else S=new t.Rect(this.getCtx(),0,0,0,i,"lbg"),C=new t.Rect(this.getCtx(),0,0,0,i,"rbg");if(S.setSolidFill(this._leftFilterPanelColor,this._leftFilterPanelAlpha),this.addChild(S),C.setSolidFill(this._rightFilterPanelColor,this._rightFilterPanelAlpha),this.addChild(C),t.OverviewUtils.supportsTouch()&&void 0!=s){var r=this.getHandleStart();if(n)var E=new t.Rect(this.getCtx(),0,0,e,s,"lbgrh"),b=new t.Rect(this.getCtx(),0,0,e,s,"rbgrh");else E=new t.Rect(this.getCtx(),0,0,s,i,"lbgrh"),b=new t.Rect(this.getCtx(),0,0,s,i,"rbgrh");E.setSolidFill(this._leftFilterPanelColor,0),this.addChild(E),b.setSolidFill(this._rightFilterPanelColor,0),this.addChild(b)}}},t.Overview.prototype.createGrippyImage=function(e,i){var n=(e-this._handleWidth)/2,o=(i-this._handleHeight)/2,r=new t.Image(this.getCtx(),this._handleBackgroundImage,n,o,this._handleWidth,this._handleHeight,"grpy");return r.setMouseEnabled(!1),r},t.Overview.prototype.createGrippy=function(e){var i=new t.Container(this.getCtx(),"grpy"),n=2,o=9,r=this._handleTextureColor;if(this.isVertical()){for(var s=8+e,a=3,l=0;l<o;l++){var h=new t.Line(this.getCtx(),s+l*n,a,s+l*n+1,a,"dot1"+l);h.setSolidStroke(r),i.addChild(h),a+=n,h=new t.Line(this.getCtx(),s+1+l*n,a,s+1+l*n+1,a,"dot2"+l),h.setSolidStroke(r),i.addChild(h),a+=n,h=new t.Line(this.getCtx(),s+l*n,a,s+l*n+1,a,"dot3"+l),h.setSolidStroke(r),i.addChild(h),a=3}h=new t.Line(this.getCtx(),s+o*n,a,s+o*n+1,a,"dot4"),h.setSolidStroke(r),i.addChild(h),a+=2*n,h=new t.Line(this.getCtx(),s+o*n,a,s+o*n+1,a,"dot5"),h.setSolidStroke(r),i.addChild(h)}else{for(s=3,a=8+e,l=0;l<o;l++)h=new t.Line(this.getCtx(),s,a+l*n,s,a+l*n+1,"dot1"+l),h.setSolidStroke(r),i.addChild(h),s+=n,h=new t.Line(this.getCtx(),s,a+1+l*n,s,a+1+l*n+1,"dot2"+l),h.setSolidStroke(r),i.addChild(h),s+=n,h=new t.Line(this.getCtx(),s,a+l*n,s,a+l*n+1,"dot3"+l),h.setSolidStroke(r),i.addChild(h),s=3;h=new t.Line(this.getCtx(),s,a+o*n,s,a+o*n+1,"dot4"),h.setSolidStroke(r),i.addChild(h),s+=2*n,h=new t.Line(this.getCtx(),s,a+o*n,s,a+o*n+1,"dot5"),h.setSolidStroke(r),i.addChild(h)}return i.setPixelHinting(!0),i},t.Overview.prototype.updateSlidingWindow=function(e,i){var n=this.isVertical(),o=this.getSlidingWindow(),r=this.getOverviewSize(),s=n?this.Height:this.Width,a=this._width,l=this._start,h=this._end,u=this._renderStart,d=t.OverviewUtils.getPositionDate(l,h,0,a),c=t.OverviewUtils.getPositionDate(l,h,s,a),p=this.getDatePosition(d),_=Math.min(s,this.getDatePosition(c)),g=this.getDatePosition(u),m=g,f=_-p;this.isHorizontalRTL()?this.setSlidingWindowPos(o,r-g-f):this.setSlidingWindowPos(o,m),this.setSlidingWindowSize(o,f),this.ScrollTimeAxis(),this._increment=this.calculateIncrement(r)},t.Overview.prototype.createBorderAroundSlidingWindow=function(e,i){var n=this.getSlidingWindow(),o=t.Overview._DEFAULT_WINDOW_BORDER_WIDTH/2;if(this.isVertical())var r=n.getY(),s=r+o,a=r+n.getHeight(),l=a-o,h=0,u=o,d=e,c=d-o,p=new t.Line(this.getCtx(),h,s,e,s,"lh"),_=new t.Line(this.getCtx(),h,l,e,l,"rh"),g=new t.Line(this.getCtx(),u,0,u,r,"ltb"),m=new t.Line(this.getCtx(),u,a,u,i,"rtb"),f=new t.Line(this.getCtx(),c,r,c,a,"bb"),y=new t.Line(this.getCtx(),u,r,u,a,"tb");else r=0,s=r+o,a=i,l=a-o,h=n.getX(),u=h+o,d=h+n.getWidth(),c=d-o,p=new t.Line(this.getCtx(),u,r,u,a,"lh"),_=new t.Line(this.getCtx(),c,r,c,a,"rh"),g=new t.Line(this.getCtx(),0,s,h+1,s,"ltb"),m=new t.Line(this.getCtx(),d-1,s,e,s,"rtb"),f=new t.Line(this.getCtx(),h,l,d,l,"bb"),y=new t.Line(this.getCtx(),h,s,d,s,"tb");p.setPixelHinting(!0),_.setPixelHinting(!0),g.setPixelHinting(!0),m.setPixelHinting(!0),f.setPixelHinting(!0),y.setPixelHinting(!0),"none"!=this._windowBorderLeftStyle&&p.setSolidStroke(this._windowBorderLeftColor),this.addChild(p),"none"!=this._windowBorderRightStyle&&_.setSolidStroke(this._windowBorderRightColor),this.addChild(_),"none"!=this._borderTopStyle&&this._borderTopColor&&(g.setSolidStroke(this._borderTopColor),m.setSolidStroke(this._borderTopColor)),this.addChild(g),this.addChild(m),"none"!=this._windowBorderBottomStyle&&f.setSolidStroke(this._windowBorderBottomColor),this.addChild(f),"none"!=this._windowBorderTopStyle&&y.setSolidStroke(this._windowBorderTopColor),this.addChild(y)},t.Overview.prototype.createResizeArrow=function(){if(this.isVertical())var e=t.PathUtils.moveTo(6,0)+t.PathUtils.lineTo(0,5)+t.PathUtils.lineTo(5,5)+t.PathUtils.lineTo(5,17)+t.PathUtils.lineTo(0,17)+t.PathUtils.lineTo(6,22)+t.PathUtils.lineTo(12,17)+t.PathUtils.lineTo(7,17)+t.PathUtils.lineTo(7,5)+t.PathUtils.lineTo(12,5)+t.PathUtils.closePath();else e=t.PathUtils.moveTo(5,0)+t.PathUtils.lineTo(0,6)+t.PathUtils.lineTo(5,12)+t.PathUtils.lineTo(5,7)+t.PathUtils.lineTo(17,7)+t.PathUtils.lineTo(17,12)+t.PathUtils.lineTo(22,6)+t.PathUtils.lineTo(17,0)+t.PathUtils.lineTo(17,4)+t.PathUtils.lineTo(5,4)+t.PathUtils.lineTo(5,0)+t.PathUtils.closePath();var i=new t.Path(this.getCtx(),e,"arr");return i.setSolidFill("#ffffff"),i.setSolidStroke("#000000"),i.setVisible(!1),this.addChild(i),i},t.Overview.prototype.setRectPos=function(t,e){this.isVertical()?t.setY(e):t.setX(e)},t.Overview.prototype.getRectPos=function(t){return this.isVertical()?t.getY():t.getX()},t.Overview.prototype.getRectSize=function(t){return this.isVertical()?t.getHeight():t.getWidth()},t.Overview.prototype.setRectSize=function(t,e){this.isVertical()?t.setHeight(e):t.setWidth(e)},t.Overview.prototype.getSlidingWindowPos=function(t){return this.isVertical()?t.getTranslateY():t.getTranslateX()},t.Overview.prototype.setSlidingWindowPos=function(e,i){if(i=Math.max(0,i),this.isVertical()?e.setTranslateY(i):e.setTranslateX(i),this.isLeftAndRightFilterRendered()){var n=this.getLeftBackground();n.setWidth(i);var o=i+this.getSlidingWindowSize(e),r=this.getRightBackground();if(r.setX(o),r.setWidth(Math.max(0,this.Width-o)),t.OverviewUtils.supportsTouch()&&!this.isFeatureOff("zoom")){var s=this.getHandleStart(),a=this.getLeftBackgroundHandle();a.setX(i-s);var l=this.getRightBackgroundHandle();l.setX(o)}}},t.Overview.prototype.getSlidingWindowSize=function(t){return this.getRectSize(t)},t.Overview.prototype.setSlidingWindowSize=function(e,i){if(i=Math.max(this.getMinimumWindowSize(),i),i=Math.min(this.isVertical()?this.Height:this.Width,i),this.setRectSize(e,i),this.isLeftAndRightFilterRendered()){var n=this.getSlidingWindowPos(e)+i,o=this.getRightBackground();if(o.setX(n),o.setWidth(Math.max(0,this.Width-n)),t.OverviewUtils.supportsTouch()&&!this.isFeatureOff("zoom")){var r=this.getRightBackgroundHandle();r.setX(n)}}if(!this.isFeatureOff("zoom")){var s=e.getChildAt(3),a=e.getChildAt(4),l=e.getChildAt(5);this.isVertical()?(a.setTranslateY(i),s.setTranslateY(i-this.getHandleSize()),l.setTranslateY(i-this.getGrippySize())):(a.setTranslateX(i),s.setTranslateX(i-this.getHandleSize()),l.setTranslateX(i-this.getGrippySize()))}},t.Overview.prototype.calculateIncrement=function(e){var i=this._width,n=this._start,o=this._end,r=t.OverviewUtils.getPositionDate(n,o,1,e),s=t.OverviewUtils.getPositionDate(n,o,2,e),a=t.OverviewUtils.getDatePosition(n,o,r,i),l=t.OverviewUtils.getDatePosition(n,o,s,i),h=l-a;return h},t.Overview.prototype.updateTimeAxis=function(e,i){if(null!=this._ticks)for(var n=this.isVertical(),o=this.getOverviewSize(),r=(this._start,this._end,0);r<this._ticks.length;r++){var s=this._ticks[r],a=parseInt(s.time,10),l=this.getDatePosition(a),h=s.label,u=0;if(r+1<this._ticks.length){var d=parseInt(this._ticks[r+1].time,10),c=this.getDatePosition(d);u=c-l}else u=o-l;this.isHorizontalRTL()&&(l=o-l),n&&(u=this.Width),u-=2*t.Overview._DEFAULT_AXIS_LABEL_PADDING,this.addTick(l,e,i,"tick"+r),this.addLabel(l,h,e,i,u,"label"+r)}},t.Overview.prototype.addTick=function(e,i,n,o){if(this.isVertical())var r=new t.Line(this.getCtx(),0,e,i,e,o);else r=new t.Line(this.getCtx(),e,0,e,n,o);var s=new t.SolidStroke(this._timeIndicatorColor);s.setStyle(t.Stroke.DASHED,3),r.setStroke(s),r.setPixelHinting(!0),this.addChild(r)},t.Overview.prototype.addLabel=function(e,i,n,o,r,s,a){if(a=a||new t.CSSStyle("font-weight:bold"),this.isVertical()){var l=new t.OutputText(this.getCtx(),i,4,e,s);if(l.setCSSStyle(a),this.isRTL()){this.addChild(l);var h=l.getDimensions();this.removeChild(l),l.setX(Math.max(4,this.Width-h.w-4))}}else{if(this.isOverviewAbove())var u=2;else u=o-this.getTimeAxisHeight()+2;var d=t.Overview._DEFAULT_AXIS_LABEL_PADDING;l=new t.OutputText(this.getCtx(),i,e+d,u,s),l.setCSSStyle(a),this.isHorizontalRTL()&&(this.addChild(l),h=l.getDimensions(),this.removeChild(l),l.setX(e-Math.min(h.w,r)-d))}t.TextUtils.fitText(l,r,1/0,this),l._rawText=l.getUntruncatedTextString()},t.Overview.prototype.updateCurrentTime=function(e,i){if(!(null==this._currentTime||isNaN(this._currentTime)||this._currentTime<this._start||this._currentTime>this._end)){var n=this.getDatePosition(this._currentTime);if(this.isVertical())var o=new t.Line(this.getCtx(),0,n,e,n,"ocd");else this.isRTL()&&(n=e-n),o=new t.Line(this.getCtx(),n,0,n,i,"ocd");o.setSolidStroke(this._currentTimeIndicatorColor),o.setPixelHinting(!0),this.addChild(o)}},t.Overview.prototype.parseFilledTimeRanges=function(t,e){if(null!=this._formattedTimeRanges)for(var i=this._start,n=this._end,o=0;o<this._formattedTimeRanges.length;o++){var r=this._formattedTimeRanges[o];this.addFilledTimeRange(r,i,n,t,e)}},t.Overview.prototype.addFilledTimeRange=function(e,i,n,o,r){var s=parseInt(e.rs,10),a=parseInt(e.re,10),l=e.c;if(null!=s&&null!=a){var h=this.getOverviewSize(),u=this.getDatePosition(s),d=this.getDatePosition(a),c=d-u;if(this.isHorizontalRTL()&&(u=h-u-c,d=h-d-c),this.isVertical())var p=new t.Rect(this.getCtx(),0,u,o-this.getTimeAxisWidth(),c,"ftr");else p=new t.Rect(this.getCtx(),u,this.isOverviewAbove()?this.getTimeAxisHeight():0,c,r-this.getTimeAxisHeight(),"ftr");null!=l&&p.setSolidFill(l,.4),p.setCursor("move"),p.setPixelHinting(!0),this.addChild(p)}},t.Overview.prototype.parseDataXML=function(t,e){},t.Overview.prototype.animateSlidingWindow=function(e,i){var n=this.getSlidingWindow(),o=n.getChildAt(3),r=n.getChildAt(4),s=n.getChildAt(5);if(void 0!=i||e!=this.getSlidingWindowPos(n)){var a=this.getLeftHandle(),l=this.getRightHandle(),h=this.getLeftTopBar(),u=this.getRightTopBar(),d=this.getBottomBar(),c=this.getTopBar();if(this.isVertical()){var p=n.getTranslateY,_=n.setTranslateY,g=n.getHeight,m=n.setHeight,f=a.getY1,y=a.setY1,v=a.getY2,S=a.setY2,C=l.getY1,E=l.setY1,b=l.getY2,T=l.setY2,A=h.getY2,O=h.setY2,P=u.getY1,I=u.setY1,D=d.getY1,x=d.setY1,M=d.getY2,L=d.setY2,R=c.getY1,w=c.setY1,N=c.getY2,U=c.setY2;if(null!=r&&null!=s)var B=r.getTranslateY,H=r.setTranslateY,k=s.getTranslateY,F=s.setTranslateY}else p=n.getTranslateX,_=n.setTranslateX,g=n.getWidth,m=n.setWidth,f=a.getX1,y=a.setX1,v=a.getX2,S=a.setX2,C=l.getX1,E=l.setX1,b=l.getX2,T=l.setX2,A=h.getX2,O=h.setX2,P=u.getX1,I=u.setX1,D=d.getX1,x=d.setX1,M=d.getX2,L=d.setX2,R=c.getX1,w=c.setX1,N=c.getX2,U=c.setX2,null!=r&&null!=s&&(B=r.getTranslateX,H=r.setTranslateX,k=s.getTranslateX,F=s.setTranslateX);var G=this.getMinimumPosition(),j=this.getMaximumPosition(),V=this.getSlidingWindowSize(n);e=void 0!=i?Math.max(G,Math.min(j-i,e)):Math.max(G,Math.min(j-V,e));var Y=this.isAnimationOnClick()?new t.Animator(this.getCtx(),.5,0,t.Easing.linear):null;if(this.animateProperty(Y,n,p,_,e),void 0!=i&&(this.animateProperty(Y,n,g,m,i),null!=r&&this.animateProperty(Y,r,B,H,i),null!=o&&this.animateProperty(Y,o,B,H,i-this.getHandleSize()),null!=s&&this.animateProperty(Y,s,k,F,i-this.getGrippySize())),this.animateProperty(Y,a,f,y,e),this.animateProperty(Y,a,v,S,e),void 0!=i?(this.animateProperty(Y,l,C,E,e+i),this.animateProperty(Y,l,b,T,e+i)):(this.animateProperty(Y,l,C,E,e+V),this.animateProperty(Y,l,b,T,e+V)),this.animateProperty(Y,h,A,O,e+1),void 0!=i?this.animateProperty(Y,u,P,I,e+i-1):this.animateProperty(Y,u,P,I,e+V-1),this.animateProperty(Y,d,D,x,e),this.animateProperty(Y,c,R,w,e),void 0!=i?(this.animateProperty(Y,d,M,L,e+i),this.animateProperty(Y,c,N,U,e+i)):(this.animateProperty(Y,d,M,L,e+V),this.animateProperty(Y,c,N,U,e+V)),this.isLeftAndRightFilterRendered()){var W=this.getLeftBackground(),z=W.getWidth,K=W.setWidth;this.animateProperty(Y,W,z,K,e);var Z=e+V,X=this.getRightBackground(),q=X.getWidth,Q=X.setWidth,J=X.getX,$=X.setX;if(this.isVertical())var tt=this.Height;else tt=this.Width;if(this.animateProperty(Y,X,q,Q,tt-Z),this.animateProperty(Y,X,J,$,Z),t.OverviewUtils.supportsTouch()&&!this.isFeatureOff("zoom")){var et=this.getHandleStart(),it=this.getLeftBackgroundHandle(),nt=it.getX,ot=it.setX,rt=this.getRightBackgroundHandle(),st=rt.getX,at=rt.setX;this.animateProperty(Y,it,nt,ot,e-et),this.animateProperty(Y,rt,st,at,Z)}}null!=Y&&Y.play()}},t.Overview.prototype.animateProperty=function(e,i,n,o,r){null!=e?e.addProp(t.Animator.TYPE_NUMBER,i,n,o,r):o.call(i,r)},t.Overview.prototype.HandleShapeMouseOver=function(e){var i=this._findDrawable(e);if(i&&"bg"!=i.getId()&&"ocd"!=i.getId()){if("label"==i.getId().substr(0,5)&&(i instanceof t.OutputText||i instanceof t.BackgroundOutputText))return void(i.isTruncated()&&this.getCtx().getTooltipManager().showDatatip(e.pageX,e.pageY,i._rawText,"#000000"));if(null!=this._resizeArrow&&this.isHandle(i)){var n=this.getCtx().pageToStageCoords(e.pageX,e.pageY);n=this.stageToLocal(n),this.isVertical()?this._resizeArrow.setTranslate(n.x+6,n.y-10):this._resizeArrow.setTranslate(n.x-6,n.y-20),this._resizeArrow.setVisible(!0)}return"window"==i.getId()||"ftr"==i.getId()||"arr"==i.getId()||this.isHandle(i)?void(this.isFlashEnvironment()&&this.setCursor("move")):i}},t.Overview.prototype.HandleShapeMouseOut=function(t){null==this._moveDrawable&&this.setCursor("default");var e=this._findDrawable(t);if(null!=e)return this.isHandle(e)&&null!=this._resizeArrow&&this._resizeArrow.setVisible(!1),e},t.Overview.prototype.HandleShapeClick=function(e,i,n){e.stopPropagation();var o=this._findDrawable(e);if(o&&"window"!=o.getId()&&!this.isHandle(o)){if("bg"==o.getId()||"label"==o.getId().substr(0,5)||"ocd"==o.getId()||"lbg"==o.getId()||"rbg"==o.getId()){void 0==i&&(i=e.pageX),void 0==n&&(n=e.pageY);var r=this.getCtx().pageToStageCoords(i,n);if(r=this.stageToLocal(r),this.isVertical())var s=r.y,a=this.Height;else s=r.x,a=this.Width;var l=this.getSlidingWindow(),h=s-this.getRectSize(l)/2;this.animateSlidingWindow(h),this.isHorizontalRTL()&&(s=this.Width-s);var u=this.getPositionDate(s),d=new t.OverviewEvent(t.OverviewEvent.SUBTYPE_SCROLL_TIME);if(d.setTime(u),h=Math.max(0,Math.min(h,a-this.getRectSize(l))),this.isHorizontalRTL())var c=this.getPositionDate(this.Width-(h+this.getRectSize(l))),p=this.getPositionDate(this.Width-h);else c=this.getPositionDate(h),p=this.getPositionDate(h+this.getRectSize(l));return d.setNewStartTime(c),d.setNewEndTime(p),void this.dispatchEvent(d)}return o}},t.Overview.prototype.beginDragPan=function(e,i,n){var o=this._findDrawable(e);if(null!=o&&this.isMovable(o)){if("ftr"!=o.getId()&&"sta"!=o.getId()||(o=this.getSlidingWindow()),this._initX=i,this._initY=n,this.isHandle(o)){var r=this.getSlidingWindow();this.isHorizontalRTL()?(this._oldEndPos=this.Width-r.getX(),this._oldStartPos=this._oldEndPos-r.getWidth()):(this._oldStartPos=r.getX(),this._oldEndPos=this._oldStartPos+r.getWidth()),"grpy"==o.getParent().getId()&&(o=o.getParent());var s=o.getId();"grpy"==s&&(o=r.getChildBefore(o),s=o.getId()),"lh"!=s&&"rh"!=s||(o=r.getChildBefore(o),s=o.getId()),"lbgrh"==s&&(o=r.getChildAt(0)),"rbgrh"==s&&(o=r.getChildAt(r.getNumChildren()-3)),t.OverviewUtils.supportsTouch()||(this.isVertical()?(o.setY(0-t.Overview.HANDLE_PADDING_SIZE),o.setHeight(2*(o.getHeight()+t.Overview.HANDLE_PADDING_SIZE))):(o.setX(0-t.Overview.HANDLE_PADDING_SIZE),o.setWidth(2*(o.getWidth()+t.Overview.HANDLE_PADDING_SIZE)))),this.overrideCursors(o.getCursor())}this._moveDrawable=o;var a=new t.OverviewEvent(t.OverviewEvent.SUBTYPE_PRE_RANGECHANGE);return this.dispatchEvent(a),!0}return!1},t.Overview.prototype.overrideCursors=function(t){var e=this.getSlidingWindow();if(null!=e&&e.setCursor(t),this.isLeftAndRightFilterRendered()){var i=this.getLeftBackground(),n=this.getRightBackground();null!=i&&null!=n&&(i.setCursor(t),n.setCursor(t))}},t.Overview.prototype.resetCursors=function(){var t=this.getSlidingWindow();if(null!=t&&t.setCursor("move"),this.isLeftAndRightFilterRendered()){var e=this.getLeftBackground(),i=this.getRightBackground();null!=e&&null!=i&&(e.setCursor("default"),i.setCursor("default"))}},t.Overview.prototype.endDragPan=function(){null!=this._moveDrawable&&1==this._isDragPanning&&("window"==this._moveDrawable.getId()?this.finishWindowDrag(0,0):this.isHandle(this._moveDrawable)&&(this.finishHandleDrag(0,0),t.OverviewUtils.supportsTouch()||(this.isVertical()?(this._moveDrawable.setY(0),this._moveDrawable.setHeight(this.getHandleSize())):(this._moveDrawable.setX(0),this._moveDrawable.setWidth(this.getHandleSize()))),this.resetCursors()),this._isDragPanning=!1,this._moveDrawable=null,this._initX=-1)},t.Overview.prototype.contDragPan=function(t,e,i){if(null!=this._moveDrawable&&this._initX!=-1){this._isDragPanning=!0;var n=e-this._initX,o=i-this._initY;this._initX=e,
this._initY=i,"window"==this._moveDrawable.getId()?this.handleWindowDragPositioning(t,n,o):"lh"==this._moveDrawable.getId()||"lhb"==this._moveDrawable.getId()?this.handleLeftHandleDragPositioning(t,n,o):"rh"!=this._moveDrawable.getId()&&"rhb"!=this._moveDrawable.getId()||this.handleRightHandleDragPositioning(t,n,o)}},t.Overview.prototype.HandleTouchStart=function(t){var e=t.touches;this._touchStartX=e[0].pageX,this._touchStartY=e[0].pageY,2==e.length&&(t.preventDefault(),this._touchStartX2=e[1].pageX,this._touchStartY2=e[1].pageY,Math.abs(this._touchStartY-this._touchStartY2)<20?this._counter=0:(this._touchStartX=null,this._touchStartY=null,this._touchStartX2=null,this._touchStartY2=null))},t.Overview.prototype.HandleTouchMove=function(t){t.preventDefault();var e=t.touches;if(null!=this._touchStartX2&&null!=this._touchStartY2){if(this._counter<50)return void this._counter++;var i=e[1].pageX-this._touchStartX2;this.handleRightHandleDragPositioning(null,i,0),this._touchStartX2=e[1].pageX,this._counter=0}else{var n=Math.abs(this._touchStartX-e[0].pageX),o=Math.abs(this._touchStartY-e[0].pageY);(n>3||o>3)&&(this._touchStartX=null,this._touchStartY=null)}},t.Overview.prototype.HandleTouchEnd=function(t){null!=this._touchStartX2&&null!=this._touchStartY2?this.finishHandleDrag(0,0):null!=this._touchStartX&&null!=this._touchStartY&&this.HandleShapeClick(t,this._touchStartX,this._touchStartY),this._touchStartX=null,this._touchStartY=null,this._touchStartX2=null,this._touchStartY2=null},t.Overview.prototype.stopDragAction=function(){this.endDragPan()},t.Overview.prototype.HandleKeyDown=function(e){var i=e.keyCode;if(i===t.KeyboardEvent.LEFT_ARROW||i===t.KeyboardEvent.RIGHT_ARROW){var n=e.shiftKey?this.handleRightHandleDragPositioning:this.handleWindowDragPositioning,o=i===t.KeyboardEvent.LEFT_ARROW?-1:1;n.call(this,e,o,o)}},t.Overview.prototype.HandleKeyUp=function(e){var i=e.keyCode;if(i===t.KeyboardEvent.LEFT_ARROW||i===t.KeyboardEvent.RIGHT_ARROW){var n=e.shiftKey?this.finishHandleDrag:this.finishWindowDrag,o=i===t.KeyboardEvent.LEFT_ARROW?-1:1;n.call(this,o,o)}},t.Overview.prototype.ScrollToStart=function(){var t=this.getSlidingWindow(),e=this.Width;this.isHorizontalRTL()?this.setSlidingWindowPos(t,e-this.getSlidingWindowSize(t)):this.setSlidingWindowPos(t,0),this.ScrollTimeAxis()},t.Overview.prototype.ScrollToEnd=function(){var t=this.getSlidingWindow(),e=this.Width;this.isHorizontalRTL()?this.setSlidingWindowPos(t,0):this.setSlidingWindowPos(t,e-this.getSlidingWindowSize(t)),this.ScrollTimeAxis()},t.Overview.prototype.ScrollByAmount=function(t){var e=this.getSlidingWindow(),i=t/this._increment;if(this.isVertical())var n=this.Height-e.getHeight();else n=this.Width-e.getWidth(),this.isRTL()&&(i=0-i);this.setSlidingWindowPos(e,Math.min(n,this.getSlidingWindowPos(e)+i)),this.ScrollTimeAxis()},t.Overview.prototype.longScrollToPos=function(t){var e=t/this._increment;this.isHorizontalRTL()&&(e=0-e),this.animateSlidingWindow(e)},t.Overview.prototype.ScrollToPos=function(t){var e=this.getSlidingWindow(),i=t/this._increment;this.isHorizontalRTL()&&(i=0-i),this.setSlidingWindowPos(e,i),this.ScrollTimeAxis()},t.Overview.prototype.scrollToTime=function(e){var i=Math.max(0,t.OverviewUtils.getDatePosition(this._start,this._end,e,this._width));this.longScrollToPos(i)},t.Overview.prototype.handleWindowDragPositioning=function(e,i,n){this.fireScrollEvent(t.OverviewEvent.SUBTYPE_SCROLL_POS,i,n)},t.Overview.prototype.finishWindowDrag=function(e,i){this.fireScrollEvent(t.OverviewEvent.SUBTYPE_SCROLL_END,e,i)},t.Overview.prototype.fireScrollEvent=function(e,i,n){var o=this.getSlidingWindow(),r=this.getSlidingWindowPos(o),s=this.getRectSize(o),a=this.getMinimumPosition(),l=this.getMaximumPosition();if(this.isVertical())var h=n;else h=i;if(r+h<=a)if(this.setSlidingWindowPos(o,a),this.isHorizontalRTL())var u=t.OverviewEvent.END_POS;else u=t.OverviewEvent.START_POS;else r+s+h>=l?(this.setSlidingWindowPos(o,l-s),u=this.isHorizontalRTL()?t.OverviewEvent.START_POS:t.OverviewEvent.END_POS):(this.setSlidingWindowPos(o,r+h),u=this.isHorizontalRTL()?(l-s-r-this._leftMargin)*this._increment:(r-this._leftMargin)*this._increment);this.ScrollTimeAxis();var d=new t.OverviewEvent(e);if(d.setPosition(u),this.isHorizontalRTL())var c=this.getPositionDate(this.Width-(r+this.getRectSize(o))),p=this.getPositionDate(this.Width-r);else c=this.getPositionDate(r),p=this.getPositionDate(r+this.getRectSize(o));d.setNewStartTime(c),d.setNewEndTime(p),this.dispatchEvent(d)},t.Overview.prototype.handleLeftHandleDragPositioning=function(t,e,i){this.handleLeftOrRightHandleDragPositioning(t,e,i,!0)},t.Overview.prototype.handleRightHandleDragPositioning=function(t,e,i){this.handleLeftOrRightHandleDragPositioning(t,e,i,!1)},t.Overview.prototype.handleLeftOrRightHandleDragPositioning=function(e,i,n,o){var r=this.getOverviewSize();if(this.isVertical())var s=n;else s=i;if(0!=s){var a=this.getSlidingWindow(),l=this.getSlidingWindowPos(a),h=this.getSlidingWindowSize(a);if(o){if(h-s<=this.getMinimumWindowSize())return;if(l+s<=this.getMinimumPosition())return;if(this.isVertical())var u=this.getCtx().pageToStageCoords(this.getPageX(e),this.getPageY(e)).y;else u=this.getCtx().pageToStageCoords(this.getPageX(e),this.getPageY(e)).x;if(u=this.stageToLocal(u),s>0&&u<=l)return;if(s<0&&u>=l)return;this.setSlidingWindowPos(a,l+s),this.setSlidingWindowSize(a,h-s)}else{if(h+s<=this.getMinimumWindowSize())return;if(l+h+s>=this.getMaximumPosition())return;if(u=this.isVertical()?this.getCtx().pageToStageCoords(this.getPageX(e),this.getPageY(e)).y:this.getCtx().pageToStageCoords(this.getPageX(e),this.getPageY(e)).x,u=this.stageToLocal(u),s>0&&u<=l+h)return;if(s<0&&u>=l+h)return;this.setSlidingWindowSize(a,h+s)}this.ScrollTimeAxis();var d=this.getPositionDate(this.getSlidingWindowSize(a)),c=r*(this._end-this._start)/(d-this._start);if(this.isRangeChangingSupported()){var p=new t.OverviewEvent(t.OverviewEvent.SUBTYPE_RANGECHANGING);if(p.setNewSize(c),p.setEndHandle(this.isHorizontalRTL()?o:!o),o?p.setExpand(s<0):p.setExpand(s>0),this.isHorizontalRTL())var _=this.getPositionDate(this.Width-(this.getSlidingWindowPos(a)+this.getRectSize(a))),g=this.getPositionDate(this.Width-this.getSlidingWindowPos(a));else _=this.getPositionDate(this.getSlidingWindowPos(a)),g=this.getPositionDate(this.getSlidingWindowPos(a)+this.getRectSize(a));p.setNewStartTime(_),p.setNewEndTime(g),this.dispatchEvent(p)}}},t.Overview.prototype.isRangeChangingSupported=function(){return!0},t.Overview.prototype.finishHandleDrag=function(e,i){var n=this._start,o=this._end,r=this._width,s=this.getOverviewSize(),a=this.getSlidingWindow(),l=this.getPositionDate(this.getRectSize(a)),h=s*(o-n)/(l-n),u=this.getPositionDate(this._oldStartPos),d=this.getPositionDate(this._oldEndPos);if(this.isHorizontalRTL())var c=this.getPositionDate(this.Width-(this.getSlidingWindowPos(a)+this.getRectSize(a))),p=this.getPositionDate(this.Width-this.getSlidingWindowPos(a));else c=this.getPositionDate(this.getSlidingWindowPos(a)),p=this.getPositionDate(this.getSlidingWindowPos(a)+this.getRectSize(a));var _=new t.OverviewEvent(t.OverviewEvent.SUBTYPE_RANGECHANGE);_.setOldSize(r),_.setNewSize(h),_.setOldStartTime(u),_.setOldEndTime(d),_.setNewStartTime(c),_.setNewEndTime(p),this.dispatchEvent(_)},t.Overview.prototype.ScrollTimeAxis=function(){var e=this.getSlidingWindow(),i=t.Overview._DEFAULT_WINDOW_BORDER_WIDTH/2,n=this.getSlidingWindowPos(e),o=n+i,r=n+this.getSlidingWindowSize(e),s=r-i,a=this.getLeftHandle(),l=this.getRightHandle(),h=this.getLeftTopBar(),u=this.getRightTopBar(),d=this.getBottomBar(),c=this.getTopBar();this.setLinePos(a,o,o),this.setLinePos(l,s,s),this.setLinePos(h,-1,n),this.setLinePos(u,this.getLinePos1(l),-1),this.setLinePos(d,this.getLinePos1(a),this.getLinePos1(l)),this.setLinePos(c,this.getLinePos1(a),this.getLinePos1(l))},t.Overview.prototype.dispatchEvent=function(e){t.EventDispatcher.dispatchEvent(this._callback,this._callbackObj,this,e)},t.Overview.prototype.destroy=function(){this.EventManager&&(this.EventManager.removeListeners(this),this.EventManager.destroy(),this.EventManager=null),t.OverviewUtils.supportsTouch()?(this.removeEvtListener(t.TouchEvent.TOUCHSTART,this.HandleTouchStart,!1,this),this.removeEvtListener(t.TouchEvent.TOUCHMOVE,this.HandleTouchMove,!1,this),this.removeEvtListener(t.TouchEvent.TOUCHEND,this.HandleTouchEnd,!1,this),this.removeEvtListener(t.MouseEvent.CLICK,this.HandleShapeClick,!1,this)):(this.removeEvtListener(t.MouseEvent.MOUSEOVER,this.HandleShapeMouseOver,!1,this),this.removeEvtListener(t.MouseEvent.MOUSEOUT,this.HandleShapeMouseOut,!1,this),this.removeEvtListener(t.MouseEvent.CLICK,this.HandleShapeClick,!1,this),this.removeEvtListener(t.KeyboardEvent.KEYDOWN,this.HandleKeyDown,!1,this),this.removeEvtListener(t.KeyboardEvent.KEYUP,this.HandleKeyUp,!1,this)),t.Overview.superclass.destroy.call(this)};var e=function(t){this.Init(t)};t.Obj.createSubclass(e,t.Obj),e.prototype.Init=function(t){this._view=t},e.prototype.parse=function(t){var e=t,i=this.ParseRootAttributes(e);return i},e.prototype.ParseRootAttributes=function(e){var i=new Object;if(i.animationOnClick=e.animationOnClick,null!=e.startTime&&(i.start=e.startTime),null!=e.endTime&&(i.end=e.endTime),null==i.start&&(i.start=(new Date).getTime()),(null==i.end||i.end<=i.start)&&(i.end=i.start+864e5),null!=e.currentTime&&(i.currentTime=e.currentTime),null!=e.initialFocusTime&&(i.initialFocusTime=e.initialFocusTime),i.orientation="horizontal",null!=e.orientation&&(i.orientation=e.orientation),i.featuresOff=e.featuresOff,i.minimumWindowSize=e.minimumWindowSize,i.leftMargin=e.leftMargin,i.rightMargin=e.rightMargin,null!=e.viewportEndTime){var n=e.viewportEndTime,o=i.start;null!=e.viewportStartTime&&e.viewportStartTime<n&&(o=e.viewportStartTime),null!=e.viewportEndPos?i.width=this.calculateWidth(i.start,i.end,o,n,e.viewportEndPos):i.width=this.calculateWidth(i.start,i.end,o,n,this._view.Width),i.renderStart=o}else i.renderStart=i.start;return 0==i.width&&(i.width=1e3),i.overviewPosition="below",i.selectionMode="none",i.isRtl=t.Agent.isRightToLeft(this._view.getCtx()).toString(),null!=e.rtl&&(i.isRtl=e.rtl.toString()),i.handleFillColor="#FFFFFF",i.handleTextureColor="#B3C6DB",i.windowBackgroundColor="#FFFFFF",i.windowBackgroundAlpha=1,i.windowBorderTopStyle="solid",i.windowBorderRightStyle="solid",i.windowBorderBottomStyle="solid",i.windowBorderLeftStyle="solid",i.windowBorderTopColor="#4F4F4F",i.windowBorderRightColor="#4F4F4F",i.windowBorderBottomColor="#4F4F4F",i.windowBorderLeftColor="#4F4F4F",i.overviewBackgroundColor="#E6ECF3",i.currentTimeIndicatorColor="#C000D1",i.timeIndicatorColor="#BCC7D2",i.timeAxisBarColor="#e5e5e5",i.timeAxisBarOpacity=1,i.leftFilterPanelColor="#FFFFFF",i.leftFilterPanelAlpha=.7,i.rightFilterPanelColor="#FFFFFF",i.rightFilterPanelAlpha=.7,null!=e.style&&(null!=e.style.handleFillColor&&(i.handleFillColor=e.style.handleFillColor),null!=e.style.handleTextureColor&&(i.handleTextureColor=e.style.handleTextureColor),null!=e.style.handleBackgroundImage&&(i.handleBackgroundImage=e.style.handleBackgroundImage),null!=e.style.handleWidth&&(i.handleWidth=e.style.handleWidth),null!=e.style.handleHeight&&(i.handleHeight=e.style.handleHeight),null!=e.style.windowBackgroundColor&&(i.windowBackgroundColor=e.style.windowBackgroundColor),null!=e.style.windowBackgroundAlpha&&(i.windowBackgroundAlpha=e.style.windowBackgroundAlpha),null!=e.style.windowBorderTopStyle&&(i.windowBorderTopStyle=e.style.windowBorderTopStyle),null!=e.style.windowBorderRightStyle&&(i.windowBorderRightStyle=e.style.windowBorderRightStyle),null!=e.style.windowBorderBottomStyle&&(i.windowBorderBottomStyle=e.style.windowBorderBottomStyle),null!=e.style.windowBorderLeftStyle&&(i.windowBorderLeftStyle=e.style.windowBorderLeftStyle),null!=e.style.windowBorderTopColor&&(i.windowBorderTopColor=e.style.windowBorderTopColor),null!=e.style.windowBorderRightColor&&(i.windowBorderRightColor=e.style.windowBorderRightColor),null!=e.style.windowBorderBottomColor&&(i.windowBorderBottomColor=e.style.windowBorderBottomColor),null!=e.style.windowBorderLeftColor&&(i.windowBorderLeftColor=e.style.windowBorderLeftColor),null!=e.style.overviewBackgroundColor&&(i.overviewBackgroundColor=e.style.overviewBackgroundColor),null!=e.style.currentTimeIndicatorColor&&(i.currentTimeIndicatorColor=e.style.currentTimeIndicatorColor),null!=e.style.timeIndicatorColor&&(i.timeIndicatorColor=e.style.timeIndicatorColor),null!=e.style.leftFilterPanelColor&&(i.leftFilterPanelColor=e.style.leftFilterPanelColor),null!=e.style.leftFilterPanelAlpha&&(i.leftFilterPanelAlpha=e.style.leftFilterPanelAlpha),null!=e.style.rightFilterPanelColor&&(i.rightFilterPanelColor=e.style.rightFilterPanelColor),null!=e.style.rightFilterPanelAlpha&&(i.rightFilterPanelAlpha=e.style.rightFilterPanelAlpha)),i},e.prototype.calculateWidth=function(t,e,i,n,o){var r=o*(e-t),s=n-i;return 0==r||0==s?0:r/s},t.OverviewEvent=function(e){this.Init(t.OverviewEvent.TYPE),this._subtype=e},t.Obj.createSubclass(t.OverviewEvent,t.BaseComponentEvent),t.OverviewEvent.TYPE="overview",t.OverviewEvent.SUBTYPE_PRE_RANGECHANGE="dropCallback",t.OverviewEvent.SUBTYPE_SCROLL_TIME="scrollTime",t.OverviewEvent.SUBTYPE_SCROLL_POS="scrollPos",t.OverviewEvent.SUBTYPE_SCROLL_END="scrollEnd",t.OverviewEvent.SUBTYPE_RANGECHANGE="rangeChange",t.OverviewEvent.SUBTYPE_RANGECHANGING="rangeChanging",t.OverviewEvent.TIME_KEY="time",t.OverviewEvent.POS_KEY="pos",t.OverviewEvent.OLD_SIZE_KEY="oldSize",t.OverviewEvent.NEW_SIZE_KEY="newSize",t.OverviewEvent.OLD_START_TIME_KEY="oldStartTime",t.OverviewEvent.NEW_START_TIME_KEY="newStartTime",t.OverviewEvent.OLD_END_TIME_KEY="oldEndTime",t.OverviewEvent.NEW_END_TIME_KEY="newEndTime",t.OverviewEvent.EXPAND_KEY="expand",t.OverviewEvent.END_HANDLE_KEY="endHandle",t.OverviewEvent.START_POS=-1,t.OverviewEvent.END_POS=-2,t.OverviewEvent.prototype.getSubType=function(){return this._subtype},t.OverviewEvent.prototype.setTime=function(e){this.addParam(t.OverviewEvent.TIME_KEY,e)},t.OverviewEvent.prototype.getTime=function(){return this.getParamValue(t.OverviewEvent.TIME_KEY)},t.OverviewEvent.prototype.setOldSize=function(e){this.addParam(t.OverviewEvent.OLD_SIZE_KEY,e)},t.OverviewEvent.prototype.getOldSize=function(){return this.getParamValue(t.OverviewEvent.OLD_SIZE_KEY)},t.OverviewEvent.prototype.setNewSize=function(e){this.addParam(t.OverviewEvent.NEW_SIZE_KEY,e)},t.OverviewEvent.prototype.getNewSize=function(){return this.getParamValue(t.OverviewEvent.NEW_SIZE_KEY)},t.OverviewEvent.prototype.setOldStartTime=function(e){this.addParam(t.OverviewEvent.OLD_START_TIME_KEY,e)},t.OverviewEvent.prototype.getOldStartTime=function(){return this.getParamValue(t.OverviewEvent.OLD_START_TIME_KEY)},t.OverviewEvent.prototype.setNewStartTime=function(e){this.addParam(t.OverviewEvent.NEW_START_TIME_KEY,e)},t.OverviewEvent.prototype.getNewStartTime=function(){return this.getParamValue(t.OverviewEvent.NEW_START_TIME_KEY)},t.OverviewEvent.prototype.setOldEndTime=function(e){this.addParam(t.OverviewEvent.OLD_END_TIME_KEY,e)},t.OverviewEvent.prototype.getOldEndTime=function(){return this.getParamValue(t.OverviewEvent.OLD_END_TIME_KEY)},t.OverviewEvent.prototype.setNewEndTime=function(e){this.addParam(t.OverviewEvent.NEW_END_TIME_KEY,e)},t.OverviewEvent.prototype.getNewEndTime=function(){return this.getParamValue(t.OverviewEvent.NEW_END_TIME_KEY)},t.OverviewEvent.prototype.setExpand=function(e){this.addParam(t.OverviewEvent.EXPAND_KEY,e)},t.OverviewEvent.prototype.isExpand=function(){return this.getParamValue(t.OverviewEvent.EXPAND_KEY)},t.OverviewEvent.prototype.setEndHandle=function(e){this.addParam(t.OverviewEvent.END_HANDLE_KEY,e)},t.OverviewEvent.prototype.isEndHandle=function(){return this.getParamValue(t.OverviewEvent.END_HANDLE_KEY)},t.OverviewEvent.prototype.setPosition=function(e){this.addParam(t.OverviewEvent.POS_KEY,e)},t.OverviewEvent.prototype.getPosition=function(){return this.getParamValue(t.OverviewEvent.POS_KEY)};var i=function(t){this.Init(t.getCtx(),t.processEvent,t),this._overview=t};t.Obj.createSubclass(i,t.EventManager),i.prototype.addListeners=function(e){t.SvgDocumentUtils.addDragListeners(this._overview,this._onDragStart,this._onDragMove,this._onDragEnd,this)},i.prototype._onDragStart=function(e){return t.Agent.isTouchDevice()?this._onTouchDragStart(e):this._onMouseDragStart(e)},i.prototype._onDragMove=function(e){return t.Agent.isTouchDevice()?this._onTouchDragMove(e):this._onMouseDragMove(e)},i.prototype._onDragEnd=function(e){return t.Agent.isTouchDevice()?this._onTouchDragEnd(e):this._onMouseDragEnd(e)},i.prototype._getRelativePosition=function(e,i){return this._stageAbsolutePosition||(this._stageAbsolutePosition=this._context.getStageAbsolutePosition()),new t.Point(e-this._stageAbsolutePosition.x,i-this._stageAbsolutePosition.y)},i.prototype._onMouseDragStart=function(e){if(e.button!=t.MouseEvent.RIGHT_CLICK_BUTTON){var i=this._getRelativePosition(e.pageX,e.pageY);t.EventManager.consumeEvent(e);var n=this.getCtx().getStage(),o=n.getSVGRoot().parentNode;return o.focus(),this._overview.beginDragPan(e,i.x,i.y)}return!1},i.prototype._onMouseDragMove=function(t){var e=this._getRelativePosition(t.pageX,t.pageY);return t.stopPropagation(),this._overview.contDragPan(t,e.x,e.y),!0},i.prototype._onMouseDragEnd=function(t){t.stopPropagation(),this._overview.endDragPan(),this._stageAbsolutePosition=null},i.prototype._onTouchDragStart=function(t){var e=t.touches;if(t.stopPropagation(),1==e.length){var i=this._getRelativePosition(e[0].pageX,e[0].pageY);return t.preventDefault(),this._overview.beginDragPan(t,i.x,i.y)}return!1},i.prototype._onTouchDragMove=function(t){var e=t.touches;if(1==e.length){var i=this._getRelativePosition(e[0].pageX,e[0].pageY);this._overview.contDragPan(t,i.x,i.y),t.preventDefault()}t.stopPropagation()},i.prototype._onTouchDragEnd=function(e){this._overview.endDragPan(),t.EventManager.consumeEvent(e),this._stageAbsolutePosition=null},t.exportProperty(t,"Overview",t.Overview),t.exportProperty(t.Overview.prototype,"render",t.Overview.prototype.render)}(t),t}),define("ojs/internal-deps/dvt/DvtChart",["./DvtToolkit","./DvtAxis","./DvtLegend","./DvtOverview"],function(t){return function(t){t.Chart=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.Chart,t.BaseComponent),t.Chart.newInstance=function(e,i,n){return new t.Chart(e,i,n)},t.Chart.getDefaults=function(t){return(new a).getDefaults(t)},t.Chart.prototype.Init=function(e,n,o){t.Chart.superclass.Init.call(this,e,n,o),this.Defaults=new a,this.EventManager=new i(this),this.EventManager.addListeners(this),t.Agent.isTouchDevice()||this.EventManager.setKeyboardHandler(this.CreateKeyboardHandler(this.EventManager)),this.setId("chart1000"+Math.floor(1e9*Math.random())),this.legend=null,this.xAxis=null,this.yAxis=null,this.y2Axis=null,this.overview=null,this.xScrollbar=null,this.yScrollbar=null,this.dragButtons=null,this.pieChart=null,this.pieCenterDiv=null,this.Peers=[],this.SeriesStyleArray=[],this._numFrontObjs=0,this._numSelectedObjsInFront=0,this._dataLabels=null,this._rawOptions=null},t.Chart.prototype.GetComponentDescription=function(){var e=this.getOptions(),i=t.Bundle.getTranslation(e,"componentName",t.Bundle.UTIL_PREFIX,"CHART"),n="",o=t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"ARIA_LABEL_DESC_DELIMITER");return e.title.text&&(n+=this.Options.title.text,e.subtitle.text&&(n+=o+this.Options.subtitle.text)),e.footnote.text&&(n=0==n.length?this.Options.footnote.text:n.concat(o,this.Options.footnote.text)),n.length>0?t.Bundle.getTranslation(e,"labelAndValue",t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[i,n]):i},t.Chart.prototype.SetOptions=function(e){e?(this._rawOptions=e,this.Options=this.Defaults.calcOptions(e),this.getOptionsCache().clearCache(),k.processDataObject(this),(!t.Agent.isEnvironmentBrowser()||z.isScatterBubble(this)&&k.getSeriesCount(this)*k.getGroupCount(this)>et.FILTER_THRESHOLD_SCATTER_BUBBLE)&&(this.Options.animationOnDisplay="none",this.Options.animationOnDataChange="none")):this.Options||(this.Options=this.GetDefaults());var i=this.Options.selectionMode;"single"==i?this._selectionHandler=new t.SelectionHandler(t.SelectionHandler.TYPE_SINGLE):"multiple"==i?this._selectionHandler=new t.SelectionHandler(t.SelectionHandler.TYPE_MULTIPLE):this._selectionHandler=null,this.EventManager.setSelectionHandler(this._selectionHandler);var n=this.Options._spb;if(n){this._popupBehaviors={};for(var o in n)for(var r=n[o],s=0;s<r.length;s++){this._popupBehaviors[o]||(this._popupBehaviors[o]=[]);var a=r[s],l=a.popupId,h=a.triggerType,u=a.alignId,d=a.align;this._popupBehaviors[o].push(new t.ShowPopupBehavior(l,h,u,d))}}},t.Chart.prototype.render=function(e,i,n){this.getCache().clearCache();var o=this.getCtx(),r=this.Options?this.Options.animationOnDataChange:"none",s="none"!=r?new I(this):null,a=this.__cacheChartFocus();this._container&&this.__cleanUp(),this.SetOptions(e),isNaN(i)||isNaN(n)||(this.Width=i,this.Height=n);var l=new t.Container(o);this.addChild(l),J.render(this,l,new t.Rectangle(0,0,this.Width,this.Height)),z.isSpark(this)&&this.EventManager.removeListeners(this),this.StopAnimation();var h=V.getAnimationOnDisplay(this),u=V.getAnimationDuration(this),d=new t.Rectangle(0,0,this.Width,this.Height),c=!1;if(this._container){if("none"!=r&&e)if(this.Animation=t.BlackBoxAnimationHandler.getCombinedAnimation(o,r,this._container,l,d,u),this.Animation)c=!0;else if("auto"==r&&this.getPlotArea()){var p=this.__getPlotAreaSpace();this._delContainer=et.createClippedGroup(this,this._container,new t.Rectangle(0,0,p.w,p.h)),this.Animation=P.createAnimation(s,this,r,u,this._delContainer),this._delContainer.getNumChildren()>0&&this.getPlotArea().addChild(this._delContainer)}}else"none"!=h&&(this.Animation=t.BlackBoxAnimationHandler.getInAnimation(o,h,l,d,u),this.Animation||"auto"!=h||(this.Animation=O.createAnimation(this,h,u)));this.Animation?(this.EventManager.removeListeners(this),t.Playable.appendOnEnd(this.Animation,this._onAnimationEnd,this),this.Animation.play(),this._oldContainer=this._container,!c&&this._oldContainer&&this._oldContainer.removeFromParent()):this._container&&(this._container.removeFromParent(),this._container.destroy(),this._container=null),this._container=l,this._dataCursor=J.renderDataCursor(this),this.UpdateAriaAttributes(),this.__restoreChartFocus(a),this.Animation||this.RenderComplete()},t.Chart.prototype.__cleanUp=function(){this._dataCursor&&(this.removeChild(this._dataCursor),this._dataCursor=null),this.EventManager&&(this.EventManager.hideHoverFeedback(),this.EventManager.setPanZoomHandler(null),this.EventManager.setMarqueeZoomHandler(null),this.EventManager.setMarqueeSelectHandler(null),this.EventManager.panButton=null,this.EventManager.zoomButton=null,this.EventManager.selectButton=null),this.pieCenterDiv&&(this.getCtx().getContainer().removeChild(this.pieCenterDiv),this.pieCenterDiv=null),this.Peers=[],this.xScrollbar=null,this.yScrollbar=null,this.dragButtons&&(this.removeChild(this.dragButtons),this.dragButtons.destroy(),this.dragButtons=null),this._plotArea=null,this._areaContainer=null,this._dataLabels=null,this.getCache().clearCache()},t.Chart.prototype.__cleanUpAxisAndPlotArea=function(){this.EventManager.hideHoverFeedback(),this.Peers=[],this.xAxis&&(this._container.removeChild(this.xAxis),this.xAxis.destroy()),this.yAxis&&(this._container.removeChild(this.yAxis),this.yAxis.destroy()),this.y2Axis&&(this._container.removeChild(this.y2Axis),this.y2Axis.destroy()),this._plotArea&&this._plotArea==this._panZoomTarget?this._plotArea.setVisible(!1):this._plotArea&&(this._container.removeChild(this._plotArea),this._plotArea.destroy()),this._plotArea=null,this.getCache().clearCache()},t.Chart.prototype._onAnimationEnd=function(){this._oldContainer&&(this._oldContainer.removeFromParent(),this._oldContainer.destroy(),this._oldContainer=null),this._delContainer&&(this._delContainer.removeFromParent(),this._delContainer.destroy(),this._delContainer=null),this.AnimationStopped||this.RenderComplete(),this.EventManager.addListeners(this),this.Animation=null,this.AnimationStopped=!1},t.Chart.prototype.CreateKeyboardHandler=function(t){return new n(t,this)},t.Chart.prototype.getAutomation=function(){return new e(this)},t.Chart.prototype.getValuesAt=function(t,e){var i=this.__getPlotAreaSpace(),n=t-i.x,o=e-i.y,r=z.isPolar(this),s=z.isHorizontal(this);if(r){n-=i.w/2,o-=i.h/2;var a=Math.sqrt(n*n+o*o),l=Math.atan2(n,-o);return l<0&&(l+=2*Math.PI),{x:this.xAxis?this.xAxis.getValueAt(l):null,y:this.yAxis?this.yAxis.getValueAt(a):null}}return{x:this.xAxis?this.xAxis.getValueAt(s?o:n):null,y:this.yAxis?this.yAxis.getValueAt(s?n:o):null,y2:this.y2Axis?this.y2Axis.getValueAt(s?n:o):null}},t.Chart.prototype.filter=function(t,e){var i="out"==e?"hidden":"visible";F.setVisibility(this,t,i),this.render(this.Options)},t.Chart.prototype.highlight=function(e){this.getOptions().highlightedCategories=t.JsonUtils.clone(e),t.CategoryRolloverHandler.highlight(e,this.getObjects(),"any"==this.getOptions().highlightMatch),this.legend&&this.legend.highlight(e),this.pieChart&&this.pieChart.highlight(e),this.overview&&this.overview.getBackgroundChart().highlight(e)},t.Chart.prototype.select=function(e){var i=this.getOptions();i.selection=t.JsonUtils.clone(e);var n=k.getInitialSelection(this);F.setInitialSelection(this,n),this.pieChart&&this.pieChart.setInitialSelection()},t.Chart.prototype.positionDataCursor=function(e){var i=this.getEventManager().getDataCursorHandler();if(i){if(e){var n=this.xAxis&&null!=e.x?this.xAxis.getCoordAt(e.x):null,o=null;if(z.isBLAC(this)?this.yAxis&&null!=e.y?o=this.yAxis.getBoundedCoordAt(e.y):this.y2Axis&&null!=e.y2&&(o=this.yAxis.getBoundedCoordAt(e.y2)):o=this.yAxis&&null!=e.y?this.yAxis.getCoordAt(e.y):null,null!=n&&null!=o){var r=this.__getPlotAreaSpace(),s=et.convertAxisCoord(this,new t.Point(n,o),r);return void i.processMove(new t.Point(r.x+s.x,r.y+s.y),!0)}}i.processEnd(!0)}},t.Chart.prototype.processEvent=function(e,i){var n=e.type;if("categoryHide"==n||"categoryShow"==n)this.filter(e.category,"categoryHide"==n?"out":"in");else if("categoryHighlight"==n)this!=i&&this.highlight(e.categories),this.legend&&this.legend!=i&&this.legend.processEvent(e,i);else if("selection"==n)e=this._processSelectionEvent(e);else if(n==t.PanZoomEvent.TYPE)e=this._processPanZoomEvent(e);else if(n==t.MarqueeEvent.TYPE)e=this._processMarqueeEvent(e);else if(n==t.OverviewEvent.TYPE){var o=e.getSubType();if(o==t.OverviewEvent.SUBTYPE_PRE_RANGECHANGE)return;var r=o==t.OverviewEvent.SUBTYPE_SCROLL_TIME||o==t.OverviewEvent.SUBTYPE_SCROLL_END||o==t.OverviewEvent.SUBTYPE_RANGECHANGE;e=this._processScrollbarEvent(e.getNewStartTime(),e.getNewEndTime(),r,i)}else n==t.SimpleScrollbarEvent.TYPE?e=this._processScrollbarEvent(e.getNewMin(),e.getNewMax(),e.getSubtype()==t.SimpleScrollbarEvent.SUBTYPE_END,i):"adfShowPopup"==n&&(e=this._processShowPopupEvent(e));if(e){if(n=e.type,"selection"==n){var s=this.getOptions(),a=s.selection,l=k.getCurrentSelection(this);e.complete&&(s.selection=l),a=a?a:[],l=l?l:[];var h,u,d={};for(h=0;h<a.length;h++)d[a[h].id]=!0;var c={};for(u=0;u<l.length;u++)c[l[u].id]=!0;var p={};for(u=0;u<l.length;u++){var _=l[u].id;d[_]||(p[_]=!0)}var g={};for(h=0;h<a.length;h++){var m=a[h].id;c[m]||(g[m]=!0)}e.addedSet=p,e.removedSet=g;for(var f=0;f<e.selection.length;f++)F.addEventData(this,e.selection[f]);e.component=this.getOptions()._widgetConstructor}else"drill"==n&&(F.addEventData(this,e),e.component=this.getOptions()._widgetConstructor);this.dispatchEvent(e)}},t.Chart.prototype._processSelectionEvent=function(e){var i=F.processIds(this,e.selection);return this._updateOverviewSelection(),t.EventFactory.newChartSelectionEvent(i,!0)},t.Chart.prototype._processPanZoomEvent=function(e){var i=e.getSubtype(),n=i==t.PanZoomEvent.SUBTYPE_PAN_START||i==t.PanZoomEvent.SUBTYPE_PINCH_START;return n?(t.Agent.isTouchDevice()&&this._panZoomTarget!=this._plotArea&&(this._container.removeChild(this._panZoomTarget),this._panZoomTarget=this._plotArea),null):(this._lastPanZoomEvent?(e.dxMin+=this._lastPanZoomEvent.dxMin,e.dxMax+=this._lastPanZoomEvent.dxMax,e.dyMin+=this._lastPanZoomEvent.dyMin,e.dyMax+=this._lastPanZoomEvent.dyMax):t.Context.requestAnimationFrame(t.Obj.createCallback(this,this._animatePanZoomEvent)),this._lastPanZoomEvent=e,null)},t.Chart.prototype._animatePanZoomEvent=function(){var e=this._lastPanZoomEvent;this._lastPanZoomEvent=null;var i,n=e.getSubtype(),o=n==t.PanZoomEvent.SUBTYPE_PAN_END||n==t.PanZoomEvent.SUBTYPE_ZOOM||n==t.PanZoomEvent.SUBTYPE_PINCH_END;if(F.isLiveScroll(this)?(i=F.getAxisBoundsByDelta(this,e.dxMin,e.dxMax,e.dyMin,e.dyMax),this._setScrollbarViewport(i),this._setViewport(i,o)):(i=F.getAxisBoundsByDelta(this,e.dxMinTotal,e.dxMaxTotal,e.dyMinTotal,e.dyMaxTotal),this._setScrollbarViewport(i),o&&this._setViewport(i,o)),o&&(J._setEventHandlers(this),this._panZoomTarget!=this._plotArea&&(this._container.removeChild(this._panZoomTarget),this._panZoomTarget=null)),o||!i.unchanged){var r;r=z.isBLAC(this)?t.EventFactory.newChartViewportChangeEvent(o,i.xMin,i.xMax,i.startGroup,i.endGroup,null,null):t.EventFactory.newChartViewportChangeEvent(o,i.xMin,i.xMax,null,null,i.yMin,i.yMax),this.dispatchEvent(r)}},t.Chart.prototype._processMarqueeEvent=function(e){var n,o=e.getSubtype(),r=this.EventManager;if(F.adjustBounds(e),r.getDragMode()==i.DRAG_MODE_SELECT){var s=r.getSelectionHandler();if(o==t.MarqueeEvent.SUBTYPE_START)this._initSelection=e.ctrlKey?s.getSelectedIds():[];else{var a=F.getBoundedObjects(this,e);s.processInitialSelections(this._initSelection,this.getChartObjPeers()),s.processGroupSelection(a,!0)}var l=s.getSelectedIds();n=F.getAxisBounds(this,e,!1);var h=o==t.MarqueeEvent.SUBTYPE_END,u=t.EventFactory.newChartSelectionEvent(l,h,n.xMin,n.xMax,n.startGroup,n.endGroup,n.yMin,n.yMax,n.y2Min,n.y2Max);return o==t.MarqueeEvent.SUBTYPE_END&&this._updateOverviewSelection(),u}return r.getDragMode()==i.DRAG_MODE_ZOOM?o!=t.MarqueeEvent.SUBTYPE_END?null:(n=F.getAxisBounds(this,e,!0),this._setViewport(n,!0),this._setScrollbarViewport(n),J._setEventHandlers(this),z.isBLAC(this)?t.EventFactory.newChartViewportChangeEvent(!0,n.xMin,n.xMax,n.startGroup,n.endGroup,null,null):t.EventFactory.newChartViewportChangeEvent(!0,n.xMin,n.xMax,null,null,n.yMin,n.yMax)):null},t.Chart.prototype._processScrollbarEvent=function(e,i,n,o){return this._lastScrollbarEvent||t.Context.requestAnimationFrame(t.Obj.createCallback(this,this._animateScrollbarEvent)),this._lastScrollbarEvent={start:e,end:i,actionDone:n,source:o},null},t.Chart.prototype._animateScrollbarEvent=function(){var e=this._lastScrollbarEvent.start,i=this._lastScrollbarEvent.end,n=this._lastScrollbarEvent.actionDone,o=this._lastScrollbarEvent.source;this._lastScrollbarEvent=null;var r=o==this.yScrollbar?this.yAxis:this.xAxis,s=F.getActualMinMax(r,e,i);if(e=s.min,i=s.max,(F.isLiveScroll(this)||n)&&(o==this.yScrollbar?this._setViewport({yMin:e,yMax:i},n):this._setViewport({xMin:e,xMax:i,unchanged:s.unchanged},n)),n||!s.unchanged){var a;if(o==this.yScrollbar)a=t.EventFactory.newChartViewportChangeEvent(n,null,null,null,null,e,i,null,null);else{var l=F.getAxisStartEndGroup(this.xAxis,e,i);a=t.EventFactory.newChartViewportChangeEvent(n,e,i,l.startGroup,l.endGroup,null,null,null,null)}this.dispatchEvent(a)}},t.Chart.prototype._processShowPopupEvent=function(e){if("mouseHover"!=e.triggerType&&this.isSelectionSupported()&&this.getSelectionHandler().getSelectedCount()>0){var i=F.processIds(this,this.getSelectionHandler().getSelectedIds());e=t.EventFactory.newAdfShowPopupEvent(e.showPopupBehavior,e.launcherBounds,e.launcherId),e[t.BaseComponentEvent.CLIENT_ROW_KEY]=i}return e},t.Chart.prototype._updateOverviewSelection=function(){if(this.overview){var t=this.overview.getBackgroundChart();t.getOptions().selection=k.getCurrentSelection(this),t.render()}},t.Chart.prototype.changeOption=function(e,i,n){this.getOptions()[e]=i,this.dispatchEvent(t.EventFactory.newOptionChangeEvent(e,i,n));
},t.Chart.prototype.registerObject=function(t){this.Peers.push(t)},t.Chart.prototype.getObjects=function(){return this.Peers},t.Chart.prototype.getChartObjPeers=function(){for(var t=[],e=0;e<this.Peers.length;e++)this.Peers[e]instanceof o&&t.push(this.Peers[e]);return t},t.Chart.prototype.getRefObjPeers=function(){for(var t=[],e=0;e<this.Peers.length;e++)this.Peers[e]instanceof r&&t.push(this.Peers[e]);return t},t.Chart.prototype.getObject=function(t,e){for(var i=0;i<this.Peers.length;i++)if(this.Peers[i]instanceof o&&this.Peers[i].getSeriesIndex()==t&&this.Peers[i].getGroupIndex()==e)return this.Peers[i];return null},t.Chart.prototype.getWidth=function(){return this.Width},t.Chart.prototype.getHeight=function(){return this.Height},t.Chart.prototype.getSeriesStyleArray=function(){return this.SeriesStyleArray},t.Chart.prototype.getPlotArea=function(){return this._plotArea},t.Chart.prototype.setPlotArea=function(t){this._plotArea=t},t.Chart.prototype.getType=function(){return this.getOptions().type},t.Chart.prototype.getSkin=function(){return this.getOptions().skin},t.Chart.prototype.getGapWidthRatio=function(){var t=this.getOptions();return null!==t.layout.gapWidthRatio?t.layout.gapWidthRatio:Math.min(this.Width/400,1)},t.Chart.prototype.getGapHeightRatio=function(){var t=this.getOptions();return null!==t.layout.gapHeightRatio?t.layout.gapHeightRatio:Math.min(this.Height/300,1)},t.Chart.prototype.getSelectionHandler=function(){return this._selectionHandler},t.Chart.prototype.isSelectionSupported=function(){return!!this._selectionHandler},t.Chart.prototype.getShowPopupBehaviors=function(t){return this._popupBehaviors?this._popupBehaviors[t]:null},t.Chart.prototype.bringToFrontOfSelection=function(t){var e=t.getParent();if(e){var i=e.getNumChildren();if(i-this._numFrontObjs>1){e.removeChild(t);var n=i-this._numFrontObjs-1;e.addChildAt(t,n)}}t.isSelected()&&t.isHoverEffectShown()||this._numSelectedObjsInFront++},t.Chart.prototype.pushToBackOfSelection=function(t){this._numSelectedObjsInFront>0&&this._numSelectedObjsInFront--;var e=t.getParent();if(e){var i=e.getNumChildren(),n=i-this._numFrontObjs-1-this._numSelectedObjsInFront;n>=0&&(e.removeChild(t),e.addChildAt(t,n))}},t.Chart.prototype.setNumFrontObjs=function(t){this._numFrontObjs=t},t.Chart.prototype.getShapesForViewSwitcher=function(t){var e={};if(this._currentMarkers&&this.Peers)for(var i=0;i<this._currentMarkers.length;i++){var n=this._currentMarkers[i];if(n)for(var o=0;o<n.length;o++){var r=n[o];if(r)for(var s=0;s<this.Peers.length;s++){var a=this.Peers[s],l=a.getDisplayables();if(l&&l.length>0&&l[0]==r){var h=a.getId();if(h){var u=h.getId();if(u){e[u]=r;break}}}}}}else this.pieChart&&(e=this.pieChart.getShapesForViewSwitcher(t));return e},t.Chart.prototype._setViewport=function(t,e){!e&&t.unchanged||(null!=t.xMax&&(this.Options.xAxis.viewportMax=t.xMax),null!=t.xMin&&(this.Options.xAxis.viewportMin=t.xMin),z.isBLAC(this)?(this.Options.xAxis.viewportStartGroup=null,this.Options.xAxis.viewportEndGroup=null,this.Options._initialZoomed=!1):(null!=t.yMax&&(this.Options.yAxis.viewportMax=t.yMax),null!=t.yMin&&(this.Options.yAxis.viewportMin=t.yMin)),this.Options._duringZoomAndScroll=!e,J.rerenderAxisAndPlotArea(this,this._container))},t.Chart.prototype._setScrollbarViewport=function(t){if(this.xAxis&&null!=t.xMin&&null!=t.xMax){var e=this.xAxis.actualToLinear(t.xMin),i=this.xAxis.actualToLinear(t.xMax);this.overview&&this.overview.setViewportRange(e,i),this.xScrollbar&&this.xScrollbar.setViewportRange(e,i)}if(this.yAxis&&null!=t.yMin&&null!=t.yMax){var n=this.yAxis.actualToLinear(t.yMin),o=this.yAxis.actualToLinear(t.yMax);this.yScrollbar&&this.yScrollbar.setViewportRange(n,o)}},t.Chart.prototype.__setAxisSpace=function(t){this._axisSpace=t;var e,i;H.isAxisRendered(this,"x")?(e=.8*t.w,i=t.h-4*H.getTickLabelHeight(this,"x")):H.isAxisRendered(this,"y")?(e=t.w,i=t.h-H.getTickLabelHeight(this,"y")):(e=t.w,i=t.h),this._radius=Math.min(e,i)/2},t.Chart.prototype.__getAxisSpace=function(){return this._axisSpace},t.Chart.prototype.__setPlotAreaSpace=function(t){this._plotAreaSpace=t},t.Chart.prototype.__getPlotAreaSpace=function(){return this._plotAreaSpace},t.Chart.prototype.__setAreaContainer=function(t){this._areaContainer=t},t.Chart.prototype.__getAreaContainer=function(){return this._areaContainer},t.Chart.prototype.getRadius=function(){return this._radius},t.Chart.prototype.showDragButtons=function(){this.dragButtons&&this.dragButtons.setVisible(!0)},t.Chart.prototype.hideDragButtons=function(){this.dragButtons&&this.dragButtons.setVisible(!1)},t.Chart.prototype.addDataLabel=function(t){this.getDataLabels().push(t)},t.Chart.prototype.getDataLabels=function(){return this._dataLabels||(this._dataLabels=[]),this._dataLabels},t.Chart.prototype.__cacheChartFocus=function(){var t=this.EventManager.getFocus();if(t)var e=t.isShowingKeyboardFocusEffect();if(this.xAxis){var i=this.xAxis.getKeyboardFocus();if(i)var n=i.isShowingKeyboardFocusEffect()}if(this.legend){var o=this.legend.getKeyboardFocus();if(o)var r=o.isShowingKeyboardFocusEffect()}return{chartFocus:t,chartShowingFocusEffect:e,axisFocus:i,axisShowingFocusEffect:n,legendFocus:o,legendShowingFocusEffect:r}},t.Chart.prototype.__restoreChartFocus=function(t){if(!z.isOverview(this)&&!z.isSpark(this)){var e=[this];if(this.xAxis&&this.xAxis.isNavigable()&&e.push(this.xAxis),this.legend&&this.legend.isNavigable()&&e.push(this.legend),this.getCtx().setKeyboardFocusArray(e),t.chartFocus){for(var i=F.getKeyboardNavigables(this),n=!1,o=0;o<i.length;o++){var r=i[o].getId();if(r instanceof s&&r.equals(t.chartFocus.getId())){this.EventManager.setFocusObj(i[o]),t.chartShowingFocusEffect&&i[o].showKeyboardFocusEffect(),n=!0;break}}n||this.EventManager.setFocusObj(this.EventManager.getKeyboardHandler().getDefaultNavigable(i))}t.axisFocus&&(this.xAxis.setKeyboardFocus(t.axisFocus,t.axisShowingFocusEffect),t.axisShowingFocusEffect&&this.getCtx().setCurrentKeyboardFocus(this.xAxis)),t.legendFocus&&(this.legend.setKeyboardFocus(t.legendFocus,t.legendShowingFocusEffect),t.legendShowingFocusEffect&&this.getCtx().setCurrentKeyboardFocus(this.legend))}},t.Chart.prototype.getRawOptions=function(){return this._rawOptions},t.Chart.prototype.processActiveDataChanges=function(e){for(var i=t.JsonUtils.clone(this.Options),n=this.Options,o=0;o<e.length;o++)this._processActiveDataChange(e[o]);this.Options=i,this.render(n)},t.Chart.prototype._processActiveDataChange=function(t){var e=t.type;"u"==e?this._processActiveDataUpdate(t):"ia"==e||"ib"==e?this._processActiveDataInsert(t):"d"==e&&this._processActiveDataDelete(t)},t.Chart.prototype._processActiveDataUpdate=function(t){for(var e=t.data,i=0;i<e.length;i++){var n=this._findDataItemById(t.id,e[i]._id);if(n)for(var o in e[i])"_id"!=o&&(n.item[o]=e[i][o])}},t.Chart.prototype._processActiveDataInsert=function(e){for(var i=e.data,n=0;n<i.length;n++){this.clearCache();var o=e.insertId,r=i[n].group,s=i[n].series,a=k.getSeriesCount(this),l=k.getGroupCount(this),h=k.getSeriesIndex(this,s),u=k.getGroupIndex(this,r);if(h>=0&&u>=0){var d=k.getSeriesItem(this,h).items;d[u]={id:e.id},t.Chart._copyActiveDataProperties(i[n],d[u])}else if(u>=0){var c=new Array(l);c[u]={id:e.id},t.Chart._copyActiveDataProperties(i[n],c[u]),this.Options.series.push({name:s,items:c})}else{var p=this._findDataItemById(o);u=p?"ia"==e.type?p.groupIndex+1:p.groupIndex:0,h<0&&(this.Options.series.push({name:s,items:new Array(l)}),h=a,a++);for(var _=0;_<a;_++){var d=k.getSeriesItem(this,_).items;d.splice(u,0,{id:e.id}),_==h&&t.Chart._copyActiveDataProperties(i[n],d[u])}this.Options.groups.splice(u,0,r)}}},t.Chart.prototype._processActiveDataDelete=function(t){this.clearCache();var e=this._findDataItemById(t.id);if(e){var i;for(var n in e.item)e.item[n]=null;e.item._deleted=!0;for(var o=k.getSeriesCount(this),r=k.getGroupCount(this),s=!0,a=0;a<o;a++)if(i=k.getDataItem(this,a,e.groupIndex),i&&!i._deleted){s=!1;break}for(var l=!0,h=0;h<r;h++)if(i=k.getDataItem(this,e.seriesIndex,h),i&&!i._deleted){l=!1;break}if(s){for(var a=0;a<o;a++){var u=k.getSeriesItem(this,a).items;u.splice(e.groupIndex,1)}this.Options.groups.splice(e.groupIndex,1)}l&&this.Options.series.splice(e.seriesIndex,1),this._processActiveDataDelete(t)}},t.Chart._copyActiveDataProperties=function(t,e){for(var i in t)e[i]=t[i]},t.Chart.prototype._findDataItemById=function(t,e){if(null==t)return null;for(var i=k.getSeriesCount(this),n=k.getGroupCount(this),o=0;o<i;o++)for(var r=0;r<n;r++){var s=k.getDataItem(this,o,r);if(null!=s&&s.id===t&&(null==e||e===s._id))return{item:s,seriesIndex:o,groupIndex:r}}return null};var e=function(t){this._chart=t,this._options=this._chart.getOptions(),this._legend=this._chart.legend,this._xAxis=this._chart.xAxis,this._yAxis=this._chart.yAxis,this._y2Axis=this._chart.y2Axis,this._legendAutomation=this._legend?this._legend.getAutomation():null,this._xAxisAutomation=this._xAxis?this._xAxis.getAutomation():null,this._yAxisAutomation=this._yAxis?this._yAxis.getAutomation():null,this._y2AxisAutomation=this._y2Axis?this._y2Axis.getAutomation():null};t.Obj.createSubclass(e,t.Automation),e.prototype.GetSubIdForDomElement=function(t){var e=null;if(t.isDescendantOf(this._xAxis))return e=this._xAxisAutomation.GetSubIdForDomElement(t),e?this._convertAxisSubIdToChartSubId(e,"xAxis"):null;if(t.isDescendantOf(this._yAxis))return e=this._yAxisAutomation.GetSubIdForDomElement(t),e?this._convertAxisSubIdToChartSubId(e,"yAxis"):null;if(t.isDescendantOf(this._y2Axis))return e=this._y2AxisAutomation.GetSubIdForDomElement(t),e?this._convertAxisSubIdToChartSubId(e,"y2Axis"):null;if(t.isDescendantOf(this._legend)){var i=this._legendAutomation.GetSubIdForDomElement(t);return i?this._convertLegendSubIdToChartSubId(i):null}var n=this._chart.getEventManager().GetLogicalObject(t);if(n&&"pie"==this._options.type)return"dataItem["+n.getSeriesIndex()+"]";if(n instanceof o){var s=n.getSeriesIndex(),a=n.getGroupIndex();if(null!=s&&a>=0&&("funnel"!=this._options.type||"pyramid"!=this._options.type))return"dataItem["+s+"]["+a+"]";if(null!=s&&a==it._GROUP_INDEX&&("funnel"==this._options.type||"pyramid"==this._options.type))return"dataItem["+s+"]";if(null!=s&&(null==a||a<0))return"series["+s+"]"}else if(n instanceof r){var l=n.getAxisType(),h=n.getIndex();return l&&h>=0?l+":referenceObject["+h+"]":null}return null},e.prototype._convertLegendSubIdToChartSubId=function(t){var e=this._legend.getOptions(),i=this._legendAutomation.getLegendItem(e,t);if(i){for(var n=0;n<this._options.series.length;n++){var o=this._options.series[n];if(o.name==i.text)return"series["+n+"]"}return"legend:"+t}return null},e.prototype._convertAxisSubIdToChartSubId=function(t,e){if("title"==t&&e)return e+":"+t;var i=t.substring(t.indexOf("["));return i?"group"+i:null},e.prototype.getDomElementForSubId=function(e){if(e==t.Automation.TOOLTIP_SUBID)return this.GetTooltipElement(this._chart,W.isDataCursorEnabled(this._chart)?C.TOOLTIP_ID:null);var i,n,o,r=e.indexOf("["),s=e.indexOf("]"),a=e.indexOf(":");if(r>0&&s>0||a>0){var l=a<0?e.substring(0,r):e.substring(0,a);if("group"==l)return this._xAxisAutomation.getDomElementForSubId(e);if("series"==l)return e=this._convertToLegendSubId(e),this._legendAutomation.getDomElementForSubId(e);if("legend"==e.substring(0,a))return e=e.substring(a+1),this._legendAutomation.getDomElementForSubId(e);var h=e.substring(r+1,s);if("xAxis"==l||"yAxis"==l||"y2Axis"==l){var u=e.substring(a+1);if("title"==u){if("xAxis"==l)return this._xAxisAutomation.getDomElementForSubId(u);if("yAxis"==l)return this._yAxisAutomation.getDomElementForSubId(u);if("y2Axis"==l)return this._y2AxisAutomation.getDomElementForSubId(u)}else if(i=u.indexOf("["),n=u.indexOf("]"),"referenceObject"==u.substring(0,i)){var d=u.substring(i+1,n);if(o=this._getRefObjPeer(d))return o.getDisplayables()[0].getElem()}}if("pie"==this._options.type){var c=this._chart.pieChart.getSliceDisplayable(h);if(c)return c.getElem()}var p;if("funnel"==this._options.type?p=it._GROUP_INDEX:"pyramid"==this._options.type?p=nt._GROUP_INDEX:(e=e.substring(s+1),i=e.indexOf("["),n=e.indexOf("]"),i>=0&&n>=0&&(p=e.substring(i+1,n))),o=this._getChartObjPeer(h,p))return o.getDisplayables()[0].getElem()}return null},e.prototype._getChartObjPeer=function(t,e){for(var i=this._chart.getChartObjPeers(),n=0;n<i.length;n++){var o=i[n].getSeriesIndex(),r=i[n].getGroupIndex();if(o==t&&r==e)return i[n]}return null},e.prototype._getRefObjPeer=function(t){for(var e=this._chart.getRefObjPeers(),i=0;i<e.length;i++)if(t==e[i].getIndex())return e[i];return null},e.prototype._convertToLegendSubId=function(t){var e=t.indexOf("["),i=t.indexOf("]"),n=t.substring(e+1,i),o=this._legend.getOptions(),r=this._options.series[n],s=this._legendAutomation.getIndicesFromSeries(r,o);return"section"+s},e.prototype.getDataItem=function(t,e){"pie"!=this._options.type&&"funnel"!=this._options.type&&"pyramid"!=this._options.type||(e=0);var i=k.getDataItem(this._chart,t,e);return i?{borderColor:V.getBorderColor(this._chart,t,e),color:V.getColor(this._chart,t,e),label:k.getDataLabel(this._chart,t,e),targetValue:k.getTargetValue(this._chart,t,e),tooltip:W.getDatatip(this._chart,t,e,null,!1),value:k.getValue(this._chart,t,e),open:i.open,close:i.close,high:k.getHighValue(this._chart,t,e),low:k.getLowValue(this._chart,t,e),volume:i.volume,x:k.getXValue(this._chart,t,e),y:i.y,z:i.z,min:i.min,max:i.max,group:k.getGroup(this._chart,e),series:k.getSeries(this._chart,t),selected:k.isDataSelected(this._chart,t,e)}:null},e.prototype.getGroup=function(t){return k.getGroup(this._chart,t)},e.prototype.getSeries=function(t){return this._options.series[t].name},e.prototype.getGroupCount=function(){return k.getGroupCount(this._chart)},e.prototype.getSeriesCount=function(){return this._options.series.length},e.prototype.getTitle=function(){return this._options.title.text},e.prototype.getLegend=function(){var e=this._legend.__getBounds(),i=this._legend.localToStage(new t.Point(e.x,e.y)),n={x:i.x,y:i.y,width:e.w,height:e.h},o={bounds:n,title:this._legend.getOptions().title};return o},e.prototype.getPlotArea=function(){var t=this._chart.__getPlotAreaSpace(),e={x:t.x,y:t.y,width:t.w,height:t.h},i={bounds:e};return i},e.prototype.getXAxis=function(){return this._getAxis("x")},e.prototype.getYAxis=function(){return this._getAxis("y")},e.prototype.getY2Axis=function(){return this._getAxis("y2")},e.prototype._getAxis=function(e){var i="x"==e?this._xAxis:"y"==e?this._yAxis:this._y2Axis;if(i){var n=i.__getBounds(),o=i.localToStage(new t.Point(n.x,n.y)),r={x:o.x,y:o.y,width:n.w,height:n.h},s=this._chart,a=function(t,n){var o,r=i.getOptions(),a=r.position,l=H.getTickLabelGapSize(s,e),h=z.isStandaloneXAxis(s)||z.isStandaloneYAxis(s)||z.isStandaloneY2Axis(s)?2:0;return"top"==a||"bottom"==a?(o=i.getPreferredSize(r,t,n-l-h),o.h=Math.ceil(o.h+l+h)):(o=i.getPreferredSize(r,t-l-h,n),o.w=Math.ceil(o.w+l+h)),{width:o.w,height:o.h}},l={bounds:r,title:this._options[e+"Axis"].title,getPreferredSize:a};return l}return null},t.Automation.prototype.IsTooltipElement=function(e){var i=e.getAttribute("id");return!(!i||0!=i.indexOf(C.TOOLTIP_ID)&&0!=i.indexOf(t.HtmlTooltipManager._TOOLTIP_DIV_ID))},t.Bundle.addDefaultStrings(t.Bundle.CHART_PREFIX,{DEFAULT_GROUP_NAME:"Group {0}",LABEL_SERIES:"Series",LABEL_GROUP:"Group",LABEL_VALUE:"Value",LABEL_TARGET_VALUE:"Target",LABEL_X:"X",LABEL_Y:"Y",LABEL_Z:"Z",LABEL_PERCENTAGE:"Percentage",LABEL_MIN:"Min",LABEL_MAX:"Max",LABEL_HIGH:"High",LABEL_LOW:"Low",LABEL_OPEN:"Open",LABEL_CLOSE:"Close",LABEL_VOLUME:"Volume",LABEL_Q1:"Q1",LABEL_Q2:"Q2",LABEL_Q3:"Q3",LABEL_OTHER:"Other",MARQUEE_SELECT:"Marquee select",MARQUEE_ZOOM:"Marquee zoom",PAN:"Pan"});var i=function(e){i.superclass.Init.call(this,e.getCtx(),e.processEvent,e),this._chart=e,this._dragMode=null,this._dragButtonsVisible=t.Agent.isTouchDevice(),this.panButton=null,this.zoomButton=null,this.selectButton=null,this._dataCursorHandler=null,this._panZoomHandler=null,this._marqueeZoomHandler=null,this._marqueeSelectHandler=null};t.Obj.createSubclass(i,t.EventManager),i.DRAG_MODE_PAN="pan",i.DRAG_MODE_ZOOM="zoom",i.DRAG_MODE_SELECT="select",i.DRAG_MODE_OFF="off",i.prototype.getComponent=function(){return this._chart},i.prototype.addListeners=function(e){t.SvgDocumentUtils.addDragListeners(this._chart,this._onDragStart,this._onDragMove,this._onDragEnd,this),i.superclass.addListeners.call(this,e),t.Agent.isTouchDevice()||e.addEvtListener(t.MouseEvent.MOUSEWHEEL,this.OnMouseWheel,!1,this)},i.prototype.RemoveListeners=function(e){i.superclass.RemoveListeners.call(this,e),t.Agent.isTouchDevice()||e.removeEvtListener(t.MouseEvent.MOUSEWHEEL,this.OnMouseWheel,!1,this)},i.prototype.getLogicalObject=function(t){return this.GetLogicalObject(t,!0)},i.prototype._getDragHandler=function(t){return t&&"user"==this._chart.getOptions().dragMode&&z.isBLAC(this._chart)&&(this._dragMode==i.DRAG_MODE_PAN||this._dragMode==i.DRAG_MODE_ZOOM)&&(this._panZoomHandler.isWithinBounds(t)?this._dragMode=i.DRAG_MODE_PAN:this._dragMode=i.DRAG_MODE_ZOOM),this._dragMode==i.DRAG_MODE_PAN?this._panZoomHandler:this._dragMode==i.DRAG_MODE_ZOOM?this._marqueeZoomHandler:this._dragMode==i.DRAG_MODE_SELECT?this._marqueeSelectHandler:null},i.prototype._onDragStart=function(e){return t.Agent.isTouchDevice()?this._onTouchDragStart(e):this._onMouseDragStart(e)},i.prototype._onDragMove=function(e){return t.Agent.isTouchDevice()?this._onTouchDragMove(e):this._onMouseDragMove(e)},i.prototype._onDragEnd=function(e){return t.Agent.isTouchDevice()?this._onTouchDragEnd(e):this._onMouseDragEnd(e)},i.prototype._onMouseDragStart=function(t){var e,i=this._context.pageToStageCoords(t.pageX,t.pageY),n=this._getDragHandler(i),o=this.GetLogicalObject(this.GetCurrentTargetForEvent(t)),r=o&&o.isSelectable&&o.isSelectable();return!r&&0==t.button&&n&&(e=n.processDragStart(i,t.ctrlKey),e&&this._callback.call(this._callbackObj,e),this._chart.setCursor(n.getCursor(i)),this.setDragButtonsVisible(!1),this._chart!=this.getCtx().getCurrentKeyboardFocus()&&this.getCtx().setCurrentKeyboardFocus(this._chart)),!!e&&(this._dataCursorHandler&&this._dataCursorHandler.processEnd(),!0)},i.prototype._onMouseDragMove=function(t){var e,i=this._context.pageToStageCoords(t.pageX,t.pageY),n=this._getDragHandler();n&&(e=n.processDragMove(i,t.ctrlKey),e&&(this._callback.call(this._callbackObj,e),this.setDragButtonsVisible(!1))),e&&t.stopPropagation()},i.prototype._onMouseDragEnd=function(t){var e,i=this._context.pageToStageCoords(t.pageX,t.pageY),n=this._getDragHandler();if(n){e=n.processDragEnd(i,t.ctrlKey),e&&(this._callback.call(this._callbackObj,e),this.autoToggleZoomButton()),this._chart.setCursor(n.getCursor(i));var o=this._chart.__getAxisSpace();o&&this.setDragButtonsVisible(o.containsPoint(i.x,i.y))}},i.prototype.OnMouseMove=function(e){i.superclass.OnMouseMove.call(this,e);var n=this._context.pageToStageCoords(e.pageX,e.pageY);this._dataCursorHandler&&(this.GetCurrentTargetForEvent(e)instanceof t.Button?this._dataCursorHandler.processEnd():this._dataCursorHandler.processMove(n));var o=this._getDragHandler(n);o?this._chart.setCursor(o.getCursor(n)):this._chart.setCursor("default")},i.prototype.OnMouseOut=function(t){i.superclass.OnMouseOut.call(this,t);var e=this._context.pageToStageCoords(t.pageX,t.pageY),n=this._chart.__getAxisSpace();n&&this.setDragButtonsVisible(n.containsPoint(e.x,e.y)),this._dataCursorHandler&&this._dataCursorHandler.processOut(e);var o=this.GetLogicalObject(t.target)},i.prototype.OnMouseWheel=function(t){if(F.isZoomable(this._chart)){var e=null!=t.wheelDelta?t.wheelDelta:0,i=this._context.pageToStageCoords(t.pageX,t.pageY);if(this._panZoomHandler){var n=this._panZoomHandler.processMouseWheel(i,e);n&&(t.preventDefault(),t.stopPropagation(),this._callback.call(this._callbackObj,n),this._dataCursorHandler&&this._dataCursorHandler.processMove(i))}}},i.prototype.ShowFocusEffect=function(e,n){if(this._dataCursorHandler){var o=n.getDataPosition();if(o){var r=this._chart.__getPlotAreaSpace();this._dataCursorHandler.processMove(new t.Point(o.x+r.x,o.y+r.y))}}i.superclass.ShowFocusEffect.call(this,e,n)},i.prototype.OnBlur=function(t){this._dataCursorHandler&&this._dataCursorHandler.processEnd(),i.superclass.OnBlur.call(this,t)},i.prototype.OnClickInternal=function(t){var e=this.GetLogicalObject(t.target),i=this._context.pageToStageCoords(t.pageX,t.pageY);this.SeriesFocusHandler&&this.SeriesFocusHandler.processSeriesFocus(i,e),e&&(this.processActionEvent(e),e.isSelectable&&e.isSelectable()||this.processDrillEvent(e))},i.prototype.OnDblClickInternal=function(t){var e=this.GetLogicalObject(t.target);e&&e.isSelectable&&e.isSelectable()&&this.processDrillEvent(e)},i.prototype.HandleTouchHoverStartInternal=function(t){if(this._dataCursorHandler&&!this.isTouchResponseTouchStart()){var e=this._context.pageToStageCoords(t.touch.pageX,t.touch.pageY);return this._dataCursorHandler.processMove(e),!1}var i=this.GetLogicalObject(t.target);return this.TouchManager.setTooltipEnabled(t.touch.identifier,this.getTooltipsEnabled(i)),!1},i.prototype.HandleTouchHoverMoveInternal=function(t){if(this._dataCursorHandler&&!this.isTouchResponseTouchStart()){var e=this._context.pageToStageCoords(t.touch.pageX,t.touch.pageY);return this._dataCursorHandler.processMove(e),!1}var i=this.GetLogicalObject(t.target);return this.TouchManager.setTooltipEnabled(t.touch.identifier,this.getTooltipsEnabled(i)),!1},i.prototype.HandleTouchHoverEndInternal=function(t){this.endDrag();var e=this.GetLogicalObject(t.target);e&&(this.processActionEvent(e),e.isSelectable&&e.isSelectable()||this.processDrillEvent(e))},i.prototype.HandleTouchClickInternal=function(t){var e=this.GetLogicalObject(t.target);e&&(this.processActionEvent(e),e.isSelectable&&e.isSelectable()||this.processDrillEvent(e))},i.prototype.HandleTouchDblClickInternal=function(t){var e=this.GetLogicalObject(t.target);e&&e.isSelectable&&e.isSelectable()&&(t.preventDefault(),t.stopPropagation(),this.processDrillEvent(e))},i.prototype.processActionEvent=function(e){e&&e.getAction&&e.getAction()&&this.FireEvent(t.EventFactory.newActionEvent("action",e.getAction(),e.getId()))},i.prototype.processDrillEvent=function(e){if(e&&e.isDrillable&&e.isDrillable()){var i=e.getId();e instanceof o?this.FireEvent(t.EventFactory.newChartDrillEvent(i.getId?i.getId():i,e.getSeries(),e.getGroup())):e instanceof A&&this.FireEvent(t.EventFactory.newChartDrillEvent(i.getId(),i.getSeries(),i.getGroup()))}},i.prototype.ProcessRolloverEvent=function(e,i,n){var o=this._chart.getOptions();if("dim"==F.getHoverBehavior(this._chart)){var r=i.getCategories?i.getCategories():[];o.highlightedCategories=n?r.slice():null;var s=t.EventFactory.newCategoryHighlightEvent(o.highlightedCategories,n),a=V.getHoverBehaviorDelay(this._chart),l=this._chart.getObjects();this._chart.pieChart&&(l=l.concat(this._chart.pieChart.__getSlices())),this.RolloverHandler.processEvent(s,l,a,"any"==o.highlightMatch)}},i.prototype._onTouchDragStart=function(t){var e,i,n=t.touches;if(1==n.length){var o=this._context.pageToStageCoords(n[0].pageX,n[0].pageY),r=this._getDragHandler();r?e=r.processDragStart(o,!0):this._dataCursorHandler&&this.isTouchResponseTouchStart()&&(this._dataCursorHandler.processMove(o),i=!0)}else if(2==n.length&&this._panZoomHandler&&F.isZoomable(this._chart)){this.endDrag();var s=this._context.pageToStageCoords(n[0].pageX,n[0].pageY),a=this._context.pageToStageCoords(n[1].pageX,n[1].pageY);e=this._panZoomHandler.processPinchStart(s,a)}return e&&(this._callback.call(this._callbackObj,e),this.getCtx().getTooltipManager().hideTooltip()),!(!e&&!i)&&(t.preventDefault(),t.stopPropagation(),this.setDragButtonsVisible(!1),!0)},i.prototype._onTouchDragMove=function(t){var e,i,n=t.touches;if(1==n.length){var o=this._context.pageToStageCoords(n[0].pageX,n[0].pageY),r=this._getDragHandler();r?e=r.processDragMove(o,!0):this._dataCursorHandler&&this.isTouchResponseTouchStart()&&(this._dataCursorHandler.processMove(o),i=!0)}else if(2==n.length&&this._panZoomHandler&&F.isZoomable(this._chart)){var s=this._context.pageToStageCoords(n[0].pageX,n[0].pageY),a=this._context.pageToStageCoords(n[1].pageX,n[1].pageY);e=this._panZoomHandler.processPinchMove(s,a)}(e||i)&&t.preventDefault(),e&&(this._callback.call(this._callbackObj,e),this.getCtx().getTooltipManager().hideTooltip())},i.prototype._onTouchDragEnd=function(t){var e,i=this.endDrag();this._panZoomHandler&&F.isZoomable(this._chart)&&(e=this._panZoomHandler.processPinchEnd(),e&&this._callback.call(this._callbackObj,e)),(i||e)&&(t.preventDefault(),this.getCtx().getTooltipManager().hideTooltip(),this.getTouchManager().reset()),this.setDragButtonsVisible(!0)},i.prototype.endDrag=function(){var t,e=this._getDragHandler();return e&&(t=e.processDragEnd(null,!0),t&&this._callback.call(this._callbackObj,t)),this._dataCursorHandler&&this._dataCursorHandler.processEnd(),t&&this._callback.call(this._callbackObj,t),t},i.prototype.zoomBy=function(t){if(this._panZoomHandler&&F.isZoomable(this._chart)){var e=this._panZoomHandler.zoomBy(t);e&&this._callback.call(this._callbackObj,e)}},i.prototype.panBy=function(t,e){if(this._panZoomHandler&&F.isScrollable(this._chart)){var i=this._panZoomHandler.panBy(t,e);i&&this._callback.call(this._callbackObj,i)}},i.prototype.hideHoverFeedback=function(){this.hideTooltip(),this._dataCursorHandler&&this._dataCursorHandler.processEnd()},i.prototype.hideTooltip=function(){this._dataCursorHandler&&this._dataCursorHandler.isDataCursorShown()||i.superclass.hideTooltip.call(this)},i.prototype.getTooltipsEnabled=function(t){return(!this._dataCursorHandler||!(t instanceof o||t instanceof r||this._dataCursorHandler.isDataCursorShown()))&&i.superclass.getTooltipsEnabled.call(this)},i.prototype.getDataCursorHandler=function(){return this._dataCursorHandler},i.prototype.setDataCursorHandler=function(t){this._dataCursorHandler=t},i.prototype.setPanZoomHandler=function(t){this._panZoomHandler=t},i.prototype.setMarqueeZoomHandler=function(t){this._marqueeZoomHandler=t},i.prototype.setMarqueeSelectHandler=function(t){this._marqueeSelectHandler=t},i.prototype.cancelMarquee=function(t){this._dragMode==i.DRAG_MODE_ZOOM?this._marqueeZoomHandler.cancelMarquee()&&t.preventDefault():this._dragMode==i.DRAG_MODE_SELECT&&this._marqueeSelectHandler&&this._marqueeSelectHandler.cancelMarquee()&&this._chart.render()},i.prototype.getDragMode=function(){return this._dragMode},i.prototype.setDragMode=function(t){null==t?this._dragMode=this._getDefaultDragMode():this._dragMode=t,!this._chart.xAxis.isFullViewport()||this._chart.yAxis&&!this._chart.yAxis.isFullViewport()||this.autoToggleZoomButton()},i.prototype._getDefaultDragMode=function(){return t.Agent.isTouchDevice()?i.DRAG_MODE_OFF:F.isScrollable(this._chart)?i.DRAG_MODE_PAN:"multiple"==this._chart.getOptions().selectionMode?i.DRAG_MODE_SELECT:null},i.prototype.onZoomButtonClick=function(t){this.zoomButton.isToggled()?(this.selectButton&&this.selectButton.setToggled(!1),this.setDragMode(i.DRAG_MODE_ZOOM)):this.setDragMode(null)},i.prototype.onPanButtonClick=function(t){this.panButton.isToggled()?(this.selectButton&&this.selectButton.setToggled(!1),this.setDragMode(i.DRAG_MODE_PAN)):this.setDragMode(null)},i.prototype.onSelectButtonClick=function(t){this.selectButton.isToggled()?(this.zoomButton&&this.zoomButton.setToggled(!1),this.panButton&&this.panButton.setToggled(!1),this.setDragMode(i.DRAG_MODE_SELECT)):this.setDragMode(null)},i.prototype.setDragButtonsVisible=function(t){t&&!this._dragButtonsVisible?(this._chart.showDragButtons(),this._dragButtonsVisible=!0):!t&&this._dragButtonsVisible&&(this._chart.hideDragButtons(),this._dragButtonsVisible=!1)},i.prototype.areDragButtonsVisible=function(){return this._dragButtonsVisible},i.prototype.autoToggleZoomButton=function(){!t.Agent.isTouchDevice()&&this.zoomButton&&(this._chart.xAxis.isFullViewport()&&this._chart.yAxis.isFullViewport()?this._dragMode==i.DRAG_MODE_PAN&&(this.zoomButton.setToggled(!0),this.onZoomButtonClick(null)):this._dragMode==i.DRAG_MODE_ZOOM&&(this.zoomButton.setToggled(!1),this.onZoomButtonClick(null)))},i.prototype.GetTouchResponse=function(){return this._dragMode&&this._dragMode!=i.DRAG_MODE_OFF?t.EventManager.TOUCH_RESPONSE_TOUCH_HOLD:this._chart.getOptions().touchResponse},i.prototype.isDndSupported=function(){return!0},i.prototype.GetDragSourceType=function(t){var e=this.DragSource.getDragObject();return e instanceof o&&e.getSeriesIndex()>=0&&e.getGroupIndex()>=0||e instanceof A?"items":null},i.prototype.GetDragDataContexts=function(){if(this._chart.isSelectionSupported()&&this._chart.getSelectionHandler().getSelectedCount()>1){for(var t=this._chart.getSelectionHandler().getSelection(),e=[],i=0;i<t.length;i++){var n=k.getDataContext(this._chart,t[i].getSeriesIndex(),t[i].getGroupIndex(),t[i].getNestedDataItemIndex());e.push(n)}return e}var r=this.DragSource.getDragObject();return r instanceof o?[k.getDataContext(this._chart,r.getSeriesIndex(),r.getGroupIndex(),r.getNestedDataItemIndex())]:r instanceof A?[k.getDataContext(this._chart,r.getSeriesIndex(),0)]:null},i.prototype.GetDropOffset=function(e){var i=this.DragSource.getDragObject();if(i instanceof o){var n=i.getDataPosition();if(n){n=this._chart.getPlotArea().localToStage(n);var r=this._context.pageToStageCoords(e.pageX,e.pageY);return new t.Point(n.x-r.x,n.y-r.y)}}return null},i.prototype.GetDropTargetType=function(t){var e=this._context.pageToStageCoords(t.pageX,t.pageY),i=this._chart.__getPlotAreaSpace();return i.containsPoint(e.x,e.y)?"plotArea":H.isAxisRendered(this._chart,"x")&&H.axisContainsPoint(this._chart.xAxis,e)?"xAxis":H.isAxisRendered(this._chart,"y")&&H.axisContainsPoint(this._chart.yAxis,e)?"yAxis":H.isAxisRendered(this._chart,"y2")&&H.axisContainsPoint(this._chart.y2Axis,e)?"y2Axis":null},i.prototype.GetDropEventPayload=function(e){var i=e.getNativeEvent().dataTransfer,n=Number(i.getData(t.EventManager.DROP_OFFSET_X_DATA_TYPE))||0,o=Number(i.getData(t.EventManager.DROP_OFFSET_Y_DATA_TYPE))||0,r=this._context.pageToStageCoords(e.pageX,e.pageY);return this._chart.getValuesAt(r.x+n,r.y+o)},i.prototype.ShowDropEffect=function(t){var e=this.GetDropTargetType(t),i=this._chart.getOptions()._dropColor;if("plotArea"==e){var n=this._chart.getCache().getFromCache("plotAreaBackground");n&&n.setSolidFill(i)}else"xAxis"==e?this._chart.xAxis.getCache().getFromCache("background").setSolidFill(i):"yAxis"==e?this._chart.yAxis.getCache().getFromCache("background").setSolidFill(i):"y2Axis"==e&&this._chart.y2Axis.getCache().getFromCache("background").setSolidFill(i)},i.prototype.ClearDropEffect=function(){var t=this._chart.getCache().getFromCache("plotAreaBackground");if(t){var e=V.getBackgroundColor(this._chart);e?t.setSolidFill(e):t.setInvisibleFill()}var i=function(t){if(t){var e=t.getCache().getFromCache("background");e&&e.setInvisibleFill()}};i(this._chart.xAxis),i(this._chart.yAxis),i(this._chart.y2Axis)};var n=function(t,e){this.Init(t,e)};t.Obj.createSubclass(n,t.KeyboardHandler),n.prototype.Init=function(t,e){n.superclass.Init.call(this,t),this._chart=e},n.prototype.isSelectionEvent=function(t){return this.isNavigationEvent(t)&&!t.ctrlKey},n.prototype.isMultiSelectEvent=function(e){return e.keyCode==t.KeyboardEvent.SPACE&&e.ctrlKey},n.prototype.processKeyDown=function(e){var i=e.keyCode;if(i==t.KeyboardEvent.TAB){var o=this._eventManager.getFocus();if(o)return t.EventManager.consumeEvent(e),o;var r=F.getKeyboardNavigables(this._chart);if(r.length>0)return t.EventManager.consumeEvent(e),this.getDefaultNavigable(r)}else if(i==t.KeyboardEvent.ENTER){var o=this._eventManager.getFocus();if(o)return this._eventManager.processActionEvent(o),this._eventManager.processDrillEvent(o),t.EventManager.consumeEvent(e),o}else i==t.KeyboardEvent.ESCAPE?this._eventManager.cancelMarquee(e):i==t.KeyboardEvent.PAGE_UP?((e.ctrlKey||e.shiftKey||z.isBLAC(this._chart))&&z.isVertical(this._chart)?this._eventManager.panBy(-.25,0):this._eventManager.panBy(0,-.25),t.EventManager.consumeEvent(e)):i==t.KeyboardEvent.PAGE_DOWN?((e.ctrlKey||e.shiftKey||z.isBLAC(this._chart))&&z.isVertical(this._chart)?this._eventManager.panBy(.25,0):this._eventManager.panBy(0,.25),
t.EventManager.consumeEvent(e)):t.KeyboardEvent.isEquals(e)||t.KeyboardEvent.isPlus(e)?this._eventManager.zoomBy(1.5):(t.KeyboardEvent.isMinus(e)||t.KeyboardEvent.isUnderscore(e))&&this._eventManager.zoomBy(1/1.5);return n.superclass.processKeyDown.call(this,e)},n.prototype.getDefaultNavigable=function(t){if(!t||t.length<=0)return null;for(var e,i,n,o,r=z.isPie(this._chart),s=0;s<t.length;s++)o=t[s],!e||o.getSeriesIndex()<i?(e=o,i=o.getSeriesIndex(),r||(n=o.getGroupIndex())):!r&&o.getGroupIndex()<n&&(e=o,i=o.getSeriesIndex(),n=o.getGroupIndex());return e};var o=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)};t.Obj.createSubclass(o,t.Obj),o.prototype.Init=function(e,i,n,o,r,s){if(this._chart=e,this._displayables=i,this._seriesIndex=null!=n&&n>=0?n:-1,this._groupIndex=null!=o&&o>=0?o:-1,this._itemIndex=null!=r&&r>=0?r:-1,this._dataPos=s,this._isSelected=!1,this._isShowingKeyboardFocusEffect=!1,this._series=k.getSeries(e,n),this._group=k.getGroup(e,o),this._categories=k.getCategories(e,n,o,r),this._itemIndex!=-1)this._dataItemId=k.getNestedDataItemId(e,n,o,r),this._drillable=F.isDataItemDrillable(e,n,o,r);else if(this._groupIndex!=-1){var a=k.getDataItem(e,n,o);a&&(this._dataItemId=k.getDataItemId(e,n,o),this._action=a.action,this._drillable=F.isDataItemDrillable(e,n,o),this._stampId=a._id)}else{var l=k.getSeriesItem(e,n);l&&(this._action=l.action,this._drillable=F.isSeriesDrillable(e,n),this._stampId=l._id)}if(this._action||this._drillable)for(var h=0;h<this._displayables.length;h++)this._displayables[h].setCursor(t.SelectionEffectUtils.getSelectingCursor());for(var u=0;u<i.length;u++){var d=i[u];d instanceof m||d.setAriaRole("img"),this._updateAriaLabel(d)}},o.associate=function(t,e,i,n,r,s){if(t&&!e.getOptions()._duringZoomAndScroll){var a=new o(e,[t],i,n,r,s);e.registerObject(a),e.getEventManager().associate(t,a)}},o.prototype.getId=function(){return this._seriesIndex>=0&&this._groupIndex>=0?new s(this._dataItemId,this.getSeries(),this.getGroup()):this._seriesIndex>=0?this.getSeries():null},o.prototype.getDataItemId=function(){return this._dataItemId},o.prototype.getNestedDataItemIndex=function(){return this._itemIndex},o.prototype.getSeries=function(){return this._series},o.prototype.getSeriesIndex=function(){return this._seriesIndex},o.prototype.getGroup=function(){return this._group},o.prototype.getGroupIndex=function(){return this._groupIndex},o.prototype.getAction=function(){return this._action},o.prototype.isDrillable=function(){return this._drillable},o.prototype.isDoubleClickable=function(){return this.isSelectable()&&this.isDrillable()},o.prototype.getChart=function(){return this._chart},o.prototype.getSeriesType=function(){return V.getSeriesType(this._chart,this._seriesIndex)},o.prototype.getSeriesItem=function(){return k.getSeriesItem(this._chart,this._seriesIndex)},o.prototype.getDatatip=function(t){return W.getDatatip(this._chart,this._seriesIndex,this._groupIndex,this._itemIndex,!0)},o.prototype.getDatatipColor=function(){return W.getDatatipColor(this._chart,this._seriesIndex,this._groupIndex,this._itemIndex)},o.prototype.isSelectable=function(){return V.isSelectable(this.getChart(),this.getSeriesIndex(),this.getGroupIndex())},o.prototype.isSelected=function(){return this._isSelected},o.prototype.setSelected=function(t){this._isSelected=t;for(var e=0;e<this._displayables.length;e++)this._displayables[e].setSelected&&(this._displayables[e].setSelected(t),this._updateAriaLabel(this._displayables[e]))},o.prototype.showHoverEffect=function(){for(var t=0;t<this._displayables.length;t++)this._displayables[t].showHoverEffect&&this._displayables[t].showHoverEffect()},o.prototype.hideHoverEffect=function(){for(var t=0;t<this._displayables.length;t++)this._displayables[t].hideHoverEffect&&this._displayables[t].hideHoverEffect()},o.prototype.getShowPopupBehaviors=function(){return this._chart.getShowPopupBehaviors(this._stampId)},o.prototype.getDisplayables=function(){return this._displayables},o.prototype.getAriaLabel=function(){var e=[],i=this.getChart().getOptions();this.isSelectable()&&e.push(t.Bundle.getTranslation(i,this.isSelected()?"stateSelected":"stateUnselected",t.Bundle.UTIL_PREFIX,this.isSelected()?"STATE_SELECTED":"STATE_UNSELECTED")),this.isDrillable()&&e.push(t.Bundle.getTranslation(i,"stateDrillable",t.Bundle.UTIL_PREFIX,"STATE_DRILLABLE"));var n=W.getDatatip(this._chart,this._seriesIndex,this._groupIndex,this._itemIndex,!1);return null==n&&this._groupIndex<0&&e.length>0&&(n=k.getSeriesLabel(this._chart,this._seriesIndex)),t.Displayable.generateAriaLabel(n,e)},o.prototype._updateAriaLabel=function(e){t.Agent.deferAriaCreation()||e.setAriaProperty("label",this.getAriaLabel())},o.prototype.getCategories=function(t){return this._categories},o.prototype.getDataPosition=function(){return this._dataPos},o.prototype.getNextNavigable=function(e){var i,n;if(i=e.keyCode,e.type==t.MouseEvent.CLICK)return this;if(i==t.KeyboardEvent.SPACE&&e.ctrlKey)return this;for(var o=this._chart,r=o.getChartObjPeers(),s=[],a=0;a<r.length;a++)r[a].isNavigable()&&s.push(r[a]);var l=e.keyCode==t.KeyboardEvent.UP_ARROW||e.keyCode==t.KeyboardEvent.DOWN_ARROW,h=z.isHorizontal(o),u=t.Agent.isRightToLeft(o.getCtx());return z.isScatterBubble(o)||z.isBoxPlot(o)&&(l&&!h||!l&&h)?n=t.KeyboardHandler.getNextAdjacentNavigable(this,e,s):z.isLineArea(o)||z.isStacked(o)||z.isPolar(o)?n=this._findNextNavigable(e):z.isFunnel(o)&&l?(u&&!h?e.keyCode=e.keyCode==t.KeyboardEvent.UP_ARROW?t.KeyboardEvent.RIGHT_ARROW:t.KeyboardEvent.LEFT_ARROW:e.keyCode=e.keyCode-1,n=t.KeyboardHandler.getNextNavigable(this,e,s)):z.isPyramid(o)&&!l?(u?e.keyCode=e.keyCode==t.KeyboardEvent.RIGHT_ARROW?t.KeyboardEvent.DOWN_ARROW:t.KeyboardEvent.UP_ARROW:e.keyCode=e.keyCode==t.KeyboardEvent.RIGHT_ARROW?t.KeyboardEvent.UP_ARROW:t.KeyboardEvent.DOWN_ARROW,n=t.KeyboardHandler.getNextNavigable(this,e,s)):n=t.KeyboardHandler.getNextNavigable(this,e,s,!0),n},o.prototype.getKeyboardBoundingBox=function(e){return this._displayables[0]?this._displayables[0].getDimensions(e):new t.Rectangle(0,0,0,0)},o.prototype.getTargetElem=function(){return this._displayables[0]?this._displayables[0].getElem():null},o.prototype.showKeyboardFocusEffect=function(){this.isNavigable()&&(this._isShowingKeyboardFocusEffect=!0,this.showHoverEffect())},o.prototype.hideKeyboardFocusEffect=function(){this.isNavigable()&&(this._isShowingKeyboardFocusEffect=!1,this.hideHoverEffect())},o.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},o.prototype.isNavigable=function(){return this.getGroupIndex()!=-1&&this.getSeriesIndex()!=-1},o.prototype._findNextNavigable=function(e){var i,n,o=e.keyCode,r=this._chart,s=r.getCtx(),a=this.getSeriesIndex(),l=this.getGroupIndex(),h=k.getGroupCount(r),u=z.isHorizontal(r),d=z.isPolar(r),c=t.Agent.isRightToLeft(s),p=u?c?o==t.KeyboardEvent.LEFT_ARROW:o==t.KeyboardEvent.RIGHT_ARROW:o==t.KeyboardEvent.UP_ARROW,_=u?c?o==t.KeyboardEvent.RIGHT_ARROW:o==t.KeyboardEvent.LEFT_ARROW:o==t.KeyboardEvent.DOWN_ARROW,g=u?o==t.KeyboardEvent.UP_ARROW:c?o==t.KeyboardEvent.RIGHT_ARROW:o==t.KeyboardEvent.LEFT_ARROW,m=u?o==t.KeyboardEvent.DOWN_ARROW:c?o==t.KeyboardEvent.LEFT_ARROW:o==t.KeyboardEvent.RIGHT_ARROW;if(p)n=l,i=this._findNextUpSeries(r,a,l);else if(_)n=l,i=this._findNextDownSeries(r,a,l);else if(m){i=a,n=l;do n++,d&&n>=h&&(n=0);while(null==r.getObject(i,n)&&n<h)}else if(g){i=a,n=l;do n--,d&&n<0&&(n=h-1);while(null==r.getObject(i,n)&&n>-1)}var f=r.getObject(i,n);return f&&f.isNavigable()?f:this},o.prototype._findNextUpSeries=function(t,e,i){for(var n=k.getSeriesCount(t),o=k.getCumulativeValue(t,e,i),r=null,s=null,a=0;a<n;a++)if(V.isSeriesRendered(t,a)){var l=k.getCumulativeValue(t,a,i);(l>o||l==o&&a>e)&&(null!==r&&l<r||null==r)&&(r=l,s=a)}return s},o.prototype._findNextDownSeries=function(t,e,i){for(var n=k.getSeriesCount(t),o=k.getCumulativeValue(t,e,i),r=null,s=null,a=n-1;a>=0;a--)if(V.isSeriesRendered(t,a)){var l=k.getCumulativeValue(t,a,i);(l<o||l==o&&a<e)&&(null!==r&&l>r||null==r)&&(r=l,s=a)}return s},o.prototype.isDragAvailable=function(t){return!0},o.prototype.getDragTransferable=function(t,e){return[this.getId()]},o.prototype.getDragFeedback=function(t,e){if(this._chart.isSelectionSupported()&&this._chart.getSelectionHandler().getSelectedCount()>1){for(var i=this._chart.getSelectionHandler().getSelection(),n=[],o=0;o<i.length;o++)n=n.concat(i[o].getDisplayables());return n}return this._displayables};var r=function(t,e,i,n,o){this.Init(t,e,i,n,o)};t.Obj.createSubclass(r,t.Obj),r.prototype.Init=function(t,e,i,n,o){this._chart=t,this._displayables=e,this._refObj=i,this._categories=G.getRefObjCategories(this._refObj),this._index=n,this._axisType=o;for(var r=0;r<e.length;r++){var s=e[r];s.setAriaRole("img"),s.setAriaProperty("label",i.shortDesc)}},r.prototype.getCategories=function(){return this._categories},r.prototype.getDisplayables=function(){return this._displayables},r.prototype.getIndex=function(){return this._index},r.prototype.getAxisType=function(){return this._axisType},r.prototype.getDatatip=function(t){return W.getRefObjTooltip(this._chart,this._refObj,this._axisType,this._index)},r.prototype.getDatatipColor=function(){return G.getColor(this._refObj)};var s=function(t,e,i){this.id=t,this.series=e,this.group=i};t.Obj.createSubclass(s,t.Obj),s.prototype.getId=function(){return this.id},s.prototype.getSeries=function(){return this.series},s.prototype.getGroup=function(){return this.group},s.prototype.equals=function(t){return t instanceof s&&(null!=this.id||null!=t.id?k.isEqualId(this.id,t.id):k.isEqualId(this.series,t.series)&&k.isEqualId(this.group,t.group))},s.prototype.toString=function(){return null!=this.id?this.id.toString():k.createDataItemId(this.series,this.group)};var a=function(){this.Init({skyros:a.VERSION_1,alta:a.SKIN_ALTA,next:a.SKIN_NEXT})};t.Obj.createSubclass(a,t.BaseComponentDefaults),a.SKIN_NEXT={skin:t.CSSStyle.SKIN_NEXT,styleDefaults:{dataItemGaps:"auto",markerSize:10,marqueeColor:"rgba(255,255,255,0.4)",marqueeBorderColor:"#0572ce"},yAxis:{axisLine:{rendered:"auto"}},y2Axis:{axisLine:{rendered:"auto"}},layout:{titlePlotAreaGap:16,footnoteGap:10,legendGapWidth:15,legendGapHeight:10,tickLabelGapHeight:8,tickLabelGapWidth:9}},a.SKIN_ALTA={skin:t.CSSStyle.SKIN_ALTA,title:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_13+"color: #252525;")},subtitle:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA+"color: #252525;")},footnote:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_11)},_statusMessageStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_13+"color: #252525;"),pieCenter:{labelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA)},styleDefaults:{seriesEffect:"color",colors:t.CSSStyle.COLORS_ALTA,dataLabelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA),stackLabelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD),stockRisingColor:"#6b6f74",stockFallingColor:"#ED6647"}},a.VERSION_1={skin:t.CSSStyle.SKIN_SKYROS,emptyText:null,type:"bar",stack:"off",stackLabel:"off",orientation:"vertical",polarGridShape:"circle",selectionMode:"none",hideAndShowBehavior:"none",hoverBehavior:"none",zoomAndScroll:"off",zoomDirection:"auto",initialZooming:"none",dragMode:"user",sorting:"off",otherThreshold:0,animationOnDataChange:"none",animationOnDisplay:"none",__sparkBarSpacing:"subpixel",__spark:!1,dataCursor:"auto",dataCursorBehavior:"auto",drilling:"off",highlightMatch:"all",series:[],groups:[],title:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 12px; color: #003d5b; font-weight: bold"),halign:"start"},subtitle:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 12px; color: #003d5b;")},footnote:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 10px; color: #333333;"),halign:"start"},titleSeparator:{upperColor:"#74779A",lowerColor:"#FFFFFF",rendered:"off"},touchResponse:"auto",_statusMessageStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+"font-size: 12px; color: #003d5b; font-weight: bold"),_dropColor:"#D9F4FA",xAxis:{tickLabel:{rendered:"on"},majorTick:{rendered:"auto"},minorTick:{rendered:"auto"},axisLine:{rendered:"on"},scale:"linear"},yAxis:{tickLabel:{rendered:"on"},majorTick:{rendered:"auto"},minorTick:{rendered:"auto"},axisLine:{rendered:"on"},scale:"linear"},y2Axis:{tickLabel:{rendered:"on"},majorTick:{rendered:"auto"},minorTick:{rendered:"auto"},axisLine:{rendered:"on"},scale:"linear",alignTickMarks:"on"},zAxis:{},pieCenter:{labelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS)},plotArea:{backgroundColor:null},legend:{position:"auto",rendered:"auto",layout:{gapRatio:1},seriesSection:{},referenceObjectSection:{},sections:[]},overview:{rendered:"off"},dnd:{drag:{items:{},series:{},groups:{}},drop:{plotArea:{},xAxis:{},yAxis:{},y2Axis:{},legend:{}}},styleDefaults:{colors:t.CSSStyle.COLORS_SKYROS,borderColor:"auto",borderWidth:"auto",patterns:["smallDiagonalRight","smallChecker","smallDiagonalLeft","smallTriangle","smallCrosshatch","smallDiamond","largeDiagonalRight","largeChecker","largeDiagonalLeft","largeTriangle","largeCrosshatch","largeDiamond"],shapes:["square","circle","diamond","plus","triangleDown","triangleUp"],seriesEffect:"gradient",threeDEffect:"off",selectionEffect:"highlight",animationDuration:1e3,animationIndicators:"all",animationUpColor:"#0099FF",animationDownColor:"#FF3300",lineStyle:"solid",lineType:"auto",markerDisplayed:"auto",markerColor:null,markerShape:"auto",markerSize:8,marqueeColor:"rgba(255,255,255,0.5)",marqueeBorderColor:"rgba(0,0,0,0.2)",pieFeelerColor:"#BAC5D6",pieInnerRadius:0,selectedInnerColor:"#ffffff",selectedOuterColor:"#5a5a5a",sliceLabelType:"percent",otherColor:"#4b4b4b",stockRisingColor:"#006666",stockFallingColor:"#CC3300",stockRangeColor:"#B8B8B8",dataItemGaps:"0%",dataLabelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+t.BaseComponentDefaults.FONT_SIZE_11),dataLabelPosition:"auto",funnelBackgroundColor:"#EDEDED",x1Format:{},y1Format:{},y2Format:{},zFormat:{},_defaultSliceLabelColor:"#333333",_scrollbarHeight:3,_scrollbarTrackColor:"#F0F0F0",_scrollbarHandleColor:"#9E9E9E",hoverBehaviorDelay:200,dataCursor:{markerSize:8,markerDisplayed:"on",lineColor:"#5a5a5a",lineWidth:2,lineStyle:"solid"},groupSeparators:{rendered:"on",color:"rgba(138,141,172,0.4)"},padding:"auto",_tooltipStyle:new t.CSSStyle("border-collapse: separate; border-spacing: 2px; overflow: hidden; display: block;"),tooltipLabelStyle:new t.CSSStyle("color: #666666; padding: 0px 2px; white-space: nowrap;"),tooltipValueStyle:new t.CSSStyle("color: #333333; padding: 0px 2px;"),stackLabelStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS+t.BaseComponentDefaults.FONT_SIZE_11),boxPlot:{whiskerSvgStyle:{},whiskerEndSvgStyle:{strokeWidth:2},whiskerEndLength:9,medianSvgStyle:{strokeWidth:3}}},layout:{gapWidthRatio:null,gapHeightRatio:null,outerGapWidth:10,outerGapHeight:8,titleSubtitleGapWidth:14,titleSubtitleGapHeight:4,titleSeparatorGap:6,titlePlotAreaGap:10,footnoteGap:7,verticalAxisGap:6,legendGapWidth:10,legendGapHeight:10,tickLabelGapHeight:5,tickLabelGapWidth:7},_locale:"en-us",_resources:{}},a.getGapWidth=function(t,e){return Math.ceil(e*t.getGapWidthRatio())},a.getGapHeight=function(t,e){return Math.ceil(e*t.getGapHeightRatio())},a.isSkyrosSkin=function(e){return e.getSkin()==t.CSSStyle.SKIN_SKYROS},a.isPostAltaSkin=function(e){return e.getSkin()!=t.CSSStyle.SKIN_SKYROS&&e.getSkin()!=t.CSSStyle.SKIN_ALTA},a.prototype.getNoCloneObject=function(t){return{}};var l=function(t,e){this.Init(t,e)};t.Obj.createSubclass(l,t.Obj),l.prototype.Init=function(t,e){this._context=t.getCtx(),this._dataCursorShown=!1,this._dataCursor=e,this._chart=t},l.prototype.processMove=function(t,e){var i=this._chart.__getPlotAreaSpace();return i&&i.containsPoint(t.x,t.y)&&!this._chart.getOptions()._duringZoomAndScroll?(this._showDataCursor(i,t.x,t.y,e),!0):(this._removeDataCursor(e),!1)},l.prototype.processEnd=function(t){this._removeDataCursor(t)},l.prototype.processOut=function(t,e){var i=this._chart.__getPlotAreaSpace();i&&!i.containsPoint(t.x,t.y)&&this._removeDataCursor(e)},l.prototype._showDataCursor=function(t,e,i,n){if(this._context.isOffscreen())return void this._removeDataCursor(n);var o=this._dataCursor,r=this._getClosestMatch(e,i);if(null==r)return void this._removeDataCursor(n);var s=r.matchRegion.getCenter(),a=e,l=i;o.getBehavior()==C.BEHAVIOR_SNAP&&(o.isHorizontal()?l=Math.min(Math.max(s.y,t.y),t.y+t.h):a=Math.min(Math.max(s.x,t.x),t.x+t.w));var h=r.logicalObject,u=W.getDatatip(this._chart,h.getSeriesIndex(),h.getGroupIndex(),h.getNestedDataItemIndex(),!0);if(null==u)return void o.setVisible(!1);o.setVisible(!0);var d=W.getDatatipColor(this._chart,h.getSeriesIndex(),h.getGroupIndex(),h.getNestedDataItemIndex()),c=o.isHorizontal()?l:a;if(o.render(t,s.x,s.y,c,u,d),this._dataCursorShown=!0,!n){var p=this._chart.getValuesAt(e,i);this._chart.changeOption("dataCursorPosition",p)}},l.prototype._removeDataCursor=function(t){this._dataCursor.getVisible()&&this._dataCursor.setVisible(!1),this._context.getTooltipManager(C.TOOLTIP_ID).hideTooltip(),this._dataCursorShown=!1,t||this._chart.changeOption("dataCursorPosition",null)},l.prototype.isDataCursorShown=function(){return this._dataCursorShown},l._getClosestMatchSecondDirection=function(t,e,i,n){for(var o=null,r=1/0,s=0;s<t.length;s++){var a=t[s],l=e?a.matchRegion.x:a.matchRegion.y,h=e?a.matchRegion.x+a.matchRegion.w:a.matchRegion.y+a.matchRegion.h,u=e?i:n,d=(l+h)/2,c=Math.round(Math.abs(d-u));c<r&&(r=c,o=a)}return o},l._getClosestMatchesFirstDirection=function(t,e,i,n){for(var o=1/0,r=new Array,s=0;s<t.length;s++){var a=t[s],l=e?a.matchRegion.y:a.matchRegion.x,h=e?a.matchRegion.y+a.matchRegion.h:a.matchRegion.x+a.matchRegion.w,u=e?n:i,d=(l+h)/2,c=Math.round(Math.abs(d-u));c<=o&&(c<o&&(r=new Array),r.push(a),o=c)}return r},l.prototype._findMatches=function(){var t=this._context.getStage(),e=this._chart.getEventManager(),i=[];if(!this._chart._currentMarkers)return null;for(var n=0;n<this._chart._currentMarkers.length;n++)for(var o=this._chart._currentMarkers[n],r=o.length,s=0;s<r;s++){var a=o[s],l=e.GetLogicalObject(a),h=a.getDimensionsSelf?a.getDimensionsSelf(t):a.getDimensions(t),u={matchRegion:h,logicalObject:l};i.push(u)}return i},l.prototype._getClosestMatch=function(t,e){var i=z.isHorizontal(this._chart),n=z.isLineArea(this._chart)&&!H.isMixedFrequency(this._chart),o=this._findMatches(),r=l._getClosestMatchesFirstDirection(o,i,t,e);if(!z.isScatterBubble(this._chart)){for(var s=1/0,a=-(1/0),h=null,u=0;u<r.length;u++){var d=r[u];s=Math.min(s,i?d.matchRegion.y:d.matchRegion.x),a=Math.max(a,i?d.matchRegion.y+d.matchRegion.h:d.matchRegion.x+d.matchRegion.w),h=d.logicalObject.getGroupIndex()}for(var u=0;u<o.length;u++){var c=o[u],p=c.logicalObject.getGroupIndex();if(n)h==p&&r.push(c);else{var _=i?c.matchRegion.y:c.matchRegion.x,g=i?c.matchRegion.y+c.matchRegion.h:c.matchRegion.x+c.matchRegion.w,m=(_+g)/2;a>=m&&s<=m&&r.push(c)}}}return l._getClosestMatchSecondDirection(r,i,t,e)};var h=function(t,e,i,n,o,r,s,a,l,h){this.Init(t,null,h),this.setWedgeParams(e,i,n,o,r,s,a,l)};t.Obj.createSubclass(h,t.Path),h._OUTER_BORDER_WIDTH=2,h._OUTER_BORDER_WIDTH_HOVER=1.25,h._INNER_BORDER_WIDTH=1,h.prototype.Init=function(t,e,i){h.superclass.Init.call(this,t,e,i)},h.prototype.setWedgeParams=function(t,e,i,n,o,r,s,a){this._cx=t,this._cy=e,this._rx=i,this._ry=n,this._sa=o,this._ae=r,this._gap=s,this._ir=a;var l=this._makeWedgePath(0);this.setCmds(l)},h.prototype._makeWedgePath=function(e){var i=Math.max(this._rx-e,0),n=Math.max(this._ry-e,0),o=360==this._ae||i<e?0:this._gap+2*e,r=this._ir?this._ir+e:0,s=360==this._ae?t.Math.degreesToRads(359.99):t.Math.degreesToRads(this._ae),a=t.Math.degreesToRads(this._sa),l=o/2,h=l<i?Math.asin(l/i):0,u=-s/2-a,d=Math.min(5*l,s>0?Math.abs(l/Math.sin(s/2)):0),c=0==i?d:d*n/i,p=this._cx+Math.cos(u)*d,_=this._cy+Math.sin(u)*c,g=this._cx+Math.cos(-h-a)*i,m=this._cy+Math.sin(-h-a)*n,f=this._cx+Math.cos(-a-s+h)*i,y=this._cy+Math.sin(-a-s+h)*n,v=t.Math.calculateAngleBetweenTwoVectors(f-this._cx,y-this._cy,g-this._cx,m-this._cy);v=Math.min(v,s);var S;if(r>0){var C=l<r?Math.asin(l/r):0,E=this._cx+Math.cos(-C-a)*r,b=this._cy+Math.sin(-C-a)*r,T=this._cx+Math.cos(-a-s+C)*r,A=this._cy+Math.sin(-a-s+C)*r,O=t.Math.calculateAngleBetweenTwoVectors(T-this._cx,A-this._cy,E-this._cx,b-this._cy);O=Math.min(O,v,s),360==this._ae?(S=t.PathUtils.moveTo(f,y),S+=t.PathUtils.arcTo(i,n,s,1,g,m),S+=t.PathUtils.lineTo(f,y),S+=t.PathUtils.moveTo(E,b),S+=t.PathUtils.arcTo(r,r,s,0,T,A)):(S=t.PathUtils.moveTo(T,A),S+=t.PathUtils.lineTo(f,y),S+=t.PathUtils.arcTo(i,n,v,1,g,m),S+=t.PathUtils.lineTo(E,b),S+=t.PathUtils.arcTo(r,r,O,0,T,A))}else 360==this._ae?(S=t.PathUtils.moveTo(f,y),S+=t.PathUtils.arcTo(i,n,s,1,g,m)):(S=t.PathUtils.moveTo(p,_),S+=t.PathUtils.lineTo(f,y),S+=t.PathUtils.arcTo(i,n,v,1,g,m));return S+=t.PathUtils.closePath()},h.prototype._initializeSelectionEffects=function(){var e=this.isSelected()?h._OUTER_BORDER_WIDTH:h._OUTER_BORDER_WIDTH_HOVER,i=this._makeWedgePath(e),n=this._makeWedgePath(e+h._INNER_BORDER_WIDTH);return this.OuterChild?(this.OuterChild.setCmds(i),void this.InnerChild.setCmds(n)):(this.OuterChild=new t.Path(this.getCtx(),i),this.OuterChild.setInvisibleFill(),this.OuterChild.setMouseEnabled(!0),this.addChild(this.OuterChild),this.InnerChild=new t.Path(this.getCtx(),n),this.InnerChild.setInvisibleFill(),this.InnerChild.setMouseEnabled(!0),void this.addChild(this.InnerChild))},h.prototype._showNestedBorders=function(t,e){this._initializeSelectionEffects(),e?(this.setSolidFill(t),this.setStroke(null),this.setClassName().setStyle(),this.OuterChild.setSolidFill(e),this.OuterChild.setClassName().setStyle(),this.InnerChild.setFill(this._fill),this.InnerChild.setClassName(this._shapeClassName).setStyle(this._shapeStyle)):t?(this.setSolidFill(t),this.setStroke(null),this.setClassName().setStyle(),this.OuterChild.setFill(this._fill),this.OuterChild.setClassName(this._shapeClassName).setStyle(this._shapeStyle),this.InnerChild.setInvisibleFill(),this.InnerChild.setClassName().setStyle()):(this.setFill(this._fill),this.setStroke(this._shapeStroke),this.setClassName(this._shapeClassName).setStyle(this._shapeStyle),this.OuterChild.setInvisibleFill(),this.OuterChild.setClassName().setStyle(),this.InnerChild.setInvisibleFill(),this.InnerChild.setClassName().setStyle())},h.prototype.setStyleProperties=function(e,i,n,o,r,s,a){this._fill=e,this._shapeStroke=i,this._hoverColor=t.SelectionEffectUtils.getHoverBorderColor(n),this._innerColor=o,this._outerColor=r,this._shapeClassName=s,this._shapeStyle=a,this.setStyle(a).setClassName(s),this.setFill(e),i&&this.setStroke(i)},h.prototype.showHoverEffect=function(){this.IsShowingHoverEffect=!0,this._showNestedBorders(this._hoverColor,this._innerColor)},h.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect=!1,this.isSelected()?this._showNestedBorders(this._outerColor,this._innerColor):this._showNestedBorders()},h.prototype.setSelected=function(t){this.IsSelected!=t&&(this.IsSelected=t,this.isHoverEffectShown()?this._showNestedBorders(this._hoverColor,this._innerColor):this.isSelected()?this._showNestedBorders(this._outerColor,this._innerColor):this._showNestedBorders())},h.prototype.UpdateSelectionEffect=function(){};var u=function(t,e,i){this._x1=Math.min(e[0],e[4]),this._x2=Math.max(e[0],e[4]),this._y1=Math.min(e[1],e[5]),this._y2=Math.max(e[1],e[5]),this.Init(t,[this._x1,this._y1,this._x2,this._y1,this._x2,this._y2,this._x1,this._y2],i)};t.Obj.createSubclass(u,t.Polygon),u.OUTER_BORDER_WIDTH=2,u.OUTER_BORDER_WIDTH_HOVER=1.25,u.INNER_BORDER_WIDTH=1,u.prototype.setStyleProperties=function(e,i,n,o,r,s,a){this._fill=e,this._borderStroke=i,this._hoverColor=t.SelectionEffectUtils.getHoverBorderColor(n),this._innerColor=o,this._outerColor=r,this._shapeClassName=s,this._shapeStyle=a,this.setStyle(a).setClassName(s),this.setFill(e),i&&this.setStroke(i)},u.prototype.setAnimationParams=function(t){this._x1=Math.min(t[0],t[4]),this._x2=Math.max(t[0],t[4]),this._y1=Math.min(t[1],t[5]),this._y2=Math.max(t[1],t[5]),this.setPoints(t),this._initializeSelectionEffects()},u.prototype.showHoverEffect=function(){this.IsShowingHoverEffect||(this.IsShowingHoverEffect=!0,this._showNestedBorders(this._hoverColor,this._innerColor))},u.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect&&(this.IsShowingHoverEffect=!1,this.isSelected()?this._showNestedBorders(this._outerColor,this._innerColor):this._showNestedBorders())},u.prototype.setSelected=function(t){this.IsSelected!=t&&(this.IsSelected=t,this.isHoverEffectShown()?this._showNestedBorders(this._hoverColor,this._innerColor):this.isSelected()?this._showNestedBorders(this._outerColor,this._innerColor):this._showNestedBorders())},u.prototype.UpdateSelectionEffect=function(){},u.prototype.getPrimaryFill=function(){return this._fill},u.prototype._initializeSelectionEffects=function(){var e=this.isSelected()?u.OUTER_BORDER_WIDTH:u.OUTER_BORDER_WIDTH_HOVER,i=this._createPointsArray(e),n=this._createPointsArray(e+u.INNER_BORDER_WIDTH);return this.OuterChild?(this.OuterChild.setPoints(i),void this.InnerChild.setPoints(n)):(this.OuterChild=new t.Polygon(this.getCtx(),i),this.OuterChild.setInvisibleFill(),this.OuterChild.setMouseEnabled(!0),this.addChild(this.OuterChild),this.InnerChild=new t.Polygon(this.getCtx(),n),this.InnerChild.setInvisibleFill(),this.InnerChild.setMouseEnabled(!0),void this.addChild(this.InnerChild))},u.prototype._showNestedBorders=function(t,e){this._initializeSelectionEffects(),e?(this.setSolidFill(t),this.setStroke(null),this.setClassName().setStyle(),this.OuterChild.setSolidFill(e),this.OuterChild.setClassName().setStyle(),this.InnerChild.setFill(this._fill),this.InnerChild.setClassName(this._shapeClassName).setStyle(this._shapeStyle)):t?(this.setSolidFill(t),this.setStroke(null),this.setClassName().setStyle(),this.OuterChild.setFill(this._fill),this.OuterChild.setClassName(this._shapeClassName).setStyle(this._shapeStyle),this.InnerChild.setInvisibleFill(),this.InnerChild.setClassName().setStyle()):(this.setFill(this._fill),this.setStroke(this._borderStroke),this.setClassName(this._shapeClassName).setStyle(this._shapeStyle),this.OuterChild.setInvisibleFill(),this.OuterChild.setClassName().setStyle(),this.InnerChild.setInvisibleFill(),this.InnerChild.setClassName().setStyle())},u.prototype._createPointsArray=function(t){var e=this._x1+t,i=this._x2-t,n=this._y1+t,o=this._y2-t;return[e,n,i,n,i,o,e,o]};var d=function(t,e,i){this.Init(t,e,i)};t.Obj.createSubclass(d,t.Axis),d.prototype.axisToPlotArea=function(t){if("tangential"==this.getOptions().position)return t;if(null==t)return null;var e=t-this.getLeftOverflow();return Math.round(10*e)/10},d.prototype.plotAreaToAxis=function(t,e){if("tangential"==this.getOptions().position)return t;if(null==t)return null;var i=t+this.getLeftOverflow();return e===!1?i:Math.round(i)},d.prototype.linearToActual=function(t){return this.Info.linearToActual(t)},d.prototype.actualToLinear=function(t){return this.Info.actualToLinear(t)},d.prototype.getValueAt=function(t){return this.Info.getValueAt(this.plotAreaToAxis(t))},d.prototype.getCoordAt=function(t){return this.axisToPlotArea(this.Info.getCoordAt(t))},d.prototype.getBoundedValueAt=function(t){return this.Info.getBoundedValueAt(this.plotAreaToAxis(t))},d.prototype.getBoundedCoordAt=function(t){return this.axisToPlotArea(this.Info.getBoundedCoordAt(t))},d.prototype.getUnboundedValueAt=function(t){return this.Info.getUnboundedValueAt(this.plotAreaToAxis(t))},d.prototype.getUnboundedCoordAt=function(t){return this.axisToPlotArea(this.Info.getUnboundedCoordAt(t))},d.prototype.getBaselineCoord=function(){return this.axisToPlotArea(this.Info.getBaselineCoord())},d.prototype.getPosition=function(){return this.getOptions().position},d.prototype.isGroupAxis=function(){return this.Info instanceof t.GroupAxisInfo},d.prototype.isTimeAxis=function(){return this.Info instanceof t.TimeAxisInfo},d.prototype.isDataAxis=function(){return this.Info instanceof t.DataAxisInfo},d.prototype.getMajorTickCoords=function(){for(var t=this.Info?this.Info.getMajorTickCoords():[],e=0;e<t.length;e++)t[e]=this.axisToPlotArea(t[e]);return t},d.prototype.getMinorTickCoords=function(){for(var t=this.Info?this.Info.getMinorTickCoords():[],e=0;e<t.length;e++)t[e]=this.axisToPlotArea(t[e]);return t},d.prototype.getBaselineCoord=function(){return this.axisToPlotArea(this.Info.getBaselineCoord())},d.prototype.getLinearGlobalMin=function(){return this.actualToLinear(this.Info.getGlobalMin())},d.prototype.getLinearGlobalMax=function(){return this.actualToLinear(this.Info.getGlobalMax())},d.prototype.getLinearViewportMin=function(){return this.actualToLinear(this.Info.getViewportMin())},d.prototype.getLinearViewportMax=function(){return this.actualToLinear(this.Info.getViewportMax())},d.prototype.getUnboundedLinearValueAt=function(t){return this.Info.actualToLinear(this.getUnboundedValueAt(t))},d.prototype.isFullViewport=function(){return this.Info.getViewportMin()==this.Info.getGlobalMin()&&this.Info.getViewportMax()==this.Info.getGlobalMax()},d.prototype.getLeftOverflow=function(){return t.Agent.isRightToLeft(this.getCtx())?this.Info.getEndOverflow():this.Info.getStartOverflow()},d.prototype.getRightOverflow=function(){return t.Agent.isRightToLeft(this.getCtx())?this.Info.getStartOverflow():this.Info.getEndOverflow()},d.prototype.getLength=function(){return Math.abs(this.Info.getStartCoord()-this.Info.getEndCoord())},d.prototype.getMinCoord=function(){return this.axisToPlotArea(Math.min(this.Info.getStartCoord(),this.Info.getEndCoord()))},d.prototype.getMaxCoord=function(){return this.axisToPlotArea(Math.max(this.Info.getStartCoord(),this.Info.getEndCoord()))};var c=function(t,e,i,n,o,r,s){s||this.Init(t.getCtx()),this._bHoriz=z.isHorizontal(t),this._bStacked=z.isStacked(t),this._barGapRatio=V.getBarGapRatio(t),this._dataItemGaps=V.getDataItemGaps(t),this._axisCoord=e,this._doNotRender=!!s,this._setBarCoords(i,n,o,r,!0)};t.Obj.createSubclass(c,u),c._INDICATOR_OFFSET=8,c._MIN_BAR_WIDTH_FOR_GAPS=5,c._MIN_BAR_WIDTH_FOR_GAPS_PIXEL_HINTING=15,c._MIN_BAR_LENGTH_FOR_GAPS=5,c._MAX_GAP_SIZE=2,c.prototype.setSelected=function(t){this.IsSelected!=t&&(this.IsSelected=t,this.isSelected()?(this._tempX1=this._x1,this._tempX2=this._x2,this._tempBaselineCoord=this._baselineCoord,this._x1=this._origX1,this._x2=this._origX2,this._baselineCoord=this._origBaselineCoord,this.setPoints(this._createPointsArray()),this._showNestedBorders(this.isHoverEffectShown()?this._hoverColor:this._outerColor,this._innerColor)):(this._x1=this._tempX1,this._x2=this._tempX2,this._baselineCoord=this._tempBaselineCoord,this.setPoints(this._createPointsArray()),this._showNestedBorders(this.isHoverEffectShown()?this._hoverColor:null)))},c.prototype.getAnimationParams=function(t){return t?this._bHoriz?[this._x2,this._x1,this._baselineCoord,this._endCoord]:[this._x1,this._x2,this._endCoord,this._baselineCoord]:[this._baselineCoord,this._endCoord,this._x1,this._x2]},c.prototype.setAnimationParams=function(t,e){if(this._setBarCoords(t[0],t[1],t[2],t[3],!1),e){var i=this.getIndicatorPosition();e.setTranslate(i.x,i.y),e.setAlpha(1),e.getParent().addChild(e)}},c.prototype.getDisplayAnimation=function(e){var i=this.getAnimationParams();this.setAnimationParams([this._axisCoord,this._axisCoord,this._x1,this._x2]);var n=new t.CustomAnimation(this.getCtx(),this,e);return n.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,i),n},c.prototype.getDeleteAnimation=function(e){var i=[this._baselineCoord,this._baselineCoord,this._x1,this._x2],n=new t.CustomAnimation(this.getCtx(),this,e);return n.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,i),n.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,0),n},c.prototype.getInsertAnimation=function(e){
this.setAlpha(0);var i=this.getDisplayAnimation(e);return i.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,1),i},c.prototype.getIndicatorPosition=function(){var e,i,n=(this._x1+this._x2)/2;if(this._bStacked){var o=(this._endCoord+this._baselineCoord)/2;e=this._bHoriz?o:n,i=this._bHoriz?n:o}else{var r=this._endCoord>=this._baselineCoord?this._endCoord+c._INDICATOR_OFFSET:this._endCoord-c._INDICATOR_OFFSET;e=this._bHoriz?r:n,i=this._bHoriz?n:r}return new t.Point(e,i)},c.prototype._setBarCoords=function(e,i,n,o,r){this._baselineCoord=e,this._endCoord=i,this._x1=n,this._x2=o;var s=this._x2-this._x1;if(s<1&&(this._x1=Math.floor(this._x1),this._x2=this._x1+1,s=1),this._origX1=this._x1,this._origX2=this._x2,this._origBaselineCoord=this._baselineCoord,this._dataItemGaps>0&&r&&!this.isSelected()){var a=Math.ceil(c._MAX_GAP_SIZE*this._dataItemGaps),l=Math.abs(this._baselineCoord-this._endCoord),h=this._axisCoord==this._baselineCoord;l>=c._MIN_BAR_LENGTH_FOR_GAPS&&this._bStacked&&!h&&(this._baselineCoord+=this._endCoord>this._baselineCoord?a:-a),s>=c._MIN_BAR_WIDTH_FOR_GAPS&&(1==t.Agent.getDevicePixelRatio()&&this._barGapRatio>0&&s>c._MIN_BAR_WIDTH_FOR_GAPS_PIXEL_HINTING?(t.Agent.isPlatformGecko()||this._doNotRender||this.setPixelHinting(!0),this._x1=Math.round(this._x1),this._x2=Math.round(this._x2),this._origX1=this._x1,this._origX2=this._x2,this._x2-=a):(this._x1+=a/2,this._x2-=a/2))}if(!this._doNotRender){var d=this._createPointsArray();this.setPoints(d),this.OuterChild&&this.OuterChild.setPoints(this._createPointsArray(u.OUTER_BORDER_WIDTH)),this.InnerChild&&this.InnerChild.setPoints(this._createPointsArray(u.OUTER_BORDER_WIDTH+u.INNER_BORDER_WIDTH))}},c.prototype._createPointsArray=function(t){var e=this._baselineCoord,i=this._endCoord,n=this._x1,o=this._x2;if(t>0){if(Math.abs(n-o)<2*t||Math.abs(e-i)<2*t)return[];n+=t,o-=t,i<e?(e-=t,i+=t):(e+=t,i-=t)}return this._bHoriz?[i,n,i,o,e,o,e,n]:[n,i,o,i,o,e,n,e]},c.prototype.getBoundingBox=function(){var e=Math.min(this._x2,this._x1),i=Math.min(this._endCoord,this._baselineCoord),n=Math.abs(this._x2-this._x1),o=Math.abs(this._endCoord-this._baselineCoord);return this._bHoriz?new t.Rectangle(i,e,o,n):new t.Rectangle(e,i,n,o)},c.prototype.getDimensionsSelf=function(t){return this.ConvertCoordSpaceRect(this.getBoundingBox(),t)};var p=function(e,i,n,o,r,s,a,l,h){this.Init(e.getCtx()),this._chart=e,this._bHoriz=z.isHorizontal(e),this._styleOptions=h,this._innerColor=V.getSelectedInnerColor(this._chart),this._outerColor=V.getSelectedOuterColor(this._chart),this._hoverColor=t.SelectionEffectUtils.getHoverBorderColor(this._styleOptions._color);var u=i-n/2,d=i+n/2;V.getDataItemGaps(e)>0&&n>c._MIN_BAR_WIDTH_FOR_GAPS&&d--,this._render(u,d,o,r,s,a,l)};t.Obj.createSubclass(p,t.Shape),p.prototype._render=function(e,i,n,o,r,s,a){this._cleanUp();var l=this.getCtx();this._x1=Math.round(e),this._x2=Math.round(i),this._low=Math.round(n),this._q1=Math.round(o),this._q2=Math.round(r),this._q3=Math.round(s),this._high=Math.round(a);var h=i-e,u=V.getSizeInPixels(this._styleOptions.whiskerEndLength,h);u=Math.min(h,u),u=2*Math.floor((u-1)/2)+1;var d=Math.floor((e+i)/2)+.5,c=d-Math.floor(u/2)-.5,p=d+Math.floor(u/2)+.5;this._drawLine(d,this._low,d,this._high,"whisker"),this._drawLine(c,this._low,p,this._low,"whiskerEnd"),this._drawLine(c,this._high,p,this._high,"whiskerEnd"),this._q2Box=new t.Polygon(l,this._createQ2PointsArray(0));var _=j.getRectangleFill(this._chart,this._styleOptions.q2Color,this._styleOptions._q2Pattern,h);this._q2Box.setFill(_),this._applyCustomStyle(this._q2Box,"q2"),this.addChild(this._q2Box),this._q3Box=new t.Polygon(l,this._createQ3PointsArray(0));var g=j.getRectangleFill(this._chart,this._styleOptions.q3Color,this._styleOptions._q3Pattern,h);this._q3Box.setFill(g),this._applyCustomStyle(this._q3Box,"q3"),this.addChild(this._q3Box),this._drawMedianLine(0),this._borderColor=this._styleOptions.borderColor,this._borderColor&&(this._borderWidth=this._styleOptions.borderWidth,this._drawBorders(this._borderColor,this._borderWidth)),this.IsSelected&&(this.IsSelected=!1,this.setSelected(!0))},p.prototype.showHoverEffect=function(){this.IsShowingHoverEffect||(this.IsShowingHoverEffect=!0,this.isSelected()?this._drawBorders(this._hoverColor,u.OUTER_BORDER_WIDTH,this._innerColor,u.INNER_BORDER_WIDTH):this._drawBorders(this._hoverColor,u.OUTER_BORDER_WIDTH_HOVER,this._innerColor,u.INNER_BORDER_WIDTH))},p.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect&&(this.IsShowingHoverEffect=!1,this.isSelected()?this._drawBorders(this._outerColor,u.OUTER_BORDER_WIDTH,this._innerColor,u.INNER_BORDER_WIDTH):this._drawBorders(this._borderColor,this._borderWidth))},p.prototype.setSelected=function(t){this.IsSelected!=t&&(this.IsSelected=t,this.isHoverEffectShown()?t?this._drawBorders(this._hoverColor,u.OUTER_BORDER_WIDTH,this._innerColor,u.INNER_BORDER_WIDTH):this._drawBorders(this._hoverColor,u.OUTER_BORDER_WIDTH_HOVER,this._innerColor,u.INNER_BORDER_WIDTH):t?this._drawBorders(this._outerColor,u.OUTER_BORDER_WIDTH,this._innerColor,u.INNER_BORDER_WIDTH):this._drawBorders(this._borderColor,this._borderWidth))},p.prototype.UpdateSelectionEffect=function(){},p.prototype.getDisplayAnimation=function(t){return this.getInsertAnimation(t)},p.prototype.getDeleteAnimation=function(e){var i=new t.CustomAnimation(this.getCtx(),this,e),n=[this._x1,this._x2,this._q2,this._q2,this._q2,this._q2,this._q2];return i.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,n),i.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,0),i},p.prototype.getInsertAnimation=function(e){var i=new t.CustomAnimation(this.getCtx(),this,e),n=this._getAnimationParams();return this._setAnimationParams([this._x1,this._x2,this._q2,this._q2,this._q2,this._q2,this._q2]),i.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,n),this.setAlpha(0),i.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,1),i},p.prototype.getUpdateAnimation=function(e,i){var n=new t.CustomAnimation(this.getCtx(),this,e),o=i._getQ2Fill(),r=this._getQ2Fill();o.equals(r)||(this._setQ2Fill(o),n.getAnimator().addProp(t.Animator.TYPE_FILL,this,this._getQ2Fill,this._setQ2Fill,r));var s=i._getQ3Fill(),a=this._getQ3Fill();s.equals(a)||(this._setQ3Fill(s),n.getAnimator().addProp(t.Animator.TYPE_FILL,this,this._getQ3Fill,this._setQ3Fill,a));var l=this._getAnimationParams();return this._setAnimationParams(i._getAnimationParams()),n.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,l),n},p.prototype._getAnimationParams=function(){return[this._x1,this._x2,this._low,this._q1,this._q2,this._q3,this._high]},p.prototype._setAnimationParams=function(t){this._render(t[0],t[1],t[2],t[3],t[4],t[5],t[6])},p.prototype._getQ2Fill=function(){return new t.SolidFill(this._styleOptions.q2Color)},p.prototype._setQ2Fill=function(t){this._styleOptions.q2Color=t.getColor()},p.prototype._getQ3Fill=function(){return new t.SolidFill(this._styleOptions.q3Color)},p.prototype._setQ3Fill=function(t){this._styleOptions.q3Color=t.getColor()},p.prototype._drawLine=function(e,i,n,o,r){var s=this._bHoriz?new t.Line(this.getCtx(),i,e,o,n):new t.Line(this.getCtx(),e,i,n,o);return this._applyCustomStyle(s,r),s.setPixelHinting(!0),this.addChild(s),s},p.prototype._drawMedianLine=function(e){if(!this._medianLine){var i=new t.Line(this.getCtx(),0,0,0,0);this._applyCustomStyle(i,"median"),i.setPixelHinting(!0),this.addChild(i),this._medianLine=i}var n=this._x1+e,o=this._x2-e,r=this._q2;this._bHoriz?(this._medianLine.setX1(r),this._medianLine.setX2(r),this._medianLine.setY1(n),this._medianLine.setY2(o)):(this._medianLine.setY1(r),this._medianLine.setY2(r),this._medianLine.setX1(n),this._medianLine.setX2(o))},p.prototype._drawBorders=function(e,i,n,o){if(!this._outerBorderShape){var r=this.getChildIndex(this._q2Box);this._innerBorderShape=new t.Polygon(this.getCtx()),this._innerBorderShape.setInvisibleFill(),this.addChildAt(this._innerBorderShape,r),this._outerBorderShape=new t.Polygon(this.getCtx()),this._outerBorderShape.setInvisibleFill(),this.addChildAt(this._outerBorderShape,r)}var s=0;i?(this._outerBorderShape.setPoints(this._createBoxPointsArray(0)),this._outerBorderShape.setSolidFill(e),s+=i,o?(this._innerBorderShape.setPoints(this._createBoxPointsArray(i)),this._innerBorderShape.setSolidFill(n),s+=o):this._innerBorderShape.setInvisibleFill()):(this._outerBorderShape.setInvisibleFill(),this._innerBorderShape.setInvisibleFill()),this._q2Box.setPoints(this._createQ2PointsArray(s)),this._q3Box.setPoints(this._createQ3PointsArray(s)),this._drawMedianLine(s)},p.prototype._createBoxPointsArray=function(t){var e,i,n=this._x1+t,o=this._x2-t;return this._q1<this._q3?(e=this._q1+t,i=this._q3-t):(e=this._q1-t,i=this._q3+t),this._createPointsArray(n,o,e,i)},p.prototype._createQ3PointsArray=function(t){var e,i=this._x1+t,n=this._x2-t,o=this._q2;return e=this._q2<this._q3?this._q3-t:this._q3+t,this._createPointsArray(i,n,o,e)},p.prototype._createQ2PointsArray=function(t){var e,i=this._x1+t,n=this._x2-t,o=this._q2;return e=this._q2<this._q1?this._q1-t:this._q1+t,this._createPointsArray(i,n,e,o)},p.prototype._createPointsArray=function(t,e,i,n){return this._bHoriz?[i,t,i,e,n,e,n,t]:[t,i,e,i,e,n,t,n]},p.prototype._applyCustomStyle=function(t,e){t.setStyle(this._styleOptions[e+"Style"]||this._styleOptions[e+"SvgStyle"],!0),t.setClassName(this._styleOptions[e+"ClassName"]||this._styleOptions[e+"SvgClassName"],!0)},p.prototype._cleanUp=function(){this.removeChildren(),this._q2Box=null,this._q3Box=null,this._medianLine=null,this._outerBorderShape=null,this._innerBorderShape=null};var _=function(t,e,i,n,o,r,s){this.Init(t),i=Math.max(2*Math.round(i/2),1);var a=Math.min(2*Math.ceil(_._BAR_WIDTH*i/2),i),l=Math.round(e)-i/2,h=l+i;if(null!=r&&null!=s){var d=Math.round(e)-a/2,c=d+a;this._rangeShape=new u(t,[d,r,c,r,c,s,d,s]),this.addChild(this._rangeShape)}this._changeShape=new u(t,[l,n,h,n,h,o,l,o]),this.addChild(this._changeShape),this.setPixelHinting(!0)};t.Obj.createSubclass(_,t.Container),_._BAR_WIDTH=.3,_.prototype.setChangeStyle=function(t,e,i,n,o){this._changeShape.setStyleProperties(t,e,i,n,o)},_.prototype.setRangeStyle=function(t,e,i,n){this._rangeShape&&this._rangeShape.setStyleProperties(t,e,i,null,n)},_.prototype.setSelected=function(t){this._changeShape.setSelected(t),this._rangeShape&&this._rangeShape.setSelected(t)},_.prototype.showHoverEffect=function(){this._changeShape.showHoverEffect(),this._rangeShape&&this._rangeShape.showHoverEffect()},_.prototype.hideHoverEffect=function(){this._changeShape.hideHoverEffect(),this._rangeShape&&this._rangeShape.hideHoverEffect()},_.prototype.getDisplayAnimation=function(e){var i=new t.CustomAnimation(this.getCtx(),this,e),n=this._changeShape.getPoints();if(this._changeShape.setPoints(_._getInitialPoints(n)),i.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this._changeShape,this._changeShape.getPoints,this._changeShape.setAnimationParams,n),this._rangeShape){var o=this._rangeShape.getPoints();this._rangeShape.setPoints(_._getInitialPoints(o)),i.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this._rangeShape,this._rangeShape.getPoints,this._rangeShape.setAnimationParams,o)}return i},_.prototype.getDeleteAnimation=function(e){var i=new t.CustomAnimation(this.getCtx(),this,e),n=_._getInitialPoints(this._changeShape.getPoints());if(i.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this._changeShape,this._changeShape.getPoints,this._changeShape.setAnimationParams,n),this._rangeShape){var o=_._getInitialPoints(this._rangeShape.getPoints());i.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this._rangeShape,this._rangeShape.getPoints,this._rangeShape.setAnimationParams,o)}return i.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,0),i},_.prototype.getInsertAnimation=function(e){this.setAlpha(0);var i=this.getDisplayAnimation(e);return i.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,1),i},_.prototype.getUpdateAnimation=function(e,i){var n=new t.CustomAnimation(this.getCtx(),this,e),o=this._changeShape.getPoints();this._changeShape.setPoints(i._changeShape.getPoints()),n.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this._changeShape,this._changeShape.getPoints,this._changeShape.setAnimationParams,o);var r=i._changeShape.getPrimaryFill().clone(),s=this._changeShape.getPrimaryFill(),a=i._changeShape.isSelected()||this._changeShape.isSelected()||r.equals(s);if(a||(this._changeShape.setFill(r),n.getAnimator().addProp(t.Animator.TYPE_FILL,this._changeShape,this._changeShape.getFill,this._changeShape.setFill,s)),this._rangeShape&&i._rangeShape){var l=this._rangeShape.getPoints();this._rangeShape.setPoints(i._rangeShape.getPoints()),n.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this._rangeShape,this._rangeShape.getPoints,this._rangeShape.setAnimationParams,l)}return n},_.prototype.UpdateSelectionEffect=function(){},_._getInitialPoints=function(t){var e=t[0],i=t[2],n=t[1],o=t[5],r=(n+o)/2;return[e,r,i,r,i,r,e,r]};var g=function(t,e,i,n,o,r){this.x=t,this.y1=e,this.y2=i,this.groupIndex=n,this.group=o,this.filtered=r};t.Obj.createSubclass(g,t.Obj),g.prototype.isUpstep=function(t){return Math.abs(this.y2-t)>Math.abs(this.y1-t)},g.prototype.clone=function(){return new g(this.x,this.y1,this.y2,this.groupIndex,this.group,this.filtered)};var m=function(t,e,i,n,o,r,s,a,l,h,u,d){this.Init(t.getCtx()),this._chart=t,this._bArea=e,this._availSpace=i,this._baseline=n,this._style=o,this._className=r,this._fill=s,this._stroke=a,this._type=l,this._baseType=u?u:l,this._indicatorMap={},this.setCoords(h,d)};t.Obj.createSubclass(m,t.Container),m._INDICATOR_OFFSET=8,m.prototype.setCoords=function(t,e){this._arCoord=t,e&&(this._arBaseCoord=e),this.removeChildren(),this._bArea?this._renderAreas():this._renderLines(),this._positionIndicators()},m.prototype.getCoords=function(){return this._arCoord},m.prototype.getBaseCoords=function(){return this._arBaseCoord},m.prototype.getBaseline=function(){return this._baseline},m.prototype.isArea=function(){return this._bArea},m.prototype._getPointArrays=function(e,i){var n=[],o=[];n.push(o),e=m._convertToPointCoords(e);var r,s=z.isPolar(this._chart),a="centeredStepped"==i||"centeredSegmented"==i,l=a||"stepped"==i||"segmented"==i,h=V.getGroupWidth(this._chart),u=t.Agent.isRightToLeft(this.getCtx())&&z.isVertical(this._chart)?-1:1;s&&(r=e[e.length-1]);for(var d,c,p,_,g=!1,f=0;f<e.length;f++)null!=e[f]?(d=e[f],p=e[f]._isY2,c=a?d.x-h/2*u:d.x,p&&(g&&l&&(c+=h*u),g=!g),"curved"==i&&p&&o.push(null,null),r&&l&&this._pushCoord(o,c,r.y),this._bArea||"segmented"!=i&&"centeredSegmented"!=i||(o=[],n.push(o)),this._pushCoord(o,c,d.y),r=d):(H.isMixedFrequency(this._chart)||l&&!s&&r&&!p&&(_=a?r.x+.5*h*u:r.x+h*u,this._pushCoord(o,_,r.y)),"jet"!=this._chart.getOptions()._environment&&H.isMixedFrequency(this._chart)||(o=[],n.push(o),r=null));if(l&&!s&&r&&!p&&(_=a?r.x+.5*h*u:r.x+h*u,this._pushCoord(o,_,r.y)),s&&n.length>1){var y=n.pop();n[0]=y.concat(n[0])}return n},m.prototype._pushCoord=function(e,i,n){var o=et.convertAxisCoord(this._chart,new t.Point(i,n),this._availSpace);e.push(Math.round(10*o.x)/10,Math.round(10*o.y)/10)},m.prototype._isRing=function(){if(!z.isPolar(this._chart)||!H.hasGroupAxis(this._chart)||this._arCoord.length<k.getGroupCount(this._chart))return!1;for(var t=0;t<this._arCoord.length;t++)if(null==this._arCoord[t].x)return!1;return!0},m.prototype._getSplineType=function(){return z.isScatterBubble(this._chart)?t.PathUtils.SPLINE_TYPE_CARDINAL:z.isPolar(this._chart)?this._isRing()?t.PathUtils.SPLINE_TYPE_CARDINAL_CLOSED:t.PathUtils.SPLINE_TYPE_CARDINAL:z.isHorizontal(this._chart)?t.PathUtils.SPLINE_TYPE_MONOTONE_HORIZONTAL:t.PathUtils.SPLINE_TYPE_MONOTONE_VERTICAL},m.prototype._renderLines=function(){for(var e,i=this._getPointArrays(this._arCoord,this._type),n=0;n<i.length;n++){var o=i[n];if(o&&o.length>1){if("curved"==this._type){var r=m._getCurvedPathCommands(o,!1,this._getSplineType());e=new t.Path(this.getCtx(),r),e.setFill(null)}else this._isRing()?(e=new t.Polygon(this.getCtx(),o),e.setFill(null)):e=new t.Polyline(this.getCtx(),o);e.setStroke(this._stroke),e.setClassName(this._className).setStyle(this._style),this.addChild(e)}}},m.prototype._renderAreas=function(){var e=this._arCoord,i=this._arBaseCoord;!z.isPolar(this._chart)&&e.length>0&&i.length>0&&(e=e.slice(0),i=i.slice(0),null!=e[0].x&&null!=i[0].x&&(m._removeAreaEdge(e,0,this._baseline),m._removeAreaEdge(i,0,this._baseline),i[0].x=e[0].x),null!=e[e.length-1].x&&null!=i[i.length-1].x&&(m._removeAreaEdge(e,e.length-1,this._baseline),m._removeAreaEdge(i,i.length-1,this._baseline),i[i.length-1].x=e[e.length-1].x));var n=this._getPointArrays(e,this._type),o=this._getPointArrays(i,this._baseType);if(n.length==o.length)for(var r,s=0;s<n.length;s++){var a=n[s],l=o[s];if(!(a.length<2)){var h="curved"==this._type,u="curved"==this._baseType;this._isRing()&&(h||a.push(a[0],a[1]),l.length>=2&&!u&&l.push(l[0],l[1]));for(var d=[],c=0;c<l.length;c+=2)d.unshift(l[c],l[c+1]);if(h||u){var p=this._getSplineType(),_=h?m._getCurvedPathCommands(a,!1,p):t.PathUtils.polyline(a,!1);_+=u?m._getCurvedPathCommands(d,!0,p):t.PathUtils.polyline(d,!0),_+=t.PathUtils.closePath(),r=new t.Path(this.getCtx(),_)}else{var g=d.concat(a);r=new t.Polygon(this.getCtx(),g)}r.setFill(this._fill),r.setClassName(this._className).setStyle(this._style),this._stroke&&r.setStroke(this._stroke),this.addChild(r)}}},m.prototype._positionIndicators=function(){for(var e,i,n,o,r,s=0;s<this._arCoord.length;s++)r=this._arCoord[s],e=this._indicatorMap[r.groupIndex],e&&e.indicator&&(o=(r.isUpstep(this._baseline)?r.y2:r.y1)+m._INDICATOR_OFFSET*(e.direction==N.DIR_UP?-1:1),n=et.convertAxisCoord(this._chart,new t.Point(r.x,o),this._availSpace),i=e.indicator,i.setTranslate(n.x,n.y),i.setAlpha(1),i.getParent().addChild(i))},m.prototype.getAnimationParams=function(t){return m._coordsToAnimationParams(this._arCoord,t?t._arCoord:null,this._baseline)},m.prototype.setAnimationParams=function(t){var e=m._animationParamsToCoords(t);this.setCoords(e)},m.prototype.getBaseAnimationParams=function(t){return m._coordsToAnimationParams(this._arBaseCoord,t?t._arBaseCoord:null,this._baseline)},m.prototype.setBaseAnimationParams=function(t){this._arBaseCoord=m._animationParamsToCoords(t)},m.prototype.getCommonGroupIndices=function(t){for(var e=[],i=0;i<this._arCoord.length;i++)if(!this._arCoord[i].filtered&&null!=this._arCoord[i].x)for(var n=0;n<t._arCoord.length;n++)if(!t._arCoord[n].filtered&&null!=t._arCoord[n].x&&this._arCoord[i].group==t._arCoord[n].group){e.push(this._arCoord[i].groupIndex);break}return e},m.prototype.addIndicator=function(t,e,i){i.setAlpha(0),this._indicatorMap[t]={direction:e,indicator:i}},m.prototype.removeIndicators=function(){for(var t in this._indicatorMap){var e=this._indicatorMap[t].indicator;e&&e.getParent().removeChild(e)}this._indicatorMap={}},m._convertToPointCoords=function(e){for(var i=[],n=0;n<e.length;n++)if(!e[n].filtered)if(null==e[n].x)i.push(null);else if(i.push(new t.Point(e[n].x,e[n].y1)),e[n].y1!=e[n].y2){var o=new t.Point(e[n].x,e[n].y2);o._isY2=!0,i.push(o)}return i},m._coordsToAnimationParams=function(e,i,n){if(i&&i.length>0)if(e&&e.length>0){e=e.slice(0);for(var o,r,s,a=m._coordsToGroups(i),l=m._coordsToGroups(e),h=e.length,u=a.length-1;u>=0;u--)o=a[u],r=t.ArrayUtils.getIndex(l,o),r==-1?(0==h?(s=e[0].clone(),e[0]=e[0].clone(),m._removeCoordJump(s,e[0],n)):(s=e[h-1].clone(),e[h-1]=e[h-1].clone(),m._removeCoordJump(e[h-1],s,n)),s.groupIndex=-1,e.splice(h,0,s)):h=r}else{e=[];for(var u=0;u<i.length;u++)e.push(new g(i[u].x,n,n))}for(var d=[],c=0;c<e.length;c++)e[c].filtered||(null==e[c].x?(d.push(1/0),d.push(1/0),d.push(1/0)):(d.push(e[c].x),d.push(e[c].y1),d.push(e[c].y2)),d.push(e[c].groupIndex));return d},m._animationParamsToCoords=function(t){for(var e=[],i=0;i<t.length;i+=4)t[i]==1/0||isNaN(t[i])?e.push(new g(null,null,null,t[i+3])):e.push(new g(t[i],t[i+1],t[i+2],t[i+3]));return e},m._coordsToGroups=function(t){for(var e=[],i=0;i<t.length;i++)t[i].filtered||e.push(t[i].group);return e},m._removeCoordJump=function(t,e,i){t.isUpstep(i)?e.y1=e.y2:t.y2=t.y1},m._getCurvedPathCommands=function(e,i,n){var o=[],r=[];o.push(r);for(var s=0;s<e.length;s+=2)null==e[s]?(r=[],o.push(r)):r.push(e[s],e[s+1]);if(n==t.PathUtils.SPLINE_TYPE_CARDINAL_CLOSED&&o.length>1){var a=o.pop();o[0]=a.concat(o[0]),n=t.PathUtils.SPLINE_TYPE_CARDINAL}for(var l="",s=0;s<o.length;s++)r=o[s],l+=t.PathUtils.curveThroughPoints(r,i,n),i=!0;return l},m._removeAreaEdge=function(t,e,i){var n=t[e].clone();n.isUpstep(i)?n.y1=n.y2:n.y2=n.y1,t[e]=n};var f=function(t,e,i,n,o,r){this.Init(t,e,null,i,n,o,o,null,null,!0),r&&this.setStroke(f.DEFAULT_STROKE)};t.Obj.createSubclass(f,t.SimpleMarker),f.DEFAULT_STROKE=new t.SolidStroke("none"),f.SELECTED_FILL=new t.SolidFill("#FFFFFF"),f.SELECTED_STROKE=new t.SolidStroke("#5A5A5A",1,1.5),f.prototype.setDataColor=function(e){this._dataColor=e,this._hoverStroke=new t.SolidStroke(e,1,1.5)},f.prototype.getDataColor=function(){return this._dataColor},f.prototype.showHoverEffect=function(){this.IsShowingHoverEffect=!0,this.setStroke(this._hoverStroke)},f.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect=!1,this.setStroke(this.isSelected()?f.SELECTED_STROKE:f.DEFAULT_STROKE)},f.prototype.setSelected=function(t){this.IsSelected!=t&&(this.IsSelected=t,this.isSelected()?(this.setFill(f.SELECTED_FILL),this.setStroke(this.isHoverEffectShown()?this._hoverStroke:f.SELECTED_STROKE)):(this.setInvisibleFill(),this.setStroke(this.isHoverEffectShown()?this._hoverStroke:f.DEFAULT_STROKE)))},f.prototype.UpdateSelectionEffect=function(){};var y=function(t){this.Init(t.getCtx(),t.processEvent,t),this._parentChart=t,this._chart=t.overview?t.overview.getBackgroundChart():null,this._id=t.getId()+"_overview"};t.Obj.createSubclass(y,t.Overview),y.prototype._renderChart=function(e,i,n){this._chartContainer=new t.Container(this.getCtx()),this.addChild(this._chartContainer);var o={legend:{rendered:"off",size:null},xAxis:{viewportMin:null,viewportMax:null,viewportStartGroup:null,viewportEndGroup:null,axisLine:{rendered:"off"},size:null,maxSize:.5,title:null},yAxis:{rendered:"off",size:null},y2Axis:{rendered:"off",size:null},splitDualY:"off",title:{text:null},subtitle:{text:null},footnote:{text:null},titleSeparator:{rendered:"off"},styleDefaults:{animationIndicators:"none"},layout:{outerGapWidth:0,outerGapHeight:0},_isOverview:!0};e=t.JsonUtils.merge(o,e),H.hasGroupAxis(this._parentChart)&&(e.xAxis.tickLabel.rendered="off"),z.isStock(this._parentChart)&&e.series&&e.series[0]&&(e.series=[e.series[0]],e.series[0].type="lineWithArea");var r=this._parentChart.getOptions().overview.content;e=t.JsonUtils.merge(r,e),e.zoomAndScroll="off",this._chart||(this._chart=t.Chart.newInstance(this.getCtx()),this._chart.setId(this._id)),this._chartContainer.addChild(this._chart),this._chart.render(e,i,n);var s=new t.Rect(this.getCtx(),0,0,i,n);return s.setInvisibleFill(),this._chartContainer.addChild(s),this._chart.getEventManager().setKeyboardHandler(null),this._chart.__getPlotAreaSpace().h},y.prototype.createBackground=function(t,e){},y.prototype.render=function(t,e,i){t.style={overviewBackgroundColor:"rgba(0,0,0,0)",windowBackgroundColor:"rgba(0,0,0,0)",windowBorderTopColor:"#333333",windowBorderRightColor:"#333333",windowBorderBottomColor:"#333333",windowBorderLeftColor:"#333333",leftFilterPanelColor:"rgba(5,65,135,0.1)",rightFilterPanelColor:"rgba(5,65,135,0.1)",handleBackgroundImage:t.chart._resources.overviewGrippy,handleWidth:3,handleHeight:15,handleFillColor:"rgba(0,0,0,0)"},t.animationOnClick="off";var n=this._renderChart(t.chart,e,i);y.superclass.render.call(this,t,e,n)},y.prototype.destroy=function(){y.superclass.destroy.call(this),this._parentChart=null,this._chart=null},y.prototype.getBackgroundChart=function(){return this._chart},y.prototype.isLeftAndRightFilterRendered=function(){return!0},y.prototype.HandleKeyDown=function(t){},y.prototype.HandleKeyUp=function(t){};var v=function(t,e,i,n,o,r,s){this.Init(t.getCtx()),this._axisCoord=e,this._availSpace=s.clone(),this._bbox=null,this._dataItemGaps=V.getDataItemGaps(t)*v._MAX_DATA_ITEM_GAP,this._setBarCoords(i,n,o,r)};t.Obj.createSubclass(v,h),v._MIN_BAR_LENGTH_FOR_GAPS=4,v._MAX_DATA_ITEM_GAP=3,v.prototype.getAnimationParams=function(){return[this._baselineCoord,this._endCoord,this._x1,this._x2]},v.prototype.setAnimationParams=function(t,e){this._setBarCoords(t[0],t[1],t[2],t[3])},v.prototype.getPrimaryFill=function(){return this.getFill()},v.prototype.getDisplayAnimation=function(e){var i=this.getAnimationParams();this.setAnimationParams([this._axisCoord,this._axisCoord,0,0]);var n=new t.CustomAnimation(this.getCtx(),this,e);return n.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,i),n},v.prototype.getDeleteAnimation=function(e){var i=[this._baselineCoord,this._baselineCoord,this._x1,this._x2],n=new t.CustomAnimation(this.getCtx(),this,e);return n.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,i),n.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,0),n},v.prototype.getInsertAnimation=function(e){this.setAlpha(0);var i=this.getAnimationParams();this.setAnimationParams([this._baselineCoord,this._baselineCoord,this._x1,this._x2]);var n=new t.CustomAnimation(this.getCtx(),this,e);return n.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,i),n.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,1),n},v.prototype._setBarCoords=function(e,i,n,o){var r=this._availSpace.x+this._availSpace.w/2,s=this._availSpace.y+this._availSpace.h/2,a=Math.max(i,e),l=Math.abs(i-e)>=v._MIN_BAR_LENGTH_FOR_GAPS&&this._axisCoord!=e?Math.min(i,e)+this._dataItemGaps:Math.min(i,e),h=360-t.Math.radsToDegrees(Math.max(n,o))+90,u=t.Math.radsToDegrees(Math.abs(o-n));this.setWedgeParams(r,s,a,a,h,u,this._dataItemGaps,l);var d=et.polarToCartesian(e,n,this._availSpace),c=et.polarToCartesian(e,o,this._availSpace),p=et.polarToCartesian(i,n,this._availSpace),_=et.polarToCartesian(i,o,this._availSpace),g=Math.min(d.x,c.x,p.x,_.x),m=Math.max(d.x,c.x,p.x,_.x),f=Math.min(d.y,c.y,p.y,_.y),y=Math.max(d.y,c.y,p.y,_.y);this._bbox=new t.Rectangle(g,f,m-g,y-f),this._baselineCoord=e,this._endCoord=i,this._x1=n,this._x2=o},v.prototype.getBoundingBox=function(){return this._bbox};var S=function(t,e,i,n,o,r,s){this.Init(t),this._markerSize=r,this._isInvisible=s,this._drawPath(e,i,n,o)};t.Obj.createSubclass(S,t.Path),S.prototype._drawPath=function(e,i,n,o){var r=Math.atan2(o-i,n-e),s=this._markerSize/2,a=Math.PI/8,l=t.PathUtils.moveTo(e+s*Math.cos(r+a),i+s*Math.sin(r+a))+t.PathUtils.arcTo(s,s,2*(Math.PI-a),1,e+s*Math.cos(r-a),i+s*Math.sin(r-a))+t.PathUtils.lineTo(n-s*Math.cos(r+a),o-s*Math.sin(r+a))+t.PathUtils.arcTo(s,s,2*(Math.PI-a),1,n-s*Math.cos(r-a),o-s*Math.sin(r-a))+t.PathUtils.closePath();this.setCmds(l),this._x1=e,this._y1=i,this._x2=n,this._y2=o},S.prototype.setStyleProperties=function(e,i,n,o,r){this._dataColor=n;var s=t.SelectionEffectUtils.getHoverBorderColor(n);this._isInvisible?(this.setInvisibleFill(),this._hoverStroke=new t.SolidStroke(s,1,1.5)):(this.setFill(e),this.setStroke(i),this.setHoverStroke(new t.SolidStroke(o,1,1),new t.SolidStroke(s,1,3.5)),this.setSelectedStroke(new t.SolidStroke(o,1,1.5),new t.SolidStroke(r,1,4.5)),this.setSelectedHoverStroke(new t.SolidStroke(o,1,1.5),new t.SolidStroke(s,1,4.5)))},S.prototype.getDataColor=function(){return this._dataColor},S.prototype.showHoverEffect=function(){this._isInvisible?(this.IsShowingHoverEffect=!0,this.setStroke(this._hoverStroke)):S.superclass.showHoverEffect.call(this)},S.prototype.hideHoverEffect=function(){this._isInvisible?(this.IsShowingHoverEffect=!1,this.setStroke(this.isSelected()?f.SELECTED_STROKE:f.DEFAULT_STROKE)):S.superclass.hideHoverEffect.call(this)},S.prototype.setSelected=function(t){if(this._isInvisible){if(this.IsSelected==t)return;this.IsSelected=t,this.isSelected()?(this.setFill(f.SELECTED_FILL),this.setStroke(this.isHoverEffectShown()?this._hoverStroke:f.SELECTED_STROKE)):(this.setInvisibleFill(),this.setStroke(this.isHoverEffectShown()?this._hoverStroke:f.DEFAULT_STROKE))}else S.superclass.setSelected.call(this,t)},S.prototype.UpdateSelectionEffect=function(){this._isInvisible||S.superclass.UpdateSelectionEffect.call(this)},S.prototype.getAnimationParams=function(){return[this._x1,this._y1,this._x2,this._y2]},S.prototype.setAnimationParams=function(t){this._drawPath(t[0],t[1],t[2],t[3])},S.prototype.isInvisible=function(){return this._isInvisible},S.prototype.getBoundingBox=function(){return this.getBoundingBox1().getUnion(this.getBoundingBox2())},S.prototype.getBoundingBox1=function(){return new t.Rectangle(this._x1-this._markerSize/2,this._y1-this._markerSize/2,this._markerSize,this._markerSize)},S.prototype.getBoundingBox2=function(){return new t.Rectangle(this._x2-this._markerSize/2,this._y2-this._markerSize/2,this._markerSize,this._markerSize)};var C=function(t,e,i){this.Init(t,e,i)};t.Obj.createSubclass(C,t.Container),C.BEHAVIOR_SNAP="SNAP",C.BEHAVIOR_SMOOTH="SMOOTH",C.BEHAVIOR_AUTO="AUTO",C.TOOLTIP_ID="_dvtDataCursor",C.prototype.Init=function(e,i,n){C.superclass.Init.call(this,e),this._bHoriz=n,this._options=i,this.setMouseEnabled(!1),this.setVisible(!1);var o=i.lineWidth,r=i.lineColor,s=t.Stroke.convertTypeString(i.lineStyle),a=new t.SolidStroke(r,1,o);if(a.setStyle(s),this._cursorLine=new t.Line(this.getCtx(),0,0,0,0,"dcLine"),this._cursorLine.setStroke(a),this.addChild(this._cursorLine),"off"!=i.markerDisplayed){this._marker=new t.Container(this._context),this._marker.setMouseEnabled(!1),this.addChild(this._marker);var l=i.markerSize,h=new t.SimpleMarker(this._context,t.SimpleMarker.CIRCLE,null,0,0,l+4*o,l+4*o);h.setSolidFill(r),this._marker.addChild(h);var u=new t.SimpleMarker(this._context,t.SimpleMarker.CIRCLE,null,0,0,l+2*o,l+2*o);u.setSolidFill("white"),this._marker.addChild(u),this._markerInnerCircle=new t.SimpleMarker(this._context,t.SimpleMarker.CIRCLE,null,0,0,l,l),this._marker.addChild(this._markerInnerCircle)}},C.prototype.render=function(e,i,n,o,r,s){var a,l=this.isHorizontal(),h=t.Agent.isRightToLeft(this.getCtx());if(null!=r&&""!=r){var u=this.getCtx().getStageAbsolutePosition(),d=this.getCtx().getTooltipManager(C.TOOLTIP_ID);d.showDatatip(i+u.x,n+u.y,r,s,!1),a=d.getTooltipBounds();var c,p,_=this._options.markerSize+4*this._options.lineWidth;l?(c=h?e.x-.75*a.w:e.x+e.w-a.w/4,p=o-a.h/2,!h&&c-i<_?c=i+_:h&&i-(c+a.w)<_&&(c=i-_-a.w)):(c=o-a.w/2,p=e.y-.75*a.h,n-(p+a.h)<_&&(p=n-_-a.h)),d.positionTip(c+u.x,p+u.y),a=d.getTooltipBounds(),a.x-=u.x,a.y-=u.y}if(l?(this._cursorLine.setTranslateY(o),h?(this._cursorLine.setX1(a?a.x+a.w-1:e.x),this._cursorLine.setX2(e.x+e.w)):(this._cursorLine.setX1(e.x),this._cursorLine.setX2(a?a.x+1:e.x+e.w))):(this._cursorLine.setTranslateX(o),this._cursorLine.setY1(a?a.y+a.h-1:e.y),this._cursorLine.setY2(e.y+e.h)),this._marker){this._marker.setTranslate(i,n);var g=this._options.markerColor;this._markerInnerCircle.setSolidFill(g?g:s),t.Agent.workaroundFirefoxRepaint(this._marker)}},C.prototype.isHorizontal=function(){return this._bHoriz},C.prototype.getBehavior=function(){return this._behavior?this._behavior:C.BEHAVIOR_AUTO},C.prototype.setBehavior=function(t){this._behavior=t};var E=function(t,e,i,n,o,r,s,a,l){this.Init(t,e,i,n,o,r,s,a,l)};t.Obj.createSubclass(E,t.Path),E.prototype.Init=function(e,i,n,o,r,s,a,l,h){E.superclass.Init.call(this,e.getCtx()),this._chart=e;var u=e.getOptions().styleDefaults;this._seriesIndex=i,this._numDrawnSeries=n,this._funnelWidth=o,this._funnelHeight=r,this._startPercent=s,this._valuePercent=a,this._fillPercent=l,this._3dRatio="on"==u.threeDEffect?1:0,
this._gap=h;var d=this._getPath();this._dataColor=V.getColor(this._chart,this._seriesIndex,0),this._backgroundColor=u.backgroundColor?u.backgroundColor:u.funnelBackgroundColor,this.setCmds(d.slice),d.bar&&(this._bar=new t.Path(this.getCtx(),d.bar),this.addChild(this._bar),this._bar.setMouseEnabled(!1)),this._setColorProperties(d.sliceBounds),this._label=this._getSliceLabel(d.sliceBounds,d.barBounds),null!=this._label&&(this._label.setMouseEnabled(!1),this.addChild(this._label))},E._FUNNEL_3D_WIDTH_RATIO=.08,E._FUNNEL_ANGLE_2D=36,E._FUNNEL_RATIO=1/3,E._BORDER_COLOR="#FFFFFF",E._MIN_CHARS_DATA_LABEL=3,E._LINE_FRACTION=2/3,E._AREA_FRACTION=.41,E._HEIGHT_FRACTION=.28,E._LINE_FRACTION_2=.4,E._AREA_FRACTION_2=.8,E._HEIGHT_FRACTION_2=.7,E.prototype._getPath=function(){var e=t.Agent.isRightToLeft(this.getCtx()),i=k.getSeriesCount(this._chart),n=(this._numDrawnSeries+1)*this._gap,o=t.Math.degreesToRads(E._FUNNEL_ANGLE_2D-2*this._3dRatio),r=this._funnelWidth-i*this._gap,s=r/Math.sin(t.Math.degreesToRads(E._FUNNEL_ANGLE_2D)),a=this._funnelHeight/Math.sin(o),l=this._3dRatio*this._funnelWidth/this._funnelHeight*E._FUNNEL_3D_WIDTH_RATIO;l<1e-5&&(l=0);var h,u,d,c,p,_,g,m,f,y,v,S,C=this._funnelHeight,b=this._funnelHeight*E._FUNNEL_RATIO;this._startPercent<E._AREA_FRACTION?(h=this._startPercent,d=C,p=this._funnelHeight*E._LINE_FRACTION,g=E._AREA_FRACTION,f=r*E._HEIGHT_FRACTION,v=r*(1-E._HEIGHT_FRACTION)):this._startPercent<E._AREA_FRACTION_2?(h=this._startPercent-E._AREA_FRACTION,d=this._funnelHeight*E._LINE_FRACTION,p=this._funnelHeight*E._LINE_FRACTION_2,g=E._AREA_FRACTION_2-E._AREA_FRACTION,f=r*(E._HEIGHT_FRACTION_2-E._HEIGHT_FRACTION),v=r*(1-E._HEIGHT_FRACTION_2)):(h=this._startPercent-E._AREA_FRACTION_2,d=this._funnelHeight*E._LINE_FRACTION_2,p=b,g=1-E._AREA_FRACTION_2,f=r*(1-E._HEIGHT_FRACTION_2),v=0),this._startPercent+this._valuePercent<E._AREA_FRACTION?(c=C,_=this._funnelHeight*E._LINE_FRACTION,u=this._startPercent+this._valuePercent,m=E._AREA_FRACTION,y=r*E._HEIGHT_FRACTION,S=r*(1-E._HEIGHT_FRACTION)):this._startPercent+this._valuePercent<E._AREA_FRACTION_2?(c=this._funnelHeight*E._LINE_FRACTION,_=this._funnelHeight*E._LINE_FRACTION_2,u=this._startPercent+this._valuePercent-E._AREA_FRACTION,m=E._AREA_FRACTION_2-E._AREA_FRACTION,y=r*(E._HEIGHT_FRACTION_2-E._HEIGHT_FRACTION),S=r*(1-E._HEIGHT_FRACTION_2)):(c=this._funnelHeight*E._LINE_FRACTION_2,_=b,u=this._startPercent+this._valuePercent-E._AREA_FRACTION_2,m=1-E._AREA_FRACTION_2,y=r*(1-E._HEIGHT_FRACTION_2),S=0);var T,A,O,P=Math.sqrt((g-h)/g*d*d+h/g*p*p),I=Math.sqrt((m-u)/m*c*c+u/m*_*_),D=.98*Math.asin(((P-p)*f/(d-p)+v)/s),x=.98*Math.asin(((I-_)*y/(c-_)+S)/s),M=(1+E._FUNNEL_RATIO)/2*this._funnelHeight+a,L=(1-E._FUNNEL_RATIO)/2*this._funnelHeight-a;e?(T=[s*Math.sin(D)+n,M-a*Math.cos(D),s*Math.sin(x)+n,M-a*Math.cos(x),s*Math.sin(x)+n,L+a*Math.cos(x),s*Math.sin(D)+n,L+a*Math.cos(D)],A=0,O=1):(T=[this._funnelWidth-n-s*Math.sin(D),M-a*Math.cos(D),this._funnelWidth-n-s*Math.sin(x),M-a*Math.cos(x),this._funnelWidth-n-s*Math.sin(x),L+a*Math.cos(x),this._funnelWidth-n-s*Math.sin(D),L+a*Math.cos(D)],A=1,O=0);var R=t.PathUtils.moveTo(T[0],T[1]),w=null;R+=t.PathUtils.arcTo(l*(T[1]-T[7])/2,(T[1]-T[7])/2,Math.PI,O,T[6],T[7]),R+=t.PathUtils.arcTo(l*(T[1]-T[7])/2,(T[1]-T[7])/2,Math.PI,O,T[0],T[1]),R+=t.PathUtils.arcTo(s,a,o,A,T[2],T[3]),R+=t.PathUtils.arcTo(l*(T[3]-T[5])/2,(T[3]-T[5])/2,Math.PI,O,T[4],T[5]),R+=t.PathUtils.arcTo(s,a,o,A,T[6],T[7]);var N=new t.Rectangle(Math.min(T[0],T[2]),T[5],Math.abs(T[0]-T[2]),Math.abs(T[3]-T[5]));if(null!=this._fillPercent){var U=Math.max(Math.min(this._fillPercent,1),0),B=e?-U*Math.PI:U*Math.PI;w=t.PathUtils.moveTo(T[0],T[1]),w+=t.PathUtils.arcTo(s,a,o,A,T[2],T[3]),w+=t.PathUtils.arcTo(l*(T[3]-T[5])/2,(T[3]-T[5])/2,B,O,T[2]+l*(T[3]-T[5])/2*Math.sin(B),(T[5]+T[3])/2+(T[3]-T[5])/2*Math.cos(B)),w+=this._fillPercent>.95?t.PathUtils.arcTo(s,a,o,A,T[6],T[1]+U*(T[7]-T[1])):this._fillPercent<.05?t.PathUtils.arcTo(s,a,o,O,T[6],T[1]+U*(T[7]-T[1])):t.PathUtils.lineTo(T[6]+l*(T[1]-T[7])/2*Math.sin(B),(T[7]+T[1])/2+(T[1]-T[7])/2*Math.cos(B)),w+=t.PathUtils.arcTo(l*(T[1]-T[7])/2,(T[1]-T[7])/2,B,A,T[0],T[1]),w+=t.PathUtils.closePath();var H=new t.Rectangle(Math.min(T[0],T[2]),T[5]+Math.abs(T[3]-T[5])*(1-U),Math.abs(T[0]-T[2]),Math.abs(T[3]-T[5])*U)}return{slice:R,bar:w,sliceBounds:N,barBounds:w?H:N}},E.prototype._getSliceLabel=function(e,i){var n=k.getDataLabel(this._chart,this._seriesIndex,0);if(n||(n=k.getSeriesLabel(this._chart,this._seriesIndex)),n&&"none"!=V.getDataLabelPosition(this._chart,this._seriesIndex,0)){var o=new t.MultilineText(this.getCtx(),n,0,0),r=null!=V.getPattern(this._chart,this._seriesIndex,0),s=[this._chart.getOptions().styleDefaults.dataLabelStyle,new t.CSSStyle(k.getDataItem(this._chart,this._seriesIndex,0).labelStyle)],a=t.CSSStyle.mergeStyles(s);if(o.setCSSStyle(a),t.TextUtils.fitText(o,e.h-this._3dRatio*(.8-this._valuePercent)*50,e.w,this,E._MIN_CHARS_DATA_LABEL)){var l=o.measureDimensions(),h=this._getLabelPosition(e);if(r){var u=.15*l.h,d=t.Agent.isRightToLeft(this.getCtx())?.5:-.5,c=t.PathUtils.roundedRectangle(l.x-u,l.y,l.w+2*u,l.h,2,2,2,2),p=new t.Path(this.getCtx(),c);p.setSolidFill("#FFFFFF",.9),h.translate(d*l.h,-d*l.w),p.setMatrix(h),this.addChild(p)}var _=r?"#000000":i.containsPoint(e.x,e.y+(e.h-l.w)/2)?t.ColorUtils.getContrastingTextColor(this._dataColor):t.ColorUtils.getContrastingTextColor(this._backgroundColor);return a.getStyle("color")&&!t.Agent.isHighContrast()||o.setCSSStyle(a.setStyle("color",_)),o.setMatrix(this._getLabelPosition(e)),o.alignCenter(),o.alignMiddle(),o}}},E.prototype._getLabelPosition=function(e){var i=this._3dRatio*(e.h*this._funnelWidth/this._funnelHeight*E._FUNNEL_3D_WIDTH_RATIO/2),n=new t.Matrix;return t.Agent.isRightToLeft(this.getCtx())?(n.rotate(Math.PI/2),n.translate(e.x+e.w/2-i,e.y+e.h/2)):(n.rotate(3*Math.PI/2),n.translate(e.x+e.w/2+i,e.y+e.h/2)),n},E.prototype._setColorProperties=function(e){var i=j.getFunnelPyramidSliceFill(this._chart,this._seriesIndex,this._dataColor,e),n=V.getBorderColor(this._chart,this._seriesIndex,0);null==n&&this._3dRatio>0&&(n=E._BORDER_COLOR);var o=V.getBorderWidth(this._chart,this._seriesIndex,0),r=t.SelectionEffectUtils.getHoverBorderColor(this._dataColor),s=j.getFunnelPyramidSliceFill(this._chart,this._seriesIndex,this._backgroundColor,e,!0);this._bar?(this.setFill(s),this._bar.setFill(i),this._bar.setStyle(V.getStyle(this._chart,this._seriesIndex,0)),this._bar.setClassName(V.getClassName(this._chart,this._seriesIndex,0))):(this.setFill(i),this.setStyle(V.getStyle(this._chart,this._seriesIndex,0)),this.setClassName(V.getClassName(this._chart,this._seriesIndex,0))),n&&this.setSolidStroke(n,null,o),this.OriginalStroke=this.getStroke();var a=null!=this._bar?this._bar:this;if(a.setHoverStroke(new t.SolidStroke(r,1,2)),this._chart.isSelectionSupported()){var l=V.getSelectedInnerColor(this._chart),h=V.getSelectedOuterColor(this._chart)?V.getSelectedOuterColor(this._chart):this._dataColor;a.setSelectedStroke(new t.SolidStroke(l,1,1.5),new t.SolidStroke(h,1,4.5)),a.setSelectedHoverStroke(new t.SolidStroke(l,1,1.5),new t.SolidStroke(r,1,4.5)),this.setCursor(t.SelectionEffectUtils.getSelectingCursor())}},E.prototype.getAnimationParams=function(){return[this._startPercent,this._valuePercent,this._fillPercent,this.getAlpha(),this._3dRatio]},E.prototype.setAnimationParams=function(t){this._startPercent=t[0],this._valuePercent=t[1],this._fillPercent=null!=this._fillPercent?t[2]:null,this.setAlpha(t[3]),this._3dRatio=t[4];var e=this._getPath();this.setCmds(e.slice),e.bar&&this._bar&&this._bar.setCmds(e.bar),this._label&&this._label.setMatrix(this._getLabelPosition(e.sliceBounds))},E.prototype.setSelected=function(t){if(null!=this._bar){if(this.IsSelected==t)return;this.IsSelected=t,this._bar.setSelected(t)}else E.superclass.setSelected.call(this,t);var e=this.getDimensions(),i=null!=this._bar?this._bar:this,n=3,o=e.w;t?(i.setScaleX((o-n)/o),i.setTranslateX(Math.ceil(n/2)+n/o*e.x)):(i.setScaleX(1),i.setTranslateX(0))},E.prototype.showHoverEffect=function(){null!=this._bar?this._bar.showHoverEffect():E.superclass.showHoverEffect.call(this)},E.prototype.hideHoverEffect=function(){null!=this._bar?this._bar.hideHoverEffect():E.superclass.hideHoverEffect.call(this)},E.prototype.copyShape=function(){return new E(this._chart,this._seriesIndex,this._numDrawnSeries,this._funnelWidth,this._funnelHeight,this._startPercent,this._valuePercent,this._fillPercent,this._gap)};var b=function(t,e,i,n,o,r,s,a){this.Init(t,e,i,n,o,r,s,a)};t.Obj.createSubclass(b,t.Path),b.prototype.Init=function(e,i,n,o,r,s,a,l){b.superclass.Init.call(this,e.getCtx()),this._chart=e;var h=e.getOptions().styleDefaults;this._seriesIndex=i,this._numDrawnSeries=n,this._pyramidWidth=o,this._pyramidHeight=r,this._startPercent=s,this._valuePercent=a,this._3dRatio="on"==h.threeDEffect?1:0,this._gap=l;var u=this._getPath();this._dataColor=V.getColor(this._chart,this._seriesIndex,0),this._3dRatio>0?(this.setCmds(u.threeDPathTop),this._threeDPathSide=new t.Path(this.getCtx(),u.threeDPathSide),this._mainFace=new t.Path(this.getCtx(),u.slice),this.addChild(this._threeDPathSide),this.addChild(this._mainFace)):this.setCmds(u.slice),this._setColorProperties(u.sliceBounds),this._label=this._getSliceLabel(u.sliceBounds),null!=this._label&&(this._label.setMouseEnabled(!1),this.addChild(this._label))},b._BORDER_COLOR="#FFFFFF",b._MIN_CHARS_DATA_LABEL=3,b._TOP_SLICE_LABEL_OFFSET=.4,b._3D_WIDTH_FACTOR=.2,b.prototype._getPath=function(){var e,i,n,o,r=t.Agent.isRightToLeft(this.getCtx()),s=k.getSeriesCount(this._chart),a=(s-this._numDrawnSeries)*this._gap,l=this._3dRatio*b._3D_WIDTH_FACTOR*.98*this._pyramidWidth,h=Math.sqrt(Math.pow(this._pyramidHeight-(s-1)*this._gap,2)*(1-this._startPercent)),u=this._startPercent+this._valuePercent>=1?0:Math.sqrt(Math.pow(this._pyramidHeight-(s-1)*this._gap,2)*(1-this._startPercent-this._valuePercent)),d=.98*(1-this._3dRatio*b._3D_WIDTH_FACTOR)*this._pyramidWidth*(u/this._pyramidHeight),c=0==this._numDrawnSeries?h:h-this._gap,p=.98*(1-this._3dRatio*b._3D_WIDTH_FACTOR)*this._pyramidWidth*(c/this._pyramidHeight);r?(i=[this._pyramidWidth-.5*this._pyramidWidth+l/2-d/2,a+u],o=[this._pyramidWidth-.5*this._pyramidWidth+l/2-p/2,a+h],n=[this._pyramidWidth-.5*this._pyramidWidth+l/2+p/2,a+h],e=[this._pyramidWidth-.5*this._pyramidWidth+l/2+d/2,a+u]):(e=[.5*this._pyramidWidth-l/2-d/2,a+u],n=[.5*this._pyramidWidth-l/2-p/2,a+h],o=[.5*this._pyramidWidth-l/2+p/2,a+h],i=[.5*this._pyramidWidth-l/2+d/2,a+u]);var _,g;if("on"==this._chart.getOptions().styleDefaults.threeDEffect){var m=this._3dRatio*b._3D_WIDTH_FACTOR*p*Math.sqrt(2)/2,f=this._3dRatio*b._3D_WIDTH_FACTOR*d*Math.sqrt(2)/2;_=t.PathUtils.moveTo(i[0],i[1]),_+=t.PathUtils.lineTo(i[0]+(r?-1:1)*Math.max(f,1),i[1]-Math.max(f,.5)),_+=t.PathUtils.lineTo(e[0]+(r?-1:1)*Math.max(f,1),e[1]-Math.max(f,.5)),_+=t.PathUtils.lineTo(e[0],e[1]),_+=t.PathUtils.closePath(),g=t.PathUtils.moveTo(i[0],i[1]),g+=t.PathUtils.lineTo(i[0]+(r?-1:1)*Math.max(f,1),i[1]-Math.max(f,.5)),g+=t.PathUtils.lineTo(o[0]+(r?-1:1)*m,o[1]-m),g+=t.PathUtils.lineTo(o[0],o[1]),g+=t.PathUtils.closePath()}var y=t.PathUtils.moveTo(i[0],i[1]);y+=t.PathUtils.lineTo(o[0],o[1]),y+=t.PathUtils.lineTo(n[0],n[1]),y+=t.PathUtils.lineTo(e[0],e[1]),y+=t.PathUtils.closePath();var v=s==this._numDrawnSeries+1,S=v?Math.abs(e[1]-n[1])/2:Math.abs(e[1]-n[1]),C=v?p/2:Math.abs(i[0]-e[0]),E=Math.min(e[1],n[1])+(v?b._TOP_SLICE_LABEL_OFFSET*(h-u):0),T=v?n[0]+(r?-1:1)*p/4:e[0],A=new t.Rectangle(T,E,C,S);return{slice:y,sliceBounds:A,threeDPathTop:_,threeDPathSide:g}},b.prototype._getSliceLabel=function(e){var i=k.getDataLabel(this._chart,this._seriesIndex,0);if(i||(i=k.getSeriesLabel(this._chart,this._seriesIndex)),i&&"none"!=V.getDataLabelPosition(this._chart,this._seriesIndex,0)){var n=new t.MultilineText(this.getCtx(),i,0,0),o=null!=V.getPattern(this._chart,this._seriesIndex,0),r=[this._chart.getOptions().styleDefaults.dataLabelStyle,new t.CSSStyle(k.getDataItem(this._chart,this._seriesIndex,0).labelStyle)],s=t.CSSStyle.mergeStyles(r);if(n.setCSSStyle(s),t.TextUtils.fitText(n,e.w,e.h,this,b._MIN_CHARS_DATA_LABEL)){var a=n.measureDimensions(),l=this._getLabelPosition(e);if(o){var h=.15*a.h,u=t.PathUtils.roundedRectangle(a.x-h,a.y,a.w+2*h,a.h,2,2,2,2),d=new t.Path(this.getCtx(),u);d.setSolidFill("#FFFFFF",.9),l.translate(-.5*a.w,-.5*a.h),d.setMatrix(l),this.addChild(d)}var c=o?"#000000":e.containsPoint(e.x+(e.w-a.w)/2,e.y)?t.ColorUtils.getContrastingTextColor(this._dataColor):t.ColorUtils.getContrastingTextColor(null);return s.getStyle("color")&&!t.Agent.isHighContrast()||n.setCSSStyle(s.setStyle("color",c)),n.setMatrix(this._getLabelPosition(e)),n.alignCenter(),n.alignMiddle(),n}}},b.prototype._getLabelPosition=function(e){var i=new t.Matrix;return t.Agent.isRightToLeft(this.getCtx())?i.translate(e.x-e.w/2,e.y+e.h/2):i.translate(e.x+e.w/2,e.y+e.h/2),i},b.prototype._setColorProperties=function(e){var i=j.getFunnelPyramidSliceFill(this._chart,this._seriesIndex,this._dataColor,e),n=V.getBorderColor(this._chart,this._seriesIndex,0);null==n&&this._3dRatio>0&&(n=b._BORDER_COLOR);var o=V.getBorderWidth(this._chart,this._seriesIndex,0),r=t.SelectionEffectUtils.getHoverBorderColor(this._dataColor);if(this._3dRatio>0){var s=!i.getPattern&&!i.getAlphas;this._mainFace.setFill(i),this._mainFace.setStyle(V.getStyle(this._chart,this._seriesIndex,0)),this._mainFace.setClassName(V.getClassName(this._chart,this._seriesIndex,0)),this._threeDPathSide.setFill(s?new t.SolidFill(t.ColorUtils.getDarker(i.getColor(),.3)):i),this._threeDPathSide.setStyle(V.getStyle(this._chart,this._seriesIndex,0)),this._threeDPathSide.setClassName(V.getClassName(this._chart,this._seriesIndex,0)),this.setFill(s?new t.SolidFill(t.ColorUtils.getDarker(i.getColor(),.3)):i),this.setStyle(V.getStyle(this._chart,this._seriesIndex,0)),this.setClassName(V.getClassName(this._chart,this._seriesIndex,0))}else this.setFill(i),this.setStyle(V.getStyle(this._chart,this._seriesIndex,0)),this.setClassName(V.getClassName(this._chart,this._seriesIndex,0));if(n&&(this.setSolidStroke(n,null,o),this._3dRatio>0&&(this._threeDPathSide.setSolidStroke(n,null,o),this._mainFace.setSolidStroke(n,null,o))),this.OriginalStroke=this.getStroke(),this.setHoverStroke(new t.SolidStroke(r,1,2)),this._3dRatio>0&&(this._threeDPathSide.setHoverStroke(new t.SolidStroke(r,1,2)),this._mainFace.setHoverStroke(new t.SolidStroke(r,1,2))),this._chart.isSelectionSupported()){var a=V.getSelectedInnerColor(this._chart),l=V.getSelectedOuterColor(this._chart)?V.getSelectedOuterColor(this._chart):this._dataColor;this._3dRatio>0?(this._mainFace.setSelectedStroke(new t.SolidStroke(a,1,1.5),new t.SolidStroke(l,1,4.5)),this._mainFace.setSelectedHoverStroke(new t.SolidStroke(a,1,1.5),new t.SolidStroke(r,1,4.5)),this._mainFace.setCursor(t.SelectionEffectUtils.getSelectingCursor()),this._threeDPathSide.setCursor(t.SelectionEffectUtils.getSelectingCursor()),this.setCursor(t.SelectionEffectUtils.getSelectingCursor())):(this.setSelectedStroke(new t.SolidStroke(a,1,1.5),new t.SolidStroke(l,1,4.5)),this.setSelectedHoverStroke(new t.SolidStroke(a,1,1.5),new t.SolidStroke(r,1,4.5)),this.setCursor(t.SelectionEffectUtils.getSelectingCursor()))}},b.prototype.getAnimationParams=function(){return[this._startPercent,this._valuePercent,this.getAlpha(),this._3dRatio]},b.prototype.setAnimationParams=function(t){this._startPercent=t[0],this._valuePercent=t[1],this.setAlpha(t[2]),this._3dRatio=t[3];var e=this._getPath();this._threeDPathSide&&this._mainFace?(this.setCmds(e.threeDPathTop),this._threeDPathSide.setCmds(e.threeDPathSide),this._mainFace.setCmds(e.slice)):this.setCmds(e.slice),this._label&&this._label.setMatrix(this._getLabelPosition(e.sliceBounds))},b.prototype.setSelected=function(t){if(this._3dRatio>0)if(this._mainFace.setSelected(t),t){var e=this.getDimensions(),i=3,n=5,o=e.w,r=e.h,s=(o-i)/o,a=(r-n)/r;this._mainFace.setScaleX(s),this._mainFace.setScaleY(a),this._mainFace.setTranslateX(Math.ceil(i/2)+i/o*e.x),this._mainFace.setTranslateY(Math.ceil(n/2)+n/r*e.y)}else this._mainFace.setScaleX(1),this._mainFace.setScaleY(1),this._mainFace.setTranslateX(0),this._mainFace.setTranslateY(0);else b.superclass.setSelected.call(this,t)},b.prototype.showHoverEffect=function(){b.superclass.showHoverEffect.call(this),this._3dRatio>0&&(this._threeDPathSide.showHoverEffect(),this._mainFace.showHoverEffect())},b.prototype.hideHoverEffect=function(){b.superclass.hideHoverEffect.call(this),this._3dRatio>0&&(this._threeDPathSide.hideHoverEffect(),this._mainFace.hideHoverEffect())},b.prototype.copyShape=function(){return new b(this._chart,this._seriesIndex,this._numDrawnSeries,this._pyramidWidth,this._pyramidHeight,this._startPercent,this._valuePercent,this._gap)},b.prototype.getPrimaryFill=function(){return this._mainFace?this._mainFace.getFill():this.getFill()};var T=function(t,e,i,n){this.Init(t,e,i,n)};T._THREED_TILT=.59,T._THREED_DEPTH=.1,T._RADIUS=.45,T._RADIUS_LABELS=.38,t.Obj.createSubclass(T,t.Container),T.prototype.Init=function(e,i,n,o){T.superclass.Init.call(this,e.getCtx()),this.chart=e,this._options=e.getOptions(),this._frame=i.clone(),e.pieChart=this;for(var r=this.getLabelPosition(),s=k.getSeriesCount(e),a=0;a<s;a++){var l=k.getDataItem(e,a,0);!l||"center"!=r&&"none"!=r||"outsideSlice"!=l.labelPosition||(r="outsideSlice")}this._center=new t.Point(i.x+Math.floor(i.w/2),i.y+Math.floor(i.h/2));var h="center"==r||"none"==r?T._RADIUS:T._RADIUS_LABELS;this._radiusX=Math.floor(Math.min(i.w,i.h)*h),this._radiusY=this._radiusX,this._depth=0,this._anchorOffset=90,this.is3D()&&(this._depth=i.h*T._THREED_DEPTH,this._center.y-=Math.floor(this._depth/2),this._radiusY*=T._THREED_TILT),this._slices=this._createSlices(),this._shapesContainer=new t.Container(this.getCtx()),this._numFrontObjs=0,this._numSelectedObjsInFront=0},T.prototype.getOptions=function(){return this._options},T.prototype.highlight=function(e){t.CategoryRolloverHandler.highlight(e,this._slices,"any"==this.getOptions().highlightMatch)},T.prototype._createSlices=function(){for(var e,i,n=[],o=Z.getRenderedSeriesIndices(this.chart),r=Z.getOtherValue(this.chart),s=0;s<o.length;s++)i=o[s],V.isDataItemRendered(this.chart,i)&&(e=new A(this,i),e.getValue()<=0||n.push(e));var a=V.getHiddenCategories(this.chart),l=t.ArrayUtils.getIndex(a,Z.OTHER_SLICE_SERIES_ID)>=0;if(r>0&&!l){var h=new A(this);"ascending"==this.chart.getOptions().sorting?n.unshift(h):n.push(h)}return t.Agent.isRightToLeft(this.getCtx())&&n.reverse(),n},T.prototype.setInitialSelection=function(){var t=this.chart.getSelectionHandler();if(t){for(var e=k.getInitialSelection(this.chart),i=[],n=0;n<e.length;n++)for(var o=0;o<this._slices.length;o++){var r=this._slices[o].getId();r&&(e[n].id&&r.getId()==e[n].id||r.getSeries()==e[n].series&&r.getGroup()==e[n].group)&&i.push(r)}if(Z.isOtherSliceSelected(this.chart,e)){var s=Z.getOtherSliceId(this.chart);i.push(s)}t.processInitialSelections(i,this._slices)}},T.prototype.render=function(){var e;if(!this.contains(this._shapesContainer)&&(this._shapesContainer||(this._shapesContainer=new t.Container(this.getCtx())),this.addChild(this._shapesContainer),!this.is3D()&&this.getSkin()==t.CSSStyle.SKIN_SKYROS)){var i=t.ColorUtils.makeRGBA(78,87,101,.45);e=new t.Shadow(i,4,7,7,54,2,3,!1,!1,!1)}T._layoutSlices(this._slices,this._anchorOffset);for(var n=0;n<this._slices.length;n++)this._slices[n].preRender();var o=T._orderSlicesForRendering(this._slices);this._duringDisplayAnim||(Q.createPieCenter(this),Q.layoutLabelsAndFeelers(this));for(var n=0;n<o.length;n++)o[n].render(this._duringDisplayAnim);t.Agent.isPlatformWebkit()||e&&this._shapesContainer.addDrawEffect(e),this.setInitialSelection(),this.highlight(V.getHighlightedCategories(this.chart))},T.prototype.getTotalValue=function(){for(var t=0,e=0;e<this._slices.length;e++){var i=this._slices[e].getValue();i>=0&&(t+=i)}return t},T._layoutSlices=function(t,e){var i,n,o,r=0,s=t?t.length:0;e>360&&(e-=360),e<0&&(e+=360);var a=0,l=0;s>0&&(l=t[0].getPieChart().getTotalValue());for(var i=0;i<s;i++){n=t[i];var h=n.getValue();a=h==l?100:0==l?0:Math.min(h/l*100,99.99),r=3.6*a,o=e-r,o<0&&(o+=360),n.setAngleStart(o),n.setAngleExtent(r),e=n.getAngleStart()}},T._orderSlicesForRendering=function(t){for(var e,i,n,o,r,s,a=[],l=t?t.length:0,h=-1,e=0;e<l;e++)if(i=t[e],n=i.getAngleStart(),o=i.getAngleExtent(),r=n+o,r>360&&(r-=360),r<0&&(r+=360),90==r||n<90&&r>90){h=e,s=r-90;break}for(var u=[],e=h;e<l;e++)u.push(t[e]);for(var e=0;e<h;e++)u.push(t[e]);for(var d=0,c=0,p=180+s,e=0;e<l;e++)if(i=u[e]){if(d+i.getAngleExtent()>p){c=e;break}a.push(i),d+=i.getAngleExtent()}for(var e=l-1;e>=c;e--)i=u[e],i&&a.push(i);return a},T.prototype.is3D=function(){return"on"==this._options.styleDefaults.threeDEffect},T.prototype.__calcMaxExplodeDistance=function(){var t=.5/T._RADIUS-1;return this._radiusX*t},T.prototype.getAnimationDuration=function(){return V.getAnimationDuration(this.chart)},T.prototype.getDisplayAnimation=function(){this._duringDisplayAnim=!0;var e=new t.DataAnimationHandler(this.getCtx(),this),i=this.getAnimationDuration(),n=A.createFillerSlice(this,this.getTotalValue());this._slices.push(n);var o=new t.CustomAnimation(this.getCtx(),n,i);o.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,n,n.GetAnimationParams,n.SetAnimationParams,n.getDeletedAnimationParams()),o.setOnEnd(n._removeDeletedSlice,n),e.add(o,0);for(var r=0;r<this._slices.length-1;r++)this._slices[r].animateInsert(e);var s=new t.CustomAnimation(this.getCtx(),this,i);s.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,this._getAnimationParams()),e.add(s,0);for(var a=[],r=0;r<this._slices.length;r++)a=a.concat(this._slices[r].getLabelAndFeeler());var l=new t.AnimFadeIn(this._context,a,i);e.add(l,0),this._setAnimationParams();var h=e.getAnimation(!0);return h.setOnEnd(this._onEnd,this),h},T.prototype._onEnd=function(){this._duringDisplayAnim=!1,this._setAnimationParams()},T.prototype.getCenter=function(){return this._center},T.prototype.getInnerRadius=function(){return this.is3D()?0:this._options.styleDefaults.pieInnerRadius*Math.min(this._radiusX,this._radiusY)*.95},T.prototype.__getFrame=function(){return this._frame},T.prototype.getRadiusX=function(){return this._radiusX},T.prototype.getRadiusY=function(){return this._radiusY},T.prototype.getDepth=function(){return this._depth},T.prototype.getSliceDisplayable=function(t){var e=Z.getSliceBySeriesIndex(this.chart,t);return e?e.getTopDisplayable():null},T.prototype.__getShapesContainer=function(){return this._shapesContainer},T.prototype.__getSlices=function(){return this._slices},T.prototype.animateUpdate=function(e,i){var n=new t.DataAnimationHandler(this.getCtx(),this);n.constructAnimation(i.__getSlices(),this.__getSlices());var o=n.getAnimation(!0),r=new t.CustomAnimation(this.getCtx(),this,this.getAnimationDuration());r.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,this._getAnimationParams());var s=new t.ParallelPlayable(this.getCtx(),o,r);s.setOnEnd(this._setAnimationParams,this),e.add(s,0),this._setAnimationParams([i.getDepth(),i.getRadiusY(),i.getCenter().y])},T.prototype.animateInsert=function(t){},T.prototype.animateDelete=function(t,e){},T.prototype._getAnimationParams=function(){return[this._depth,this._radiusY,this._center.y]},T.prototype._setAnimationParams=function(t){this.removeChildren(),this._shapesContainer&&this._shapesContainer.destroy(),this._shapesContainer=null,t&&(this._depth=t[0],this._radiusY=t[1],this._center.y=t[2]),this.render()},T.prototype.bringToFrontOfSelection=function(t){var e=t.getPieChart()._shapesContainer;if(e){var i=e.getNumChildren();if(i-this._numFrontObjs>1){e.removeChild(t._topSurface[0]);var n=i-this._numFrontObjs-1;e.addChildAt(t._topSurface[0],n)}}},T.prototype.pushToBackOfSelection=function(t){for(var e=this._slices.length,i=0,n=0;n<e;n++)this._slices[n].isSelected()&&i++;this._numSelectedObjsInFront=i;var o=t.getPieChart()._shapesContainer;if(o){var r=o.getNumChildren(),s=r-this._numFrontObjs-1-this._numSelectedObjsInFront;s>=0&&(o.removeChild(t._topSurface[0]),o.addChildAt(t._topSurface[0],s))}},T.prototype.setNumFrontObjs=function(t){this._numFrontObjs=t},T.prototype.getShapesForViewSwitcher=function(t){var e={};if(this._slices)for(var i=0;i<this._slices.length;i++){var n=this._slices[i];if(n){var o=n.getId();if(o){var r=o.getId();if(r&&n._topSurface&&n._topSurface.length>0){var s=n._topSurface[0];e[r]=s}}}}return e},T.prototype.getLabelPosition=function(){return T.parseLabelPosition(this._options.styleDefaults.dataLabelPosition)},T.prototype.getSeriesLabelPosition=function(t){var e=this.getLabelPosition(),i=k.getDataItem(this.chart,t,0);return i&&i.labelPosition&&(e=i.labelPosition),T.parseLabelPosition(e)},T.parseLabelPosition=function(t){return"center"==t||"inside"==t?"center":"outsideSlice"==t||"outside"==t?"outsideSlice":"none"==t?"none":"auto"},T.prototype.getSkin=function(){return this._options.skin};var A=function(t,e){this.Init(t,e)};t.Obj.createSubclass(A,t.Obj),A.prototype.Init=function(e,i){this._pieChart=e,this._chart=e.chart,this._angleStart=0,this._angleExtent=0,this._topSurface=null,this._leftSurface=null,this._rightSurface=null,this._crustSurface=null,this._explodeOffsetX=0,this._explodeOffsetY=0,this._sliceLabel=null,this._sliceLabelString=null,this._hasFeeler=!1,this._feelerRad=null,this._feelerHoriz=null,this._outsideFeelerStart=null,this._outsideFeelerMid=null,this._outsideFeelerEnd=null,this._selected=!1,this._selecting=!1,this._centerX=this._pieChart.getCenter().x,this._centerY=this._pieChart.getCenter().y,this._radiusX=this._pieChart.getRadiusX(),this._radiusY=this._pieChart.getRadiusY(),this._depth=this._pieChart.getDepth();var n=this._chart.getOptions();if(null!=i){var o=k.getDataItem(this._chart,i,0);this._value=k.getValue(this._chart,i,0),this._explode=Z.getSliceExplode(this._chart,i),this._fillColor=V.getColor(this._chart,i,0),this._fillPattern=V.getPattern(this._chart,i,0),this._strokeColor=V.getBorderColor(this._chart,i),this._borderWidth=V.getBorderWidth(this._chart,i),this._customLabel=o.label,this._seriesLabel=k.getSeries(this._chart,i),this._action=o.action,this._drillable=F.isDataItemDrillable(this._chart,i,0),this._showPopupBehaviors=this._chart.getShowPopupBehaviors(o._id),this._id=Z.getSliceId(this._chart,i),this._seriesIndex=i,this._categories=k.getCategories(this._chart,i,0)}else this._value=Z.getOtherValue(this._chart),this._explode=0,this._fillColor=n.styleDefaults.otherColor,this._fillPattern=null,this._strokeColor=n.styleDefaults.borderColor,this._borderWidth=n.styleDefaults.borderWidth,this._customLabel=null,this._seriesLabel=t.Bundle.getTranslatedString(t.Bundle.CHART_PREFIX,"LABEL_OTHER",null),this._action=null,this._drillable=!1,this._showPopupBehaviors=Z.getOtherSliceShowPopupBehaviors(this._chart),this._id=Z.getOtherSliceId(this._chart)},A.prototype.getPieChart=function(){return this._pieChart},A.prototype.render=function(e){for(var i=A._sortPieSurfaces(this._topSurface,this._leftSurface,this._rightSurface,this._crustSurface,this._angleStart,this._angleExtent),n=i.length,o=0;o<n;o++)for(var r=i[o],s=r.length,a=0;a<s;a++){var l=this._pieChart.__getShapesContainer();l.addChild(r[a]),r[a].render&&r[a].render()}if(this._sliceLabel&&(this._pieChart.addChild(this._sliceLabel),X.associate(this,[this._sliceLabel]),e?(this._pieChart.addChild(this._feelerRad),this._pieChart.addChild(this._feelerHoriz)):this._renderOutsideFeeler()),this._explodeSlice(),this._action||this._drillable||this._pieChart.chart.isSelectionSupported())for(var h=this.getDisplayables(),o=0;o<h.length;o++)h[o].setCursor(t.SelectionEffectUtils.getSelectingCursor());var u=this.getTopDisplayable();u&&(u.setAriaRole("img"),this._updateAriaLabel())},A.prototype._feelerFromPts=function(e,i){var n=new t.Line(this._pieChart.getCtx(),e.x,e.y,i.x,i.y),o=this._pieChart.getOptions().styleDefaults.pieFeelerColor,r=new t.SolidStroke(o);return n.setStroke(r),this._pieChart.addChild(n),n},A.prototype._renderOutsideFeeler=function(){if(this._hasFeeler){var t=this._feelerFromPts(this._outsideFeelerStart,this._outsideFeelerMid),e=this._feelerFromPts(this._outsideFeelerMid,this._outsideFeelerEnd);this._feelerRad=t,this._feelerHoriz=e}},A.prototype.preRender=function(){var e,i=this._bFillerSlice?"color":V.getSeriesEffect(this._chart),n=this.getFillColor(),o=this.getFillPattern();if("pattern"==i||null!=o)e=new t.PatternFill(o,n),i="pattern";else if("gradient"==i){var r=this._pieChart.getSkin(),s=r==t.CSSStyle.SKIN_SKYROS?297:270,a=this._pieChart.is3D()?"3D":"2D",l=X.getGradientColors(t.ColorUtils.getRGB(n),a,r),h=X.getGradientAlphas(t.ColorUtils.getAlpha(n),a),u=X.getGradientRatios(a,r),d=[Math.floor(this._centerX-this._radiusX),Math.floor(this._centerY-this._radiusY),Math.ceil(2*this._radiusX),Math.ceil(2*this._radiusY)];e=new t.LinearGradientFill(s,l,h,u,d)}else e=new t.SolidFill(n);if(this._topSurface=X.createTopSurface(this,e),this._depth>0||this._radiusX!=this._radiusY){var c="gradient"==i,p=new t.SolidFill(t.ColorUtils.getDarker(n,.4)),_=c?X.generateLateralGradientFill(this,X.SIDE):p,g=c?X.generateLateralGradientFill(this,X.CRUST):p;this._leftSurface=X.createLateralSurface(this,X.SURFACE_LEFT,_),this._rightSurface=X.createLateralSurface(this,X.SURFACE_RIGHT,_),this._crustSurface=X.createLateralSurface(this,X.SURFACE_CRUST,g)}this.setSliceLabel(null)},A._sortPieSurfaces=function(t,e,i,n,o,r){var s=[];return e&&i&&n&&(o<=270&&o+r>270?(s.push(e),s.push(i),s.push(n)):o>270||o+r<=90?(s.push(e),s.push(n),s.push(i)):(s.push(i),s.push(n),s.push(e))),s.push(t),s},A.oppositeDirection=function(t,e,i){var n=t-e>0,o=t-i>0;return n!=o},A.prototype._explodeSlice=function(){if(0!=this._explode){var e=this._angleExtent,i=this._angleStart,n=i+e/2,o=(360-n)*t.Math.RADS_PER_DEGREE,r=this._pieChart.is3D()?T._THREED_TILT:1,s=this._explode*this._pieChart.__calcMaxExplodeDistance();this._explodeOffsetX=Math.cos(o)*s,this._explodeOffsetY=Math.sin(o)*r*s,t.Agent.isPlatformWebkit()&&(this._explodeOffsetX=Math.round(this._explodeOffsetX),this._explodeOffsetY=Math.round(this._explodeOffsetY))}else this._explodeOffsetX=0,this._explodeOffsetY=0;if(this._topSurface){var a=this._pieChart.is3D()&&this._topSurface[0].getSelectionOffset?this._topSurface[0].getSelectionOffset():[];A._translateShapes(this._topSurface,a[0]?a[0]+this._explodeOffsetX:this._explodeOffsetX,a[1]?a[1]+this._explodeOffsetY:this._explodeOffsetY)}if(this._rightSurface&&A._translateShapes(this._rightSurface,this._explodeOffsetX,this._explodeOffsetY),this._leftSurface&&A._translateShapes(this._leftSurface,this._explodeOffsetX,this._explodeOffsetY),this._crustSurface&&A._translateShapes(this._crustSurface,this._explodeOffsetX,this._explodeOffsetY),this._hasFeeler){var l=this._outsideFeelerStart.x,h=this._outsideFeelerStart.y,u=l+this._explodeOffsetX,d=h+this._explodeOffsetY;this._feelerRad.setX1(u),this._feelerRad.setY1(d);var c=this._outsideFeelerMid.x,p=this._outsideFeelerMid.y;A.oppositeDirection(c,l,u)?(this._feelerRad.setX2(u),this._feelerHoriz.setX1(u)):(this._feelerRad.setX2(c),this._feelerHoriz.setX1(c)),A.oppositeDirection(p,h,d)?(this._feelerRad.setY2(d),this._feelerHoriz.setY1(d)):(this._feelerRad.setY2(p),this._feelerHoriz.setY1(p))}this._sliceLabel&&!this._hasFeeler&&this._sliceLabel.setTranslate(this._explodeOffsetX,this._explodeOffsetY)},A._translateShapes=function(t,e,i){if(t)for(var n=t.length,o=0;o<n;o++){var r=t[o];r.setTranslate(e,i)}},A.prototype.getRadiusX=function(){return this._radiusX},A.prototype.getRadiusY=function(){return this._radiusY},A.prototype.getCenter=function(){return new t.Point(this._centerX,this._centerY)},A.prototype.getDepth=function(){return this._depth},A.prototype.getAngleExtent=function(){return this._angleExtent},A.prototype.setAngleExtent=function(t){this._angleExtent=t},A.prototype.getAngleStart=function(){return this._angleStart},A.prototype.setAngleStart=function(t){this._angleStart=t},A.prototype.__getExplodeOffsetX=function(){
return this._explodeOffsetX},A.prototype.__getExplodeOffsetY=function(){return this._explodeOffsetY},A.prototype.setOutsideFeelerPoints=function(t,e,i){this._outsideFeelerStart=t,this._outsideFeelerMid=e,this._outsideFeelerEnd=i,this._hasFeeler=!0},A.prototype.setNoOutsideFeeler=function(){this._outsideFeelerStart=null,this._outsideFeelerMid=null,this._outsideFeelerEnd=null,this._hasFeeler=!1},A.prototype.getLabelAndFeeler=function(){var t=[];return this._sliceLabel&&t.push(this._sliceLabel),this._feelerRad&&t.push(this._feelerRad),this._feelerHoriz&&t.push(this._feelerHoriz),t},A.prototype.getSliceLabel=function(){return this._sliceLabel},A.prototype.setSliceLabel=function(t){this._sliceLabel=t},A.prototype.getSliceLabelString=function(){return this._sliceLabelString},A.prototype.setSliceLabelString=function(t){this._sliceLabelString=t},A.prototype.getTopSurface=function(){return this._topSurface},A.prototype.getValue=function(){return this._value},A.prototype.getId=function(){return this._id},A.prototype.getSeriesIndex=function(){return this._seriesIndex},A.containsRect=function(t,e){return e.contains(t.x,t.y)&&e.contains(t.x+t.w,t.y)&&e.contains(t.x+t.w,t.y+t.h)&&e.contains(t.x,t.y+t.h)},A._shapeIsSelectable=function(t){return t instanceof h},A.prototype.contains=function(t,e){for(var i=this._pieChart.getInnerRadius(),n=this._pieChart.getCenter(),o=(t-n.x)/this._radiusX,r=(e-n.y)/this._radiusY,s=-Math.atan2(r,o)*(180/Math.PI);s<this._angleStart;)s+=360;for(;s-this._angleStart>=360;)s-=360;var a=Math.pow(o,2)+Math.pow(r,2),l=Math.sqrt(a)>i/this._radiusX&&a<=1,h=s<=this._angleStart+this._angleExtent;return l&&h},A.prototype.GetAnimationParams=function(){var e=t.ColorUtils.getRed(this._fillColor),i=t.ColorUtils.getGreen(this._fillColor),n=t.ColorUtils.getBlue(this._fillColor),o=t.ColorUtils.getAlpha(this._fillColor);return[this._value,this._radiusX,this._radiusY,this._explode,this._centerX,this._centerY,this._depth,e,i,n,o]},A.prototype.SetAnimationParams=function(e){this._value=e[0],this._radiusX=e[1],this._radiusY=e[2],this._explode=e[3],this._centerX=e[4],this._centerY=e[5],this._depth=e[6];var i=Math.round(e[7]),n=Math.round(e[8]),o=Math.round(e[9]),r=Math.round(e[10]);this._fillColor=t.ColorUtils.makeRGBA(i,n,o,r)},A.prototype.getDeletedAnimationParams=function(){var t=this.GetAnimationParams();return t[0]=0,t[1]=this.getInnerRadius(),t[2]=this.getInnerRadius(),t[3]=0,t},A.prototype.animateUpdate=function(e,i){var n=i.GetAnimationParams(),o=this.GetAnimationParams();if(!t.ArrayUtils.equals(n,o)){var r=new t.CustomAnimation(this._pieChart.getCtx(),this,this.getPieChart().getAnimationDuration());r.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.GetAnimationParams,this.SetAnimationParams,o),e.add(r,0),this.SetAnimationParams(n)}},A.prototype.animateInsert=function(e){var i=new t.CustomAnimation(this._pieChart.getCtx(),this,this.getPieChart().getAnimationDuration());i.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.GetAnimationParams,this.SetAnimationParams,this.GetAnimationParams()),e.add(i,0),this.SetAnimationParams(this.getDeletedAnimationParams())},A.prototype.animateDelete=function(e,i){var n=i.__getSlices(),o=this.getPieChart().__getSlices(),r=t.ArrayUtils.getIndex(o,this),s=r-1;if(s>=0){for(var a=o[s].getId(),l=0;l<n.length;l++)if(n[l].getId().equals(a)){n.splice(l+1,0,this);break}}else n.splice(0,0,this);this._pieChart=i;var h=new t.CustomAnimation(i.getCtx(),this,this.getPieChart().getAnimationDuration());h.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this.GetAnimationParams,this.SetAnimationParams,this.getDeletedAnimationParams()),h.setOnEnd(this._removeDeletedSlice,this),e.add(h,0)},A.prototype._removeDeletedSlice=function(){var e=this.getPieChart().__getSlices(),i=t.ArrayUtils.getIndex(e,this);i>=0&&e.splice(i,1)},A.prototype.getDisplayables=function(){var t=new Array;return this._topSurface&&(t=t.concat(this._topSurface)),this._leftSurface&&(t=t.concat(this._leftSurface)),this._rightSurface&&(t=t.concat(this._rightSurface)),this._crustSurface&&(t=t.concat(this._crustSurface)),this._sliceLabel&&t.push(this._sliceLabel),this._feelerRad&&t.push(this._feelerRad),this._feelerHoriz&&t.push(this._feelerHoriz),t},A.prototype.getAriaLabel=function(){var e;e=null==this._seriesIndex?W.getOtherSliceDatatip(this._chart,this._value,!1):W.getDatatip(this._chart,this._seriesIndex,0,null,!1);var i=t.Bundle.getTranslatedString(t.Bundle.CHART_PREFIX,"LABEL_PERCENTAGE",null),n=Q.generateSliceLabelString(this,"percent");e+="; "+t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[i,n]);var o=[];return this.isSelectable()&&o.push(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,this.isSelected()?"STATE_SELECTED":"STATE_UNSELECTED")),F.isDataItemDrillable(this._chart,this._seriesIndex,this._groupIndex)&&o.push(t.Bundle.getTranslation(this._pieChart.getOptions(),"stateDrillable",t.Bundle.UTIL_PREFIX,"STATE_DRILLABLE")),t.Displayable.generateAriaLabel(e,o)},A.prototype._updateAriaLabel=function(){var e=this.getTopDisplayable();e&&!t.Agent.deferAriaCreation()&&e.setAriaProperty("label",this.getAriaLabel())},A.prototype.getTopDisplayable=function(){return this._topSurface&&this._topSurface.length>0?this._topSurface[0]:null},A.prototype.isSelectable=function(){return this._chart.isSelectionSupported()},A.prototype.isSelected=function(){return this._selected},A.prototype.setSelected=function(e,i){if(this._selected=e,this._selected?this._pieChart.bringToFrontOfSelection(this):this._selecting||this._pieChart.pushToBackOfSelection(this),V.isSelectionHighlighted(this._chart))for(var n=this.getDisplayables(),o=0;o<n.length;o++)A._shapeIsSelectable(n[o])&&n[o].setSelected(e);if(V.isSelectionExploded(this._chart)){var r=e?1:0;if(i||"none"==V.getAnimationOnDataChange(this._chart))this.setExplode(r);else{var s=new t.CustomAnimation(this._pieChart.getCtx(),this,this._pieChart.getAnimationDuration()/2);s.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getExplode,this.setExplode,r),s.play()}}this._updateAriaLabel()},A.prototype.showHoverEffect=function(){this._selecting=!0,this._pieChart.bringToFrontOfSelection(this);for(var t=this.getDisplayables(),e=0;e<t.length;e++)A._shapeIsSelectable(t[e])&&t[e].showHoverEffect()},A.prototype.hideHoverEffect=function(){this._selecting=!1,this._selected||this._pieChart.pushToBackOfSelection(this);for(var t=this.getDisplayables(),e=0;e<t.length;e++)A._shapeIsSelectable(t[e])&&t[e].hideHoverEffect()},A.prototype.getDatatip=function(t,e,i){return t==this._sliceLabel&&this._sliceLabel&&this._sliceLabel.isTruncated()?this.getSliceLabelString():this.getTooltip()},A.prototype.getDatatipColor=function(){return this.getFillColor()},A.prototype.getCategories=function(){return this._categories&&this._categories.length>0?this._categories:[this.getId().getSeries()]},A.prototype.getNextNavigable=function(e){var i=e.keyCode;if(e.type==t.MouseEvent.CLICK)return this;if(i==t.KeyboardEvent.SPACE&&e.ctrlKey)return this;var n=t.Agent.isRightToLeft(this._chart.getCtx()),o=this._pieChart.__getSlices(),r=t.ArrayUtils.getIndex(o,this),s=null;return i==t.KeyboardEvent.RIGHT_ARROW||i==t.KeyboardEvent.DOWN_ARROW&&!n||i==t.KeyboardEvent.UP_ARROW&&n?s=r<o.length-1?o[r+1]:o[0]:(i==t.KeyboardEvent.LEFT_ARROW||i==t.KeyboardEvent.DOWN_ARROW&&n||i==t.KeyboardEvent.UP_ARROW&&!n)&&(s=0==r?o[o.length-1]:o[r-1]),s},A.prototype.getKeyboardBoundingBox=function(e){var i=this.getDisplayables();return i[0]?i[0].getDimensions(e):new t.Rectangle(0,0,0,0)},A.prototype.getTargetElem=function(){var t=this.getDisplayables();return t[0]?t[0].getElem():null},A.prototype.showKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!0,this.showHoverEffect()},A.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1,this.hideHoverEffect()},A.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},A.prototype.isDragAvailable=function(t){return!0},A.prototype.getDragTransferable=function(t,e){return[this.getId()]},A.prototype.getDragFeedback=function(t,e){if(this._chart.isSelectionSupported()&&this._chart.getSelectionHandler().getSelectedCount()>1){for(var i=this._chart.getSelectionHandler().getSelection(),n=[],o=0;o<i.length;o++)n=n.concat(i[o].getDisplayables());return n}return this.getDisplayables()},A.prototype.getExplode=function(){return this._explode},A.prototype.setExplode=function(t){this._explode=t,this._explodeSlice()},A.prototype.getCustomLabel=function(){return this._customLabel},A.prototype.getSeriesLabel=function(){return this._seriesLabel},A.prototype.getFillColor=function(){return this._fillColor},A.prototype.getFillPattern=function(){return this._fillPattern},A.prototype.getStrokeColor=function(){return this._strokeColor},A.prototype.getBorderWidth=function(){return this._borderWidth},A.prototype.getSliceGaps=function(){return 0==this._depth?3*V.getDataItemGaps(this._chart):0},A.prototype.getInnerRadius=function(){return this._pieChart.getInnerRadius()},A.prototype.getTooltip=function(){return null==this._seriesIndex?W.getOtherSliceDatatip(this._chart,this._value,!0):W.getDatatip(this._chart,this._seriesIndex,0,null,!0)},A.prototype.getAction=function(){return this._action},A.prototype.isDrillable=function(){return this._drillable},A.prototype.getShowPopupBehaviors=function(){return this._showPopupBehaviors},A.createFillerSlice=function(t,e){var i=new A(t);return i._value=e,i._bFillerSlice=!0,i._centerX=t.getCenter().x,i._centerY=t.getCenter().y,i._fillColor="rgba(255,255,255,0)",i._strokeColor="rgba(255,255,255,0)",i._id=new s(null,null,null),i},A.prototype.getSeriesIndex=function(){return this._seriesIndex};var O=function(){};t.Obj.createSubclass(O,t.Obj),O.createAnimation=function(e,i,n){var o=[];if(z.isBLAC(e))O._animBarLineArea(e,n,o);else if(z.isScatterBubble(e)||z.isFunnel(e)||z.isPyramid(e))O._animBubbleScatterFunnelPyramid(e,n,o);else if(z.isPie(e)&&e.pieChart)return e.pieChart.getDisplayAnimation();return o.length>0?new t.ParallelPlayable(e.getCtx(),o):null},O._animBarLineArea=function(e,i,n){var o=e.getChartObjPeers(),r=o?o.length:0;if(r)for(var s,a,l,h=0;h<r;h++){a=o[h],s=a.getDisplayables()[0];var u=a.getSeriesType();if(l=null,s instanceof c||s instanceof v||s instanceof _||s instanceof p)l=s.getDisplayAnimation(i);else if(s instanceof m)l="line"==u?O._getLinePlayable(e,s,i):O._getAreaPlayable(e,s,i);else if(s instanceof t.SimpleMarker||s instanceof S){if(s instanceof f&&!s.isSelected())continue;l=new t.AnimFadeIn(e.getCtx(),s,i-.8,.8)}l&&n.push(l)}},O._animBubbleScatterFunnelPyramid=function(e,i,n){var o=e.getObjects(),r=o?o.length:0;if(r)for(var s,a,l,h=0;h<r;h++)a=o[h],s=a.getDisplayables()[0],s instanceof t.SimpleMarker?l=new t.AnimPopIn(e.getCtx(),s,!0,i):(s instanceof E||s instanceof b)&&(l=O._getFunnelPyramidPlayable(e,s,i)),l&&n.push(l)},O._getAreaPlayable=function(e,i,n){var o,r=e.getCtx(),s=i.getBaseline();if(i.isArea()){for(var a=i.getBaseCoords(),l=i.getBaseAnimationParams(),h=l.slice(0),u=0;u<l.length;u++)u%4!=1&&u%4!=2||(l[u]=s);i.setBaseAnimationParams(l),o=new t.CustomAnimation(r,i,n),o.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,i,i.getBaseAnimationParams,i.setBaseAnimationParams,h)}for(var d=i.getCoords(),c=i.getAnimationParams(),p=c.slice(0),u=0;u<c.length;u++)u%4!=1&&u%4!=2||(c[u]=s);i.setAnimationParams(c);var _=new t.CustomAnimation(r,i,n);_.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,i,i.getAnimationParams,i.setAnimationParams,p);var g=new t.ParallelPlayable(e.getCtx(),o,_);return g.setOnEnd(function(){i.setCoords(d,a)}),g},O._getFunnelPyramidPlayable=function(e,i,n){var o=e.getCtx(),r=i.getAnimationParams(),s=r.slice(0),a=r.slice(0);r[0]=0,z.isFunnel(e)&&(r[2]=0,s[2]=0),i.setAnimationParams(r);var l=new t.CustomAnimation(o,i,n/2);l.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,i,i.getAnimationParams,i.setAnimationParams,s);var h=new t.CustomAnimation(o,i,n/2);return h.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,i,i.getAnimationParams,i.setAnimationParams,a),new t.SequentialPlayable(o,[l,h])},O._getLinePlayable=function(e,i,n){var o=i.getCoords(),r=i.getAnimationParams(),s=r.slice(0);O._getMeanPoints(r),i.setAnimationParams(r);var a=new t.CustomAnimation(e.getCtx(),i,n);return a.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,i,i.getAnimationParams,i.setAnimationParams,s),a.setOnEnd(function(){i.setCoords(o)}),a},O._getMeanPoints=function(t){var e,i=0,n=Number.MAX_VALUE,o=Number.MIN_VALUE,r=t.length;for(e=0;e<r;e++){var s=t[e];e%4!=0&&e%4!=3&&s!=1/0&&(s<n&&(n=s),s>o&&(o=s),i+=s)}for(r>8?(i-=2*n,i-=2*o,i/=r/2-4):i/=r/2,e=0;e<r;e++)e%4!=1&&e%4!=2||(t[e]=i)};var P=function(){};t.Obj.createSubclass(P,t.Obj),P.createAnimation=function(e,i,n,o,r){if(!P._canAnimate(e,i))return null;var s=i.getCtx(),a=[],l=[];z.isPie(i)?(a.push(e.pieChart),l.push(i.pieChart)):P._buildAnimLists(s,a,e,l,i,o);var h,u=new t.DataAnimationHandler(s,r);u.constructAnimation(a,l),u.getNumPlayables()>0&&(h=u.getAnimation(!0));var d=i.getDataLabels();if(h&&d.length>0){for(var c=0;c<d.length;c++)d[c].setAlpha(0);h=new t.SequentialPlayable(s,h,new t.AnimFadeIn(s,d,o/4))}return h},P._buildAnimLists=function(e,i,n,o,r,s){var a,l,h,u,d,g=n.getChartObjPeers(),y=i,C=r.getCache().getFromCache("dataFiltered");for(a=0;a<2;a++){var T={};for(l=0;l<g.length;l++){if(h=g[l],u=h.getDisplayables()[0],d=null,u instanceof E)d=new U(h,s);else if(u instanceof b)d=new B(h,s);else if(u instanceof c||u instanceof v){if(d=new x(h,s),C){var A=h.getSeries();T[A]=T[A]?T[A]+1:1,d.setId(A+"/"+T[A]+"/bar")}}else if(u instanceof m)d=new L(h,s);else if(u instanceof t.SimpleMarker){if(u instanceof f&&!u.isSelected())continue;d=new R(h,s)}else if(u instanceof S){if(u.isInvisible()&&!u.isSelected())continue;d=new w(h,s)}else u instanceof _?d=new D(h,s):u instanceof p&&(d=new M(h,s));d&&(y.push(d),d.setOldChart(n))}y=o,g=r.getChartObjPeers()}},P._canAnimate=function(t,e){return z.isPie(t)&&z.isPie(e)?t&&e:z.isPolar(t)==z.isPolar(e)&&(!(!z.isBLAC(t)||!z.isBLAC(e))||(!(!z.isScatterBubble(t)||!z.isScatterBubble(e))||t.getType()==e.getType()))};var I=function(e){this.Options=e.Options,this.Peers=e.Peers,this.SeriesStyleArray=e.SeriesStyleArray,this.Cache=e.Cache,this.pieChart=e.pieChart,this._optionsCache=new t.BaseComponentCache,this._cache=new t.BaseComponentCache};t.Obj.createSubclass(I,t.Chart),I.prototype.getCache=function(){return this._cache},I.prototype.getOptionsCache=function(){return this._optionsCache};var D=function(t,e){this.Init(t,e)};t.Obj.createSubclass(D,t.Obj),D.prototype.animateUpdate=function(t,e){var i=e._shape;this._shape&&this._shape.getUpdateAnimation&&t.add(this._shape.getUpdateAnimation(this._updateDuration,i),1)},D.prototype.animateInsert=function(e){if(this._shape&&this._shape.getInsertAnimation)e.add(this._shape.getInsertAnimation(this._insertDuration),2);else{var i=new t.AnimFadeIn(this._shape.getCtx(),this._shape,this._insertDuration);e.add(i,0)}},D.prototype.animateDelete=function(e,i){if(i.addChild(this._shape),this._shape&&this._shape.getDeleteAnimation)e.add(this._shape.getDeleteAnimation(this._deleteDuration),0);else{var n=new t.AnimFadeOut(this._shape.getCtx(),this._shape,this._deleteDuration);e.add(n,0)}},D.prototype.getId=function(){return this._animId},D.prototype.setId=function(t){this._animId=t},D.prototype.Init=function(t,e){this._peer=t,this._updateDuration=.75*e,this._insertDuration=.5*e,this._deleteDuration=.5*e,this._shape=t.getDisplayables()[0],this._animId=t.getSeries()+"/"+t.getGroup()},D.prototype.setOldChart=function(t){this._oldChart=t};var x=function(t,e){this.Init(t,e)};t.Obj.createSubclass(x,D),x.prototype.Init=function(t,e){x.superclass.Init.call(this,t,e),this._indicator=null,this._animId+="/bar"},x.prototype.animateInsert=function(t){var e=this._shape.getInsertAnimation(this._insertDuration);t.add(e,2)},x.prototype.animateDelete=function(t,e){e.addChild(this._shape);var i=this._shape.getDeleteAnimation(this._deleteDuration);t.add(i,0)},x.prototype.animateUpdate=function(e,i){var n=this._oldChart,o=this._peer.getChart(),r=z.isHorizontal(n)!=z.isHorizontal(o),s=i._getAnimationParams(r),a=this._getAnimationParams(),l=i._shape.getPrimaryFill().clone(),h=this._shape.getPrimaryFill(),u=i._shape.isSelected()||this._shape.isSelected()||l.equals(h);if(!t.ArrayUtils.equals(s,a)||!l.equals(h)){var d=this._peer.getSeriesIndex(),c=i._peer.getSeriesIndex(),p=this._peer.getGroupIndex(),_=i._peer.getGroupIndex();"none"!==V.getAnimationIndicators(o)&&(this._indicator=N.makeIndicator(n,c,_,o,d,p)),this._setAnimationParams(s),u||this._shape.setFill(l);var g=new t.CustomAnimation(this._shape.getCtx(),this,this._updateDuration);g.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,a),u||g.getAnimator().addProp(t.Animator.TYPE_FILL,this._shape,this._shape.getFill,this._shape.setFill,h),this._indicator&&(g.setOnEnd(this._onEndAnimation,this),this._indicator.setAlpha(0)),e.add(g,1)}},x.prototype._getAnimationParams=function(t){return this._shape.getAnimationParams(t)},x.prototype._setAnimationParams=function(t){this._shape.setAnimationParams(t,this._indicator)},x.prototype._onEndAnimation=function(){this._indicator.getParent().removeChild(this._indicator),this._indicator=null};var M=function(t,e){this.Init(t,e)};t.Obj.createSubclass(M,D),M.prototype.Init=function(t,e){M.superclass.Init.call(this,t,e),this._animId+="/boxAndWhisker"};var L=function(t,e){this.Init(t,e)};t.Obj.createSubclass(L,D),L.prototype.animateUpdate=function(e,i){this._baseCoords=this._shape.getBaseCoords(),this._coords=this._shape.getCoords();var n,o=this._shape.isArea(),r=this._oldChart,s=this._chart,a=this._peer.getSeriesIndex(),l=i._peer.getSeriesIndex(),h=this._shape.getCommonGroupIndices(i._shape),u=i._shape.getCommonGroupIndices(this._shape);if(o){var d=i._getBaseAnimationParams(this._shape),c=this._getBaseAnimationParams(i._shape);L._matchGroupIndices(d,c),t.ArrayUtils.equals(d,c)||(this._setBaseAnimationParams(d),n=new t.CustomAnimation(this._context,this,this._updateDuration),n.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this._getBaseAnimationParams,this._setBaseAnimationParams,c))}var p,_=i._getAnimationParams(this._shape),g=this._getAnimationParams(i._shape);if(L._matchGroupIndices(_,g),t.ArrayUtils.equals(_,g)||(this._setAnimationParams(_),p=new t.CustomAnimation(this._context,this,this._updateDuration),p.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,g)),"none"!==V.getAnimationIndicators(s)&&(!o||"lineWithArea"!=this._peer.getSeriesType()))for(var m,f,y=0;y<h.length;y++)m=N.getDirection(r,l,u[y],s,a,h[y]),f=N.makeIndicator(r,l,u[y],s,a,h[y]),f&&this._shape.addIndicator(h[y],m,f);if(n||p){var v=new t.ParallelPlayable(this._context,n,p);v.setOnEnd(this._onAnimationEnd,this),e.add(v,1)}},L.prototype.animateInsert=function(e){this._shape.setAlpha(0);var i=new t.AnimFadeIn(this._context,this._shape,this._insertDuration);e.add(i,2)},L.prototype.animateDelete=function(e,i){var n,o=V.getSeriesType(this._oldChart,this._peer.getSeriesIndex());if("area"==o){var r=this._chart.__getAreaContainer();if(this._deletedAreas=this._shape.getParent().getParent(),!r)return;r.addChild(this._deletedAreas),n=new t.AnimFadeOut(this._context,this._deletedAreas,this._deleteDuration),n.setOnEnd(this._removeDeletedAreas,this),e.add(n,0)}else i.addChild(this._shape),n=new t.AnimFadeOut(this._context,this._shape,this._deleteDuration),e.add(n,0)},L.prototype._removeDeletedAreas=function(){var t=this._chart.__getAreaContainer();t&&t.removeChild(this._deletedAreas)},L.prototype._getAnimationParams=function(t){return this._shape.getAnimationParams(t)},L.prototype._setAnimationParams=function(t){this._shape.setAnimationParams(t)},L.prototype._getBaseAnimationParams=function(t){return this._shape.getBaseAnimationParams(t)},L.prototype._setBaseAnimationParams=function(t){this._shape.setBaseAnimationParams(t)},L.prototype._onAnimationEnd=function(){this._shape.removeIndicators(),this._shape.setCoords(this._coords,this._baseCoords)},L._matchGroupIndices=function(t,e){for(var i=3;i<t.length;i+=4)t[i]=e[i]},L.prototype.Init=function(t,e){L.superclass.Init.call(this,t,e),this._context=this._shape.getCtx(),this._chart=this._peer.getChart(),this._animId+="/"+(this._shape.isArea()?"area":"line")};var R=function(t,e){this.Init(t,e)};t.Obj.createSubclass(R,D),R.prototype.animateUpdate=function(e,i){var n=i._shape.getCenterDimensions(),o=this._shape.getCenterDimensions();if(!o.equals(n)){this._shape.setCenterDimensions(n);var r=new t.CustomAnimation(this._shape.getCtx(),this,this._updateDuration);r.getAnimator().addProp(t.Animator.TYPE_RECTANGLE,this._shape,this._shape.getCenterDimensions,this._shape.setCenterDimensions,o);var s=this._peer.getChart();if(this.isValueChange(i)&&"none"!=V.getAnimationIndicators(s)&&z.isScatterBubble(s)){var a=i._shape;a.setSolidFill("#FFFF2B",.9),a.setCenterDimensions(n),this._peer.getChart().getPlotArea().addChild(a),r.getAnimator().addProp(t.Animator.TYPE_RECTANGLE,a,a.getCenterDimensions,a.setCenterDimensions,o),r.getAnimator().addProp(t.Animator.TYPE_NUMBER,a,a.getAlpha,a.setAlpha,0),this._overlay=a,r.setOnEnd(this._onEndAnimation,this)}e.add(r,1)}},R.prototype.animateInsert=function(e){this._shape.setAlpha(0);var i=new t.AnimFadeIn(this._shape.getCtx(),this._shape,this._insertDuration);e.add(i,2)},R.prototype.animateDelete=function(e,i){i.addChild(this._shape);var n=new t.AnimFadeOut(this._shape.getCtx(),this._shape,this._deleteDuration);e.add(n,0)},R.prototype.isValueChange=function(t){var e=!1;if(t){var i=t._peer.getSeriesIndex(),n=t._peer.getGroupIndex(),o=this._peer.getSeriesIndex(),r=this._peer.getGroupIndex(),s=t._oldChart.getOptions(),a=this._peer.getChart().getOptions(),l=s.series[i].items[n].x,h=s.series[i].items[n].y,u=s.series[i].items[n].z,d=a.series[o].items[r].x,c=a.series[o].items[r].y,p=a.series[o].items[r].z;e=d!==l||c!==h||p!==u}return e},R.prototype._onEndAnimation=function(){this._overlay&&(this._peer.getChart().getPlotArea().removeChild(this._overlay),this._overlay=null)},R.prototype.Init=function(t,e){R.superclass.Init.call(this,t,e),this._animId+="/marker"};var w=function(t,e){this.Init(t,e)};t.Obj.createSubclass(w,D),w.prototype.Init=function(t,e){w.superclass.Init.call(this,t,e),this._animId+="/rangeMarker"},w.prototype.animateInsert=function(e){this._shape.setAlpha(0);var i=new t.AnimFadeIn(this._shape.getCtx(),this._shape,this._insertDuration);e.add(i,2)},w.prototype.animateDelete=function(e,i){i.addChild(this._shape);var n=new t.AnimFadeOut(this._shape.getCtx(),this._shape,this._deleteDuration);e.add(n,0)},w.prototype.animateUpdate=function(e,i){var n=i._shape.getAnimationParams(),o=this._shape.getAnimationParams();this._shape.setAnimationParams(n);var r=new t.CustomAnimation(this._shape.getCtx(),this,this._updateDuration);r.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,this._shape,this._shape.getAnimationParams,this._shape.setAnimationParams,o),e.add(r,1)};var N=new Object;t.Obj.createSubclass(N,t.Obj),N.DIR_UP=0,N.DIR_DOWN=1,N.DIR_NOCHANGE=2,N.makeIndicator=function(t,e,i,n,o,r){if(z.isPolar(n))return null;var s=N.getDirection(t,e,i,n,o,r);if(s==N.DIR_NOCHANGE)return null;var a=s===N.DIR_DOWN,l=a?V.getAnimationDownColor(n):V.getAnimationUpColor(n),h=N._drawIndicator(n.getCtx(),a,z.isHorizontal(n),l);return n.getPlotArea().addChild(h),h},N.getDirection=function(t,e,i,n,o,r){var s=k.getValue(t,e,i),a=k.getValue(n,o,r);return null==a||null==s||a==s?N.DIR_NOCHANGE:a>s?N.DIR_UP:N.DIR_DOWN},N._drawIndicator=function(e,i,n,o){var r;if(n){var s=t.Agent.isRightToLeft(e)?!i:i;r=s?"M3.5,-5L3.5,5L-3.5,0L3.5,-5":"M-3.5,-5L-3.5,5L3.5,0L-3.5,-5"}else r=i?"M-5,-3.5L5,-3.5L0,3.5L-5,-3.5Z":"M-5,3.5L5,3.5L0,-3.5L-5,3.5Z";var a=new t.Path(e,r);return a.setSolidFill(o),a};var U=function(t,e){this.Init(t,e)};t.Obj.createSubclass(U,D),U.prototype.animateUpdate=function(e,i){var n=this._shape,o=i._shape.getAnimationParams(),r=n.getAnimationParams(),s=i._shape.getFill().clone(),a=this._shape.getFill();if(!t.ArrayUtils.equals(o,r)||!s.equals(a)){n.setAnimationParams(o);var l=new t.CustomAnimation(n.getCtx(),this,this._updateDuration);l.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,n,n.getAnimationParams,n.setAnimationParams,r),s.equals(a)||(this._shape.setFill(s),l.getAnimator().addProp(t.Animator.TYPE_FILL,n,n.getFill,n.setFill,a)),this._indicator&&l.setOnEnd(this._onEndAnimation,this),e.add(l,1)}},U.prototype.animateInsert=function(e){var i=this._shape,n=i.getAnimationParams(),o=n.slice(0);o[0]+=o[1]/2,o[1]=0,o[3]=0,i.setAnimationParams(o);var r=new t.CustomAnimation(i.getCtx(),this,this._insertDuration);r.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,i,i.getAnimationParams,i.setAnimationParams,n),e.add(r,2)},U.prototype.animateDelete=function(e,i){var n=this._shape;i.setClipPath(null),i.addChild(n);var o=n.getAnimationParams(),r=o.slice(0);r[0]+=o[1]/2,r[1]=0,r[3]=0;var s=new t.CustomAnimation(n.getCtx(),this,this._deleteDuration);s.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,n,n.getAnimationParams,n.setAnimationParams,r),e.add(s,0)},U.prototype.Init=function(t,e){U.superclass.Init.call(this,t,e),this._animId+="/funnel"};var B=function(t,e){this.Init(t,e)};t.Obj.createSubclass(B,D),B.prototype.animateUpdate=function(e,i){var n=this._shape,o=i._shape.getAnimationParams(),r=n.getAnimationParams(),s=i._shape.getPrimaryFill(),a=this._shape.getPrimaryFill();if(!t.ArrayUtils.equals(o,r)||!s.equals(a)){n.setAnimationParams(o);var l=new t.CustomAnimation(n.getCtx(),this,this._updateDuration);l.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,n,n.getAnimationParams,n.setAnimationParams,r),s.equals(a)||(this._shape.setFill(s),l.getAnimator().addProp(t.Animator.TYPE_FILL,n,n.getFill,n.setFill,a)),e.add(l,1)}},B.prototype.animateInsert=function(e){var i=this._shape,n=i.getAnimationParams(),o=n.slice(0);o[1]=0,o[2]=0,i.setAnimationParams(o);var r=new t.CustomAnimation(i.getCtx(),this,this._insertDuration);r.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,i,i.getAnimationParams,i.setAnimationParams,n),e.add(r,2)},B.prototype.animateDelete=function(e,i){var n=this._shape;i.setClipPath(null),i.addChild(n);var o=n.getAnimationParams(),r=o.slice(0);r[1]=0,r[2]=0;var s=new t.CustomAnimation(n.getCtx(),this,this._deleteDuration);s.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,n,n.getAnimationParams,n.setAnimationParams,r),e.add(s,0)},B.prototype.Init=function(t,e){B.superclass.Init.call(this,t,e),this._animId+="/pyramid"};var H=new Object;t.Obj.createSubclass(H,t.Obj),H.getXAxisPosition=function(e){return z.isPolar(e)?"tangential":z.isHorizontal(e)?t.Agent.isRightToLeft(e.getCtx())?"right":"left":"bottom"},H.getBaselineScaling=function(t,e){var i=e+"Axis",n=t.getOptions()[i].baselineScaling;return!n||"zero"!=n&&"min"!=n?z.isStock(t)?"min":"zero":n},H.getYAxisPosition=function(e){var i=e.getOptions().yAxis.position;return z.isPolar(e)?"radial":z.isHorizontal(e)?!i||"top"!=i&&"bottom"!=i?"bottom":i:(z.isStock(e)&&(i=i?i:"end"),t.Agent.isRightToLeft(e.getCtx())?i&&"end"==i?"left":"right":i&&"end"==i?"right":"left")},H.getY2AxisPosition=function(e){var i=e.getOptions().y2Axis.position;return z.isHorizontal(e)?!i||"top"!=i&&"bottom"!=i?"top":i:t.Agent.isRightToLeft(e.getCtx())?i&&"start"==i?"right":"left":i&&"start"==i?"left":"right"},H.hasTimeAxis=function(t){return z.isBLAC(t)&&"disabled"!=H.getTimeAxisType(t)},H.hasGroupAxis=function(t){return z.isBLAC(t)&&"disabled"==H.getTimeAxisType(t)},H.getTimeAxisType=function(t){var e=t.getOptions().timeAxisType;return e&&"auto"!=e&&z.isBLAC(t)&&!z.isPolar(t)?e:z.isStock(t)?"skipGaps":"disabled"},H.isMixedFrequency=function(t){return"mixedFrequency"==H.getTimeAxisType(t)},H.getAxisOffset=function(t){var e="axisOffset",i=t.getCache().getFromCache(e);if(null!=i)return i;var n=t.getOptions().styleDefaults.groupSeparators;if(H.hasGroupAxis(t)&&k.getNumLevels(t)>1&&"on"==n.rendered)i=.5;else if(z.hasBarSeries(t)||z.hasCenteredSeries(t)||z.hasCandlestickSeries(t)||z.hasBoxPlotSeries(t)||z.isBLAC(t)&&1==k.getGroupCount(t))i=.5;else if(!a.isPostAltaSkin(t)||z.isSpark(t)||F.isScrollable(t)||z.isOverview(t))i=0;else{var o=z.isHorizontal(t)?.2:.5;i=o-o/Math.sqrt(k.getGroupCount(t))}return t.getCache().putToCache(e,i),i},H.isGridShifted=function(t){if(!z.isBLAC(t))return!1;for(var e=k.getSeriesCount(t),i=0;i<e;i++)if(V.isSeriesRendered(t,i)){var n=V.getSeriesType(t,i),o=V.getLineType(t,i);if("bar"!=n&&"centeredSegmented"!=o&&"centeredStepped"!=o)return!1}return!0},H.isGridPolygonal=function(t){return!(!z.isBLAC(t)||z.hasBarSeries(t))&&"polygon"==t.getOptions().polarGridShape},H.isAxisRendered=function(t,e){if("y"==e&&z.hasY2DataOnly(t))return!1;if("y2"==e&&!z.hasY2Data(t))return!1;var i=t.getOptions(),n=i[e+"Axis"];return"off"!=n.rendered&&!("off"==n.tickLabel.rendered&&!n.title)},H.isAxisLineRendered=function(t,e){var i=t.getOptions()[e+"Axis"];return"off"!=i.rendered&&"off"!=i.axisLine.rendered&&!("auto"==i.axisLine.rendered&&"x"!=e&&z.isBLAC(t)&&!z.isPolar(t))},H.isMajorTickRendered=function(t,e){var i=t.getOptions()[e+"Axis"];return"off"!=i.rendered&&"off"!=i.majorTick.rendered&&!("auto"==i.majorTick.rendered&&"x"==e&&z.isBLAC(t)&&!z.isPolar(t))},H.isMinorTickRendered=function(t,e){var i=t.getOptions()[e+"Axis"];return"off"!=i.rendered&&"off"!=i.minorTick.rendered&&("on"==i.minorTick.rendered||H.isLog(t,e))},H.isLog=function(t,e){var i=t.getOptions()[e+"Axis"];return"log"==i.scale},H.getTickLabelHeight=function(e,i){var n=e.getOptions(),o=n[i+"Axis"],r=o.tickLabel.style;return r instanceof t.CSSStyle||(r=new t.CSSStyle(r)),r.mergeUnder(t.Axis.getDefaults(n.skin).tickLabel.style),t.TextUtils.getTextStringHeight(e.getCtx(),r)},H.getTickLabelGapSize=function(t,e){if(H.isTickLabelInside(t,e))return 0;var i=t.getOptions(),n=z.isHorizontal(t),o=H.getGapScalingFactor(t,e),r=Math.ceil(i.layout.tickLabelGapWidth*o),s=Math.ceil(i.layout.tickLabelGapHeight*o);return"x"==e?n?r:s:n?s:r},H.getGapScalingFactor=function(t,e){return H.isAxisRendered(t,e)?H.getTickLabelHeight(t,e)/14:0},H.isTickLabelInside=function(t,e){return!(z.isPolar(t)||z.isScatterBubble(t)||z.isBLAC(t)&&"x"==e)&&"inside"==t.getOptions()[e+"Axis"].tickLabel.position},H.getXAxisViewportMinMax=function(t,e){var i=e?"xAxisViewportMinMaxUG":"xAxisViewportMinMax",n=t.getCache().getFromCache(i);if(n)return n;var o=t.getOptions().xAxis,r=H.hasGroupAxis(t),s=H.getAxisOffset(t);if(e)var a=H.getXAxisGlobalMinMax(t);var l=null;null!=o.viewportMin?l=o.viewportMin:null!=o.viewportStartGroup?l=r?k.getGroupIndex(t,o.viewportStartGroup)-s:o.viewportStartGroup:e&&(l=a.min);var h=null;return null!=o.viewportMax?h=o.viewportMax:null!=o.viewportEndGroup?h=r?k.getGroupIndex(t,o.viewportEndGroup)+s:o.viewportEndGroup:e&&(h=a.max),n={min:l,max:h},t.getCache().putToCache(i,n),n},H.getXAxisGlobalMinMax=function(t){var e=t.getOptions().xAxis,i=H.hasGroupAxis(t),n=H.getAxisOffset(t);if(!i)var o=k.getMinMaxValue(t,"x");var r=null;r=null!=e.min?e.min:i?0-n:o.min;var s=null;return s=null!=e.max?e.max:i?k.getGroupCount(t)-1+n:o.max,{min:r,max:s}},H.applyInitialZooming=function(t,e){var i=t.getOptions(),n=i.xAxis,o=i.initialZooming;if(z.isBLAC(t)&&"off"!=i.zoomAndScroll&&"none"!=o){i._initialZoomed&&("last"==o?n.viewportMin=null:n.viewportMax=null);var r=H.getXAxisViewportMinMax(t,!1),s=r.min,a=r.max;if(!("last"==o&&null!=s||"first"==o&&null!=a)){var l=z.isHorizontal(t)?e.h:e.w,h=Math.floor(l/(2*H.getTickLabelHeight(t,"x")))+H.getAxisOffset(t),u=k.getGroupCount(t)-1;if(!(u<=h)){var d,c;if(H.hasGroupAxis(t))d=0,c=u;else{var p=k.getMinMaxValue(t,"x");d=p.min,c=p.max}var _=h/u*(c-d);"last"==i.initialZooming?(null==a&&(a=c),n.viewportMin=Math.max(a-_,d)):(null==s&&(s=d),n.viewportMax=Math.min(s+_,c)),i._initialZoomed=!0}}}},H.getGroupWidthRatios=function(e){if(!z.hasBarSeries(e)&&!z.hasCandlestickSeries(e)&&!z.hasBoxPlotSeries(e))return null;var i=e.getOptions(),n=V.getBarGapRatio(e);if(n>=1)return i._averageGroupZ=1/0,
null;i._averageGroupZ=0;var o,r,s,a,l=k.getGroupCount(e),h=z.isSplitDualY(e),u=k.getStackCategories(e,"bar"),d=e.getOptionsCache().getFromCache("hasVaryingBarWidth");if(d){for(var c=[],p=0;p<l;p++){for(r=0,a=0;a<u.y.length;a++)r+=k.getBarCategoryZ(e,u.y[a],p,!1);for(s=0,a=0;a<u.y2.length;a++)s+=k.getBarCategoryZ(e,u.y2[a],p,!0);c.push(h?Math.max(r,s):r+s)}var _=t.ArrayUtils.reduce(c,function(t,e){return t+e}),g=_*n/(1-n);o=t.ArrayUtils.map(c,function(t){return t+g/l}),i._averageGroupZ=(_+g)/l}else{r=u.y.length,s=u.y2.length;var m=h?Math.max(r,s):r+s;i._averageGroupZ=m/(1-n),o=null}return o},H.isYAdjustmentNeeded=function(t){var e=t.getOptions().styleDefaults.dataLabelPosition,i=V.isStackLabelRendered(t);return!(!z.hasBarSeries(t)||"outsideBarEdge"!=e&&!i)},H.axisContainsPoint=function(t,e){if(!t)return!1;var i=t.getOptions().position,n="top"==i||"bottom"==i,o=n?4:10,r=n?10:4,s=t.__getBounds().clone();s.x-=r,s.y-=o,s.w+=2*r,s.h+=2*o;var a=t.stageToLocal(e);return s.containsPoint(a.x,a.y)};var k=new Object;t.Obj.createSubclass(k,t.Obj),k.hasData=function(t){var e=t.getOptions();if(!e||!e.series||e.series.length<1)return!1;for(var i=1,n=k.getSeriesCount(t),o=0;o<n;o++){var r=k.getSeriesItem(t,o);if(r&&r.items&&r.items.length>=i)return!0}return!1},k.hasInvalidData=function(t){return!k.hasData(t)||k.hasInvalidTimeData(t)},k.hasInvalidTimeData=function(t){if(z.isFunnel(t)||z.isPie(t)||z.isPyramid(t))return!1;var e=t.getOptions(),i=k.getGroupCount(t);if(!e||!e.series||e.series.length<1)return!0;if(i<1)return!0;var n,o,r=k.getSeriesCount(t);if(H.isMixedFrequency(t))for(n=0;n<r;n++)for(o=0;o<i;o++){var s=k.getDataItem(t,n,o);if(s&&(null==s.x||isNaN(s.x)))return!0}else if(H.hasTimeAxis(t))for(o=0;o<i;o++){var a=k.getGroup(t,o);if(null==a||isNaN(a))return!0}return!1},k.hasSeriesData=function(t,e){var i=k.getSeriesItem(t,e),n=i.items;if(n)for(var o=0;o<n.length;o++)if(null!=n[o])return!0;return!1},k.processDataObject=function(e){if(k.hasData(e)){var i=e.getOptions(),n=e.getOptionsCache(),o=k.getSeriesCount(e);z.isValidType(e)||(i.type="bar");var r=!1,s=!1,a=!1,l=!1,h=z.isStock(e);h&&o>1&&(i.series=i.series.slice(0,1),o=1);var u=z.isBLAC(e),d=H.isMixedFrequency(e),c=o>100;n.putToCache("hasLargeSeriesCount",c);for(var p=0,_=e.getSeriesStyleArray(),g=0;g<o;g++){var m=k.getSeries(e,g);!c&&null!=m&&t.ArrayUtils.getIndex(_,m)<0&&_.push(m);var f=k.getSeriesItem(e,g);if(f.items&&f.items.length>p&&(p=f.items.length),"hidden"==f.visibility){var y=V.getHiddenCategories(e);t.ArrayUtils.getIndex(y,m)<0&&y.push(m)}if(f.visibility=null,"on"==f.assignedToY2&&(r=!0),f&&f.items)for(var v,S=f.items,C=0;C<S.length;C++)null!=S[C]&&(v=S[C],"object"!=typeof v&&(v={y:v},S[C]=v),d||null==v.x||(v.x=Number(v.x)),null!=v.y&&(v.y=Number(v.y)),null!=v.z&&(v.z=Number(v.z),u&&1!=v.z&&(a=!0)),null!=v.value&&(v.value=Number(v.value)),null!=v.targetValue&&(v.targetValue=Number(v.targetValue)),null!=v.open&&(v.open=Number(v.open),l=!0),null!=v.close&&(v.close=Number(v.close),l=!0),null!=v.low&&(v.low=Number(v.low),l=!0),null!=v.high&&(v.high=Number(v.high),l=!0),null!=v.volume&&(v.volume=Number(v.volume),s=!0),(v.color||v.borderColor||v.borderWidth||v.style||v.svgStyle||v.className||v.svgClassName)&&n.putToCachedMap("itemStyleSet",g,!0))}if(n.putToCache("hasVolume",s),n.putToCache("hasVaryingBarWidth",a),n.putToCache("hasLowHighSeries",l),h&&k.hasVolumeSeries(e)&&!z.isOverview(e)){var E=t.JsonUtils.clone(k.getSeriesItem(e,0));E.assignedToY2="on",r=!0,E.type="bar",E.categories=k.getCategories(e,0),E.id="_volume",E._selectable="off",E.items=[];for(var b=0;b<f.items.length;b++){var T={};T.color=V.getStockVolumeColor(e,0,b),T.x=f.items[b].x,T.value=f.items[b].volume,T.drilling="off",E.items.push(T)}i.series.push(E),n.putToCachedMap("itemStyleSet",i.series.length-1,!0)}n.putToCache("hasY2Assignment",r);for(var A=G.getRefObjs(e),O=0;O<A.length;O++){var S=A[O].items;if(S)for(var C=0;C<S.length;C++){var v=S[C];v&&("object"!=typeof v?S[C]=Number(v):(!H.isMixedFrequency(e)&&v.x&&(v.x=Number(v.x)),v.max&&(v.max=Number(v.max)),v.min&&(v.min=Number(v.min)),v.value&&(v.value=Number(v.value))))}}i.groups||(i.groups=new Array);for(var P=k.getGroupCount(e),O=0;O<p-P;O++){var I=t.Bundle.getTranslation(i,"labelDefaultGroupName",t.Bundle.CHART_PREFIX,"DEFAULT_GROUP_NAME",i.groups.length+1);i.groups.push(I)}n.putToCache("groupsArray",null),k._processTimeAxis(e);var D=i.sorting;if(D="on"==D?"descending":"ascending"!=D&&"descending"!=D?"off":D,z.isBLAC(e)&&H.hasGroupAxis(e)&&"off"!=D&&1==k.getNumLevels(e)){for(var x=k.getGroups(e),M={},C=0;C<x.length;C++){for(var L=0,O=0;O<=o;O++)if(V.isSeriesRendered(e,O)&&!k.isAssignedToY2(e,O)){var R=k.getValue(e,O,C);L+=null==R||isNaN(R)?0:R}M[x[C]]={index:C,total:L,group:i.groups[C]}}"ascending"==D?x.sort(function(t,e){return M[t].total-M[e].total}):x.sort(function(t,e){return M[e].total-M[t].total});for(var O=0;O<o;O++){for(var w=[],C=0;C<x.length;C++)w.push(k.getDataItem(e,O,M[x[C]].index));i.series[O].items=w}for(var N=[],C=0;C<x.length;C++)N.push(M[x[C]].group);i.groups=N,n.putToCache("groupsArray",null),n.putToCache("value",null)}k._sanitizeAxis(i.xAxis),k._sanitizeAxis(i.yAxis),k._sanitizeAxis(i.y2Axis)}},k._sanitizeAxis=function(t){t.min==t.max&&(t.min=null,t.max=null)},k._sanitizeDateTime=function(t,e){var i=null,n=t.getLocaleHelpers().isoToDateConverter;if(n){try{i=n(e)}catch(t){i=null}i=null!=i&&i.getTime?i.getTime():null}return null==i&&(i=Date.parse(e)),isNaN(i)&&(i=Number(e)),i},k._processTimeAxis=function(t){var e,i,n=t.getCtx(),o=t.getOptions(),r=k.getSeriesCount(t),s=k.getGroupCount(t);if(H.isMixedFrequency(t))for(e=0;e<r;e++)for(i=0;i<s;i++){var a=k.getDataItem(t,e,i);null!=a&&"string"==typeof a.x&&null!=a.x&&(a.x=k._sanitizeDateTime(n,a.x))}else if(H.hasTimeAxis(t)){for(i=0;i<s;i++){var l=k.getGroup(t,i);null!=l&&(o.groups[i]=k._sanitizeDateTime(n,l))}t.getOptionsCache().putToCache("groupsArray",null)}if(H.hasTimeAxis(t)){var h=o.xAxis;null!=h.dataMin&&(h.dataMin=k._sanitizeDateTime(n,h.dataMin)),null!=h.dataMax&&(h.dataMax=k._sanitizeDateTime(n,h.dataMax)),null!=h.min&&(h.min=k._sanitizeDateTime(n,h.min)),null!=h.max&&(h.max=k._sanitizeDateTime(n,h.max)),null!=h.viewportMin&&(h.viewportMin=k._sanitizeDateTime(n,h.viewportMin)),null!=h.viewportMax&&(h.viewportMax=k._sanitizeDateTime(n,h.viewportMax)),null!=h.viewportStartGroup&&(h.viewportStartGroup=k._sanitizeDateTime(n,h.viewportStartGroup)),null!=h.viewportEndGroup&&(h.viewportEndGroup=k._sanitizeDateTime(n,h.viewportEndGroup));for(var u=G.getRefObjs(t),d=0;d<u.length;d++){var c=u[d].items;if(c)for(var p=0;p<c.length;p++)c[p]&&null!=c[p].x&&(c[p].x=k._sanitizeDateTime(n,c[p].x))}}},k.isEqualId=function(e,i){return null!=e&&null!=i&&(e==i||!!(t.ArrayUtils.isArray(e)&&t.ArrayUtils.isArray(i)&&t.ArrayUtils.equals(e,i)))},k.getSeriesCount=function(t){var e=t.getOptions().series;return e?e.length:0},k.getY2SeriesCount=function(t,e,i){for(var n=0,o=k.getSeriesCount(t),r=0;r<o;r++)e&&V.getSeriesType(t,r)!=e||(i||V.isSeriesRendered(t,r))&&k.isAssignedToY2(t,r)&&n++;return n},k.getSeries=function(t,e){var i=k.getSeriesItem(t,e);return i?i.id?i.id:i.name||""==i.name?i.name:String(e):null},k.getSeriesLabel=function(t,e){var i=k.getSeriesItem(t,e);return i&&(i.name||""==i.name)?i.name:null},k.getSeriesIndex=function(t,e){for(var i=k.getSeriesCount(t),n=0;n<i;n++){var o=k.getSeries(t,n);if(o==e)return n}return-1},k.getSeriesStyleIndex=function(e,i){if(e.getOptionsCache().getFromCache("hasLargeSeriesCount"))return i;var n=k.getSeries(e,i);return n?t.ArrayUtils.getIndex(e.getSeriesStyleArray(),n):i},k.getSeriesItem=function(t,e){if(isNaN(e)||null==e||e<0)return null;var i=t.getOptions();return i.series&&i.series.length>e?i.series[e]:void 0},k.getDataItem=function(t,e,i){if(isNaN(i)||null==i||i<0)return null;var n=k.getSeriesItem(t,e);return n&&n.items&&n.items.length>i?n.items[i]:null},k.getDataItemId=function(t,e,i){var n=k.getDataItem(t,e,i);return n?null!=n.id?n.id:k.createDataItemId(k.getSeries(t,e),k.getGroup(t,i)):null},k.createDataItemId=function(t,e){return t+"; "+e},k.getNestedDataItem=function(t,e,i,n){if(isNaN(n)||null==n||n<0)return null;var o=k.getDataItem(t,e,i);return o&&o.items&&o.items.length>n?o.items[n]:null},k.getNestedDataItemCount=function(t,e,i){var n=k.getDataItem(t,e,i);return n&&n.items?n.items.length:0},k.getNestedDataItemId=function(t,e,i,n){var o=k.getNestedDataItem(t,e,i,n);return o?null!=o.id?o.id:k.getDataItemId(t,e,i)+"; "+String(n):null},k.getNestedDataItemIndex=function(t,e,i,n){for(var o=k.getNestedDataItemCount(t,e,i),r=0;r<o;r++){var s=k.getNestedDataItemId(t,e,i,r);if(k.isEqualId(s,n))return r}return-1},k.getGroupCount=function(t){return k._getGroupsArray(t).length},k.getGroup=function(t,e){if(null!=e&&e>=0&&e<k.getGroupCount(t)){var i=k._getGroupsArray(t)[e];if(i)return i.id?i.id:i.name||""==i.name?i.name:String(e)}return null},k.getGroupIndex=function(e,i){for(var n=k.getGroups(e),o=0;o<n.length;o++)if(i instanceof Array&&n[o]instanceof Array?t.ArrayUtils.equals(i,n[o]):i==n[o])return o;return-1},k.getGroupLabel=function(t,e){if(e>=0&&e<k.getGroupCount(t)){var i=k._getGroupsArray(t)[e];if(i)return i.name?i.name:null!=i.id?"":i}return null},k.getGroups=function(t){var e="groups",i=t.getOptionsCache().getFromCache(e);if(!i){var n=k.getGroupCount(t);i=[];for(var o=0;o<n;o++)i.push(k.getGroup(t,o));t.getOptionsCache().putToCache(e,i)}return i},k._getGroupsArray=function(t){var e=t.getOptions(),i="groupsArray",n=t.getOptionsCache().getFromCache(i);if(!n){n=[],e.groups&&(n=k._getNestedGroups(e.groups,n));for(var o=0;o<n.length;o++)1==n[o].id.length&&(n[o].id=n[o].id[0],n[o].name=n[o].name[0]);t.getOptionsCache().putToCache(i,n)}return n},k._getNestedGroups=function(t,e){if(t){for(var i=0;i<t.length;i++){var n=t[i],o=null,r=null;if(null!=n&&(o=n.id?n.id:n.name?n.name:n,r=n.name?n.name:n),"object"==typeof o&&(o=null),"object"==typeof r&&(r=null),n&&n.groups){var s=k._getNestedGroups(n.groups,[]);s||(s=[{id:[],name:[]}]);for(var a=0;a<s.length;a++)s[a].id.unshift(o),s[a].name.unshift(r);e=e.concat(s)}else e.push({id:[o],name:[r]})}return e}},k.getNumLevels=function(e){var i="groupsNumLevels",n=e.getOptionsCache().getFromCache(i);if(null!=n)return n;n=0;for(var o=k._getGroupsArray(e),r=0;r<o.length;r++){var s=o[r];if(s&&s.id){var a=t.ArrayUtils.isArray(s.id)?s.id.length:1;n=Math.max(n,a)}}return e.getOptionsCache().putToCache(i,n),n},k.getValue=function(t,e,i,n){var o,r="value",s=!isNaN(n)&&null!=n&&n>=0;if(!s&&(o=t.getOptionsCache().getFromCachedMap2D(r,e,i),void 0!==o))return o;var a=s?k.getNestedDataItem(t,e,i,n):k.getDataItem(t,e,i);return o=null,null!=a&&("object"!=typeof a?o=a:z.isStock(t)&&null!=a.close?o=a.close:null!=a.value?o=a.value:null!=a.y&&(o=a.y)),o=o||(0===o?0:null),s||t.getOptionsCache().putToCachedMap2D(r,e,i,o),o},k.getCumulativeValue=function(t,e,i,n){if(!z.isStacked(t))return k.getValue(t,e,i);var o=n?"cumValueH":"cumValue",r=t.getCache().getFromCachedMap2D(o,e,i);if(void 0!==r)return r;var s=V.getSeriesType(t,e),a=k.isAssignedToY2(t,e),l=k.getValue(t,e,i),h=k.getStackCategory(t,e),u="bar"==s?l<0:k.isSeriesNegative(t,e);r=0;for(var d=e;d>=0;d--)if((n||V.isDataItemRendered(t,d,i))&&s==V.getSeriesType(t,d)&&a==k.isAssignedToY2(t,d)&&k.getStackCategory(t,d)==h){var c=k.getValue(t,d,i),p="bar"==s?c<0:k.isSeriesNegative(t,d);if(u&&p||!u&&!p){var _=t.getCache().getFromCachedMap2D(o,d,i);if(void 0!==_){r=l+(_||0);break}r+=null==c||isNaN(c)?0:c}}return t.getCache().putToCachedMap2D(o,e,i,r),r},k.getLowValue=function(t,e,i){var n=k.getDataItem(t,e,i);return null==n?null:"candlestick"==V.getSeriesType(t,e)?null==n.low&&null!=n.close?null!=n.open?Math.min(n.close,n.open):n.close:n.low:null!=n.low&&null==n.close?n.low:null},k.getHighValue=function(t,e,i){var n=k.getDataItem(t,e,i);return null==n?null:"candlestick"==V.getSeriesType(t,e)?null==n.high?null!=n.open?Math.max(n.close,n.open):n.close:n.high:null!=n.high&&null==n.close?n.high:null},k.getXValue=function(t,e,i){if(H.hasGroupAxis(t))return i;var n=k.getDataItem(t,e,i);if(null==n)return null;var o=n.x;return null!=o?o:k.getGroupLabel(t,i)},k.getTargetValue=function(t,e){var i=k.getDataItem(t,e,0);return null==i||"object"!=typeof i?null:i.targetValue},k.getZValue=function(t,e,i,n){var o=k.getDataItem(t,e,i);return null==o||"object"!=typeof o?n:null!=o.z?o.z:n},k.isStockValueRising=function(t,e,i){var n=k.getDataItem(t,e,i);return!n||n.open<=n.close},k.getCategories=function(t,e,i,n){var o=k.getNestedDataItem(t,e,i,n);if(o&&o.categories)return o.categories;var r=k.getDataItem(t,e,i);if(r&&r.categories)return r.categories;var s=k.getSeriesItem(t,e);if(s&&s.categories)return s.categories;var a=k.getSeries(t,e);return a?[a]:[]},k.getViewportMinMaxGroupIndex=function(t,e){var i=H.getXAxisViewportMinMax(t,!0),n=H.hasGroupAxis(t),o=k.getGroupCount(t),r=i.min,s=0;if(null!=r)if(n)s=Math.ceil(r);else for(var a=0;a<o;a++){var l=k.getXValue(t,e,a);if(l>=r){s=a;break}}var h=i.max,u=o-1;if(null!=u)if(n)u=Math.floor(h);else for(var a=o-1;a>=s;a--){var l=k.getXValue(t,e,a);if(l<=h){u=a;break}}return{min:s,max:u}},k.getViewportGroupCount=function(t){var e=H.getXAxisViewportMinMax(t,!0),i=H.getXAxisGlobalMinMax(t),n=(e.max-e.min)/(i.max-i.min);return isNaN(n)?1:n*k.getGroupCount(t)},k._computeYAlongLine=function(e,i,n,o,r,s){e&&(n=t.Math.log10(n),r=t.Math.log10(r));var a=n+(r-n)*(s-i)/(o-i);return e?Math.pow(10,a):a},k.getMinMaxValue=function(t,e,i){var n=e+(i?"MinMaxDO":"MinMax"),o=t.getCache().getFromCache(n);if(o)return o;var r=t.getOptions()[e+"Axis"];if(null!=r.dataMax&&null!=r.dataMin&&i)return o={min:r.dataMin,max:r.dataMax},t.getCache().putToCache(n,o),o;var s=H.hasTimeAxis(t);if(null!=r.max&&null!=r.min&&!i&&!s)return o={min:r.min,max:r.max},t.getCache().putToCache(n,o),o;var a="z"!=e&&H.isLog(t,e),l="y2"==e;l&&(e="y");for(var h="y"==e,u=!i&&h&&z.isBLAC(t),d="withoutRescale"==F.getHideAndShowBehavior(t)||"x"==e&&H.hasTimeAxis(t),c=-(1/0),p=1/0,_=k.getSeriesCount(t),g=0;g<_;g++){var m=k.getSeriesItem(t,g),f=V.getSeriesType(t,g),y=h&&(V.isRangeSeries(t,g)||"candlestick"==f||"boxPlot"==f);if(d||V.isSeriesRendered(t,g)){var v=k.isAssignedToY2(t,g);if(!h||l==v){var S=m.items;if(S){var C=0,E=S.length-1;if(u){var b=k.getViewportMinMaxGroupIndex(t,g);C=b.min,E=b.max}for(var T=C;T<=E;T++)if(d||V.isDataItemRendered(t,g,T)){var A=S[T],O=null;if(h?y||(O=k.getCumulativeValue(t,g,T,d)):"x"==e&&s&&!H.isMixedFrequency(t)?(O=k.getGroupLabel(t,T),null!=A&&(A.x=O)):null!=A&&(O=A[e]),!("z"==e&&O<=0)){if(!(y||null==O||"number"!=typeof O||a&&O<=0)){var P=0;z.isBubble(t)&&!i&&"z"!=e&&(P=K.getBubbleAxisRadius(t,e,A.markerSize)),c=Math.max(c,a?O*Math.pow(10,P):O+P),p=Math.min(p,a?O/Math.pow(10,P):O-P)}if(y){var I=k.getHighValue(t,g,T),D=k.getLowValue(t,g,T);a&&(I<=0||D<=0)||(c=Math.max(c,I,D),p=Math.min(p,I,D))}if(u&&!y){var x=null,M=null;if(C>0&&T==C?(x=T-1,M=H.getXAxisViewportMinMax(t,!0).min):E<S.length-1&&T==E&&(x=T+1,M=H.getXAxisViewportMinMax(t,!0).max),null!=x){var L=k.getXValue(t,g,T),R=k.getXValue(t,g,x),w=k.getCumulativeValue(t,g,x),N=k._computeYAlongLine(a,L,O||0,R,w||0,M);c=Math.max(c,N),p=Math.min(p,N)}}}}}}}}var U=null;if("x"==e?U=G.getAxisRefObjs(t,"x"):l?U=G.getAxisRefObjs(t,"y2"):h&&(U=G.getAxisRefObjs(t,"y")),null!=U)for(var B=0;B<U.length;B++){var j=U[B],Y=j.items,W="withRescale"==F.getHideAndShowBehavior(t)&&"hidden"==j.visibility;if(!W)if(Y&&!W){var Z=0,X=Y.length-1;if(u){var q=G.getViewportMinMaxIndex(t,Y);Z=q.min,X=q.max}for(var Q=Z;Q<=X;Q++)if(null!=Y[Q]){var D=G.getLowValue(Y[Q]),I=G.getHighValue(Y[Q]),J=isNaN(Y[Q])?Y[Q].value:Y[Q];null!=D&&isFinite(D)&&(p=Math.min(p,D),c=Math.max(c,D)),null!=I&&isFinite(I)&&(p=Math.min(p,I),c=Math.max(c,I)),null!=J&&isFinite(J)&&(p=Math.min(p,J),c=Math.max(c,J))}}else{var D=G.getLowValue(j),I=G.getHighValue(j),J=j.value;null!=D&&isFinite(D)&&(p=Math.min(p,D),c=Math.max(c,D)),null!=I&&isFinite(I)&&(p=Math.min(p,I),c=Math.max(c,I)),null!=J&&isFinite(J)&&(p=Math.min(p,J),c=Math.max(c,J))}}return o={min:p,max:c},t.getCache().putToCache(n,o),o},k.isAssignedToY2=function(t,e){if(!t.getOptionsCache().getFromCache("hasY2Assignment"))return!1;var i=k.getSeriesItem(t,e);return!(!i||"on"!=i.assignedToY2||!z.isDualY(t))},k.getInitialSelection=function(e){var i=e.getOptions().selection;i||(i=[]);for(var n=e.getChartObjPeers(),o=0;o<i.length;o++){var r;if("string"==typeof i[o]||t.ArrayUtils.isArray(i[o])?(r=i[o],i[o]={id:r}):r=i[o].id,!(null==r||i[o].series&&i[o].group))for(var s=0;s<n.length;s++){var a=n[s];if(k.isEqualId(r,a.getDataItemId())){i[o].series=a.getSeries(),i[o].group=a.getGroup();break}}}return i},k.getCurrentSelection=function(t){var e=[],i=t.getSelectionHandler();if(i)for(var n=i.getSelectedIds(),o=0;o<n.length;o++){var r=n[o];e.push({series:r.getSeries(),group:r.getGroup(),id:r.getId()})}return e},k.hasVolumeSeries=function(t){var e=t.getOptionsCache().getFromCache("hasVolume");return!!e&&e},k.isDataSelected=function(t,e,i,n){var o=!isNaN(n)&&null!=n&&n>=0,r=o?k.getNestedDataItemId(t,e,i,n):k.getDataItemId(t,e,i),s=k.getSeries(t,e),a=k.getGroup(t,i),l=t.getOptions().selection;l||(l=[]);for(var h=0;h<l.length;h++){if(k.isEqualId(r,l[h])||k.isEqualId(r,l[h].id))return!0;if(null==l[h].id&&k.isEqualId(s,l[h].series)&&k.isEqualId(a,l[h].group))return!0}return!1},k.getDataLabel=function(t,e,i,n,o,r){var s,a=k.getDefaultDataLabel(t,e,i,n,o,r),l=t.getOptions().dataLabel;if(l&&!r){var h=k.getDataContext(t,e,i,n);if(h.label=a,s=l(h),"number"==typeof s){var u=W.getValueFormat(t,"label");s=W.formatValue(t.getCtx(),u,s)}}return s?s:a},k.getDefaultDataLabel=function(t,e,i,n,o,r){var s;if(r)s=k.getCumulativeValue(t,e,i);else{var a=!isNaN(n)&&null!=n&&n>=0,l=a?k.getNestedDataItem(t,e,i,n):k.getDataItem(t,e,i);if(!l)return null;s=l.label,"low"==o?s=s instanceof Array?s[0]:s:"high"==o&&(s=s instanceof Array?s[1]:null)}if(null!=s){if("number"==typeof s){var h,u,d,c=k.isAssignedToY2(t,e),p=c&&t.y2Axis?t.y2Axis:t.yAxis;if(p){var _=p.getInfo();h=_.getGlobalMin(),u=_.getGlobalMax(),d=_.getMajorIncrement()}var g=W.getValueFormat(t,"label");return W.formatValue(t.getCtx(),g,s,h,u,d)}return s}return null},k.getStackCategory=function(t,e){var i="stackCategory",n=t.getCache().getFromCachedMap(i,e);return"undefined"!=typeof n?n:(n=z.isStacked(t)?k.getSeriesItem(t,e).stackCategory||null:k.getSeries(t,e)||null,t.getCache().putToCachedMap(i,e,n),n)},k.getStackCategories=function(t,e,i){var n=[],o=[],r={},s={},a="stackCategories",l=t.getCache().getFromCachedMap2D(a,e,i);if(l)return l;for(var h=k.getSeriesCount(t),u=0;u<h;u++)if(V.isSeriesRendered(t,u)||i){if(e){var d=V.getSeriesType(t,u);if("candlestick"!=d&&"boxPlot"!=d||(d="bar"),e!=d)continue}var c=k.getStackCategory(t,u);k.isAssignedToY2(t,u)?s[c]||(o.push(c),s[c]=!0):r[c]||(n.push(c),r[c]=!0)}return l={y:n,y2:o},t.getCache().putToCachedMap2D(a,e,i,l),l},k.getBarCategoryZ=function(t,e,i,n){for(var o=0,r=0;r<k.getSeriesCount(t);r++){var s=V.getSeriesType(t,r);if(("bar"==s||"candlestick"==s||"boxPlot"==s)&&k.getStackCategory(t,r)==e&&V.isSeriesRendered(t,r)){var a=k.isAssignedToY2(t,r);(n&&a||!n&&!a)&&(o=Math.max(o,k.getZValue(t,r,i,1)))}}return o},k.getBarInfo=function(e,i,n,o){var r,s,a=z.isHorizontal(e),l=z.isStacked(e),h=t.Agent.isRightToLeft(e.getCtx()),u=e.xAxis,d=V.isRangeSeries(e,i),c=V.getBarCategoryOffsetMap(e,n),p=k.getXValue(e,i,n),_=u.getUnboundedCoordAt(p),g=k.isAssignedToY2(e,i),m=g?e.y2Axis:e.yAxis,f=m.getBaselineCoord();if(d){var y=k.getLowValue(e,i,n),v=k.getHighValue(e,i,n);if(null==y||isNaN(y)||null==v||isNaN(v))return null;if(r=m.getBoundedCoordAt(y),s=m.getBoundedCoordAt(v),r==s&&null==m.getCoordAt(y))return null}else{var S=k.getValue(e,i,n),C=k.getCumulativeValue(e,i,n);if(null==S||isNaN(S))return null;if(r=m.getBoundedCoordAt(C),s=l?m.getBoundedCoordAt(C-S):f,r==s&&null==m.getCoordAt(C))return null}var E=k.getStackCategory(e,i),b=V.getBarWidth(e,i,n),T=l?V.getBarStackWidth(e,E,n,g):b;if("pixel"==V.getBarSpacing(e)&&t.Agent.isPlatformGecko()){var A=b/(1-V.getBarGapRatio(e));b>1&&A-b<2&&(b--,T=b)}var O=c[g?"y2":"y"][E]+.5*(T-b),P=h&&!a?_-O-b:_+O,I=P+b,D=(P+I)/2,x=d?(r+s)/2:r,M=et.convertAxisCoord(e,new t.Point(D,x),o);return{x1:P,x2:I,axisCoord:f,baseCoord:s,yCoord:r,dataPos:M,barWidth:b}},k.getMarkerPosition=function(e,i,n,o,r){var s,a,l=e.xAxis,h=k.isAssignedToY2(e,i)?e.y2Axis:e.yAxis,u=z.isPolar(e),d=V.isRangeSeries(e,i),c=!isNaN(o)&&null!=o&&o>=0,p=k.getXValue(e,i,n),_=c?k.getValue(e,i,n,o):k.getCumulativeValue(e,i,n);if(z.isBubble(e)){if(u&&_<h.getInfo().getViewportMin())return null;s=u?l.getCoordAt(p):l.getUnboundedCoordAt(p),a=h.getUnboundedCoordAt(_)}else if(d){var g=h.getCoordAt(k.getLowValue(e,i,n)),m=h.getCoordAt(k.getHighValue(e,i,n));s=l.getCoordAt(k.getXValue(e,i,n)),a=(g+m)/2}else s=l.getCoordAt(p),a=h.getCoordAt(_);if(null==s||null==a)return null;var f=et.convertAxisCoord(e,new t.Point(s,a),r);return f},k.getScatterBubbleMarkerPosition=function(e,i,n){var o=e.xAxis,r=e.yAxis,s=k.getXValue(e,i,n),a=k.getValue(e,i,n),l=o.getCoordAt(s),h=r.getCoordAt(a);return null==l||null==h?null:new t.Point(l,h)},k.isSeriesNegative=function(t,e){var i=t.getOptionsCache().getFromCachedMap("isSeriesNegative",e);if(null!=i)return i;var n=k.getGroupCount(t);i=!0;for(var o=0;o<n;o++){var r=k.getValue(t,e,o);if(r>0){i=!1;break}}return t.getOptionsCache().putToCachedMap("isSeriesNegative",e,i),i},k.getDataContext=function(e,i,n,o){var r,s=k.getSeriesItem(e,i),a=k.getDataItem(e,i,n),l=k.getNestedDataItem(e,i,n,o),h=e.getRawOptions(),u=z.isPie(e)&&(null==i||i<0),d=e.getOptions();if(u){var c=t.Bundle.getTranslatedString(t.Bundle.CHART_PREFIX,"LABEL_OTHER",null);r={id:c,series:c,value:Z.getOtherValue(e),color:d.styleDefaults.otherColor}}else if(l){var p=h.series[i].items[n];r={id:k.getNestedDataItemId(e,i,n,o),data:[p,p.items[o]],value:k.getValue(e,i,n,o),y:k.getValue(e,i,n,o),color:V.getMarkerColor(e,i,n,o)}}else a?r={id:k.getDataItemId(e,i,n),data:h.series[i].items[n],value:k.getValue(e,i,n),targetValue:k.getTargetValue(e,i,n),x:k.getXValue(e,i,n),y:k.getValue(e,i,n),z:k.getZValue(e,i,n),low:k.getLowValue(e,i,n),high:k.getHighValue(e,i,n),open:a.open,close:a.close,volume:a.volume,color:V.getColor(e,i,n)}:s&&(r={id:k.getSeries(e,i),color:V.getColor(e,i)});return r&&(r.component=d._widgetConstructor,(u||l||a)&&(r.group=k.getGroup(e,n),r.groupData=k.getGroupsDataForContext(e)[n]),!u&&(l||a||s)&&(r.series=k.getSeries(e,i),r.seriesData=h.series[i]),z.isPie(e)&&e.pieChart&&(r.totalValue=e.pieChart.getTotalValue())),r||{}},k.getGroupsDataForContext=function(t){var e="groupsDataArray",i=t.getOptionsCache().getFromCache(e);if(!i){var n=t.getRawOptions();i=k._getNestedGroupsData(n.groups),t.getOptionsCache().putToCache(e,i)}return i},k._getNestedGroupsData=function(t){if(!t)return[];for(var e=[],i=0;i<t.length;i++){var n=t[i];if(n.groups){for(var o=k._getNestedGroupsData(n.groups),r=0;r<o.length;r++)o[r].unshift(n);e=e.concat(o)}else e.push([n])}return e},k.isOutermostBar=function(t,e,i){for(var n=k.getStackCategory(t,e),o=k.getValue(t,e,i)<0,r=k.getSeriesCount(t),s=e+1;s<r;s++)if(n==k.getStackCategory(t,s)&&o==k.getValue(t,s,i)<0&&"bar"==V.getSeriesType(t,s)&&V.isDataItemRendered(t,s,i))return!1;return!0},k.isDataItemFiltered=function(t,e,i){var n=k.getDataItem(t,e,i);return!(!n||!n._filtered)},k.getFilteredChartObjPeers=function(t){if(!t.getCache().getFromCache("dataFiltered"))return[];var e="filteredChartObjPeers",i=t.getCache().getFromCache(e);if(!i){i=[];for(var n=0;n<k.getSeriesCount(t);n++)for(var r=0;r<k.getGroupCount(t);r++)if(k.isDataItemFiltered(t,n,r)){var s;s="bar"==V.getSeriesType(t,n)?k.getBarInfo(t,n,r).dataPos:k.getMarkerPosition(t,n,r),i.push(new o(t,[],n,r,null,s))}t.getCache().putToCache(e,i)}return i};var F=new Object;t.Obj.createSubclass(F,t.Obj),F.getHideAndShowBehavior=function(t){return t.getOptions().hideAndShowBehavior},F.getHoverBehavior=function(t){return t.getOptions().hoverBehavior},F.setVisibility=function(e,i,n){var o=G.getRefObj(e,i);null!=o&&(o.visibility=n);var r=V.getHiddenCategories(e),s=t.ArrayUtils.getIndex(r,i);"hidden"==n&&s<0?r.push(i):"visible"==n&&s>=0&&r.splice(s,1);var a=e.getOptions();if(a&&a.legend&&a.legend.sections){for(var l=0;l<a.legend.sections.length;l++){var h=a.legend.sections[l];if(h&&h.items)for(var u=0;u<h.items.length;u++)h.items[u].id==i&&(h.items[u].categoryVisibility=n)}return!0}return!1},F.isScrollable=function(t){return!!z.isScrollSupported(t)&&"off"!=t.getOptions().zoomAndScroll},F.isZoomable=function(t){if(!z.isScrollSupported(t))return!1;var e=t.getOptions().zoomAndScroll;return"live"==e||"delayed"==e},F.getZoomDirection=function(t){return z.isScatterBubble(t)?t.getOptions().zoomDirection:"auto"},F.isLiveScroll=function(t){if(!z.isScrollSupported(t))return!1;var e=t.getOptions().zoomAndScroll;return"live"==e||"liveScrollOnly"==e},F.isDelayedScroll=function(t){if(!z.isScrollSupported(t))return!1;var e=t.getOptions().zoomAndScroll;return"delayed"==e||"delayedScrollOnly"==e},F.processIds=function(t,e){for(var i=[],n=0;n<e.length;n++){var o=e[n];if(o.getSeries()==Z.OTHER_SLICE_SERIES_ID){var r=Z.getOtherSliceIds(t);i=i.concat(r)}else i.push(o)}return i},F.adjustBounds=function(t){null!=t.x&&(t.x-=1),null!=t.w&&(t.w+=2),null!=t.y&&(t.y-=1),null!=t.h&&(t.h+=2)},F.getBoundedObjects=function(t,e){for(var i=t.getChartObjPeers().concat(k.getFilteredChartObjPeers(t)),n=[],o=0;o<i.length;o++){var r=i[o],s=r.getDataPosition();if(s){s=t.getPlotArea().localToStage(s);var a=null==e.x||s.x>=e.x&&s.x<=e.x+e.w,l=null==e.y||s.y>=e.y&&s.y<=e.y+e.h;a&&l&&n.push(r)}}return n},F.getAxisBounds=function(e,i,n){var o=e.getPlotArea(),r=o.stageToLocal(new t.Point(i.x,i.y)),s=o.stageToLocal(new t.Point(i.x+i.w,i.y+i.h));null==i.x&&(r.x=null,s.x=null),null==i.y&&(r.y=null,s.y=null);var a=F._convertToAxisCoord(e,r.x,s.x,r.y,s.y),l={},h={},u={},d={};return e.xAxis&&(l=F._getAxisMinMax(e.xAxis,a.xMin,a.xMax,n),d=F.getAxisStartEndGroup(e.xAxis,l.min,l.max)),e.yAxis&&(h=F._getAxisMinMax(e.yAxis,a.yMin,a.yMax,n)),e.y2Axis&&(u=F._getAxisMinMax(e.y2Axis,a.yMin,a.yMax,n)),{xMin:l.min,xMax:l.max,unchanged:l.unchanged,yMin:h.min,yMax:h.max,y2Min:u.min,y2Max:u.max,startGroup:d.startGroup,endGroup:d.endGroup}},F._getAxisMinMax=function(t,e,i,n){if(null==e||null==i)return{min:null,max:null};var o=t.getUnboundedLinearValueAt(e),r=t.getUnboundedLinearValueAt(i);if(n){var s=t.getInfo().getMinimumExtent();if(r-o<s){var a=(r+o)/2;r=a+s/2,o=a-s/2}return F._limitToGlobal(t,o,r)}return F.getActualMinMax(t,o,r)},F.getAxisBoundsByDelta=function(t,e,i,n,o){var r=F._convertToAxisCoord(t,e,i,n,o),s=F.getZoomDirection(t),a={},l={},h={},u={};return t.xAxis&&"y"!=s&&(a=F._getAxisMinMaxByDelta(t.xAxis,r.xMin,r.xMax),u=F.getAxisStartEndGroup(t.xAxis,a.min,a.max)),t.yAxis&&"x"!=s&&(l=F._getAxisMinMaxByDelta(t.yAxis,r.yMin,r.yMax)),t.y2Axis&&(h=F._getAxisMinMaxByDelta(t.y2Axis,r.yMin,r.yMax)),{xMin:a.min,xMax:a.max,unchanged:a.unchanged,yMin:l.min,yMax:l.max,y2Min:h.min,y2Max:h.max,startGroup:u.startGroup,endGroup:u.endGroup}},F._getAxisMinMaxByDelta=function(t,e,i){var n=t.getLinearViewportMin(),o=t.getLinearViewportMax();if(i==e&&t.isFullViewport())return F.getActualMinMax(t,n,o);var r=t.getUnboundedLinearValueAt(e)-t.getUnboundedLinearValueAt(0),s=t.getUnboundedLinearValueAt(i)-t.getUnboundedLinearValueAt(0),a=1,l=o+s-(n+r),h=t.getInfo().getMinimumExtent();return e!=i&&l<h&&(a=(o-n-h)/(r-s)),n+=r*a,o+=s*a,F._limitToGlobal(t,n,o)},F._convertToAxisCoord=function(e,i,n,o,r){var s={},a=t.Agent.isRightToLeft(e.getCtx());return z.isHorizontal(e)?(s.xMin=o,s.xMax=r,s.yMin=a?n:i,s.yMax=a?i:n):(s.xMin=a?n:i,s.xMax=a?i:n,s.yMin=r,s.yMax=o),s},F._limitToGlobal=function(t,e,i){var n=t.getLinearGlobalMin(),o=t.getLinearGlobalMax();return i-e>=o-n?(e=n,i=o):e<n?(i+=n-e,e=n):i>o&&(e-=i-o,i=o),F.getActualMinMax(t,e,i)},F.getActualMinMax=function(t,e,i){var n={min:t.linearToActual(e),max:t.linearToActual(i)};if(t.isGroupAxis()){var o=t.getLinearViewportMin(),r=t.getLinearViewportMax(),s=1e-4;Math.abs(e-o)<s&&Math.abs(i-r)<s&&(n.unchanged=!0)}return n},F.getAxisStartEndGroup=function(t,e,i){if(t.isGroupAxis()&&null!=e&&null!=i){var n=Math.ceil(e),o=Math.floor(i);if(o>=n){var r=t.getInfo().getGroup(n),s=t.getInfo().getGroup(o);return{startGroup:r,endGroup:s}}}return{startGroup:null,endGroup:null}},F.setInitialSelection=function(t,e){var i=t.getSelectionHandler();if(i&&e&&0!=e.length){for(var n={},o=0;o<e.length;o++)null!=e[o].id?n[e[o].id]=!0:null!=e[o].series&&null!=e[o].group&&(n[k.createDataItemId(e[o].series,e[o].group)]=!0);for(var r=t.getChartObjPeers(),s=[],a=0;a<r.length;a++){var l=r[a];l.isSelectable()&&(n[l.getDataItemId()]||n[k.createDataItemId(l.getSeries(),l.getGroup())])&&s.push(l.getId())}i.processInitialSelections(s,r)}},F.getKeyboardNavigables=function(t){var e=[];if(z.isPie(t))for(var i=t.pieChart.__getSlices(),n=0;n<i.length;n++)V.isSeriesRendered(t,i[n].getSeriesIndex())&&e.push(i[n]);else for(var o=t.getChartObjPeers(),n=0;n<o.length;n++)o[n].isNavigable()&&e.push(o[n]);return e},F.isSeriesDrillable=function(t,e){var i=k.getSeriesItem(t,e),n=null!=i?i.drilling:"inherit";return"on"==n||"off"!=n&&(n=t.getOptions().drilling,"on"==n||"seriesOnly"==n)},F.isDataItemDrillable=function(t,e,i,n){var o=k.getNestedDataItem(t,e,i,n);o||(o=k.getDataItem(t,e,i));var r=null!=o?o.drilling:"inherit";return"on"==r||"off"!=r&&(r=t.getOptions().drilling,"on"==r)},F.addEventData=function(t,e){var i=k.getSeriesIndex(t,e.series),n=k.getGroupIndex(t,e.group),o=k.getNestedDataItemIndex(t,i,n,e.id),r=k.getDataContext(t,i,n,o);r&&(e.data=r.data,e.seriesData=r.seriesData,r.groupData?e.groupData=r.groupData:null!=n&&(e.groupData=k.getGroupsDataForContext(t)[n]))};var G=new Object;t.Obj.createSubclass(G,t.Obj),G.getRefObjs=function(t){var e=G.getAxisRefObjs(t,"x"),i=G.getAxisRefObjs(t,"y"),n=G.getAxisRefObjs(t,"y2");return e.concat(i,n)},G.getAxisRefObjs=function(t,e){var i=t.getOptions();return i&&i[e+"Axis"]&&i[e+"Axis"].referenceObjects?i[e+"Axis"].referenceObjects:[]},G.getType=function(t){return"area"==t.type?"area":"line"},G.getLocation=function(t){return"front"==t.location?"front":"back"},G.getColor=function(t){return t.color?t.color:"#333333"},G.getLineWidth=function(t){return t.lineWidth?t.lineWidth:1},G.getLineType=function(t){return t.lineType?t.lineType:"straight"},G.isObjectRendered=function(e,i){var n=V.getHiddenCategories(e);if(n.length>0){var o=G.getRefObjCategories(i);if(o&&t.ArrayUtils.hasAnyItem(n,o))return!1}return!("hidden"==i.visibility)},G.getId=function(t){return null!=t.id?t.id:t.text},G.getRefObjCategories=function(t){return t.categories?t.categories:[G.getId(t)]},G.getRefObj=function(t,e){for(var i=G.getRefObjs(t),n=0;n<i.length;n++)if(G.getId(i[n])==e)return i[n]},G.getLowValue=function(t){return null==t?null:t.low},G.getHighValue=function(t){return null==t?null:t.high},G.getXValue=function(t,e,i){return H.hasGroupAxis(t)?i:e[i]&&null!=e[i].x?e[i].x:k.getGroupLabel(t,i)},G.getViewportMinMaxIndex=function(t,e){var i=H.getXAxisViewportMinMax(t,!0),n=H.hasGroupAxis(t),o=i.min,r=0;if(null!=o)if(n)r=Math.ceil(o);else for(var s=0;s<e.length;s++){var a=G.getXValue(t,e,s);if(a>=o){r=s;break}}var l=i.max,h=e.length-1;if(null!=h)if(n)h=Math.floor(l);else for(var s=e.length-1;s>=r;s--){var a=k.getXValue(t,e,s);if(a<=l){h=s;break}}return{min:r,max:h}};var j=new Object;t.Obj.createSubclass(j,t.Obj),j.getBarFill=function(t,e,i,n){var o=V.getColor(t,e,i),r=V.getPattern(t,e,i);return j.getRectangleFill(t,o,r,n)},j.getRectangleFill=function(e,i,n,o){var r=V.getSeriesEffect(e);if(n)return new t.PatternFill(n,i);if("gradient"==r&&o>3){var s,a,l=z.isHorizontal(e)?270:0;return j._useAltaGradients(e)?(s=[t.ColorUtils.adjustHSL(i,0,-.09,.04),t.ColorUtils.adjustHSL(i,0,-.04,-.05)],a=[0,1]):(s=[t.ColorUtils.getBrighter(i,.15),t.ColorUtils.getBrighter(i,.45),t.ColorUtils.getBrighter(i,.25),i,t.ColorUtils.getBrighter(i,.15),t.ColorUtils.getDarker(i,.1)],a=[0,.15,.3,.65,.85,1]),new t.LinearGradientFill(l,s,null,a)}return new t.SolidFill(i)},j.getAreaFill=function(e,i){var n,o="lineWithArea"==V.getSeriesType(e,i),r=k.getSeriesItem(e,i);
r&&r.areaColor?n=r.areaColor:(n=V.getColor(e,i),o&&(n=t.ColorUtils.setAlpha(n,.2)));var s=V.getPattern(e,i),a=V.getSeriesEffect(e);if(s)return new t.PatternFill(s,n);if("gradient"==a){var l,h,u=z.isHorizontal(e)?180:270;if(o){var d=t.ColorUtils.getAlpha(n);l=[t.ColorUtils.setAlpha(n,Math.min(d+.2,1)),t.ColorUtils.setAlpha(n,Math.max(d-.15,0))],h=[0,1]}else j._useAltaGradients(e)?(l=[t.ColorUtils.adjustHSL(n,0,-.09,.04),t.ColorUtils.adjustHSL(n,0,-.04,-.05)],h=[0,1]):z.isSpark(e)?(l=[t.ColorUtils.getDarker(n,.5),n,t.ColorUtils.getBrighter(n,.5)],h=[0,.5,1]):(l=[t.ColorUtils.getBrighter(n,.5),n,t.ColorUtils.getDarker(n,.3)],h=[0,.5,1]);return new t.LinearGradientFill(u,l,null,h)}return new t.SolidFill(n)},j.getMarkerFill=function(e,i,n,o){var r=V.getMarkerColor(e,i,n,o),s=V.getPattern(e,i,n,o);if(s)return new t.PatternFill(s,r);if(z.isBubble(e)){var a=V.getSeriesEffect(e);if("gradient"==a){if(j._useAltaGradients(e)){var l=[t.ColorUtils.adjustHSL(r,0,-.09,.04),t.ColorUtils.adjustHSL(r,0,-.04,-.05)],h=[0,1];return new t.LinearGradientFill(270,l,null,h)}var u=V.getMarkerShape(e,i,n,o);if("human"==u){var d=[t.ColorUtils.getBrighter(r,.2),t.ColorUtils.getBrighter(r,.1),r,t.ColorUtils.getDarker(r,.2)],c=[0,.3,.7,1];return new t.LinearGradientFill(315,d,null,c)}var p=[t.ColorUtils.getBrighter(r,.15),r,t.ColorUtils.getDarker(r,.1),t.ColorUtils.getDarker(r,.2)],_=[0,.5,.75,1];return new t.RadialGradientFill(p,null,_)}}return new t.SolidFill(r)},j.getFunnelPyramidSliceFill=function(e,i,n,o,r){var s=V.getPattern(e,i,0),a=V.getSeriesEffect(e);if(s&&!r){var l=new t.PatternFill(s,n);return("vertical"==e.getOptions().orientation||z.isPyramid(e))&&(t.Agent.isRightToLeft(e.getCtx())?l.setMatrix(new t.Matrix(0,-1,1,0)):l.setMatrix(new t.Matrix(0,1,-1,0))),l}if("gradient"==a){var h,u,d=z.isPyramid(e)?180:90;return"on"==e.getOptions().styleDefaults.threeDEffect?(h=[t.ColorUtils.adjustHSL(n,0,0,-.1),t.ColorUtils.adjustHSL(n,0,0,.12),n],u=[0,.65,1]):(h=[t.ColorUtils.adjustHSL(n,0,-.09,.04),t.ColorUtils.adjustHSL(n,0,-.04,-.05)],u=[0,1]),new t.LinearGradientFill(d,h,null,u,[o.x,o.y,o.w,o.h])}return new t.SolidFill(n)},j._useAltaGradients=function(t){return!a.isSkyrosSkin(t)};var V=new Object;t.Obj.createSubclass(V,t.Obj),V._SERIES_TYPE_RAMP=["bar","line","area"],V.getSeriesType=function(t,e){var i="seriesType",n=t.getOptionsCache().getFromCachedMap(i,e);if(n)return n;if(!z.isBLAC(t))return t.getOptionsCache().putToCachedMap(i,e,"auto"),"auto";var o=k.getSeriesItem(t,e);if(n=o?o.type:null,z.isStock(t)||"candlestick"!=n||(n="auto"),!n||"auto"==n)if(z.isBar(t))n="bar";else if(z.isLine(t))n="line";else if(z.isArea(t))n="area";else if(z.isLineWithArea(t))n="lineWithArea";else if(z.isStock(t))n="candlestick";else if(z.isBoxPlot(t))n="boxPlot";else if(z.isCombo(t)){var r=k.getSeriesStyleIndex(t,e),s=r%V._SERIES_TYPE_RAMP.length;n=V._SERIES_TYPE_RAMP[s]}return t.getOptionsCache().putToCachedMap(i,e,n),n},V.isRangeSeries=function(t,e){var i=t.getOptionsCache();if(!i.getFromCache("hasLowHighSeries"))return!1;var n="isRange",o=i.getFromCachedMap(n,e);if(null!=o)return o;o=!1;var r=V.getSeriesType(t,e);if("bar"==r||"area"==r)for(var s=0;s<k.getGroupCount(t);s++)if(null!=k.getLowValue(t,e,s)||null!=k.getHighValue(t,e,s)){o=!0;break}return t.getOptionsCache().putToCachedMap(n,e,o),o},V.getSeriesEffect=function(t){var e=t.getOptions();return e.styleDefaults.seriesEffect},V.getColor=function(t,e,i){var n=k.getDataItem(t,e,i);if(n&&n.color)return n.color;var o=k.getSeriesItem(t,e);if(o&&o.color)return o.color;var r=V.getSeriesType(t,e);if("candlestick"==r)return V.getStockItemColor(t,e,i);var s=t.getOptions(),a=s.styleDefaults.colors,l=k.getSeriesStyleIndex(t,e),h=l%a.length;return a[h]},V.getStockItemColor=function(t,e,i){var n=t.getOptions();return k.isStockValueRising(t,e,i)?n.styleDefaults.stockRisingColor:n.styleDefaults.stockFallingColor},V.getStockVolumeColor=function(t,e,i){var n=k.getDataItem(t,e,i);if(n&&n.color)return n.color;var o=t.getOptions();return o.styleDefaults.stockVolumeColor?o.styleDefaults.stockVolumeColor:V.getStockItemColor(t,e,i)},V.getSplitterPosition=function(t){var e=t.getOptions(),i=e.splitterPosition;return null!=i?i:z.isStock(t)?.8:.5},V.getPattern=function(e,i,n,o){var r=k.getNestedDataItem(e,i,n,o);if(r&&r.pattern&&"auto"!=r.pattern)return r.pattern;var s=k.getDataItem(e,i,n);if(s&&s.pattern&&"auto"!=s.pattern)return s.pattern;var a=V.getSeriesType(e,i);if(("line"==a||"area"==a)&&null!=n)return null;var l=k.getSeriesItem(e,i);if(l&&l.pattern&&"auto"!=l.pattern)return l.pattern;if("pattern"==V.getSeriesEffect(e)){if(z.isStock&&"candlestick"==V.getSeriesType(e,i)){var h=k.isStockValueRising(e,i,n),u=t.Agent.isRightToLeft(e.getCtx());return h?u?"smallDiagonalLeft":"smallDiagonalRight":u?"smallDiagonalRight":"smallDiagonalLeft"}var d=e.getOptions(),c=d.styleDefaults.patterns,p=k.getSeriesStyleIndex(e,i),_=p%c.length;return c[_]}return null},V.getMarkerBorderColor=function(e,i,n,o){var r=V.getBorderColor(e,i,n,o);if(r)return r;if(V.getDataItemGaps(e)>0&&"lineWithArea"!=V.getSeriesType(e,i))return V.getBackgroundColor(e,!0);if(z.isBubble(e)&&!a.isSkyrosSkin(e)&&"gradient"!=V.getSeriesEffect(e)){var s=V.getMarkerColor(e,i,n);if(s)return t.ColorUtils.adjustHSL(s,0,.15,-.25)}return null},V.getBorderColor=function(t,e,i,n){var o=k.getNestedDataItem(t,e,i,n);if(o&&o.borderColor)return o.borderColor;var r=k.getDataItem(t,e,i);if(r&&r.borderColor)return r.borderColor;var s=k.getSeriesItem(t,e);if(s&&s.borderColor)return s.borderColor;var a=t.getOptions(),l=a.styleDefaults;return"auto"!=l.borderColor?l.borderColor:null},V.getBorderWidth=function(t,e,i,n){var o=k.getNestedDataItem(t,e,i,n);if(o&&null!=o.borderWidth)return o.borderWidth;var r=k.getDataItem(t,e,i);if(r&&null!=r.borderWidth)return r.borderWidth;var s=k.getSeriesItem(t,e);if(s&&null!=s.borderWidth)return s.borderWidth;var a=t.getOptions().styleDefaults;return"auto"!=a.borderWidth?a.borderWidth:z.isScatterBubble(t)||z.isLineArea(t)?1.25:1},V.getMarkerColor=function(t,e,i,n){if(!V.isMarkerDisplayed(t,e,i,n))return V.getColor(t,e,i);var o=k.getNestedDataItem(t,e,i,n);if(o&&o.color)return o.color;var r=k.getDataItem(t,e,i);if(r&&r.color)return r.color;var s=k.getSeriesItem(t,e);if(s&&s.markerColor)return s.markerColor;var a=t.getOptions(),l=a.styleDefaults.markerColor;return l?l:V.getColor(t,e,i)},V.getMarkerShape=function(t,e,i,n){var o=t.getOptions(),r=o.styleDefaults.markerShape,s=k.getSeriesItem(t,e);s&&s.markerShape&&(r=s.markerShape);var a=k.getDataItem(t,e,i);a&&a.markerShape&&(r=a.markerShape);var l=k.getNestedDataItem(t,e,i,n);if(l&&l.markerShape&&(r=l.markerShape),"auto"==r)if(z.isBubble(t)||"boxPlot"==V.getSeriesType(t,e)||V.isRangeSeries(t,e))r="circle";else{var h=k.getSeriesStyleIndex(t,e),u=o.styleDefaults.shapes,d=h%u.length;r=u[d]}return r},V.getMarkerSize=function(t,e,i,n){var o,r=k.getNestedDataItem(t,e,i,n);if(r&&null!=r.markerSize)o=Number(r.markerSize);else{var s=k.getDataItem(t,e,i);if(s&&null!=s.markerSize)o=Number(s.markerSize);else{var a=k.getSeriesItem(t,e);o=a&&null!=a.markerSize?Number(a.markerSize):Number(t.getOptions().styleDefaults.markerSize)}}return z.isOverview(t)&&(o=Math.ceil(.6*o)),o},V.isMarkerDisplayed=function(t,e,i,n){var o,r=k.getNestedDataItem(t,e,i,n);if(r&&null!=r.markerDisplayed)o=r.markerDisplayed;else{var s=k.getDataItem(t,e,i);if(s&&null!=s.markerDisplayed)o=s.markerDisplayed;else{var a=k.getSeriesItem(t,e);o=a&&null!=a.markerDisplayed?a.markerDisplayed:t.getOptions().styleDefaults.markerDisplayed}}return"on"==o||"off"!=o&&(z.isScatterBubble(t)||"boxPlot"==V.getSeriesType(t,e)||"none"==V.getLineType(t,e))},V.getImageSource=function(t,e,i,n,o){var r=k.getNestedDataItem(t,e,i,n);if(r&&r[o])return r[o];var s=k.getDataItem(t,e,i);if(s&&s[o])return s[o];var a=k.getSeriesItem(t,e);return a&&a[o]?a[o]:void 0},V.getLineWidth=function(t,e){var i,n=k.getSeriesItem(t,e),o=t.getOptions();return i=n&&n.lineWidth?n.lineWidth:o.styleDefaults.lineWidth?o.styleDefaults.lineWidth:"lineWithArea"==V.getSeriesType(t,e)?2:3,z.isOverview(t)&&(i=Math.ceil(.6*i)),i},V.getLineStyle=function(t,e){var i=k.getSeriesItem(t,e);if(i&&i.lineStyle)return i.lineStyle;var n=t.getOptions();return n.styleDefaults.lineStyle},V.getLineType=function(t,e){var i,n=k.getSeriesItem(t,e);return i=n&&n.lineType?n.lineType:t.getOptions().styleDefaults.lineType,"auto"==i&&(i=z.isScatterBubble(t)?"none":"straight"),(z.isPolar(t)||z.isScatterBubble(t))&&("centeredSegmented"==i&&(i="segmented"),"centeredStepped"==i&&(i="stepped")),i},V.getBarSpacing=function(t){var e=t.getOptions();return e.__sparkBarSpacing},V.getBarGapRatio=function(t){var e="barGapRatio",i=t.getCache().getFromCache(e);if(i)return i;if(i=t.getOptions().styleDefaults.barGapRatio,"string"==typeof i&&"%"==i.slice(-1)&&(i=Number(i.slice(0,-1))/100),null!=i&&!isNaN(i))return i;var n=k.getStackCategories(t,"bar"),o=n.y.length,r=n.y2.length,s=z.isSplitDualY(t)?Math.max(o,r):o+r;return i=z.isPolar(t)?1==s?0:.25:1==s?.37+.26/k.getViewportGroupCount(t):.25,t.getCache().putToCache(e,i),i},V.getMaxBarWidth=function(t){var e=t.getOptions().styleDefaults.maxBarWidth;return null==e||z.isPolar(t)?1/0:e},V.getBarWidth=function(t,e,i){t.getOptionsCache().getFromCache("hasVaryingBarWidth")||(e=0,i=0);var n="barWidth",o=t.getCache().getFromCachedMap2D(n,e,i);if(null!=o)return o;var r=k.getZValue(t,e,i,1)/t.getOptions()._averageGroupZ;return o=Math.min(r*V.getGroupWidth(t),V.getMaxBarWidth(t)),t.getCache().putToCachedMap2D(n,e,i,o),o},V.getBarStackWidth=function(t,e,i,n){t.getOptionsCache().getFromCache("hasVaryingBarWidth")||(i=0);var o=n?"y2BarStackWidth":"yBarStackWidth",r=t.getCache().getFromCachedMap2D(o,e,i);if(null!=r)return r;var s=k.getBarCategoryZ(t,e,i,n)/t.getOptions()._averageGroupZ;return r=Math.min(s*V.getGroupWidth(t),V.getMaxBarWidth(t)),t.getCache().putToCachedMap2D(o,e,i,r),r},V.getBarCategoryOffsetMap=function(t,e){t.getOptionsCache().getFromCache("hasVaryingBarWidth")||(e=0);var i="barCategoryOffsetMap",n=t.getCache().getFromCachedMap(i,e);if(n)return n;var o,r,s=z.isStacked(t),a=k.getStackCategories(t,"bar"),l=H.isMixedFrequency(t),h=z.isSplitDualY(t),u={},d={},c=0,p=0;if(s){for(r=0;r<a.y.length;r++)o=V.getBarStackWidth(t,a.y[r],e,!1),l?u[a.y[r]]=-.5*o:(u[a.y[r]]=c,c+=o);for(h||(p=c),r=0;r<a.y2.length;r++)o=V.getBarStackWidth(t,a.y2[r],e,!0),l?d[a.y2[r]]=-.5*o:(d[a.y2[r]]=p,p+=o);h||(c=p)}else for(var r=0;r<k.getSeriesCount(t);r++){var _=V.getSeriesType(t,r);if(("bar"==_||"candlestick"==_||"boxPlot"==_)&&V.isSeriesRendered(t,r)){var g=k.isAssignedToY2(t,r),m=k.getStackCategory(t,r);o=V.getBarWidth(t,r,e),g?l?d[m]=-.5*o:(d[m]=p,p+=o):l?u[m]=-.5*o:(u[m]=c,c+=o)}}for(var m in u)u[m]-=h||s?c/2:(c+p)/2;for(var m in d)d[m]-=h||s?p/2:(c+p)/2-c;return n={y:u,y2:d},t.getCache().putToCachedMap(i,e,n),n},V.getDataItemGaps=function(t){var e="dataItemGaps",i=t.getOptionsCache().getFromCache(e);if(null!=i)return i;var n=t.getOptions();if(z.isFunnel(t)&&"on"==n.styleDefaults.funnelSliceGaps)i=1;else if(null!=n.styleDefaults.sliceGaps)i=n.styleDefaults.sliceGaps;else{var o=n.styleDefaults.dataItemGaps;"auto"==o&&(o="on"==n.styleDefaults.threeDEffect?"0%":"50%");var r=o&&o.indexOf?o.indexOf("%"):-1;r>=0?(o=o.substring(0,r),i=o/100):i=0}return t.getOptionsCache().putToCache(e,i),i},V.isSelectable=function(t,e,i){var n=k.getSeriesItem(t,e);return(!n||"off"!=n._selectable)&&(t.isSelectionSupported()&&null!=e&&e>=0&&null!=i&&i>=0)},V.isSeriesRendered=function(e,i){var n=V.getHiddenCategories(e);return!(n.length>0&&t.ArrayUtils.hasAnyItem(n,k.getCategories(e,i)))},V.isDataItemRendered=function(e,i,n,o){var r,s="isDataItemRendered",a=!isNaN(o)&&null!=o&&o>=0;if(!a&&(r=e.getOptionsCache().getFromCachedMap2D(s,i,n),void 0!==r))return r;if(r=!0,V.isSeriesRendered(e,i)){var l=V.getHiddenCategories(e);l.length>0&&((z.isPie(e)||z.isFunnel(e)||z.isPyramid(e))&&(n=0),t.ArrayUtils.hasAnyItem(l,k.getCategories(e,i,n))&&(r=!1),t.ArrayUtils.hasAnyItem(l,k.getCategories(e,i,n,o))&&(r=!1))}else r=!1;return a||e.getOptionsCache().putToCachedMap2D(s,i,n,r),r},V.getAnimationOnDisplay=function(t){return t.getOptions().animationOnDisplay},V.getAnimationOnDataChange=function(t){return t.getOptions().animationOnDataChange},V.getAnimationDuration=function(e){return t.StyleUtils.getTimeMilliseconds(e.getOptions().styleDefaults.animationDuration)/1e3},V.getAnimationIndicators=function(t){return t.getOptions().styleDefaults.animationIndicators},V.getAnimationUpColor=function(t){return t.getOptions().styleDefaults.animationUpColor},V.getAnimationDownColor=function(t){return t.getOptions().styleDefaults.animationDownColor},V.getHiddenCategories=function(t){var e=t.getOptions();return e.hiddenCategories||(e.hiddenCategories=[]),e.hiddenCategories},V.getHighlightedCategories=function(t){var e=t.getOptions();return e.highlightedCategories||(e.highlightedCategories=[]),e.highlightedCategories},V.getSelectedInnerColor=function(t){return t.getOptions().styleDefaults.selectedInnerColor},V.getSelectedOuterColor=function(t){return t.getOptions().styleDefaults.selectedOuterColor},V.isSelectionHighlighted=function(t){var e=t.getOptions().styleDefaults.selectionEffect;return"highlight"==e||"highlightAndExplode"==e},V.isSelectionExploded=function(t){var e=t.getOptions().styleDefaults.selectionEffect;return"explode"==e||"highlightAndExplode"==e},V.getDataLabelStyle=function(e,i,n,o,r,s,a){var l,h=[];!r||"bar"!=V.getSeriesType(e,i)&&!z.isBubble(e)||"center"!=s&&"inBottom"!=s&&"inTop"!=s&&"inRight"!=s&&"inLeft"!=s?h.push(new t.CSSStyle("color: #333333;")):(l=null!=V.getPattern(e,i,n,o)?"#000000":t.ColorUtils.getContrastingTextColor(r),h.push(new t.CSSStyle("color: "+l+";"))),h.push(V._parseLowHighArray(e.getOptions().styleDefaults.dataLabelStyle,a));var u=k.getDataItem(e,i,n);u&&h.push(new t.CSSStyle(V._parseLowHighArray(u.labelStyle,a)));var d=k.getNestedDataItem(e,i,n,o);return d&&h.push(new t.CSSStyle(V._parseLowHighArray(d.labelStyle,a))),l&&t.Agent.isHighContrast()&&h.push(new t.CSSStyle("color: "+l+";")),t.CSSStyle.mergeStyles(h)},V.getDataLabelPosition=function(e,i,n,o,r,s){var a,l=k.getNestedDataItem(e,i,n,o),h=k.getDataItem(e,i,n);if(s)a="outsideBarEdge";else if(a=l&&l.labelPosition?l.labelPosition:h.labelPosition,a||(a=e.getOptions().styleDefaults.dataLabelPosition),a=V._parseLowHighArray(a,r),"none"==a)return"none";var u=t.Agent.isRightToLeft(e.getCtx()),d=z.isHorizontal(e),c=z.isPolar(e);if(z.isFunnel(e)||z.isPyramid(e))return"center";if("bar"==V.getSeriesType(e,i)){if("center"==a||c)return"center";var p=z.isStacked(e);if("insideBarEdge"!=a){if(p&&!s)return"center";"outsideBarEdge"!=a&&(a="insideBarEdge")}if("insideBarEdge"==a&&!p){var _,g=e.getOptions().styleDefaults.dataLabelStyle;if(d){var m=k.getDataLabel(e,i,n,o,r);_=t.TextUtils.getTextStringWidth(e.getCtx(),m,g)}else _=t.TextUtils.getTextStringHeight(e.getCtx(),g);var f=k.getBarInfo(e,i,n),y=Math.abs(f.baseCoord-f.yCoord);y<=_&&(a="outsideBarEdge")}var v;return v="low"==r?h.low<=h.high:"high"==r?h.high<h.low:k.getValue(e,i,n,o)<0,"outsideBarEdge"==a?d?!v&&!u||v&&u?"right":"left":v?"bottom":"top":d?!v&&!u||v&&u?"inRight":"inLeft":v?"inBottom":"inTop"}if("center"==a)return"center";if("belowMarker"==a)return"bottom";if("aboveMarker"==a)return"top";if("afterMarker"!=a&&"beforeMarker"!=a){if(z.isBubble(e))return"center";if("low"!=r||c)if("high"!=r||c)a="afterMarker";else{if(!d)return"top";a="afterMarker"}else{if(!d)return"bottom";a="beforeMarker"}}return!u&&"afterMarker"==a||u&&"beforeMarker"==a?"right":"left"},V._parseLowHighArray=function(t,e){return t instanceof Array?"high"==e?t[1]:t[0]:t},V.isOverviewRendered=function(t){var e=t.getOptions();return z.isOverviewSupported(t)&&"off"!=e.overview.rendered},V.getOverviewHeight=function(t){var e=t.getOptions(),i=e.overview.height;return null==i&&(i=H.hasTimeAxis(t)?.25:.2),V.getSizeInPixels(i,t.getHeight())},V.getSizeInPixels=function(t,e){if("string"==typeof t){if("%"==t.slice(-1))return e*Number(t.slice(0,-1))/100;if("px"==t.slice(-2))return Number(t.slice(0,-2));t=Number(t)}return"number"==typeof t?t<=1?e*t:t:0},V.getBackgroundColor=function(t,e){var i=t.getOptions();return i.plotArea.backgroundColor?i.plotArea.backgroundColor:e?"#FFFFFF":null},V.getHoverBehaviorDelay=function(e){var i=e.getOptions().styleDefaults.hoverBehaviorDelay;return i?(i=t.StyleUtils.getTimeMilliseconds(i),z.isScatterBubble(e)||z.isLine(e)?.75*i:1.25*i):0},V.optimizeMarkerStroke=function(t){return z.isScatterBubble(t)||z.isBoxPlot(t)},V.getGroupWidth=function(t){var e="groupWidth",i=t.getCache().getFromCache(e);return null==i&&(i=t.xAxis.getInfo().getGroupWidth(),t.getCache().putToCache(e,i)),i},V.isStackLabelRendered=function(t){var e=t.getOptions();return!(!z.isStacked(t)||"on"!=e.stackLabel)},V.optimizeMarkerFill=function(t){return z.isLineArea(t)},V.getClassName=function(t,e,i){var n=k.getDataItem(t,e,i);if(n&&(n.className||n.svgClassName))return n.className||n.svgClassName;var o=k.getSeriesItem(t,e);return o&&(o.className||o.svgClassName)?o.className||o.svgClassName:null},V.getAreaClassName=function(t,e){var i=k.getSeriesItem(t,e);return i&&(i.areaClassName||i.areaSvgClassName)?i.areaClassName||i.areaSvgClassName:i&&(i.className||i.svgClassName)?i.className||i.svgClassName:null},V.getMarkerClassName=function(t,e,i,n){var o=k.getNestedDataItem(t,e,i,n);if(o&&(o.className||o.svgClassName))return o.className||o.svgClassName;var r=k.getDataItem(t,e,i);if(r&&(r.className||r.svgClassName))return r.className||r.svgClassName;var s=k.getSeriesItem(t,e);return s&&(s.markerClassName||s.markerSvgClassName)?s.markerClassName||s.markerSvgClassName:z.isScatterBubble(t)&&s&&(s.className||s.svgClassName)?s.className||s.svgClassName:null},V.getStyle=function(t,e,i){var n=k.getDataItem(t,e,i);if(n&&(n.style||n.svgStyle))return n.style||n.svgStyle;var o=k.getSeriesItem(t,e);return o&&(o.style||o.svgStyle)?o.style||o.svgStyle:null},V.getAreaStyle=function(t,e){var i=k.getSeriesItem(t,e);return i&&(i.areaStyle||i.areaSvgStyle)?i.areaStyle||i.areaSvgStyle:i&&(i.style||i.svgStyle)?i.style||i.svgStyle:null},V.getMarkerStyle=function(t,e,i,n){var o=k.getNestedDataItem(t,e,i,n);if(o&&(o.style||o.svgStyle))return o.style||o.svgStyle;var r=k.getDataItem(t,e,i);if(r&&(r.style||r.svgStyle))return r.style||r.svgStyle;var s=k.getSeriesItem(t,e);return s&&(s.markerStyle||s.markerSvgStyle)?s.markerStyle||s.markerSvgStyle:z.isScatterBubble(t)&&s&&(s.style||s.svgStyle)?s.style||s.svgStyle:null},V.getBoxPlotStyleOptions=function(e,i,n){var o=k.getDataItem(e,i,n),r=o&&o.boxPlot?o.boxPlot:{},s=k.getSeriesItem(e,i),a=s&&s.boxPlot?s.boxPlot:{},l=e.getOptions().styleDefaults,h=l.boxPlot,u=t.JsonUtils.merge(r,t.JsonUtils.merge(a,h)),d=V.getColor(e,i,n);u._color=d;var c=t.ColorUtils.getBrighter(d,.8);if(u.q2Color||(u.q2Color=c),u.q3Color||(u.q3Color=c),"pattern"==V.getSeriesEffect(e)){var p=V.getPattern(e,i,n);u._q2Pattern=p,u._q3Pattern=p}var _=V.getBorderColor(e,i,n);u.borderColor=_?_:d,u.borderWidth=V.getBorderWidth(e,i,n);var g=t.ColorUtils.getDarker(d,.1);return V._setBoxPlotDefaultLineColor(u,"whisker",g),V._setBoxPlotDefaultLineColor(u,"whiskerEnd",g),V._setBoxPlotDefaultLineColor(u,"median",g),u},V._setBoxPlotDefaultLineColor=function(e,i,n){var o=t.JsonUtils.merge(e[i+"Style"],e[i+"SvgStyle"]);e[i+"SvgStyle"]=o,e[i+"Style"]=null,o.stroke||e[i+"ClassName"]||e[i+"SvgClassName"]||(e[i+"SvgStyle"].stroke=n)};var Y=new Object;t.Obj.createSubclass(Y,t.Obj),Y.createText=function(e,i,n,o,r,s,a,l){var h=new t.OutputText(i.getCtx(),n,r,s);return h.setCSSStyle(o),t.TextUtils.fitText(h,a,l,i)?(e.associate(h,new t.SimpleObjPeer(h.getUntruncatedTextString())),h):null},Y.areTitlesRendered=function(t){var e=t.getOptions();return e.title.text||e.subtitle.text||e.footnote.text};var W=new Object;t.Obj.createSubclass(W,t.Obj),W.getDatatipColor=function(t,e,i,n){return z.isStock(t)?V.getColor(t,0,i):null!=n&&n>=0?V.getMarkerColor(t,e,i,n):V.getColor(t,e,i)},W.getDatatip=function(t,e,i,n,o){if(z.isSpark(t)||z.isOverview(t))return null;if(e<0||i<0)return null;var r=k.getDataItem(t,e,i),s=t.getOptions().tooltip,a=s?s.renderer:null;if(o&&a){var l=t.getCtx().getTooltipManager(W.isDataCursorEnabled(t)?C.TOOLTIP_ID:null),h=k.getDataContext(t,e,i,n);if(z.isPie(t)){var u=Z.getSliceBySeriesIndex(t,e);h.label=u.getSliceLabelString()}else h.label=k.getDataLabel(t,e,i,n);return l.getCustomTooltip(a,h)}if(r&&null!=r.shortDesc)return r.shortDesc;var d="";return z.isStock(t)?d+=W.getStockDatatip(t,0,i,o):(d=W._addSeriesDatatip(d,t,e,i,o),d=W._addGroupDatatip(d,t,e,i,o),d=W._addValueDatatip(d,t,e,i,n,o)),W._processDatatip(d,t,o)},W.getOtherSliceDatatip=function(e,i,n){var o=t.Bundle.getTranslatedString(t.Bundle.CHART_PREFIX,"LABEL_OTHER",null),r=e.getOptions().tooltip,s=r?r.renderer:null;if(n&&s){var a=Z.getSliceBySeriesIndex(e,null),l=k.getDataContext(e,null,0);return l.label=a.getSliceLabelString(),e.getCtx().getTooltipManager().getCustomTooltip(s,l)}var h="";return h=W._addDatatipRow(h,e,"series","SERIES",o,n),h=W._addGroupDatatip(h,e,0,0,n),h=W._addDatatipRow(h,e,"value","VALUE",i,n),W._processDatatip(h,e,n)},W._processDatatip=function(e,i,n){return""==e?null:n?t.HtmlTooltipManager.createStartTag("table",i.getOptions().styleDefaults._tooltipStyle)+e+"</table>":e},W.getRefObjTooltip=function(t,e,i,n){var o=t.getOptions().tooltip,r=o?o.renderer:null;if(r&&null!=e.id){var s=t.getCtx().getTooltipManager(W.isDataCursorEnabled(t)?C.TOOLTIP_ID:null),a={id:G.getId(e),label:e.text,data:t.getRawOptions()[i].referenceObjects[n],value:e.value,low:G.getLowValue(e),high:G.getHighValue(e),color:G.getColor(e)};return s.getCustomTooltip(r,a)}return e.shortDesc},W.getStockDatatip=function(t,e,i,n){var o=k.getDataItem(t,e,i),r=W._addGroupDatatip("",t,e,i,n);return o&&(r=W._addDatatipRow(r,t,"open","OPEN",o.open,n),r=W._addDatatipRow(r,t,"close","CLOSE",o.close,n),r=W._addDatatipRow(r,t,"high","HIGH",o.high,n),r=W._addDatatipRow(r,t,"low","LOW",o.low,n),r=W._addDatatipRow(r,t,"volume","VOLUME",o.volume,n)),r},W._addSeriesDatatip=function(t,e,i,n,o){var r=k.getSeriesLabel(e,i);return W._addDatatipRow(t,e,"series","SERIES",r,o)},W._addGroupDatatip=function(e,i,n,o,r){var s;if(H.hasTimeAxis(i)){var a=W.getValueFormat(i,"group"),l=k.getXValue(i,n,o);s=W.formatDateValue(a,new Date(l)),null==s&&(s=i.xAxis.getInfo().formatLabel(l))}else s=k.getGroupLabel(i,o);var h=k.getNumLevels(i),u="GROUP";if(1!=h&&t.ArrayUtils.isArray(s))for(var d=h-1;d>=0;d--)e=W._addDatatipRow(e,i,"group",u,s[d],r,d),s[d]&&(u=null);else e=W._addDatatipRow(e,i,"group",u,s,r);return e},W._addValueDatatip=function(t,e,i,n,o,r){var s=k.getValue(e,i,n,o),a=k.getXValue(e,i,n),l=k.getZValue(e,i,n),h=k.getLowValue(e,i,n),u=k.getHighValue(e,i,n),d=null!=o&&o>=0;if(z.isScatterBubble(e))t=W._addDatatipRow(t,e,"x","X",a,r),t=W._addDatatipRow(t,e,"y","Y",s,r),z.isBubble(e)&&(t=W._addDatatipRow(t,e,"z","Z",l,r));else if(z.isPie(e)||z.isPyramid(e))t=W._addDatatipRow(t,e,"value","VALUE",s,r);else if(z.isFunnel(e)){t=W._addDatatipRow(t,e,"value","VALUE",s,r);var c=k.getTargetValue(e,i);null!=c&&(t=W._addDatatipRow(t,e,"targetValue","TARGET_VALUE",c,r))}else if("boxPlot"!=V.getSeriesType(e,i)||d){if(z.isBLAC(e)){var p=k.isAssignedToY2(e,i)?"y2":"y";null==h&&null==u||d?null==l||d?t=W._addDatatipRow(t,e,p,"VALUE",s,r):(t=W._addDatatipRow(t,e,p,"Y",s,r),t=W._addDatatipRow(t,e,"z","Z",l,r)):(t=W._addDatatipRow(t,e,"high","HIGH",u,r),t=W._addDatatipRow(t,e,"low","LOW",h,r),null!=l&&(t=W._addDatatipRow(t,e,"z","Z",l,r)))}}else{var _=k.getDataItem(e,i,n);t=W._addDatatipRow(t,e,"high","HIGH",u,r),t=W._addDatatipRow(t,e,"q3","Q3",_.q3,r),t=W._addDatatipRow(t,e,"q2","Q2",_.q2,r),t=W._addDatatipRow(t,e,"q1","Q1",_.q1,r),t=W._addDatatipRow(t,e,"low","LOW",h,r),null!=l&&(t=W._addDatatipRow(t,e,"z","Z",l,r))}return t},W._addDatatipRow=function(e,i,n,o,r,s,a){if(null==r||""===r)return e;var l=i.getOptions().styleDefaults,h=W.getValueFormat(i,n),u=h.tooltipDisplay;if(u&&"auto"!=u||"group"==n&&(z.isPie(i)||z.isFunnel(i))&&(u="off"),"off"==u)return e;var d;if("string"==typeof h.tooltipLabel?d=h.tooltipLabel:t.ArrayUtils.isArray(h.tooltipLabel)&&(d=h.tooltipLabel[a?a:0]),null==d&&(d=null==o?"":"GROUP"==o&&H.hasTimeAxis(i)?t.Bundle.getTranslation(i.getOptions(),"labelDate",t.Bundle.CHART_PREFIX,"LABEL_GROUP"):t.Bundle.getTranslatedString(t.Bundle.CHART_PREFIX,"LABEL_"+o,"")),"series"!=n&&"group"!=n&&(r=W.formatValue(i.getCtx(),h,r)),s){var c=t.Agent.isRightToLeft(i.getCtx());return l.tooltipLabelStyle.setStyle(t.CSSStyle.TEXT_ALIGN,c?"left":"right"),l.tooltipValueStyle.setStyle(t.CSSStyle.TEXT_ALIGN,c?"right":"left"),e+"<tr>"+t.HtmlTooltipManager.createStartTag("td",l.tooltipLabelStyle)+d+"</td>"+t.HtmlTooltipManager.createStartTag("td",l.tooltipValueStyle)+r+"</td></tr>"}return e.length>0&&(e+="<br>"),e+t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[d,r])},W.getValueFormat=function(t,e){var i=t.getOptions().valueFormats;if(!i)return{};if(i instanceof Array){for(var n={},o=0;o<i.length;o++){var r=i[o];n[r.type]=r}t.getOptions().valueFormats=n,i=n}return i[e]?i[e]:"group"==e&&H.hasTimeAxis(t)?W.getValueFormat(t,"x"):"y"!=e&&"y2"!=e&&"min"!=e&&"max"!=e||!z.isBLAC(t)?{}:W.getValueFormat(t,"value")},W.formatValue=function(e,i,n,o,r,s){var a,l="auto",h="on";i.scaling&&(l=i.scaling),i.autoPrecision&&(h=i.autoPrecision),i.converter&&(a=i.converter),o=null!=o?o:n,r=null!=r?r:n,s=null!=s?s:0;var u=new t.LinearScaleAxisValueFormatter(e,o,r,s,l,h);return a&&(a.getAsString||a.format)?u.format(n,a):u.format(n)},W.formatDateValue=function(t,e){var i=t.converter;return i?i.getAsString?i.getAsString(e):i.format?i.format(e):null:null},W.isDataCursorEnabled=function(e){if(z.isPie(e)||z.isFunnel(e)||z.isPolar(e)||z.isPyramid(e))return!1;var i=e.getOptions();return"on"==i.dataCursor||"off"!=i.dataCursor&&(t.Agent.isTouchDevice()&&z.isLineArea(e))},W.getDataCursorBehavior=function(t){var e=t.getOptions().dataCursorBehavior;return"snap"==e?C.BEHAVIOR_SNAP:"smooth"==e?C.BEHAVIOR_SMOOTH:z.isLineArea(t)?C.BEHAVIOR_SMOOTH:C.BEHAVIOR_SNAP};var z=new Object;t.Obj.createSubclass(z,t.Obj),z._SUPPORTED_TYPES=["bar","line","area","lineWithArea","combo","pie","bubble","scatter","funnel","pyramid","stock","boxPlot"],z.isValidType=function(e){return t.ArrayUtils.getIndex(z._SUPPORTED_TYPES,e.getType())>=0},z.isSpark=function(t){return t.getOptions().__spark},z.isOverview=function(t){return t.getOptions()._isOverview},z.isVertical=function(t){return!z.isHorizontal(t)&&!z.isPolar(t)},z.isHorizontal=function(t){return"horizontal"==t.getOptions().orientation&&!z.isPolar(t)&&!z.isStock(t)&&(z.isBLAC(t)||z.isFunnel(t))},z.isPolar=function(t){return"polar"==t.getOptions().coordinateSystem&&!z.isStock(t)&&!z.isBoxPlot(t)},z.isStacked=function(t){var e=t.getOptions();return!("on"!=e.stack||H.isMixedFrequency(t)||k.getSeriesCount(t)<2)&&z.isBLAC(t)},z.isCombo=function(t){return"combo"==t.getType()},z.isBar=function(t){return"bar"==t.getType()},z.isLine=function(t){return"line"==t.getType()},z.isLineWithArea=function(t){return"lineWithArea"==t.getType()},z.isArea=function(t){return"area"==t.getType()},z.isStock=function(t){return"stock"==t.getType()},z.isBoxPlot=function(t){return"boxPlot"==t.getType()},z.isScatter=function(t){return"scatter"==t.getType()},z.isBubble=function(t){return"bubble"==t.getType()},z.isPie=function(t){return"pie"==t.getType()},z.isFunnel=function(t){return"funnel"==t.getType()},z.isPyramid=function(t){return"pyramid"==t.getType()},z.isDualY=function(t){return!(!z.hasAxes(t)||z.isScatterBubble(t)||z.isPolar(t))},z.isSplitDualY=function(t){return!(!z.isStock(t)||!k.hasVolumeSeries(t)||z.isOverview(t))||"on"==t.getOptions().splitDualY&&z.hasY2Data(t)&&!z.hasY2DataOnly(t)},z.isBLAC=function(t){var e=t.getType();return"bar"==e||"line"==e||"area"==e||"lineWithArea"==e||"combo"==e||"stock"==e||"boxPlot"==e},z.isScatterBubble=function(t){var e=t.getType();return"scatter"==e||"bubble"==e},z.isLineArea=function(t){var e=t.getType();return"line"==e||"area"==e||"lineWithArea"==e},z.isScrollSupported=function(t){return!(z.isPie(t)||z.isFunnel(t)||z.isPolar(t)||z.isPyramid(t))},z.isOverviewSupported=function(t){return z.isBLAC(t)&&z.isVertical(t)},z.isHorizScrollbarSupported=function(t){var e=F.getZoomDirection(t);return!z.isPolar(t)&&(z.isBLAC(t)&&z.isVertical(t)||z.isScatterBubble(t)&&"y"!=e)},z.isVertScrollbarSupported=function(t){var e=F.getZoomDirection(t);return!z.isPolar(t)&&(z.isBLAC(t)&&z.isHorizontal(t)||z.isScatterBubble(t)&&"x"!=e)},z.hasAxes=function(t){return!("pie"==t.getType()||"funnel"==t.getType()||"pyramid"==t.getType())},z.hasY2DataOnly=function(t){return!!z.isDualY(t)&&k.getY2SeriesCount(t,null,!0)==k.getSeriesCount(t)},z.hasY2Data=function(t,e){return!!z.isDualY(t)&&k.getY2SeriesCount(t,null,!0)>0},z.hasY2BarData=function(t){return z.hasY2Data(t,"bar")},z.hasBarSeries=function(t){return z._hasSeriesType(t,"bar")},z.hasLineSeries=function(t){return z._hasSeriesType(t,"line")},z.hasAreaSeries=function(t){return z._hasSeriesType(t,"area")},z.hasLineWithAreaSeries=function(t){return z._hasSeriesType(t,"lineWithArea")},z.hasCandlestickSeries=function(t){return z._hasSeriesType(t,"candlestick")},z.hasBoxPlotSeries=function(t){return z._hasSeriesType(t,"boxPlot")},z._hasSeriesType=function(t,e){if(z.isBLAC(t))for(var i=k.getSeriesCount(t),n=0;n<i;n++)if(V.isSeriesRendered(t,n)&&V.getSeriesType(t,n)==e)return!0;return!1},z.hasCenteredSeries=function(t){if(!z.isBLAC(t))return!1;for(var e=k.getSeriesCount(t),i=0;i<e;i++)if(V.isSeriesRendered(t,i)&&"bar"!=V.getSeriesType(t,i)){var n=V.getLineType(t,i);if("centeredSegmented"==n||"centeredStepped"==n)return!0}return!1},z.hasUncenteredSeries=function(t){if(!z.isBLAC(t))return!1;for(var e=k.getSeriesCount(t),i=0;i<e;i++)if(V.isSeriesRendered(t,i)&&"bar"!=V.getSeriesType(t,i)){var n=V.getLineType(t,i);if("segmented"==n||"stepped"==n)return!0}return!1},z.isStandalonePlotArea=function(t){var e=t.getOptions();return!Y.areTitlesRendered(t)&&("off"==e.legend.rendered&&(!H.isAxisRendered(t,"x")&&(!H.isAxisRendered(t,"y")&&!H.isAxisRendered(t,"y2"))))},z.isStandaloneXAxis=function(t){var e=t.getOptions();return!Y.areTitlesRendered(t)&&("off"==e.legend.rendered&&("off"==e.plotArea.rendered&&(!H.isAxisRendered(t,"y")&&!H.isAxisRendered(t,"y2"))))},z.isStandaloneYAxis=function(t){var e=t.getOptions();return!Y.areTitlesRendered(t)&&("off"==e.legend.rendered&&(!H.isAxisRendered(t,"x")&&("off"==e.plotArea.rendered&&!H.isAxisRendered(t,"y2"))))},z.isStandaloneY2Axis=function(t){var e=t.getOptions();return!Y.areTitlesRendered(t)&&("off"==e.legend.rendered&&(!H.isAxisRendered(t,"x")&&(!H.isAxisRendered(t,"y")&&"off"==e.plotArea.rendered)))};var K=new Object;t.Obj.createSubclass(K,t.Obj),K._MIN_BUBBLE_SIZE=6,K._MAX_BUBBLE_SIZE_RATIO=.5,K.calcBubbleSizes=function(e,i){for(var n=k.getMinMaxValue(e,"z"),o=n.min,r=n.max,s=K._MIN_BUBBLE_SIZE,a=K._MAX_BUBBLE_SIZE_RATIO*Math.min(i.w,i.h),l=k.getSeriesCount(e),h="withoutRescale"==F.getHideAndShowBehavior(e),u=0;u<l;u++)if(h||V.isSeriesRendered(e,u))for(var d=k.getSeriesItem(e,u),c=d.items?d.items.length:0,p=0;p<c;p++){var _=d.items[p];if(_){var g=t.LayoutUtils.getBubbleSize(_.z,o,r,s,a);_.markerSize=g}}var m,f;z.isPolar(e)?(m=1/0,f=e.getRadius()):(m=i.w-2.4*H.getTickLabelHeight(e,"y"),f=i.h-1.6*H.getTickLabelHeight(e,"x")),m-=.5*a,f-=.5*a;var y=e.getCache(),v=K._getAxisValueRange(e,"x");y.putToCache("_xAxisBubbleRatio",v/m);var S=K._getAxisValueRange(e,"y");y.putToCache("_yAxisBubbleRatio",S/f)},K.getBubbleAxisRadius=function(t,e,i){if(!i)return 0;var n="x"==e?"_xAxisBubbleRatio":"_yAxisBubbleRatio",o=t.getCache().getFromCache(n);return i/2*o},K._getAxisValueRange=function(e,i){var n=e.getOptions()[i+"Axis"],o=H.isLog(e,i),r=!o&&"zero"==H.getBaselineScaling(e,i),s=k.getMinMaxValue(e,i,!0),a=n.min;null==a&&(a=r?Math.min(0,s.min):s.min);var l=n.max;return null==l&&(l=r?Math.max(0,s.max):s.max),o&&l>0&&a>0?l==a?6:t.Math.log10(l/a):l==a?60:l-a},K.sortMarkers=function(t){t.sort(K._compareSize)},K.sortMarkerInfos=function(t){t.sort(K._compareInfoSize);
},K._compareSize=function(t,e){return e.getSize()-t.getSize()},K._compareInfoSize=function(t,e){return e.size-t.size},K.checkPixelMap=function(t,e,i,n){var o=n/2,r=Math.max(Math.floor(e-o),0),s=Math.max(Math.floor(i-o),0),a=Math.max(Math.ceil(e+o),0),l=Math.max(Math.ceil(i+o),0);return t.isObscured(r,s,a,l)},K.updatePixelMap=function(t,e,i,n,o){var r=.4*n,s=Math.max(Math.round(e-r),0),a=Math.max(Math.round(e+r),0),l=Math.max(Math.round(i-r),0),h=Math.max(Math.round(i+r),0);t.obscure(s,l,a,h,o)};var Z=new Object;t.Obj.createSubclass(Z,t.Obj),Z.OTHER_SLICE_SERIES_ID="_dvtOther",Z.getSliceId=function(t,e){var i=k.getDataItem(t,e,0),n=i?i.id:null,o=k.getSeries(t,e),r=k.getGroup(t,0);return new s(n,o,r)},Z.getOtherSliceId=function(t){var e=k.getGroup(t,0);return new s(null,Z.OTHER_SLICE_SERIES_ID,e)},Z.getRenderedSeriesIndices=function(t){return Z._getSeriesIndicesArrays(t).rendered},Z.hasOtherSeries=function(t){return Z._getSeriesIndicesArrays(t).other.length>0},Z.getOtherValue=function(t){for(var e=Z._getSeriesIndicesArrays(t).other,i=0,n=0;n<e.length;n++){var o=e[n];if(V.isSeriesRendered(t,o)){var r=k.getValue(t,o,0);r>0&&(i+=r)}}return i},Z.getOtherSliceIds=function(t){for(var e=Z._getSeriesIndicesArrays(t).other,i=[],n=0;n<e.length;n++){var o=e[n];i.push(Z.getSliceId(t,o))}return i},Z.isOtherSliceSelected=function(t,e){for(var i=Z.getOtherSliceIds(t),n=0;n<i.length;n++){for(var o=i[n],r=!1,s=0;s<e.length;s++)if(e[s].id&&o.getId()===e[s].id||o.getSeries()===e[s].series&&o.getGroup()===e[s].group){r=!0;break}if(!r)return!1}return!0},Z._getSeriesIndicesArrays=function(t){for(var e=[],i=[],n=k.getSeriesCount(t),o=t.getOptions(),r=o.otherThreshold*Z.getTotalValue(t),s=0;s<n;s++){var a=k.getValue(t,s,0);r>0&&a<r?i.push(s):e.push(s)}return"ascending"==o.sorting?e.sort(function(e,i){return k.getValue(t,e,0)-k.getValue(t,i,0)}):"on"!=o.sorting&&"descending"!=o.sorting||e.sort(function(e,i){return k.getValue(t,i,0)-k.getValue(t,e,0)}),{rendered:e,other:i}},Z.getTotalValue=function(t){for(var e=k.getSeriesCount(t),i=0,n=0;n<e;n++){var o=k.getValue(t,n,0);o>0&&(i+=o)}return i},Z.getSliceExplode=function(t,e){var i=k.getSeriesItem(t,e);return i&&i.pieSliceExplode?i.pieSliceExplode:0},Z.getOtherSliceShowPopupBehaviors=function(t){var e=Z.getOtherSliceIds(t);if(e&&e.length>=1){var i=e[0],n=k.getSeriesIndex(t,i.getSeries()),o=k.getDataItem(t,n,0)._id;return t.getShowPopupBehaviors(o)}},Z.getSliceBySeriesIndex=function(t,e){for(var i=t.pieChart.__getSlices(),n=0;n<i.length;n++)if(i[n].getSeriesIndex()==e)return i[n];return null};var X=function(){};t.Obj.createSubclass(X,t.Obj),X.TWOD="2D",X.THREED="3D",X.CRUST="CRUST",X.SIDE="SIDE",X.BORDER="BORDER",X.SURFACE_CRUST=0,X.SURFACE_LEFT=1,X.SURFACE_RIGHT=2,X.SURFACE_TOP=3,X.reflectAngleOverYAxis=function(e,i,n,o,r){var s=t.Math.degreesToRads(360-e),a=Math.cos(s),l=Math.sin(s);return{x:i+a*o,y:n+l*r}},X.getGradientColors=function(e,i,n){if(n&&n!=t.CSSStyle.SKIN_SKYROS){if(i==X.TWOD||i==X.THREED)return[t.ColorUtils.adjustHSL(e,0,-.04,-.05),t.ColorUtils.adjustHSL(e,0,-.09,.04)];if(i==X.CRUST)return[t.ColorUtils.adjustHSL(e,0,-.04,-.05),t.ColorUtils.adjustHSL(e,0,0,-.14)];if(i==X.SIDE)return[t.ColorUtils.adjustHSL(e,0,-.1,.06),t.ColorUtils.adjustHSL(e,0,-.04,-.05)]}else{if(i==X.TWOD){var o=[];return o[0]=t.ColorUtils.getRGB(t.ColorUtils.getBrighter(e,.1)),o[1]=o[0],o[2]=t.ColorUtils.getRGB(t.ColorUtils.getDarker(e,.1)),o}if(i==X.BORDER)return["#FFFFFF","#000000","#000000"];var r=t.ColorUtils.getRGB(t.ColorUtils.getDarker(e,.12)),s=t.ColorUtils.getRGB(t.ColorUtils.getBrighter(e,.05)),a=t.ColorUtils.getRGB(t.ColorUtils.getBrighter(e,.15)),l=t.ColorUtils.getRGB(t.ColorUtils.getBrighter(e,.35));if(i==X.CRUST)return[r,a,l,r];if("SIDE"==i)return[r,l];if("3D"==i)return[l,a,r,s,l]}},X.getGradientAlphas=function(t,e){var i=null==t||isNaN(t)||0==t?1:t;return e==X.TWOD?[i,i,i]:e==X.BORDER?[i/1.59375,i/5.3125,i/(255/96)]:e==X.THREED?[i,i,i,i,i]:e==X.CRUST?[i,i,i,i]:e==X.SIDE?[i,i]:void 0},X.getGradientRatios=function(e,i){return i&&i!=t.CSSStyle.SKIN_SKYROS?[0,1]:e==X.TWOD?[.2,.5,1]:e==X.BORDER?[0,.5,1]:e==X.THREED?[0,.29,.55,.84,1]:e==X.CRUST?[0,.43,.91,1]:e==X.SIDE?[0,1]:void 0},X.createTopSurface=function(e,i){var n=e.getPieChart(),o=n.getCtx(),r=e.getCenter(),s=e.getInnerRadius(),a=n.is3D()||e.getSliceGaps()>Math.sin(t.Math.degreesToRads(e.getAngleExtent()))*e._radiusX+1?null:e.getSliceGaps(),l=new h(o,r.x,r.y,e._radiusX,e._radiusY,e.getAngleStart(),e.getAngleExtent(),a,s),u=V.getSelectedInnerColor(n.chart),d=V.getSelectedOuterColor(n.chart),c=new t.SolidStroke(e.getStrokeColor(),null,e.getBorderWidth()),p=e.getSeriesIndex(),_=V.getClassName(n.chart,p,0),g=V.getStyle(n.chart,p,0);l.setStyleProperties(i,c,e.getFillColor(),u,d,_,g);var m=[l];if(!e.getStrokeColor()&&n.getSkin()==t.CSSStyle.SKIN_SKYROS&&n.is3D()&&e.getDepth()>0&&"gradient"==V.getSeriesEffect(n.chart)&&(e.getAngleStart()>=180||e.getAngleStart()+e.getAngleExtent()>=180||360==e.getAngleExtent())){var f=X._createGradientPieBorder(e,i);f.setTranslate(e.__getExplodeOffsetX(),e.__getExplodeOffsetY()),m.push(f)}return X.associate(e,m),m},X.associate=function(t,e){if(e)for(var i=0;i<e.length;i++)t.getPieChart().chart.getEventManager().associate(e[i],t)},X._createGradientPieBorder=function(e,i){var n=X.BORDER,o=X.getGradientColors(null,n),r=X.getGradientAlphas(null,n),s=X.getGradientRatios(n),a=i.getBounds(),l=120,h=new t.LinearGradientStroke(l,o,r,s,a);h.setWidth(1);var u=e.getAngleStart(),d=e.getAngleExtent(),c=u<180?180-u:0,p=c>0?180:u,_=d-c;p+_>360&&(_=360-p);var g=e.getPieChart(),m=e.getCenter(),f=new t.Arc(g.getCtx(),m.x,m.y,g.getRadiusX(),g.getRadiusY(),p,_,t.Arc.OPEN);return f.setStroke(h),f},X.createLateralSurface=function(e,i,n){if(0==e.getAngleExtent())return[];var o=t.ColorUtils.getAlpha(e.getFillColor()),r=[];if(o>0)if(i==X.SURFACE_LEFT||i==X.SURFACE_RIGHT)r.push(X._generateLateralShape(e,i,null,n));else if(i==X.SURFACE_CRUST)for(var s=X._createCrustPathCommands(e),a=s.length,l=0;l<a;l++)r.push(X._generateLateralShape(e,i,s[l],n));return X.associate(e,r),r},X.generateLateralGradientFill=function(e,i){var n=e.getPieChart(),o=n.getSkin(),r=i==X.CRUST?e.getDepth():0,s=o==t.CSSStyle.SKIN_SKYROS?0:270,a=X.getGradientColors(t.ColorUtils.getRGB(e.getFillColor()),i,o),l=X.getGradientAlphas(t.ColorUtils.getAlpha(e.getFillColor()),i),h=X.getGradientRatios(i,o),u=null;return o==t.CSSStyle.SKIN_SKYROS&&(u=[Math.floor(e.getCenter().x-n.getRadiusX()),Math.floor(e.getCenter().y-n.getRadiusY())+r,Math.ceil(2*n.getRadiusX()),Math.ceil(2*n.getRadiusY())]),new t.LinearGradientFill(s,a,l,h,u)},X._generateLateralShape=function(e,i,n,o){var r=e.getPieChart(),s=r.getCtx();if(i==X.SURFACE_LEFT||i==X.SURFACE_RIGHT){for(var a=e.getAngleStart(),l=e.getAngleExtent(),h=e.getCenter().x,u=e.getCenter().y,d=e._radiusX,c=e._radiusY,p=e.getDepth(),_=i==X.SURFACE_LEFT?X.reflectAngleOverYAxis(a+l,h,u,d,c):X.reflectAngleOverYAxis(a,h,u,d,c),g=X._generateInnerPoints(h,u,_.x,_.y,p),m=[],f=0;f<g.length;f++)m.push(g[f].x,g[f].y);var y=new t.Polygon(s,m);return y.setFill(o),e.getStrokeColor()&&y.setSolidStroke(e.getStrokeColor()),y}if(n){var v=new t.Path(s,null);return v.setCmds(n),v.setTranslate(e.__getExplodeOffsetX(),e.__getExplodeOffsetY()),v.setFill(o),e.getStrokeColor()&&v.setSolidStroke(e.getStrokeColor()),v}return null},X._createCrustPathCommands=function(t){var e=t.getAngleStart(),i=t.getAngleExtent(),n=e+i,o=t.getCenter().x,r=t.getCenter().y,s=t._radiusX,a=t._radiusY,l=t.getDepth(),h=[];return e<180&&n>360?(h.push(X._makeOuterPath(o,r,s,a,l,e,180-e)),h.push(X._makeOuterPath(o,r,s,a,l,360,n-360)),h.push(X._makeOuterPath(o,r,s,a,l,180,180))):n>360?(h.push(X._makeOuterPath(o,r,s,a,l,e,360-e)),h.push(X._makeOuterPath(o,r,s,a,l,360,n-360))):e<180&&n>180?(h.push(X._makeOuterPath(o,r,s,a,l,e,180-e)),h.push(X._makeOuterPath(o,r,s,a,l,180,n-180))):h.push(X._makeOuterPath(o,r,s,a,l,e,i)),h},X._makeOuterPath=function(e,i,n,o,r,s,a){var l=t.Math.degreesToRads(a),h=-(t.Math.degreesToRads(s)+l),u=X.reflectAngleOverYAxis(s,e,i,n,o),d=e+Math.cos(h)*n,c=i+Math.sin(h)*o,p=t.PathUtils.moveTo(u.x,u.y);return p+=t.PathUtils.arcTo(n,o,l,0,d,c),p+=t.PathUtils.lineTo(d,c+r),p+=t.PathUtils.arcTo(n,o,l,1,u.x,u.y+r),p+=t.PathUtils.lineTo(u.x,u.y)},X._generateInnerPoints=function(t,e,i,n,o){var r=[];return r.push({x:t,y:e}),r.push({x:i,y:n}),r.push({x:i,y:n+o}),r.push({x:t,y:e+o}),r};var q=function(){this._init()};t.Obj.createSubclass(q,t.Obj),q.prototype._init=function(){this._sliceLabel=null,this._slice=null,this._angle=-1,this._position=-1,this._width=-1,this._height=-1,this._x=-1,this._y=-1,this._initialNumLines=-1,this._hasFeeler=!1,this._maxY=-1,this._minY=-1},q.prototype.getAngle=function(){return this._angle},q.prototype.setAngle=function(t){this._angle=t},q.prototype.getHeight=function(){return this._height},q.prototype.setHeight=function(t){this._height=t},q.prototype.getInitialNumLines=function(){return this._initialNumLines},q.prototype.setInitialNumLines=function(t){this._initialNumLines=t},q.prototype.getMaxY=function(){return this._maxY},q.prototype.setMaxY=function(t){this._maxY=t},q.prototype.getMinY=function(){return this._minY},q.prototype.setMinY=function(t){this._minY=t},q.prototype.boundY=function(t){return this._minY<=this._maxY&&(t=Math.max(t,this._minY),t=Math.min(t,this._maxY)),t},q.prototype.hasFeeler=function(){return this._hasFeeler},q.prototype.setHasFeeler=function(t){this._hasFeeler=t},q.prototype.getPosition=function(){return this._position},q.prototype.setPosition=function(t){this._position=t},q.prototype.getSlice=function(){return this._slice},q.prototype.setSlice=function(t){this._slice=t},q.prototype.getSliceLabel=function(){return this._sliceLabel},q.prototype.setSliceLabel=function(t){this._sliceLabel=t},q.prototype.getWidth=function(){return this._width},q.prototype.setWidth=function(t){this._width=t},q.prototype.getX=function(){return this._x},q.prototype.setX=function(t){this._x=t},q.prototype.getY=function(){return this._y},q.prototype.setY=function(t){this._y=t};var Q=function(){};t.Obj.createSubclass(Q,t.Obj),Q._MAX_LINES_PER_LABEL=3,Q._COLLISION_MARGIN=1,Q._LEFT_SIDE_LABELS=1,Q._RIGHT_SIDE_LABELS=2,Q._OUTSIDE_LABEL_DISTANCE=1.04,Q._FEELER_RAD_MINSIZE=.1,Q._FEELER_HORIZ_MINSIZE=.1,Q._LABEL_TO_FEELER_OFFSET=.5,Q._LABEL_TO_FEELER_DISTANCE=3,Q._NO_COLLISION=0,Q._HALF_COLLISION=1,Q._ALL_COLLISION=2,Q.layoutLabelsAndFeelers=function(t){var e=t.getLabelPosition();Q._layoutInsideLabels(t,"auto"==e),Q._layoutOutsideLabelsAndFeelers(t)},Q._layoutInsideLabels=function(e,i){for(var n=e.__getSlices(),o=0;o<n.length;o++){var r=n[o],s=e.getSeriesLabelPosition(r.getSeriesIndex());if("none"!=s&&"outsideSlice"!=s&&!Q._skipSliceLabel(e,r)){var a=r.getAngleStart()+r.getAngleExtent()/2,l=r.getInnerRadius(),h=r.getCenter(),u=0,d=0,c=Q._createLabel(r,!0);if(1==n.length)u=h.x,d=h.y;else{var p=Math.max(.45,.65-.45*l/Math.max(r.getRadiusY(),.001)),_=X.reflectAngleOverYAxis(a,h.x,h.y,l+(r.getRadiusX()-l)*p,l+(r.getRadiusY()-l)*p);u=_.x,d=_.y}c.setX(u),c.setY(d),c.alignMiddle(),c.alignCenter();for(var g=t.TextUtils.guessTextDimensions(c),m=u,f=u,y=d-g.h/2,v=d+g.h/2;r.contains(m,y)&&r.contains(m,v);)m--;for(;r.contains(f,y)&&r.contains(f,v);)f++;m=Math.ceil(m+3),f=Math.floor(f-3);var S=2*Math.min(u-m,f-u);if(S<g.w&&(c.setX((m+f)/2),S=f-m),i&&"center"!=s){var C=c.getDimensions().w;C<S?r.setSliceLabel(c):r.setSliceLabel(null)}else{var E=e.getCtx().getStage(),b=Q._isTextLabel(e,r)?null:c.getTextString().length;t.TextUtils.fitText(c,S,g.h,E,b)&&(E.removeChild(c),r.setSliceLabel(c))}null!=r.getSliceLabel()&&r.setNoOutsideFeeler()}}},Q._layoutOutsideLabelsAndFeelers=function(t){var e=[],i=[],n=Q._generateInitialLayout(t);e=n[0],i=n[1];var o=Q._refineInitialLayout(t,e,Q._LEFT_SIDE_LABELS),r=Q._refineInitialLayout(t,i,Q._RIGHT_SIDE_LABELS);o==Q._HALF_COLLISION&&r!=Q._NO_COLLISION&&Q._columnLabels(t,e,!0,!0,!0),o!=Q._NO_COLLISION&&r==Q._HALF_COLLISION&&Q._columnLabels(t,i,!1,!0,!0),Q._setLabelsAndFeelers(t,e,Q._LEFT_SIDE_LABELS),Q._setLabelsAndFeelers(t,i,Q._RIGHT_SIDE_LABELS)},Q._createLabel=function(e,i){var n=e.getPieChart(),o=n.getCtx(),r=i?new t.OutputText(o):new t.MultilineText(o),s=n.getOptions().styleDefaults,a=[s.dataLabelStyle],l=k.getDataItem(n.chart,e.getSeriesIndex(),0);l&&a.push(new t.CSSStyle(l.labelStyle));var h=t.CSSStyle.mergeStyles(a),u=null!=h.getStyle("color");if(!i||u&&!t.Agent.isHighContrast())u||h.setStyle("color",s._defaultSliceLabelColor);else{var d=t.ColorUtils.getContrastingTextColor(e.getFillColor());h.setStyle("color",d)}r.setCSSStyle(h);var c=Q.generateSliceLabelString(e,s.sliceLabelType);return r.setTextString(c),e.setSliceLabelString(c),r},Q.createPieCenter=function(e){var i=e.getOptions(),n=e.getCtx(),o=Q.getPieCenterOptions(i),r=o.label,s=o.renderer,a=e.getLabelPosition(),l=i.tooltip,h=l?l.renderer:null,u=e.getCenter(),d=e.getInnerRadius();if(r||s){var c=e.getRadiusX();d=d>0?d:"outsideSlice"==a?.9*c:.5*c;var p=d*Math.sqrt(2);if(r){var _=new t.MultilineText(n),g=o.labelStyle;if(_.setCSSStyle(g),"number"==typeof r&&(r=W.formatValue(n,o,r,r,r,0)),_.setTextString(r),t.TextUtils.fitText(_,p,p,e)){var m=_.getDimensions();_.setY(u.y-m.h/2),_.setX(u.x),_.alignCenter(),_.isTruncated()&&!h&&e.chart.getEventManager().associate(_,new t.SimpleObjPeer(_.getTextString())),e.addChild(_)}}if(h){var f=new t.Circle(n,u.x,u.y,d);f.setInvisibleFill(),e.addChild(f);var y=e.getCtx().getTooltipManager();e.chart.getEventManager().associate(f,new t.CustomDatatipPeer(y,h,"#4b4b4b",{component:i._widgetConstructor,label:r}))}if(s){var v={outerBounds:{x:u.x-d,y:u.y-d,width:2*d,height:2*d},innerBounds:{x:u.x-p/2,y:u.y-p/2,width:p,height:p},label:r,component:i._widgetConstructor},S=n.getContainer(),C=e.chart.pieCenterDiv;C&&S.removeChild(C);var E=s(v);if(!E)return;var b=n.createOverlayDiv();b.appendChild(E),e.chart.pieCenterDiv=b,S.appendChild(b);var T=n.getOverlayAttachedCallback();T&&T(b)}}},Q.generateSliceLabelString=function(t,e){var i,n=Q.getDefaultSliceLabelString(t,e),o=t.getPieChart().getOptions().dataLabel;if(o){var r=k.getDataContext(t._chart,t.getSeriesIndex(),0);if(r.label=n,i=o(r),"number"==typeof i){var s=W.getValueFormat(t.getPieChart().chart,"label");i=W.formatValue(t.getPieChart().getCtx(),s,i)}}return i?i:n},Q.getDefaultSliceLabelString=function(t,e){var i=t.getPieChart(),n=t.getCustomLabel(),o=W.getValueFormat(i.chart,"label");if(null!=n)return"number"==typeof n?W.formatValue(i.getCtx(),o,n):n;var r=t.getValue(),s=i.getTotalValue(),a=0==s?0:r/s,l=a<.01?3:a<.1?2:a<1?1:0;2*i.getRadiusX()<150&&(l=Math.max(l-1,0));var h=i.getCtx().getNumberConverter({style:"percent",maximumFractionDigits:l,minimumFractionDigits:l}),u="";h&&h.getAsString?u=h.getAsString(a):h&&h.format?u=h.format(a):(a*=100,u=W.formatValue(i.getCtx(),{},a,null,null,100==a?1:Math.pow(10,-1*l))+"%");var d=W.formatValue(i.getCtx(),o,r),c=t.getSeriesLabel();return"percent"==e?u:"number"==e?d:"text"==e?c:"textAndPercent"==e?c+", "+u:null},Q._refineInitialLayout=function(t,e,i){if(e&&e.length>0){for(var n,o=t.__getFrame().y,r=!1,s=!1,a=!1,l=0,h=!1,u=h,d=!1,c=i==Q._LEFT_SIDE_LABELS,p=0;p<e.length;p++)n=e[p],u=h,n.getPosition()>90&&(h=!0),l=n.getY()+n.getHeight(),d=o-n.getY()>Q._COLLISION_MARGIN,d&&(h?h&&!u?s=!0:a=!0:r=!0),l>o&&(o=l);return r&&a||s?(Q._columnLabels(t,e,c,!0,!0),Q._ALL_COLLISION):r?(Q._columnLabels(t,e,c,!0,!1),Q._HALF_COLLISION):a?(Q._columnLabels(t,e,c,!1,!0),Q._HALF_COLLISION):Q._NO_COLLISION}},Q._setLabelsAndFeelers=function(e,i,n){if(!(null==i||i.length<=0)){var o,r,s,a,l,h=n==Q._LEFT_SIDE_LABELS,u=e.__getFrame(),d=1/0;for(o=0;o<i.length;o++)if(a=i[o],r=a.getSlice(),a.hasFeeler()){l=Q._calculateFeeler(a,r,h);var c=t.TextUtils.getTextStringHeight(e.getCtx(),a.getSliceLabel().getCSSStyle()),p=a.getWidth(),_=Q._isTextLabel(e,r)?Math.min(2*c,p):p,g=Q.getMaxLabelWidth(e,a.getX(),h);if(g+l<_||0==a.getWidth()){a.setSliceLabel(null),r.setNoOutsideFeeler();continue}d=Math.min(d,l)}else r.setNoOutsideFeeler();for(o=0;o<i.length;o++)a=i[o],r=a.getSlice(),s=a.getSliceLabel(),s&&(a.hasFeeler()&&(h?a.setX(a.getX()+d):a.setX(a.getX()-d),Q._calculateFeeler(a,r,h)),s.setY(a.getY()),s.setX(a.getX()),a.getY()<u.y||a.getY()+a.getHeight()>u.y+u.h?(r.setSliceLabel(null),r.setNoOutsideFeeler()):(Q._truncateSliceLabel(e,r,a,h),0==a.getWidth()||0==a.getHeight()?(r.setSliceLabel(null),r.setNoOutsideFeeler()):r.setSliceLabel(s)))}},Q._calculateFeeler=function(e,i,n){var o,r=e.getX(),s=e.getY()+e.getHeight()*Q._LABEL_TO_FEELER_OFFSET,a=Q._FEELER_HORIZ_MINSIZE*i.getRadiusX();n?(r+=Q._LABEL_TO_FEELER_DISTANCE,o=r+a):(r-=Q._LABEL_TO_FEELER_DISTANCE,o=r-a);var l={x:0,y:0},h={x:o,y:s},u={x:r,y:s},d=e.getAngle(),c=Q._adjustForDepth(d,i.getDepth());l=X.reflectAngleOverYAxis(d,i.getCenter().x,i.getCenter().y+c,i.getRadiusX(),i.getRadiusY());var p=t.Math.degreesToRads(e.getPosition()),_=Math.abs(Math.atan2(h.x-l.x,l.y-h.y)),g=(l.y-h.y)*Math.tan(p);return(p>Math.PI/2&&_>Math.PI/2&&_<p||p<Math.PI/2&&_<Math.PI/2&&_>p)&&(n?h.x=l.x-g:h.x=l.x+g),i.setOutsideFeelerPoints(l,h,u),Math.abs(u.x-h.x)-a},Q._adjustForDepth=function(t,e){var i=0,n=189,o=351;return t>n&&t<o&&(i=e),i},Q._getMiddleLabel=function(t){for(var e=91,i=-1,n=0;n<t.length;n++){var o=t[n].getPosition();Math.abs(o-90)<e&&(e=Math.abs(o-90),i=n)}return i},Q._setOptimalLabelPosition=function(e,i,n,o){i.setX(n);var r=e.getRadiusY()*(1+Q._FEELER_RAD_MINSIZE),s=t.Math.degreesToRads(i.getPosition()),a=r*Math.cos(s),l=Q._adjustForDepth(i.getAngle(),e.getDepth()),h=e.getCenter().y-a-i.getHeight()*Q._LABEL_TO_FEELER_OFFSET+l;i.setY(i.boundY(h))},Q._getRadFeelerAngle=function(t,e,i){var n=t.getSlice(),o=n.getCenter(),r=t.getAngle(),s=Q._adjustForDepth(r,n.getDepth()),a=X.reflectAngleOverYAxis(r,o.x,o.y+s,n.getRadiusX(),n.getRadiusY());return Math.atan2(Math.abs(e-a.x),a.y-i)},Q._columnLabels=function(e,i,n,o,r){var s,a,l,h,u=e.__getFrame(),d=u.y,c=u.y+u.h,p=0,_=e.getCenter().x,g=e.getRadiusX()*(1+Q._FEELER_RAD_MINSIZE+Q._FEELER_HORIZ_MINSIZE);for(n?(_-=g,h=_+e.getRadiusX()*Q._FEELER_HORIZ_MINSIZE):(_+=g,h=_-e.getRadiusX()*Q._FEELER_HORIZ_MINSIZE),s=0;s<i.length;s++)a=i[s],p=t.Math.degreesToRads(a.getPosition()),l=Q._getRadFeelerAngle(a,h,d),l-p>.45*Math.PI||Q._skipSliceLabel(e,a.getSlice())?(i.splice(s,1),s--):(i[s].setMinY(d),d+=i[s].getHeight());for(s=i.length-1;s>=0;s--)a=i[s],p=t.Math.degreesToRads(a.getPosition()),l=Q._getRadFeelerAngle(a,h,c),p-l>.45*Math.PI||Q._skipSliceLabel(e,a.getSlice())?i.splice(s,1):(c-=i[s].getHeight(),i[s].setMaxY(c));if(0!=i.length){var m=Q._getMiddleLabel(i),f=i[m];o&&!r&&f.getMinY()+f.getHeight()>e.getCenter().y&&(r=!0),r&&!o&&f.getMaxY()<e.getCenter().y&&(o=!0);var y=f.getPosition();(r&&o||y>90&&r||y<=90&&o)&&(Q._setOptimalLabelPosition(e,f,_,n),f.setHasFeeler(!0));var v,S,C=f.getY(),E=f.getY()+f.getHeight();if(o)for(s=m-1;s>=0;s--)a=i[s],S=a.getHeight(),Q._setOptimalLabelPosition(e,a,_,n),a.setHasFeeler(!0),v=a.getY(),v+S<C?C=v:C-=S,a.setY(C);if(r)for(s=m+1;s<i.length;s++)a=i[s],S=a.getHeight(),Q._setOptimalLabelPosition(e,a,_,n),a.setHasFeeler(!0),v=a.getY(),v>E?E=v+S:E+=S,a.setY(E-S)}},Q._truncateSliceLabel=function(t,e,i,n){var o,r=i.getSliceLabel(),s=r.getCSSStyle(),a=0,l=t.getNumChildren(),h=!1;t.contains(r)||(t.addChild(r),h=!0),r.setCSSStyle(s);var u=e.getSliceLabelString();return r.setTextString(u),h&&t.removeChildAt(l),a=Q.getMaxLabelWidth(t,i.getX(),n),o=Q._getTextDimension(t,e,r,a,i.getInitialNumLines()),i.setWidth(o.x),i.getHeight()!=o.y&&(i.setHeight(o.y),!0)},Q._generateInitialLayout=function(t){for(var e=new Array(2),i=[],n=[],o=t.__getSlices(),r=t.__getFrame(),s=0;s<o.length;s++){var a=o[s],l=t.getSeriesLabelPosition(a.getSeriesIndex());if(null==a.getSliceLabel()&&"none"!=l&&"center"!=l&&!Q._skipSliceLabel(t,a)){var h=Q._createLabel(a,!1),u=a.getAngleStart()+a.getAngleExtent()/2;u>360&&(u-=360),u<0&&(u+=360);var d=X.reflectAngleOverYAxis(u,t.getCenter().x,t.getCenter().y,t.getRadiusX()*Q._OUTSIDE_LABEL_DISTANCE,t.getRadiusY()*Q._OUTSIDE_LABEL_DISTANCE),c=u>=90&&u<270,p=Q.getMaxLabelWidth(t,d.x,c),_=Q._getTextDimension(t,a,h,p,Q._MAX_LINES_PER_LABEL),g=15;u<180-g&&u>g?d.y-=1*_.y:u<g||u>360-g?(d.y-=.5*_.y,d.x+=.2*_.y):u>180-g&&u<180+g&&(d.y-=.5*_.y,d.x-=.2*_.y);var m=Q._adjustForDepth(u,t.getDepth());if(d.y+=m,1==o.length&&(d.x-=_.x/2),!(d.y<r.y||d.y+_.y>r.y+r.h)){var f;u>=90&&u<270?(h.alignRight(),f=u-90,Q._createLabelInfo(a,h,u,f,_,d,i)):(f=u<=90?Math.abs(90-u):180-(u-270),Q._createLabelInfo(a,h,u,f,_,d,n))}}}return e[0]=i,e[1]=n,e},Q._createLabelInfo=function(t,e,i,n,o,r,s){for(var a,l=-1,h=e,u=0;u<s.length;u++)if(a=s[u],a.getPosition()>n){l=u;break}l==-1&&(l=s.length),a=new q,a.setPosition(n),a.setAngle(i),a.setSliceLabel(h),a.setSlice(t),a.setWidth(o.x),a.setHeight(o.y),a.setX(r.x),a.setY(r.y),a.setInitialNumLines(h.getLineCount()),s.splice(l,0,a)},Q._getTextDimension=function(e,i,n,o,r){n.setMaxLines(r);var s=Q._isTextLabel(e,i)?null:n.getTextString().length;if(t.TextUtils.fitText(n,o,1/0,e,s)){e.addChild(n);var a=n.getDimensions();return e.removeChild(n),{x:a.w,y:a.h}}return{x:0,y:0}},Q._isTextLabel=function(t,e){var i=e.getCustomLabel(),n=null!=t.getOptions().dataLabel;return t.getOptions().styleDefaults.sliceLabelType.indexOf("text")!=-1||null!=i&&"number"!=typeof i||n},Q.getMaxLabelWidth=function(t,e,i){var n=t.__getFrame();return i?e-n.x:n.x+n.w-e},Q.getPieCenterOptions=function(e){var i=t.JsonUtils.clone(e.pieCenter),n=e.pieCenterLabel;if(n){var o=n.style,r=n.text;r&&(i.label=r),o&&(i.labelStyle=new t.CSSStyle(o))}return i},Q._skipSliceLabel=function(t,e){return e.getAngleExtent()<3&&k.getSeriesCount(t.chart)>120};var J=new Object;t.Obj.createSubclass(J,t.Obj),J._BUTTON_SIZE=16,J._BUTTON_PADDING=5,J._BUTTON_CORNER_DIST=4,J._BUTTON_OPACITY=.8,J._MOUSE_WHEEL_ZOOM_RATE_SLOW=.05,J._MOUSE_WHEEL_ZOOM_RATE_FAST=.2,J.render=function(t,e,i){if(J._renderBackground(t,e,i),k.hasInvalidData(t))J.renderEmptyText(t,e,i);else{z.isOverview(t)||(t.getOptions()._maxOverflowCoord=i.x+i.w,t.getOptions()._minOverflowCoord=i.x),J._addOuterGaps(t,i);var n=i.clone();J._renderTitles(t,e,i),J._adjustAvailSpace(i),tt.render(t,e,i),J._adjustAvailSpace(i);var o=J._prerenderHorizScrollbar(t,e,i),r=J._prerenderVertScrollbar(t,e,i);J._adjustAvailSpace(i),t.__setAxisSpace(i.clone()),$.render(t,e,i),J._adjustAvailSpace(i),J._positionLegend(t.legend,i),t.__setPlotAreaSpace(i.clone()),J._setEventHandlers(t),J._renderScrollbars(t,o,r),J._updateTitles(t,e,n,i),J._renderPlotArea(t,e,i),z.isPolar(t)&&e.addChild(t.yAxis),J._renderDragButtons(t,e)}},J._setEventHandlers=function(e){var i=e.getOptions(),n=e.getEventManager();if(z.hasAxes(e)&&!z.isOverview(e)){var o,r,s=new t.Rectangle(0,0,e.getWidth(),e.getHeight()),a=e.__getPlotAreaSpace(),l=e.__getAxisSpace(),h=new t.Rectangle(a.x,l.y,a.w,l.h),u=new t.Rectangle(l.x,a.y,l.w,a.h),d=new t.SolidFill(i.styleDefaults.marqueeColor),c=new t.SolidStroke(i.styleDefaults.marqueeBorderColor);if(F.isScrollable(e)){var p=F.isDelayedScroll(e)?J._MOUSE_WHEEL_ZOOM_RATE_FAST:J._MOUSE_WHEEL_ZOOM_RATE_SLOW;if(r=new t.PanZoomHandler(e,a,s,p),r.setPanCursor(i._resources.panCursorUp,i._resources.panCursorDown),n.setPanZoomHandler(r),F.isZoomable(e)){var _=F.getZoomDirection(e);o=z.isHorizontal(e)||"y"==_?new t.MarqueeHandler(e,a,s,d,c,!1,!0,null,u):z.isBLAC(e)||"x"==_?new t.MarqueeHandler(e,a,s,d,c,!0,!1,h,null):new t.MarqueeHandler(e,a,s,d,c,!0,!0,h,u),n.setMarqueeZoomHandler(o)}}"multiple"==i.selectionMode&&(o=new t.MarqueeHandler(e,a,s,d,c,!0,!0,h,u),n.setMarqueeSelectHandler(o))}},J.rerenderAxisAndPlotArea=function(t,e){if(!k.hasInvalidData(t)){var i=t.__getAxisSpace().clone(),n=t.getSelectionHandler();if(n)var o=n.getSelectedIds();var r=t.__cacheChartFocus();t.__cleanUpAxisAndPlotArea(),$.render(t,e,i),J._adjustAvailSpace(i),t.__setPlotAreaSpace(i.clone()),J._renderPlotArea(t,e,i),n&&n.processInitialSelections(o,t.getChartObjPeers()),t.getEventManager().autoToggleZoomButton(),J.positionDragButtons(t),t.highlight(V.getHighlightedCategories(t)),t.__restoreChartFocus(r)}},J._renderBackground=function(e,i,n){var o=new t.Rect(e.getCtx(),n.x,n.y,n.w,n.h);o.setInvisibleFill(),i.addChild(o)},J._addOuterGaps=function(t,e){var i=t.getOptions(),n=a.getGapWidth(t,i.layout.outerGapWidth),o=a.getGapHeight(t,i.layout.outerGapHeight);("none"==i.styleDefaults.padding||z.isStandalonePlotArea(t)||z.isStandaloneXAxis(t)||z.isStandaloneYAxis(t)||z.isStandaloneY2Axis(t))&&(n=Math.min(n,1),o=Math.min(o,1)),e.x+=n,e.w-=2*n,e.y+=o,e.h-=2*o},J._renderTitles=function(e,i,n){var o=e.getOptions();if(o.title.text){var r,s,l=Y.createText(e.getEventManager(),i,o.title.text,o.title.style,n.x,n.y,n.w,n.h),h=null!=o.title.hAlign?o.title.hAlign:o.title.halign,u="plotArea"==h.substring(0,8);if(l?(s=l.getDimensions(),r=s.h,l.setAriaProperty("hidden",null)):(r=0,s=new t.Rectangle(0,0,0,0)),o.subtitle.text){var d=new t.OutputText(e.getCtx(),o.subtitle.text,n.x,n.y);if(d){d.setCSSStyle(o.subtitle.style),i.addChild(d);var c=d.measureDimensions(),p=a.getGapWidth(e,o.layout.titleSubtitleGapWidth),_=s.w+p+c.w;if(_>n.w||u)p=a.getGapHeight(e,o.layout.titleSubtitleGapHeight),d.setY(n.y+r+p),t.TextUtils.fitText(d,n.w,n.h,i)&&(c=d.measureDimensions(),r+=c.h+p,t.Agent.isRightToLeft(e.getCtx())&&(d&&d.setX(n.w-c.w),l&&l.setX(n.w-s.w)));else{var g=s.h-c.h;d.setY(g+n.y),l&&(t.LayoutUtils.align(n,h,l,_),t.Agent.isRightToLeft(e.getCtx())?(d.setX(l.getX()),l&&l.setX(l.getX()+c.w+p)):d.setX(l.getX()+_-c.w))}d.setAriaProperty("hidden",null),e.getEventManager().associate(d,new t.SimpleObjPeer(d.getUntruncatedTextString()))}}else t.LayoutUtils.align(n,h,l,s.w);u&&(e.getCache().putToCache("title",l),e.getCache().putToCache("subtitle",d));var m="on"==o.titleSeparator.rendered?o.layout.titleSeparatorGap:o.layout.titlePlotAreaGap;if(n.y+=r+a.getGapHeight(e,m),n.h-=r+a.getGapHeight(e,m),"on"==o.titleSeparator.rendered){var f=new t.Line(e.getCtx(),n.x,n.y,n.x+n.w,n.y),y=new t.Line(e.getCtx(),n.x,n.y+1,n.x+n.w,n.y+1);f.setSolidStroke(o.titleSeparator.upperColor),y.setSolidStroke(o.titleSeparator.lowerColor),i.addChild(f),i.addChild(y);var v=2+a.getGapHeight(e,o.layout.titlePlotAreaGap);n.y+=v,n.h-=v}}if(o.footnote.text){var S=Y.createText(e.getEventManager(),i,o.footnote.text,o.footnote.style,n.x,0,n.w,n.h),C=null!=o.footnote.hAlign?o.footnote.hAlign:o.footnote.halign,E="plotArea"==C.substring(0,8);if(S){var b=S.getDimensions();S.setY(n.y+n.h-b.h),n.h-=b.h+a.getGapHeight(e,o.layout.footnoteGap),t.LayoutUtils.align(n,C,S,b.w),S.setAriaProperty("hidden",null)}E&&e.getCache().putToCache("footnote",S)}},J._updateTitles=function(t,e,i,n){var o=t.getOptions(),r=null!=o.title.hAlign?o.title.hAlign:o.title.halign,s=null!=o.footnote.hAlign?o.footnote.hAlign:o.footnote.halign,a=o.title.text&&"plotArea"==r.substring(0,8),l=o.footnote.text&&"plotArea"==s.substring(0,8);if(i.x=n.x,i.w=n.w,a){var h,u=t.getCache().getFromCache("title"),d=t.getCache().getFromCache("subtitle"),c=u.getDimensions();J._alignTextToPlotArea(e,i,r,u,c.w),d&&(h=d.getDimensions(),J._alignTextToPlotArea(e,i,r,d,h.w))}if(l){var p=t.getCache().getFromCache("footnote"),_=p.getDimensions();J._alignTextToPlotArea(e,i,s,p,_.w)}},J._alignTextToPlotArea=function(e,i,n,o,r){t.TextUtils.fitText(o,i.w,i.h,e)&&("plotAreaStart"==n?t.LayoutUtils.align(i,"start",o,r):"plotAreaCenter"==n?t.LayoutUtils.align(i,"center",o,r):"plotAreaEnd"==n&&t.LayoutUtils.align(i,"end",o,r))},J._renderPlotArea=function(e,i,n){if(z.hasAxes(e)){var o=new t.Container(e.getCtx());o.setTranslate(n.x,n.y),i.addChild(o),e.setPlotArea(o);var r=new t.Rectangle(0,0,n.w,n.h);et.render(e,o,r)}else if(z.isPie(e)){var s=new T(e,n);s.__getSlices().length>0?(i.addChild(s),e.setPlotArea(s),s.render()):J.renderEmptyText(e,i,n)}else z.isFunnel(e)?it.render(e,i,n):z.isPyramid(e)&&nt.render(e,i,n);n.w=0,n.h=0},J.renderEmptyText=function(e,i,n){var o=e.getOptions();if(k.hasInvalidTimeData(e)&&k.hasData(e))var r=t.Bundle.getTranslation(o,"labelInvalidData",t.Bundle.UTIL_PREFIX,"INVALID_DATA");else r=o.emptyText,r||(r=t.Bundle.getTranslation(o,"labelNoData",t.Bundle.UTIL_PREFIX,"NO_DATA"));t.TextUtils.renderEmptyText(i,r,new t.Rectangle(n.x,n.y,n.w,n.h),e.getEventManager(),o._statusMessageStyle)},J._prerenderHorizScrollbar=function(e,i,n){var o=n.w,r=0;return F.isScrollable(e)&&z.isHorizScrollbarSupported(e)?V.isOverviewRendered(e)?(r=Math.min(V.getOverviewHeight(e),n.h),r>0&&(e.overview=new y(e),i.addChild(e.overview),t.LayoutUtils.position(n,"bottom",e.overview,o,r,10))):(r=e.getOptions().styleDefaults._scrollbarHeight,e.xScrollbar=new t.SimpleScrollbar(e.getCtx(),e.processEvent,e),i.addChild(e.xScrollbar),t.LayoutUtils.position(n,"bottom",e.xScrollbar,o,r,8),e.overview=null):e.overview=null,new t.Dimension(o,r)},J._prerenderVertScrollbar=function(e,i,n){var o=0,r=n.h;if(F.isScrollable(e)&&z.isVertScrollbarSupported(e)){o=e.getOptions().styleDefaults._scrollbarHeight;var s=new t.SimpleScrollbar(e.getCtx(),e.processEvent,e);i.addChild(s),t.LayoutUtils.position(n,t.Agent.isRightToLeft(e.getCtx())?"right":"left",s,o,r,8),z.isHorizontal(e)?e.xScrollbar=s:e.yScrollbar=s}return new t.Dimension(o,r)},J._renderScrollbars=function(e,i,n){var o=e.getOptions(),r={color:o.styleDefaults._scrollbarHandleColor,backgroundColor:o.styleDefaults._scrollbarTrackColor},s=e.__getPlotAreaSpace();if(e.xScrollbar&&(r.min=e.xAxis.getLinearGlobalMin(),r.max=e.xAxis.getLinearGlobalMax(),z.isHorizontal(e)?(r.isHorizontal=!1,r.isReversed=!1,e.xScrollbar.setTranslateY(s.y),e.xScrollbar.render(r,n.w,s.h)):(r.isHorizontal=!0,r.isReversed=t.Agent.isRightToLeft(e.getCtx()),e.xScrollbar.setTranslateX(s.x),e.xScrollbar.render(r,s.w,i.h)),e.xScrollbar.setViewportRange(e.xAxis.getLinearViewportMin(),e.xAxis.getLinearViewportMax())),e.yScrollbar&&(r.min=e.yAxis.getLinearGlobalMin(),r.max=e.yAxis.getLinearGlobalMax(),r.isHorizontal=!1,r.isReversed=!0,e.yScrollbar.setTranslateY(s.y),e.yScrollbar.render(r,n.w,s.h),e.yScrollbar.setViewportRange(e.yAxis.getLinearViewportMin(),e.yAxis.getLinearViewportMax())),e.overview){var a={startTime:e.xAxis.getLinearGlobalMin(),endTime:e.xAxis.getLinearGlobalMax(),viewportStartTime:e.xAxis.getLinearViewportMin(),viewportEndTime:e.xAxis.getLinearViewportMax(),minimumWindowSize:e.xAxis.getInfo().getMinimumExtent(),chart:t.JsonUtils.clone(o)};F.isZoomable(e)||(a.featuresOff="zoom"),a.chart._minOverflowCoord=o._minOverflowCoord-s.x,a.chart._maxOverflowCoord=o._maxOverflowCoord-s.x,e.overview.setTranslateX(s.x),e.overview.render(a,s.w,i.h),e.overview.setViewportRange(e.xAxis.getLinearViewportMin(),e.xAxis.getLinearViewportMax())}},J._positionLegend=function(t,e){if(t){var i=t.getDimensions(),n=t.getOptions().orientation;"vertical"==n&&i.h<=e.h?t.setTranslateY(Math.round(e.y+e.h/2-i.h/2)):"horizontal"==n&&i.w<=e.w&&t.setTranslateX(Math.round(e.x+e.w/2-i.w/2))}},J._renderDragButtons=function(e,n){if(z.hasAxes(e)&&!z.isOverview(e)){var o=e.getOptions(),r=e.getEventManager(),s=o.dragMode;if("user"!=s)return void("pan"==s?r.setDragMode(i.DRAG_MODE_PAN):"zoom"==s?r.setDragMode(i.DRAG_MODE_ZOOM):"select"==s?r.setDragMode(i.DRAG_MODE_SELECT):r.setDragMode(i.DRAG_MODE_OFF));var a=t.Agent.isTouchDevice(),l=F.isScrollable(e);e.dragButtons=new t.Container(e.getCtx());var h,u,d="multiple"==o.selectionMode&&(a||l),c=l&&a,p=l&&!a&&F.isZoomable(e)&&z.isScatterBubble(e);d&&(u=c||p?"end":"solo",r.selectButton=J._createDragButton(e,e.dragButtons,"select",r.onSelectButtonClick,r,u),h=t.Bundle.getTranslation(o,"tooltipSelect",t.Bundle.CHART_PREFIX,"MARQUEE_SELECT"),r.selectButton.setTooltip(h),r.associate(r.selectButton,r.selectButton)),c&&(u=d?"start":"solo",r.panButton=J._createDragButton(e,e.dragButtons,"pan",r.onPanButtonClick,r,u),h=t.Bundle.getTranslation(o,"tooltipPan",t.Bundle.CHART_PREFIX,"PAN"),r.panButton.setTooltip(h),r.associate(r.panButton,r.panButton)),p&&(u=d?"start":"solo",r.zoomButton=J._createDragButton(e,e.dragButtons,"zoom",r.onZoomButtonClick,r,u),h=t.Bundle.getTranslation(o,"tooltipZoom",t.Bundle.CHART_PREFIX,"MARQUEE_ZOOM"),r.zoomButton.setTooltip(h),r.associate(r.zoomButton,r.zoomButton)),J.positionDragButtons(e),r.setDragMode(null),e.dragButtons.getNumChildren()>0&&(e.addChild(e.dragButtons),
a?l&&(r.panButton.setToggled(!0),r.onPanButtonClick(null)):e.hideDragButtons(),e.dragButtons.setCursor("default"))}},J._positionDragButton=function(e,i,n){var o;t.Agent.isRightToLeft(e.getCtx())?(o=n.x+J._BUTTON_PADDING,n.x+=J._BUTTON_SIZE+2*J._BUTTON_PADDING):o=n.x+n.w-J._BUTTON_SIZE-J._BUTTON_PADDING,n.w-=J._BUTTON_SIZE+2*J._BUTTON_PADDING,i.setTranslate(o,n.y+J._BUTTON_PADDING)},J.positionDragButtons=function(t){var e=t.__getPlotAreaSpace().clone();e.x+=J._BUTTON_CORNER_DIST,e.w-=2*J._BUTTON_CORNER_DIST,e.y+=J._BUTTON_CORNER_DIST;var i=t.getEventManager();i.selectButton&&J._positionDragButton(t,i.selectButton,e),i.panButton&&J._positionDragButton(t,i.panButton,e),i.zoomButton&&J._positionDragButton(t,i.zoomButton,e)},J._createDragButtonBackground=function(e,i,n){var o=2,r=2,s=t.Agent.isRightToLeft(e);"start"==i?s?o=0:r=0:"end"==i&&(s?r=0:o=0);var a=o,l=r,h=-J._BUTTON_PADDING,u=J._BUTTON_SIZE+2*J._BUTTON_PADDING,d=t.PathUtils.roundedRectangle(h,h,u,u,a,r,l,o),c=new t.Path(e,d);return t.Agent.getDevicePixelRatio()>1?(c.setSolidStroke(n,J._BUTTON_OPACITY,1),c.setPixelHinting(!0)):c.setSolidStroke(n,J._BUTTON_OPACITY,1),c},J._createDragButton=function(e,i,n,o,r,s){var a=e.getCtx(),l=e.getOptions()._resources,h=J._createDragButtonBackground(a,s,"#C4CED7"),u=l[n+"Up"];h.setFill(new t.LinearGradientFill(270,["#FFFFFF","#F1F3F4","#E8EBED","#E4E8EA"],[J._BUTTON_OPACITY,J._BUTTON_OPACITY,J._BUTTON_OPACITY,J._BUTTON_OPACITY],[0,.0364,.5,1])),h.addChild(new t.Image(a,u,0,0,J._BUTTON_SIZE,J._BUTTON_SIZE));var d=J._createDragButtonBackground(a,s,"#C4CED7"),c=l[n+"UpHover"]?l[n+"UpHover"]:u;d.setSolidFill("#F7F8F9",J._BUTTON_OPACITY),d.addChild(new t.Image(a,c,0,0,J._BUTTON_SIZE,J._BUTTON_SIZE));var p=J._createDragButtonBackground(a,s,"#0572CE"),_=l[n+"Down"];p.setSolidFill("#0572CE",J._BUTTON_OPACITY),p.addChild(new t.Image(a,_,0,0,J._BUTTON_SIZE,J._BUTTON_SIZE));var g=J._createDragButtonBackground(a,s,"#0572CE"),m=l[n+"DownHover"]?l[n+"DownHover"]:_;g.setSolidFill("#0572CE",J._BUTTON_OPACITY),g.addChild(new t.Image(a,m,0,0,J._BUTTON_SIZE,J._BUTTON_SIZE));var f=new t.Button(a,h,d,p,null,null,o,r);if(f.setOverDownState(g),f.setToggleEnabled(!0),i.addChild(f),f.addEvtListener(t.MouseEvent.MOUSEDOWN,function(t){t.stopPropagation()}),t.Agent.isTouchDevice()){var y,v=t.Agent.isRightToLeft(a),S=2*J._BUTTON_PADDING;y="solo"==s?new t.Rect(a,-S,-S,J._BUTTON_SIZE+2*S,J._BUTTON_SIZE+2*S):"start"==s&&!v||"end"==s&&v?new t.Rect(a,-S,-S,J._BUTTON_SIZE+1.5*S,J._BUTTON_SIZE+2*S):new t.Rect(a,-.5*S,-S,J._BUTTON_SIZE+1.5*S,J._BUTTON_SIZE+2*S),y.setInvisibleFill(),f.addChild(y)}return f},J._adjustAvailSpace=function(t){t.x=Math.round(t.x),t.y=Math.round(t.y),t.w=Math.round(t.w),t.h=Math.round(t.h)},J.renderDataCursor=function(t){var e=null,i=t.getOptions(),n=t.getEventManager();if(W.isDataCursorEnabled(t)){e=new C(t.getCtx(),i.styleDefaults.dataCursor,z.isHorizontal(t)),e.setBehavior(W.getDataCursorBehavior(t)),t.addChild(e);var o=new l(t,e);n.setDataCursorHandler(o),t.positionDataCursor(i.dataCursorPosition)}else n.setDataCursorHandler(null);return e};var $=new Object;t.Obj.createSubclass($,t.Obj),$._DEFAULT_AXIS_MAX_SIZE=.33,$.render=function(t,e,i){z.hasAxes(t)&&(H.applyInitialZooming(t,i),z.isBubble(t)&&K.calcBubbleSizes(t,i),z.isPolar(t)?$._renderPolar(t,e,i):$._renderCartesian(t,e,i))},$._renderCartesian=function(e,i,n){var o=e.getOptions(),r=z.isHorizontal(e),s=z.isSplitDualY(e),a=n.clone(),l=H.getYAxisPosition(e),h=H.getY2AxisPosition(e);$._addAxisGaps(e,n),s&&l==h&&(o.yAxis._skipHighestTick=r,o.y2Axis._skipHighestTick=!r);var u=$._createYAxis(e,i,n,a),d=$._createY2Axis(e,i,n,a),c=!s&&"on"==o.y2Axis.alignTickMarks&&null==o.y2Axis.step;c&&u&&d&&($._alignYAxes(u,d),r||(d.dim=$._getPreferredSize(e,d.axis,e.y2Axis,d.options,"y2",n,a)));var p=H.getTickLabelGapSize(e,"y"),_=H.getTickLabelGapSize(e,"y2");if(s&&l==h){var g;r?(g=Math.max(u.dim.h+p,d.dim.h+_),u.dim.h=g-p,d.dim.h=g-_):(g=Math.max(u.dim.w+p,d.dim.w+_),u.dim.w=g-p,d.dim.w=g-_),$._positionAxis(n.clone(),u,p),$._positionAxis(n,d,_)}else $._positionAxis(n,u,p),$._positionAxis(n,d,_);var m=k.getGroupCount(e);if("pixel"==V.getBarSpacing(e)&&z.isBar(e)&&n.w>m){var f=Math.floor(n.w/m)*m;n.x+=(n.w-f)/2,n.w=f}var y=$._createXAxis(e,i,n,a);y.axis.render(y.options,y.dim.w,y.dim.h),$._positionAxis(n,y,H.getTickLabelGapSize(e,"x"));var v=V.getSplitterPosition(e),S=t.Agent.isRightToLeft(e.getCtx()),C=$._getSplitAvailSpace(n,v,r,r&&S),E=$._getSplitAvailSpace(n,1-v,r,!r||!S);r?(u&&(u.axis.setTranslateX(n.x),s?u.axis.render(u.options,C.w,u.dim.h,C.x,0):u.axis.render(u.options,n.w,u.dim.h)),c&&u&&d&&$._alignYAxes(u,d),d&&(d.axis.setTranslateX(n.x),s?d.axis.render(d.options,E.w,d.dim.h,E.x,0):d.axis.render(d.options,n.w,d.dim.h)),$._setOverflow(n,u,y)):(u&&(s?u.axis.render(u.options,u.dim.w,C.h,0,C.y):u.axis.render(u.options,u.dim.w,n.h)),c&&u&&d&&$._alignYAxes(u,d),d&&(s?d.axis.render(d.options,d.dim.w,E.h,0,E.y):d.axis.render(d.options,d.dim.w,n.h)),$._setOverflow(n,y,u,d)),$._storeAxes(e,y,u,d)},$._renderPolar=function(t,e,i){var n=$._createXAxis(t,e,i,i);n.axis.setTranslateX(i.x),n.axis.setTranslateY(i.y),n.axis.render(n.options,i.w,i.h);var o=$._createYAxis(t,e,i,i);o.axis.setTranslateX(i.x),o.axis.setTranslateY(i.y),o.axis.render(o.options,i.w,i.h),$._storeAxes(t,n,o)},$._createXAxis=function(e,i,n,o){var r=e.getOptions(),s=H.getXAxisPosition(e),a=t.JsonUtils.clone(r.xAxis);a.position=s,a.isStandalone=z.isStandaloneXAxis(e),a.groupSeparators=r.styleDefaults.groupSeparators,$._addCommonAxisAttributes(a,"x",e),a.groups=r.groups,a._groupWidthRatios=H.getGroupWidthRatios(e),a.timeAxisType=H.getTimeAxisType(e),a._environment=r._environment,a._locale=r._locale,a.drilling=r.drilling,a._isGroupAxis=H.hasGroupAxis(e);var l="top"==s||"bottom"==s,h=H.isGridShifted(e);if("tangential"==s&&H.hasGroupAxis(e))h?(a.startGroupOffset=.5,a.endGroupOffset=.5):a.endGroupOffset=1;else{var u=H.getAxisOffset(e);if(a.startGroupOffset=u,a.endGroupOffset=u,z.hasUncenteredSeries(e)&&(a.endGroupOffset+=1),!F.isScrollable(e)&&!z.isOverview(e)){var c=k.getGroupCount(e);H.isAxisRendered(e,"y")&&H.isTickLabelInside(e,"y")&&(a[(l?"start":"end")+"GroupOffset"]+=.04*c),H.isAxisRendered(e,"y2")&&H.isTickLabelInside(e,"y2")&&(a[(l?"end":"start")+"GroupOffset"]+=.04*c)}}a.leftBuffer=l?n.x-o.x:0,a.rightBuffer=l?o.w+o.x-(n.w+n.x):0,a._renderGridAtLabels=!h||H.hasTimeAxis(e);var p=new d(e.getCtx(),e.processEvent,e);i.addChild(p);var _=$._getPreferredSize(e,p,e.xAxis,a,"x",n,o);return a._minOverflowCoord=r._minOverflowCoord-n.x,a._maxOverflowCoord=r._maxOverflowCoord-n.x,{axis:p,options:a,dim:_}},$._createYAxis=function(e,i,n,o){var r=e.getOptions();if(z.hasY2DataOnly(e))return null;var s=t.JsonUtils.clone(r.yAxis);s.position=H.getYAxisPosition(e),s.isStandalone=z.isStandaloneYAxis(e),$._addCommonAxisAttributes(s,"y",e),$._addCommonYAxisAttributes(s,e);var a=new d(e.getCtx(),e.processEvent,e);i.addChild(a);var l=$._getPreferredSize(e,a,e.yAxis,s,"y",n,o);return $._adjustYAxisForLabels(a,s,e,"y"),r.yAxis.min=s.min,r.yAxis.max=s.max,{axis:a,options:s,dim:l}},$._createY2Axis=function(e,i,n,o){var r=e.getOptions();if(z.hasY2Data(e)){var s=t.JsonUtils.clone(r.y2Axis);s.position=H.getY2AxisPosition(e),s.isStandalone=z.isStandaloneY2Axis(e),$._addCommonAxisAttributes(s,"y2",e),$._addCommonYAxisAttributes(s,e);var a=new d(e.getCtx(),e.processEvent,e);i.addChild(a);var l=$._getPreferredSize(e,a,e.y2Axis,s,"y2",n,o);return $._adjustYAxisForLabels(a,s,e,"y2"),r.y2Axis.min=s.min,r.y2Axis.max=s.max,{axis:a,options:s,dim:l}}},$._addCommonAxisAttributes=function(t,e,i){var n=i.getOptions();if(t.skin=n.skin,t.tickLabel.position=H.isTickLabelInside(i,e)?"inside":"outside",t.baselineScaling=H.getBaselineScaling(i,e),(H.isTickLabelInside(i,e)||"tangential"==t.position)&&(t._skipHighestTick=!0),t.zoomAndScroll=z.isPolar(i)?"off":n.zoomAndScroll,t._isOverview=z.isOverview(i),t._duringZoomAndScroll=n._duringZoomAndScroll,"x"!=e||!H.hasGroupAxis(i)){var o=k.getMinMaxValue(i,e);t.dataMin=null!=t.dataMin?t.dataMin:o.min,t.dataMax=null!=t.dataMax?t.dataMax:o.max}z.isPolar(i)&&(t.polarGridShape=H.isGridPolygonal(i)?"polygon":"circle",t._radius=i.getRadius()),t.dnd=n.dnd},$._addCommonYAxisAttributes=function(e,i){if(e.timeAxisType="disabled",F.isLiveScroll(i)&&z.isBLAC(i)&&!z.isPolar(i)&&(e._continuousExtent="on"),e.isStandalone)e.leftBuffer=0,e.rightBuffer=0;else if(z.isSplitDualY(i))e.leftBuffer=1/0,e.rightBuffer=1/0;else{var n=t.Agent.isRightToLeft(i.getCtx());e.leftBuffer=n?0:t.Axis.MINIMUM_AXIS_BUFFER,e.rightBuffer=n?t.Axis.MINIMUM_AXIS_BUFFER:0}},$._adjustYAxisForLabels=function(e,i,n,o){var r=n.getOptions();if(H.isYAdjustmentNeeded(n)){var s=r.styleDefaults.dataLabelStyle,a=r.styleDefaults.stackLabelStyle,l=e.getInfo(),h=V.isStackLabelRendered(n),u=t.TextUtils.getTextStringHeight(n.getCtx(),h?a:s),d=0;if("log"==i.scale){var c=e.getUnboundedValueAt(e.getUnboundedCoordAt(l.getDataMax())-u);d=c-l.getDataMax()}else{var p=1;z.isSplitDualY(n)&&(p="y"==o?V.getSplitterPosition(n):1-V.getSplitterPosition(n));var _=Math.abs(l.getEndCoord()-l.getStartCoord())*p;d=Math.abs(l.getViewportMax()-l.getViewportMin())/_*u}z.isHorizontal(n)&&(d*=4),l.getDataMin()-l.getGlobalMin()<d&&l.getDataMin()<0&&(i.dataMin-=d),l.getGlobalMax()-l.getDataMax()<d&&l.getDataMax()>0&&(i.dataMax+=d)}},$._getPreferredSize=function(e,i,n,o,r,s,a){var l=o.isStandalone,h=o.position,u="top"==h||"bottom"==h,d=H.getTickLabelGapSize(e,r),c=o.maxSize,p=o.size,_=s.w,g=s.h;if("radial"==h||"tangential"==h)_=0,g=0;else if("off"==o.rendered)u?g=0:_=0;else if(l)u?g=s.h-d:_=s.w-d;else if(null!=p)u?(g=V.getSizeInPixels(p,a.h)-d,null!=c&&(g=Math.min(g,V.getSizeInPixels(c,a.h)-d))):(_=V.getSizeInPixels(p,a.w)-d,null!=c&&(_=Math.min(_,V.getSizeInPixels(c,a.w)-d)));else{if(!e.getOptions()._duringZoomAndScroll||!n)return c=null==c?$._DEFAULT_AXIS_MAX_SIZE:c,u?i.getPreferredSize(o,s.w,V.getSizeInPixels(c,a.h)-d):i.getPreferredSize(o,V.getSizeInPixels(c,a.w)-d,s.h);if(u){var m=t.Agent.isRightToLeft(e.getCtx());o._startOverflow=m?n.getRightOverflow():n.getLeftOverflow(),o._endOverflow=m?n.getLeftOverflow():n.getRightOverflow(),g=n.getHeight()}else _=n.getWidth()}return H.isYAdjustmentNeeded(e)&&i.getPreferredSize(o,_,g),new t.Dimension(_,g)},$._addAxisGaps=function(t,e){var i=z.isHorizontal(t),n=H.getYAxisPosition(t),o=H.getY2AxisPosition(t),r=H.isAxisRendered(t,"x"),s=H.isAxisRendered(t,"y"),a=H.isAxisRendered(t,"y2"),l=t.getOptions().layout.verticalAxisGap;l*=i?H.getGapScalingFactor(t,"x"):Math.max(H.getGapScalingFactor(t,"y"),H.getGapScalingFactor(t,"y2")),l=Math.ceil(l),(!i||"top"==n&&s||"top"==o&&a)&&i||(e.y+=l,e.h-=l),(!i||"bottom"==n&&s||"bottom"==o&&a)&&(i||r)||(e.h-=l)},$._positionAxis=function(e,i,n){i&&t.LayoutUtils.position(e,i.options.position,i.axis,i.dim.w,i.dim.h,n)},$._alignYAxes=function(t,e){var i=t.axis.getInfo();if(i){var n=i.getMajorTickCount(),o=i.getMinorTickCount(),r=e.options;r._majorTickCount=n,r._minorTickCount=o}},$._getSplitAvailSpace=function(t,e,i,n){var o=t.clone();return i?(o.w=t.w*e,o.x=n?t.w*(1-e):0):(o.h=t.h*e,o.y=n?t.h*(1-e):0),o},$._setOverflow=function(t,e,i,n){if(e){var o=e.axis.getLeftOverflow(),r=e.axis.getRightOverflow();t.x+=o,t.w-=o+r,i&&i.axis.setTranslateX(i.axis.getTranslateX()+("left"==i.options.position?o:-r)),n&&n.axis.setTranslateX(n.axis.getTranslateX()+("left"==n.options.position?o:-r))}},$._storeAxes=function(t,e,i,n){t.xAxis&&(t.xAxis.destroy(),t.removeChild(t.xAxis)),t.yAxis&&(t.yAxis.destroy(),t.removeChild(t.yAxis)),t.y2Axis&&(t.y2Axis.destroy(),t.removeChild(t.y2Axis)),t.xAxis=e.axis,t.yAxis=i?i.axis:null,t.y2Axis=n?n.axis:null};var tt=new Object;t.Obj.createSubclass(tt,t.Obj),tt._DEFAULT_LINE_WIDTH_WITH_MARKER=2,tt._DEFAULT_MAX_SIZE=.3,tt._PIE_SIZE_RATIO=1.2,tt.render=function(e,i,n){var o=e.getOptions(),r=o.legend.position;if(!("off"==o.legend.rendered||"auto"==o.legend.rendered&&e.getOptionsCache().getFromCache("hasLargeSeriesCount"))){var s=t.JsonUtils.clone(o.legend);delete s.position,s.skin=o.skin,s.hideAndShowBehavior=F.getHideAndShowBehavior(e),s.hoverBehavior=F.getHoverBehavior(e),s.hoverBehaviorDelay=V.getHoverBehaviorDelay(e),s.hiddenCategories=V.getHiddenCategories(e),s.highlightedCategories=V.getHighlightedCategories(e),s.dnd=o.dnd,s._dropColor=o._dropColor,"auto"==r&&(r=n.w>=n.h?"end":"bottom");var l="top"==r||"bottom"==r;if(s.orientation=l?"horizontal":"vertical","start"==r&&(s.halign="end"),"start"!=r&&"end"!=r||(s.valign="middle"),"top"==r&&(s.valign="bottom"),"top"!=r&&"bottom"!=r||(s.halign="center"),tt._addLegendData(e,s),0!=s.sections.length){var h=t.Legend.newInstance(e.getCtx(),e.processEvent,e);null!=e.getId()&&h.setId(e.getId()+"legend"),i.addChild(h);var u;if(null!=s.size)u=l?new t.Dimension(n.w,V.getSizeInPixels(s.size,n.h)):new t.Dimension(V.getSizeInPixels(s.size,n.w),n.h);else{var d=s.maxSize;if(null==d&&(d=tt._DEFAULT_MAX_SIZE,z.isPie(e))){var c=1-tt._PIE_SIZE_RATIO*(l?n.w/n.h:n.h/n.w);d=Math.max(d,c)}var p=l?n.w:V.getSizeInPixels(d,n.w),_=l?V.getSizeInPixels(d,n.h):n.h;u=h.getPreferredSize(s,p,_)}h.render(s,u.w,u.h);var g=l?a.getGapHeight(e,o.layout.legendGapHeight):a.getGapWidth(e,o.layout.legendGapWidth);t.LayoutUtils.position(n,r,h,u.w,u.h,g);var m=h.__getBounds(),f=h.localToStage(new t.Point(m.x,m.y));if(!z.isOverview(e)){var y=t.Agent.isRightToLeft(e.getCtx());"end"==r?y?o._minOverflowCoord=f.x+m.w+g/2:o._maxOverflowCoord=f.x-g/2:"start"==r&&(y?o._maxOverflowCoord=f.x-g/2:o._minOverflowCoord=f.x+m.w+g/2)}e.legend&&(e.legend.destroy(),i.removeChild(e.legend)),e.legend=h}}},tt._addLegendData=function(t,e){var i=tt._getSeriesItems(t,"vertical"==e.orientation);if(i.length>0){var n=e.seriesSection;n.items=i,e.sections.unshift(n),delete e.seriesSection}var o=tt._getRefObjItems(t);if(o.length>0){var r=e.referenceObjectSection;r.items=o,e.sections.push(r),delete e.referenceObjectSection}},tt._getSeriesItems=function(e,i){var n,o,r=[];if("pie"==e.getType()||"pyramid"==e.getType()||"funnel"==e.getType()){var s=Z.getRenderedSeriesIndices(e);"pyramid"==e.getType()&&i&&(s=s.reverse());for(var a=0;a<s.length;a++){o=s[a];var l=k.getValue(e,o,0);l>=0&&null!=l&&(n=tt._createLegendItem(e,o),n&&r.push(n))}Z.hasOtherSeries(e)&&(n={id:Z.OTHER_SLICE_SERIES_ID,text:t.Bundle.getTranslation(e.getOptions(),"labelOther",t.Bundle.CHART_PREFIX,"LABEL_OTHER"),categoryVisibility:t.ArrayUtils.getIndex(V.getHiddenCategories(e),Z.OTHER_SLICE_SERIES_ID)>=0?"hidden":"visible",symbolType:"marker",color:e.getOptions().styleDefaults.otherColor,borderColor:e.getOptions().styleDefaults.borderColor},r.push(n))}else{var h={},u={},d=k.getSeriesCount(e);for(o=0;o<d;o++)if(n=tt._createLegendItem(e,o)){var c=k.getStackCategory(e,o);k.isAssignedToY2(e,o)?u[c]?u[c].push(n):u[c]=[n]:h[c]?h[c].push(n):h[c]=[n]}var p=k.getStackCategories(e,null,!0),_=z.isStacked(e)&&z.isVertical(e)&&i;r=tt._getSeriesItemsForAxis(h,p.y,_,r),r=tt._getSeriesItemsForAxis(u,p.y2,_,r)}return r},tt._getSeriesItemsForAxis=function(t,e,i,n){for(var o,r=0;r<e.length;r++)o=t[e[r]],o&&(n=i?n.concat(o.reverse()):n.concat(o));return n},tt._createLegendItem=function(e,i){var n=k.getSeriesItem(e,i),o=e.getType(),r=V.getSeriesType(e,i),s=V.getLineType(e,i),a=n.displayInLegend;if(!n||"off"==a)return null;if("on"!=a&&(z.isFunnel(e)||z.isPyramid(e)||z.isStock(e)))return null;if("on"!=a&&!k.hasSeriesData(e,i))return null;var l=k.getSeriesLabel(e,i);if("on"!=a&&(!l||t.StringUtils.trim(l).length<=0))return null;var h={id:k.getSeries(e,i),text:l,categories:k.getCategories(e,i),categoryVisibility:V.isSeriesRendered(e,i)?"visible":"hidden",_dataContext:k.getDataContext(e,i,-1)};if("line"==r||"lineWithArea"==r||"scatter"==o||"bubble"==o)if(h.lineStyle=V.getLineStyle(e,i),h.lineWidth=V.getLineWidth(e,i),V.isMarkerDisplayed(e,i)){var u=V.getImageSource(e,i,null,null,"source");u?(h.symbolType="image",h.source=u):(h.symbolType="none"==s?"marker":"lineWithMarker","lineWithMarker"==h.symbolType&&(h.lineWidth=Math.min(tt._DEFAULT_LINE_WIDTH_WITH_MARKER,h.lineWidth)),h.markerShape=V.getMarkerShape(e,i),h.markerColor=V.getMarkerColor(e,i))}else h.symbolType="line";else if("boxPlot"==r){var d=V.getBoxPlotStyleOptions(e,i);d.q2Color!=d.q3Color?(h.symbolType=z.isHorizontal(e)?"_horizontalBoxPlot":"_verticalBoxPlot",h._boxPlot=d):h.symbolType="marker"}else h.symbolType="marker","none"==V.getLineType(e,i)&&(h.markerShape=V.getMarkerShape(e,i));return h.color=V.getColor(e,i),h.borderColor=V.getBorderColor(e,i),h.pattern=V.getPattern(e,i),h.svgStyle="area"==r?V.getAreaStyle(e,i):V.getStyle(e,i),h.svgClassName="area"==r?V.getAreaClassName(e,i):V.getClassName(e,i),h.markerSvgStyle=V.getMarkerStyle(e,i),h.markerSvgClassName=V.getMarkerClassName(e,i),h.action=n.action,h._spb=e.getShowPopupBehaviors(n._id),h.drilling=F.isSeriesDrillable(e,i)?"on":"off",h.shortDesc=n.shortDesc,h},tt._getRefObjItems=function(t){var e=G.getRefObjs(t);if(e.length<=0)return[];for(var i=[],n=0;n<e.length;n++){var o=e[n];if(o&&"on"==o.displayInLegend&&o.text){var r=G.getType(o);i.push({symbolType:"area"==r?"square":"line",text:o.text,color:G.getColor(o),lineStyle:o.lineStyle,lineWidth:G.getLineWidth(o),categories:G.getRefObjCategories(o),categoryVisibility:G.isObjectRendered(t,o)?"visible":"hidden",shortDesc:o.shortDesc,svgStyle:o.style||o.svgStyle,svgClassName:o.className||o.svgClassName})}}return i};var et=new Object;t.Obj.createSubclass(et,t.Obj),et._MIN_TOUCH_MARKER_SIZE=16,et._MARKER_DATA_LABEL_GAP=4,et._MIN_CHARS_DATA_LABEL=3,et.FILTER_THRESHOLD_SCATTER_BUBBLE=1e4,et.render=function(t,e,i){"off"==t.getOptions().plotArea.rendered?et._renderAxisLines(t,e,i):i.w>0&&i.h>0&&(t._currentMarkers=new Array,t._currentAreas=new Array,et._renderBackgroundObjects(t,e,i),et._renderTicks(t,e,i),et._renderForegroundObjects(t,e,i))},et._renderBackgroundObjects=function(e,i,n){var o=e.getOptions(),r=et._getBackgroundShape(e,n),s=V.getBackgroundColor(e);if(s?r.setSolidFill(s):r.setInvisibleFill(),i.addChild(r),e.getCache().putToCache("plotAreaBackground",r),o.xAxis.referenceObjects||o.yAxis.referenceObjects||o.y2Axis.referenceObjects){var a=et.createClippedGroup(e,i,n);ot.renderBackgroundObjects(e,a,n)}if(z.isBLAC(e)){var l=new t.Container(e.getCtx());i.addChild(l),e.__setAreaContainer(l),z.hasAreaSeries(e)&&et._renderAreas(e,l,n,!1)}},et._getBackgroundShape=function(e,i){var n,o=e.getCtx();if(z.isPolar(e)){var r=i.x+i.w/2,s=i.y+i.h/2;if(H.isGridPolygonal(e)){var a=t.PolygonUtils.getRegularPolygonPoints(r,s,k.getGroupCount(e),e.getRadius(),0);n=new t.Polygon(o,a)}else n=new t.Circle(o,r,s,e.getRadius())}else n=new t.Rect(o,i.x,i.y,i.w,i.h);return n},et._renderTicks=function(t,e,i){t.xAxis&&H.isMinorTickRendered(t,"x")&&et._renderMinorTicks(t,e,t.xAxis,i),t.yAxis&&H.isMinorTickRendered(t,"y")&&et._renderMinorTicks(t,e,t.yAxis,i),t.y2Axis&&H.isMinorTickRendered(t,"y2")&&et._renderMinorTicks(t,e,t.y2Axis,i),t.xAxis&&H.isMajorTickRendered(t,"x")&&et._renderMajorTicks(t,e,t.xAxis,i),t.yAxis&&H.isMajorTickRendered(t,"y")&&et._renderMajorTicks(t,e,t.yAxis,i),t.y2Axis&&H.isMajorTickRendered(t,"y2")&&et._renderMajorTicks(t,e,t.y2Axis,i)},et._renderAxisLines=function(t,e,i){t.xAxis&&t.yAxis&&H.isAxisLineRendered(t,"x")&&et._renderAxisLine(t,e,t.xAxis,t.yAxis,i),t.xAxis&&t.y2Axis&&H.isAxisLineRendered(t,"x")&&(t.yAxis&&!z.isSplitDualY(t)||et._renderAxisLine(t,e,t.xAxis,t.y2Axis,i)),t.yAxis&&t.xAxis&&H.isAxisLineRendered(t,"y")&&et._renderAxisLine(t,e,t.yAxis,t.xAxis,i),t.y2Axis&&t.xAxis&&H.isAxisLineRendered(t,"y2")&&et._renderAxisLine(t,e,t.y2Axis,t.xAxis,i)},et._renderMajorTicks=function(t,e,i,n){et._renderGridlines(t,e,i.getOptions().majorTick,i.getPosition(),i.getMajorTickCoords(),i.getBaselineCoord(),n)},et._renderMinorTicks=function(t,e,i,n){et._renderGridlines(t,e,i.getOptions().minorTick,i.getPosition(),i.getMinorTickCoords(),null,n)},et._renderAxisLine=function(t,e,i,n,o){var r=i.getOptions(),s=r.position,a="bottom"==s||"right"==s||"tangential"==s?n.getMaxCoord():n.getMinCoord();et._renderGridlines(t,e,r.axisLine,n.getPosition(),[a],null,o)},et._renderGridlines=function(e,i,n,o,r,s,a){var l=n.lineColor,h=new t.SolidStroke(l,1,n.lineWidth);n.lineStyle&&h.setStyle(t.Stroke.convertTypeString(n.lineStyle));var u=h.clone();if("inherit"!=n.baselineColor){var d;d="auto"==n.baselineColor?t.ColorUtils.getDarker(l,.6):n.baselineColor,u.setColor(d)}u.setWidth(null!=n.baselineWidth?n.baselineWidth:n.lineWidth),u.setStyle(t.Stroke.convertTypeString(n.baselineStyle?n.baselineStyle:n.lineStyle));for(var c=0;c<r.length;c++){var p=null!=s&&r[c]==s?u:h;et._renderGridline(e,i,o,r[c],p,a)}},et._renderGridline=function(e,i,n,o,r,s){var a,l=i.getCtx(),h=!t.Agent.isTouchDevice()||t.Agent.getDevicePixelRatio()>1;if("radial"==n){if(H.isGridPolygonal(e)){var u=t.PolygonUtils.getRegularPolygonPoints(0,0,k.getGroupCount(e),o,0);a=new t.Polygon(l,u)}else a=new t.Circle(l,0,0,o);a.setInvisibleFill(),a.setTranslate(s.x+s.w/2,s.y+s.h/2)}else if("tangential"==n){a=new t.Line(l,0,0,e.getRadius()*Math.sin(o),-e.getRadius()*Math.cos(o));var d=o%(Math.PI/2);(d<.001||d>Math.PI/2-.001)&&h&&a.setPixelHinting(!0),a.setTranslate(s.x+s.w/2,s.y+s.h/2)}else a="top"==n||"bottom"==n?new t.Line(l,o,s.y,o,s.y+s.h):new t.Line(l,s.x,o,s.x+s.w,o),h&&a.setPixelHinting(!0);a.setStroke(r),a.setMouseEnabled(!1),i.addChild(a)},et._renderForegroundObjects=function(t,e,i){var n=t.getOptions(),o=et.createClippedGroup(t,e,i);et._renderAxisLines(t,e,i);var r=n.plotArea.borderColor,s=n.plotArea.borderWidth;if(r&&0!=s){var a=et._getBackgroundShape(t,i);a.setInvisibleFill(),a.setSolidStroke(r,null,s),a.setMouseEnabled(!1),e.addChild(a)}z.isBLAC(t)?(z.hasLineWithAreaSeries(t)&&et._renderAreas(t,e,i,!0),z.hasBarSeries(t)&&et._renderBars(t,o,i),z.hasCandlestickSeries(t)&&et._renderStock(t,o,i),z.hasBoxPlotSeries(t)&&et._renderBoxPlot(t,o,i),z.hasLineSeries(t)&&et._renderLines(t,e,o,i)):z.isScatterBubble(t)&&et._renderScatterBubble(t,e,o,!0,i),(n.xAxis.referenceObjects||n.yAxis.referenceObjects||n.y2Axis.referenceObjects)&&(o=et.createClippedGroup(t,e,i),ot.renderForegroundObjects(t,o,i));var l=k.getInitialSelection(t);F.setInitialSelection(t,l),t.highlight(V.getHighlightedCategories(t))},et._renderDataLabel=function(e,i,n,o,r,s,a,l,h){if(!z.isOverview(e)){var u=k.getDataLabel(e,o,r,s,l,h);if(null!=u){var d=V.getDataLabelPosition(e,o,r,s,l,h);if("none"!=d){var c=new t.OutputText(e.getCtx(),u,0,0);c.setMouseEnabled(!1);var p=h?e.getOptions().styleDefaults.stackLabelStyle:V.getDataLabelStyle(e,o,r,s,a,d,l);c.setCSSStyle(p),c.setY(n.y+n.h/2),c.setX(n.x+n.w/2),c.alignCenter(),c.alignMiddle();var _=c.measureDimensions();if("left"==d)c.setX(n.x-_.w/2-et._MARKER_DATA_LABEL_GAP);else if("right"==d)c.setX(n.x+n.w+_.w/2+et._MARKER_DATA_LABEL_GAP);else if("top"==d)c.setY(n.y-_.h/2);else if("bottom"==d)c.setY(n.y+n.h+_.h/2+et._MARKER_DATA_LABEL_GAP/2);else{if("bar"==V.getSeriesType(e,o)){if(_.w>n.w||_.h>n.h)return;"inLeft"==d?c.setX(n.x+_.w/2+et._MARKER_DATA_LABEL_GAP):"inRight"==d?c.setX(n.x+n.w-_.w/2-et._MARKER_DATA_LABEL_GAP):"inTop"==d?c.setY(n.y+_.h/2+et._MARKER_DATA_LABEL_GAP):"inBottom"==d&&c.setY(n.y+n.h-_.h/2-et._MARKER_DATA_LABEL_GAP/2)}else if(z.isBubble(e)){n.x+=et._MARKER_DATA_LABEL_GAP,n.y+=et._MARKER_DATA_LABEL_GAP,n.h-=2*et._MARKER_DATA_LABEL_GAP,n.w-=2*et._MARKER_DATA_LABEL_GAP;var g=c.getOptimalFontSize(n);if(c.setFontSize(g),!t.TextUtils.fitText(c,n.w,n.h,i,et._MIN_CHARS_DATA_LABEL))return}var m=null!=V.getPattern(e,o,r);if(m){_=c.getDimensions();var f=.15*_.h,y=t.PathUtils.roundedRectangle(_.x-f,_.y,_.w+2*f,_.h,2,2,2,2),v=new t.Path(e.getCtx(),y);v.setSolidFill("#FFFFFF",.9),i.addChild(v)}}if(z.isBar(e)){var S,C=c.getDimensions(),E=!1,b=e.getPlotArea().getDimensions();if("left"==d&&C.x<0)E=!0,S=n.x-et._MARKER_DATA_LABEL_GAP;else if("right"==d&&C.x+C.w>b.w+et._MARKER_DATA_LABEL_GAP)E=!0,S=b.w-n.w-et._MARKER_DATA_LABEL_GAP;else{if("top"==d&&C.y<0)return;if("bottom"==d&&C.y+C.h>b.y+b.h+et._MARKER_DATA_LABEL_GAP)return}if(E){if(!isNaN(u))return;if(!t.TextUtils.fitText(c,S,n.h,i,1))return;_=c.measureDimensions(),"left"==d?c.setX(n.x-_.w/2-et._MARKER_DATA_LABEL_GAP):"right"==d&&c.setX(n.x+n.w+_.w/2+et._MARKER_DATA_LABEL_GAP)}}V.optimizeMarkerStroke(e)&&c.setSolidStroke("none"),i.addChild(c),e.addDataLabel(c)}}}},et._renderDataLabelForMarker=function(e,i,n){var o=e.getEventManager().getLogicalObject(n);if(o){var r=o.getSeriesIndex(),s=o.getGroupIndex(),a=o.getNestedDataItemIndex();if(n instanceof t.SimpleMarker){var l=new t.Rectangle(n.getCx()-n.getWidth()/2,n.getCy()-n.getHeight()/2,n.getWidth(),n.getHeight());et._renderDataLabel(e,i,l,r,s,a,n.getDataColor())}else n instanceof S&&(et._renderDataLabel(e,i,n.getBoundingBox1(),r,s,a,n.getDataColor(),"low"),et._renderDataLabel(e,i,n.getBoundingBox2(),r,s,a,n.getDataColor(),"high"))}},et._renderScatterBubble=function(e,i,n,o,r){var s,a=et._filterScatterBubble(e,o,r),l=k.getSeriesCount(e);for(s=0;s<l;s++)"none"!=V.getLineType(e,s)&&et._renderLinesForSeries(e,n,s,r);var h=V.getMarkerBorderColor(e),u=V.getBorderWidth(e),d=new t.SolidStroke(h,null,u),c=[];if(a)for(var p=V.optimizeMarkerStroke(e),_=p?d.getColor():null,g=p?d.getWidth():null,m=0;m<a.length;m++){var f=a[m],y=et._createMarker(e,f,_,g);c.push(y)}else{for(s=0;s<l;s++){var v=et._getMarkersForSeries(e,s,r,d);c=c.concat(v)}o&&K.sortMarkers(c)}z.isBubble(e)?et._addMarkersToContainer(e,n,c,d):et._addMarkersToContainer(e,i,c,d)},et._renderMarkersForSeries=function(e,i,n,o){var r,s=V.getMarkerBorderColor(e,n),a=V.getBorderWidth(e,n),l=new t.SolidStroke(s,null,a);r=V.isRangeSeries(e,n)?et._getRangeMarkersForSeries(e,n,o):et._getMarkersForSeries(e,n,o,l),et._addMarkersToContainer(e,i,r,l)},et._addMarkersToContainer=function(e,i,n,o){var r=i,s=V.optimizeMarkerStroke(e),a=V.optimizeMarkerFill(e);(s||a)&&(r=new t.Container(e.getCtx()),s?r.setStroke(o):r.setInvisibleFill(),i.addChild(r));for(var l=0;l<n.length;l++)r.addChild(n[l]),et._renderDataLabelForMarker(e,r,n[l]);e._currentMarkers.push(n)},et._getMarkerInfo=function(e,i,n,o,r){var s=e.getOptions(),a=k.getValue(e,i,n,o);if(null==a||isNaN(a))return null;if(k.isDataItemFiltered(e,i,n))return null;var l=k.getGroupCount(e),h=V.isMarkerDisplayed(e,i,n,o);if(!h&&(null==o||o<0))if("jet"!=s._environment&&H.isMixedFrequency(e))l<2&&(h=!0);else{var u=l-1,d=z.isPolar(e),c=d&&u>0&&0==n?u:n-1,p=d&&u>0&&n==u?0:n+1,_=k.getValue(e,i,c),g=k.getValue(e,i,p);null!=_&&!isNaN(_)||null!=g&&!isNaN(g)||(h=!0)}if(!h){if(z.isSpark(e))return null;if((s._duringZoomAndScroll||z.isOverview(e))&&!k.isDataSelected(e,i,n,o))return null}if(!V.isDataItemRendered(e,i,n,o))return!1;var m=!0,f=k.getMarkerPosition(e,i,n,o,r),y=V.getMarkerSize(e,i,n,o);return r&&f&&y&&(m=r.intersects(new t.Rectangle(f.x-y/2,f.y-y/2,y,y))),f&&m?{seriesIndex:i,groupIndex:n,itemIndex:o,x:f.x,y:f.y,size:y,markerDisplayed:h}:null},et._getScatterBubbleMarkerInfo=function(t,e,i,n){if(!V.isDataItemRendered(t,e,i))return!1;var o=k.getScatterBubbleMarkerPosition(t,e,i);if(!o)return null;var r=V.getMarkerSize(t,e,i);return r?{seriesIndex:e,groupIndex:i,x:o.x,y:o.y,size:r}:null},et._getMarkersForSeries=function(t,e,i,n){if(!V.isSeriesRendered(t,e))return[];for(var o=V.optimizeMarkerStroke(t),r=o?n.getColor():null,s=o?n.getWidth():null,a=[],l=k.getGroupCount(t),h=0;h<l;h++){var u=et._getMarkerInfo(t,e,h,null,i);if(u){var d=et._createMarker(t,u,r,s);null!=d&&a.push(d)}}return a},et._createMarker=function(e,i,n,r){var s,a=t.Agent.isTouchDevice(),l=e.getCtx(),h=V.optimizeMarkerStroke(e),u=V.optimizeMarkerFill(e),d=i.seriesIndex,c=i.groupIndex,p=i.itemIndex,_=V.getMarkerColor(e,d,c,p),g=V.getMarkerShape(e,d,c,p),m=i.markerDisplayed;if(null==m&&(m=V.isMarkerDisplayed(e,d,c,p)),m){var y=V.getImageSource(e,d,c,p,"source");if(y){var v=V.getImageSource(e,d,c,p,"sourceSelected"),S=V.getImageSource(e,d,c,p,"sourceHover"),C=V.getImageSource(e,d,c,p,"sourceHoverSelected");s=new t.ImageMarker(l,i.x,i.y,i.size,i.size,null,y,v,S,C)}else{s=new t.SimpleMarker(l,g,e.getSkin(),i.x,i.y,i.size,i.size,null,null,!0),s.setFill(j.getMarkerFill(e,d,c,p));var E=V.getMarkerBorderColor(e,d,c,p),b=V.getBorderWidth(e,d,c,p);E==n&&b==r||s.setSolidStroke(E,null,b),s.setDataColor(_,!0);var T=t.SelectionEffectUtils.getHoverBorderColor(_),A=V.getSelectedInnerColor(e),O=V.getSelectedOuterColor(e);s.setHoverStroke(new t.SolidStroke(A,1,1),new t.SolidStroke(T,1,3.5)),s.setSelectedStroke(new t.SolidStroke(A,1,1.5),new t.SolidStroke(O,1,4.5)),s.setSelectedHoverStroke(new t.SolidStroke(A,1,1.5),new t.SolidStroke(T,1,4.5)),s.setClassName(V.getMarkerClassName(e,d,c,p)),s.setStyle(V.getMarkerStyle(e,d,c,p))}V.isSelectable(e,d,c)&&s.setCursor(t.SelectionEffectUtils.getSelectingCursor()),a&&i.size<et._MIN_TOUCH_MARKER_SIZE&&et._addMarkerHitArea(s,i.x,i.y,h)}else V.isSelectable(e,d,c)?(s=new f(l,g,i.x,i.y,i.size,h),s.setCursor(t.SelectionEffectUtils.getSelectingCursor()),a&&et._addMarkerHitArea(s,i.x,i.y,h)):(a&&(i.size=et._MIN_TOUCH_MARKER_SIZE),s=new f(l,t.SimpleMarker.SQUARE,i.x,i.y,i.size,h)),null!=s&&(u||s.setInvisibleFill(),s.setDataColor(_));return null!=s&&o.associate(s,e,d,c,p,i),s},et._addMarkerHitArea=function(e,i,n,o){var r=new t.Rect(e.getCtx(),i-et._MIN_TOUCH_MARKER_SIZE/2,n-et._MIN_TOUCH_MARKER_SIZE/2,et._MIN_TOUCH_MARKER_SIZE,et._MIN_TOUCH_MARKER_SIZE);o&&r.setSolidStroke("none"),r.setInvisibleFill(),e.addChild(r)},et._getRangeMarkersForSeries=function(e,i,n){if(!V.isSeriesRendered(e,i))return[];for(var r=t.Agent.isTouchDevice(),s=e.getCtx(),a=e.xAxis,l=k.isAssignedToY2(e,i)?e.y2Axis:e.yAxis,h=e.getOptions(),u=k.getGroupCount(e),d=[],c=0;c<u;c++)if(!k.isDataItemFiltered(e,i,c)&&V.isDataItemRendered(e,i,c)){var p=a.getCoordAt(k.getXValue(e,i,c)),_=l.getUnboundedCoordAt(k.getLowValue(e,i,c)),g=l.getUnboundedCoordAt(k.getHighValue(e,i,c));if(null!=p&&null!=_&&null!=g){var m=V.isMarkerDisplayed(e,i,c);if(!m){var f=u-1,y=z.isPolar(e),v=y&&f>0&&0==c?f:c-1,C=y&&f>0&&c==f?0:c+1,E=k.getLowValue(e,i,v),b=k.getHighValue(e,i,v),T=k.getLowValue(e,i,C),A=k.getHighValue(e,i,v);null==E&&null==b&&null==T&&null==A&&(m=!0)}if(!(h._duringZoomAndScroll||z.isOverview(e)||z.isSpark(e))||m||k.isDataSelected(e,i,c)){var O=et.convertAxisCoord(e,new t.Point(p,_),n),P=et.convertAxisCoord(e,new t.Point(p,g),n),I=new t.Point((O.x+P.x)/2,(O.y+P.y)/2),D=V.getMarkerSize(e,i,c),x=new S(s,O.x,O.y,P.x,P.y,D,!m),M=j.getMarkerFill(e,i,c),L=V.getMarkerBorderColor(e,i,c),R=V.getBorderWidth(e,i,c),w=new t.SolidStroke(L,null,R),N=V.getMarkerColor(e,i,c),U=V.getSelectedInnerColor(e),B=V.getSelectedOuterColor(e);x.setStyleProperties(M,w,N,U,B),V.isSelectable(e,i,c)&&x.setCursor(t.SelectionEffectUtils.getSelectingCursor());var H=new t.Line(s,O.x,O.y,P.x,P.y);H.setSolidStroke("rgba(0,0,0,0)",null,r?Math.max(D,et._MIN_TOUCH_MARKER_SIZE):D),x.addChild(H),d.push(x),o.associate(x,e,i,c,null,I)}}}return d},et._renderBars=function(e,i,n){for(var r=z.isHorizontal(e),s=z.isPolar(e),a=z.isStock(e),l="pixel"==V.getBarSpacing(e),h=t.Agent.isRightToLeft(e.getCtx()),u=V.isStackLabelRendered(e),d=z.isStacked(e),p=V.getSelectedInnerColor(e),_=V.getSelectedOuterColor(e),g=e.getOptions()._duringZoomAndScroll,m=V.getGroupWidth(e),f=0;f<k.getSeriesCount(e);f++)if("bar"==V.getSeriesType(e,f)){et._filterPointsForSeries(e,f);for(var y="",S=e.getOptionsCache().getFromCachedMap("itemStyleSet",f),C=k.getViewportMinMaxGroupIndex(e,f),E=C.min-1;E<=C.max+1;E++)if(!k.isDataItemFiltered(e,f,E)&&V.isDataItemRendered(e,f,E)){var b=k.getBarInfo(e,f,E,n);if(null!=b){var T=b.yCoord,A=b.baseCoord,O=b.axisCoord,P=b.x1,I=b.x2,D=b.barWidth,x=!1;Math.abs(T-A)<1&&(V.isRangeSeries(e,f)?T--:d&&!k.isOutermostBar(e,f,E)||(x=!0,T=T>A||r&&!h&&T==A?A+3:A-3));var M;if(s)M=new v(e,O,A,T,P,I,n);else{var L=g&&m<5&&!S;if(M=new c(e,O,A,T,P,I,L),L){var R=M.getBoundingBox();y+=t.PathUtils.moveTo(R.x,R.y)+t.PathUtils.horizontalLineTo(R.x+R.w)+t.PathUtils.verticalLineTo(R.y+R.h)+t.PathUtils.horizontalLineTo(R.x)+t.PathUtils.closePath();continue}}i.addChild(M),V.isSelectable(e,f,E)&&M.setCursor(t.SelectionEffectUtils.getSelectingCursor());var w,N=null;if(x)w=t.SolidFill.invisibleFill();else{w=j.getBarFill(e,f,E,D);var U=V.getBorderColor(e,f,E),B=V.getBorderWidth(e,f,E);
U&&(N=new t.SolidStroke(U,null,B))}var H=V.getColor(e,f,E),F=V.getClassName(e,f,E),G=V.getStyle(e,f,E);M.setStyleProperties(w,N,H,p,_,F,G),l&&M.setPixelHinting(!0),o.associate(M,e,f,E,null,b.dataPos),V.isRangeSeries(e,f)?(et._renderDataLabel(e,i,M.getBoundingBox(),f,E,null,H,"low"),et._renderDataLabel(e,i,M.getBoundingBox(),f,E,null,H,"high")):et._renderDataLabel(e,i,M.getBoundingBox(),f,E,null,H);var Y=new Array;Y.push(M),a&&0!=f||e._currentMarkers.push(Y),u&&k.isOutermostBar(e,f,E)&&et._renderDataLabel(e,i,M.getBoundingBox(),f,E,null,null,null,!0)}}if(y){var W=new t.Path(e.getCtx(),y),K=V.getColor(e,f);W.setSolidFill(K);var Z=V.getBorderColor(e,f);if(Z){var X=V.getBorderWidth(e,f);W.setSolidStroke(Z,null,X)}var q=V.getClassName(e,f),Q=V.getStyle(e,f);W.setClassName(q).setStyle(Q),l&&W.setPixelHinting(!0),i.addChild(W)}}},et._renderStock=function(e,i,n){var r=e.getOptions(),s=e.xAxis,a=e.yAxis;if("candlestick"==V.getSeriesType(e,0))for(var l=k.getViewportMinMaxGroupIndex(e,0),h=l.min-1;h<=l.max+1;h++)if(V.isDataItemRendered(e,0,h)){var u=k.getDataItem(e,0,h);if(u){var d=u.open,c=u.close,p=u.low,g=u.high,m=null!=p&&null!=g;if(null!=d&&null!=c){var f,y=k.getXValue(e,0,h),v=s.getUnboundedCoordAt(y),S=V.getBarWidth(e,0,h),C=a.getBoundedCoordAt(d),E=a.getBoundedCoordAt(c),b=null;m&&(f=a.getBoundedCoordAt(p),b=a.getBoundedCoordAt(g));var T=new _(e.getCtx(),v,S,C,E,f,b);i.addChild(T),V.isSelectable(e,0,h)&&T.setCursor(t.SelectionEffectUtils.getSelectingCursor());var A=j.getBarFill(e,0,h,S),O=null,P=V.getBorderColor(e,0,h),I=V.getBorderWidth(e,0,h);P?O=new t.SolidStroke(P,null,I):A instanceof t.PatternFill&&(O=new t.SolidStroke(A.getColor(),null,I));var D=V.getColor(e,0,h),x=V.getSelectedInnerColor(e),M=V.getSelectedOuterColor(e),L=r.styleDefaults.stockRangeColor;T.setChangeStyle(A,O,D,x,M),T.setRangeStyle(new t.SolidFill(L),O,L,M);var R=new t.Point(v,(C+E)/2);o.associate(T,e,0,h,null,R);var w=new Array;w.push(T._changeShape),e._currentMarkers.push(w)}}}},et._renderBoxPlot=function(e,i,n){for(var r=e.xAxis,s=0;s<k.getSeriesCount(e);s++)for(var a=k.getViewportMinMaxGroupIndex(e,s),l=a.min-1;l<=a.max+1;l++)if(V.isDataItemRendered(e,s,l)&&"boxPlot"==V.getSeriesType(e,s)){var h=k.getDataItem(e,s,l);if(h){var u=h.low,d=h.q1,c=h.q2,_=h.q3,g=h.high;if(null!=u&&null!=d&&null!=c&&null!=_&&null!=g){var m=V.getBarWidth(e,s,l),f=V.getBarCategoryOffsetMap(e,l),y=k.isAssignedToY2(e,s),v=k.getStackCategory(e,s),S=f[y?"y2":"y"][v]+m/2;t.Agent.isRightToLeft(e.getCtx())&&z.isVertical(e)&&(S*=-1);var C=k.getXValue(e,s,l),E=r.getUnboundedCoordAt(C)+S,b=y?e.y2Axis:e.yAxis,T=b.getBoundedCoordAt(u),A=b.getBoundedCoordAt(d),O=b.getBoundedCoordAt(c),P=b.getBoundedCoordAt(_),I=b.getBoundedCoordAt(g),D=V.getBoxPlotStyleOptions(e,s,l),x=new p(e,E,m,T,A,O,P,I,D);i.addChild(x),V.isSelectable(e,s,l)&&x.setCursor(t.SelectionEffectUtils.getSelectingCursor());var M=et.convertAxisCoord(e,new t.Point(E,O),n);o.associate(x,e,s,l,null,M),et._renderBoxPlotMarkers(e,i,s,l,n,E),e._currentMarkers.push([x._medianLine])}}}},et._renderBoxPlotMarkers=function(e,i,n,o,r,s){for(var a=V.getMarkerBorderColor(e,n,o),l=V.getBorderWidth(e,n,o),h=new t.SolidStroke(a,null,l),u=[],d=k.getNestedDataItemCount(e,n,o),c=0;c<d;c++){var p=et._getMarkerInfo(e,n,o,c,r);if(p){z.isHorizontal(e)?p.y=s:p.x=s;var _=et._createMarker(e,p,a,l);null!=_&&u.push(_)}}et._addMarkersToContainer(e,i,u,h)},et._renderLines=function(t,e,i,n){var o,r=[],s=k.getSeriesCount(t);for(o=0;o<s;o++)V.isSeriesRendered(t,o)&&"line"==V.getSeriesType(t,o)&&r.push(o);for(var a=0;a<r.length;a++)o=r[a],"none"!=V.getLineType(t,o)&&(et._filterPointsForSeries(t,o),et._renderLinesForSeries(t,i,o,n));for(a=0;a<r.length;a++)et._renderMarkersForSeries(t,e,r[a],n)},et._renderAreas=function(t,e,i,n){for(var o=k.getSeriesCount(t),r=n?"lineWithArea":"area",s=[],a=[],l=0;l<o;l++)V.isSeriesRendered(t,l)&&V.getSeriesType(t,l)==r&&(k.isAssignedToY2(t,l)?a.push(l):s.push(l));s.length>0&&et._renderAreasForAxis(t,e,s,t.yAxis.getBaselineCoord(),i,n),a.length>0&&et._renderAreasForAxis(t,e,a,t.y2Axis.getBaselineCoord(),i,n)},et._renderAreasForAxis=function(e,i,n,r,s,a){for(var l=z.isStacked(e),h=et.createClippedGroup(e,i,s),u={},d={},c={},p={},_=[],f=k.getGroupCount(e),y=0;y<f;y++)_.push(new g(null,r,r,y,k.getGroup(e,y),!0));for(var v=0;v<n.length;v++){var S=n[v],C=k.getStackCategory(e,S),E=k.isSeriesNegative(e,S),b=u[C],T=d[C],A=c[C],O=p[C];if("none"!=V.getLineType(e,S)){var P=j.getAreaFill(e,S),I=V.getBorderColor(e,S),D=V.getBorderWidth(e,S),x=V.getAreaClassName(e,S),M=V.getAreaStyle(e,S),L=I?new t.SolidStroke(I,null,D):null,R=V.getLineType(e,S);et._filterPointsForSeries(e,S);var w,N,U,B=V.isRangeSeries(e,S);B?(w=et._getCoordsForSeries(e,S,s,"high"),N=et._getCoordsForSeries(e,S,s,"low"),U=R):E?(w=et._getAreaCoordsForSeries(e,S,s,A?A:_),N=A?A:[],U=O):(w=et._getAreaCoordsForSeries(e,S,s,b?b:_),N=b?b:[],U=T);var H=new m(e,!0,s,r,M,x,P,L,R,w,U,N);h.addChild(H),e._currentAreas.push(H),o.associate(H,e,S),E?(c[C]=w,p[C]=R):(u[C]=w,d[C]=R),l||((a||V.getDataItemGaps(e)>0&&!I)&&et._renderLinesForSeries(e,h,S,s,!a),a||et._renderMarkersForSeries(e,i,S,s),v+1<n.length&&(h=et.createClippedGroup(e,i,s)))}else et._renderMarkersForSeries(e,i,S,s)}for(v=0;v<n.length;v++)if(S=n[v],"none"!=V.getLineType(e,S)){var F=V.getBorderColor(e,S)||V.getBorderColor(e,S+1);l&&(a||V.getDataItemGaps(e)>0&&!F)&&et._renderLinesForSeries(e,h,S,s,!a),(l||a)&&et._renderMarkersForSeries(e,i,S,s)}},et._getAreaCoordsForSeries=function(t,e,i,n){for(var o=et._getCoordsForSeries(t,e,i),r=[],s=0;s<n.length;s++)r.push(n[s].clone());for(var a=o.length-1,l=z.isPolar(t),s=0;s<o.length;s++)if(null!=o[s].x){var h=r[o[s].groupIndex],u=l&&0==s?a:s-1,d=l&&s==a?0:s+1;u>=0&&null!=o[u].x&&(h.y1=o[s].y1),d<=a&&null!=o[d].x&&(h.y2=o[s].y2),h.x=o[s].x,h.filtered=h.y1==h.y2&&o[s].filtered}return r},et._renderLinesForSeries=function(e,i,n,r,s){var a;if(s){var l=2.5*V.getDataItemGaps(e);a=new t.SolidStroke(V.getBackgroundColor(e,!0),1,l)}else{var h=V.getColor(e,n),u=V.getLineWidth(e,n),d=t.Stroke.convertTypeString(V.getLineStyle(e,n));a=new t.SolidStroke(h,1,u),a.setStyle(d)}var c=k.isAssignedToY2(e,n)?e.y2Axis.getBaselineCoord():e.yAxis.getBaselineCoord(),p=V.getLineType(e,n),_=V.getClassName(e,n),g=V.getStyle(e,n),f=function(t){var s=et._getCoordsForSeries(e,n,r,t),l=new m(e,!1,r,c,g,_,null,a,p,s);i.addChild(l),o.associate(l,e,n)},y=V.isRangeSeries(e,n);y?(f("high"),f("low")):f("value")},et._filterScatterBubble=function(e,i,n){var o=k.getSeriesCount(e),r=k.getGroupCount(e);if(o*r<et.FILTER_THRESHOLD_SCATTER_BUBBLE)return null;for(var s,a=[],l=0;l<o;l++)if(V.isSeriesRendered(e,l))for(var h=0;h<r;h++)s=et._getScatterBubbleMarkerInfo(e,l,h,n),null!=s&&a.push(s);if(a.length<et.FILTER_THRESHOLD_SCATTER_BUBBLE)return null;i&&K.sortMarkerInfos(a);for(var u=new t.PixelMap(25,new t.PixelMap(5,new t.PixelMap)),d=[],c=a.length,p=c-1;p>=0;p--){s=a[p];var _=K.checkPixelMap(u,s.x,s.y,s.size);if(!_){var g=V.getColor(e,s.seriesIndex,s.groupIndex),m=V.isMarkerDisplayed(e,l,h),f=m?t.ColorUtils.getAlpha(g):0;f>0&&(K.updatePixelMap(u,s.x,s.y,s.size,f),d.push(s))}}return e.getCache().putToCache("dataFiltered",!0),d.reverse(),d},et._filterPointsForSeries=function(t,e){if(!z.isPolar(t)&&!V.isRangeSeries(t,e)){var i=t.__getPlotAreaSpace().w,n=k.getSeriesItem(t,e).items,o="bar"==V.getSeriesType(t,e),r=t.xAxis.getInfo(),s=(r.getDataMax()-r.getDataMin())/(r.getViewportMax()-r.getViewportMin()),a=o?.5:2,l=s?Math.round(a*(n.length/s)/i):1,h=o?2:3;if(l<h)for(var u=0;u<n.length;u++)g=n[u],g&&(g._filtered=!1);else{for(var d,c,p,_,g,m,f=!1,u=0;u<n.length;u+=l){d=-1,c=-(1/0),p=-1,_=1/0;for(var y=u;y<Math.min(u+l,n.length);y++)m=k.getCumulativeValue(t,e,y),g=n[y],null!=m&&null!=g&&((!o||m>0)&&m>c&&(d=y,c=m),(!o||m<0)&&m<_&&(p=y,_=m),g._filtered=!0,f=!0);for(var y=u;y<Math.min(u+l,n.length);y++)g=n[y],null!=g&&(y!=d&&y!=p||(g._filtered=!1))}t.getCache().putToCache("dataFiltered",f)}}},et._getCoordsForSeries=function(t,e,i,n){var o=t.xAxis,r=t.yAxis;k.isAssignedToY2(t,e)&&(r=t.y2Axis);for(var s=[],a=k.getViewportMinMaxGroupIndex(t,e),l=a.min-1;l<=a.max+1;l++){var h=k.getGroup(t,l);if(null!=h){var u=k.getXValue(t,e,l),d=null;if("low"==n?d=k.getLowValue(t,e,l):"high"==n?d=k.getHighValue(t,e,l):null!=k.getValue(t,e,l)&&(d=k.getCumulativeValue(t,e,l)),null!=d&&!isNaN(d)&&V.isDataItemRendered(t,e,l)){z.isPolar(t)&&(d=Math.max(d,r.getInfo().getViewportMin()));var c=o.getUnboundedCoordAt(u),p=r.getUnboundedCoordAt(d);if(null!=c&&null!=p){var _=new g(c,p,p,l,h,k.isDataItemFiltered(t,e,l));s.push(_)}else s.push(new g(null,null,null,l,h,!1))}else s.push(new g(null,null,null,l,h,!1))}}return s},et.createClippedGroup=function(e,i,n){var o=new t.Container(i.getCtx());i.addChild(o);var r=new t.ClipPath(e.getId()),s=et._extendClipGroup(e);if(z.isPolar(e)){var a=n.x+n.w/2,l=n.y+n.h/2;if(H.isGridPolygonal(e)){var h=t.PolygonUtils.getRegularPolygonPoints(a,l,k.getGroupCount(e),e.getRadius(),0);r.addPolygon(h)}else r.addCircle(a,l,e.getRadius())}else z.isHorizontal(e)?r.addRect(n.x-s,n.y,n.w+2*s,n.h):r.addRect(n.x,n.y-s,n.w,n.h+2*s);return o.setClipPath(r),o},et.polarToCartesian=function(e,i,n){var o=n.x+n.w/2+e*Math.sin(i),r=n.y+n.h/2-e*Math.cos(i);return new t.Point(o,r)},et.convertAxisCoord=function(e,i,n){if(z.isPolar(e)){var o=et.polarToCartesian(i.y,i.x,n);return new t.Point(o.x,o.y)}return z.isHorizontal(e)?new t.Point(i.y,i.x):new t.Point(i.x,i.y)},et._extendClipGroup=function(t){var e=z.hasLineSeries(t)||z.hasLineWithAreaSeries(t);if(e&&!z.isSpark(t)){var i=V.getLineWidth(t),n=function(t){var e=t.getInfo(),n=e.getCoordAt(e.getGlobalMax()),o=e.getCoordAt(e.getDataMax()),r=e.getCoordAt(e.getGlobalMin()),s=e.getCoordAt(e.getDataMin());return null!=n&&null!=o&&o-n<=i/2||null!=r&&null!=s&&r-s<=i/2};if(t.yAxis&&n(t.yAxis)||t.y2Axis&&n(t.y2Axis))return Math.ceil(i/2)}return 0};var it=new Object;t.Obj.createSubclass(it,t.Obj),it._DEFAULT_3D_GAP_RATIO=1/36,it._DEFAULT_2D_GAP_RATIO=1/70,it._MAX_WIDTH_FOR_GAPS=.25,it._GROUP_INDEX=0,it._ANGLE_EXTENT_THRESHOLD=1e-4,it.render=function(e,i,n){var o=new t.Container(e.getCtx());o.setTranslate(n.x,n.y),i.addChild(o),e.setPlotArea(o);var r;if("horizontal"==e.getOptions().orientation)r=new t.Rectangle(0,0,n.w,n.h);else{var s=new t.Matrix,a=t.Agent.isRightToLeft(e.getCtx())?-1:1;s.translate(-n.h/2,-n.w/2),s.rotate(a*Math.PI/2),s.translate(n.x+n.w/2,n.y+n.h/2),r=new t.Rectangle(0,0,n.h,n.w),o.setMatrix(s)}it._renderFunnelSlices(e,o,r)||J.renderEmptyText(e,i,n);var l=k.getInitialSelection(e);F.setInitialSelection(e,l),e.highlight(V.getHighlightedCategories(e))},it._renderFunnelSlices=function(t,e,i){for(var n=t.getOptions(),r=k.getSeriesCount(t),s=V.getDataItemGaps(t),a=("on"==n.styleDefaults.threeDEffect?it._DEFAULT_3D_GAP_RATIO:it._DEFAULT_2D_GAP_RATIO)*i.w,l=Math.min(it._MAX_WIDTH_FOR_GAPS*i.w/(r-1),a),h=s*l,u=0,d=0,c=0,p=0;p<r;p++)if(V.isDataItemRendered(t,p)){var _=k.getTargetValue(t,p);null==_&&(_=k.getValue(t,p,it._GROUP_INDEX)),_<=0||(u+=_)}if(0==u)return!1;for(var p=r-1;p>=0;p--)if(V.isDataItemRendered(t,p)){var _=k.getValue(t,p,it._GROUP_INDEX),g=k.getTargetValue(t,p);if(!(_<=0&&null==g||null!=g&&g<=0)){var m=g?g:_;if(!(m<it._ANGLE_EXTENT_THRESHOLD*u)){var f;null!=g?(c+=g/u,f=new E(t,p,d,i.w,i.h,1-c,g/u,_/g,h)):(c+=_/u,f=new E(t,p,d,i.w,i.h,1-c,_/u,null,h)),d++,e.addChild(f),o.associate(f,t,p,it._GROUP_INDEX)}}}return!0};var nt=new Object;t.Obj.createSubclass(nt,t.Obj),nt._DEFAULT_GAP_RATIO=1/70,nt._MAX_HEIGHT_FOR_GAPS=.25,nt._GROUP_INDEX=0,nt.render=function(e,i,n){var o=new t.Container(e.getCtx());o.setTranslate(n.x,n.y),i.addChild(o),e.setPlotArea(o);var r=new t.Rectangle(0,0,n.w,n.h);nt._renderPyramidSlices(e,o,r)||J.renderEmptyText(e,i,n);var s=k.getInitialSelection(e);F.setInitialSelection(e,s),e.highlight(V.getHighlightedCategories(e))},nt._renderPyramidSlices=function(t,e,i){for(var n=k.getSeriesCount(t),r=V.getDataItemGaps(t),s=nt._DEFAULT_GAP_RATIO*i.h,a=Math.min(nt._MAX_HEIGHT_FOR_GAPS*i.h/(n-1),s),l=r*a,h=0,u=0,d=0,c=0;c<n;c++)if(V.isDataItemRendered(t,c)){var p=k.getValue(t,c,nt._GROUP_INDEX);p<=0||(h+=p)}if(0==h)return!1;for(var c=0;c<n;c++)if(V.isDataItemRendered(t,c)){var p=k.getValue(t,c,nt._GROUP_INDEX);if(!(p<=0)){var _=new b(t,c,u,i.w,i.h,d,p/h,l);d+=p/h,u++,e.addChild(_),o.associate(_,t,c,nt._GROUP_INDEX)}}return!0};var ot=new Object;t.Obj.createSubclass(ot,t.Obj),ot.renderBackgroundObjects=function(t,e,i){ot._renderObjects(t,e,i,"back")},ot.renderForegroundObjects=function(t,e,i){ot._renderObjects(t,e,i,"front")},ot._renderObjects=function(t,e,i,n){ot._renderObjectsForAxis(t,e,i,n,t.xAxis,G.getAxisRefObjs(t,"x")),ot._renderObjectsForAxis(t,e,i,n,t.yAxis,G.getAxisRefObjs(t,"y")),ot._renderObjectsForAxis(t,e,i,n,t.y2Axis,G.getAxisRefObjs(t,"y2"))},ot._renderObjectsForAxis=function(t,e,i,n,o,s){if(s&&o)for(var a=0;a<s.length;a++){var l=s[a];if(G.isObjectRendered(t,l)&&l&&G.getLocation(l)==n){var h,u=G.getType(l);if("area"==u?h=ot._createReferenceArea(l,t,i,o):"line"==u&&(h=ot._createReferenceLine(l,t,i,o)),null!=h){var d=o==t.xAxis?"xAxis":o==t.yAxis?"yAxis":"y2Axis",c=new r(t,[h],l,a,d);t.registerObject(c),t.getEventManager().associate(h,c),e.addChild(h)}}}},ot._createReferenceArea=function(e,i,n,o){var r,s=i.getCtx(),a=o.getPosition(),l="top"==a||"bottom"==a,h="radial"==a,u=G.getColor(e),d=G.getLineType(e),c=e.style||e.svgStyle,p=e.className||e.svgClassName;if(null==e.items||o!=i.yAxis&&o!=i.y2Axis){var _=G.getLowValue(e),f=G.getHighValue(e);null!=_&&_!=-(1/0)||(_=o.getInfo().getGlobalMin()),null!=f&&f!=1/0||(f=o.getInfo().getGlobalMax());var y=ot._getAxisCoord(i,o,_),v=ot._getAxisCoord(i,o,f);if(z.isPolar(i)){var S,C=n.x+n.w/2,E=n.y+n.h/2;if(h)if(H.isGridPolygonal(i)){var b=k.getGroupCount(i),T=t.PolygonUtils.getRegularPolygonPoints(C,E,b,v,0,1),A=t.PolygonUtils.getRegularPolygonPoints(C,E,b,y,0,0);S=t.PathUtils.polyline(T)+t.PathUtils.polyline(A)+t.PathUtils.closePath()}else S=t.PathUtils.moveTo(C,E-v)+t.PathUtils.arcTo(v,v,Math.PI,1,C,E+v)+t.PathUtils.arcTo(v,v,Math.PI,1,C,E-v)+t.PathUtils.moveTo(C,E-y)+t.PathUtils.arcTo(y,y,Math.PI,0,C,E+y)+t.PathUtils.arcTo(y,y,Math.PI,0,C,E-y)+t.PathUtils.closePath();else{var O=i.getRadius(),P=et.polarToCartesian(O,y,n),I=et.polarToCartesian(O,v,n);S=t.PathUtils.moveTo(C,E)+t.PathUtils.lineTo(P.x,P.y)+t.PathUtils.arcTo(O,O,v-y,t.Agent.isRightToLeft(s)?0:1,I.x,I.y)+t.PathUtils.lineTo(I.x,I.y)+t.PathUtils.closePath()}r=new t.Path(s,S)}else{var D;D=l?[y,0,v,0,v,n.h,y,n.h]:[0,y,0,v,n.w,v,n.w,y],r=new t.Polygon(s,D)}r.setSolidFill(u),r.setStyle(c).setClassName(p)}else{var x=e.items,M=[],L=[];if(i.xAxis.isGroupAxis())for(;x.length<k.getGroupCount(i);)x.push(null);for(var R=0;R<x.length;R++){var w=x[R],N=G.getLowValue(w),U=G.getHighValue(w);if(null!=N&&null!=U){var B=o.getUnboundedCoordAt(N),F=o.getUnboundedCoordAt(U),j=i.xAxis.getUnboundedCoordAt(G.getXValue(i,x,R));M.push(new g(j,F,F)),L.push(new g(j,B,B))}else M.push(new g),L.push(new g)}r=new m(i,!0,n,null,c,p,new t.SolidFill(u),null,d,M,d,L)}return r},ot._createReferenceLine=function(e,i,n,o){var r=o.getPosition(),s="top"==r||"bottom"==r,a="radial"==r,l="tangential"==r,h=G.getLineWidth(e),u=G.getLineType(e),d=G.getColor(e),c=new t.SolidStroke(d,1,h),p=e.style||e.svgStyle,_=e.className||e.svgClassName;e.lineStyle&&c.setStyle(t.Stroke.convertTypeString(e.lineStyle));var f,y=i.getCtx();if(null==e.items||o!=i.yAxis&&o!=i.y2Axis){if(!e.value)return null;var v=ot._getAxisCoord(i,o,e.value);if(null==v||v==1/0||v==-(1/0))return null;var S=n.x+n.w/2,C=n.y+n.h/2;if(a){if(H.isGridPolygonal(i)){var E=t.PolygonUtils.getRegularPolygonPoints(S,C,k.getGroupCount(i),v,0);f=new t.Polygon(y,E)}else f=new t.Circle(y,S,C,v);f.setFill(null)}else if(l){var b=et.polarToCartesian(i.getRadius(),v,n);f=new t.Line(y,S,C,b.x,b.y)}else f=s?new t.Line(y,v,0,v,n.h):new t.Line(y,0,v,n.w,v),f.setPixelHinting(!0);f.setStroke(c),f.setStyle(p).setClassName(_)}else{var T=e.items,A=[],E=[];if(A.push(E),i.xAxis.isGroupAxis())for(;T.length<k.getGroupCount(i);)T.push(null);for(var O=[],P=0;P<T.length;P++){var I=T[P],D=null;if(null!=I&&("object"!=typeof I?D=I:null!=I.value&&(D=I.value)),null!=D){var x=o.getUnboundedCoordAt(D),M=i.xAxis.getUnboundedCoordAt(G.getXValue(i,T,P));O.push(new g(M,x,x))}else O.push(new g)}f=new m(i,!1,n,null,p,_,null,c,u,O)}return f},ot._getAxisCoord=function(t,e,i){if(e.isGroupAxis()){var n=k.getGroupIndex(t,i);if(n>=0)return e.getUnboundedCoordAt(n)}return isNaN(i)?null:e.getUnboundedCoordAt(i)},t.SparkChart=function(){},t.Obj.createSubclass(t.SparkChart,t.BaseComponent),t.SparkChart.newInstance=function(e,i,n){var o=new t.SparkChart;return o.Init(e,i,n),o},t.SparkChart.getDefaults=function(t){return(new st).getDefaults(t)},t.SparkChart.prototype.Init=function(e,i,n){t.SparkChart.superclass.Init.call(this,e,i,n),this.Defaults=new st,this.EventManager=new at(this),this.EventManager.addListeners(this),this._chart=t.Chart.newInstance(e,this._onRenderEnd,this),this.addChild(this._chart),t.Agent.isTouchDevice()||this.EventManager.setKeyboardHandler(new t.KeyboardHandler(this.EventManager,this)),this._tooltipMask=new t.Rect(e),this.addChild(this._tooltipMask),this.setId("sparkChart1000"+Math.floor(1e9*Math.random()))},t.SparkChart.prototype.SetOptions=function(e){e?(this.Options=this.Defaults.calcOptions(e),t.Agent.isEnvironmentBrowser()||(this.Options.animationOnDisplay="none",this.Options.animationOnDataChange="none")):this.Options||(this.Options=this.GetDefaults())},t.SparkChart.prototype.setId=function(e){t.SparkChart.superclass.setId.call(this,e),this._chart&&this._chart.setId(e+"chart")},t.SparkChart.prototype.render=function(e,i,n){this.SetOptions(e),isNaN(i)||isNaN(n)||(this.Width=i,this.Height=n),this._eventReceived=!1,this._isDoneRendering=!1,lt.render(this,this.Width,this.Height);var o=this.Options.shortDesc;this._tooltipMask.setWidth(this.Width),this._tooltipMask.setHeight(this.Height),this._tooltipMask.setInvisibleFill();var r=this.Options.tooltip,s=r?r.renderer:null,a=this.Options.color;if(s){var l={component:this.Options._widgetConstructor,color:a};this._peer=new t.CustomDatatipPeer(this.getCtx().getTooltipManager(),s,a,l),this.EventManager.associate(this._tooltipMask,this._peer)}else o?(this._peer=new t.SimpleObjPeer(null,o,a),this.EventManager.associate(this._tooltipMask,this._peer)):this._peer=null;this.Options._selectingCursor&&this.setCursor(t.SelectionEffectUtils.getSelectingCursor()),this.UpdateAriaAttributes(),this._eventReceived&&this.RenderComplete(),this._isDoneRendering=!0},t.SparkChart.prototype._onRenderEnd=function(t){this._eventReceived=!0,"ready"==t.type&&this._isDoneRendering&&this.RenderComplete()},t.SparkChart.prototype.__getChart=function(){return this._chart},t.SparkChart.prototype.getAutomation=function(){return new rt(this)},t.SparkChart.prototype.GetComponentDescription=function(){return t.Bundle.getTranslation(this.getOptions(),"componentName",t.Bundle.UTIL_PREFIX,"CHART")},t.SparkChart.prototype.UpdateAriaAttributes=function(){var e=t.Displayable.generateAriaLabel(t.StringUtils.processAriaLabel(this.GetComponentDescription()),this.Options.shortDesc?[this.Options.shortDesc]:null);this.IsParentRoot()?(this.getCtx().setAriaRole("img"),this.getCtx().setAriaLabel(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"DATA_VISUALIZATION"),e]))):(this.setAriaRole("img"),this.setAriaProperty("label",e))},t.SparkChart.prototype.__getLogicalObject=function(){return this._peer};var rt=function(t){this._sparkChart=t};t.Obj.createSubclass(rt,t.Automation),rt.prototype.getDataItem=function(t){var e=this._sparkChart.__getChart(),i=e.getAutomation().getDataItem(0,t);return i?{borderColor:i.borderColor,color:i.color,date:i.x,low:i.low,high:i.high,value:null==i.low||null==i.high?i.value:i.high-i.low}:null};var st=function(){this.Init({skyros:st.VERSION_1,alta:st.SKIN_ALTA})};t.Obj.createSubclass(st,t.BaseComponentDefaults),st.SKIN_ALTA={skin:t.CSSStyle.SKIN_ALTA,color:"#267db3"},st.VERSION_1={skin:t.CSSStyle.SKIN_SKYROS,type:"line",animationOnDisplay:"none",animationOnDataChange:"none",emptyText:null,color:"#666699",firstColor:null,lastColor:null,highColor:null,lowColor:null,visualEffects:"auto",baselineScaling:"min",barSpacing:"auto",lineWidth:1,lineStyle:"solid",lineType:"straight",markerSize:5,markerShape:"auto",barGapRatio:.25,_statusMessageStyle:new t.CSSStyle("font-size: 12px; color: #404259;")};var at=function(t){this.Init(t.getCtx(),t.dispatchEvent,t),this._sparkChart=t};t.Obj.createSubclass(at,t.EventManager),at.prototype.ProcessKeyboardEvent=function(e){if(!this.KeyboardHandler)return!1;if(e.keyCode==t.KeyboardEvent.TAB){var i=this._sparkChart.getCtx().getStageAbsolutePosition();this.ProcessObjectTooltip(e,i.x,i.y,this._sparkChart.__getLogicalObject(),this._sparkChart)}return!1},at.prototype.OnBlur=function(t){at.superclass.OnBlur.call(this,t),this.hideTooltip()};var lt=new Object;t.Obj.createSubclass(lt,t.Obj),lt.render=function(t,e,i){var n=t.__getChart(),o=lt._convertOptionsObj(t),r=t.getOptions();if("area"==r.type||"line"==r.type||"lineWithArea"==r.type){var s=lt._getDataItems(t),a=!1;if(r.firstColor||r.lastColor||r.highColor||r.lowColor)a=!0;else for(var l=0;l<s.length;l++)if(s[l]&&"on"==s[l].markerDisplayed){a=!0;break}if(a&&s.length>0||"none"==r.lineType){var h=r.markerSize/2;e-=2*h,i-=2*h,n.setTranslate(h,h)}}n.render(o,e,i)},lt._getDataItems=function(t){var e=t.getOptions();return e&&e.items?e.items:[]},lt._convertOptionsObj=function(e){var i=e.getOptions(),n={styleDefaults:{},xAxis:{},yAxis:{},groups:[]};n.translations=i.translations;for(var o=[],r=-1,s=-1,a=-(1/0),l=1/0,h=lt._getDataItems(e),u=0;u<h.length;u++){var d=h[u],c={};d instanceof Object?(c.value=d.value,c.low=d.low,c.high=d.high,d.date&&(n.timeAxisType="enabled",n.groups.push(d.date)),"on"==d.markerDisplayed&&(c.markerDisplayed="on"),d.color&&(c.color=d.color),d.borderColor&&(c.borderColor=d.borderColor),d.markerShape&&(c.markerShape=d.markerShape),d.markerSize&&(c.markerSize=d.markerSize),(d.className||d.svgClassName)&&(c.svgClassName=d.className||d.svgClassName),(d.style||d.svgStyle)&&(c.svgStyle=d.style||d.svgStyle)):c.value=d,o.push(c);var p=null!=c.value?c.value:Math.max(c.low,c.high);a<p&&(a=p,r=u);var _=null!=c.value?c.value:Math.min(c.low,c.high);l>_&&(l=_,s=u)}i.highColor&&r>=0&&(o[r].markerDisplayed="on",o[r].color||(o[r].color=i.highColor)),i.lowColor&&s>=0&&(o[s].markerDisplayed="on",o[s].color||(o[s].color=i.lowColor)),i.firstColor&&o.length>0&&(o[0].markerDisplayed="on",o[0].color||(o[0].color=i.firstColor)),i.lastColor&&o.length>0&&(o[o.length-1].markerDisplayed="on",o[o.length-1].color||(o[o.length-1].color=i.lastColor)),n.series=[{items:o,areaColor:i.areaColor,svgClassName:i.className||i.svgClassName,svgStyle:i.style||i.svgStyle,areaSvgClassName:i.areaClassName||i.areaSvgClassName,areaStyle:i.areaStyle||i.areaSvgStyle}],i.referenceObjects&&(n.yAxis.referenceObjects=i.referenceObjects),n.__spark=!0;var g=i.barSpacing;"auto"==g&&(g=t.Agent.getDevicePixelRatio()>1?"subpixel":"pixel"),n.__sparkBarSpacing=g,n.type=i.type,n.animationOnDataChange=i.animationOnDataChange,n.animationOnDisplay=i.animationOnDisplay,n.emptyText=i.emptyText,n.styleDefaults.colors=[i.color],n.styleDefaults.animationDuration=i.animationDuration,n.styleDefaults.animationIndicators="none",n.styleDefaults.lineWidth=i.lineWidth,n.styleDefaults.lineStyle=i.lineStyle,n.styleDefaults.lineType=i.lineType,n.styleDefaults.markerSize=i.markerSize,n.styleDefaults.markerShape=i.markerShape,n.styleDefaults.barGapRatio=i.barGapRatio,n.styleDefaults.dataItemGaps="0%",n.xAxis.rendered="off",n.yAxis.rendered="off";var m="zero"==i.baselineScaling,f=a!=l?.1*(a-l):.1*Math.abs(a);return n.yAxis.min=m&&l>=0?0:l-f,n.yAxis.max=m&&a<=0?0:a+f,"none"==i.visualEffects||"area"!=i.type&&"lineWithArea"!=i.type?n.styleDefaults.seriesEffect="color":n.styleDefaults.seriesEffect="gradient",n.layout={gapWidthRatio:0,gapHeightRatio:0},n.legend={rendered:"off"},n._statusMessageStyle=i._statusMessageStyle,n},t.exportProperty(t,"Chart",t.Chart),t.exportProperty(t.Chart,"newInstance",t.Chart.newInstance),t.exportProperty(t.Chart.prototype,"destroy",t.Chart.prototype.destroy),t.exportProperty(t.Chart.prototype,"getAutomation",t.Chart.prototype.getAutomation),t.exportProperty(t.Chart.prototype,"getDefaults",t.Chart.prototype.getDefaults),t.exportProperty(t.Chart.prototype,"getValuesAt",t.Chart.prototype.getValuesAt),t.exportProperty(t.Chart.prototype,"highlight",t.Chart.prototype.highlight),t.exportProperty(t.Chart.prototype,"positionDataCursor",t.Chart.prototype.positionDataCursor),t.exportProperty(t.Chart.prototype,"render",t.Chart.prototype.render),t.exportProperty(t.Chart.prototype,"select",t.Chart.prototype.select),t.exportProperty(e.prototype,"getDomElementForSubId",e.prototype.getDomElementForSubId),t.exportProperty(e.prototype,"getDataItem",e.prototype.getDataItem),t.exportProperty(e.prototype,"getGroup",e.prototype.getGroup),t.exportProperty(e.prototype,"getSeries",e.prototype.getSeries),t.exportProperty(e.prototype,"getGroupCount",e.prototype.getGroupCount),t.exportProperty(e.prototype,"getSeriesCount",e.prototype.getSeriesCount),t.exportProperty(e.prototype,"getTitle",e.prototype.getTitle),t.exportProperty(e.prototype,"getLegend",e.prototype.getLegend),t.exportProperty(e.prototype,"getPlotArea",e.prototype.getPlotArea),t.exportProperty(e.prototype,"getXAxis",e.prototype.getXAxis),t.exportProperty(e.prototype,"getYAxis",e.prototype.getYAxis),t.exportProperty(e.prototype,"getY2Axis",e.prototype.getY2Axis),t.exportProperty(s.prototype,"getId",s.prototype.getId),t.exportProperty(s.prototype,"getSeries",s.prototype.getSeries),t.exportProperty(s.prototype,"getGroup",s.prototype.getGroup),t.exportProperty(t,"SparkChart",t.SparkChart),t.exportProperty(t.SparkChart,"newInstance",t.SparkChart.newInstance),t.exportProperty(t.SparkChart.prototype,"destroy",t.SparkChart.prototype.destroy),t.exportProperty(t.SparkChart.prototype,"getAutomation",t.SparkChart.prototype.getAutomation),t.exportProperty(t.SparkChart.prototype,"getDefaults",t.SparkChart.prototype.getDefaults),t.exportProperty(t.SparkChart.prototype,"render",t.SparkChart.prototype.render),t.exportProperty(rt.prototype,"getDataItem",rt.prototype.getDataItem)}(t),t}),define("ojs/ojchart",["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojdvt-base","ojs/internal-deps/dvt/DvtChart"],function(t,e,i,n,o){t.__registerWidget("oj.ojSparkChart",e.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{},_CreateDvtComponent:function(t,e,i){return this._focusable({element:this.element,applyHighlight:!0}),o.SparkChart.newInstance(t,e,i)},_GetComponentStyleClasses:function(){var t=this._super();return t.push("oj-sparkchart"),t},_GetTranslationMap:function(){var t=this.options.translations,e=this._super();return e["DvtUtilBundle.CHART"]=t.componentName,e},_Render:function(){this.element.attr("title")?(this.options.shortDesc=this.element.attr("title"),this.element.data(this.element,"title",this.element.attr("title")),this.element.removeAttr("title")):this.element.data("title")&&(this.options.shortDesc=this.element.data("title")),this._super()},getDataItem:function(t){var e=this._component.getAutomation().getDataItem(t);return this._AddAutomationGetters(e),e&&(e.getFloatValue=e.getLow),e},_GetComponentDeferredDataPaths:function(){return{root:["items"]}},_AddAutomationGetters:function(t){if(t){var e={};for(var i in t)this._addGetter(t,i,e);Object.defineProperties(t,e)}},_addGetter:function(t,e,i){var n="selected"==e?"is":"get",o=n+e.charAt(0).toUpperCase()+e.slice(1);i[o]={value:function(){return t[e]}}}}),t.__registerWidget("oj.ojChart",e.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{optionChange:null,selectInput:null,viewportChange:null,viewportChangeInput:null,drill:null},_CreateDvtComponent:function(t,e,i){return o.Chart.newInstance(t,e,i)},_ConvertLocatorToSubId:function(t){var e=t.subId;return"oj-chart-item"==e?e="dataItem["+t.seriesIndex+"]["+t.itemIndex+"]":"oj-chart-group"==e?e="group"+this._GetStringFromIndexPath(t.indexPath):"oj-chart-series"==e?e="series["+t.index+"]":"oj-chart-axis-title"==e?e=t.axis+":title":"oj-chart-reference-object"==e?e=t.axis+":referenceObject["+t.index+"]":"oj-legend-section"==e?e="legend:section"+this._GetStringFromIndexPath(t.indexPath):"oj-legend-item"==e?(e="legend:section"+this._GetStringFromIndexPath(t.sectionIndexPath),e+=":item["+t.itemIndex+"]"):"oj-chart-tooltip"==e&&(e="tooltip"),e},_ProcessOptions:function(){this._super();var t=this.options.pieCenter;t&&t._renderer&&(t.renderer=this._GetTemplateRenderer(t._renderer,"center"));var e=this.options.selection;this._IsCustomElement()&&e&&"object"==typeof e[0]&&(this.options.selection=null)},_ConvertSubIdToLocator:function(t){var e={};if(0==t.indexOf("dataItem")){var i=this._GetIndexPath(t);e.subId="oj-chart-item",e.seriesIndex=i[0],e.itemIndex=i[1]}else if(0==t.indexOf("group"))e.subId="oj-chart-group",e.indexPath=this._GetIndexPath(t);else if(0==t.indexOf("series"))e.subId="oj-chart-series",e.index=this._GetFirstIndex(t);else if(t.indexOf("Axis:title")>0)e.subId="oj-chart-axis-title",e.axis=t.substring(0,t.indexOf(":"));else if(t.indexOf("Axis:referenceObject")>0)e.subId="oj-chart-reference-object",e.axis=t.substring(0,t.indexOf(":")),e.index=this._GetFirstIndex(t);else if(0==t.indexOf("legend"))if(t.indexOf(":item")>0){var n=t.indexOf(":item"),o=t.substring(0,n),r=t.substring(n);e.subId="oj-legend-item",e.sectionIndexPath=this._GetIndexPath(o),e.itemIndex=this._GetFirstIndex(r)}else 0==t.indexOf("section")&&(e.subId="oj-legend-section",e.indexPath=this._GetIndexPath(t));else"tooltip"==t&&(e.subId="oj-chart-tooltip");return e},_ProcessStyles:function(){if(this._super(),this.options.styleDefaults||(this.options.styleDefaults={}),!this.options.styleDefaults.colors){var e=new t.ColorAttributeGroupHandler;this.options.styleDefaults.colors=e.getValueRamp()}},_GetComponentStyleClasses:function(){var t=this._super();return t.push("oj-chart"),t},_GetChildStyleClasses:function(){var t=this._super();return t["oj-chart-data-label"]={path:"styleDefaults/dataLabelStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-stack-label"]={path:"styleDefaults/stackLabelStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-footnote"]={path:"footnote/style",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-pie-center-label"]={path:"pieCenter/labelStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-slice-label"]={path:"styleDefaults/sliceLabelStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-subtitle"]={path:"subtitle/style",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-stock-falling"]={path:"styleDefaults/stockFallingColor",property:"background-color"},t["oj-chart-stock-range"]={path:"styleDefaults/stockRangeColor",property:"background-color"},t["oj-chart-stock-rising"]={path:"styleDefaults/stockRisingColor",property:"background-color"},t["oj-chart-tooltip-label"]={path:"styleDefaults/tooltipLabelStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-title"]={path:"title/style",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-xaxis-tick-label"]={path:"xAxis/tickLabel/style",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-xaxis-title"]={path:"xAxis/titleStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-yaxis-tick-label"]={path:"yAxis/tickLabel/style",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-yaxis-title"]={path:"yAxis/titleStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-y2axis-tick-label"]={path:"y2Axis/tickLabel/style",property:"CSS_TEXT_PROPERTIES"},t["oj-chart-y2axis-title"]={path:"y2Axis/titleStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-legend"]={path:"legend/textStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-legend-title"]={path:"legend/titleStyle",property:"CSS_TEXT_PROPERTIES"},t},_GetEventTypes:function(){return["drill","optionChange","selectInput","viewportChange","viewportChangeInput"]},_GetTranslationMap:function(){var t=this.options.translations,e=this._super();return e["DvtChartBundle.DEFAULT_GROUP_NAME"]=t.labelDefaultGroupName,e["DvtChartBundle.LABEL_SERIES"]=t.labelSeries,
e["DvtChartBundle.LABEL_GROUP"]=t.labelGroup,e["DvtChartBundle.LABEL_VALUE"]=t.labelValue,e["DvtChartBundle.LABEL_TARGET_VALUE"]=t.labelTargetValue,e["DvtChartBundle.LABEL_X"]=t.labelX,e["DvtChartBundle.LABEL_Y"]=t.labelY,e["DvtChartBundle.LABEL_Z"]=t.labelZ,e["DvtChartBundle.LABEL_PERCENTAGE"]=t.labelPercentage,e["DvtChartBundle.LABEL_LOW"]=t.labelLow,e["DvtChartBundle.LABEL_HIGH"]=t.labelHigh,e["DvtChartBundle.LABEL_OPEN"]=t.labelOpen,e["DvtChartBundle.LABEL_CLOSE"]=t.labelClose,e["DvtChartBundle.LABEL_VOLUME"]=t.labelVolume,e["DvtChartBundle.LABEL_Q1"]=t.labelQ1,e["DvtChartBundle.LABEL_Q2"]=t.labelQ2,e["DvtChartBundle.LABEL_Q3"]=t.labelQ3,e["DvtChartBundle.LABEL_MIN"]=t.labelMin,e["DvtChartBundle.LABEL_MAX"]=t.labelMax,e["DvtChartBundle.LABEL_OTHER"]=t.labelOther,e["DvtChartBundle.PAN"]=t.tooltipPan,e["DvtChartBundle.MARQUEE_SELECT"]=t.tooltipSelect,e["DvtChartBundle.MARQUEE_ZOOM"]=t.tooltipZoom,e["DvtUtilBundle.CHART"]=t.componentName,e},_HandleEvent:function(t){var e=t.type;if("selection"===e){var i=t.selection;if(i){for(var n=[],o=[],r=0;r<i.length;r++){var s;s=this._IsCustomElement()?i[r].id:{id:i[r].id,series:i[r].series,group:i[r].group};var a={data:i[r].data,seriesData:i[r].seriesData,groupData:i[r].groupData};n.push(s),o.push(a)}var l={endGroup:t.endGroup,startGroup:t.startGroup,xMax:t.xMax,xMin:t.xMin,yMax:t.yMax,yMin:t.yMin,y2Max:t.y2Max,y2Min:t.y2Min,component:t.component,selectionData:o};t.complete?this._UserOptionChange("selection",n,l):(l.items=n,this._trigger("selectInput",null,l))}}else if("viewportChange"===e){var h={endGroup:t.endGroup,startGroup:t.startGroup,xMax:t.xMax,xMin:t.xMin,yMax:t.yMax,yMin:t.yMin};t.complete&&(this.options.xAxis||(this.options.xAxis={}),this.options.yAxis||(this.options.yAxis={}),this.options.xAxis.viewportStartGroup=null,this.options.xAxis.viewportEndGroup=null,null!=t.xMin&&null!=t.xMax&&(this.options.xAxis.viewportMin=t.xMin,this.options.xAxis.viewportMax=t.xMax),null!=t.yMin&&null!=t.yMax&&(this.options.yAxis.viewportMin=t.yMin,this.options.yAxis.viewportMax=t.yMax)),this._trigger(t.complete?"viewportChange":"viewportChangeInput",null,h)}else"drill"===e?this._trigger("drill",null,{id:t.id,series:t.series,group:t.group,data:t.data,seriesData:t.seriesData,groupData:t.groupData,component:t.component}):this._super(t)},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;e.overviewGrippy=t.Config.getResourceUrl("resources/internal-deps/dvt/chart/drag_horizontal.png"),e.panCursorDown=t.Config.getResourceUrl("resources/internal-deps/dvt/chart/hand-closed.cur"),e.panCursorUp=t.Config.getResourceUrl("resources/internal-deps/dvt/chart/hand-open.cur"),e.panUp="oj-chart-pan-icon",e.panUpHover="oj-chart-pan-icon oj-hover",e.panDown="oj-chart-pan-icon oj-active",e.panDownHover="oj-chart-pan-icon oj-hover oj-active",e.selectUp="oj-chart-select-icon",e.selectUpHover="oj-chart-select-icon oj-hover",e.selectDown="oj-chart-select-icon oj-active",e.selectDownHover="oj-chart-select-icon oj-hover oj-active",e.zoomUp="oj-chart-zoom-icon",e.zoomUpHover="oj-chart-zoom-icon oj-hover",e.zoomDown="oj-chart-zoom-icon oj-active",e.zoomDownHover="oj-chart-zoom-icon oj-hover oj-active"},getTitle:function(){var t=this._component.getAutomation();return t.getTitle()},getGroup:function(t){var e=this._component.getAutomation();return e.getGroup(t)},getSeries:function(t){var e=this._component.getAutomation();return e.getSeries(t)},getGroupCount:function(){var t=this._component.getAutomation();return t.getGroupCount()},getSeriesCount:function(){var t=this._component.getAutomation();return t.getSeriesCount()},getDataItem:function(t,e){return this._component.getAutomation().getDataItem(t,e)},getLegend:function(){return this._component.getAutomation().getLegend()},getPlotArea:function(){return this._component.getAutomation().getPlotArea()},getXAxis:function(){return this._component.getAutomation().getXAxis()},getYAxis:function(){return this._component.getAutomation().getYAxis()},getY2Axis:function(){return this._component.getAutomation().getY2Axis()},getValuesAt:function(t,e){return this._component.getValuesAt(t,e)},getContextByNode:function(t){var e=this.getSubIdByNode(t);return e&&"oj-chart-tooltip"!==e.subId?e:null},_GetComponentDeferredDataPaths:function(){return{root:["groups","series"]}}}),function(){var e={properties:{animationOnDataChange:{type:"string",enumValues:["auto","slideToLeft","slideToRight","none"]},animationOnDisplay:{type:"string",enumValues:["auto","alphaFade","zoom","none"]},coordinateSystem:{type:"string",enumValues:["polar","cartesian"]},dataCursor:{type:"string",enumValues:["on","off","auto"]},dataCursorBehavior:{type:"string",enumValues:["smooth","snap","auto"]},dataCursorPosition:{type:"object",properties:{x:{type:"string"},y:{type:"number"},y2:{type:"number"}},writeback:!0},dataLabel:{},dnd:{type:"object",properties:{drag:{type:"object",properties:{groups:{type:"object",properties:{dataTypes:{type:"Array<string>"},drag:{},dragEnd:{},dragStart:{}}},items:{type:"object",properties:{dataTypes:{type:"Array<string>"},drag:{},dragEnd:{},dragStart:{}}},series:{type:"object",properties:{dataTypes:{type:"Array<string>"},drag:{},dragEnd:{},dragStart:{}}}}},drop:{type:"object",properties:{legend:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}},plotArea:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}},xAxis:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}},y2Axis:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}},yAxis:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}}}}}},dragMode:{type:"string",enumValues:["pan","zoom","select","off","user"]},drilling:{type:"string",enumValues:["on","seriesOnly","groupsOnly","off"]},groups:{type:"Array<object>"},hiddenCategories:{type:"Array<string>",writeback:!0},hideAndShowBehavior:{type:"string",enumValues:["withRescale","withoutRescale","none"]},highlightedCategories:{type:"Array<string>",writeback:!0},highlightMatch:{type:"string",enumValues:["any","all"]},hoverBehavior:{type:"string",enumValues:["dim","none"]},initialZooming:{type:"string",enumValues:["first","last","none"]},legend:{type:"object",properties:{backgroundColor:{type:"string"},borderColor:{type:"string"},maxSize:{type:"string"},position:{type:"string",enumValues:["start","end","bottom","top","auto"]},referenceObjectSection:{type:"object",properties:{title:{type:"string"},titleHalign:{type:"string",enumValues:["center","end","start"]},titleStyle:{type:"object"}}},rendered:{type:"string",enumValues:["on","off","auto"]},scrolling:{type:"string",enumValues:["off","asNeeded"]},sections:{type:"Array<object>"},seriesSection:{type:"object",properties:{title:{type:"string"},titleHalign:{type:"string",enumValues:["center","end","start"]},titleStyle:{type:"object"}}},size:{type:"string"},symbolHeight:{type:"number"},symbolWidth:{type:"number"},textStyle:{type:"string"},title:{type:"string"},titleHalign:{type:"string"},titleStyle:{type:"string"}}},orientation:{type:"string",enumValues:["horizontal","vertical"]},otherThreshold:{type:"number"},overview:{type:"object",properties:{content:{type:"object"},height:{type:"string"},rendered:{type:"string",enumValues:["on","off"]}}},pieCenter:{type:"object",properties:{converter:{type:"object"},label:{type:"string"},labelStyle:{type:"object"},renderer:{},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]}}},pieCenterLabel:{type:"object",properties:{style:{type:"object"},text:{type:"string"}}},plotArea:{type:"object",properties:{backgroundColor:{type:"string"},borderColor:{type:"string"},borderWidth:{type:"number"},rendered:{type:"string",enumValues:["on","off"]}}},polarGridShape:{type:"string",enumValues:["polygon","circle"]},selection:{type:"Array<string>",writeback:!0},selectionMode:{type:"string",enumValues:["single","multiple","none"]},series:{type:"Array<object>"},sorting:{type:"string",enumValues:["ascending","descending","off"]},splitDualY:{type:"string",enumValues:["on","off","auto"]},splitterPosition:{type:"number"},stack:{type:"string",enumValues:["on","off"]},stackLabel:{type:"string",enumValues:["on","off"]},styleDefaults:{type:"object",properties:{animationDownColor:{type:"string"},animationDuration:{type:"number"},animationIndicators:{type:"string",enumValues:["none","all"]},animationUpColor:{type:"string"},barGapRatio:{type:"number"},borderColor:{type:"string"},borderWidth:{type:"number"},boxPlot:{type:"object",properties:{medianSvgClassName:{type:"string"},medianSvgStyle:{type:"object"},whiskerSvgClassName:{type:"string"},whiskerEndSvgClassName:{type:"string"},whiskerEndLength:{type:"string"},whiskerEndSvgStyle:{type:"object"},whiskerSvgStyle:{type:"object"}}},colors:{type:"Array<string>"},dataCursor:{type:"object",properties:{lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineWidth:{type:"number"},markerColor:{type:"string"},markerDisplayed:{type:"string",enumValues:["on","off"]},markerSize:{type:"number"}}},dataItemGaps:{type:"string"},dataLabelPosition:{type:"Array<string>",enumValues:["center","outsideSlice","aboveMarker","belowMarker","beforeMarker","afterMarker","insideBarEdge","outsideBarEdge","none","auto"]},dataLabelStyle:{type:"Array<string>"},funnelBackgroundColor:{type:"string"},groupSeparators:{type:"object",properties:{color:{type:"string"},rendered:{type:"string",enumValues:["on","off"]}}},hoverBehaviorDelay:{type:"number"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineType:{type:"string",enumValues:["straight","curved","stepped","centerStepped","segmented","centerSegmented","none","auto"]},lineWidth:{type:"number"},markerColor:{type:"string"},markerDisplayed:{type:"string",enumValues:["on","off","auto"]},markerShape:{type:"string",enumValues:["square","circle","diamond","plus","triangleDown","triangleUp","human","star","auto"]},markerSize:{type:"number"},marqueeBorderColor:{type:"string"},marqueeColor:{type:"string"},maxBarWidth:{type:"number"},otherColor:{type:"string"},patterns:{type:"Array<string>"},pieFeelerColor:{type:"string"},pieInnerRadius:{type:"number"},selectionEffect:{type:"string",enumValues:["explode","highlightAndExplode","highlight"]},seriesEffect:{type:"string",enumValues:["color","pattern","gradient"]},shapes:{type:"Array<string>"},stackLabelStyle:{type:"string"},stockFallingColor:{type:"string"},stockRangeColor:{type:"string"},stockRisingColor:{type:"string"},stockVolumeColor:{type:"string"},threeDEffect:{type:"string",enumValues:["on","off"]},tooltipLabelStyle:{type:"string"},tooltipValueStyle:{type:"string"}}},timeAxisType:{type:"string",enumValues:["enabled","mixedFrequency","skipGaps","disabled","auto"]},tooltip:{type:"object",properties:{renderer:{}}},touchResponse:{type:"string"},translations:{properties:{componentName:{type:"string"},labelClose:{type:"string"},labelDate:{type:"string"},labelDefaultGroupName:{type:"string"},labelGroup:{type:"string"},labelHigh:{type:"string"},labelLow:{type:"string"},labelOpen:{type:"string"},labelOther:{type:"string"},labelPercentage:{type:"string"},labelQ1:{type:"string"},labelQ2:{type:"string"},labelQ3:{type:"string"},labelSeries:{type:"string"},labelTargetValue:{type:"string"},labelValue:{type:"string"},labelVolume:{type:"string"},labelX:{type:"string"},labelY:{type:"string"},labelZ:{type:"string"},tooltipPan:{type:"string"},tooltipSelect:{type:"string"},tooltipZoom:{type:"string"}}},type:{type:"string",enumValues:["line","area","lineWithArea","stock","boxPlot","combo","pie","scatter","bubble","funnel","pyramid","bar"]},valueFormats:{type:"object",properties:{series:{type:"object",properties:{tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},group:{type:"object",properties:{tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},x:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},y:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},y2:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},z:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},value:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},targetValue:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},low:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},high:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},open:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},close:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},volume:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},q1:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},q2:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},q3:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}},label:{type:"object",properties:{converter:{type:"object"},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},tooltipDisplay:{type:"string",enumValues:["auto","off"]},tooltipLabel:{type:"string"}}}}},xAxis:{type:"object",properties:{axisLine:{type:"object",properties:{lineColor:{type:"string"},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["on","off"]}}},baselineScaling:{type:"string",enumValues:["min","zero"]},dataMax:{type:"number"},dataMin:{type:"number"},majorTick:{type:"object",properties:{baselineColor:{type:"string",enumValues:["inherit","auto"]},baselineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},baselineWidth:{type:"number"},lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["on","off","auto"]}}},max:{type:"string"},maxSize:{type:"string"},min:{type:"string"},minorStep:{type:"number"},minorTick:{type:"object",properties:{lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["on","off","auto"]}}},minStep:{type:"number"},referenceObjects:{type:"Array<object>"},rendered:{type:"string",enumValues:["off","on"]},scale:{type:"string",enumValues:["log","linear"]},size:{type:"string"},step:{type:"number"},tickLabel:{type:"object",properties:{converter:{type:"object"},rendered:{type:"string",enumValues:["off","on"]},rotation:{type:"string",enumValues:["none","auto"]},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},style:{type:"object"}}},title:{type:"string"},titleStyle:{type:"object"},viewportEndGroup:{type:"string"},viewportMax:{type:"string"},viewportMin:{type:"string"},viewportStartGroup:{type:"string"}}},y2Axis:{type:"object",properties:{alignTickMarks:{type:"string",enumValues:["off","on"]},axisLine:{type:"object",properties:{lineColor:{type:"string"},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["on","off","auto"]}}},baselineScaling:{type:"string",enumValues:["min","zero"]},dataMax:{type:"number"},dataMin:{type:"number"},majorTick:{type:"object",properties:{baselineColor:{type:"string",enumValues:["inherit","auto"]},baselineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},baselineWidth:{type:"number"},lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["off","on","auto"]}}},max:{type:"number"},maxSize:{type:"string"},min:{type:"number"},minorStep:{type:"number"},minorTick:{type:"object",properties:{lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["on","auto","off"]}}},minStep:{type:"number"},position:{type:"string",enumValues:["start","end","top","bottom","auto"]},referenceObjects:{type:"Array<object>"},rendered:{type:"string",enumValues:["off","on"]},scale:{type:"string",enumValues:["log","linear"]},size:{type:"string"},step:{type:"number"},tickLabel:{type:"object",properties:{converter:{type:"object"},position:{type:"string",enumValues:["inside","outisde"]},rendered:{type:"string",enumValues:["off","on"]},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},style:{type:"object"}}},title:{type:"string"},titleStyle:{type:"object"}}},yAxis:{type:"object",properties:{axisLine:{type:"object",properties:{lineColor:{type:"string"},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["off","on","auto"]}}},baselineScaling:{type:"string",enumValues:["min","zero"]},dataMax:{type:"number"},dataMin:{type:"number"},majorTick:{type:"object",properties:{baselineColor:{type:"string",enumValues:["inherit","auto"]},baselineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},baselineWidth:{type:"number"},lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["on","off","auto"]}}},max:{type:"number"},maxSize:{type:"string"},min:{type:"number"},minorStep:{type:"number"},minorTick:{type:"object",properties:{lineColor:{type:"string"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineWidth:{type:"number"},rendered:{type:"string",enumValues:["on","off","auto"]}}},minStep:{type:"number"},position:{type:"string",enumValues:["start","end","top","bottom","auto"]},referenceObjects:{type:"Array<object>"},rendered:{type:"string",enumValues:["off","on"]},scale:{type:"string",enumValues:["log","linear"]},size:{type:"string"},step:{type:"number"},tickLabel:{type:"object",properties:{converter:{type:"object"},position:{type:"string",enumValues:["inside","outside"]},rendered:{type:"string",enumValues:["off","on"]},scaling:{type:"string",enumValues:["none","auto","thousand","million","billion","trillion","quadrillion"]},style:{type:"object"}}},title:{type:"string"},titleStyle:{type:"object"},viewportMax:{type:"number"},viewportMin:{type:"number"}}},zoomAndScroll:{type:"string"},zoomDirection:{type:"string"}},methods:{getContextByNode:{},getDataItem:{},getGroup:{},getGroupCount:{},getLegend:{},getPlotArea:{},getSeries:{},getSeriesCount:{},getValuesAt:{},getXAxis:{},getY2Axis:{},getYAxis:{}},events:{drill:{},viewportChange:{},selectInput:{},viewportChangeInput:{}},extension:{_WIDGET_NAME:"ojChart"}};t.CustomElementBridge.registerMetadata("oj-chart","dvtBaseComponent",e),t.CustomElementBridge.register("oj-chart",{metadata:t.CustomElementBridge.getMetadata("oj-chart")})}(),function(){var e={properties:{animationDuration:{type:"number"},animationOnDataChange:{type:"string",enumValues:["auto","none"]},animationOnDisplay:{type:"string",enumValues:["auto","none"]},areaSvgClassName:{type:"string"},areaColor:{type:"string"},areaSvgStyle:{type:"object"},barGapRatio:{type:"number"},baselineScaling:{type:"string",enumValues:["zero","min"]},svgClassName:{type:"string"},color:{type:"string"},firstColor:{type:"string"},highColor:{type:"string"},items:{type:"Array<number>"},lastColor:{type:"string"},lineStyle:{type:"string",enumValues:["dotted","dashed","solid"]},lineType:{type:"string",enumValues:["curved","stepped","centerStepped","segmented","centerSegmented","none","straight"]},lineWidth:{type:"number"},lowColor:{type:"string"},markerShape:{type:"string",enumValues:["square","circle","diamond","plus","triangleDown","triangleUp","human","auto"]},markerSize:{type:"number"},referenceObjects:{type:"Array<object>"},svgStyle:{type:"object"},tooltip:{type:"object"},type:{type:"string",enumValues:["line","lineWithArea","bar","line"]},visualEffects:{type:"string",enumValues:["none","auto"]}},methods:{getDataItem:{}},extension:{_WIDGET_NAME:"ojSparkChart"}};t.CustomElementBridge.registerMetadata("oj-spark-chart","dvtBaseComponent",e),t.CustomElementBridge.register("oj-spark-chart",{metadata:t.CustomElementBridge.getMetadata("oj-spark-chart")})}()}),define("ojs/internal-deps/dvt/DvtGauge",["./DvtToolkit","./DvtAxis"],function(t){return function(t){var e=function(){};t.Obj.createSubclass(e,t.BaseComponent),e._DEFAULT_MIN_VALUE=0,e._DEFAULT_MAX_VALUE=100,e.prototype.Init=function(i,n,o,r){e.superclass.Init.call(this,i,n,o),this._bStaticRendering=r,this._bStaticRendering||(this.EventManager=this.CreateEventManager(),this.EventManager.addListeners(this),t.Agent.isTouchDevice()||this.EventManager.setKeyboardHandler(this.CreateKeyboardHandler(this.EventManager)),this.setId("gauge1000"+Math.floor(1e9*Math.random())),this._editingOverlay=new t.Rect(i,0,0),this._editingOverlay.setInvisibleFill(),this.addChild(this._editingOverlay)),this._bEditing=!1,this._bResizeRender=!1,this._oldValue=null},e.prototype.SetOptions=function(e){this.Options=e,t.Agent.isEnvironmentBrowser()||(this.Options.animationOnDisplay="none",this.Options.animationOnDataChange="none"),t.Agent.isPlatformIE()&&"auto"==this.Options.visualEffects&&(this.Options.visualEffects="none"),e.className&&(this.Options.svgClassName=e.className),e.style&&(this.Options.svgStyle=e.style)},e.prototype.render=function(i,n,o){if(i?this.SetOptions(i):this.Options||this.SetOptions(null),this.Options.thresholds){var r=this.Options.thresholds;this.Options.thresholds=r.sort(e._thresholdComparator)}isNaN(n)||isNaN(o)||(0!=this.Width&&this.Width!=n||0!=this.Height&&this.Height!=o?this._bResizeRender=!0:this._bResizeRender=!1,this.Width=n,this.Height=o);var s=this.__shapes;this.__shapes=[];var a=new t.Container(this.getCtx());if(this.addChildAt(a,0),this.Render(a,this.Width,this.Height),this._setAnimation(a,null!=i,s,this.Width,this.Height),this._editingOverlay&&(this._editingOverlay.setWidth(this.Width),this._editingOverlay.setHeight(this.Height),this.getEventManager().associate(this._editingOverlay,this.__getLogicalObject(),!0)),this.UpdateAriaAttributes(),!this._bStaticRendering&&!this.Options.readOnly){a.setAriaRole("slider"),a.setAriaProperty("valuemin",this.Options.min),a.setAriaProperty("valuemax",this.Options.max);var h=l.getFormattedMetricLabel(this.Options.value,this);a.setAriaProperty("valuenow",h);var u=l.getTooltipString(this);t.Agent.isTouchDevice()&&(this._container.setAriaProperty("live","assertive"),h!=u&&(u=h+t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"ARIA_LABEL_DESC_DELIMITER")+u)),h!=u&&a.setAriaProperty("label",u),this._renderCount=null!=this._renderCount?this._renderCount+1:0;var d=this.getId()+"_"+this._renderCount;a.setId(d),this.getCtx().setActiveElement(a)}this.Options._selectingCursor&&this.setCursor(t.SelectionEffectUtils.getSelectingCursor()),this.Animation||this.RenderComplete()},e.prototype.__getLogicalObject=function(){var e=this.Options.tooltip,i=e?e.renderer:null,n=a.getColor(this);if(i){var o={component:this.Options._widgetConstructor,label:l.getFormattedMetricLabel(this.Options.value,this),color:n};return new t.CustomDatatipPeer(this.getCtx().getTooltipManager(),i,n,o)}var r=l.getTooltipString(this);return new t.SimpleObjPeer(null,r,n)},e.prototype.Render=function(t,e,i){},e.prototype._setAnimation=function(e,i,n,o,r){this.StopAnimation();var s=!1,a=this._bEditing||this._bResizeRender?"none":this.getOptions().animationOnDataChange,l=this._bEditing||this._bResizeRender?"none":this.getOptions().animationOnDisplay,h=t.StyleUtils.getTimeMilliseconds(this.getOptions().animationDuration)/1e3;if(l||a){var u=new t.Rectangle(0,0,o,r),d=this.getCtx();this._container||"none"===l||null==this.__shapes[0]?this._container&&"none"!=a&&i&&null!=this.__shapes[0]&&(this.Animation=t.BlackBoxAnimationHandler.getCombinedAnimation(d,a,this._container,e,u,h),this.Animation?s=!0:this.Animation=this.CreateAnimationOnDataChange(n,this.__shapes,l,h)):(this.Animation=t.BlackBoxAnimationHandler.getInAnimation(d,l,e,u,h),this.Animation||(this.Animation=this.CreateAnimationOnDisplay(this.__shapes,l,h))),!s&&this._container&&(this.removeChild(this._container),this._container.destroy()),this.Animation&&(this.Animation.play(),this.Animation.setOnEnd(this._onAnimationEnd,this)),s&&(this._oldContainer=this._container),this._container=e}},e.prototype.CreateAnimationOnDisplay=function(t,e,i){return null},e.prototype.CreateAnimationOnDataChange=function(e,i,n,o){for(var r=[],s=0;s<e.length;s++){var a=e[s],l=i[s],h=a.getAnimationParams(),u=l.getAnimationParams();l.setAnimationParams(h);var d=new t.CustomAnimation(this.getCtx(),l,o);d.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,l,l.getAnimationParams,l.setAnimationParams,u),r.push(d)}return new t.ParallelPlayable(this.getCtx(),r)},e.prototype.GetValueAt=function(t,e){return null},e.prototype.renderUpdate=function(){this.render(),this.UpdateAriaLiveValue(this._container)},e.prototype.UpdateAriaLiveValue=function(e,i){i=l.getFormattedMetricLabel(i?i:this.Options.value,this),e.setAriaProperty("valuenow",i),t.Agent.isTouchDevice()&&e.setAriaProperty("label",i)},e.prototype._onAnimationEnd=function(){this._oldContainer&&(this.removeChild(this._oldContainer),this._oldContainer.destroy(),this._oldContainer=null),this.AnimationStopped||this.RenderComplete(),this.Animation=null,this.AnimationStopped=!1},e.prototype.__processValueChangeStart=function(t,e){this._bEditing=!0,this._oldValue=this.Options.value,this.__processValueChangeMove(t,e)},e.prototype.__processValueChangeMove=function(e,i){if(null!=this._oldValue){var n=l.adjustForStep(this.Options,this.GetValueAt(e,i));n!=this.Options.value&&(this.Options.value=n,this.renderUpdate(),this.dispatchEvent(t.EventFactory.newValueChangeEvent(this._oldValue,this.Options.value,!1)))}},e.prototype.__processValueChangeEnd=function(e,i){if(this.__processValueChangeMove(e,i),t.Agent.isTouchDevice()){var n=l.getFormattedMetricLabel(this.Options.value,this),o=l.getTooltipString(this);n!=o&&(o=n+t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"ARIA_LABEL_DESC_DELIMITER")+o,this._container.setAriaProperty("label",o))}this.dispatchEvent(t.EventFactory.newValueChangeEvent(this._oldValue,this.Options.value,!0)),this._bEditing=!1,this._oldValue=null},e.prototype.__increaseValue=function(){if(!this.Options.readOnly){var e=this.Options.value;if(null!=this.Options.step){var i=this.Options.value+this.Options.step;this.Options.value=l.adjustForStep(this.Options,i)}else{var n=(this.Options.max-this.Options.min)/100;this.Options.value=Math.min(Math.max(this.Options.value+n,this.Options.min),this.Options.max)}this.render(),this.dispatchEvent(t.EventFactory.newValueChangeEvent(e,this.Options.value,!0))}},e.prototype.__decreaseValue=function(){if(!this.Options.readOnly){var e=this.Options.value;if(null!=this.Options.step){var i=this.Options.value-this.Options.step;this.Options.value=l.adjustForStep(this.Options,i)}else{var n=(this.Options.max-this.Options.min)/100;this.Options.value=Math.min(Math.max(this.Options.value-n,this.Options.min),this.Options.max)}this.render(),this.dispatchEvent(t.EventFactory.newValueChangeEvent(e,this.Options.value,!0))}},e.prototype.CreateEventManager=function(){return new r(this)},e._thresholdComparator=function(t,e){return null!=t.max&&null!=e.max?t.max-e.max:t.max?-(1/0):1/0},e.prototype.getAutomation=function(){return new i(this)},e.prototype.CreateKeyboardHandler=function(t){return new s(t,this)},e.prototype.GetComponentDescription=function(){return t.Bundle.getTranslation(this.getOptions(),"componentName",t.Bundle.UTIL_PREFIX,"GAUGE")},e.prototype.UpdateAriaAttributes=function(){if(!this._bStaticRendering){var e=l.getTooltipString(this);this.IsParentRoot()?this.Options.readOnly?(this.getCtx().setAriaRole("img"),this.getCtx().setAriaLabel(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"DATA_VISUALIZATION"),t.Displayable.generateAriaLabel(t.StringUtils.processAriaLabel(this.GetComponentDescription()),e?[e]:null)]))):(this.getCtx().setAriaRole("application"),this.getCtx().setAriaLabel(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"DATA_VISUALIZATION"),t.StringUtils.processAriaLabel(this.GetComponentDescription())]))):this.Options.readOnly&&(this.setAriaRole("img"),this.setAriaProperty("label",t.Displayable.generateAriaLabel(t.StringUtils.processAriaLabel(this.GetComponentDescription()),e?[e]:null)))}};var i=function(t){this._gauge=t};t.Obj.createSubclass(i,t.Automation),i.prototype.getDomElementForSubId=function(e){if(e==t.Automation.TOOLTIP_SUBID)return this.GetTooltipElement(this._gauge);if(0==e.indexOf("item")){var i=e.indexOf("["),n=e.indexOf("]");if(i>0&&n>0){var o=e.substring(i+1,n),r=this._gauge.__getRatingGaugeItem(o);if(r)return r.getElem()}}return null},i.prototype.GetSubIdForDomElement=function(t){for(var e=this._gauge,i=e.getOptions(),n=0;n<i.max;n++){var o=this._gauge.__getRatingGaugeItem(n);if(o==t)return"item["+n+"]"}return null},i.prototype.getValue=function(){return this._gauge.getOptions().value},i.prototype.getMetricLabel=function(){return l.getFormattedMetricLabel(this.getValue(),this._gauge)},t.Bundle.addDefaultStrings(t.Bundle.GAUGE_PREFIX,{});var n=function(){};t.Obj.createSubclass(n,t.BaseComponentDefaults),n.SKIN_ALTA={skin:t.CSSStyle.SKIN_ALTA,color:"#393737",metricLabel:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA)
},_statusMessageStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA),label:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA)},_thresholdColors:["#ed6647","#fad55c","#68c182"]},n.VERSION_1={skin:t.CSSStyle.SKIN_SKYROS,min:0,max:100,center:{},color:"#313842",borderColor:null,visualEffects:"auto",emptyText:null,animationOnDataChange:"none",animationOnDisplay:"none",animationDuration:500,readOnly:"true",metricLabel:{rendered:"auto",scaling:"auto",style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS),textType:"number"},_statusMessageStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS),label:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS),position:"auto"},_thresholdColors:["#D62800","#FFCF21","#84AE31"],__layout:{outerGap:1,labelGap:5}},n.prototype.Init=function(e){var i={skyros:t.JsonUtils.merge(e.skyros,n.VERSION_1),alta:t.JsonUtils.merge(e.alta,n.SKIN_ALTA)};n.superclass.Init.call(this,i)},n.isSkyrosSkin=function(e){return e.getOptions().skin==t.CSSStyle.SKIN_SKYROS};var o=new Object;t.Obj.createSubclass(o,t.Obj),o.hasData=function(t){var e=t.getOptions();return e&&null!=e.value&&o.hasValidData(t)},o.hasValidData=function(t){var e=t.getOptions();return Number(e.min)<Number(e.max)},o.getValueThresholdIndex=function(t,e){var i=t.getOptions(),n=null!=e?e:i.value,o=i.thresholds;if(!o)return-1;for(var r=0;r<o.length;r++)if(n<=o[r].max)return r;return o.length-1},o.getThreshold=function(t,e){var i=t.getOptions().thresholds;return i&&e>=0&&e<i.length?i[e]:null},o.getReferenceObject=function(t,e){var i=t.getOptions(),n=i.referenceLines;return n&&e>=0&&e<n.length?n[e]:null};var r=function(t){this.Init(t.getCtx(),t.dispatchEvent,t),this._gauge=t,this.IsMouseEditing=!1};t.Obj.createSubclass(r,t.EventManager),r.prototype.OnMouseDown=function(t){if(this._gauge.getOptions().readOnly===!1){this.IsMouseEditing=!0,this.hideTooltip();var e=this.GetRelativePosition(t.pageX,t.pageY);this._gauge.__processValueChangeStart(e.x,e.y),t.preventDefault()}else r.superclass.OnMouseDown.call(this,t)},r.prototype.OnMouseUp=function(t){if(this.IsMouseEditing){this.IsMouseEditing=!1;var e=this.GetRelativePosition(t.pageX,t.pageY);this._gauge.__processValueChangeEnd(e.x,e.y)}else r.superclass.OnMouseUp.call(this,t)},r.prototype.OnMouseMove=function(t){if(this.IsMouseEditing){var e=this.GetRelativePosition(t.pageX,t.pageY);this._gauge.__processValueChangeMove(e.x,e.y)}!this.IsShowingTooltipWhileEditing()&&this.IsMouseEditing||r.superclass.OnMouseMove.call(this,t)},r.prototype.IsShowingTooltipWhileEditing=function(){return!1},r.prototype.PreEventBubble=function(e){if(t.TouchEvent.TOUCHSTART===e.type&&this._gauge.getOptions().readOnly===!1){this.IsMouseEditing=!0;var i=this.GetRelativePosition(e.touches[0].pageX,e.touches[0].pageY);this._gauge.__processValueChangeStart(i.x,i.y),e.preventDefault()}else if(t.TouchEvent.TOUCHMOVE===e.type&&this.IsMouseEditing){var i=this.GetRelativePosition(e.touches[0].pageX,e.touches[0].pageY);this._gauge.__processValueChangeMove(i.x,i.y),e.preventDefault()}else if(t.TouchEvent.TOUCHEND===e.type&&this.IsMouseEditing){this.IsMouseEditing=!1;var i=this.GetRelativePosition(e.changedTouches[0].pageX,e.changedTouches[0].pageY);this._gauge.__processValueChangeEnd(i.x,i.y),e.preventDefault()}this.IsMouseEditing&&!this.IsShowingTooltipWhileEditing()||r.superclass.PreEventBubble.call(this,e)},r.prototype.ProcessKeyboardEvent=function(e){if(!this.KeyboardHandler)return!1;this.KeyboardHandler.processKeyDown(e);var i=e.keyCode;if(i==t.KeyboardEvent.UP_ARROW||i==t.KeyboardEvent.LEFT_ARROW||i==t.KeyboardEvent.DOWN_ARROW||i==t.KeyboardEvent.RIGHT_ARROW||i==t.KeyboardEvent.TAB){var n=this._gauge.getCtx().getStageAbsolutePosition();this.ProcessObjectTooltip(e,n.x,n.y,this._gauge.__getLogicalObject(),this._gauge)}return!1},r.prototype.OnBlur=function(t){r.superclass.OnBlur.call(this,t),this.hideTooltip()},r.prototype.GetRelativePosition=function(t,e){var i=this.getCtx().pageToStageCoords(t,e);return this._gauge.stageToLocal(i)},r.prototype.UpdateActiveElement=function(t,e){},r.prototype.__isMouseEditing=function(){return this.IsMouseEditing};var s=function(t,e){this.Init(t,e)};t.Obj.createSubclass(s,t.KeyboardHandler),s.prototype.Init=function(t,e){s.superclass.Init.call(this,t),this._gauge=e},s.prototype.processKeyDown=function(e){var i=e.keyCode,n=t.Agent.isRightToLeft(this._gauge.getCtx());i==t.KeyboardEvent.UP_ARROW||i==(n?t.KeyboardEvent.LEFT_ARROW:t.KeyboardEvent.RIGHT_ARROW)?(this._gauge.__increaseValue(),t.EventManager.consumeEvent(e)):i!=t.KeyboardEvent.DOWN_ARROW&&i!=(n?t.KeyboardEvent.RIGHT_ARROW:t.KeyboardEvent.LEFT_ARROW)||(this._gauge.__decreaseValue(),t.EventManager.consumeEvent(e))};var a=new Object;t.Obj.createSubclass(a,t.Obj),a._THRESHOLD_COLOR_RAMP=["#ed6647","#fad55c","#68c182"],a._SKYROS_THRESHOLD_COLOR_RAMP=["#D62800","#FFCF21","#84AE31"],a._ALTA_CIRCLE={startAngle:202.5,angleExtent:225,anchorX:100,anchorY:103,metricLabelBounds:{x:80,y:86,width:40,height:34},indicatorLength:.85,tickLabelHeight:20,tickLabelWidth:30,radius:60,majorTickCount:6},a._ALTA_DOME={startAngle:202.5,angleExtent:225,anchorX:100,anchorY:103,metricLabelBounds:{x:83,y:86,width:34,height:34},indicatorLength:.85,tickLabelHeight:20,tickLabelWidth:30,radius:60,majorTickCount:6},a._ALTA_RECTANGLE={startAngle:202.5,angleExtent:225,anchorX:100,anchorY:103,metricLabelBounds:{x:83,y:86,width:34,height:34},indicatorLength:.85,tickLabelHeight:20,tickLabelWidth:30,radius:60,majorTickCount:6},a._ANTIQUE_CIRCLE={startAngle:220.5,angleExtent:261.1,anchorX:100,anchorY:100,metricLabelBounds:{x:82,y:133,width:36,height:34},indicatorLength:.85,tickLabelHeight:20,tickLabelWidth:30,radius:61,majorTickCount:6},a._ANTIQUE_DOME={startAngle:195.5,angleExtent:210.8,anchorX:100,anchorY:100,metricLabelBounds:{x:84,y:135,width:32,height:35},indicatorLength:.98,tickLabelHeight:20,tickLabelWidth:30,radius:63,majorTickCount:6},a._ANTIQUE_RECTANGLE={startAngle:207.6,angleExtent:235,anchorX:100,anchorY:95.8,metricLabelBounds:{x:83,y:125,width:34,height:40},indicatorLength:1.05,tickLabelHeight:20,tickLabelWidth:30,radius:64,majorTickCount:6},a._LIGHT_CIRCLE={startAngle:220.5,angleExtent:261.1,anchorX:100,anchorY:100,metricLabelBounds:{x:80,y:82,width:40,height:40},indicatorLength:.82,tickLabelHeight:20,tickLabelWidth:30,radius:58,majorTickCount:6},a._LIGHT_DOME={startAngle:201,angleExtent:222,anchorX:100.2,anchorY:89,metricLabelBounds:{x:80,y:70,width:41,height:39},indicatorLength:1.23,tickLabelHeight:20,tickLabelWidth:30,radius:56,majorTickCount:6},a._LIGHT_RECTANGLE={startAngle:211,angleExtent:242,anchorX:100,anchorY:91.445,metricLabelBounds:{x:78,y:75,width:44,height:38},indicatorLength:1.1,tickLabelHeight:20,tickLabelWidth:30,radius:58,majorTickCount:6},a._DARK_CIRCLE={startAngle:220.5,angleExtent:261.5,metricLabelBounds:{x:80,y:82,width:40,height:40},indicatorLength:.85,tickLabelHeight:20,tickLabelWidth:30,radius:60,majorTickCount:6},a._DARK_DOME={startAngle:201,angleExtent:222,anchorX:100.2,anchorY:89,metricLabelBounds:{x:80,y:73,width:40,height:36},indicatorLength:1.23,tickLabelHeight:20,tickLabelWidth:30,radius:56,majorTickCount:6},a._DARK_RECTANGLE={startAngle:201,angleExtent:222,anchorX:100.2,anchorY:99.5,metricLabelBounds:{x:80,y:83,width:41,height:36},indicatorLength:1.1,tickLabelHeight:20,tickLabelWidth:30,radius:58,majorTickCount:6},a._ANTIQUE_INDICATOR={anchorX:42,anchorY:510},a._ALTA_INDICATOR={anchorX:187,anchorY:388},a._LIGHT_INDICATOR={anchorX:227,anchorY:425},a._DARK_INDICATOR={anchorX:227,anchorY:425},a.getColor=function(e){var i=e.getOptions(),n=o.getValueThresholdIndex(e),r=o.getThreshold(e,n);return!r||e instanceof t.StatusMeterGauge&&!(e instanceof t.StatusMeterGauge&&"onIndicator"==i.thresholdDisplay)?i.color:a.getThresholdColor(e,r,n)},a.getBorderColor=function(e){var i=e.getOptions(),n=o.getValueThresholdIndex(e),r=o.getThreshold(e,n);return r&&r.borderColor&&(!(e instanceof t.StatusMeterGauge)||e instanceof t.StatusMeterGauge&&"onIndicator"==i.thresholdDisplay)?r.borderColor:i.borderColor},a.getPlotAreaColor=function(e){var i=e.getOptions(),n=o.getValueThresholdIndex(e),r=o.getThreshold(e,n);return!r||e instanceof t.StatusMeterGauge&&!(e instanceof t.StatusMeterGauge&&"onIndicator"!=i.thresholdDisplay)?i.plotArea.color:a.getThresholdColor(e,r,n)},a.getPlotAreaBorderColor=function(e){var i=e.getOptions(),n=i.plotArea.borderColor;return e instanceof t.StatusMeterGauge&&"circular"!=i.orientation&&null==n?"skyros"==i.skin?"#C6C6C6":"#D6DFE6":n},a.getThresholdColor=function(t,e,i){if(e.color)return e.color;var n=t.getOptions(),o=n._thresholdColors,r=i%o.length;return n._thresholdColors[r]},a.getDialBackground=function(t){return"rectangleAlta"===t?a._ALTA_RECTANGLE:"domeAlta"===t?a._ALTA_DOME:"circleAntique"===t?a._ANTIQUE_CIRCLE:"rectangleAntique"===t?a._ANTIQUE_RECTANGLE:"domeAntique"===t?a._ANTIQUE_DOME:"circleLight"===t?a._LIGHT_CIRCLE:"rectangleLight"===t?a._LIGHT_RECTANGLE:"domeLight"===t?a._LIGHT_DOME:"circleDark"===t?a._DARK_CIRCLE:"rectangleDark"===t?a._DARK_RECTANGLE:"domeDark"===t?a._DARK_DOME:a._ALTA_CIRCLE},a.getDialIndicator=function(t){return"needleAntique"===t?a._ANTIQUE_INDICATOR:"needleLight"===t?a._LIGHT_INDICATOR:"needleDark"===t?a._DARK_INDICATOR:a._ALTA_INDICATOR},a.hasLabel=function(t){return!!t.label.text};var l=new Object;t.Obj.createSubclass(l,t.Obj),l.renderEmptyText=function(e,i,n){var r=e.getOptions(),s=r.emptyText;s||(s=t.Bundle.getTranslation(r,"labelNoData",t.Bundle.UTIL_PREFIX,"NO_DATA",null)),o.hasValidData(e)||(s=t.Bundle.getTranslation(r,"labelInvalidData",t.Bundle.UTIL_PREFIX,"INVALID_DATA",null));var a=r._statusMessageStyle;if(a.getStyle("font-size")||a.setStyle("font-size","13px"),e instanceof t.StatusMeterGauge){var l=a.getStyle("color");l=l?l:"#333333",a.setStyle("color",l)}t.TextUtils.renderEmptyText(i,s,new t.Rectangle(n.x,n.y,n.w,n.h),e.getEventManager(),a)},l.getFormattedMetricLabel=function(t,e){var i=e.getOptions();if(i.metricLabel.text)return i.metricLabel.text;var n=i.metricLabel.converter,o=i.metricLabel.scaling,r=i.metricLabel.autoPrecision?i.metricLabel.autoPrecision:"on",s="percent"==i.metricLabel.textType;return l._formatMetricLabelValue(t,e,n,o,r,s)},l.formatTickLabelValue=function(t,e){var i=e.getOptions(),n=null,o="percent"==i.tickLabel.textType;"on"==i.tickLabel.rendered&&i.tickLabel.converter&&(n=i.tickLabel.converter);var r=null;"on"==i.tickLabel.rendered&&i.tickLabel.scaling&&(r=i.tickLabel.scaling);var s=i.tickLabel.autoPrecision?i.tickLabel.autoPrecision:"on";return l._formatMetricLabelValue(t,e,n,r,s,o)},l._formatMetricLabelValue=function(e,i,n,o,r,s){var a,h=i.getOptions(),u=h.min,d=h.max,c=d-u,p=c<1e3?100:1e3,_=null;isNaN(c)||(_=c/p),s&&(e=l.getFillPercentage(h,h.min,h.max,e,!0));var g=new t.LinearScaleAxisValueFormatter(i.getCtx(),u,d,_,o,r);return a=n&&n.getAsString?g.format(e,n):n&&n.format?g.format(e,n):s?Math.round(100*e):g.format(e),s?String(a)+"%":a},l.getFillPercentage=function(t,e,i,n,o){var r=(n-e)/(t.max-t.min);return r=o?r:Math.min(Math.max(0,r),1)},l.getTooltipString=function(e){var i=e.getOptions(),n=o.getValueThresholdIndex(e),r=o.getThreshold(e,n),s=l.getFormattedMetricLabel(i.value,e);return r&&null!=r.shortDesc?r.shortDesc:null!=i.shortDesc?i.shortDesc:i.label.text?t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[i.label.text,s]):s},l.renderMetricLabel=function(e,i,n,o,r,s,a){var h=e.getOptions(),u=!1;if("on"==h.metricLabel.rendered||a&&"off"!=h.metricLabel.rendered){var d=l.getFormattedMetricLabel(h.value,e),c=l.getFormattedMetricLabel(h.min,e),p=l.getFormattedMetricLabel(h.max,e),_=new t.OutputText(e.getCtx(),d,n.x+n.w/2,n.y+n.h/2);_.setCSSStyle(h.metricLabel.style);var g=h.metricLabel.style.getStyle("font-size");g=g?parseInt(g):null,g||(g=l.calcLabelFontSize([d,c,p],_,n),_.setTextString(d),_.setFontSize(g)),"top"==s?(_.setY(n.y),_.alignTop()):"middle"==s?t.TextUtils.centerTextVertically(_,n.y+n.h/2):"bottom"==s&&(_.setY(n.y+n.h),_.alignBottom()),"center"==r?_.alignCenter():"left"==r?(_.setX(n.x),_.alignLeft()):"right"==r&&(_.setX(n.x+n.w),_.alignRight()),null!=o&&_.setSolidFill(o),u=t.TextUtils.fitText(_,n.w,n.h,i)}return u},l.renderLabel=function(e,i,n,o,r){var s=e.getOptions(),l=!1;if(a.hasLabel(s)){var h=s.label.text,u=s.label.style,d=new t.MultilineText(e.getCtx(),h),c=u.clone();d.setCSSStyle(u);var p=u.getStyle("font-size");if(p=p?parseInt(p):null,!p){var _=new t.OutputText(e.getCtx(),h,0,0);_.setCSSStyle(u),p=_.getOptimalFontSize(n),c.setFontSize("font-size",p.toString())}null!=o&&c.setStyle("color",o),d.setCSSStyle(c),l=t.TextUtils.fitText(d,n.w,n.h,e);var g=t.TextUtils.getTextHeight(d);"top"==r?d.setY(n.y):"bottom"==r?d.setY(n.y+n.h-g):d.setY(n.y+n.h/2-g/2),d.setX(n.x+n.w/2),d.alignCenter(),i.addChild(d)}return l},l.calcLabelFontSize=function(t,e,i){for(var n=0,o=null,r=0,s=0;s<t.length;s++)e.setTextString(t[s]),r=e.measureDimensions().w,r>n&&(o=t[s],n=r);return e.setTextString(o),e.getOptimalFontSize(i)},l.adjustForStep=function(t,e){var i=Number(t.step);if(i&&i>0){var n=(e-t.min)/i;if(n>.5){var o=Math.round(n)*i+t.min;return Math.max(Math.min(t.max,o),t.min)}return t.min}return e},t.LedGauge=function(){},t.Obj.createSubclass(t.LedGauge,e),t.LedGauge.newInstance=function(e,i,n,o){var r=new t.LedGauge;return r.Init(e,i,n,o),r},t.LedGauge.prototype.Init=function(e,i,n,o){t.LedGauge.superclass.Init.call(this,e,i,n,o),this.Defaults=new h},t.LedGauge.prototype.SetOptions=function(e){e=t.JsonUtils.clone(e),e.title&&(e.label=e.title),t.LedGauge.superclass.SetOptions.call(this,this.Defaults.calcOptions(e)),"auto"==this.Options.animationOnDisplay&&(this.Options.animationOnDisplay="zoom"),"auto"==this.Options.animationOnDataChange&&(this.Options.animationOnDataChange="alphaFade"),this.Options.readOnly=!0},t.LedGauge.prototype.Render=function(t,e,i){u.render(this,t,e,i)};var h=function(){this.Init({skyros:h.VERSION_1,alta:{}})};t.Obj.createSubclass(h,n),h.VERSION_1={type:"circle"};var u=new Object;t.Obj.createSubclass(u,t.Obj),u._SKYROS_SHAPE_TRIANGLE_CMDS="M-42,36.6Q-50,36.6,-46.54,28.6L-4,-43.07Q0,-50,4,-43.07L46.54,28.6Q50,36.6,42,36.6Z",u._SHAPE_TRIANGLE_CMDS=[-50,36.6,0,-50,50,36.6],u._SKYROS_SHAPE_TRIANGLE_INNER_CMDS=[-50,36.6,0,-50,50,36.6],u._SKYROS_SHAPE_STAR_CMDS=[-13.05,-12.94,-50,-11.13,-21.06,11.9,-30.74,47.6,.1,27.18,31.06,47.44,21.17,11.79,50,-11.39,13.05,-13.01,-.06,-47.59],u._SHAPE_STAR_CMDS=[-50,-11.22,-16.69,-17.94,0,-47.55,16.69,-17.94,50,-11.22,26.69,13.8,30.9,47.56,0,33.42,-30.9,47.56,-26.69,13.8],u._SKYROS_SHAPE_ARROW_CMDS="M0,45L21,45Q24.414,44.414,25,41L25,10L42,10Q48.5,9.1,45,4L2,-38Q0,-39,-2,-38L-45,4Q-48.5,9.1,-42,10L-25,10L-25,41Q-24.414,44.414,-21,45Z",u._SHAPE_ARROW_CMDS=[25,48,25,8,47.5,8,0,-39,-47.5,8,-25,8,-25,48],u._SKYROS_SHAPE_ARROW_INNER_CMDS=[25,48,25,8,47.5,8,0,-39,-47.5,8,-25,8,-25,48],u._SHAPE_HUMAN_CMDS="M -0.06059525142297417 -50.86842065108466 C -11.4496388584463 -50.86842065108466 -20.708163169810554 -39.024253028220556 -20.708163169810554 -24.413724255650386 C -20.708163169810554 -9.803195483080515 -11.4496388584463 2.040972139783591 -0.06059525142297417 2.040972139783591 C 11.328499974520241 2.040972139783591 20.586972666964613 -9.803195483080515 20.586972666964613 -24.413724255650386 C 20.586972666964613 -39.024253028220556 11.328499974520241 -50.86842065108466 -0.06059525142297417 -50.86842065108466 z M -23.93434565705865 -2.959610715450779 C -30.908061721494278 3.3998402034127153 -42.00096758564793 18.817121073473572 -38.77478509839983 33.65756051481475 C -20.651382358034887 47.30044101688934 14.372054723529814 49.13162219665128 39.298831093003386 32.85101489300273 C 40.26410489318826 16.477493533721187 32.34060070450674 4.7883891459240715 23.167918656763206 -2.959610715450779 C 11.553661702670112 21.074158341552575 -11.029615708066558 16.237465556670102 -23.93434565705865 -2.959610715450779 z ",u.render=function(e,i,n,r){if(o.hasData(e)){var s=e.getOptions(),h=s.__layout.outerGap,d=s&&(s.size>=0||s.size<1)?Math.sqrt(s.size):1,c=new t.Rectangle(h+(n-2*h)*(1-d)/2,h+(r-2*h)*(1-d)/2,(n-2*h)*d,(r-2*h)*d);u._renderShape(e,i,c),u._renderVisualEffects(e,i,c);var p=!1,_=t.ColorUtils.getContrastingTextColor(a.getColor(e));if(a.hasLabel(s)){var g="middle",m=u._getMetricLabelBounds(e,i,c);"on"==s.metricLabel.rendered&&(m.y=m.y+.6*m.h,m.h=.4*m.h,g="top"),p=t.Agent.isHighContrast()||null==s.label.style.getStyle("color")?l.renderLabel(e,i,m,_,g):l.renderLabel(e,i,m,null,g)}if("on"==s.metricLabel.rendered){var f=u._getMetricLabelBounds(e,i,c),y="middle";p&&(f.h=.55*f.h,y="bottom"),t.Agent.isHighContrast()||null==s.metricLabel.style.getStyle("color")?l.renderMetricLabel(e,i,f,_,"center",y):l.renderMetricLabel(e,i,f,null,"center",y)}}else l.renderEmptyText(e,i,new t.Rectangle(0,0,n,r))},u._renderShape=function(e,i,o){var r=e.getCtx(),s=e.getOptions(),l=s.type,h=a.getColor(e),d=a.getBorderColor(e),c=o.x+o.w/2,p=o.y+o.h/2,_=Math.min(o.w,o.h)/2,g=n.isSkyrosSkin(e);u._cache||(u._cache=new t.Cache(50));var m,f,y=Math.min(o.w/100,o.h/100);if("square"==l)m=new t.Rect(r,c-_,p-_,2*_,2*_);else if("rectangle"==l)m=new t.Rect(r,o.x,o.y,o.w,o.h);else if("diamond"==l)m=new t.Polygon(r,[c-_,p,c,p-_,c+_,p,c,p+_]);else if("circle"==l)m=new t.Circle(r,c,p,_);else{if("star"==l)f=g?u._SKYROS_SHAPE_STAR_CMDS:u._SHAPE_STAR_CMDS;else if("triangle"==l)f=g?u._SKYROS_SHAPE_TRIANGLE_CMDS:u._SHAPE_TRIANGLE_CMDS;else if("arrow"==l)f=g?u._SKYROS_SHAPE_ARROW_CMDS:u._SHAPE_ARROW_CMDS;else if("human"==l)f=u._SHAPE_HUMAN_CMDS;else if(f=u._cache.get(l),!f){m=new t.Path(r,l);var v=t.DisplayableUtils.getDimForced(r,m),S=100/Math.max(v.w,v.h);f=t.PathUtils.transformPath(l,-S*(v.x+v.w/2),-S*(v.y+v.h/2),S,S),u._cache.put(l,f)}(g||"triangle"!=l&&"arrow"!=l)&&"star"!=l?(f=t.PathUtils.transformPath(f,o.x+o.w/2,o.y+o.h/2,y,y),m=new t.Path(r,f)):(f=t.PolygonUtils.scale(f,y,y),f=t.PolygonUtils.translate(f,o.x+o.w/2,o.y+o.h/2),m=new t.Polygon(r,f))}if(g||"none"==s.visualEffects)m.setSolidFill(h);else{var C=[t.ColorUtils.adjustHSL(h,0,-.09,.04),t.ColorUtils.adjustHSL(h,0,-.04,-.05)],E=s&&s.rotation%90==0?s.rotation:0,b="arrow"==l||"star"==l||"triangle"==l?E-90:270;m.setFill(new t.LinearGradientFill(b,C,[1,1],[0,1]))}d&&m.setSolidStroke(d),m.setClassName(s.svgClassName),m.setStyle(s.svgStyle);var E=g?s.rotation+90:s.rotation;E&&("arrow"==l||"triangle"==l||m instanceof t.Path&&"human"!=l)&&(m=u._rotate(e,i,m,o)),i.addChild(m)},u._rotate=function(e,i,n,o){var r=e.getOptions(),s=new t.Container(e.getCtx());i.addChild(s),s.addChild(n);var a=r&&r.rotation%90==0?r.rotation:0,l=new t.Matrix;l.rotate(Math.PI*a/180),n.setMatrix(l);var h=s.getDimensions(),u=o.x+o.w/2-(h.x+h.w/2),d=o.y+o.h/2-(h.y+h.h/2),c=new t.Matrix;return c.translate(u,d),s.setMatrix(c),s},u._renderVisualEffects=function(t,e,i){var o=t.getOptions(),r=o.type;"none"!=o.visualEffects&&n.isSkyrosSkin(t)&&("circle"==r?u._renderOverlayCircle(t,e,i):"diamond"==r?u._renderOverlayDiamond(t,e,i):"triangle"==r?u._renderOverlayTriangle(t,e,i):"arrow"==r?u._renderOverlayArrow(t,e,i):u._renderOverlayRectangle(t,e,i))},u._renderOverlayRectangle=function(e,i,n){var o=.04*n.w,r=.04*n.h,s=new t.Rectangle(n.x+o,n.y+r,n.w-2*o,n.h-2*r),a=new t.Rect(e.getCtx(),s.x,s.y,s.w,s.h);a.setMouseEnabled(!1),i.addChild(a);var l=["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],h=[.75,.5,.15,0,.2,.4,.2],u=[0,.05,.4,.6,.8,.9,1],d=new t.LinearGradientFill(270,l,h,u);a.setFill(d)},u._renderOverlayDiamond=function(e,i,n){var o=.05*n.w,r=.05*n.h,s=new t.Rectangle(n.x+o,n.y+r,n.w-2*o,n.h-2*r),a=s.x+s.w/2,l=s.y+s.h/2,h=Math.min(s.w,s.h)/2,u=new t.Polygon(e.getCtx(),[a-h,l,a,l-h,a+h,l,a,l+h]);u.setMouseEnabled(!1),i.addChild(u);var d=["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],c=[.75,.5,.15,0,.2,.4,.2],p=[0,.05,.4,.6,.8,.9,1],_=new t.LinearGradientFill(270,d,c,p);u.setFill(_)},u._renderOverlayTriangle=function(e,i,o){var r=.05*o.w,s=.05*o.h,a=n.isSkyrosSkin(e),l=new t.Rectangle(o.x+r,o.y+s,o.w-2*r,o.h-2*s),h=u._SKYROS_SHAPE_TRIANGLE_INNER_CMDS,d=Math.min(l.w/100,l.h/100);h=t.PolygonUtils.scale(h,d,d),h=t.PolygonUtils.translate(h,o.x+o.w/2,o.y+o.h/2);var c=new t.Polygon(e.getCtx(),h),p=e.getOptions(),_=p&&p.rotation%90==0?p.rotation:0,g=a?_-90:360-_,m=["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],f=[.3,.55,0,.25,.1],y=[0,.05,.4,.9,1],v=new t.LinearGradientFill(g,m,f,y);c.setFill(v),c=u._rotate(e,i,c,l),c.setMouseEnabled(!1),i.addChild(c)},u._renderOverlayArrow=function(e,i,o){var r=.05*o.w,s=.05*o.h,a=n.isSkyrosSkin(e),l=new t.Rectangle(o.x+r,o.y+s,o.w-2*r,o.h-2*s),h=u._SKYROS_SHAPE_ARROW_INNER_CMDS,d=Math.min(l.w/100,l.h/100);h=t.PolygonUtils.scale(h,d,d),h=t.PolygonUtils.translate(h,o.x+o.w/2,o.y+o.h/2);var c=new t.Polygon(e.getCtx(),h),p=e.getOptions(),_=p&&p.rotation%90==0?p.rotation:0,g=a?_-90:360-_,m=["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],f=[.3,.55,0,.25,.1],y=[0,.05,.4,.9,1],v=new t.LinearGradientFill(g,m,f,y);c.setFill(v),c=u._rotate(e,i,c,l),c.setMouseEnabled(!1),i.addChild(c)},u._renderOverlayCircle=function(e,i,n){var o=.05*n.w,r=.05*n.h,s=new t.Rectangle(n.x+o,n.y+r,n.w-2*o,n.h-2*r),a=s.x+s.w/2,l=s.y+s.h/2,h=Math.min(s.w,s.h)/2,u=new t.Circle(e.getCtx(),a,l,h);u.setMouseEnabled(!1),i.addChild(u);var d=["#FFFFFF","#FFFFFF","#FFFFFF"],c=[0,.25,.5],p=[.15,.7,.95],_=a,g=l-.6*h,m=1.5*h,f=new t.RadialGradientFill(d,c,p,_,g,m,[s.x,s.y,s.w,s.h]);u.setFill(f);var y=.6*h,v=.4*h;l-=.3*v;var S=new t.Oval(e.getCtx(),a,l-v,y,v);S.setMouseEnabled(!1),i.addChild(S);var C=["#FFFFFF","#FFFFFF","#FFFFFF"],E=[0,.2,.5],b=[.6,.8,1],T=a,A=l,O=y,P=new t.RadialGradientFill(C,E,b,T,A,O,[s.x,s.y,s.w,s.h]);S.setFill(P)},u._getMetricLabelBounds=function(e,i,n){var o=e.getOptions(),r=o.type,s=o.rotation%90==0?o.rotation:0,a=Math.min(n.w,n.h),l=n.x+n.w/2-a/2,h=n.y+n.h/2-a/2,u=a,d=a;return"triangle"==r?0==s?(l+=.2*a,h+=.25*a,u-=.4*a,d-=.3*a):90==s?(l+=.05*a,h+=.2*a,u-=.3*a,d-=.4*a):180==s?(l+=.2*a,h+=.05*a,u-=.4*a,d-=.3*a):270==s&&(l+=.25*a,h+=.2*a,u-=.3*a,d-=.4*a):"arrow"==r?0==s?(l+=.2*a,h+=.2*a,u-=.4*a,d-=.4*a):90==s?(l+=.05*a,h+=.2*a,u-=.28*a,d-=.4*a):180==s?(l+=.2*a,h+=.2*a,u-=.4*a,d-=.4*a):270==s&&(l+=.23*a,h+=.2*a,u-=.28*a,d-=.4*a):"star"==r?(l+=.25*a,h+=.25*a,u-=.5*a,d-=.4*a):"diamond"==r?(l+=.15*a,h+=.15*a,u-=.3*a,d-=.3*a):"rectangle"==r?(l+=.1*a,h+=.1*a,u-=.2*a,d-=.2*a):(l+=.15*a,h+=.15*a,u-=.3*a,d-=.3*a),new t.Rectangle(l,h,u,d)},t.StatusMeterGauge=function(){},t.Obj.createSubclass(t.StatusMeterGauge,e),t.StatusMeterGauge.newInstance=function(e,i,n){var o=new t.StatusMeterGauge;return o.Init(e,i,n),o},t.StatusMeterGauge.prototype.Init=function(e,i,n){t.StatusMeterGauge.superclass.Init.call(this,e,i,n),this.Defaults=new d,this.__axisInfo=null},t.StatusMeterGauge.prototype.SetOptions=function(e){e=t.JsonUtils.clone(e),e.title&&(e.label=e.title),e.plotArea&&(e.plotArea.className&&(e.plotArea.svgClassName=e.plotArea.className),e.plotArea.style&&(e.plotArea.svgStyle=e.plotArea.style)),t.StatusMeterGauge.superclass.SetOptions.call(this,this.Defaults.calcOptions(e))},t.StatusMeterGauge.prototype.Render=function(t,e,i){c.render(this,t,e,i)},t.StatusMeterGauge.prototype.CreateAnimationOnDisplay=function(e,i,n){for(var o=[],r=0;r<e.length;r++){var s=e[r],a=s.getAnimationParams();"horizontal"==this.Options.orientation?s.setAnimationParams([a[0],a[0],a[2],a[3]]):"vertical"==this.Options.orientation?s.setAnimationParams([a[0],a[1],a[3],a[3]]):"circular"==this.Options.orientation&&s.setAnimationParams([a[0],a[1],0,a[3],a[4]]);var l=new t.CustomAnimation(this.getCtx(),s,n);l.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,s,s.getAnimationParams,s.setAnimationParams,a),l.getAnimator().setEasing(function(e){return t.Easing.backOut(e,.7)}),o.push(l)}return new t.ParallelPlayable(this.getCtx(),o)},t.StatusMeterGauge.prototype.GetValueAt=function(e,i){var n=this.Options,o=t.Agent.isRightToLeft(this.getCtx());if("horizontal"==n.orientation)return this.__axisInfo.getBoundedValueAt(e);if("vertical"==n.orientation)return this.__axisInfo.getBoundedValueAt(i);if("circular"==n.orientation){var r=n.angleExtent,s=Math.atan2(i-this.cy,e-this.cx),a=o?180-(t.Math.radsToDegrees(s)-n.startAngle):t.Math.radsToDegrees(s)-(360-n.startAngle);a=(a+720)%360;var l=a/r,h=n.min,u=n.max,d=l*(u-h)+h;return a>r&&(d=(a-r)/(360-r)>.5?0:u),d}};var d=function(){this.Init({skyros:d.VERSION_1,alta:d.SKIN_ALTA})};t.Obj.createSubclass(d,n),d.SKIN_ALTA={color:"#393737",metricLabel:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA)},plotArea:{color:"#E4E8EA"}},d.VERSION_1={angleExtent:360,borderRadius:"auto",color:"#313842",indicatorSize:1,innerRadius:.7,metricLabel:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS),position:"auto"},orientation:"horizontal",plotArea:{color:"#AAAAAA",rendered:"auto",borderRadius:"auto"},startAngle:90,thresholdDisplay:"onIndicator"};var c=new Object;t.Obj.createSubclass(c,t.Obj),c.render=function(e,i,n,r){if(o.hasData(e)){var s=e.getOptions(),a=s.__layout.outerGap,h=new t.Rectangle(a,a,n-2*a,r-2*a);"horizontal"==s.orientation||"vertical"==s.orientation?(c._hasMetricLabelOutsidePlotArea(s)&&c._renderMetricLabelOutsidePlotArea(e,i,h),c._renderShape(e,i,h)):"circular"==s.orientation&&c._renderCircularGauge(e,i,h)}else l.renderEmptyText(e,i,new t.Rectangle(0,0,n,r))},c._renderCircularGauge=function(e,i,n){var o,r=e.getOptions(),s=n.clone(),h=t.Agent.isRightToLeft(e.getCtx()),u=0,d=null,p=r.value,_=r.innerRadius,g=r.thresholds,m=null,f=t.Math.TWO_PI-t.Math.degreesToRads(r.startAngle),y=t.Math.degreesToRads(r.angleExtent),v=(f+y)%(2*Math.PI);e.cx=n.w/2,e.cy=n.h/2,y!=2*Math.PI&&(d=c._adjustCenterAndBounds(e,_,f,y,v,n,h),m=e.maxInnerDiameter),o=o?o:Math.min(n.w,n.h);var S=.5*o*_,C=.5*o,E=r.indicatorSize;if(E&&E>1){var b=(1-1/E)/2*(C-S);S+=b,C-=b}var T="center",A="middle";d||(m=Math.min(n.w,n.h)*_,d=new t.Rectangle(n.x+n.w/2-m*(3/7),n.y+n.h/2-m*(2.5/7),m*(6/7),m*(5/7)));var O=!1;if(a.hasLabel(r)){var P="middle",I=new t.Rectangle(d.x,d.y,d.w,d.h);"off"!=r.metricLabel.rendered&&(I.y=I.y+.6*I.h,I.h=.4*I.h,P="top"),O=l.renderLabel(e,i,I,null,P),O&&"off"!=r.metricLabel.rendered&&(d.h=.55*d.h,A="bottom")}l.renderMetricLabel(e,i,d,null,T,A,!0);var D=f,x=u*y,M=a.getPlotAreaBorderColor(e);if(g&&"off"!=r.plotArea.rendered&&"all"==r.thresholdDisplay)for(var L=0;L<g.length;L++){var R=a.getThresholdColor(e,g[L],L),w=g[L].max<r.max?g[L].max:r.max,N=0==L?r.min:g[L-1].max;D=f+y*l.getFillPercentage(r,r.min,w,N),u=l.getFillPercentage(r,N,w,w),x=u*y;var U=g[L].borderColor;c._drawCircularArc(e,i,n,D,x,S,C,R,!0,U?U:M)}else if("off"!=r.plotArea.rendered&&"all"!=r.thresholdDisplay){var B=a.getPlotAreaColor(e);c._drawCircularArc(e,i,n,f,y,S,C,B,!0,M)}if(S=o*_*.5,C=.5*o,E&&E<1){var H=(1-E)/2*(C-S);S+=H,C-=H}u=l.getFillPercentage(r,r.min,r.max,p),x=u*y,c._drawCircularArc(e,i,n,f,x,S,C,a.getColor(e),!1);var k=r.referenceLines;if(k)for(var F=0;F<k.length;F++){var G=k[F].color?k[F].color:"black",j=k[F].lineWidth?k[F].lineWidth:2,V=k[F].lineStyle;p=k[F].value;var Y=f+l.getFillPercentage(r,r.min,r.max,p)*y;c._drawCircularReferenceLine(e,i,n,Y,G,j,V)}r.center.renderer&&c._renderCenterContent(e,r,n,s,m)},c._renderShape=function(e,i,o){var r=e.getOptions(),s=t.Agent.isRightToLeft(e.getCtx()),l="vertical"==r.orientation,h={layout:{}};h.layout.gapRatio=0,h.timeAxisType="disabled",h.position=l?"left":"bottom",h.min=r.min,h.max=r.max,h.dataMin=r.min,h.dataMax=r.max,h.tickLabel={rendered:"off"};var u=t.AxisInfo.newInstance(e.getCtx(),h,o);e.__axisInfo=u;var d=0;r.max<=0?d=r.max:r.min>=0&&(d=r.min);var _=u.getCoordAt(d);"off"==r.plotArea.rendered||"auto"==r.plotArea.rendered&&"onIndicator"==r.thresholdDisplay||(_=u.getUnboundedCoordAt(r.min));var g=u.getUnboundedCoordAt(r.value);g=l?Math.max(o.y,Math.min(o.y+o.h,g)):Math.max(o.x,Math.min(o.x+o.w,g));var m,f,y,v,S,C,E,b=r.indicatorSize,T=0,A=b<1?1:b,O=b>1?1:b;l?(m=o.x+(1-O)/2*o.w+.5,f=o.x+o.w*(1+O)/2-.5,v=_-.5,y=g+.5,S=o.x+(1-1/A)/2*o.w,C=o.x+o.w*(1+1/A)/2,E=o.y,T=o.y+o.h):(m=s?_-.5:_+.5,f=s?g+.5:g-.5,y=o.y+(1-O)/2*o.h+.5,v=o.y+o.h*(1+O)/2-.5,S=o.x,C=o.x+o.w,E=o.y+(1-1/A)/2*o.h,T=o.y+o.h*(1+1/A)/2);var P=!0;g==_&&(l?y=v:m=f,P=!1);var I=a.getBorderColor(e),D=a.getPlotAreaBorderColor(e),x=r.thresholds,M=l?0:270;if(x&&"off"!=r.plotArea.rendered&&"all"==r.thresholdDisplay)for(var L=x.length-1;L>=0;L--){var R=L,w=c._createShape(e,e.getCtx(),S,C,E,T),N=new t.ClipPath("pacp"+e.getId());if(L==x.length-1)!l&&s?N.addRect(u.getUnboundedCoordAt(r.max)+1,0,o.w+2,o.h+2,0,0):N.addRect(0,0,o.w+2,o.h+2,0,0);else if(l)N.addRect(0,u.getUnboundedCoordAt(r.max),o.w+2,1*(r.max-x[x.length-2-R].max)/Math.abs(r.min-r.max)*o.h,0,0);else if(s){var U=null==x[x.length-2-R].max?100:x[x.length-2-R].max;N.addRect(u.getUnboundedCoordAt(r.max),0,1*(r.max-U)/Math.abs(r.min-r.max)*o.w,o.h+2,0,0)}else N.addRect(0,0,1*(x[R].max-r.min)/Math.abs(r.min-r.max)*o.w,o.h+2,0,0);w.setClipPath(N),(s||l)&&(R=x.length-1-L),w.setSolidFill(a.getThresholdColor(e,x[R],R));var B=x[R].borderColor;w.setSolidStroke(B?B:D),c._renderPlotAreaVisualEffects(e,i,w,a.getThresholdColor(e,x[R],R),M)}else if("off"!=r.plotArea.rendered&&("auto"!=r.plotArea.rendered||"onIndicator"!=r.thresholdDisplay)&&"all"!=r.thresholdDisplay){var w=l?c._createShape(e,e.getCtx(),S,C,u.getUnboundedCoordAt(r.max),u.getUnboundedCoordAt(r.min)):c._createShape(e,e.getCtx(),u.getUnboundedCoordAt(r.min),u.getUnboundedCoordAt(r.max),E,T),H=a.getPlotAreaColor(e);w.setSolidFill(H),w.setSolidStroke(D),c._renderPlotAreaVisualEffects(e,i,w,H,M)}var k=new p(e,e.getCtx(),m,f,y,v);e.__shapes.push(k);var F=a.getColor(e);if(n.isSkyrosSkin(e)||"none"==r.visualEffects)k.setSolidFill(F);else{var G=[t.ColorUtils.adjustHSL(F,0,-.09,.04),t.ColorUtils.adjustHSL(F,0,-.04,-.05)],j=[1,1],V=[0,1],Y=new t.LinearGradientFill(M,G,j,V);k.setFill(Y)}I&&k.setSolidStroke(I),k.setClassName(r.svgClassName),k.setStyle(r.svgStyle),P&&i.addChild(k);var W=c._createShape(e,e.getCtx(),m,f,y,v);c._renderVisualEffects(e,i,W,P,M);var z,K,Z,X,q=r.referenceLines;if(q)for(var L=0;L<q.length;L++){var Q=q[L].color?q[L].color:"white",J=q[L].value,b=r.indicatorSize;l?(X=((1-b)/2+b)*o.w,z=o.x+(1-b)/4*o.w,K=u.getUnboundedCoordAt(J),Z=new t.Line(e.getCtx(),z,K,z+X,K)):(X=((1-b)/2+b)*o.h,z=u.getUnboundedCoordAt(J),K=o.y+(1-b)/4*o.h,Z=new t.Line(e.getCtx(),z,K,z,K+X));var $=q[L].lineWidth?q[L].lineWidth:2,tt=new t.SolidStroke(Q,1,$);if(q[L].lineStyle&&tt.setStyle(t.Stroke.convertTypeString(q[L].lineStyle)),Z.setStroke(tt),i.addChild(Z),!t.Agent.isPlatformIE()&&"none"!=r.visualEffects){var et=t.ColorUtils.makeRGBA(0,0,0,.8),it=new t.Shadow(et,.75,3,3,50,1,2,!1,!1,!1);Z.addDrawEffect(it)}}var nt=r.metricLabel.position;if("on"!=r.metricLabel.rendered||c._hasMetricLabelOutsidePlotArea(r)||a.hasLabel(r))a.hasLabel(r)&&c._renderLabel(e,i,o,nt);else{var ot={x1:m,x2:f,y1:y,y2:v},rt={x1:S,x2:C,y1:E,y2:T};c._renderMetricLabelInsidePlotArea(e,i,o,F,nt,ot,rt)}},c._createShape=function(e,i,o,r,s,a){var l=Math.min(o,r),h=Math.min(s,a),u=Math.abs(o-r),d=Math.abs(a-s),c=e.getOptions(),p="vertical"==c.orientation?u:d,_=n.isSkyrosSkin(e)?"25%":"15%",g="auto"!=c.plotArea.borderRadius?c.plotArea.borderRadius:c.borderRadius,m=t.PathUtils.rectangleWithBorderRadius(l,h,u,d,g,p,_);return new t.Path(i,m)},c._renderVisualEffects=function(e,i,o,r,s){var a=e.getOptions();if("none"!=a.visualEffects&&n.isSkyrosSkin(e)){var l=["#FFFFFF","#FFFFFF","#FFFFFF"],h=[.5,.3125,0],u=[0,.3,1],d=new t.LinearGradientFill(s,l,h,u);o.setFill(d),e.__shapes.push(o),o.setMouseEnabled(!1),r&&i.addChild(o)}},c._renderPlotAreaVisualEffects=function(e,i,o,r,s){var a=e.getOptions();if(o.setMouseEnabled(!1),i.addChild(o),"none"!=a.visualEffects){var l,h;n.isSkyrosSkin(e)?(l=[t.ColorUtils.getDarker(r,.1),r,t.ColorUtils.getBrighter(r,.7)],h=new t.LinearGradientFill(s,l,[1,1,1],[0,.04,.73])):(l=[t.ColorUtils.adjustHSL(r,0,-.04,-.05),t.ColorUtils.adjustHSL(r,0,-.09,.04)],h=new t.LinearGradientFill(s,l,[1,1],[0,1])),o.setFill(h),o.setClassName(a.plotArea.svgClassName),o.setStyle(a.plotArea.svgStyle)}},c._renderMetricLabelOutsidePlotArea=function(e,i,n){var o=e.getOptions(),r=t.Agent.isRightToLeft(e.getCtx()),s="vertical"==o.orientation,a=new t.OutputText(e.getCtx(),""),h=l.getFormattedMetricLabel(o.value,e),u=o.__layout.labelGap,d=o.metricLabel.style,c=d.getStyle("color");
c=c?c:"#333333";var p=null;if(a.setCSSStyle(d),a.setSolidFill(c),s&&"on"==o.metricLabel.rendered){var _=o.max>0?o.max:o.min,g=l.getFormattedMetricLabel(_,e),m=new t.OutputText(e.getCtx(),g);m.setCSSStyle(d);var f=new t.Rectangle(n.x,n.y+.8*n.h,n.w,.2*n.h),y=d.getStyle("font-size");y=y?parseInt(y):m.getOptimalFontSize(f),p=m.measureDimensions(),n.h-=p.h,C=n.y-p.h;var v=p.w;a.setFontSize(y),a.setTextString(h),a.setX(n.x+n.w/2),a.setY(n.y+n.h),n.h-=u,a.alignCenter(),t.TextUtils.fitText(a,n.w,n.h,i)}else if(!s&&"on"==o.metricLabel.rendered){var y=d.getStyle("font-size"),S=l.getFormattedMetricLabel(o.min,e),m=l.getFormattedMetricLabel(o.max,e);void 0===y&&n.h<18&&(y=l.calcMetricLabelFontSize([h,S,m],a,n)),y=y?parseInt(y):13,a.setFontSize(y);var C;if(o.max>0||"off"!=o.plotArea.rendered||"auto"!=o.plotArea.rendered||"onIndicator"!=o.thresholdDisplay){var _=o.max>0?o.max:o.min,g=l.getFormattedMetricLabel(_,e),m=new t.OutputText(e.getCtx(),g);m.setCSSStyle(d),m.setFontSize(y),p=m.measureDimensions(),p.w=Math.min(p.w,n.w),C=r?n.x+p.w:n.x+n.w,v=p.w,r?(n.x+=p.w+u,n.w-=p.w+u):n.w-=p.w+u}if(o.min<0&&"on"!=o.plotArea.rendered&&("auto"!=o.plotArea.rendered||"onIndicator"!=o.thresholdDisplay)){var E=l.getFormattedMetricLabel(o.min,e),S=new t.OutputText(e.getCtx(),E);S.setCSSStyle(d),S.setFontSize(y);var b=S.measureDimensions();(o.value<0||o.max<=0)&&(C=r?n.x+n.w:n.x+b.w,v=b.w),r?n.w-=b.w+u:(n.x+=b.w+u,n.w-=b.w+u)}a.setTextString(h),a.setX(C),t.TextUtils.centerTextVertically(a,n.y+n.h/2),a.alignRight(),t.TextUtils.fitText(a,v,n.h,i)}},c._renderMetricLabelInsidePlotArea=function(e,i,n,o,r,s,a,h){var u=e.getOptions(),d=t.Agent.isRightToLeft(e.getCtx()),p="vertical"==u.orientation,_="on"==u.plotArea.rendered,g="center",m="middle",f=new t.Rectangle(Math.min(s.x1,s.x2),Math.min(s.y1,s.y2),Math.abs(s.x2-s.x1),Math.abs(s.y2-s.y1)),y=u.metricLabel.style.getStyle("color");"center"==r?(y=y?y:t.ColorUtils.getContrastingTextColor(o),p?(f.h-=f.w,f.y+=f.w/2):(f.w-=f.h,f.x+=f.h/2)):"insideIndicatorEdge"==r?(y=y?y:t.ColorUtils.getContrastingTextColor(o),p?(f.h-=f.w,f.y+=f.w/2,m=!_&&s.y1>s.y2?"bottom":"top"):(f.w-=f.h,f.x+=f.h/2,g=d?!_&&s.x1<s.x2?"right":"left":!_&&s.x1>s.x2?"left":"right")):"outsideIndicatorEdge"==r&&(p?(f.h=Math.abs(a.y1-s.y1)-f.w,f.y=a.y1+f.w/2,m="bottom",!_&&s.y1>s.y2&&(f.h=Math.abs(a.y1-s.y1)-f.w,f.y=s.y1+f.w/2,m="top")):d?!_&&s.x1<s.x2?(f.w=Math.abs(a.x2-s.x2)-f.h,f.x=s.x2+f.h/2,g="left"):(f.w=Math.abs(a.x1-s.x2)-f.h,f.x=a.x1+f.h/2,g="right"):!_&&s.x1>s.x2?(f.w=Math.abs(a.x1-s.x2)-f.h,f.x=a.x1+f.h/2,g="right"):(f.w=Math.abs(a.x2-s.x2)-f.h,f.x=s.x2+f.h/2,g="left"));var v=l.renderMetricLabel(e,i,f,y,g,m);v||h||("outsideIndicatorEdge"==r?c._renderMetricLabelInsidePlotArea(e,i,n,o,"insideIndicatorEdge",s,a,!0):"insideIndicatorEdge"!=r&&"center"!=r||c._renderMetricLabelInsidePlotArea(e,i,n,o,"outsideIndicatorEdge",s,a,!0))},c._renderLabel=function(e,i,n,o){var r=t.Agent.isRightToLeft(e.getCtx()),s=e.getOptions(),a="vertical"==s.orientation,h=new t.Rectangle(n.x,n.y,a?n.w:n.w-n.h,a?n.h-n.w:n.h),u=s.label.text;if(!c._hasMetricLabelOutsidePlotArea(s)&&"on"==s.metricLabel.rendered){var d=l.getFormattedMetricLabel(s.value,e);u=t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[u,d])}var p=s.label.style,_=p.clone(),g=p.getStyle("font-size");if(!g){var m=new t.OutputText(e.getCtx(),u,0,0);m.setCSSStyle(p),m.setTextString(u),g=a?m.getOptimalFontSize(new t.Rectangle(h.x,h.y,h.w,Number.MAX_VALUE)):m.getOptimalFontSize(new t.Rectangle(h.x,h.y,Number.MAX_VALUE,h.h))}var f=new t.MultilineText(e.getCtx(),u);_.setFontSize("font-size",g.toString()),f.setCSSStyle(_),t.TextUtils.fitText(f,h.w,h.h,e),"center"==s.label.position||"auto"==s.label.position&&a?(t.TextUtils.centerTextVertically(f,n.y+n.h/2),f.setX(n.x+n.w/2),f.alignCenter()):(t.TextUtils.centerTextVertically(f,n.y+n.h/2),!a&&r?(f.setX(n.x+n.w-h.h/2),f.alignRight()):a||r?a&&(f.setY(n.y+n.h-f.getDimensions().h-h.w/2),f.setX(n.x+n.w/2),f.alignCenter()):(f.setX(n.x+h.h/2),f.alignLeft())),i.addChild(f)},c._calcPointOnArc=function(t,e,i){var n=Math.cos(i)*e+t.w/2+t.x,o=Math.sin(i)*e+t.h/2+t.y;return{x:n,y:o}},c._drawCircularArc=function(e,i,n,o,r,s,l,h,u,d){var p=e.getCtx(),g=t.Agent.isRightToLeft(e.getCtx());g&&(o=Math.PI-o-r,o=o>0?o:o+2*Math.PI);var m;u?m=new t.Path(p,c.createCircularPathCmd(n,o,r,s,l)):(m=new _(p,n,o,r,s,l),e.__shapes.push(m)),m.setSolidFill(h);var f=a.getBorderColor(e);f&&!u?m.setSolidStroke(f):u&&d&&m.setSolidStroke(d);var y=e.getOptions();m.setClassName(u?y.plotArea.svgClassName:y.svgClassName),m.setStyle(u?y.plotArea.svgStyle:y.svgStyle),i.addChild(m)},c._drawCircularReferenceLine=function(e,i,n,o,r,s,a){var l=e.getCtx(),h=Math.min(n.w,n.h),u=.275*h,d=.5*h;t.Agent.isRightToLeft(e.getCtx())&&(o=Math.PI-o,o=o>0?o:o+2*Math.PI);var p=c._calcPointOnArc(n,u,o),_=c._calcPointOnArc(n,d,o),g=new t.Line(l,p.x,p.y,_.x,_.y),m=new t.SolidStroke(r,1,s);a&&m.setStyle(t.Stroke.convertTypeString(a)),g.setStroke(m),i.addChild(g)},c.createCircularPathCmd=function(e,i,n,o,r){var s,a,l,h,u;return n<t.Math.TWO_PI?(a=c._calcPointOnArc(e,r,i),l=c._calcPointOnArc(e,r,i+n),h=c._calcPointOnArc(e,o,i+n),u=c._calcPointOnArc(e,o,i),s=t.PathUtils.moveTo(a.x,a.y)+t.PathUtils.arcTo(r,r,n,1,l.x,l.y)+t.PathUtils.lineTo(h.x,h.y)+t.PathUtils.arcTo(o,o,n,0,u.x,u.y)+t.PathUtils.closePath()):(a=c._calcPointOnArc(e,r,i),l=c._calcPointOnArc(e,r,i+n/2),h=c._calcPointOnArc(e,o,i),u=c._calcPointOnArc(e,o,i+n/2),s=t.PathUtils.moveTo(a.x,a.y)+t.PathUtils.arcTo(r,r,n/2,1,l.x,l.y)+t.PathUtils.arcTo(r,r,n/2,1,a.x,a.y),o>0&&(s+=t.PathUtils.moveTo(u.x,u.y)+t.PathUtils.arcTo(o,o,n/2,0,h.x,h.y)+t.PathUtils.arcTo(o,o,n/2,0,u.x,u.y)),s+=t.PathUtils.closePath()),s},c.getAngleQuadrant=function(e,i){var n=1;return i?e>=t.Math.HALF_PI&&e<Math.PI?n=2:e>=Math.PI&&e<1.5*Math.PI?n=3:e>=1.5*Math.PI&&e<t.Math.TWO_PI&&(n=4):e>t.Math.HALF_PI&&e<=Math.PI?n=2:e>Math.PI&&e<=1.5*Math.PI?n=3:(e>1.5*Math.PI&&e<t.Math.TWO_PI||0==e)&&(n=4),n},c._hasMetricLabelOutsidePlotArea=function(t){var e=t.metricLabel.position;return"auto"==e||"outsidePlotArea"==e||("withLabel"==e||"withTitle"==e)&&!a.hasLabel(t)},c._adjustCenterAndBounds=function(e,i,n,o,r,s,a){var l,h,u=null,d=c.getAngleQuadrant(n,!0),p=c.getAngleQuadrant(r,!1),_=s.w,g=s.h,m=_/2,f=g/2;if(d==p&&o<=t.Math.HALF_PI)l=2*Math.min(s.w,s.h),s.w=s.w+l/2,s.h=s.h+l/2,h=l*i,!a&&1==d||a&&2==d?(s.x-=l/2,s.y-=l/2,m=_/2-l/4+1,f=g/2-l/4+1,u=new t.Rectangle(s.x+s.w/2-1,s.y+s.h/2-1,h*(3/7)-2,h*(2.5/7)-2)):!a&&2==d||a&&1==d?(s.y-=l/2,m=_/2+l/4-1,f=g/2-l/4+1,u=new t.Rectangle(s.x+s.w/2-h*(3/7)+1,s.y+s.h/2-1,h*(3/7)-2,h*(2.5/7)-2)):!a&&3==d||a&&4==d?(m=_/2+l/4-1,f=g/2+l/4-1,u=new t.Rectangle(s.x+s.w/2-h*(3/7)+1,s.y+s.h/2-h*(2.5/7)+1,h*(3/7)-2,h*(2.5/7)-2)):(!a&&4==d||a&&3==d)&&(s.x-=l/2,m=_/2-l/4+1,f=g/2+l/4-1,u=new t.Rectangle(s.x+s.w/2-1,s.y+s.h/2-h*(2.5/7)+1,h*(3/7)-2,h*(2.5/7)-2));else if(d%4+1==p&&o<=Math.PI)1==d||3==d?(l=Math.min(s.w,2*s.h),h=l*i,s.w>s.h&&(u=new t.Rectangle(s.x+s.w/2-h*(3/7),s.y+s.h-(s.h-l/2)/2-h*(2.75/7),h*(6/7),h*(2.5/7)),1==d?(u.y=s.y+(s.h-l/2)/2+h*(.5/7),s.y-=l/2-(s.h-l/2)/2,f=g/2-l/4+1):(s.y+=(s.h-l/2)/2,f=g/2+l/4-1),s.h=l)):(l=Math.min(2*s.w,s.h),h=l*i,s.w<s.h&&(u=new t.Rectangle(s.x+s.w-(s.w-l/2)/2-h*(3.25/7),s.y+s.h/2-h*(2.5/7),h*(3/7),h*(5/7)),!a&&4==d||a&&2==d?(u.x=s.x+(s.w-l/2)/2+h*(.25/7),s.x-=l/2-(s.w-l/2)/2,m=_/2-l/4+1):(s.x+=(s.w-l/2)/2,m=_/2+l/4-1),s.w=l));else if(p%4+1==d&&o>Math.PI)if(1==d&&s.h>s.w){l=Math.min(2*(s.w/(Math.cos(n)+1)),2*(s.w/(Math.sin(r-1.5*Math.PI)+1)),s.h),h=l*i;var y=h*(3/7)*(2*s.w/l-1);a?(u=new t.Rectangle(s.x+s.w-l/2-y,s.y+s.h/2-h*(2.5/7),h*(3/7)+y,h*(5/7)),s.x-=l-s.w,m=-l/2+_):(u=new t.Rectangle(s.x+l/2-h*(3/7),s.y+s.h/2-h*(2.5/7),h*(3/7)*(1+(2*s.w/l-1)),h*(5/7)),m=l/2),s.w=l}else if(2==d&&s.h<s.w)l=Math.min(2*(s.h/(Math.cos(n-t.Math.HALF_PI)+1)),2*(s.h/(Math.sin(r)+1)),s.w),h=l*i,u=new t.Rectangle(s.x+s.w/2-h*(3/7),s.y+l/2-h*(2.5/7),h*(6/7),h*(2.5/7)*(1+(2*s.h/l-1))),s.h=l,f=l/2;else if(3==d&&s.h>s.w){l=Math.min(2*(s.w/(Math.cos(n-Math.PI)+1)),2*(s.w/(Math.sin(r-t.Math.HALF_PI)+1)),s.h),h=l*i;var y=h*(3/7)*(2*s.w/l-1);a?(u=new t.Rectangle(s.x+l/2-h*(3/7),s.y+s.h/2-h*(2.5/7),h*(3/7)*(1+(2*s.w/l-1)),h*(5/7)),m=l/2):(u=new t.Rectangle(s.x+s.w-l/2-y,s.y+s.h/2-h*(2.5/7),h*(3/7)+y,h*(5/7)),s.x-=l-s.w,m=-l/2+_),s.w=l}else if(4==d&&s.h<s.w){l=Math.min(2*(s.h/(Math.cos(n-1.5*Math.PI)+1)),2*(s.h/(Math.sin(t.Math.TWO_PI-r)+1)),s.w),h=l*i;var y=h*(2.5/7)*(2*s.h/l-1);u=new t.Rectangle(s.x+s.w/2-h*(3/7),s.y+s.h-l/2-y,h*(6/7),h*(2.5/7)+y),s.y-=l-s.h,s.h=l,f=-l/2+g}return e.cx=m,e.cy=f,e.maxInnerDiameter=h,u},c._renderCenterContent=function(e,i,n,o,r){var s=new t.Rectangle(n.x+.5*(n.w-r),n.y+.5*(n.h-r),r,r);s=s.getIntersection(o);var a=new t.Rectangle(n.x+.5*(n.w-r/Math.sqrt(2)),n.y+.5*(n.h-r/Math.sqrt(2)),r/Math.sqrt(2),r/Math.sqrt(2));a=a.getIntersection(o);var h=i.center.renderer;if(h){var u={outerBounds:{x:s.x,y:s.y,width:s.w,height:s.h},innerBounds:{x:a.x,y:a.y,width:a.w,height:a.h},metricLabel:l.getFormattedMetricLabel(i.value,e),component:i._widgetConstructor},d=e.getCtx(),c=d.getContainer(),p=e.centerDiv;p&&c.removeChild(p);var _=h(u);if(!_)return;var g=d.createOverlayDiv();g.appendChild(_),e.centerDiv=g,c.appendChild(g);var m=d.getOverlayAttachedCallback();m&&m(g)}};var p=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)};t.Obj.createSubclass(p,t.Path),p.prototype.Init=function(t,e,i,n,o,r){p.superclass.Init.call(this,e),this._gauge=t,this.setCoords(i,n,o,r)},p.prototype.setCoords=function(e,i,o,r){this._x1=e,this._x2=i,this._y1=o,this._y2=r;var s=Math.min(e,i),a=Math.min(o,r),l=Math.abs(e-i),h=Math.abs(r-o),u=this._gauge.getOptions(),d="vertical"==u.orientation?l:h,c=n.isSkyrosSkin(this._gauge)?"25%":"15%",p=t.PathUtils.rectangleWithBorderRadius(s,a,l,h,u.borderRadius,d,c);this.setCmds(p)},p.prototype.getAnimationParams=function(){return[this._x1,this._x2,this._y1,this._y2]},p.prototype.setAnimationParams=function(t){t&&4==t.length&&this.setCoords(t[0],t[1],t[2],t[3])};var _=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)};t.Obj.createSubclass(_,t.Path),_.prototype.Init=function(t,e,i,n,o,r){_.superclass.Init.call(this,t),this.setPath(e,i,n,o,r)},_.prototype.setPath=function(e,i,n,o,r){e&&e instanceof t.Rectangle?this._bounds=e:e=this._bounds,this._startAngle=i,this._angleExtent=n,this._innerRadius=o,this._outerRadius=r,this.setCmds(c.createCircularPathCmd(e,i,n,o,r))},_.prototype.getAnimationParams=function(){return[this._bounds,this._startAngle,this._angleExtent,this._innerRadius,this._outerRadius]},_.prototype.setAnimationParams=function(t){t&&5==t.length&&this.setPath(t[0],t[1],t[2],t[3],t[4])},t.DialGauge=function(){},t.Obj.createSubclass(t.DialGauge,e),t.DialGauge.newInstance=function(e,i,n){var o=new t.DialGauge;return o.Init(e,i,n),o},t.DialGauge.prototype.Init=function(e,i,n){t.DialGauge.superclass.Init.call(this,e,i,n),this.Defaults=new g,this.__anchorPt=null},t.DialGauge.prototype.SetOptions=function(e){e=t.JsonUtils.clone(e);var i=e.background,n=e.indicator;"string"==typeof i&&(e.background=a.getDialBackground(i),e.background.images=e._backgroundImages),"string"==typeof n&&(e.indicator=a.getDialIndicator(n),e.indicator.images=e._indicatorImages),t.DialGauge.superclass.SetOptions.call(this,this.Defaults.calcOptions(e))},t.DialGauge.prototype.Render=function(t,e,i){m.render(this,t,e,i)},t.DialGauge.prototype.renderUpdate=function(){m.updateIndicatorAndLabel(this,this._container,this.Width,this.Height);var t=this.getEventManager();t&&t.associate(this._editingOverlay,this.__getLogicalObject(),!0),this.UpdateAriaLiveValue(this._container)},t.DialGauge.prototype.CreateAnimationOnDisplay=function(e,i,n){for(var o=[],r=0;r<e.length;r++){var s=e[r],a=s.getAnimationParams(),l=m.__getStartAngle(this);s.setAngle(l);var h=new t.CustomAnimation(this.getCtx(),s,n);h.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,s,s.getAnimationParams,s.setAnimationParams,a),h.getAnimator().setEasing(function(e){return t.Easing.backOut(e,.7)}),o.push(h)}return new t.ParallelPlayable(this.getCtx(),o)},t.DialGauge.prototype.GetValueAt=function(e,i){var n=Math.atan2(i-this.__anchorPt.y,e-this.__anchorPt.x),o=t.Math.radsToDegrees(n);o<=0&&(o+=360);var r=t.Agent.isRightToLeft(this.getCtx()),s=this.getOptions().background,a=r?180+s.startAngle:360-s.startAngle,l=s.angleExtent,h=a+l;if(r)for(h=a,a-=l;a<0;)a+=360,h+=360;o+360>=a&&o+360<=h?o+=360:o>=a&&o<=h||(o=o>h?a+360-o<o-h?a:h:a-o<o+360-h?a:h);var u=(o-a)/l;r&&(u=1-u);var d=this.Options.min,c=this.Options.max,p=u*(c-d)+d;return p};var g=function(){this.Init({skyros:g.VERSION_1,alta:{}})};t.Obj.createSubclass(g,n),g.VERSION_1={background:{startAngle:180,angleExtent:180,indicatorLength:.7},metricLabel:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA)},tickLabel:{scaling:"auto",style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA)}};var m=new Object;t.Obj.createSubclass(m,t.Obj),m.render=function(e,i,n,r){if(o.hasData(e)){var s=new t.Rectangle(0,0,n,r);m._renderShape(e,i,s),m._renderLabel(e,i,s)}else l.renderEmptyText(e,i,new t.Rectangle(0,0,n,r))},m.updateIndicatorAndLabel=function(e,i,n,o){e.__indicatorContainer.setAngle(m._getRotation(e,e.getOptions().value)),i.removeChild(e.__label),m._renderLabel(e,i,new t.Rectangle(0,0,n,o))},m._renderShape=function(e,i,n){var o=e.getOptions(),r=m._createBackground(e,n);i.addChild(r),o.background.majorTickCount&&o.background.radius&&m._renderTickLabels(e,i,n);var s=m._createIndicator(e,n),a=new t.Container(e.getCtx()),l=new f(e.getCtx());i.addChild(a),a.addChild(l),l.addChild(s);var h=s.getDimensions(),u=m._getRotation(e,o.value),d=m._getBackgroundAnchorPoint(e,n),c=m._getIndicatorAnchorPoint(e,n,h),p=m._getIndicatorScaleFactor(e,n,h),_=new t.Matrix;_.translate(-c.x,-c.y),_.scale(p,p),s.setMatrix(_),l.setAngle(u),_=new t.Matrix,_.translate(d.x,d.y),a.setMatrix(_),e.__shapes.push(l),e.__indicatorContainer=l,e.__anchorPt=d},m._createBackground=function(e,i){var n=e.getOptions().background,o=t.Agent.isRightToLeft(e.getCtx()),r=t.Agent.isTouchDevice(),s=r?2*i.w:i.w,a=r?2*i.h:i.h,l=n.images;if(l&&l.length>0){var h,u,d,c=[];for(h=0;h<l.length;h++){var p="rtl"==l[h].dir;o&&p?c.push(l[h]):o||p||c.push(l[h])}for(l=c.length>0?c:l,h=0;h<l.length;h++){var _=l[h],g=_.src,m=_.width,f=_.height,y=g&&g.search(".svg")>-1;if(0==h&&(u=m,d=f),y||m>=s&&f>=a||h==l.length-1){var v=new t.Image(e.getCtx(),g,0,0,m,f),S=new t.Matrix,C=Math.min(i.w/m,i.h/f),E=(i.w-C*m)/2,b=(i.h-C*f)/2;if(S.scale(C,C),S.translate(E,b),v.setMatrix(S),y&&t.Agent.isPlatformWebkit()){var T=t.ImageLoader.loadImage(e.getCtx(),g,t.Obj.createCallback(v,v.__setDimensions));T&&v.__setDimensions(T)}if(i.x+=E,i.y+=b,i.w=C*m,i.h=C*f,isNaN(n.anchorX)||isNaN(n.anchorY)||(n._anchorX=o?i.x+i.w-i.w*n.anchorX/u:i.x+i.w*n.anchorX/u,n._anchorY=i.y+i.h*n.anchorY/d),n.metricLabelBounds){var A={};A.width=i.w*n.metricLabelBounds.width/u,A.height=i.h*n.metricLabelBounds.height/d,A.y=i.y+i.h*n.metricLabelBounds.y/d,o?A.x=i.x+i.w-i.w*n.metricLabelBounds.x/u-A.width:A.x=i.x+i.w*n.metricLabelBounds.x/u,n._metricLabelBounds=A}var O=Math.min(i.w/u,i.h/d);return n._radius=n.radius*O,n._tickLabelHeight=n.tickLabelHeight*i.h/d,n._tickLabelWidth=n.tickLabelWidth*i.w/u,v}}}return null},m._createIndicator=function(e,i){var n,o,r=e.getOptions().indicator,s=m._getIndicatorLength(e,i),a=t.Agent.isTouchDevice()?2*s:s,l=r.images;if(l&&l.length>0)for(var h=0;h<l.length;h++){var u=l[h],d=u.src,c=u.width,p=u.height,_=d&&d.search(".svg")>-1;if(0==h&&(n=c,o=p),_||p>=a||h==l.length-1){var g=new t.Image(e.getCtx(),d,0,0,c,p);if(_&&t.Agent.isPlatformWebkit()){var f=t.ImageLoader.loadImage(e.getCtx(),d,t.Obj.createCallback(g,g.__setDimensions));f&&(g.setWidth(c),g.setHeight(p))}return isNaN(r.anchorX)||isNaN(r.anchorY)||(r._anchorX=r.anchorX*c/n,r._anchorY=r.anchorY*p/o),g}}return null},m.__getStartAngle=function(e){var i=e.getOptions().background,n=t.Agent.isRightToLeft(e.getCtx()),o=n?180-i.startAngle:i.startAngle;return Math.PI*(90-o)/180},m._getRotation=function(e,i){var n=e.getOptions(),o=n.background,r=n.min,s=n.max;i=Math.max(Math.min(i,s),r);var a=(i-r)/(s-r),l=t.Agent.isRightToLeft(e.getCtx()),h=l?180-o.startAngle:o.startAngle,u=l?-o.angleExtent:o.angleExtent,d=h-a*u;return Math.PI*(90-d)/180},m._getBackgroundAnchorPoint=function(e,i){var n=e.getOptions().background,o=n._anchorX,r=n._anchorY;return isNaN(o)||isNaN(r)?new t.Point(i.x+i.w/2,i.y+i.h/2):new t.Point(o,r)},m._getIndicatorLength=function(t,e){var i=Math.min(e.w,e.h)/2;return t.getOptions().background.indicatorLength*i},m._getIndicatorAnchorPoint=function(e,i,n){var o=e.getOptions().indicator,r=o._anchorX,s=o._anchorY;return isNaN(r)||isNaN(s)?new t.Point(n.x+n.w/2,n.y+n.h):new t.Point(r,s)},m._getIndicatorScaleFactor=function(t,e,i){var n=m._getIndicatorLength(t,e);return n/i.h},m._renderLabel=function(e,i,n){var o=e.getOptions();if("on"==o.metricLabel.rendered){var r=l.getFormattedMetricLabel(o.value,e),s=l.getFormattedMetricLabel(o.min,e),a=l.getFormattedMetricLabel(o.max,e),h=n.x+n.w/2,u=n.y+n.h/2,d=n.w,c=n.h,p=o.background._metricLabelBounds;p&&(h=p.x+p.width/2,u=p.y+p.height/2,n.w=p.width,n.h=p.height);var _=new t.OutputText(e.getCtx(),r,h,u);!o.metricLabel.style.getStyle("color")&&o.background._isDark&&o.metricLabel.style.setStyle("color","#CCCCCC"),_.setCSSStyle(o.metricLabel.style);var g=parseInt(o.metricLabel.style.getFontSize());g=g?parseInt(g):null,g||(g=l.calcLabelFontSize([r,s,a],_,n),_.setTextString(r),_.setFontSize(g)),_.alignCenter(),_.alignMiddle(),t.TextUtils.fitText(_,d,c,i)&&(e.__label=_)}},m._renderTickLabels=function(e,i,n){var o=e.getOptions(),r=t.Agent.isRightToLeft(e.getCtx());if(o.background.radius&&o.background.majorTickCount){var s=o.background._radius,a=o.min,h=o.max,u=o.background.majorTickCount,d=12,c=new t.Rectangle(C,E,n.w,n.h),p=o.metricLabel.style.getStyle("font-size");if(o.background._tickLabelHeight&&!p&&(c.h=o.background._tickLabelHeight),o.background._tickLabelWidth&&!p&&(c.w=o.background._tickLabelWidth),!p){var _=new t.OutputText(e.getCtx(),"",C,E);d=l.calcLabelFontSize([l.formatTickLabelValue(o.max,e),l.formatTickLabelValue(o.min,e)],_,c)}for(var g=0;g<u;g++){var f=a+Math.abs(h-a)*g/(u-1);r&&(f=a+Math.abs(h-a)*(u-1-g)/(u-1));var y=l.formatTickLabelValue(f,e),v=m._getRotation(e,f),S=m._getBackgroundAnchorPoint(e,n),C=S.x+s*Math.cos(v-Math.PI/2),E=S.y+s*Math.sin(v-Math.PI/2),_=new t.OutputText(e.getCtx(),y,C,E);!o.tickLabel.style.getStyle("color")&&o.background._isDark&&o.tickLabel.style.setStyle("color","#CCCCCC"),_.setCSSStyle(o.tickLabel.style),o.tickLabel.style.getStyle("font-size")||_.setFontSize(d),_.alignCenter(),_.alignMiddle(),t.TextUtils.fitText(_,c.w+.5,c.h+.5,i)}}};var f=function(t){this.Init(t)};t.Obj.createSubclass(f,t.Container),f.prototype.setAngle=function(e){var i=new t.Matrix;i.rotate(e),this.setMatrix(i),this._angleRads=e},f.prototype.getAnimationParams=function(){return[this._angleRads]},f.prototype.setAnimationParams=function(t){t&&1==t.length&&this.setAngle(t[0])},t.RatingGauge=function(){},t.Obj.createSubclass(t.RatingGauge,e),t.RatingGauge.newInstance=function(e,i,n){var o=new t.RatingGauge;return o.Init(e,i,n),o},t.RatingGauge.prototype.Init=function(e,i,n){t.RatingGauge.superclass.Init.call(this,e,i,n),this.Defaults=new y},t.RatingGauge.prototype.SetOptions=function(e){e=t.JsonUtils.clone(e),e.changedState&&(e.changedState.className&&(e.changedState.svgClassName=e.changedState.className),e.changedState.style&&(e.changedState.svgStyle=e.changedState.style)),e.hoverState&&(e.hoverState.className&&(e.hoverState.svgClassName=e.hoverState.className),e.hoverState.style&&(e.hoverState.svgStyle=e.hoverState.style)),e.selectedState&&(e.selectedState.className&&(e.selectedState.svgClassName=e.selectedState.className),e.selectedState.style&&(e.selectedState.svgStyle=e.selectedState.style)),e.unselectedState&&(e.unselectedState.className&&(e.unselectedState.svgClassName=e.unselectedState.className),e.unselectedState.style&&(e.unselectedState.svgStyle=e.unselectedState.style)),t.RatingGauge.superclass.SetOptions.call(this,this.Defaults.calcOptions(e))},t.RatingGauge.prototype.Render=function(e,i,n){var o=this.Options.__layout.outerGap,r=this.Options.max,s="vertical"==this.Options.orientation,a=this.Options.selectedState.source,l="none"!=this.Options.preserveAspectRatio;if(a&&l){var h=function(a){if(t.Agent.isPlatformIE()&&11==t.Agent.getVersion()&&a&&0==a.width&&0==a.height&&(a.width=1,a.height=1),a&&a.width&&a.height){var l=a.width/a.height;this.__shapeWidth=s?Math.min(i-2*o,(n-2*o)*l/r):Math.min((n-2*o)*l,(i-2*o)/r),this.__shapeHeight=this.__shapeWidth/l,this.__bounds=s?new t.Rectangle(o,(n-this.__shapeHeight*r)/2,i-2*o,this.__shapeHeight*r):new t.Rectangle((i-this.__shapeWidth*r)/2,o,this.__shapeWidth*r,n-2*o),S.render(this,e,i,n)}};t.ImageLoader.loadImage(this.getCtx(),this.Options.selectedState.source,t.Obj.createCallback(this,h))}else l?(this.__shapeWidth=s?Math.min(i-2*o,(n-2*o)/r):Math.min(n-2*o,(i-2*o)/r),this.__shapeHeight=this.__shapeWidth):(this.__shapeWidth=s?i-2*o:(i-2*o)/r,this.__shapeHeight=s?(n-2*o)/r:n-2*o),this.__bounds=s?new t.Rectangle(o,(n-this.__shapeHeight*r)/2,i-2*o,this.__shapeHeight*r):new t.Rectangle((i-this.__shapeWidth*r)/2,o,this.__shapeWidth*r,n-2*o),S.render(this,e,i,n)},t.RatingGauge.prototype.__getLogicalObject=function(){var e=this.Options.tooltip,i=e?e.renderer:null,n=a.getColor(this);if(i){var o={component:this.Options._widgetConstructor,label:l.getFormattedMetricLabel(this.Options.value,this),color:n};return new t.CustomDatatipPeer(this.getCtx().getTooltipManager(),i,n,o)}return new v(this)},t.RatingGauge.prototype.GetValueAt=function(e,i){var n="vertical"==this.Options.orientation?this.__shapeHeight:this.__shapeWidth;if(o.hasData(this)){if("vertical"==this.Options.orientation)i=Math.max(Math.min(i,this.__bounds.y+this.__bounds.h),this.__bounds.y),r=Math.max((this.__bounds.y+this.__bounds.h-i)/n,this.Options.min);else{e=Math.max(Math.min(e,this.__bounds.x+this.__bounds.w),this.__bounds.x);var r=0;r=t.Agent.isRightToLeft(this.getCtx())?Math.max((this.__bounds.x+this.__bounds.w-e)/n,this.Options.min):Math.max((e-this.__bounds.x)/n,this.Options.min)}return l.adjustForStep(this.Options,r)}return null},t.RatingGauge.prototype.__processHoverEnd=function(e,i){this.__updateClipRects(this.Options.value,"render"),this.dispatchEvent(t.EventFactory.newValueChangeEvent(this.Options.value,this.Options.value,!1))},t.RatingGauge.prototype.__processValueChangeStart=function(t,e){this.__processValueChangeMove(t,e)},t.RatingGauge.prototype.__processValueChangeMove=function(e,i){var n=this.GetValueAt(e,i);this.__updateClipRects(n,"hover"),this.dispatchEvent(t.EventFactory.newValueChangeEvent(this.Options.value,n,!1))},t.RatingGauge.prototype.__processValueChangeEnd=function(e,i){var n=this.Options.value;this.Options.value=this.GetValueAt(e,i),this.Options.changed=!0,this.render(),this.dispatchEvent(t.EventFactory.newValueChangeEvent(n,this.Options.value,!1)),this.dispatchEvent(t.EventFactory.newValueChangeEvent(n,this.Options.value,!0))},t.RatingGauge.prototype.__updateClipRects=function(e,i,n){if(o.hasData(this)){n||(n=this._container);var r=t.Agent.isRightToLeft(this.getCtx()),s="vertical"==this.Options.orientation,a=s?this.__shapeHeight:this.__shapeWidth;e=Math.max(Math.min(e,this.Options.max),0);var l=0,h=e*a,u=e*a;if("render"==i&&(l=e*a,h=0),s){var d=n.getChildAt(0),c=new t.ClipPath;c.addRect(this.__bounds.x,this.__bounds.y,this.__bounds.w,this.__bounds.h-u),d.setClipPath(c);var p=n.getChildAt(1),_=new t.ClipPath;_.addRect(this.__bounds.x,this.__bounds.y+this.__bounds.h-l,this.__bounds.w,l),p.setClipPath(_);var g=n.getChildAt(2);if(g){var m=new t.ClipPath;m.addRect(this.__bounds.x,this.__bounds.y+this.__bounds.h-h,this.__bounds.w,h),g.setClipPath(m)}}else if(r){var d=n.getChildAt(0),c=new t.ClipPath;c.addRect(this.__bounds.x,this.__bounds.y,this.__bounds.w-u,this.__bounds.h),d.setClipPath(c);var p=n.getChildAt(1),_=new t.ClipPath;_.addRect(this.__bounds.x+this.__bounds.w-u,this.__bounds.y,l,this.__bounds.h),p.setClipPath(_);var g=n.getChildAt(2);if(g){var m=new t.ClipPath;m.addRect(this.__bounds.x+this.__bounds.w-u,this.__bounds.y,h,this.__bounds.h),g.setClipPath(m)}}else{var d=n.getChildAt(0),c=new t.ClipPath;c.addRect(this.__bounds.x+u,this.__bounds.y,this.__bounds.w-u,this.__bounds.h),d.setClipPath(c);var p=n.getChildAt(1),_=new t.ClipPath;_.addRect(this.__bounds.x,this.__bounds.y,l,this.__bounds.h),p.setClipPath(_);var g=n.getChildAt(2);if(g){var m=new t.ClipPath;m.addRect(this.__bounds.x,this.__bounds.y,h,this.__bounds.h),g.setClipPath(m)}}this.UpdateAriaLiveValue(n,e)}},t.RatingGauge.prototype.__getRatingGaugeItem=function(t){return this._container.getChildAt(0).getChildAt(t)},t.RatingGauge.prototype.CreateEventManager=function(){return new C(this)};var y=function(){this.Init({skyros:y.VERSION_1,alta:y.SKIN_ALTA})};t.Obj.createSubclass(y,n),y.SKIN_ALTA={unselectedState:{shape:"star",color:"#C4CED7",borderColor:null},selectedState:{shape:"star",color:"#F8C15A",borderColor:null},hoverState:{shape:"star",color:"#007CC8",borderColor:null},changedState:{shape:"star",color:"#ED2C02",borderColor:null}},y.VERSION_1={min:0,max:5,orientation:"horizontal",unselectedState:{shape:"star",color:"#F2F2F2",borderColor:"#B6B6B6"},selectedState:{shape:"star",color:"#F8C15A",borderColor:"#F5A700"},hoverState:{shape:"star",color:"#66A7DA",borderColor:"#4A86C5"},changedState:{shape:"star",color:"#F8C15A",borderColor:"#959595"},preserveAspectRatio:"meet",step:1};var v=function(t){this.Init(),this._gauge=t};t.Obj.createSubclass(v,t.SimpleObjPeer),v.prototype.getDatatip=function(t,e,i){var n,r=this._gauge.getOptions();n=this._gauge.getEventManager().__isMouseEditing()?o.getValueThresholdIndex(this._gauge,this._gauge.GetValueAt(e,i)):o.getValueThresholdIndex(this._gauge);var s=o.getThreshold(this._gauge,n);return s&&s.shortDesc?s.shortDesc:r.shortDesc};var S=new Object;t.Obj.createSubclass(S,t.Obj),S.render=function(e,i,n,r){if(o.hasData(e)){var s=e.getOptions(),a=o.getValueThresholdIndex(e),h=o.getThreshold(e,a),u=s.selectedState.color,d=s.changedState.color,c=s.selectedState.borderColor,p=s.changedState.borderColor;h&&h.color&&(u=h.color,d=h.color),h&&h.borderColor&&(c=h.borderColor,p=h.borderColor);var _={value:0,type:s.unselectedState.shape,color:s.unselectedState.color,borderColor:s.unselectedState.borderColor,visualEffects:s.visualEffects,source:s.unselectedState.source,svgClassName:s.unselectedState.svgClassName,svgStyle:s.unselectedState.svgStyle},g={value:0,type:s.selectedState.shape,color:u,borderColor:c,visualEffects:s.visualEffects,source:s.selectedState.source,svgClassName:s.selectedState.svgClassName,svgStyle:s.selectedState.svgStyle},m={value:0,type:s.changedState.shape,color:d,borderColor:p,visualEffects:s.visualEffects,source:s.changedState.source,svgClassName:s.changedState.svgClassName,svgStyle:s.changedState.svgStyle},f={value:0,type:s.hoverState.shape,color:s.hoverState.color,borderColor:s.hoverState.borderColor,visualEffects:s.visualEffects,source:s.hoverState.source,svgClassName:s.hoverState.svgClassName,svgStyle:s.hoverState.svgStyle};"dot"==s.unselectedState.shape&&(_.type="circle",_.visualEffects="none",_.size=.05),S._createShapes(e,i,_),S._createShapes(e,i,s.changed?m:g),s.readOnly||S._createShapes(e,i,f),e.__updateClipRects(s.value,"render",i)}else l.renderEmptyText(e,i,new t.Rectangle(0,0,n,r))},S._createShapes=function(e,i,n){var o=e.getCtx(),r=new t.Container(o);i.addChild(r);var s,a=e.getOptions(),l=e.__bounds,h=e.__shapeWidth,u=e.__shapeHeight;n.source?(s=new t.ImageMarker(o,h/2,u/2,h,u,null,n.source),s.setPreserveAspectRatio("none")):"none"!=n.type&&(s=t.LedGauge.newInstance(o,null,null,!0),s.render(n,h,u));for(var d=0;d<a.max;d++){var c,p;if("vertical"==a.orientation?(c=l.x+l.w/2-h/2,p=l.y+l.h-(d+1)*u):t.Agent.isRightToLeft(o)?(c=l.x+l.w-(d+1)*h,p=l.y+l.h/2-u/2):(c=l.x+d*h,p=l.y+l.h/2-u/2),s){s.setClassName(a.svgClassName),s.setStyle(a.svgStyle);var _=new t.Use(o,c,p,s);r.addChild(_)}}};var C=function(t){this.Init(t.getCtx(),t.dispatchEvent,t),this._gauge=t};t.Obj.createSubclass(C,r),C.prototype.OnMouseOver=function(t){if(this._gauge.getOptions().readOnly===!1){var e=this.GetRelativePosition(t.pageX,t.pageY);this._gauge.__processValueChangeStart(e.x,e.y),this.IsMouseEditing=!0}C.superclass.OnMouseOver.call(this,t)},C.prototype.OnMouseOut=function(t){if(this._gauge.getOptions().readOnly===!1){var e=this.GetRelativePosition(t.pageX,t.pageY);this._gauge.__processHoverEnd(e.x,e.y),this.IsMouseEditing=!1}C.superclass.OnMouseOut.call(this,t)},C.prototype.OnMouseMove=function(t){var e=this.GetRelativePosition(t.pageX,t.pageY);this._gauge.getOptions().readOnly!==!1||this.IsMouseEditing||this._gauge.getOptions().value==this._gauge.GetValueAt(e.x,e.y)||(this.IsMouseEditing=!0),C.superclass.OnMouseMove.call(this,t)},C.prototype.OnMouseDown=function(t){r.superclass.OnMouseDown.call(this,t)},C.prototype.ProcessKeyboardEvent=function(t){return this.IsMouseEditing=!1,C.superclass.ProcessKeyboardEvent.call(this,t)},C.prototype.IsShowingTooltipWhileEditing=function(){return!0},t.exportProperty(t,"DialGauge",t.DialGauge),t.exportProperty(t,"LedGauge",t.LedGauge),t.exportProperty(t,"RatingGauge",t.RatingGauge),t.exportProperty(t,"StatusMeterGauge",t.StatusMeterGauge),t.exportProperty(t.DialGauge,"DialGauge",t.DialGauge),t.exportProperty(t.DialGauge,"LedGauge",t.LedGauge),t.exportProperty(t.DialGauge,"RatingGauge",t.RatingGauge),t.exportProperty(t.DialGauge,"StatusMeterGauge",t.StatusMeterGauge),t.exportProperty(e.prototype,"getAutomation",e.prototype.getAutomation),t.exportProperty(e.prototype,"destroy",e.prototype.destroy),t.exportProperty(e.prototype,"render",e.prototype.render),t.exportProperty(i.prototype,"getDomElementForSubId",i.prototype.getDomElementForSubId),t.exportProperty(i.prototype,"getValue",i.prototype.getValue),t.exportProperty(i.prototype,"getMetricLabel",i.prototype.getMetricLabel),t.LedGaugeRenderer=u}(t),t}),define("ojs/ojgauge",["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojdvt-base","ojs/internal-deps/dvt/DvtGauge"],function(t,e,i,n,o){t.__registerWidget("oj.dvtBaseGauge",e.oj.dvtBaseComponent,{_ProcessStyles:function(){this._super(),this.options._thresholdColors=[this.options._threshold1,this.options._threshold2,this.options._threshold3],this.options._threshold1=null,this.options._threshold2=null,this.options._threshold3=null},_AfterCreate:function(){this._super();var t={};t._context={writeback:!0,internalSet:!0,readOnly:!0},this.option("rawValue",this.options.value,t)},_GetChildStyleClasses:function(){var t=this._super();return t["oj-gauge-metric-label"]={path:"metricLabel/style",property:"CSS_TEXT_PROPERTIES"},t["oj-gauge-tick-label"]={path:"tickLabel/style",property:"CSS_TEXT_PROPERTIES"},t["oj-gauge-threshold1"]={path:"_threshold1",property:"color"},t["oj-gauge-threshold2"]={path:"_threshold2",property:"color"},t["oj-gauge-threshold3"]={path:"_threshold3",property:"color"},t},_GetEventTypes:function(){return["input","optionChange"]},_GetTranslationMap:function(){var t=this.options.translations,e=this._super();return e["DvtGaugeBundle.EMPTY_TEXT"]=t.labelNoData,e["DvtUtilBundle.GAUGE"]=t.componentName,e},_HandleEvent:function(t){var e=t.type;if("valueChange"===e){var i=t.newValue;t.complete?this._UserOptionChange("value",i):(this._trigger("input",null,{value:i}),this._UserOptionChange("rawValue",i))}else this._super(t)},_setOption:function(e,i,n){if("rawValue"===e)return void t.Logger.error("'rawValue' is a read-only option and cannot be set");if("value"===e){var o={};o._context={writeback:!0,internalSet:!0,readOnly:!0},this.option("rawValue",i,o)}this._super(e,i,n)},_ConvertLocatorToSubId:function(t){var e=t.subId;return"oj-dialgauge-tooltip"!=e&&"oj-ledgauge-tooltip"!=e&&"oj-ratinggauge-tooltip"!=e&&"oj-statusmetergauge-tooltip"!=e||(e="tooltip"),"oj-ratinggauge-item"==e&&null!=t.index&&(e="item["+t.index+"]"),e}},!0),t.__registerWidget("oj.ojLedGauge",e.oj.dvtBaseGauge,{widgetEventPrefix:"oj",options:{},_CreateDvtComponent:function(t,e,i){return this._focusable({
element:this.element,applyHighlight:!0}),o.LedGauge.newInstance(t,e,i)},_ConvertSubIdToLocator:function(t){var e={};return"tooltip"==t&&(e.subId="oj-ledgauge-tooltip"),e},_GetComponentStyleClasses:function(){var t=this._super();return t.push("oj-ledgauge"),t},_Render:function(){this.element.attr("title")?(this.options.shortDesc=this.element.attr("title"),this.element.data(this.element,"title",this.element.attr("title")),this.element.removeAttr("title")):this.element.data("title")&&(this.options.shortDesc=this.element.data("title")),this._super()},getMetricLabel:function(){var t=this._component.getAutomation();return t.getMetricLabel()}}),t.__registerWidget("oj.ojRatingGauge",e.oj.dvtBaseGauge,{widgetEventPrefix:"oj",options:{input:null,rawValue:void 0},_CreateDvtComponent:function(t,e,i){return this._focusable({element:this.element,applyHighlight:!0}),o.RatingGauge.newInstance(t,e,i)},_ConvertSubIdToLocator:function(t){var e={};return"tooltip"==t?e.subId="oj-ratinggauge-tooltip":0==t.indexOf("item")&&(e.subId="oj-ratinggauge-item",e.index=this._GetFirstIndex(t)),e},_GetComponentStyleClasses:function(){var t=this._super();return t.push("oj-ratinggauge"),t},_Render:function(){this.element.attr("title")?(this.options.shortDesc=this.element.attr("title"),this.element.data(this.element,"title",this.element.attr("title")),this.element.removeAttr("title")):this.element.data("title")&&(this.options.shortDesc=this.element.data("title")),this._super()},_UserOptionChange:function(t,e){this._superApply(arguments),"value"==t&&this._UserOptionChange("changed",!0)}}),t.__registerWidget("oj.ojDialGauge",e.oj.dvtBaseGauge,{widgetEventPrefix:"oj",options:{input:null,rawValue:void 0},_CreateDvtComponent:function(t,e,i){return this._focusable({element:this.element,applyHighlight:!0}),o.DialGauge.newInstance(t,e,i)},_ConvertSubIdToLocator:function(t){var e={};return"tooltip"==t&&(e.subId="oj-dialgauge-tooltip"),e},_GetComponentStyleClasses:function(){var t=this._super();return t.push("oj-dialgauge"),t},_Render:function(){this.element.attr("title")?(this.options.shortDesc=this.element.attr("title"),this.element.data(this.element,"title",this.element.attr("title")),this.element.removeAttr("title")):this.element.data("title")&&(this.options.shortDesc=this.element.data("title")),this._setImages(),this._super()},_setImages:function(){var e=this.options.background;null==e&&(e="circleAlta",this.options.background="circleAlta");var i=this.options.indicator;if(null==i&&(i="needleAlta",this.options.indicator="needleAlta"),"string"==typeof e){var n=[{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/alta-circle-200x200.png"),width:200,height:200},{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/alta-circle-400x400.png"),width:400,height:400}];"rectangleAlta"===e?n=[{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/alta-rectangle-200x200.png"),width:200,height:154},{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/alta-rectangle-400x400.png"),width:400,height:309}]:"domeAlta"===e?n=[{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/alta-dome-200x200.png"),width:200,height:154},{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/alta-dome-400x400.png"),width:400,height:309}]:"circleAntique"===e?n=[{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/antique-circle-200x200.png"),width:200,height:200},{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/antique-circle-400x400.png"),width:400,height:400}]:"rectangleAntique"===e?n=[{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/antique-rectangle-200x200.png"),width:200,height:168},{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/antique-rectangle-400x400.png"),width:400,height:335}]:"domeAntique"===e?n=[{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/antique-dome-200x200.png"),width:200,height:176},{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/antique-dome-400x400.png"),width:400,height:352}]:"circleLight"===e?n=[{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/light-circle-200x200.png"),width:200,height:200},{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/light-circle-400x400.png"),width:400,height:400}]:"rectangleLight"===e?n=[{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/light-rectangle-200x200.png"),width:200,height:154},{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/light-rectangle-400x400.png"),width:400,height:307}]:"domeLight"===e?n=[{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/light-dome-200x200.png"),width:200,height:138},{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/light-dome-400x400.png"),width:400,height:276}]:"circleDark"===e?n=[{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/dark-circle-200x200.png"),width:200,height:200},{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/dark-circle-400x400.png"),width:400,height:400}]:"rectangleDark"===e?n=[{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/dark-rectangle-200x200.png"),width:200,height:154},{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/dark-rectangle-400x400.png"),width:400,height:307}]:"domeDark"===e&&(n=[{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/dark-dome-200x200.png"),width:200,height:138},{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/dark-dome-400x400.png"),width:400,height:276}]),this.options._backgroundImages=n}if("string"==typeof i){var o=[{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/alta-needle-1600x1600.png"),width:374,height:575}];"needleAntique"===i?o=[{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/antique-needle-1600x1600.png"),width:81,height:734}]:"needleDark"===i?o=[{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/dark-needle-1600x1600.png"),width:454,height:652}]:"needleLight"===i&&(o=[{src:t.Config.getResourceUrl("resources/internal-deps/dvt/gauge/light-needle-1600x1600.png"),width:454,height:652}]),this.options._indicatorImages=o}},getMetricLabel:function(){var t=this._component.getAutomation();return t.getMetricLabel()}}),t.__registerWidget("oj.ojStatusMeterGauge",e.oj.dvtBaseGauge,{widgetEventPrefix:"oj",options:{input:null,rawValue:void 0},_CreateDvtComponent:function(t,e,i){return this._focusable({element:this.element,applyHighlight:!0}),o.StatusMeterGauge.newInstance(t,e,i)},_ConvertSubIdToLocator:function(t){var e={};return"tooltip"==t&&(e.subId="oj-statusmetergauge-tooltip"),e},_GetComponentStyleClasses:function(){var t=this._super();return t.push("oj-statusmetergauge"),t},_ProcessOptions:function(){this._super();var t=this.options.center;t&&t._renderer&&(t.renderer=this._GetTemplateRenderer(t._renderer,"center"))},_Render:function(){this.element.attr("title")?(this.options.shortDesc=this.element.attr("title"),this.element.data(this.element,"title",this.element.attr("title")),this.element.removeAttr("title")):this.element.data("title")&&(this.options.shortDesc=this.element.data("title")),this._super()},getMetricLabel:function(){var t=this._component.getAutomation();return t.getMetricLabel()}}),function(){var e={properties:{translations:{properties:{componentName:{type:"string"}}}},methods:{},extension:{_WIDGET_NAME:"dvtBaseGauge"}};t.CustomElementBridge.registerMetadata("dvtBaseGauge","dvtBaseComponent",e)}(),function(){var e={properties:{borderColor:{type:"string"},svgClassName:{type:"string"},color:{type:"string"},max:{type:"number"},metricLabel:{type:"object",properties:{converter:{type:"object"},rendered:{type:"string",enumValues:["on","off"]},scaling:{type:"string",enumValues:["auto","none","thousand","million","billion","trillion","quadrillion"]},style:{type:"string"},text:{type:"string",enumValues:["percent","number"]},textType:{type:"string"}}},min:{type:"number"},rotation:{type:"number",enumValues:["0","90","180","270"]},size:{type:"number"},svgStyle:{type:"object"},thresholds:{type:"Array<object>"},label:{type:"object",properties:{style:{type:"string"},text:{type:"string"}}},tooltip:{type:"object",properties:{renderer:{}}},type:{type:"string",enumValues:["arrow","square","circle","rectangle","diamond","triangle","human","star"]},value:{type:"number",writeback:!0},visualEffects:{type:"string",enumValues:["none","auto"]}},methods:{getMetricLabel:{}},extension:{_WIDGET_NAME:"ojLedGauge"}};t.CustomElementBridge.registerMetadata("oj-led-gauge","dvtBaseGauge",e),t.CustomElementBridge.register("oj-led-gauge",{metadata:t.CustomElementBridge.getMetadata("oj-led-gauge")})}(),function(){var e={properties:{changed:{type:"boolean",writeback:!0},changedState:{type:"object",properties:{borderColor:{type:"string"},svgClassName:{type:"string"},color:{type:"string"},shape:{type:"string",enumValues:["circle","rectangle","diamond","triangle","human","star"]},source:{type:"string"},svgStyle:{type:"object"}}},hoverState:{type:"object",properties:{borderColor:{type:"string"},svgClassName:{type:"string"},color:{type:"string"},shape:{type:"string",enumValues:["circle","rectangle","diamond","triangle","human","star"]},source:{type:"string"},svgStyle:{type:"object"}}},max:{type:"number"},min:{type:"number"},orientation:{type:"string",orientation:["vertical","horizontal"]},preserveAspectRatio:{type:"string"},rawValue:{type:"number",readOnly:!0,writeback:!0},readOnly:{type:"boolean"},selectedState:{type:"object",properties:{borderColor:{type:"string"},svgClassName:{type:"string"},color:{type:"string"},shape:{type:"string",enumValues:["circle","rectangle","diamond","triangle","human","star"]},source:{type:"string"},svgStyle:{type:"object"}}},step:{type:"number",enumValues:["1",".5"]},thresholds:{type:"Array<object>"},tooltip:{type:"object",properties:{renderer:{}}},unselectedState:{type:"object",properties:{borderColor:{type:"string"},svgClassName:{type:"string"},color:{type:"string"},shape:{type:"string",enumValues:["circle","rectangle","diamond","triangle","human","star"]},source:{type:"string"},svgStyle:{type:"object"}}},value:{type:"number",writeback:!0},visualEffects:{type:"string",enumValues:["none","auto"]}},methods:{},extension:{_WIDGET_NAME:"ojRatingGauge"}};t.CustomElementBridge.registerMetadata("oj-rating-gauge","dvtBaseGauge",e),t.CustomElementBridge.register("oj-rating-gauge",{metadata:t.CustomElementBridge.getMetadata("oj-rating-gauge")})}(),function(){var e={properties:{angleExtent:{type:"number"},animationDuration:{type:"number"},animationOnDataChange:{type:"string",enumValues:["auto","none"]},animationOnDisplay:{type:"string",enumValues:["auto","none"]},borderColor:{type:"string"},borderRadius:{type:"string",enumValues:["auto"]},center:{type:"object",properties:{renderer:{}}},svgClassName:{type:"string"},color:{type:"string"},indicatorSize:{type:"number"},innerRadius:{type:"number"},max:{type:"number"},metricLabel:{type:"object",properties:{converter:{type:"object"},position:{type:"string",enumValues:["auto","center","insideIndicatorEdge","outsideIndicatorEdge","outsidePlotArea","withTitle"]},rendered:{type:"string",enumValues:["auto","on","off"]},scaling:{type:"string",enumValues:["auto","none","thousand","million","billion","trillion","quadrillion"]},style:{type:"string"},text:{type:"string"},textType:{type:"string",enumValues:["percent","number"]}}},min:{type:"number"},orientation:{type:"string",enumValues:["circular","horizontal","vertical"]},plotArea:{type:"object",properties:{borderColor:{type:"string"},borderRadius:{type:"string",enumValues:["auto"]},svgClassName:{type:"string"},color:{type:"string"},rendered:{type:"string",enumValues:["auto","on","off"]},svgStyle:{type:"object"}}},rawValue:{type:"number",readOnly:!0,writeback:!0},readOnly:{type:"boolean"},referenceLines:{type:"Array<object>"},startAngle:{type:"number"},step:{type:"number"},svgStyle:{type:"object"},thresholdDisplay:{type:"string",enumValues:["cuurentOnly","all","onIndicator"]},thresholds:{type:"Array<object>"},label:{type:"object",properties:{position:{type:"string",enumValues:["auto","center","start"]},style:{type:"string"},text:{type:"string"}}},tooltip:{type:"object",properties:{renderer:{}}},value:{type:"number",writeback:!0},visualEffects:{type:"string",enumValues:["none","auto"]}},methods:{getMetricLabel:{}},extension:{_WIDGET_NAME:"ojStatusMeterGauge"}};t.CustomElementBridge.registerMetadata("oj-status-meter-gauge","dvtBaseGauge",e),t.CustomElementBridge.register("oj-status-meter-gauge",{metadata:t.CustomElementBridge.getMetadata("oj-status-meter-gauge")})}()}),define("ojs/ojdatasource-common",["ojs/ojcore","jquery"],function(t,e){t.DataSource=function(t){this.data=t,this.Init()},t.Object.createSubclass(t.DataSource,t.EventSource,"oj.DataSource"),t.DataSource.prototype.Init=function(){t.DataSource.superclass.Init.call(this)},t.TreeDataSource=function(e){t.TreeDataSource.superclass.constructor.call(this,e)},t.Object.createSubclass(t.TreeDataSource,t.DataSource,"oj.TreeDataSource"),t.TableDataSource=function(e,i){if(this.constructor==t.TableDataSource){var n=t.TableDataSource._LOGGER_MSG._ERR_TABLE_DATASOURCE_INSTANTIATED_SUMMARY,o=t.TableDataSource._LOGGER_MSG._ERR_TABLE_DATASOURCE_INSTANTIATED_DETAIL;throw new Error(n+"\n"+o)}this.data=e,this.options=i,this.isFetching=!1,this._startIndex=0,this.Init()},t.Object.createSubclass(t.TableDataSource,t.DataSource,"oj.TableDataSource"),t.TableDataSource.prototype.Init=function(){t.TableDataSource.superclass.Init.call(this)},t.TableDataSource.prototype.sortCriteria=null,t.TableDataSource.prototype.totalSizeConfidence=function(){return"actual"},t.TableDataSource.EventType={ADD:"add",REMOVE:"remove",RESET:"reset",REFRESH:"refresh",SORT:"sort",CHANGE:"change",REQUEST:"request",SYNC:"sync",ERROR:"error"},t.TableDataSource._LOGGER_MSG={_ERR_TABLE_DATASOURCE_INSTANTIATED_SUMMARY:"oj.TableDataSource constructor called.",_ERR_TABLE_DATASOURCE_INSTANTIATED_DETAIL:"Please do not instantiate oj.TableDataSource. Please use one of the subclasses instead such as oj.ArrayTableDataSource or oj.CollectionTableDataSource.",_ERR_DATA_INVALID_TYPE_SUMMARY:"Invalid data type.",_ERR_DATA_INVALID_TYPE_DETAIL:"Please specify the appropriate data type."},t.DiagramDataSource=function(e){t.DiagramDataSource.superclass.constructor.call(this,e)},t.Object.createSubclass(t.DiagramDataSource,t.DataSource,"oj.DiagramDataSource"),t.DiagramDataSource.EventType={ADD:"add",REMOVE:"remove",CHANGE:"change"},t.DataGridDataSource=function(e){t.DataGridDataSource.superclass.constructor.call(this,e)},t.Object.createSubclass(t.DataGridDataSource,t.DataSource,"oj.DataGridDataSource")}),define("ojs/ojdatacollection-utils",["ojs/ojcore","jquery"],function(t,e){t.DataCollectionEditUtils={},t.DataCollectionEditUtils.basicHandleEditEnd=function(i,n){var o,r,s;null==n&&(n=i.detail),o=e(n.cellContext.parentElement).find(".oj-component-initnode")[0],s=t.Components.getWidgetConstructor(o),r=n.cancelEdit,r?s("reset"):(s("validate"),s("isValid")||i.preventDefault())},t.DataCollectionEditUtils.basicHandleRowEditEnd=function(i,n){var o,r,s,a=e(n.rowContext.parentElement).find(".oj-component-initnode");for(o=0;o<a.length;o++){s=t.Components.getWidgetConstructor(a[o]),r=n.cancelEdit;try{if(r)s("reset");else if(s("validate"),!s("isValid"))return!1}catch(t){}}return!0}}),define("ojs/ojjquery-hammer",["ojs/ojcore","jquery","hammerjs"],function(t,e,i){i?(e.fn.ojHammer=function(t){switch(t){case"instance":return this.data("ojHammer");case"destroy":return this.each(function(){var t=e(this),i=t.data("ojHammer");i&&(i.destroy(),t.removeData("ojHammer"))});default:return this.each(function(){var n=e(this);n.data("ojHammer")||n.data("ojHammer",new i.Manager(n[0],t))})}},i.Manager.prototype.emit=function(t){return function(i,n){t.call(this,i,n),e(this.element).trigger({type:i,gesture:n})}}(i.Manager.prototype.emit)):t.Logger.warn("Hammer jQuery extension loaded without Hammer.")}),define("ojs/ojpopupcore",["ojs/ojcore","jquery","promise","ojs/ojcomponentcore","jqueryui-amd/position"],function(t,e){t.PositionUtils={},t.PositionUtils.normalizeHorizontalAlignment=function(i,n){for(var o=e.extend({},i),r=0;r<t.PositionUtils._ALIGN_RULE_PROPERTIES.length;r++){var s=t.PositionUtils._ALIGN_RULE_PROPERTIES[r],a=o[s];if(a)if(t.StringUtils.isString(a))o[s]=a.replace("start",n?"right":"left").replace("end",n?"left":"right").replace("<",n?"+":"-").replace(">",n?"-":"+");else for(var l=0;l<t.PositionUtils._SUB_ALIGN_RULE_PROPERTIES.length;l++){var h=t.PositionUtils._SUB_ALIGN_RULE_PROPERTIES[l],u=a[h];t.StringUtils.isString(u)&&(a[h]=u.replace("start",n?"right":"left").replace("end",n?"left":"right").replace("<",n?"+":"-").replace(">",n?"-":"+"))}}return o},t.PositionUtils.normalizePositionOf=function(t,e,i){return"event"===t?i:null==t||"launcher"===t?e:t},t.PositionUtils._normalizeEventForPosition=function(t){e.each(["pageX","pageY"],function(e,i){if(t&&void 0===t[i]&&t.originalEvent){var n=t.originalEvent,o=n.type,r="touchstart"===o||"touchmove"===o?"touches":"touchend"===o?"changedTouches":null;if(r){var s=n[r][0];s&&(t[i]=s[i])}}})},t.PositionUtils._ALIGN_RULE_PROPERTIES=["my","at"],t.PositionUtils._SUB_ALIGN_RULE_PROPERTIES=["vertical","horizontal"],t.PositionUtils.isAligningPositionClipped=function(e){if(e.target&&e.target.height>0&&e.target.width>0){var i=e.target.element;return!t.PositionUtils.isWithinViewport(i)}return!1},t.PositionUtils.isWithinViewport=function(i){function n(e,i){if(["hidden","scroll","auto"].indexOf(i.overflowY)>-1){if(e.bottom-i.top<-1)return!1;var n="auto"===i.overflowX||"scroll"===i.overflowX?t.DomUtils.getScrollBarWidth():0;if(i.bottom-n-e.top<1)return!1}if(["hidden","scroll","auto"].indexOf(i.overflowX)>-1){if(n="auto"!==i.overflowY&&"scroll"!==i.overflowY||"rtl"!==t.DomUtils.getReadingDirection()?0:t.DomUtils.getScrollBarWidth(),e.right-(i.left+n)<-1)return!1;var n="auto"!==i.overflowX&&"scroll"!==i.overflowX||"ltr"!==t.DomUtils.getReadingDirection()?0:t.DomUtils.getScrollBarWidth();if(e.left-(i.right-n)>-1)return!1}return!0}function o(t){return"visible"!==t.css("overflow-x")||"visible"!==t.css("overflow-y")}function r(t){var i=t[0];if(1===i.nodeType){var n=e.extend({},i.getBoundingClientRect());return n.overflowX=t.css("overflow-x"),n.overflowY=t.css("overflow-y"),n}return{height:0,width:0}}function s(e){return["fixed","absolute","relative"].indexOf(e.css("position"))>-1&&(Math.abs(t.DomUtils.getCSSLengthAsInt(e.css("top")))>0||Math.abs(t.DomUtils.getCSSLengthAsInt(e.css("bottom")))>0||Math.abs(t.DomUtils.getCSSLengthAsInt(e.css("left")))>0||Math.abs(t.DomUtils.getCSSLengthAsInt(e.css("right")))>0)}if(!i)return!1;if(e.isWindow(i[0])||s(i))return!0;for(var a=r(i),l=!0,h=i.parent();l&&h&&h.length>0&&"BODY"!==h[0].nodeName&&1===h[0].nodeType&&!s(h);){if(o(h)){var u=r(h);u.height>0&&u.width>0&&(l=n(a,u))}h=h.parent()}return l},t.PositionUtils._ANIMATION_TRANSFORM_ORIGIN_RULES={"right-top":"right top","right-middle":"right center","right-bottom":"right bottom","left-top":"left top","left-middle":"left center","left-bottom":"left bottom","center-top":"center top","center-middle":"center center","center-bottom":"center bottom"},t.PositionUtils._ALIGN_MNEMONIC_DATA="oj-popup-align-mnemonic",t.PositionUtils.captureTransformOriginAnimationEffectsOption=function(e,i){var n=[i.horizontal,i.vertical].join("-");e.data(t.PositionUtils._ALIGN_MNEMONIC_DATA,n)},t.PositionUtils.addTransformOriginAnimationEffectsOption=function(e,i){var n,o;t.StringUtils.isString(i)?(o=!0,n=i):(o=!1,n=JSON.stringify(i));var r=/#myPosition/g;if(n.match(r)){var s=e.data(t.PositionUtils._ALIGN_MNEMONIC_DATA);t.StringUtils.isEmptyOrUndefined(s)&&(s="center-middle");var a=t.PositionUtils._ANIMATION_TRANSFORM_ORIGIN_RULES[s];n=n.replace(r,a),i=o?n:JSON.parse(n)}return i},t.PositionUtils._JQUI_MNEMONIC_GRP_REGX=/^(\w+)(\+|\-)?(\d+)?/,t.PositionUtils._VERTICAL_ENUM_TST_REGX=/^top$|^center$|^bottom$/,t.PositionUtils._HORIZONTAL_ENUM_TST_REGX=/^start$|^left$|^center$|^end$|^right$/,t.PositionUtils._COLLISION_ENUM_TST_REGX=/^none$|^flip$|^flipfit$|^fit$|^flipcenter$/,t.PositionUtils._parsePositionNmnemonic=function(e,i){var n=[null,Number.NaN],o=t.PositionUtils._JQUI_MNEMONIC_GRP_REGX.exec(e);if(o[1]&&i.test(o[1])&&(n[0]=o[1],o[2])){var r=parseInt(o[3],10);isNaN(r)||(r*="-"===o[2]?-1:1,n[1]=r)}return n},t.PositionUtils._parseJSON=function(e){if(t.StringUtils.isString(e)&&/^{/.test(e)&&/}$/.test(e))try{return JSON.parse(e)}catch(t){}return null},t.PositionUtils._coerceMyAtToJet=function(i,n,o,r){var s=t.PositionUtils._parseJSON(n);s&&(n=s),s=t.PositionUtils._parseJSON(o),s&&(o=s),r||(r={});var a=e.extend({},r),l={x:0,y:0};o&&"x"in o&&"y"in o&&(l.x=t.DomUtils.getCSSLengthAsInt(o.x),l.y=t.DomUtils.getCSSLengthAsInt(o.y));var h;if(t.StringUtils.isString(n)){var u=n.split(/\s/);u.length>0&&!t.StringUtils.isEmpty(u[0])&&(h=t.PositionUtils._parsePositionNmnemonic(u[0],t.PositionUtils._HORIZONTAL_ENUM_TST_REGX),h[0]&&(a.horizontal=h[0],isNaN(h[1])||(l.x=h[1]))),u.length>1&&!t.StringUtils.isEmpty(u[1])&&(h=t.PositionUtils._parsePositionNmnemonic(u[1],t.PositionUtils._VERTICAL_ENUM_TST_REGX),h[0]&&(a.vertical=h[0],isNaN(h[1])||(l.y=h[1])))}else n&&("horizontal"in n&&(h=t.PositionUtils._parsePositionNmnemonic(n.horizontal,t.PositionUtils._HORIZONTAL_ENUM_TST_REGX),h[0]&&(a.horizontal=h[0],isNaN(h[1])||(l.x=h[1]))),"vertical"in n&&(h=t.PositionUtils._parsePositionNmnemonic(n.vertical,t.PositionUtils._VERTICAL_ENUM_TST_REGX),h[0]&&(a.vertical=h[0],isNaN(h[1])||(l.y=h[1]))));var d={};return d[i]=a,d.offset=l,d},t.PositionUtils._coerceCollisionToJet=function(e,i){var n=i;return t.PositionUtils._COLLISION_ENUM_TST_REGX.test(e)&&(n=e),{collision:n}},t.PositionUtils._coerceOfToJet=function(i,n){function o(t){for(var e=[],i=/\w|_|-/,n=0;n<t.length;n++){var o=t.substring(n,n+1);i.test(o)?e.push(o):e.push("\\"+o)}return e.join("")}var r=t.PositionUtils._parseJSON(i);r&&(i=r);var s=n;if(t.StringUtils.isString(i))s=i;else if(e.isWindow(i))s="window";else if(i instanceof Element||i instanceof e){i=e(i),i.uniqueId();var a=i.attr("id");s="#"+o(a)}else i instanceof Event||i instanceof e.Event?("pageX"in i||"pageY"in i)&&(s={},s.x=t.DomUtils.getCSSLengthAsFloat(i.pageX),s.y=t.DomUtils.getCSSLengthAsFloat(i.pageY)):i&&("x"in i||"y"in i)&&(s={},s.x=t.DomUtils.getCSSLengthAsFloat(i.x),s.y=t.DomUtils.getCSSLengthAsFloat(i.y));return{of:s}},t.PositionUtils.coerceToJet=function(i,n){function o(t,i){var n=e.isFunction(t)?t:i;return{using:n}}i||(i={});var r=t.PositionUtils._parseJSON(i);r&&(i=r),n||(n={});var s=n.my,a=n.at,l=n.collision,h=n.of,u=void 0,d=t.PositionUtils._coerceMyAtToJet("my",i.my,i.offset,s),c=t.PositionUtils._coerceMyAtToJet("at",i.at,null,a),p={offset:{x:d.offset.x+c.offset.x,y:d.offset.y+c.offset.y}};delete d.offset,delete c.offset;var _=e.extend({},d,c,p,t.PositionUtils._coerceCollisionToJet(i.collision,l),t.PositionUtils._coerceOfToJet(i.of,h),o(i.using,u));return _},t.PositionUtils.coerceToJqUi=function(i){function n(t,e){var n=[];if(i[t][e]?n.push(i[t][e]):n.push("center"),"my"===t&&i.offset){var o="horizontal"===e?"x":"y",r=i.offset[o];isNaN(r)||0===r||(n.push(r>0?"+":""),n.push(Math.floor(r).toString()))}return n.join("")}var o={};["my","at"].forEach(function(t){if(i[t]){var e=[];e.push(n(t,"horizontal")),e.push(" "),e.push(n(t,"vertical")),o[t]=e.join("")}});var r=i.of;if(t.StringUtils.isString(r))"window"===r?o.of=window:o.of=r;else if(r&&!t.StringUtils.isString(r)&&"x"in r&&"y"in r){var s=r.x,a=r.y,l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,1,s,a,s,a,!1,!1,!1,!1,0,null),o.of=e.Event(l,{pageX:s,pageY:a})}else o.of=r;return i.collision&&(o.collision=i.collision),i.using&&(o.using=i.using),o},e.ui.position.flipcenter={left:function(i,n){var o=i.left;e.ui.position.flip.left.call(this,i,n);var r=n.within,s=r.isWindow?r.scrollLeft:r.offset.left,a=r.width,l=i.left-n.collisionPosition.marginLeft,h=s-l,u=l+n.collisionWidth-a-s;if(h>0||u>0){"right"===n.at[0]?o-=n.targetWidth/2:"left"===n.at[0]&&(o+=n.targetWidth/2);var d="rtl"===t.DomUtils.getReadingDirection(),c=d?-1:1;o-=c*(n.elemWidth/2),i.left=Math.max(0,o)}},top:function(t,i){var n=t.top;e.ui.position.flip.top.call(this,t,i);var o=i.within,r=o.isWindow?o.scrollTop:o.offset.top,s=i.within.height,a=t.top-i.collisionPosition.marginTop,l=r-a,h=a+i.collisionHeight-s-r;(l>0||h>0)&&("top"===i.at[1]?n+=i.targetHeight/2:"bottom"===i.at[1]&&(n-=i.targetHeight/2),n+=i.elemHeight/2,t.top=Math.max(0,n))}};var i=e.ui.position.flip.left;e.ui.position.flip={left:i.bind(this),top:function(t,e){var i,n,o=e.within,r=o.offset.top+o.scrollTop,s=o.height,a=o.isWindow?o.scrollTop:o.offset.top,l=t.top-e.collisionPosition.marginTop,h=l-a,u=l+e.collisionHeight-s-a,d="top"===e.my[1],c=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,_=-2*e.offset[1];h<0?(i=t.top+c+p+_+e.collisionHeight-s-r,(i<0||i<Math.abs(h))&&u<0&&h>u&&(t.top+=c+p+_)):u>0&&(n=t.top-e.collisionPosition.marginTop+c+p+_-a,(n>0||Math.abs(n)<u)&&(t.top+=c+p+_))}},t.PopupService=function(){this.Init()},t.Object.createSubclass(t.PopupService,t.Object,"oj.PopupService"),t.PopupService.prototype.Init=function(){t.PopupService.superclass.Init.call(this)},t.PopupService.getInstance=function(e){return t.PopupService._popupService||(t.PopupService._popupService=new t.PopupServiceImpl),t.PopupService._popupService},t.PopupService.prototype.open=function(e){t.Assert.failedInAbstractFunction()},t.PopupService.prototype.close=function(e){t.Assert.failedInAbstractFunction()},t.PopupService.prototype.changeOptions=function(e){t.Assert.failedInAbstractFunction()},t.PopupService.prototype.triggerOnDescendents=function(e,i,n){t.Assert.failedInAbstractFunction()},t.PopupService.prototype.destroy=function(){t.PopupService._popupService=null},t.PopupService.MODALITY={NONE:"none",MODAL:"modal",MODELESS:"modeless"},t.PopupService.EVENT={POPUP_REMOVE:"ojPopupRemove",POPUP_CLOSE:"ojPopupClose",POPUP_REFRESH:"ojPopupRefresh",POPUP_AUTODISMISS:"ojPopupAutoDismiss",POPUP_BEFORE_OPEN:"ojPopupBeforeOpen",POPUP_AFTER_OPEN:"ojPopupAfterOpen",POPUP_BEFORE_CLOSE:"ojPopupBeforeClose",POPUP_AFTER_CLOSE:"ojPopupAfterClose"},t.PopupService.LAYER_LEVEL={TOP_LEVEL:"topLevel",NEAREST_ANCESTOR:"nearestAncestor"},t.PopupService.OPTION={POPUP:"popup",EVENTS:"events",MODALITY:"modality",LAUNCHER:"launcher",POSITION:"position",LAYER_SELECTORS:"layerSelectors",LAYER_LEVEL:"layerLevel",CONTEXT:"context"},t.PopupServiceImpl=function(){this.Init()},t.Object.createSubclass(t.PopupServiceImpl,t.PopupService,"oj.PopupServiceImpl"),t.PopupServiceImpl.prototype.open=function(i){t.Assert.assertObject(i);var n=i[t.PopupService.OPTION.POPUP];t.Assert.assertPrototype(n,e);var o=i[t.PopupService.OPTION.LAUNCHER];t.Assert.assertPrototype(o,e);var r=i[t.PopupService.OPTION.POSITION];t.Assert.assertObjectOrNull(r);var s=i[t.PopupService.OPTION.EVENTS];t.Assert.assertObject(s);var a=i[t.PopupService.OPTION.MODALITY];(!a||t.PopupService.MODALITY.MODELESS!==a&&t.PopupService.MODALITY.MODAL!==a)&&(a=t.PopupService.MODALITY.NONE);var l=i[t.PopupService.OPTION.LAYER_SELECTORS];t.Assert.assertString(l);var h=i[t.PopupService.OPTION.LAYER_LEVEL];(!h||t.PopupService.LAYER_LEVEL.TOP_LEVEL!==h&&t.PopupService.LAYER_LEVEL.NEAREST_ANCESTOR!==h)&&(h=t.PopupService.LAYER_LEVEL.NEAREST_ANCESTOR);var u=s[t.PopupService.EVENT.POPUP_BEFORE_OPEN];u&&e.isFunction(u)||(u=t.PopupServiceImpl._defaultBeforeOpenCallback);var d=s[t.PopupService.EVENT.POPUP_AFTER_OPEN];t.DomUtils.setLogicalParent(n,o),t.ZOrderUtils.addToAncestorLayer(n,o,a,l,h);var c=function(){try{n.removeAttr("aria-hidden"),this._assertEventSink(),t.Components.subtreeShown(n[0])}catch(e){t.Logger.error("Error opening popup:\n%o",e)}finally{d&&d(i);var o=t.ZOrderUtils.getFirstAncestorLayer(n);t.Assert.assertPrototype(o,e),t.ZOrderUtils.applyEvents(o,s)}};c=c.bind(this);var p;try{p=u(i)}catch(e){t.Logger.error("Error before open popup:\n%o",e)}finally{p&&p instanceof Promise?p.then(c):c()}},t.PopupServiceImpl._defaultBeforeOpenCallback=function(i){var n=i[t.PopupService.OPTION.POPUP];t.Assert.assertPrototype(n,e);var o=i[t.PopupService.OPTION.POSITION];n.show(),o&&n.position(o)},t.PopupServiceImpl.prototype.close=function(i){t.Assert.assertObject(i);var n=i[t.PopupService.OPTION.POPUP];t.Assert.assertPrototype(n,e);var o=t.ZOrderUtils.getFirstAncestorLayer(n);t.Assert.assertPrototype(o,e);var r=i[t.PopupService.OPTION.EVENTS];if(r=r?e.extend(t.ZOrderUtils.getEvents(o),r):i[t.PopupService.OPTION.EVENTS]=t.ZOrderUtils.getEvents(o)){var s=r[t.PopupService.EVENT.POPUP_BEFORE_CLOSE];s&&e.isFunction(s)||(s=t.PopupServiceImpl._defaultBeforeCloseCallback);var a=r[t.PopupService.EVENT.POPUP_AFTER_CLOSE];t.ZOrderUtils.applyEvents(o,{});var l=function(){try{n.hide(),n.attr("aria-hidden","true"),n.css({top:"auto",bottom:"auto",left:"auto",right:"auto"}),t.ZOrderUtils.removeFromAncestorLayer(n),t.DomUtils.setLogicalParent(n,null),this._assertEventSink(),t.Components.subtreeHidden(n[0])}catch(e){t.Logger.error("Error closing popup:\n%o",e)}finally{a&&e.isFunction(a)&&a(i)}};l=l.bind(this);var h;try{h=s(i)}catch(e){t.Logger.error("Error before close popup:\n%o",e)}finally{h&&h instanceof Promise?h.then(l):l()}}},t.PopupServiceImpl._defaultBeforeCloseCallback=function(i){var n=i[t.PopupService.OPTION.POPUP];t.Assert.assertPrototype(n,e),n.hide()},t.PopupServiceImpl.prototype.changeOptions=function(i){t.Assert.assertObject(i);var n=i[t.PopupService.OPTION.POPUP];t.Assert.assertPrototype(n,e);var o=t.ZOrderUtils.getFirstAncestorLayer(n);t.Assert.assertPrototype(o,e);var r=i[t.PopupService.OPTION.EVENTS];r&&t.ZOrderUtils.applyEvents(o,r);var s=i[t.PopupService.OPTION.MODALITY];s&&t.ZOrderUtils.applyModality(o,s);var a=i[t.PopupService.OPTION.LAYER_SELECTORS];t.StringUtils.isEmptyOrUndefined(a)||o.attr("class",a)},t.PopupServiceImpl.prototype.triggerOnDescendents=function(e,i,n){if(t.ZOrderUtils.isPopupOpen(e)){var o={};o.event=i,o.argsArray=n;var r=t.ZOrderUtils.getFirstAncestorLayer(e);t.ZOrderUtils.postOrderVisit(r,this._triggerOnDescendentsVisitCallback,o)}},t.PopupServiceImpl.prototype._triggerOnDescendentsVisitCallback=function(i,n){var o=n.event,r=n.argsArray,s=t.ZOrderUtils.getEvents(i);return s&&e.isFunction(s[o])&&s[o].apply(this,r),t.ZOrderUtils.VISIT_RESULT.ACCEPT},t.PopupServiceImpl.prototype._assertEventSink=function(){var e=t.ZOrderUtils.hasPopupsOpen(),i=this._callbackEventFilter;if(!e&&i){window.removeEventListener("resize",t.PopupServiceImpl._refreshCallback,!0),window.removeEventListener("scroll",t.PopupServiceImpl._refreshCallback,!0);var n=document.documentElement;n.removeEventListener("mousewheel",t.PopupServiceImpl._refreshCallback,!0),n.removeEventListener("DOMMouseScroll",t.PopupServiceImpl._refreshCallback,!0),this._callbackEventFilter=null;for(var o=0;o<t.PopupServiceImpl._REDISTRIBUTE_EVENTS.length;o++){var r=t.PopupServiceImpl._REDISTRIBUTE_EVENTS[o];n.removeEventListener(r,i,!0)}var s=this._simpleTapRecognizer;s&&(s.destroy(),this._simpleTapRecognizer=null)}else if(e&&!i){window.addEventListener("resize",t.PopupServiceImpl._refreshCallback,!0),window.addEventListener("scroll",t.PopupServiceImpl._refreshCallback,!0);var n=document.documentElement;n.addEventListener("mousewheel",t.PopupServiceImpl._refreshCallback,!0),n.addEventListener("DOMMouseScroll",t.PopupServiceImpl._refreshCallback,!0),i=this._callbackEventFilter=this._eventFilterCallback.bind(this);for(var o=0;o<t.PopupServiceImpl._REDISTRIBUTE_EVENTS.length;o++){var r=t.PopupServiceImpl._REDISTRIBUTE_EVENTS[o];n.addEventListener(r,i,!0)}t.DomUtils.isTouchSupported()&&(this._simpleTapRecognizer=new t.SimpleTapRecognizer(i))}},t.PopupServiceImpl.prototype._eventFilterCallback=function(i){var n=e(i.target),o=t.ZOrderUtils.hasPopupsOpen();if(!o)return void this._assertEventSink();if(!t.DomUtils.isChromeEvent(i)&&("focus"!==i.type||n.is(":focusable"))){var r=t.ZOrderUtils.getDefaultLayer();if("keydown"===i.type&&t.ZOrderUtils.hasModalDialogOpen()&&!t.DomUtils.isAncestor(r[0],n[0]))return void t.ZOrderUtils.eatEvent(e.Event(i));
var s=t.ZOrderUtils.getFirstAncestorLayer(n);if(r[0]!==s[0]){if(!s.hasClass(t.PopupServiceImpl._FOCUS_WITHIN_SELECTOR)){var a=this._lastFocusLayer;a&&a.removeClass(t.PopupServiceImpl._FOCUS_WITHIN_SELECTOR),s.addClass(t.PopupServiceImpl._FOCUS_WITHIN_SELECTOR),this._lastFocusLayer=s}}else{var a=this._lastFocusLayer;a&&(a.removeClass(t.PopupServiceImpl._FOCUS_WITHIN_SELECTOR),this._lastFocusLayer=null)}if("focus"!==i.type||"-1"!==n.attr("tabindex")){var l={},h={};for(var u in i)t.PopupServiceImpl._COPY_SAFE_EVENT_PROPERTIES[u]&&!e.isFunction(i[u])&&(h[u]=i[u]);l.event=e.Event(i,h),t.ZOrderUtils.postOrderVisit(r,t.PopupServiceImpl._redistributeVisitCallback,l)}}},t.PopupServiceImpl._redistributeVisitCallback=function(i,n){var o=t.ZOrderUtils.getEvents(i),r=n.event;r.type;return o&&e.isFunction(o[t.PopupService.EVENT.POPUP_AUTODISMISS])&&o[t.PopupService.EVENT.POPUP_AUTODISMISS](r),t.ZOrderUtils.VISIT_RESULT.ACCEPT},t.PopupServiceImpl._refreshCallback=function(i){var n=t.PopupServiceImpl._refreshTimerId;isNaN(n)&&(t.PopupServiceImpl._refreshTimerId=window.setTimeout(function(){t.PopupServiceImpl._refreshTimerId=Number.NaN;var i=t.ZOrderUtils.getDefaultLayer();e.isFunction(window.requestAnimationFrame)?t.PopupServiceImpl._afRequestId=window.requestAnimationFrame(function(){t.PopupServiceImpl._afRequestId=null,t.ZOrderUtils.postOrderVisit(i,t.PopupServiceImpl._refreshVisitCallback)}):t.ZOrderUtils.postOrderVisit(i,t.PopupServiceImpl._refreshVisitCallback)},t.PopupServiceImpl._REFRESH_DELAY))},t.PopupServiceImpl._refreshVisitCallback=function(i,n){var o=n.level;if(o>0)return t.ZOrderUtils.VISIT_RESULT.REJECT;var r=t.ZOrderUtils.getEvents(i);return r&&e.isFunction(r[t.PopupService.EVENT.POPUP_REFRESH])&&r[t.PopupService.EVENT.POPUP_REFRESH](),t.ZOrderUtils.VISIT_RESULT.ACCEPT},t.PopupServiceImpl.prototype.destroy=function(){t.PopupServiceImpl.superclass.destroy.call(this)},t.PopupServiceImpl._FOCUS_WITHIN_SELECTOR="oj-focus-within",t.PopupServiceImpl._REDISTRIBUTE_EVENTS=["focus","mousedown","keydown"],t.PopupServiceImpl._COPY_SAFE_EVENT_PROPERTIES={altKey:!0,bubbles:!0,cancelable:!0,ctrlKey:!0,currentTarget:!0,eventPhase:!0,metaKey:!0,relatedTarget:!0,shiftKey:!0,target:!0,timeStamp:!0,view:!0,which:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pageX:!0,pageY:!0,screenX:!0,screenY:!0,toElement:!0,char:!0,charCode:!0,key:!0,keyCode:!0},t.PopupServiceImpl._REFRESH_DELAY=10,t.ZOrderUtils={},t.ZOrderUtils.getFirstAncestorLayer=function(e){if(!e)return t.ZOrderUtils.getDefaultLayer();for(var i=e;i&&i.length>0&&i.attr("oj.ZOrderUtils._SURROGATE_ATTR")!==t.ZOrderUtils._DEFAULT_LAYER_ID;){if(t.ZOrderUtils._hasSurrogate(i[0]))return i;i=i.parent()}return t.ZOrderUtils.getDefaultLayer()},t.ZOrderUtils.getDefaultLayer=function(){var i=e(document.getElementById(t.ZOrderUtils._DEFAULT_LAYER_ID));return i.length>0?i:(i=e("<div>"),i.attr("role","presentation"),i.attr("id",t.ZOrderUtils._DEFAULT_LAYER_ID),i.prependTo(e(document.body)),i)},t.ZOrderUtils.addToAncestorLayer=function(i,n,o,r,s){var a=i[0];if(t.ZOrderUtils._hasSurrogate(a.parentNode))throw new Error("JET Popup is already open - id: "+a.getAttribute("id"));var l=t.ZOrderUtils.getFirstAncestorLayer(s===t.PopupService.LAYER_LEVEL.TOP_LEVEL?null:n),h=e("<div>"),u=i.attr("id");t.StringUtils.isEmptyOrUndefined(u)?h.uniqueId():h.attr("id",[u,"layer"].join("_")),h.attr("role","presentation"),h.addClass(r),i.after(h);t.ZOrderUtils._createSurrogate(h);t.Components.subtreeDetached(a),i.appendTo(h),h.appendTo(l),t.Components.subtreeAttached(a),t.ZOrderUtils.applyModality(h,o)},t.ZOrderUtils.applyEvents=function(i,n,o){if(!o){var r=i.attr(t.ZOrderUtils._SURROGATE_ATTR);r&&(o=e(document.getElementById(r)))}i.data(t.ZOrderUtils._EVENTS_DATA,n),o&&n&&e.isFunction(n[t.PopupService.EVENT.POPUP_REMOVE])&&(o.surrogate(),o.surrogate("option","beforeDestroy",n[t.PopupService.EVENT.POPUP_REMOVE]))},t.ZOrderUtils.getEvents=function(e){var i=e.data(t.ZOrderUtils._EVENTS_DATA);return i},t.ZOrderUtils._createSurrogate=function(i){var n=e("<script>"),o=i.attr("id");t.StringUtils.isEmptyOrUndefined(o)?n.uniqueId():n.attr("id",[o,"surrogate"].join("_")),n.insertBefore(i);var r=n.attr("id");return i.attr(t.ZOrderUtils._SURROGATE_ATTR,r),n},t.ZOrderUtils._removeSurrogate=function(i){var n=i.attr(t.ZOrderUtils._SURROGATE_ATTR);i.removeAttr(t.ZOrderUtils._SURROGATE_ATTR);var o=e(document.getElementById(n));i.insertAfter(o),o.surrogate("option","beforeDestroy",null),o.remove()},t.ZOrderUtils.removeFromAncestorLayer=function(e){var i=t.ZOrderUtils.getFirstAncestorLayer(e);t.ZOrderUtils.preOrderVisit(i,t.ZOrderUtils._closeDescendantPopupsCallback),t.ZOrderUtils._removeOverlayFromAncestorLayer(i),i.removeData(t.ZOrderUtils._EVENTS_DATA),i.removeData(t.ZOrderUtils._MODALITY_DATA);var n=e[0];t.Components.subtreeDetached(n),t.ZOrderUtils._removeSurrogate(i),t.DomUtils.unwrap(e,i),t.Components.subtreeAttached(n)},t.ZOrderUtils._closeDescendantPopupsCallback=function(i,n){var o=n.level;if(o>0)return t.ZOrderUtils.VISIT_RESULT.REJECT;var r=i.data(t.ZOrderUtils._EVENTS_DATA);return r&&e.isFunction(r[t.PopupService.EVENT.POPUP_CLOSE])&&r[t.PopupService.EVENT.POPUP_CLOSE](),t.ZOrderUtils.VISIT_RESULT.ACCEPT},t.ZOrderUtils.applyModality=function(e,i){var n=e.data(t.ZOrderUtils._MODALITY_DATA);if(e.data(t.ZOrderUtils._MODALITY_DATA,i),t.StringUtils.isEmptyOrUndefined(n))t.PopupService.MODALITY.MODAL===i?t.ZOrderUtils._addOverlayToAncestorLayer(e):t.ZOrderUtils._removeOverlayFromAncestorLayer(e);else{if(n===i)return;i!==n&&i===t.PopupService.MODALITY.MODAL?t.ZOrderUtils._addOverlayToAncestorLayer(e):t.ZOrderUtils._removeOverlayFromAncestorLayer(e)}},t.ZOrderUtils.hasModalDialogOpen=function(){for(var i=t.ZOrderUtils.getDefaultLayer(),n=i.children(),o=n.length,r=o-1;r>-1;r--){var s=e(n[r]);if(s.hasClass(t.ZOrderUtils._OVERLAY_SELECTOR))return!0}return!1},t.ZOrderUtils._addOverlayToAncestorLayer=function(i){var n=e("<div>");n.addClass(t.ZOrderUtils._OVERLAY_SELECTOR),n.addClass(i[0].className),n.attr("role","presentation");var o=i.attr("id");t.StringUtils.isEmptyOrUndefined(o)?n.uniqueId():n.attr("id",[o,"overlay"].join("_")),i.before(n);var r=n.attr("id");i.attr(t.ZOrderUtils._OVERLAY_ATTR,r)},t.ZOrderUtils._removeOverlayFromAncestorLayer=function(i){var n=i.attr(t.ZOrderUtils._OVERLAY_ATTR);if(!t.StringUtils.isEmptyOrUndefined(n)){i.removeAttr(t.ZOrderUtils._OVERLAY_ATTR);var o=e(document.getElementById(n));o.remove()}},t.ZOrderUtils.VISIT_RESULT={ACCEPT:0,REJECT:1,COMPLETE:2},t.ZOrderUtils._VISIT_TRAVERSAL={PRE_ORDER:0,POST_ORDER:1},t.ZOrderUtils.postOrderVisit=function(e,i,n){n||(n={}),n.level=0,n.type=t.ZOrderUtils._VISIT_TRAVERSAL.POST_ORDER,t.ZOrderUtils._visitTree(e,i,n)},t.ZOrderUtils.preOrderVisit=function(e,i,n){n||(n={}),n.level=0,n.type=t.ZOrderUtils._VISIT_TRAVERSAL.PRE_ORDER,t.ZOrderUtils._visitTree(e,i,n)},t.ZOrderUtils._visitTree=function(i,n,o){for(var r=o.level,s=i.children(),a=s.length,l=a-1;l>-1;l--){var h=e(s[l]);if(t.ZOrderUtils._hasSurrogate(h[0])){var u;if(o.type===t.ZOrderUtils._VISIT_TRAVERSAL.PRE_ORDER){if(u=n(h,o),u===t.ZOrderUtils.VISIT_RESULT.COMPLETE)return u;if(u===t.ZOrderUtils.VISIT_RESULT.REJECT)break}if(o.level=r+1,u=t.ZOrderUtils._visitTree(h,n,o),o.level=r,u===t.ZOrderUtils.VISIT_RESULT.COMPLETE)return u;if(o.type===t.ZOrderUtils._VISIT_TRAVERSAL.POST_ORDER){if(u=n(h,o),u===t.ZOrderUtils.VISIT_RESULT.COMPLETE)return u;if(u===t.ZOrderUtils.VISIT_RESULT.REJECT)break}}}return t.ZOrderUtils.VISIT_RESULT.ACCEPT},t.ZOrderUtils._hasSurrogate=function(e){return!(1!==e.nodeType||!e.hasAttribute(t.ZOrderUtils._SURROGATE_ATTR))},t.ZOrderUtils.hasPopupsOpen=function(){var e=t.ZOrderUtils.getDefaultLayer();return e.children().length>0},t.ZOrderUtils.getOpenPopupCount=function(){var e={};e.popupCount=0;var i=t.ZOrderUtils.getDefaultLayer();return t.ZOrderUtils.preOrderVisit(i,t.ZOrderUtils._openPopupCountCallback,e),e.popupCount},t.ZOrderUtils._openPopupCountCallback=function(e,i){return i.popupCount=i.popupCount+1,t.ZOrderUtils.VISIT_RESULT.ACCEPT},t.ZOrderUtils.findOpenPopups=function(){var i={},n=[];i.popups=n;var o=t.ZOrderUtils.getDefaultLayer();return t.ZOrderUtils.preOrderVisit(o,t.ZOrderUtils._openPopupsCallback,i),n=i.popups,e(n)},t.ZOrderUtils._openPopupsCallback=function(e,i){var n=i.popups;return n.push(e[0]),t.ZOrderUtils.VISIT_RESULT.ACCEPT},t.ZOrderUtils.compareStackingContexts=function(i,n){function o(i,n){for(var o=["absolute","relative","fixed"],r=i.parents(),s=[],a=r.length-1;a>-1;a--)s.push(e(r[a]));r=s,r.push(i);for(var l=[],h=0,a=0;a<r.length;a++){var u=r[a],d=u.css("position"),c=t.DomUtils.getCSSLengthAsFloat(u.css("opacity")),p=t.DomUtils.getCSSLengthAsInt(u.css("z-index")),_=e.inArray(u[0],u.parent().children());if(e.inArray(d,o)>-1)l.push({weight:[h++,p,_],order:[_]});else if(c<1)l.push({weight:[h++,1,_],order:[_]});else{if(!n)continue;l.push({weight:[0,0,_],order:[_]})}}return l}function r(t,e){for(var i=Math.max(t.length,e.length),n=0;n<i;n++){var o=n<t.length?t[n]:-1,r=n<e.length?e[n]:-1;if(o!==r)return o<r?-1:1}return 0}t.Assert.assertPrototype(i,e),t.Assert.assertPrototype(n,e);for(var s=o(i,!1),a=o(n,!1),l=Math.max(s.length,a.length),h=0;h<l;h++){var u=h<s.length?s[h].weight:[-1],d=h<a.length?a[h].weight:[-1],c=r(u,d);if(0!==c)return c}s=o(i,!0),a=o(n,!0),l=Math.max(s.length,a.length);for(var h=0;h<l;h++){u=h<s.length?s[h].order:[-1],d=h<a.length?a[h].order:[-1];var c=r(u,d);if(0!==c)return c}return 0},t.ZOrderUtils.eatEvent=function(t){t.stopPropagation(),t.preventDefault()},t.ZOrderUtils.isPopupOpen=function(e){var i=e.parent();return!(!i||1!==i.length||!t.ZOrderUtils._hasSurrogate(i[0]))},t.ZOrderUtils._EVENTS_DATA="oj-popup-events",t.ZOrderUtils._MODALITY_DATA="oj-popup-modality",t.ZOrderUtils._DEFAULT_LAYER_ID="__oj_zorder_container",t.ZOrderUtils._SURROGATE_ATTR="data-oj-surrogate-id",t.ZOrderUtils._OVERLAY_ATTR="data-oj-overlayid",t.ZOrderUtils._OVERLAY_SELECTOR="oj-component-overlay",e.widget("oj.surrogate",{options:{create:null,beforeDestroy:null},_create:function(){this._super(),this.element.uniqueId()},_destroy:function(){this._trigger("beforeDestroy"),this.element.removeUniqueId(),this._super()}}),t.SimpleTapRecognizer=function(t){this._tapCallback=t,this.Init()},t.Object.createSubclass(t.SimpleTapRecognizer,t.Object,"oj.SimpleTapRecognizer"),t.SimpleTapRecognizer.prototype.Init=function(){t.SimpleTapRecognizer.superclass.Init.call(this);for(var e=this._eventHandlerCallback=this._eventHandler.bind(this),i=document.documentElement,n=0;n<t.SimpleTapRecognizer._TOUCHEVENTS.length;n++)i.addEventListener(t.SimpleTapRecognizer._TOUCHEVENTS[n],e,!0)},t.SimpleTapRecognizer.prototype._eventHandler=function(e){var i=this._tapCallback,n=e.type;if("touchstart"===n)this._touchStartEvent=e,this._touchStartEvent._tapStart=(new Date).getTime();else if("touchmove"===n||"touchcancel"===n)this._touchStartEvent=null;else if("touchend"===n){if(this._touchStartEvent){var o=this._touchStartEvent._tapStart;if(isNaN(o))i(this._touchStartEvent);else{var r=(new Date).getTime();r-o<t.SimpleTapRecognizer._PRESSHOLDTHRESSHOLD&&i(this._touchStartEvent)}}this._touchStartEvent=null}},t.SimpleTapRecognizer.prototype.destroy=function(){this._tapCallback=null;var e=this._eventHandlerCallback;this._eventHandlerCallback=null;for(var i=document.documentElement,n=0;n<t.SimpleTapRecognizer._TOUCHEVENTS.length;n++)i.removeEventListener(t.SimpleTapRecognizer._TOUCHEVENTS[n],e,!0)},t.SimpleTapRecognizer._TOUCHEVENTS=["touchstart","touchmove","touchcancel","touchend"],t.SimpleTapRecognizer._PRESSHOLDTHRESSHOLD=700,t.PopupLiveRegion=function(){this.Init()},t.Object.createSubclass(t.PopupLiveRegion,t.Object,"oj.PopupLiveRegion"),t.PopupLiveRegion.prototype.Init=function(){t.PopupLiveRegion.superclass.Init.call(this),isNaN(t.PopupLiveRegion._refCounter)?t.PopupLiveRegion._refCounter=1:++t.PopupLiveRegion._refCounter},t.PopupLiveRegion.prototype.destroy=function(){if(!isNaN(t.PopupLiveRegion._refCounter)&&(--t.PopupLiveRegion._refCounter,t.PopupLiveRegion._refCounter<1)){var i=e(document.getElementById(t.PopupLiveRegion._POPUP_LIVE_REGION_ID));i.length>0&&i.remove()}},t.PopupLiveRegion.prototype.announce=function(i){if(!t.StringUtils.isEmpty(i)){var n=t.PopupLiveRegion._getLiveRegion();n.children().remove(),e("<div>").text(i).appendTo(n)}},t.PopupLiveRegion._getLiveRegion=function(){var i=e(document.getElementById(t.PopupLiveRegion._POPUP_LIVE_REGION_ID));return 0===i.length&&(i=e("<div>"),i.attr({id:t.PopupLiveRegion._POPUP_LIVE_REGION_ID,role:"log","aria-live":"polite","aria-relevant":"additions"}),i.addClass("oj-helper-hidden-accessible"),i.appendTo(document.body)),i},t.PopupLiveRegion._POPUP_LIVE_REGION_ID="__oj_popup_arialiveregion",t.PopupSkipLink=function(i,n,o,r){t.Assert.assertPrototype(i,e),t.Assert.assertString(n),t.Assert.assertFunction(o),t.Assert.assertStringOrNull(r),this._sibling=i,this._message=n,this._callback=o,this._id=r?r:"",this.Init()},t.Object.createSubclass(t.PopupSkipLink,t.Object,"oj.PopupSkipLink"),t.PopupSkipLink.prototype.Init=function(){t.PopupSkipLink.superclass.Init.call(this);var i=this._sibling,n=this._callback,o=this._message;this._message=null;var r=this._id;this._id=null;var s=e("<a>").attr({tabindex:"-1",href:"#"});t.StringUtils.isEmpty(r)||s.attr("id",r),s.addClass("oj-helper-hidden-accessible"),s.text(o),s.insertAfter(i),s.on("click",n),i.data(t.PopupSkipLink._SKIPLINK_ATTR,s)},t.PopupSkipLink.prototype.destroy=function(){var e=this._sibling;this._sibling=null;var i=this._callback;if(this._callback=null,e){var n=e.data(t.PopupSkipLink._SKIPLINK_ATTR);e.removeData(t.PopupSkipLink._SKIPLINK_ATTR),n&&(n.off("click",i),n.remove())}},t.PopupSkipLink.prototype.getLink=function(){var e,i=this._sibling;return i&&(e=i.data(t.PopupSkipLink._SKIPLINK_ATTR)),e},t.PopupSkipLink._SKIPLINK_ATTR="oj-skiplink",t.PopupWhenReadyMediator=function(t,e,i,n){this._element=t,this._operation=e,this._widgetName=i,this._isCustomElement=!!n,this.Init()},t.Object.createSubclass(t.PopupWhenReadyMediator,t.Object,"oj.PopupWhenReadyMediator"),t.PopupWhenReadyMediator.prototype.Init=function(){t.PopupWhenReadyMediator.superclass.Init.call(this),this._resolvedQueue=[],this._callback=this._eventHandler.bind(this);var e=this._operation,i=["oj"];this._isCustomElement?(i.push(e.charAt(0).toUpperCase()),i.push(e.slice(1))):i.push(e);var n=this._eventType=i.join("");this._element.on(n,this._callback);var o=t.Context.getContext(this._element[0]).getBusyContext(),r={description:this._getBusyStateDescription.bind(this,this._element,this._operation,this._widgetName)},s=o.addBusyState(r);this.AddPromiseExecutor(s),this._whenReadyPromise=new Promise(this.AddPromiseExecutor.bind(this))},t.PopupWhenReadyMediator.prototype._getBusyStateDescription=function(t,e,i){return i+" identified by '"+t.attr("id")+"' is busy animating on the '"+e+"' operation."},t.PopupWhenReadyMediator.prototype._deliverResolved=function(e){var i=this._resolvedQueue;this._resolvedQueue=null,e=e?e:this._operation,this._operation=null;for(var n=0;n<i.length;n++)try{i[n](e)}catch(e){t.Logger.error("Error resolving whenReady promises:\n%o",e)}this._whenReadyPromise=Promise.resolve("none")},t.PopupWhenReadyMediator.prototype.destroy=function(){this._operation;if(this._resolvedQueue&&this._deliverResolved("none"),this._callback){var t=this._eventType;this._element.off(t,this._callback)}this._callback=null,this._element=null,this._operation=null,this._whenReadyPromise=null,this._widgetName=null,this._eventType=null},t.PopupWhenReadyMediator.prototype.getWhenReadyPromise=function(){return this._whenReadyPromise},t.PopupWhenReadyMediator.prototype._eventHandler=function(t){t.target===this._element[0]&&(this._element.off(t.type,this._callback),this._deliverResolved(),this._callback=null)},t.PopupWhenReadyMediator.prototype._getPendingOperation=function(){return this._operation?this._operation:"none"},t.PopupWhenReadyMediator.prototype.AddPromiseExecutor=function(t,e){this._resolvedQueue&&this._resolvedQueue.push(t)},t.PopupWhenReadyMediator.prototype.isOperationPending=function(e,i,n,o){var r=!1,s=this._widgetName,a=this._getPendingOperation();if(i===a)t.Logger.info("An %s instance invoked a '%s' operation while pending animation of the same type of operation.  The second request will be ignored.",s,i),r=!0;else if("none"!==a){t.Logger.info("An %s instance invoked a '%s' operation while pending animation of a '%s' operation. The second request will be invoked after the pending operation completes.",s,i,a);var l=new Promise(this.AddPromiseExecutor.bind(this));l.then(function(){this[n].apply(this,o)}.bind(e)),r=!0}return r}}),define("ojs/ojanimation",["ojs/ojcore","jquery","promise","ojs/ojcomponentcore"],function(t,e){t.AnimationUtils={},t.AnimationUtils._animate=function(i,n,o,r,s,a){var l=e(i),h=[].concat(s),u=new Promise(function(e,i){var u=function(t){var e=h.indexOf(t.originalEvent.propertyName);e>-1&&(h.length>1?h.splice(e,1):c())},d=!1,c=function(){d||(l.off("transitionend webkitTransitionEnd",u),e(!0),d=!0)};null==o.css&&(o.css={}),o.css.transition=t.AnimationUtils._createTransitionValue(s,r);var p=t.AnimationUtils._saveStyle(l,n,o,r,a||s);t.AnimationUtils._applyState(l,n,p>1),l.on("transitionend webkitTransitionEnd",u),window.setTimeout(function(){t.AnimationUtils._applyState(l,o,p>1),setTimeout(c,t.AnimationUtils._calcEffectTime(l)+100)},20)});return u.then(function(){n&&n.addClass&&l.removeClass(n.addClass),o&&o.addClass&&l.removeClass(o.addClass),t.AnimationUtils._restoreStyle(l)})},t.AnimationUtils._saveCssValues=function(e,i,n,o){for(var r in i){var s=t.AnimationUtils._getCamelCasePropName(r);if(!(n.hasOwnProperty(s)||o&&o.indexOf(s)!=-1)){var a=e[0].style;void 0===a[s]?n[s]=a[t.AnimationUtils._getWebkitPropName(s)]:n[s]=a[s]}}},t.AnimationUtils._saveStyle=function(e,i,n,o,r){var s=e.data("_ojSavedStyle")||{},a=i&&i.css?i.css:{},l=n&&n.css?n.css:{};o&&"all"===o.persist||(r=null),t.AnimationUtils._saveCssValues(e,a,s,r),t.AnimationUtils._saveCssValues(e,l,s,r),e.data("_ojSavedStyle",s);var h=e.data("_ojEffectCount")||0;return e.data("_ojEffectCount",++h),h},t.AnimationUtils._restoreStyle=function(t){var e=t.data("_ojEffectCount");if(e>1)t.data("_ojEffectCount",e-1);else{var i=t.data("_ojSavedStyle");i&&(t.css(i),t.removeData("_ojSavedStyle"),t.removeData("_ojEffectCount"))}},t.AnimationUtils._getCamelCasePropName=function(t){if(t.indexOf("-")>=0){for(var e="",i=t.split("-"),n=0;n<i.length;n++){var o=i[n];o&&(e?e+=o.charAt(0).toUpperCase()+o.slice(1):e=o)}return e}return t},t.AnimationUtils._getHyphenatedPropName=function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},t.AnimationUtils._getWebkitPropName=function(t){return"webkit"+t.charAt(0).toUpperCase()+t.slice(1)},t.AnimationUtils._concatMultiValue=function(e,i,n,o,r){if(i.css[n]){n=t.AnimationUtils._getCamelCasePropName(n);var s=e[0].style[n]||e[0].style[t.AnimationUtils._getWebkitPropName(n)];s&&0!=s.indexOf(o)&&(i.css[n]=s+r+i.css[n])}},t.AnimationUtils._applyState=function(e,i,n){i&&(i.css&&(n&&(t.AnimationUtils._concatMultiValue(e,i,"transform","none"," "),t.AnimationUtils._concatMultiValue(e,i,"transition","all",", ")),e.css(i.css)),i.addClass&&e.addClass(i.addClass),i.removeClass&&e.removeClass(i.removeClass))},t.AnimationUtils._calcCssTime=function(t,e,i){for(var n=t.css(e),o=t.css(i+"Delay"),r=t.css(i+"Duration"),s=n.split(","),a=o.split(","),l=r.split(","),h=s.length,u=a.length,d=l.length,c=0,p=0;p<h;p++){var _=l[p%d],g=_.indexOf("ms")>-1?parseFloat(_):1e3*parseFloat(_);if(g>0){var m=a[p%u],f=m.indexOf("ms")>-1?parseFloat(m):1e3*parseFloat(m);c=Math.max(c,f+g)}}return c},t.AnimationUtils._calcEffectTime=function(e){var i=t.AnimationUtils._calcCssTime(e,"animationName","animation"),n=t.AnimationUtils._calcCssTime(e,"transitionProperty","transition");return Math.max(i,n)},t.AnimationUtils._fillEmptyOptions=function(t,e){t.delay=t.delay||e.delay,t.duration=t.duration||e.duration,t.timingFunction=t.timingFunction||e.timingFunction,t.persist=t.persist||e.persist},t.AnimationUtils.startAnimation=function(i,n,o,r){var s=new Promise(function(s,a){var l,h=e(i),u="oj-animate-"+n,d=u+"-active",c=!1,p=!1,_=function(){if(c&&p){h.removeClass(u),h.removeClass(d),s(!0);var t={action:n,element:i};r?r._trigger("animateEnd",null,t):h.trigger("ojanimateend",t)}},g=function(){c=!0,_()},m=function(){p=!0,_()},f=e.Event("ojanimatestart"),y={action:n,element:i,endCallback:g};if(r?l=!r._trigger("animateStart",null,y):(h.trigger(f,y),l=f.isDefaultPrevented()),!l){for(var v=[].concat(o),S=[],C={},E=0;E<v.length;E++){var b,T=v[E],A="";null!=T&&"none"!=T&&("string"==typeof T?(A=T,b={}):"object"==typeof T&&(A=T.effect,b=e.extend({},T)),t.AnimationUtils._fillEmptyOptions(b,C),C=e.extend({},b)),A&&t.AnimationUtils[A]&&S.push(t.AnimationUtils[A](i,b))}S.length?Promise.all(S).then(g):g()}h.addClass(u),window.setTimeout(function(){h.addClass(d),setTimeout(m,t.AnimationUtils._calcEffectTime(h)+100)},20)});return s},t.AnimationUtils._mergeOptions=function(i,n){return null==t.AnimationUtils._defaultOptions&&(t.AnimationUtils._defaultOptions=t.ThemeUtils.parseJSONFromFontFamily("oj-animation-effect-default-options")),e.extend({duration:"400ms"},t.AnimationUtils._defaultOptions?t.AnimationUtils._defaultOptions[i]:null,n)},t.AnimationUtils._createTransitionValue=function(e,i){var n="";if(e)for(var o=0;o<e.length;o++){var r=t.AnimationUtils._getHyphenatedPropName(e[o]);n+=(o>0?", ":"")+r+" "+i.duration,i.timingFunction&&(n+=" "+i.timingFunction),i.delay&&(n+=" "+i.delay)}return n},t.AnimationUtils._fade=function(e,i,n,o,r){i=t.AnimationUtils._mergeOptions(n,i);var s={css:{opacity:o}},a={css:{opacity:r}};return i&&(i.startOpacity&&(s.css.opacity=i.startOpacity),i.endOpacity&&(a.css.opacity=i.endOpacity)),t.AnimationUtils._animate(e,s,a,i,["opacity"])},t.AnimationUtils.fadeIn=function(e,i){return t.AnimationUtils._fade(e,i,"fadeIn",0,1)},t.AnimationUtils.fadeOut=function(e,i){return t.AnimationUtils._fade(e,i,"fadeOut",1,0)},t.AnimationUtils.expand=function(e,i){return t.AnimationUtils._expandCollapse(e,i,!0)},t.AnimationUtils.collapse=function(e,i){return t.AnimationUtils._expandCollapse(e,i,!1)},t.AnimationUtils._expandCollapse=function(i,n,o){n=t.AnimationUtils._mergeOptions(o?"expand":"collapse",n);var r={},s={},a=n.direction||"height",l=e(i),h=l.outerWidth(),u=l.outerHeight(),d=l.css("maxWidth"),c=l.css("maxHeight"),p=r.css={},_=s.css={};"none"!==d&&(h=d),"none"!==c&&(u=c);var g=[];if("both"===a||"height"===a){var m=n.startMaxHeight||(o?0:u),f=n.endMaxHeight||(o?u:0);p.maxHeight=m,_.maxHeight=f,g.push("maxHeight")}if("both"===a||"width"===a){var y=n.startMaxWidth||(o?0:h),v=n.endMaxWidth||(o?h:0);p.maxWidth=y,_.maxWidth=v,g.push("maxWidth")}return t.AnimationUtils._animate(l[0],r,s,n,g)},t.AnimationUtils.zoomIn=function(e,i){return t.AnimationUtils._zoom(e,i,!0)},t.AnimationUtils.zoomOut=function(e,i){return t.AnimationUtils._zoom(e,i,!1)},t.AnimationUtils._zoom=function(i,n,o){n=t.AnimationUtils._mergeOptions(o?"zoomIn":"zoomOut",n);var r={},s={},a=n.axis||"both",l=e(i),h="both"===a?"scale":"x"===a?"scaleX":"scaleY",u=r.css={},d=s.css={};return u.transform=h+"("+(o?0:1)+") translateZ(0)",d.transform=h+"("+(o?1:0)+") translateZ(0)",u.transformOrigin=n.transformOrigin||"center",t.AnimationUtils._animate(l[0],r,s,n,["transform"])},t.AnimationUtils.slideIn=function(e,i){return t.AnimationUtils._slide(e,i,!0)},t.AnimationUtils.slideOut=function(e,i){return t.AnimationUtils._slide(e,i,!1)},t.AnimationUtils._slide=function(i,n,o){n=t.AnimationUtils._mergeOptions(o?"slideIn":"slideOut",n);var r={},s={},a=n.direction||"start",l=e(i),h="0",u="0",d=r.css={},c=s.css={};if(n.offsetX||n.offsetY)n.offsetX&&(h=n.offsetX),n.offsetY&&(u=n.offsetY);else{var p=l.outerWidth(),_=l.outerHeight(),g="rtl"===t.DomUtils.getReadingDirection();switch(a){case"left":h=(o?p:-p)+"px";break;case"right":h=(o?-p:p)+"px";break;case"top":u=(o?_:-_)+"px";break;case"bottom":u=(o?-_:_)+"px";break;case"end":h=(o?-p:p)*(g?-1:1)+"px";break;default:h=(o?p:-p)*(g?-1:1)+"px"}}return o?(d.transform="translate("+h+","+u+") translateZ(0)",c.transform="translate(0,0) translateZ(0)"):(d.transform="translate(0,0) translateZ(0)",c.transform="translate("+h+","+u+") translateZ(0)"),t.AnimationUtils._animate(l[0],r,s,n,["transform"])},t.AnimationUtils.ripple=function(i,n){n=t.AnimationUtils._mergeOptions("ripple",n);var o={},r={},s=e(i),a=s.outerWidth(),l=s.outerHeight(),h=e("<div style='position:absolute; overflow:hidden'>"),u=e("<div class='oj-animation-effect-ripple oj-animation-rippler'>"),d="static"==s.css("position")?s.position():{left:0,top:0};s.prepend(h),h.css({left:d.left+"px",top:d.top+"px",width:a+"px",height:l+"px"}),h.prepend(u);var c=o.css={},p=r.css={};return t.AnimationUtils._setRippleOptions(c,u,h,n),c.transform="scale(0) translateZ(0)",c.opacity=n.startOpacity||u.css("opacity"),p.transform="scale(1) translateZ(0)",p.opacity=n.endOpacity||0,n.persist="all",t.AnimationUtils._animate(u[0],o,r,n,["transform","opacity"]).then(function(){h.remove()})},t.AnimationUtils._setRippleOptions=function(e,i,n,o){var r=i.width(),s=n.width(),a=n.height();if(o.diameter){var l=o.diameter,h=parseInt(l,10);isNaN(h)||(r="%"==l.charAt(l.length-1)?Math.floor(Math.min(s,a)*(h/100)):h,e.width=r+"px",e.height=r+"px")}var u,d="static"==n.css("position")?n.position():{left:0,top:0};u=t.AnimationUtils._calcRippleOffset(o.offsetX,r,s,d.left),null!=u&&(e.left=u+"px"),u=t.AnimationUtils._calcRippleOffset(o.offsetY,r,a,d.top),null!=u&&(e.top=u+"px"),o.color&&(e.backgroundColor=o.color)},t.AnimationUtils._calcRippleOffset=function(t,e,i,n){var o;t=t||"50%";var r=parseInt(t,10);return isNaN(r)||(o="%"==t.charAt(t.length-1)?i*(r/100)-e/2:r-e/2,o=Math.floor(o+n)),o},t.AnimationUtils._removeRipple=function(i,n){n=n||{};var o={fadeOut:1,collapse:1,zoomOut:1,slideOut:1},r=n.removeEffect||"fadeOut",s=e(".oj-animation-rippler",i);if(0!==s.length)return r in o?t.AnimationUtils[r](s,n).then(function(){s.remove()}):s.remove()},t.AnimationUtils._calcBackfaceAngle=function(t){var e,i=/^([\+\-]?\d*\.?\d*)(.*)$/,n=t.match(i),o=parseFloat(n[1]),r=n[2];switch(r){case"deg":e=o-180+r;break;case"grad":e=o-200+r;break;case"rad":e=o-3.1416+r;break;case"turn":e=o-.5+r}return e},t.AnimationUtils._flip=function(i,n,o,r,s){if(n&&"children"==n.flipTarget){var a,l=[],h=e(i).children(),u=e.extend({},n);delete u.flipTarget;var d=e.extend({},u);d.startAngle=t.AnimationUtils._calcBackfaceAngle(n.startAngle||r),d.endAngle=t.AnimationUtils._calcBackfaceAngle(n.endAngle||s);for(var c=0;c<h.length;c++)a=e(h[c]).hasClass("oj-animation-backface")?d:u,l.push(t.AnimationUtils._flip(h[c],a,o,r,s));return Promise.all(l)}n=t.AnimationUtils._mergeOptions(o,n);var p,_={},g={},m={css:_},f={css:g},y="rotateY(",v="2000px",S="hidden",C="center";return n&&("x"===n.axis&&(y="rotateX("),n.startAngle&&(r=n.startAngle),n.endAngle&&(s=n.endAngle),n.perspective&&(v=n.perspective),n.backfaceVisibility&&(S=n.backfaceVisibility),n.transformOrigin&&(C=n.transformOrigin)),p="perspective("+v+") "+y,_.transform=p+r+")",_.backfaceVisibility=S,_.transformOrigin=C,g.transform=p+s+")",t.AnimationUtils._animate(i,m,f,n,["transform"],["transform","backfaceVisibility","transformOrigin"])},t.AnimationUtils.flipIn=function(e,i){return t.AnimationUtils._flip(e,i,"flipIn","-180deg","0deg")},t.AnimationUtils.flipOut=function(e,i){return t.AnimationUtils._flip(e,i,"flipOut","0deg","180deg")}}),define("ojs/ojpopup",["ojs/ojcore","jquery","promise","ojs/ojcomponentcore","ojs/ojpopupcore","ojs/ojanimation"],function(t,e){!function(){var i=["oj-left","oj-center","oj-right","oj-top","oj-middle","oj-bottom"],n={"right-top":"oj-right oj-top","right-middle":"oj-right oj-middle","right-bottom":"oj-right oj-bottom","left-top":"oj-left oj-top","left-middle":"oj-left oj-middle","left-bottom":"oj-left oj-bottom","center-top":"oj-center oj-top","center-middle":"oj-left oj-middle","center-bottom":"oj-center oj-bottom"};t.__registerWidget("oj.ojPopup",e.oj.baseComponent,{widgetEventPrefix:"oj",options:{animation:null,autoDismiss:"focusLoss",chrome:"default",initialFocus:"auto",position:{my:{horizontal:"start",vertical:"top"},offset:{x:0,y:0},at:{horizontal:"start",vertical:"bottom"},of:void 0,collision:"flip"},tail:"none",modality:"modeless",role:"tooltip",beforeOpen:null,open:null,beforeClose:null,close:null,focus:null,animateStart:null,animateEnd:null},_ComponentCreate:function(){this._super();var i=this._getRootStyle(),n=this.element;n.hide().addClass(i).attr("aria-hidden","true"),n.addClass("oj-component");var o=e("<div>");o.addClass([i,"content"].join("-")),o.attr("role","presentation"),o.append(n[0].childNodes),o.appendTo(n),this._content=o,this._setChrome(),this._setupFocus(n);var r=this.options;r.position=t.PositionUtils.coerceToJet(r.position)},_AfterCreate:function(){this._super(),this.element.uniqueId(),this._createTail()},_destroy:function(){this.isOpen()&&this._closeImplicitly(),this._setWhenReady("none"),this._destroyTail(),delete this._popupServiceEvents;var t=this.element;t.hide().attr("aria-hidden","true").removeUniqueId();var e=this._content;delete this._content,t.append(e[0].childNodes),e.remove();var i=this._closeDelayTimer;isNaN(i)||(delete this._closeDelayTimer,window.clearTimeout(i)),this._destroyVoiceOverAssist(),this._super()},open:function(e,i){if(!this._isOperationPending("open",[e,i])){this.isOpen()&&this._closeImplicitly(),this._setLauncher(e);var n=this.element;if(e=this._launcher,this._trigger("beforeOpen")!==!1){this._setWhenReady("open");var o=this.options;i=i?i:o.position,i.of||(this._hasPositionOfLauncherOverride=!0,i.of=e),this._setPosition(i),this._setAutoDismiss(o.autoDismiss),this._addDescribedBy(),this._IsCustomElement()&&n[0].hasAttribute.role||n.attr("role",o.role),i=this._getPositionAsJqUi();var r=this._getRootStyle(),s=[r,"layer"].join("-"),a=o.tail;"none"!==a&&(s+=" "+[r,"tail",a].join("-"));var l={};l[t.PopupService.OPTION.POPUP]=n,l[t.PopupService.OPTION.LAUNCHER]=e,l[t.PopupService.OPTION.POSITION]=i,l[t.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),l[t.PopupService.OPTION.LAYER_SELECTORS]=s,l[t.PopupService.OPTION.MODALITY]=o.modality,t.PopupService.getInstance().open(l)}}},_beforeOpenHandler:function(e){var i=e[t.PopupService.OPTION.POPUP],n=e[t.PopupService.OPTION.POSITION];i.show(),i.position(n);var o=this.options.animation;return o&&o.open?t.AnimationUtils.startAnimation(i[0],"open",t.PositionUtils.addTransformOriginAnimationEffectsOption(i,o.open),this):void 0},_afterOpenHandler:function(e){var i=e[t.PopupService.OPTION.POPUP],n=e[t.PopupService.OPTION.LAUNCHER];this._trigger("open"),this._intialFocus(),this._initVoiceOverAssist(),this._on(i,{keydown:this._keyHandler,keyup:this._keyHandler}),n&&n.length>0&&this._on(n,{keydown:this._keyHandler,keyup:this._keyHandler}),this._isOpen=!0},close:function(){if(!this._isOperationPending("close",[])&&this.isOpen()&&(this._trigger("beforeClose")!==!1||this._ignoreBeforeCloseResultant)){this._setWhenReady("close"),delete this._isOpen,this._restoreFocus();var e=this._launcher,i=this.element;this._off(i,"keydown keyup"),e&&e.length>0&&this._off(e,"keydown keyup"),this._destroyVoiceOverAssist();var n={};n[t.PopupService.OPTION.POPUP]=i,t.PopupService.getInstance().close(n)}},_beforeCloseHandler:function(e){var i=e[t.PopupService.OPTION.POPUP],n=this.options.animation;if(!this._ignoreBeforeCloseResultant&&n&&n.close){var o=i.attr("style"),r=t.AnimationUtils.startAnimation(i[0],"close",t.PositionUtils.addTransformOriginAnimationEffectsOption(i,n.close),this).then(function(){i.attr("style",o),i.hide()});return r}return void i.hide()},_afterCloseHandler:function(t){if(this._removeDescribedBy(),this._setAutoDismiss(),delete this._launcher,this._trigger("close"),this._hasPositionOfLauncherOverride){var e=this.options;e.position.of=null,delete this._hasPositionOfLauncherOverride}},isOpen:function(){return!!this._isOpen},refresh:function(){if(this._super(),this.isOpen()&&this._reposition()){var e=this.element;t.PopupService.getInstance().triggerOnDescendents(e,t.PopupService.EVENT.POPUP_REFRESH);
}},_setOption:function(e,i){var n=this.options;switch(e){case"tail":i!==n.tail&&this._setTail(i);break;case"chrome":i!==n.chrome&&this._setChrome(i);break;case"position":return this._setPosition(i),void this.refresh();case"autoDismiss":this.isOpen()&&i!==n.autoDismiss&&this._setAutoDismiss(i);break;case"modality":if(this.isOpen()){var o=this.element,r={};r[t.PopupService.OPTION.POPUP]=o,r[t.PopupService.OPTION.MODALITY]=i,t.PopupService.getInstance().changeOptions(r)}}this._superApply(arguments)},_getRootStyle:function(){return"oj-popup"},_setTail:function(t){this._destroyTail(),this._createTail(t),this._reposition()},_createTail:function(i){var n=i?i:this.options.tail;if("none"!==n){var o=this._getRootStyle(),r=[o,"tail"].join("-"),s=[r,n].join("-"),a=e("<div>").hide();a.addClass(r).addClass(s),a.attr("role","presentation"),this._tailId=a.attr("id",this._getSubId("tail")).attr("id");var l=this.element;if(a.appendTo(l),l.addClass(s),this.isOpen()){var h=[o,"layer"].join("-");h+=" "+s;var u={};u[t.PopupService.OPTION.POPUP]=l,u[t.PopupService.OPTION.LAYER_SELECTORS]=h,t.PopupService.getInstance().changeOptions(u)}}},_getTail:function(){var t=this._tailId;return t?e(document.getElementById(t)):null},_destroyTail:function(){var e=this._getTail();e&&e.remove(),delete this._tailId;var i=this.options.tail,n=this._getRootStyle(),o=[n,"tail",i].join("-"),r=this.element;if(r.removeClass(o),this.isOpen()){var s=[n,"layer"].join("-"),a={};a[t.PopupService.OPTION.POPUP]=r,a[t.PopupService.OPTION.LAYER_SELECTORS]=s,t.PopupService.getInstance().changeOptions(a)}},_setChrome:function(t){var e=t?t:this.options.chrome,i=[this._getRootStyle(),"no-chrome"].join("-"),n=this.element;"default"===e&&n.hasClass(i)?n.removeClass(i):"none"!==e||n.hasClass(i)||n.addClass(i)},_setLauncher:function(i){if(i?"string"===e.type(i)?i=e(i):1===i.nodeType&&(i=e(i)):i=e(document.activeElement),i instanceof e&&i.length>1)for(var n=this.element,o=0;o<i.length;o++){var r=i[0];if(!t.DomUtils.isAncestorOrSelf(n[0],r)){i=e(r);break}}else i instanceof e&&!(i instanceof e&&0===i.length)||(i=e(document.activeElement));this._launcher=i},_setPosition:function(e){var i=this.options;e&&(i.position=t.PositionUtils.coerceToJet(e,i.position))},_getPositionAsJqUi:function(){var i=this.options,n=t.PositionUtils.coerceToJqUi(i.position),o="rtl"===this._GetReadingDirection();n=t.PositionUtils.normalizeHorizontalAlignment(n,o);var r=n.using;return r=e.isFunction(r)?r:null,n.using=this._usingHandler.bind(this,r),n},_usingHandler:function(e,o,r){var s=r.element.element;if(o.top!==s.css("top")||o.left!==s.css("left")){var a=this._getTail();if(a){a.hide();for(var l=0;l<i.length;l++)a.removeClass(i[l]),s.removeClass(i[l]);if(a.removeAttr("style"),r.target&&0===r.target.height&&0===r.target.width){var h="rtl"===this._GetReadingDirection(),u=t.PositionUtils.normalizeHorizontalAlignment(this.options.position,h),d=u.my;if(!t.StringUtils.isEmptyOrUndefined(d)){var c="center"===d.horizontal?d.horizontal:r.horizontal,p="center"===d.vertical?"middle":d.vertical;r.horizontal=c,r.vertical=p}}var _=[r.horizontal,r.vertical].join("-"),g=n[_];a.addClass(g),s.addClass(g),a.show();var m=2;if("left"===r.horizontal){var f=a.outerWidth();f-=f+t.DomUtils.getCSSLengthAsInt(a.css("left")),o.left=o.left+(f-m)}else if("right"===r.horizontal){var f=a.outerWidth();f-=f+t.DomUtils.getCSSLengthAsInt(a.css("right")),o.left=o.left-(f-m)}if("top"===r.vertical){var y=a.outerHeight();y-=y+t.DomUtils.getCSSLengthAsInt(a.css(r.vertical)),o.top=o.top+(y-m)}else if("bottom"===r.vertical){var y=a.outerHeight();y-=y+t.DomUtils.getCSSLengthAsInt(a.css(r.vertical)),o.top=o.top-(y-m)}if(s.css(o),"center"===r.horizontal&&"middle"!==r.vertical){var v=s.width(),S=Math.round((v/2-a.outerWidth()/2)/v*100);a.css({left:S+"%"})}else if("middle"===r.vertical){var C=s.height(),E=Math.round((C/2-a.outerHeight()/2)/C*100);a.css({top:E+"%"})}}else s.css(o);t.PositionUtils.captureTransformOriginAnimationEffectsOption(s,r),e&&e(o,r);var b=this.options;"focusLoss"===b.autoDismiss&&t.PositionUtils.isAligningPositionClipped(r)&&(this._ignoreRestoreFocus=!0,this._closeDelayTimer=this._delay(this._closeImplicitly.bind(this),1))}},_reposition:function(){var i=this.element,n=this._getPositionAsJqUi();if(t.StringUtils.isString(n.of)){var o=e(n.of);if(0===o.length)return!1;n.of=o}return i.position(n),!0},_intialFocus:function(e){var i=this._deriveInitialFocus();if(e&&"none"===i&&(i="popup"),"firstFocusable"===i){for(var n,o=this._content,r=o.find(":focusable"),s=0;s<r.length;s++)if(t.FocusUtils.isFocusable(r[s])){n=r[s];break}n?(n.focus(),this._trigger("focus")):i="popup"}if("popup"===i){var a=this.element;a.attr("tabindex","-1"),a.focus(),this._trigger("focus")}},_deriveInitialFocus:function(){var e=this.options,i=e.initialFocus;if("auto"===i){var n=e.modality;i="modal"===n?t.DomUtils.isTouchSupported()?"popup":"firstFocusable":"none"}return i},_isFocusInPopup:function(e,i){if(e||(e=document.activeElement),!e)return!1;var n=this.element;return i&&(n=n.parent()),t.DomUtils.isAncestorOrSelf(n[0],e)},_isFocusInLauncher:function(e){e||(e=document.activeElement);var i=this._launcher;return t.DomUtils.isAncestorOrSelf(i[0],e)},_restoreFocus:function(){if(this._ignoreRestoreFocus)return void delete this._ignoreRestoreFocus;if(this._isFocusInPopup(null,!0)){var t=this._launcher;t.focus()}},_keyHandler:function(t){if(!t.isDefaultPrevented()){var i=t.type,n=this._content,o=t.target;if("keyup"===i&&t.keyCode===e.ui.keyCode.ESCAPE&&(this._isFocusInPopup(o)||this._isFocusInLauncher(o)))t.preventDefault(),this.close();else if("keydown"===i&&117===t.keyCode)if(this._isFocusInPopup(o)){var r=this.options;if("modeless"===r.modality){t.preventDefault();var s=this._launcher;s.focus()}else this.close()}else this._isFocusInLauncher(o)&&(t.preventDefault(),this._intialFocus(!0));else if("keydown"===i&&t.keyCode===e.ui.keyCode.TAB&&this._isFocusInPopup(o)){var a=n.find(":tabbable");if(a.length>0){var l=a[0],h=a[a.length-1],u=this.element;l!==o&&u[0]!==o||!t.shiftKey?h!==o||t.shiftKey||(t.preventDefault(),h===l?(u.attr("tabindex","-1"),u.focus()):e(l).focus()):(t.preventDefault(),l===h&&l===o?(u.attr("tabindex","-1"),u.focus()):e(h).focus())}else{t.preventDefault();var r=this.options;if("modeless"===r.modality){var s=this._launcher;s.focus()}else this.close()}}}},_setAutoDismiss:function(e){var i=this._focusLossCallback,n=this._getPopupServiceEvents();if(i&&(delete n[t.PopupService.EVENT.POPUP_AUTODISMISS],delete this._focusLossCallback),"focusLoss"===e&&(i=this._focusLossCallback=this._dismissalHandler.bind(this),n[t.PopupService.EVENT.POPUP_AUTODISMISS]=i),this.isOpen()){var o=this.element,r={};r[t.PopupService.OPTION.POPUP]=o,r[t.PopupService.OPTION.EVENTS]=n,t.PopupService.getInstance().changeOptions(r)}},_dismissalHandler:function(e){if(this.isOpen()){var i=this._launcher,n=this.element,o=n.parent(),r=e.target,s=this._focusSkipLink;if(s){var a=s.getLink();if(a&&t.DomUtils.isAncestorOrSelf(a[0],r))return}if(!t.DomUtils.isAncestorOrSelf(i[0],r)&&!t.DomUtils.isAncestorOrSelf(o[0],r)){if(t.FocusUtils.isFocusable(r)){if("mousedown"===e.type||"touchstart"===e.type)return;this._ignoreRestoreFocus=!0}this.close()}}},_addDescribedBy:function(){var t=this._launcher,i=this.element,n=i.attr("id"),o=t.attr("aria-describedby"),r=o?o.split(/\s+/):[];r.push(n),o=e.trim(r.join(" ")),t.attr("aria-describedby",o)},_removeDescribedBy:function(){var t=this._launcher,i=this.element;if(t&&0!==t.length){var n=i.attr("id"),o=t.attr("aria-describedby"),r=o?o.split(/\s+/):[],s=e.inArray(n,r);s!==-1&&r.splice(s,1),o=e.trim(r.join(" ")),o?t.attr("aria-describedby",o):t.removeAttr("aria-describedby")}},_initVoiceOverAssist:function(){var e=t.AgentUtils.getAgentInfo().os===t.AgentUtils.OS.IOS,i=this._liveRegion;i||(i=this._liveRegion=new t.PopupLiveRegion);var n;if(n=e?this.getTranslatedString("none"===this.options.initialFocus?"ariaLiveRegionInitialFocusNoneTouch":"ariaLiveRegionInitialFocusFirstFocusableTouch"):this.getTranslatedString("none"===this.options.initialFocus?"ariaLiveRegionInitialFocusNone":"ariaLiveRegionInitialFocusFirstFocusable"),i.announce(n),e){var o=this._focusSkipLink;if(!o){var r=this._getSubId("focusSkipLink"),s=this._launcher,a=this._intialFocus.bind(this,!0);n=this.getTranslatedString("ariaFocusSkipLink"),this._focusSkipLink=new t.PopupSkipLink(s,n,a,r)}var l=this._closeSkipLink;if(!l){var h=this._getSubId("closeSkipLink"),u=this._content,a=this._closeImplicitly.bind(this);n=this.getTranslatedString("ariaCloseSkipLink"),this._closeSkipLink=new t.PopupSkipLink(u,n,a,h)}}},_destroyVoiceOverAssist:function(){var t=this._liveRegion;t&&(t.destroy(),delete this._liveRegion);var e=this._focusSkipLink;e&&(e.destroy(),delete this._focusSkipLink);var i=this._closeSkipLink;i&&(i.destroy(),delete this._closeSkipLink)},_getSubId:function(e){var i=this.element.attr("id");return t.StringUtils.isEmptyOrUndefined(i)&&(i=this.uuid),[i,e].join("_")},_surrogateRemoveHandler:function(){var t=this.element;t.remove()},_getPopupServiceEvents:function(){if(!this._popupServiceEvents){var e=this._popupServiceEvents={};e[t.PopupService.EVENT.POPUP_CLOSE]=this._closeImplicitly.bind(this),e[t.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),e[t.PopupService.EVENT.POPUP_REFRESH]=this.refresh.bind(this),e[t.PopupService.EVENT.POPUP_BEFORE_OPEN]=this._beforeOpenHandler.bind(this),e[t.PopupService.EVENT.POPUP_AFTER_OPEN]=this._afterOpenHandler.bind(this),e[t.PopupService.EVENT.POPUP_BEFORE_CLOSE]=this._beforeCloseHandler.bind(this),e[t.PopupService.EVENT.POPUP_AFTER_CLOSE]=this._afterCloseHandler.bind(this)}return this._popupServiceEvents},_closeImplicitly:function(){this._ignoreBeforeCloseResultant=!0,this.close(),delete this._ignoreBeforeCloseResultant},_setWhenReady:function(e){var i=this._whenReadyMediator;i&&(i.destroy(),delete this._whenReadyMediator),["open","close"].indexOf(e)<0||(this._whenReadyMediator=new t.PopupWhenReadyMediator(this.element,e,"ojPopup",this._IsCustomElement()))},_isOperationPending:function(t,e){var i=this._whenReadyMediator;return!!i&&i.isOperationPending(this,t,t,e)},_setupFocus:function(t){var i=this;this._focusable({applyHighlight:!0,setupHandlers:function(n,o){i._on(t,{focus:function(t){n(e(t.currentTarget))},blur:function(t){o(e(t.currentTarget))}})}})}}),t.Components.setDefaultOptions({ojPopup:{modality:t.Components.createDynamicPropertyGetter(function(){return(t.ThemeUtils.parseJSONFromFontFamily("oj-popup-option-defaults")||{}).modality}),animation:t.Components.createDynamicPropertyGetter(function(){return(t.ThemeUtils.parseJSONFromFontFamily("oj-popup-option-defaults")||{}).animation})}})}(),function(){var e=function(t,e,i,n){return/^position/.test(e)?t:n(t)},i={properties:{autoDismiss:{type:"string",enumValues:["focusLoss","none"]},chrome:{type:"string",enumValues:["default","none"]},initialFocus:{type:"string",enumValues:["auto","none","firstFocusable","popup"]},modality:{type:"string",enumValues:["modeless","modal"]},position:{type:"object",properties:{my:{type:"object",properties:{horizontal:{type:"string",enumValues:["start","end","left","center","right"]},vertical:{type:"string",enumValues:["top","center","bottom"]}}},at:{type:"object",properties:{horizontal:{type:"string",enumValues:["start","end","left","center","right"]},vertical:{type:"string",enumValues:["top","center","bottom"]}}},offset:{type:"object",properties:{x:{type:"number"},y:{type:"number"}}},of:{type:"string|{x:number, y:number}"},collision:{type:"string",enumValues:["flip","fit","flipfit","flipcenter","none"]}}},tail:{type:"string",enumValues:["simple","none"]}},events:{beforeOpen:{},open:{},beforeClose:{},close:{},focus:{},animateStart:{},animateEnd:{}},methods:{close:{},isOpen:{},open:{}},extension:{_WIDGET_NAME:"ojPopup"}};t.CustomElementBridge.registerMetadata("oj-popup","baseComponent",i),t.CustomElementBridge.register("oj-popup",{metadata:t.CustomElementBridge.getMetadata("oj-popup"),parseFunction:e})}()}),define("ojs/ojeditablevalue",["ojs/ojcore","jquery","hammerjs","ojs/ojjquery-hammer","ojs/ojcomponentcore","ojs/ojvalidation-base","ojs/ojpopup"],function(t,e,i){t.EditableValueUtils={},t.EditableValueUtils.validationContext={COMPONENT_CREATE:1,CONVERTER_OPTION_CHANGE:2,DISABLED_OPTION_CHANGE:3,READONLY_OPTION_CHANGE:4,REFRESH_METHOD:5,REQUIRED_OPTION_CHANGE:6,RESET_METHOD:7,USER_ACTION:8,VALIDATE_METHOD:9,VALIDATORS_OPTION_CHANGE:10,VALUE_OPTION_CHANGE:11},t.EditableValueUtils.validateMethodOptions={doValueChangeCheck:!1,validationContext:t.EditableValueUtils.validationContext.VALIDATE_METHOD},t.EditableValueUtils.converterOptionOptions={doNotClearMessages:!0,validationContext:t.EditableValueUtils.validationContext.CONVERTER_OPTION_CHANGE},t.EditableValueUtils.disabledOptionOptions={doNotClearMessages:!0,validationContext:t.EditableValueUtils.validationContext.DISABLED_OPTION_CHANGE},t.EditableValueUtils.requiredOptionOptions={doNotClearMessages:!0,validationContext:t.EditableValueUtils.validationContext.REQUIRED_OPTION_CHANGE},t.EditableValueUtils.readOnlyOptionOptions={doNotClearMessages:!0,validationContext:t.EditableValueUtils.validationContext.READONLY_OPTION_CHANGE},t.EditableValueUtils.refreshMethodOptions={doNotClearMessages:!0,validationContext:t.EditableValueUtils.validationContext.REFRESH_METHOD},t.EditableValueUtils.validatorsOptionOptions={doNotClearMessages:!0,validationContext:t.EditableValueUtils.validationContext.VALIDATORS_OPTION_CHANGE};var n="_requiredIcon";t.EditableValueUtils.getAttributeValue=function(t,e){var i,n,o,r={};if(t&&e)switch(e){case"disabled":i=void 0!==t.attr("disabled")?!!t.prop("disabled"):void 0;break;case"pattern":i=t.prop("pattern")||void 0;break;case"placeholder":i=t.prop("placeholder")||void 0;break;case"readonly":i=void 0!==t.attr("readonly")?!!t.prop("readonly"):void 0;break;case"required":n=t.attr("required"),o=t.prop("required"),i=void 0!==n?void 0!==o?!!o:!!n:void 0;break;case"title":i=void 0!==t.attr("title")?t.prop("title"):void 0;break;case"value":i=t.val()||void 0;break;case"min":case"max":default:i=t.attr(e)||void 0}return void 0!==i?(r.fromDom=!0,r.value=i):r.fromDom=!1,r},t.EditableValueUtils.initializeOptionsFromDom=function(e,i,n,o){for(var r={},s=0;s<e.length;s++){var a,l,h=e[s],u=h.attribute,d=h.option||u,c=h.coerceDomValue,p=h.validateOption,_=n.element,g=n.options[d];void 0===i[d]&&(g=n.options[d],l=t.EditableValueUtils.getAttributeValue(_,u),l.fromDom&&(a=l.value,c&&("boolean"==typeof c?a=t.EditableValueUtils.coerceDomValueForOption(d,a):"function"==typeof c&&(a=c.call(n,a))),r[d]=a));var m=d in r?r[d]:g;p&&"boolean"==typeof p&&t.EditableValueUtils.validateValueForOption(d,m)}null!=o&&o(r),n.option(r,{_context:{writeback:!0,internalSet:!0}})},t.EditableValueUtils.validateValueForOption=function(t,e){var i=!1;switch(t){case"required":null!==e&&"boolean"!=typeof e&&(i=!0);break;case"readOnly":case"disabled":null!==e&&"boolean"!=typeof e&&(i=!0)}if(i)throw"Option '"+t+"' has invalid value set: "+e},t.EditableValueUtils.coerceDomValueForOption=function(t,e){var i=e;switch(t){case"required":i=!!e}return i},t.EditableValueUtils.setPickerAttributes=function(t,e){if(t&&e){var i=e.class;i&&t.addClass(i);var n=e.style;if(n){var o=t.attr("style");o?t.attr("style",o+";"+n):t.attr("style",n)}}},t.EditableValueUtils.validate=function(){return this._SetValue(this._GetDisplayValue(),null,this._VALIDATE_METHOD_OPTIONS)},t.EditableValueUtils._refreshRequired=function(t){var e,i,o,r=this._AriaRequiredUnsupported();this._refreshTheming("required",t),r||(i=this._GetContentElement(),o=t,o&&i?i.attr("aria-required",o):i.removeAttr("aria-required")),this.$label||this._createOjLabel(),this.$label&&(this.$label._ojLabel("option","showRequired",t),r&&(e=this._getAriaLabelledById(this.element),e&&(t?this._addAriaDescribedBy(e+n):this._removeAriaDescribedBy(e+n))))},t.EditableValueUtils._AfterSetOptionRequired=function(e){this._refreshRequired(this._IsRequired()),this._runMixedValidationAfterSetOption(t.EditableValueUtils.requiredOptionOptions)},t.EditableValueUtils._AfterSetOptionValidators=function(){var e=!1;this._ResetAllValidators(),this._hasInvalidMessagesShowing()&&(e=!0),e&&(this._clearComponentMessages(),this._updateValue(t.EditableValueUtils.validatorsOptionOptions))},t.EditableValueUtils._AfterSetOptionConverter=function(e){var i=!1;this._ResetConverter(),this._hasInvalidMessagesShowing()&&(i=!0),i?(this._clearComponentMessages(),this._updateValue(t.EditableValueUtils.converterOptionOptions)):this._Refresh(e,this.options[e],!0)},t.EditableValueUtils._ResetConverter=function(){this._converter=null,this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.CONVERTER_HINT))},t.EditableValueUtils._GetNormalizedValidatorsFromOption=function(){var e,i,n,o,r,s,a=!0,l=[];if(n=this.options.validators)for(e=0;e<n.length;e++)i=n[e],"object"==typeof i?(i.validate&&"function"==typeof i.validate||(a=!1),a||(s=i.type,s&&"string"==typeof s&&(r=t.Validation.validatorFactory(s),r?(o=t.CollectionUtils.copyInto({},i.options)||{},o.converter=o.converter||this._GetConverter(),o.label=o.label||this._getLabelText(),i=r.createValidator(o)):t.Logger.error("Unable to locate a validatorFactory for the requested type: "+s))),l.push(i)):t.Logger.error("Unable to parse the validator provided:"+i);return l},t.EditableValueUtils._GetConverter=function(){var e;return this._converter||(e=this.options.converter,this._converter=t.IntlConverterUtils.getConverterInstance(e)),this._converter||null},t.PopupMessagingStrategy=function(t){this.Init(t)},t.ComponentMessaging.registerMessagingStrategy(t.ComponentMessaging._DISPLAY_TYPE.NOTEWINDOW,t.PopupMessagingStrategy),t.Object.createSubclass(t.PopupMessagingStrategy,t.MessagingStrategy,"oj.PopupMessagingStrategy"),t.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT={ojRadioset:{position:"launcher",events:{open:"focusin mouseenter press",close:"mouseleave"}},ojCheckboxset:{position:"launcher",events:{open:"focusin mouseenter press",close:"mouseleave"}},ojInputText:{position:"launcher",events:{open:"focusin"}},ojTextArea:{position:"launcher",events:{open:"focusin"}},ojInputPassword:{position:"launcher",events:{open:"focusin"}},ojSwitch:{position:"launcher",events:{open:"focusin mouseover",close:"mouseout"}},ojSlider:{position:"launcher",events:{open:"focusin mouseover",close:"mouseout"}},ojColorSpectrum:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},ojColorPalette:{position:"launcher",events:{open:"focusin mouseenter",close:"mouseleave"}},default:{position:"launcher-wrapper",events:{open:"focusin"}}},t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT="oj-form-control-hint",t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_CONVERTER="oj-form-control-hint-converter",t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_VALIDATOR="oj-form-control-hint-validator",t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_TITLE="oj-form-control-hint-title",t.PopupMessagingStrategy._OPEN_NAMESPACE=".ojPopupMessagingOpen",t.PopupMessagingStrategy._CLOSE_NAMESPACE=".ojPopupMessagingClose",t.PopupMessagingStrategy.prototype.activate=function(e){t.PopupMessagingStrategy.superclass.activate.call(this,e),this._initMessagingPopup()},t.PopupMessagingStrategy.prototype.reactivate=function(e){t.PopupMessagingStrategy.superclass.reactivate.call(this,e),this._updatePopupIfOpen()},t.PopupMessagingStrategy.prototype.update=function(){t.PopupMessagingStrategy.superclass.update.call(this),this._updatePopupIfOpen()},t.PopupMessagingStrategy.prototype.deactivate=function(){this._unregisterLauncherEvents(),this._destroyTooltip(),t.PopupMessagingStrategy.superclass.deactivate.call(this)},t.PopupMessagingStrategy.prototype.close=function(){this._closePopup()},t.PopupMessagingStrategy.prototype._closePopup=function(){this._isPopupInitialized()&&this.$messagingContentRoot.ojPopup("close")},t.PopupMessagingStrategy.prototype._initMessagingPopup=function(){this._openPopupCallback||this._registerLauncherEvents()},t.PopupMessagingStrategy.prototype._openPopup=function(e){var i,n,o;if(this._canOpenPopup()){if(n=this._buildPopupHtml(),t.StringUtils.isEmptyOrUndefined(n))return;var r=this._getPopupElement(),s=r.ojPopup("isOpen");i=t.PopupMessagingStrategyPoolUtils.getPopupContentNode(r),i.innerHTML="",i.innerHTML=n,s?s&&r.ojPopup("refresh"):(o=this.GetLauncher(),"press"===e.type&&this._openPopupOnPressEvent(o),r.ojPopup("open",o))}},t.PopupMessagingStrategy.prototype._openPopupOnPressEvent=function(t){this._inPressEvent=!0,t[0].addEventListener("click",this._eatChangeAndClickOnPress,!0),t[0].addEventListener("change",this._eatChangeAndClickOnPress,!0),t.one("touchend",function(t){setTimeout(function(){this._inPressEvent=!1},50)})},t.PopupMessagingStrategy.prototype._eatChangeAndClickOnPress=function(t){this._inPressEvent&&(t.preventDefault(),t.stopPropagation(),"click"===t.type&&(this._inPressEvent=!1))},t.PopupMessagingStrategy.prototype._canOpenPopup=function(){var t=this.GetComponent().options,e=t.disabled||!1,i=t.readOnly||!1;return!(e||i)},t.PopupMessagingStrategy.prototype._updatePopupIfOpen=function(){var e,i,n,o,r,s=!1;if(this._isPopupInitialized()){if(r=this._getPopupElement(),s=r.ojPopup("isOpen"),e=this._buildPopupHtml(),o=this.GetLauncher(),null==o)return;n=document.activeElement===this.GetLauncher()[0],s?e?(i=t.PopupMessagingStrategyPoolUtils.getPopupContentNode(r),i.innerHTML="",i.innerHTML=e,r.ojPopup("refresh")):r.ojPopup("close"):n&&e&&this._openPopup(void 0)}},t.PopupMessagingStrategy.prototype._unregisterLauncherEvents=function(){var e,i,n=this.GetLauncher();e=t.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName],i=e?e.events:t.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT.default.events,n.off(t.PopupMessagingStrategy._OPEN_NAMESPACE),n.off(t.PopupMessagingStrategy._CLOSE_NAMESPACE),n[0].removeEventListener("click",this._eatChangeAndClickOnPress,!0),n[0].removeEventListener("change",this._eatChangeAndClickOnPress,!0),t.DomUtils.isTouchSupported()&&(n.ojHammer().off("press"),n.ojHammer("destroy"),n.off("contextmenu",this._eatContextMenuOnOpenPopupListener),this._eatContextMenuOnOpenPopupListener=null,this._inPressEvent=null),this._openPopupCallback=null,this._closePopupCallback=null},t.PopupMessagingStrategy.prototype._registerLauncherEvents=function(){var e,n,o,r,s,a,l,h,u=this.GetLauncher();o=t.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName],r=o?o.events:t.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT.default.events,r.open&&(l=this._openPopupCallback,l||(l=this._openPopupCallback=this._openPopup.bind(this)),h=r.open.indexOf("press"),a=this._getNamespacedEvents(r.open.replace("press",""),t.PopupMessagingStrategy._OPEN_NAMESPACE),u.on(a,l),t.DomUtils.isTouchSupported()&&(this._eatContextMenuOnOpenPopupListener=function(t){return!1},u.on("contextmenu",this._eatContextMenuOnOpenPopupListener),h!==-1&&(s={recognizers:[[i.Press,{time:750}]]},u.ojHammer(s).on("press",l)))),r.close&&(n=this._closePopupCallback,n||(n=this._closePopupCallback=this._closePopup.bind(this)),e=this._getNamespacedEvents(r.close,t.PopupMessagingStrategy._CLOSE_NAMESPACE),u.on(e,n))},t.PopupMessagingStrategy.prototype._getNamespacedEvents=function(t,e){var i,n,o;if(""===t||""===e)return t;i=t.split(" "),o=i.length,n=[];for(var r=0;r<o;r++)i[r]&&n.push(i[r]+e);return n.join(" ")},t.PopupMessagingStrategy.prototype._getPopupPosition=function(){var e,i,n,o;return i=t.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT[this.GetComponent().widgetName],e=i?i.position:t.PopupMessagingStrategy._DEFAULTS_BY_COMPONENT.default.position,e&&("launcher"===e?n=this.GetLauncher():"launcher-wrapper"===e&&(n=this.GetLauncher().parent())),n||(n=this.GetComponent().widget()),o={my:"start bottom",at:"end top",collision:"flipcenter",of:n}},t.PopupMessagingStrategy.prototype._getPopupElement=function(){var e,i;return this.$messagingContentRoot?this.$messagingContentRoot:(e=t.PopupMessagingStrategyPoolUtils.getNextFreePopup(),i=this._getPopupPosition(),e.ojPopup("option","position",i),e.ojPopup("option","close",this._popupCloseCallback.bind(this)),e.ojPopup("option","open",this._popupOpenCallback.bind(this)),this.$messagingContentRoot=e,this.$messagingContentRoot)},t.PopupMessagingStrategy.prototype._popupOpenCallback=function(i){var n=e(i.target),o=this;window.setTimeout(function(){t.Components.isComponentInitialized(n,"ojPopup")?n.ojPopup("option","autoDismiss","focusLoss"):delete o.$messagingContentRoot},10)},t.PopupMessagingStrategy.prototype._popupCloseCallback=function(i){var n,o,r;n=this.GetLauncher(),r=e(i.target),t.Components.isComponentInitialized(r,"ojPopup")&&(r.ojPopup("option","autoDismiss","none"),r.ojPopup("option","open",null),r.ojPopup("option","close",null)),n[0].removeEventListener("click",this._eatChangeAndClickOnPress,!0),n[0].removeEventListener("change",this._eatChangeAndClickOnPress,!0),this.$messagingContentRoot=null,this._inPressEvent=null,o=e(t.PopupMessagingStrategyPoolUtils.getPopupContentNode(r)),o.empty()},t.PopupMessagingStrategy.prototype._destroyTooltip=function(){this._closePopup(),t.PopupMessagingStrategyPoolUtils.destroyFreePopup()},t.PopupMessagingStrategy.prototype._buildPopupHtml=function(){var i=!1,n=this.GetComponent().document[0],o=[],r="";return this.ShowMessages()&&o.push(this._buildMessagesHtml(n)),(this.ShowConverterHint()||this.ShowValidatorHint()||this.ShowTitle())&&o.push(this._buildHintsHtml(n)),e.each(o,function(e,o){o&&(i?r=r.concat(t.PopupMessagingStrategyUtils.getSeparatorHtml(n)):i=!0,r=r.concat(o))}),r},t.PopupMessagingStrategy.prototype._buildMessagesHtml=function(e){var i,n="",o=this.GetMaxSeverity(),r=!1;return this.HasMessages()&&(i=this.GetMessages(),n=t.PopupMessagingStrategyUtils.buildMessagesHtml(e,i,o,r)),n},t.PopupMessagingStrategy.prototype._buildHintsHtml=function(e){var i,n,o=[],r="";if(this.ShowConverterHint()&&(o=this.GetConverterHint(),i=o.length?o[0]:"",r+=t.PopupMessagingStrategyUtils.buildHintHtml(e,t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_CONVERTER,i,!1,t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT)),this.ShowValidatorHint())for(o=this.GetValidatorHints(),n=0;n<o.length;n++)r+=t.PopupMessagingStrategyUtils.buildHintHtml(e,t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_VALIDATOR,o[n],!1,t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT);return this.ShowTitle()&&(r+=t.PopupMessagingStrategyUtils.buildHintHtml(e,t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT_TITLE,this.GetTitle(),!0,t.PopupMessagingStrategy._SELECTOR_FORMCONTROL_HINT)),r?"<div class='oj-form-control-hints'>"+r+"</div>":""},t.PopupMessagingStrategy.prototype._isPopupInitialized=function(){return!!this.$messagingContentRoot&&t.Components.isComponentInitialized(this.$messagingContentRoot,"ojPopup")},t.PopupMessagingStrategyUtils={},t.PopupMessagingStrategyUtils.buildHintHtml=function(i,n,o,r,s){var a;return o&&(a=e(i.createElement("div")),s+=" "+n,a.addClass(s),a.append(t.PopupMessagingStrategyUtils._getTextDom(i,o,r))),a?a.get(0).outerHTML:""},t.PopupMessagingStrategyUtils.getSeverityTranslatedString=function(e){var i;switch(e){case t.Message.SEVERITY_LEVEL.FATAL:i=t.Translations.getTranslatedString("oj-message.fatal");break;case t.Message.SEVERITY_LEVEL.ERROR:i=t.Translations.getTranslatedString("oj-message.error");break;case t.Message.SEVERITY_LEVEL.WARNING:i=t.Translations.getTranslatedString("oj-message.warning");break;case t.Message.SEVERITY_LEVEL.INFO:i=t.Translations.getTranslatedString("oj-message.info");break;case t.Message.SEVERITY_LEVEL.CONFIRMATION:i=t.Translations.getTranslatedString("oj-message.confirmation")}return i},t.PopupMessagingStrategyUtils.getSeparatorHtml=function(t){var i;return i=e(t.createElement("hr")),i?i.get(0).outerHTML:""},t.PopupMessagingStrategyUtils.buildMessagesHtml=function(e,i,n,o){var r,s,a,l,h,u,d,c,p="",_=[],g={};for(s=0;s<i.length;s++)l=i[s],h=l instanceof t.Message?l:new t.Message(l.summary,l.detail,l.severity),u=t.Message.getSeverityLevel(h.severity),g[u]||(g[u]=[]),g[u].push(h);for(s=n;s>=t.Message.SEVERITY_LEVEL.CONFIRMATION;s--)for(_=g[s]||[],a=0;a<_.length;a++)l=_[a],t.Assert.assertPrototype(l,t.Message),u=t.Message.getSeverityLevel(l.severity),d=t.PopupMessagingStrategyUtils.getSeverityTranslatedString(u),c=l.summary||d,r=l.detail||"",p=p.concat(t.PopupMessagingStrategyUtils.buildMessageHtml(e,c,r,u,o));return p},t.PopupMessagingStrategyUtils.buildMessageHtml=function(i,n,o,r,s){var a,l,h,u,d,c=t.PopupMessagingStrategyUtils.getSeverityTranslatedString(r);if(h=e(i.createElement("div")),h.addClass(t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE),s&&h.addClass(t.PopupMessagingStrategyUtils._getSeveritySelector(r)),u=e(i.createElement("span")),u.addClass(t.PopupMessagingStrategyUtils._getSeverityIconSelector(r)).attr("title",c).attr("role","img"),h.append(u),a=e(i.createElement("span")),a.addClass(t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONTENT),d=e(i.createElement("div")),d.addClass(t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_SUMMARY).text(n),a.append(d),o){var p=t.PopupMessagingStrategyUtils._getTextDom(i,o,!0);l=e(i.createElement("div")),l.addClass(t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_DETAIL).append(p),a.append(l)}return h.append(a),h?h.get(0).outerHTML:""},t.PopupMessagingStrategyUtils._getSeverityIconSelector=function(e){var i;switch(e){case t.Message.SEVERITY_LEVEL.FATAL:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR_ICON;break;case t.Message.SEVERITY_LEVEL.ERROR:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR_ICON;break;case t.Message.SEVERITY_LEVEL.WARNING:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING_ICON;break;case t.Message.SEVERITY_LEVEL.INFO:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO_ICON;break;case t.Message.SEVERITY_LEVEL.CONFIRMATION:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION_ICON}return t.PopupMessagingStrategyUtils._DEFAULT_STATUS_ICON_SELECTORS+i},t.PopupMessagingStrategyUtils._getSeveritySelector=function(e){var i;switch(e){case t.Message.SEVERITY_LEVEL.FATAL:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR;break;case t.Message.SEVERITY_LEVEL.ERROR:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR;break;case t.Message.SEVERITY_LEVEL.WARNING:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING;break;case t.Message.SEVERITY_LEVEL.INFO:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO;break;case t.Message.SEVERITY_LEVEL.CONFIRMATION:default:i=t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION}return i},t.PopupMessagingStrategyUtils._getTextDom=function(e,i,n){var o=null;return t.StringUtils.isString(i)&&(n&&t.DomUtils.isHTMLContent(i)?o=t.DomUtils.cleanHtml(i.substring(6,i.length-7)):(o=e.createElement("span"),o.textContent=i)),o},t.PopupMessagingStrategyUtils._DEFAULT_STATUS_ICON_SELECTORS="oj-component-icon oj-message-status-icon ",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE="oj-message",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_SUMMARY="oj-message-summary",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_DETAIL="oj-message-detail",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONTENT="oj-message-content",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR_ICON="oj-message-error-icon",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING_ICON="oj-message-warning-icon",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO_ICON="oj-message-info-icon",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION_ICON="oj-message-confirmation-icon",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_ERROR="oj-message-error",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_WARNING="oj-message-warning",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_INFO="oj-message-info",t.PopupMessagingStrategyUtils._SELECTOR_MESSAGE_CONFIRMATION="oj-message-confirmation",t.PopupMessagingStrategyPoolUtils={},t.PopupMessagingStrategyPoolUtils.getNextFreePopup=function(){var i,n=t.PopupMessagingStrategyPoolUtils._getPool(),o=n.find("."+t.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING);
if(0===o.length){i=e(t.PopupMessagingStrategyPoolUtils._getPopupContentHtml()).hide(),i.appendTo(n);var r={initialFocus:"none",tail:"simple",autoDismiss:"none",modality:"modeless",animation:{open:null,close:null}};i.ojPopup(r)}else i=e(o[0]);return i},t.PopupMessagingStrategyPoolUtils.getPopupContentNode=function(e){return e.find("."+t.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER)[0]},t.PopupMessagingStrategyPoolUtils.destroyFreePopup=function(){var e;t.PopupMessagingStrategyPoolUtils._getFreePoolCount()>0&&(e=t.PopupMessagingStrategyPoolUtils.getNextFreePopup(),e.ojPopup("destroy"),e.remove())},t.PopupMessagingStrategyPoolUtils._getPool=function(){var i=e("#"+t.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID);return i.length>0?i:(i=e("<div>"),i.attr("id",t.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID),i.attr("role","presentation"),i.appendTo(e(document.body)),i)},t.PopupMessagingStrategyPoolUtils._getFreePoolCount=function(){var e=t.PopupMessagingStrategyPoolUtils._getPool(),i=e.find("."+t.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING);return i.length},t.PopupMessagingStrategyPoolUtils._getPopupContentHtml=function(){return'<div class="'+t.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING+'"><div class="'+t.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER+'"></div></div>'},t.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING_CONTAINER="oj-messaging-popup-container",t.PopupMessagingStrategyPoolUtils._SELECTOR_MESSAGING="oj-messaging-popup",t.PopupMessagingStrategyPoolUtils._MESSAGING_POPUP_POOL_ID="__oj_messaging_popup_pool",function(){var n="_helpIcon",o="_requiredIcon";t.__registerWidget("oj._ojLabel",e.oj.baseComponent,{version:"1.0.0",defaultElement:"<label>",widgetEventPrefix:"oj",options:{help:{definition:null,source:null},showRequired:!1,rootAttributes:null},_BUNDLE_KEY:{_TOOLTIP_HELP:"tooltipHelp",_TOOLTIP_REQUIRED:"tooltipRequired"},widget:function(){return this.uiLabel},refresh:function(){this._super(),this._refreshRequired(),this._refreshHelp()},_InitOptions:function(t,e){this._super(t,e),this._checkRequiredOption()},_ComponentCreate:function(){this._super(),this._touchEatClickNamespace=this.eventNamespace+"TouchEatClick",this._touchEatContextMenuNamespace=this.eventNamespace+"TouchEatContextMenu",this._helpDefPopupNamespace=this.eventNamespace+"HelpDefPopup",this._bTouchSupported=t.DomUtils.isTouchSupported(),this._drawOnCreate()},_SaveAttributes:function(t){this._savedClasses=t.attr("class")},_RestoreAttributes:function(){this._savedClasses?this.element.attr("class",this._savedClasses):this.element.removeAttr("class")},_NotifyDetached:function(){this._superApply(arguments),this._handleCloseHelpDefPopup()},_NotifyHidden:function(){this._superApply(arguments),this._handleCloseHelpDefPopup()},_drawOnCreate:function(){var t,e=null,i=null;this.uiLabel=this.element.wrap(this._createRootDomElement()).closest(".oj-component"),this._addIdsToDom(),t=this.element.attr("id"),this.helpSpanId=t+n,this.requiredSpanId=t+o,this._moveLabelStyleClassesToRootDom(),this.options.showRequired&&(i=this._createIconSpan(this.requiredSpanId),i.appendChild(this._createRequiredIconDomElement())),this._needsHelpIcon()&&(e=this._createIconSpan(this.helpSpanId),this._createHelp(e))},_createHelp:function(t){var i,n,o;this._needsHelpIcon()&&(i=this.options.help.definition,n=this.options.help.source,o=this._createHelpIconAnchorDomElement(i,n),e(t).prepend(o),this._attachHelpDefToIconAnchor(),this._focusable({element:o,applyHighlight:!0}))},_checkRequiredOption:function(){var t=this.options.showRequired;if(null!==t&&"boolean"!=typeof t)throw new Error("Option 'showRequired' has invalid value set: "+t)},_addIdsToDom:function(){var t;t=this.element.attr("id"),null==t&&this.element.uniqueId()},_moveLabelStyleClassesToRootDom:function(){var t,e,i,n=this.element.attr("class");if(n){if(t=n.split(/\s+/),null==t)return;i=t.length;for(var o=0;o<i;o++)e=t[o],e.indexOf("-label")>0&&(this.uiLabel.addClass(e),this.element.removeClass(e))}},_createIconSpan:function(t){var e=this.uiLabel.find(".oj-label-group"),i=document.createElement("span");return i.setAttribute("id",t),e.prepend(i),i},_createRootDomElement:function(){var t,e,i,n=this.options.rootAttributes,o="oj-label oj-component";return n&&(t=n.class),null!==t&&(o=o+" "+t),i=document.createElement("div"),i.className=o,e=document.createElement("div"),e.className="oj-label-group",i.appendChild(e),i},_createRequiredIconDomElement:function(){var t=this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_REQUIRED),e=document.createElement("span");return e.className="oj-label-required-icon oj-component-icon",e.setAttribute("role","img"),e.setAttribute("title",t),e.setAttribute("aria-label",t),e},_createHelpIconAnchorDomElement:function(e,i){var n;if(this._needsHelpIcon()){if(n=document.createElement("a"),n.setAttribute("tabindex","0"),n.setAttribute("target","_blank"),n.className="oj-label-help-icon-anchor oj-label-help-icon oj-component-icon oj-clickable-icon-nocontext",i)try{t.DomUtils.validateURL(i),n.setAttribute("href",i)}catch(t){throw new Error(t+". The source option ("+i+") is invalid.")}else n.setAttribute("role","img");e?n.setAttribute("aria-label",e):n.setAttribute("aria-label",this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_HELP))}return n},_attachHelpDefToIconAnchor:function(){var t,e,i,n=this;e=this.widget().find(".oj-label-help-icon-anchor"),0!=e.length&&(t=this._createHelpDefPopupDiv(),this._bTouchSupported&&(this._eatClickOnHelpIconListener&&this.widget().off(this._touchEatClickNamespace),this._eatClickOnHelpIconListener=function(t){return!1},this._eatContextMenuOnHelpIconListener=function(t){return!1},e.on("contextmenu"+this._touchEatContextMenuNamespace,this._eatContextMenuOnHelpIconListener)),this._openPopupForHelpDefCallbackListener||(this._openPopupForHelpDefCallbackListener=function(i){n._handleOpenHelpDefPopup(i,t,e)}),this._closePopupForHelpDefCallbackListener||(this._closePopupForHelpDefCallbackListener=function(t){n._handleCloseHelpDefPopup()}),this._addShowHelpDefinitionEventHandlers(e),i={my:"start bottom",at:"end top",collision:"flipcenter",of:e},t.ojPopup({position:i,modality:"modeless",animation:{open:null,close:null}}))},_createHelpDefPopupDiv:function(){var t,i,n,o,r,s,a=this.options.help.definition;return s=a?a:this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_HELP),this._helpDefPopupDivId?(r=e(document.getElementById(this._helpDefPopupDivId)),r&&(n=r.find(".oj-help-popup-container").first(),n.text(s))):(o=document.createElement("div"),o.className="oj-help-popup",o.style.display="none",r=e(o),r.uniqueId(),this._helpDefPopupDivId=r.prop("id"),i=document.createElement("div"),i.className="oj-help-popup-container",o.appendChild(i),n=e(i),n.text(s),t=document.getElementsByTagName("body")[0],t.appendChild(o)),r},_addShowHelpDefinitionEventHandlers:function(e){var n;e.on("focusin"+this._helpDefPopupNamespace+" mouseenter"+this._helpDefPopupNamespace,this._openPopupForHelpDefCallbackListener),e.on("mouseleave"+this._helpDefPopupNamespace,this._closePopupForHelpDefCallbackListener),this._bTouchSupported&&(this.options.help.source?(n={recognizers:[[i.Press,{time:t.DomUtils.PRESS_HOLD_THRESHOLD}]]},e.ojHammer(n),this._on(e,{press:this._openPopupForHelpDefCallbackListener})):(n={recognizers:[[i.Tap],[i.Press,{time:t.DomUtils.PRESS_HOLD_THRESHOLD}]]},e.ojHammer(n),this._on(e,{press:this._openPopupForHelpDefCallbackListener,tap:this._openPopupForHelpDefCallbackListener})))},_handleOpenHelpDefPopup:function(e,i,n){var o=i.ojPopup("isOpen");if(!o)if(this._bTouchSupported){if("press"===e.type){var r=this.widget();r.on("click"+this._touchEatClickNamespace,this._eatClickOnHelpIconListener);var s=this;i.on("ojclose",function(t,e){r.off(s._touchEatClickNamespace)})}else i.off("ojclose");"press"!==e.type&&"tap"!==e.type&&(t.DomUtils.recentTouchStart()||"focusin"!==e.type&&"mouseenter"!==e.type)||i.ojPopup("open",n)}else i.ojPopup("open",n)},_handleCloseHelpDefPopup:function(){var t;null!=this._helpDefPopupDivId&&(t=e(document.getElementById(this._helpDefPopupDivId)),t.ojPopup("close"))},_removeHelpDefIconEventListeners:function(t){this._bTouchSupported&&(this.widget().off(this._touchEatClickNamespace),t.off(this._touchEatContextMenuNamespace),this._eatClickOnHelpIconListener=null,this._eatContextMenuOnHelpIconListener=null,t.ojHammer("destroy")),t.off(this._helpDefPopupNamespace),this._openPopupForHelpDefCallbackListener=null,this._closePopupForHelpDefCallbackListener=null},_removeHelpDefPopup:function(){var t;null!=this._helpDefPopupDivId&&(t=e(document.getElementById(this._helpDefPopupDivId)),t&&(t.ojPopup("destroy"),t.remove()),this._helpDefPopupDivId=null)},_needsHelpIcon:function(){var t=this.options;return null!=t.help.source||null!=t.help.definition},_refreshHelp:function(){var t,e,i,n=this.helpSpanId;e=this.uiLabel.find(".oj-label-help-icon"),1===e.length&&(this._removeHelpDefIconEventListeners(e),this._removeHelpDefPopup(),e.remove()),t=document.getElementById(n),i=this._needsHelpIcon(),i&&null==t?t=this._createIconSpan(n):i||null===t||t.parentNode.removeChild(t),i&&null!=t&&this._createHelp(t)},_refreshRequired:function(){var t,e,i,n=this.requiredSpanId;e=document.getElementById(n),this.options.showRequired?e?(i=this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_REQUIRED),t=this.uiLabel.find(".oj-label-required-icon"),t.attr("title",i)):(e=this._createIconSpan(n),e.appendChild(this._createRequiredIconDomElement()),this.element.before(e)):(e=document.getElementById(n),null!==e&&e.parentNode.removeChild(e))},_setOption:function(t,e){this._superApply(arguments),"showRequired"===t&&this._refreshRequired(),"help"===t&&this._refreshHelp()},getNodeBySubId:function(t){var e,i;return e=this._super(t),e||(i=t.subId,"oj-label-help-icon"===i&&(e=this.widget().find(".oj-label-help-icon")[0]),"oj-label-required-icon"===i&&(e=this.widget().find(".oj-label-required-icon")[0])),e||null},getSubIdByNode:function(t){var e=null;return null!=t&&t===this.widget().find(".oj-label-help-icon")[0]&&(e={subId:"oj-label-help-icon"}),e||this._superApply(arguments)},_destroy:function(){var e=this.uiLabel.find(".oj-label-help-icon");return this._removeHelpDefIconEventListeners(e),this._removeHelpDefPopup(),this.helpSpanId=null,this.requiredSpanId=null,t.DomUtils.unwrap(this.element,this.uiLabel),this._super()}})}();var o={FULL:1,VALIDATORS_ONLY:2,REQUIRED_VALIDATOR_ONLY:3},r="_helpIcon";t.__registerWidget("oj.editableValue",e.oj.baseComponent,{widgetEventPrefix:"oj",options:{disabled:!1,displayOptions:void 0,help:{definition:null,source:null},messagesCustom:void 0,messagesHidden:void 0,messagesShown:void 0,title:"",value:void 0},getNodeBySubId:function(t){return this._super(t)},isValid:function(){return void 0===this._valid&&(this._valid=this._getValid()),this._valid},refresh:function(){this._super(),this._doRefresh(!0)},reset:function(){this._clearAllMessages(),this._runDeferredValidation(this._VALIDATION_CONTEXT.RESET_METHOD),this._refreshComponentDisplayValue(this.options.value,!0)},showMessages:function(){var e,i,n=[],o=this.options.messagesHidden,r=!1;for(e=0;e<o.length;e++)r=!0,i=o[e],i instanceof t.ComponentMessage&&i._forceDisplayToShown(),n.push(i.clone());r&&(this._clearMessages("messagesHidden"),this._updateMessagesOption("messagesShown",n))},_VALIDATION_MODE:o,_VALIDATION_CONTEXT:t.EditableValueUtils.validationContext,_VALIDATE_METHOD_OPTIONS:t.EditableValueUtils.validateMethodOptions,_InitOptions:function(t,e){this._super(t,e)},_ComponentCreate:function(){var t=["required","title","pattern"],i=this.element,n=this._GetSavedAttributes(i);this._super(),this.options.messagesCustom=this.options.messagesCustom||[],this.options.messagesHidden=[],this.options.messagesShown=this.options.messagesCustom.length>0?this._cloneMessagesBeforeSet(this.options.messagesCustom):[],this._SetDisabledDom(i),this._HasPlaceholderSet()&&(this._SetPlaceholder(this.options.placeholder),this._customPlaceholderSet=!0);var o=i[0].tagName.toLowerCase();"input"!==o&&"textarea"!==o||e.each(t,function(t,e){e in n&&i.removeAttr(e)})},_AfterCreate:function(){this._super(),this._doRefresh(!1),this._createOjLabel(),this._initComponentMessaging(),this._runDeferredValidation(this._VALIDATION_CONTEXT.COMPONENT_CREATE),this.options.messagesShown.length>0&&this._setMessagesOption("messagesShown",this.options.messagesShown,null,!0),this.widget().addClass("oj-form-control")},_SaveAttributes:function(t){this._SaveAllAttributes(t)},_RestoreAttributes:function(t){this._RestoreAllAttributes(t)},_AfterSetOption:function(e,i){switch(e){case"disabled":this._AfterSetOptionDisabledReadOnly(e,t.EditableValueUtils.disabledOptionOptions);break;case"displayOptions":this._initComponentMessaging();break;case"help":this._Refresh(e,this.options[e]);break;case"messagesCustom":this._messagesCustomOptionChanged(i);break;case"placeholder":this._placeholderOptionChanged(i);break;case"title":this._titleOptionChanged();break;case"translations":this.refresh();break;case"value":this._AfterSetOptionValue(e,i)}},_AfterSetOptionDisabledReadOnly:function(t,e){var i=!this.options[t];this._Refresh(t,this.options[t]),i&&this._runMixedValidationAfterSetOption(e)},_AfterSetOptionValue:function(t,e){var i,n=e?e._context:null,o=!1;n&&(o=!!n.originalEvent,i=n.doNotClearMessages||!1),o||(i||this._clearAllMessages(null),this._runDeferredValidation(this._VALIDATION_CONTEXT.VALUE_OPTION_CHANGE)),this._Refresh(t,this.options[t],!0)},_CanSetValue:function(){var t=this.options.disabled||!1;return!t},_destroy:function(){var i,n,o=this._super();if(this._clearAllMessages(null,!0),this._getComponentMessaging().deactivate(),this.$label)for(n=this.$label.length,i=0;i<n;i++)this.$label[i]&&null!=t.Components.getWidgetConstructor(this.$label[i])&&e(this.$label[i])._ojLabel("destroy");return o},Focus:function(){return this._GetContentElement().focus(),!0},_setOption:function(e,i,n){var o,r=!1;if("string"==typeof e&&void 0!==i)switch(e){case"messagesHidden":r=!0;break;case"messagesShown":r=!0;break;case"rawValue":r=!0}return r?(t.Logger.error(e+" option cannot be set"),this):(o=this._superApply(arguments),this._AfterSetOption(e,n),o)},_GetContentElement:function(){return this.element},_GetLabelElement:function(){var t,i,n=this._getAriaLabelledByElement(this.element);if(null!==n&&0!==n.length)return n;var o=this.element.prop("id");return void 0!==o&&(i="label[for='"+o+"']",n=e(i),0!==n.length)?n:(t=this.element.closest("[aria-labelledby]"),0!==t.length&&(n=this._getAriaLabelledByElement(t),null!==n&&0!==n.length)?n:null)},_GetElementValue:function(){return this.element.val()},_GetMessagingLauncherElement:function(){return this._GetContentElement()},_GetConverter:function(){return null},_GetImplicitValidators:function(){return this._implicitValidators||(this._implicitValidators={}),this._implicitValidators},_GetDisplayValue:function(t){return this._GetContentElement().val()},_GetNormalizedValidatorsFromOption:function(){return[]},_GetAllValidators:function(){var t,e,i,n,o;if(!this._allValidators){t=[],i=this._GetImplicitValidators(),n=[];var r,s=Object.keys(i),a=s.length;if(a>0){for(e=0;e<a;e++)r=s[e],n.push(i[r]);t=t.concat(n)}o=this._GetNormalizedValidatorsFromOption(),o.length>0&&(t=t.concat(o)),this._allValidators=t}return this._allValidators||[]},_ResetAllValidators:function(){this._allValidators&&(this._allValidators.length=0),this._allValidators=null,this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS))},_IsRequired:function(){return!1},_HandleChangeEvent:function(t){var e=this._GetDisplayValue();this._SetValue(e,t)},_SetRawValue:function(t,e){var i={};i._context={originalEvent:e,writeback:!0,internalSet:!0,readOnly:!0},this.options.rawValue!==t&&this.option("rawValue",t,i)},_Refresh:function(t,e,i){var n,o;switch(t){case"converter":e=this.options.value,this._refreshComponentDisplayValue(e,i);break;case"disabled":this._refreshTheming("disabled",this.options.disabled);break;case"help":this.$label&&(n=this.options.help.definition,o=this.options.help.source,this.$label._ojLabel("option","help",{definition:n,source:o}),this._refreshDescribedByForLabel());break;case"value":this._refreshComponentDisplayValue(e,i)}},_NotifyHidden:function(){this._superApply(arguments),this._getComponentMessaging().close()},_NotifyDetached:function(){this._superApply(arguments),this._getComponentMessaging().close()},_ResetComponentState:function(){this.$label&&this.$label._ojLabel("refresh"),this._implicitReqValidator=null,this._converter=null,this._ResetAllValidators()},_SetDisplayValue:function(t){var e=this._GetContentElement();e.val()!==t&&e.val(t)},_SetDisabledDom:function(t){"boolean"==typeof this.options.disabled&&t.prop("disabled",this.options.disabled)},_SetPlaceholder:function(t){this._GetContentElement().attr("placeholder",t)},_SetPlaceholderOption:function(t){this.options.placeholder=t},_HasPlaceholderSet:function(){return this.options.placeholder},_ClearPlaceholder:function(){this._SetPlaceholderOption(""),this._SetPlaceholder("")},_SetValue:function(e,i,n){var o,r=!n||"boolean"!=typeof n.doValueChangeCheck||n.doValueChangeCheck;if(void 0===e)return t.Logger.warn("Attempt to set a value of undefined"),!1;if(r&&e===this._getLastDisplayValue())t.Logger.level>t.Logger.LEVEL_WARN&&t.Logger.info(e.toString());else if(o=this._Validate(e,i,n),void 0!==o&&this.isValid()){var s;return n&&n._context&&(s=n._context),this._updateValueOption(o,i,n&&n.validationContext,s),!0}return!1},_Validate:function(e,i,n){var o,r=n&&n.validationMode?n.validationMode:this._VALIDATION_MODE.FULL,s=n&&n.validationContext?n.validationContext:this._VALIDATION_CONTEXT.USER_ACTION,a=n&&n.doNotClearMessages||!1;if(void 0===e)t.Logger.warn("Attempt to set a value of undefined");else if(this._CanSetValue()){a||this._clearAllMessages(i),this._setLastSubmittedValue(e);try{return this._runNormalValidation(e,r,s,i)}catch(t){}}else t.Logger.level>t.Logger.LEVEL_WARN&&t.Logger.info("Validation skipped and value option not set as component state does not  allow setting value. For example if the component is readonly or disabled.");return o},_CompareOptionValues:function(e,i,n){return"value"===e?t.Object.compareValues(i,n):0===e.indexOf("messages")?this._messagesEquals(i,n):this._superApply(arguments)},_GetDefaultStyleClass:function(){return t.Assert.failedInAbstractFunction(),""},_MESSAGING_CONTENT_UPDATE_TYPE:{ALL:1,VALIDITY_STATE:2,CONVERTER_HINT:3,VALIDATOR_HINTS:4,TITLE:5},_OPTION_TO_CSS_MAPPING:{disabled:"oj-disabled",required:"oj-required"},_clearAllMessages:function(t,e){e=!!e,e?(this.options.messagesHidden=[],this.options.messagesShown=[],this.options.messagesCustom=[]):(this._clearMessages("messagesHidden",t),this._clearMessages("messagesShown",t),this._clearMessages("messagesCustom",t))},_clearComponentMessages:function(){var e,i,n=this.options.messagesShown;e=n.length,this._clearMessages("messagesHidden");for(var o=e-1;o>=0;o--)i=n[o],i instanceof t.ComponentMessage&&n.splice(o,1);n.length!==e&&this._setMessagesOption("messagesShown",n,null,!0)},_setMessagesOption:function(t,e,i,n){var o={},r=0===e.length&&0===this.options[t].length;!n&&r||(o._context={originalEvent:i,writeback:!0,internalSet:!0},"messagesCustom"!==t&&(o._context.readOnly=!0),o.changed=n||!r,this._resetValid(),this.option(t,e,o),this._updateMessagingContent())},_clearMessages:function(t,e){this._setMessagesOption(t,[],e)},_cloneMessagesBeforeSet:function(e){var i,n,o,r=[];if(e&&e.length>0)for(i=0;i<e.length;i++)o=e[i],o instanceof t.Message?r.push(o.clone()):(n=new t.Message(o.summary,o.detail,o.severity),n=Object.freeze?Object.freeze(n):n,r.push(n));return r},_createOjLabel:function(){var t,e;this.$label=this._GetLabelElement(),this.$label&&(t=this.options.help.definition,e=this.options.help.source,this.$label._ojLabel({rootAttributes:{class:this._GetDefaultStyleClass()+"-label"},help:{definition:t,source:e}}),this._createDescribedByForLabel())},_createDescribedByForLabel:function(){var t,e=this.options.help.definition,i=this.options.help.source;null==i&&null==e||(t=this.$label.attr("id"),t&&this._addAriaDescribedBy(t+r))},_refreshDescribedByForLabel:function(){var t=this.options.help.definition,e=this.options.help.source,i=this.$label.attr("id");i&&(null!=e||null!=t?this._addAriaDescribedBy(i+r):this._removeAriaDescribedBy(i+r))},_doRefresh:function(e){var i=!1;e=e||!1,e?(this._ResetComponentState(),this._initComponentMessaging(),this._hasInvalidMessagesShowing()&&(i=!0),this._clearComponentMessages(),i?this._updateValue(t.EditableValueUtils.refreshMethodOptions):(this._IsRequired()&&this._runDeferredValidation(t.EditableValueUtils.refreshMethodOptions.validationContext),this._Refresh("value",this.options.value,!0))):this._Refresh("value",this.options.value),this._Refresh("disabled",this.options.disabled)},_getLastModelValue:function(){return this._oj_lastModelValue},_getLastDisplayValue:function(){return void 0===this._oj_lastElementValue&&(this._oj_lastElementValue=""),this._oj_lastElementValue},_getAriaLabelledByElement:function(t){var i,n=t.attr("aria-labelledby");return void 0!==n?(i="label[id='"+n+"']",e(i)):null},_getAriaLabelledById:function(t){var e=null,i=this._getAriaLabelledByElement(t);return null!==i&&0!==i.length&&(e=i.attr("id")),e},_addAriaDescribedBy:function(t){var i,n=this._GetContentElement();n.each(function(){var n,o=e(this).attr("aria-describedby");n=o?o.split(/\s+/):[],i=e.inArray(t,n),i===-1&&n.push(t),o=e.trim(n.join(" ")),e(this).attr("aria-describedby",o)})},_removeAriaDescribedBy:function(t){var i=this._GetContentElement();i.each(function(){var i,n,o;i=e(this).attr("aria-describedby"),o=i?i.split(/\s+/):[],n=e.inArray(t,o),n!==-1&&o.splice(n,1),i=e.trim(o.join(" ")),i?e(this).attr("aria-describedby",i):e(this).removeAttr("aria-describedby")})},_getMessages:function(){return this.options.messagesShown.concat(this.options.messagesHidden)},_getLabelText:function(){if(this.$label)return this.$label.text()},_getValidityState:function(){return this._validityState?this._validityState:(this._validityState=new t.ComponentValidity(this.isValid(),this._getMessages()),this._validityState)},_hasInvalidMessages:function(){return!t.Message.isValid(this._getMessages())},_hasInvalidMessagesShowing:function(){return!this.isValid()&&this.options.messagesShown.length>0},_hasInvalidComponentMessagesShowing:function(){for(var e,i,n=this.options.messagesShown,o=0;o<n.length;o++)i=n[o],i instanceof t.ComponentMessage&&i._isMessageAddedByComponent()&&(e=e||[],e.push(i));return void 0!==e&&!t.Message.isValid(e)},_initComponentMessaging:function(){var t=this._getComponentMessaging(),e=this._GetMessagingLauncherElement(),i=this._GetContentElement(),n=this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.ALL);this._customPlaceholderSet||this._ClearPlaceholder(),t.activate(e,i,n)},_messagesCustomOptionChanged:function(e){var i,n,o=e?e._context:null,r=this.options.messagesCustom,s=this.options.messagesShown,a=[];for(i=0;i<s.length;i++)n=s[i],n instanceof t.ComponentMessage&&n._isMessageAddedByComponent()&&a.push(n);for(i=0;i<r.length;i++)a.push(r[i]);this._setMessagesOption("messagesShown",a,o?o.originalEvent:null,e&&e.changed)},_placeholderOptionChanged:function(t){var e=t&&t._context||{},i=!e.internalMessagingSet,n=this.options.placeholder;this._SetPlaceholder(n),i?(this._customPlaceholderSet=!0,this._GetConverter()&&this._initComponentMessaging()):this._customPlaceholderSet=!1},_setLastModelValue:function(t){this._oj_lastModelValue=t},_setLastSubmittedValue:function(t){this._oj_lastElementValue=t},_titleOptionChanged:function(){this._getComponentMessaging().update(this._getMessagingContent(this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE))},_updateMessagesOption:function(t,e,i){var n,o,r;if("object"==typeof e&&Array.isArray(e))for(r=this.options[t],o=e.length,n=0;n<o;n++)r.push(e[n]);this._setMessagesOption(t,r,i,!0)},_updateMessagingContent:function(){this._getComponentMessaging().update(this._getMessagingContent())},_updateValueOption:function(t,e,i,n){var o=n||{};switch(e&&(o.originalEvent=e),i){case this._VALIDATION_CONTEXT.CONVERTER_OPTION_CHANGE:case this._VALIDATION_CONTEXT.DISABLED_OPTION_CHANGE:case this._VALIDATION_CONTEXT.READONLY_OPTION_CHANGE:case this._VALIDATION_CONTEXT.REFRESH_METHOD:case this._VALIDATION_CONTEXT.REQUIRED_OPTION_CHANGE:case this._VALIDATION_CONTEXT.VALIDATE_METHOD:case this._VALIDATION_CONTEXT.VALIDATORS_OPTION_CHANGE:o.writeback=!0,o.doNotClearMessages=!0}this.option({value:t},{_context:o})},_resetValid:function(){this._valid=void 0},_getValid:function(){var t,e=this._getMessages(),i=!0;return t=e&&0!==e.length,t&&(i=!this._hasInvalidMessages()),i},_formatValue:function(e){var i=e,n=this._GetConverter();return n&&"object"==typeof n&&(n.format&&"function"==typeof n.format?i=n.format(e):t.Logger.level>t.Logger.LEVEL_WARN&&t.Logger.info("converter does not support the format method.")),i},_getComponentMessaging:function(){return this._componentMessaging||(this._componentMessaging=new t.ComponentMessaging(this)),this._componentMessaging},_getHintsForAllValidators:function(t){var e,i,n=[],o="";for(this._IsRequired()&&(i=this._getImplicitRequiredValidator(),i.getHint&&"function"==typeof i.getHint&&(o=i.getHint(),o&&n.push(o))),e=0;e<t.length;e++)i=t[e],o="","object"==typeof i&&i.getHint&&"function"==typeof i.getHint&&(o=i.getHint(),o&&n.push(o));return n},_getImplicitRequiredValidator:function(){var e,i,n={};return null==this._implicitReqValidator&&(n=this.options.translations?this.options.translations.required||{}:{},i={hint:n.hint||null,label:this._getLabelText(),messageSummary:n.messageSummary||null,messageDetail:n.messageDetail||null},e=t.Validation.validatorFactory(t.ValidatorFactory.VALIDATOR_TYPE_REQUIRED),this._implicitReqValidator=e?e.createValidator(i):null),this._implicitReqValidator},_getMessagingContent:function(t){var e,i,n,o={},r="",s=[];return t=t||this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE,t!==this._MESSAGING_CONTENT_UPDATE_TYPE.ALL&&t!==this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDITY_STATE||(n=this._getMessages(),this._getValidityState().update(this.isValid(),n),o.validityState=this._getValidityState()),t!==this._MESSAGING_CONTENT_UPDATE_TYPE.ALL&&t!==this._MESSAGING_CONTENT_UPDATE_TYPE.CONVERTER_HINT||(i=this._GetConverter(),i&&"object"==typeof i&&i.getHint&&"function"==typeof i.getHint&&(r=i.getHint()||""),o.converterHint=r),t!==this._MESSAGING_CONTENT_UPDATE_TYPE.ALL&&t!==this._MESSAGING_CONTENT_UPDATE_TYPE.VALIDATOR_HINTS||(e=this._GetAllValidators(),s=this._getHintsForAllValidators(e)||[],o.validatorHint=s),t!==this._MESSAGING_CONTENT_UPDATE_TYPE.ALL&&t!==this._MESSAGING_CONTENT_UPDATE_TYPE.TITLE||(o.title=this.options.title||""),o},_messagesEquals:function(i,n){var o,r=-1,s=!0,a=e.extend([],i),l=e.extend([],n);return a.length===l.length&&(e.each(a,function(i,n){return n instanceof t.Message?o=n:(o=new t.Message(n.summary,n.detail,n.severity),o=Object.freeze?Object.freeze(o):o),r=-1,e.each(l,function(t,e){if(o.equals(e))return void(r=t)}),r>-1?void l.splice(r,1):void(s=!1)}),s)},_parseValue:function(e){var i=this._GetConverter(),n=e;return i&&"object"==typeof i&&(i.parse&&"function"==typeof i.parse?n=i.parse(e):t.Logger.level>t.Logger.LEVEL_WARN&&t.Logger.info("converter does not support the parse method.")),n},_addValidationError:function(e,i){var n,o,r,s;e instanceof t.ConverterError||e instanceof t.ValidatorError?(r=e.getMessage(),t.Assert.assertPrototype(r,t.Message),o=r.severity,s=r.summary,n=r.detail):(o=t.Message.SEVERITY_LEVEL.ERROR,s=t.Translations.getTranslatedString("oj-message.error"),n=e.message||t.Translations.getTranslatedString("oj-converter.detail")),i.push({summary:s,detail:n,severity:o})},_processValidationErrors:function(e,i,n){var o,r=[],s=e._messages||[],a={};a.context=i||0,a.display=n||t.ComponentMessage.DISPLAY.SHOWN,0===s.length&&this._addValidationError(e,s);for(var l=0;l<s.length;l++)o=s[l],r.push(this._createComponentMessage(o.summary,o.detail,o.severity,a));return r||null},_createComponentMessage:function(e,i,n,o){var r;return r=new t.ComponentMessage(e,i,n,o),r=Object.seal?Object.seal(r):r},_refreshComponentDisplayValue:function(t,e){var i,n,o=t||this.options.value;i=this._getLastModelValue(),n=e||o!==i||!1,n&&this._updateElementDisplayValue(o)},_refreshTheming:function(t,e){Object.keys(this._OPTION_TO_CSS_MAPPING).indexOf(t)!==-1&&this.widget().toggleClass(this._OPTION_TO_CSS_MAPPING[t],!!e)},_runDeferredValidation:function(e){var i,n;if(this._CanSetValue())try{n=this._validateValue(this.options.value,this._VALIDATION_MODE.REQUIRED_VALIDATOR_ONLY)}catch(n){i=this._processValidationErrors(n,e,t.ComponentMessage.DISPLAY.HIDDEN),i&&this._updateMessagesOption("messagesHidden",i)}else t.Logger.level>t.Logger.LEVEL_WARN&&t.Logger.info("Deferred validation skipped as component is readonly or disabled.")},_runNormalValidation:function(t,e,i,n){var o,r=t;try{e===this._VALIDATION_MODE.FULL&&(r=this._parseValue(t)),this._validateValue(r,e===this._VALIDATION_MODE.REQUIRED_VALIDATOR_ONLY)}catch(t){throw o=this._processValidationErrors(t,i),this._updateMessagesOption("messagesShown",o,n),t}return r},_runMixedValidationAfterSetOption:function(t){var e=!0;this._hasInvalidMessagesShowing()&&(e=!1),this._clearComponentMessages(),e?this._IsRequired()&&this._runDeferredValidation(t.validationContext):this._updateValue(t)},_updateElementDisplayValue:function(t,e){var i,n,o;this._setLastModelValue(t),n=t;try{n=this._formatValue(t)}catch(t){o=this._processValidationErrors(t),this._updateMessagesOption("messagesShown",o,e)}this._SetDisplayValue(n),i=this._GetDisplayValue(),this._setLastSubmittedValue(i),this._SetRawValue(i,null)},_updateValue:function(t){var e;e=this._Validate(this._GetDisplayValue(),null,t),void 0===e||!this.isValid()&&this._hasInvalidComponentMessagesShowing()||this._updateValueOption(e,null,t.validationContext)},_validateValue:function(e,i){var n,o,r=this._GetAllValidators(),s=[];if(this._IsRequired()){o=this._getImplicitRequiredValidator();try{o.validate(t.StringUtils.trim(e))}catch(t){this._addValidationError(t,s)}}if(!i)for(n=0;n<r.length;n++)if(o=r[n],"object"==typeof o)if(o.validate&&"function"==typeof o.validate)try{o.validate(e)}catch(t){this._addValidationError(t,s)}else t.Logger.level>t.Logger.LEVEL_WARN&&t.Logger.info("validator does not support the validate method.");if(s.length>0){var a=new Error;throw a._messages=s,a}}},!0),t.Components.setDefaultOptions({editableValue:{displayOptions:t.Components.createDynamicPropertyGetter(function(t){return{messages:t.containers.indexOf("ojDataGrid")>=0||t.containers.indexOf("ojTable")>=0?["notewindow"]:["inline"],converterHint:["placeholder","notewindow"],validatorHint:["notewindow"],title:["notewindow"]}})}}),t.InlineMessagingStrategy=function(t){this.Init(t)},t.ComponentMessaging.registerMessagingStrategy(t.ComponentMessaging._DISPLAY_TYPE.INLINE,t.InlineMessagingStrategy),t.Object.createSubclass(t.InlineMessagingStrategy,t.MessagingStrategy,"oj.InlineMessagingStrategy"),t.InlineMessagingStrategy.prototype.reactivate=function(e){t.InlineMessagingStrategy.superclass.reactivate.call(this,e),this._updateInlineMessage()},t.InlineMessagingStrategy.prototype.shouldUpdate=function(t){return!(!t||void 0===t.validityState)},t.InlineMessagingStrategy.prototype.update=function(){t.InlineMessagingStrategy.superclass.update.call(this),this._updateInlineMessage()},t.InlineMessagingStrategy.prototype.deactivate=function(){this._removeMessagingContentRootDom(),t.InlineMessagingStrategy.superclass.deactivate.call(this)},t.InlineMessagingStrategy.prototype._updateInlineMessage=function(){var t,e;t=this._buildInlineHtml(),t&&null==this.$messagingContentRoot&&this._createInlineMessage(),t?(e=this.$messagingContentRoot[0],e.innerHTML=t):this._removeMessagingContentRootDom()},t.InlineMessagingStrategy.prototype._createInlineMessage=function(){var t;this.$messagingContentRoot=e(this._getInlineContentHtml()),
this._addAriaDescribedBy(this.$messagingContentRoot),this._addAriaLive(this.$messagingContentRoot),t=this.GetComponent().widget(),t.append(this.$messagingContentRoot)},t.InlineMessagingStrategy.prototype._getInlineContentHtml=function(){return"<div class='oj-messaging-inline-container'></div>"},t.InlineMessagingStrategy.prototype._removeMessagingContentRootDom=function(){null!=this.$messagingContentRoot&&(this._removeAriaDescribedBy(this.$messagingContentRoot),this.$messagingContentRoot.remove(),this.$messagingContentRoot=null)},t.InlineMessagingStrategy.prototype._addAriaDescribedBy=function(i){var n,o,r,s;o=this.GetLauncher(),t.Assert.assertPrototype(o,e),t.Assert.assertPrototype(i,e),r=i.uniqueId().attr("id"),n=o.attr("aria-describedby"),s=n?n.split(/\s+/):[],s.push(r),n=e.trim(s.join(" ")),o.attr("aria-describedby",n)},t.InlineMessagingStrategy.prototype._addAriaLive=function(i){t.Assert.assertPrototype(i,e),i.attr("aria-live","polite")},t.InlineMessagingStrategy.prototype._removeAriaDescribedBy=function(i){var n,o,r,s,a;r=this.GetLauncher(),t.Assert.assertPrototype(r,e),t.Assert.assertPrototype(i,e),s=i.attr("id"),n=r.attr("aria-describedby"),a=n?n.split(/\s+/):[],o=e.inArray(s,a),o!==-1&&a.splice(o,1),n=e.trim(a.join(" ")),n?r.attr("aria-describedby",n):r.removeAttr("aria-describedby")},t.InlineMessagingStrategy.prototype._buildInlineHtml=function(){var t;return this.ShowMessages()?(t=this.GetComponent().document[0],this._buildMessagesHtml(t)):""},t.InlineMessagingStrategy.prototype._buildMessagesHtml=function(e){var i,n,o="",r=!0;return this.HasMessages()&&(n=this.GetMessages(),i=this.GetMaxSeverity(),o=t.PopupMessagingStrategyUtils.buildMessagesHtml(e,n,i,r)),o},function(){var e={properties:{disabled:{type:"boolean"},displayOptions:{type:"Object"},help:{type:"Object<string, string>"},messagesCustom:{type:"Array"},messagesHidden:{type:"Array"},messagesShown:{type:"Array"},title:{type:"string"},value:{type:"Object",writeback:!0}},methods:{getNodeBySubId:{},isValid:{},refresh:{},reset:{},showMessages:{}},extension:{_WIDGET_NAME:"editableValue"}};t.CustomElementBridge.registerMetadata("editableValue","baseComponent",e)}()}),define("ojs/ojbutton",["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(t,e){!function(){t.__registerWidget("oj.ojButton",e.oj.baseComponent,{defaultElement:"<button>",widgetEventPrefix:"oj",options:{chroming:"full",disabled:!1,display:"all",label:null,icons:{start:null,end:null},menu:null},_InitOptions:function(t,e){this._super(t,e),this._initButtonTypes(),"disabled"in e||this.option("disabled",!!this.element.prop("disabled"),{_context:{internalSet:!0}}),"label"in e||(this.keepDomLabel=!0,this.option("label","inputPush"===this.type?this.buttonElement.val():this.buttonElement.html(),{_context:{internalSet:!0}})),!this.options.menu||e.icons&&void 0!==e.icons.end||this.option("icons.end","oj-component-icon oj-button-menu-dropdown-icon",{_context:{writeback:!0,internalSet:!0}})},_ComponentCreate:function(){this._super(),this.menuEventNamespace=this.eventNamespace+"menu",this._initButtonTypes2(),this.hasTitle=!!this.rootElement.attr("title");var r=this,s=(this.options,this._isToggle),a=s?"":"oj-active";this.rootElement.addClass(o),h(this.rootElement,this.options.chroming);var l=function(){r.rootElement.removeClass(a),r.rootElement.removeClass("oj-hover"),r._toggleDefaultClasses()};if(this.buttonElement.bind("touchstart"+this.eventNamespace,function(){r._IsEffectivelyDisabled()||(r.rootElement.addClass(a),r._toggleDefaultClasses(),r.document.one("touchend",l))}).bind("touchend"+this.eventNamespace+" touchcancel"+this.eventNamespace,l).bind("mouseenter"+this.eventNamespace,function(){r._IsEffectivelyDisabled()||t.DomUtils.recentTouchEnd()||(this===i&&r.rootElement.addClass("oj-active"),r.rootElement.addClass("oj-hover").removeClass("oj-default oj-focus-only"))}).bind("mouseleave"+this.eventNamespace,function(){r.rootElement.removeClass("oj-hover"),r._IsEffectivelyDisabled()||(r.rootElement.removeClass(a),r._toggleDefaultClasses())}),this._disabledClickHandler=function(t){r._IsEffectivelyDisabled()&&(t.preventDefault(),t.stopImmediatePropagation())},this.buttonElement[0].addEventListener("click",this._disabledClickHandler,!0),this._focusable({element:this.rootElement,applyHighlight:!0,afterToggle:function(){r._toggleDefaultClasses()}}),s&&(this.element.bind("change"+this.eventNamespace,function(t){r._applyCheckedStateFromDom(!0);var e=r._getEnclosingContainerComponent("buttonset"),i=e&&e._getCheckedFromDom(e.$buttons);e&&void 0!==i&&e.option("checked",i,{_context:{writeback:!0,originalEvent:t,internalSet:!0}})}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){r._IsEffectivelyDisabled()||(n=this,r.document.one("mouseup",function(){n=null}))}).bind("mouseup"+this.eventNamespace,function(t){r._IsEffectivelyDisabled()||this===n&&r.element.focus()})),"checkbox"===this.type)this.buttonElement.bind("click"+this.eventNamespace,function(t){if(r._IsEffectivelyDisabled())return!1}),this.element.bind("keyup"+this.eventNamespace,function(t){t.keyCode===e.ui.keyCode.ENTER&&(r._IsEffectivelyDisabled()||r.element.click())});else if("radio"===this.type)this.buttonElement.bind("click"+this.eventNamespace,function(){if(r._IsEffectivelyDisabled())return!1}),this.element.bind("keyup"+this.eventNamespace,function(t){t.keyCode===e.ui.keyCode.ENTER&&(r.element[0].checked||r._IsEffectivelyDisabled()||(r.element[0].checked=!0,r.element.change(),r.element.click()))});else if(this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){return!r._IsEffectivelyDisabled()&&void(1!==e.which||t.DomUtils.recentTouchEnd()||(r.rootElement.addClass("oj-active").removeClass("oj-default oj-focus-only"),i=this,r.document.one("mouseup",function(){i=null})))}).bind("mouseup"+this.eventNamespace,function(){return!r._IsEffectivelyDisabled()&&(r.rootElement.removeClass("oj-active"),void r._toggleDefaultClasses())}).bind("keydown"+this.eventNamespace,function(t){if(r._IsEffectivelyDisabled())return t.keyCode===e.ui.keyCode.TAB||t.keyCode===e.ui.keyCode.LEFT||t.keyCode===e.ui.keyCode.RIGHT;var i=t.keyCode===e.ui.keyCode.SPACE,n="anchor"===r.type;n&&i&&t.preventDefault(),(i&&!n||t.keyCode===e.ui.keyCode.ENTER)&&r.rootElement.addClass("oj-active").removeClass("oj-default oj-focus-only")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){r.rootElement.removeClass("oj-active"),r._toggleDefaultClasses()}),"anchor"===this.type){var u=this.buttonElement.attr("tabindex");(null===u||isNaN(u))&&this.buttonElement.attr("tabindex","0")}this.options.disabled&&this._manageAnchorTabIndex(!1,!0),this._updateEffectivelyDisabled(),this._handleLabelAndIconsAtCreateTime(),this._setupMenuButton(null),this._toggleDefaultClasses()},_NotifyContextMenuGesture:function(t,e,i){this._OpenContextMenu(e,i,{position:{of:"keyboard"===i?this.rootElement:e}})},_initButtonTypes:function(){if(this.element.is("input[type=checkbox]"))this.type="checkbox",this._isToggle=!0;else if(this.element.is("input[type=radio]"))this.type="radio",this._isToggle=!0;else if(this.element.is("input[type=button],input[type=submit],input[type=reset]"))this.type="inputPush";else if(this.element.is("button"))this.type="button";else{if(!this.element.is("a"))throw new Error("JET Button not supported on this element type");this.type="anchor"}if(this._isToggle){var t="label[for='"+this.element.attr("id")+"']";this.buttonElement=this.element.siblings().filter(t)}else this.buttonElement=this.element},_initButtonTypes2:function(){if(this._isToggle){this.buttonElement.addClass("oj-button-label"),this.element.addClass("oj-button-input oj-helper-hidden-accessible").add(this.buttonElement).wrapAll("<span></span>"),this.rootElement=this.element.parent(),this.rootElement.addClass("oj-button-jqui oj-button-toggle");var t=this.element[0].checked;t&&this.rootElement.addClass("oj-selected").removeClass("oj-default oj-focus-only")}else this._IsCustomElement()?(this.rootElement=this.element.parent(),this.element.addClass("oj-button-button")):(this.rootElement=this.element,this.element.addClass("oj-button-jqui"))},widget:function(){return this.rootElement},_destroy:function(){this._removeMenuBehavior(this.options.menu),this.buttonElement[0].removeEventListener("click",this._disabledClickHandler,!0),this.element.removeClass("oj-helper-hidden-accessible").removeAttr("aria-labelledby").removeUniqueId(),this.options.disabled&&this._manageAnchorTabIndex(!0,!1);var e=this._isToggle;e||this.rootElement.removeClass(o+" oj-button-jqui "+r+" "+s+" "+a),this.buttonElement.html(this.buttonElement.find(".oj-button-text").html()),e?(this.buttonElement.removeClass("oj-button-label"),t.DomUtils.unwrap(this.element)):this.hasTitle||this.rootElement.removeAttr("title"),n===this.buttonElement[0]&&(n=null)},_NotifyDetached:function(){this._super(),this._toggleDefaultClasses()},__setAncestorComponentDisabled:function(t){this._super(t),this._updateEffectivelyDisabled()},_updateEffectivelyDisabled:function(){var t=this._IsEffectivelyDisabled();this.rootElement.toggleClass("oj-disabled",t),this.rootElement.toggleClass("oj-enabled",!t),"anchor"!==this.type?(this.element.prop("disabled",t),this.rootElement.removeAttr("aria-disabled")):(this.element.attr("aria-disabled",t),this._IsCustomElement()&&this.rootElement.removeAttr("aria-disabled")),t?(this.widget().removeClass("oj-active oj-default oj-focus-only oj-hover oj-focus oj-focus-highlight"),i=null,this._dismissMenu(this.options.menu)):this._toggleDefaultClasses()},_setOption:function(t,e,i){var n=this.options[t];switch(this._super(t,e,i),t){case"chroming":h(this.rootElement,e);break;case"disabled":this._manageAnchorTabIndex(n,e),this._updateEffectivelyDisabled();break;case"label":this._setLabelOption();break;case"display":"inputPush"!==this.type&&this._setDisplayOptionOnDom();break;case"icons":this._setIconsOption(!0);break;case"menu":this._setupMenuButton(n)}},refresh:function(){this._super(),this._ancestorDisabled&&!this._getEnclosingContainerElement("buttonset").length&&this.__setAncestorComponentDisabled(!1),h(this.rootElement,this.options.chroming)},_applyCheckedStateFromDom:function(t){"radio"===this.type?(t?u(this.element[0]):this.element).each(function(){var t=e(this).data("oj-ojButton");this.checked?t.rootElement.addClass("oj-selected").removeClass("oj-default oj-focus-only"):(t.rootElement.removeClass("oj-selected"),t._toggleDefaultClasses())}):"checkbox"===this.type&&(this.element[0].checked?this.rootElement.addClass("oj-selected").removeClass("oj-default oj-focus-only"):(this.rootElement.removeClass("oj-selected"),this._toggleDefaultClasses()))},_handleLabelAndIconsAtCreateTime:function(){if("inputPush"===this.type)this._setLabelOnDomOfSpanlessButton();else{var t=this._setLabelOnDomAtCreateTime(),e=this._setIconOnDom(!0),i=this._setIconOnDom(!1);this._setDisplayOptionOnDom(t,e,i)}},_setLabelOnDomAtCreateTime:function(){var t=this.buttonElement,i=e("<span class='oj-button-text'></span>",this.document[0]);if(this.keepDomLabel?i.append(t.contents()):(t.empty(),i.text(this.options.label)),"button"===this.type){var n=e("<div></div>").addClass("oj-button-label");n.append(i),this.element.append(n)}else t.append(i);return"button"!==this.type&&"anchor"!==this.type||this.element[0].hasAttribute("aria-label")||this.element[0].hasAttribute("aria-labelledby")||(i.uniqueId(),this.element.attr("aria-labelledby",i.attr("id"))),i},_setLabelOption:function(){if("inputPush"===this.type)this._setLabelOnDomOfSpanlessButton();else{var t=this.buttonElement.find(".oj-button-text");t.text(this.options.label),this._setDisplayOptionOnDom(t)}},_setLabelOnDomOfSpanlessButton:function(){this.options.label&&this.element.val(this.options.label)},_setIconsOption:function(){if("inputPush"!==this.type){var t=this._setIconOnDom(!0),e=this._setIconOnDom(!1);this._setDisplayOptionOnDom(void 0,t,e)}},_setIconOnDom:function(t){var i=this.buttonElement;if("button"===this.type&&(i=this.element.children("div.oj-button-label")),t)var n=".oj-button-icon.oj-start",o="oj-button-icon oj-start",r=this.options.icons.start,s="_lastStartIcon",a="prependTo";else n=".oj-button-icon.oj-end",o="oj-button-icon oj-end",r=this.options.icons.end,s="_lastEndIcon",a="appendTo";var l=i.find(n);if(r){if(l.length){var h=this[s];l.removeClass(h)}else l=e("<span></span>").addClass(o)[a](i);l.addClass(r)}else l.remove();return this[s]=r,!!r},_setDisplayOptionOnDom:function(t,i,n){void 0===t&&(t=this.buttonElement.find(".oj-button-text")),void 0===i&&(i=!!this.options.icons.start),void 0===n&&(n=!!this.options.icons.end);var o=i&&n,r=i||n,a="icons"===this.options.display;if(r&&a){if(t.addClass("oj-helper-hidden-accessible"),!this.hasTitle){var l=t.text();this.rootElement.attr("title",e.trim(l))}}else t.removeClass("oj-helper-hidden-accessible"),this.hasTitle||this.rootElement.removeAttr("title");var h=r?a?o?"oj-button-icons-only":"oj-button-icon-only":o?"oj-button-text-icons":i?"oj-button-text-icon-start":"oj-button-text-icon-end":"oj-button-text-only";this.rootElement.removeClass(s).addClass(h)},_manageAnchorTabIndex:function(t,e){if(!t!=!e&&"anchor"===this.type&&!this._getEnclosingContainerElement("buttonset").length&&!this._getEnclosingContainerElement("toolbar").length)if(e){var i=this.element.attr("tabindex");this._oldAnchorTabIndex=this._isInteger(Number(i))?i:null,this.element.attr("tabindex",-1)}else null==this._oldAnchorTabIndex?this.element.removeAttr("tabindex"):this.element.attr("tabindex",this._oldAnchorTabIndex)},_isInteger:function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},_selectorMap:{buttonset:".oj-buttonset",toolbar:".oj-toolbar"},_constructorMap:{buttonset:"ojButtonset",toolbar:"ojToolbar"},_getEnclosingContainerElement:function(t){return this.rootElement.closest(this._selectorMap[t])},_getEnclosingContainerComponent:function(e){var i=this._getEnclosingContainerElement(e)[0],n=t.Components.getWidgetConstructor(i,this._constructorMap[e]);return n&&n("instance")},_setupMenuButton:function(t){if(this.options.menu&&this.element.is("input"))throw new Error("Menu Button functionality is not supported on input elements.");if(this._removeMenuBehavior(t),this.options.menu){var i=this;this.element.attr("aria-haspopup",!0).on("keydown"+this.menuEventNamespace,function(t){if(t.which===e.ui.keyCode.DOWN)return i._showMenu(t,"firstItem"),t.preventDefault(),!0;if(t.which===e.ui.keyCode.ESCAPE){var n=!i.rootElement.hasClass("oj-selected");return i._dismissMenu(i.options.menu,t),n}return!0}).on("click"+this.menuEventNamespace,function(t){var e=i._getMenu();return e.__spaceEnterDownInMenu||i._showMenu(t,"firstItem"),e.__spaceEnterDownInMenu=!1,t.preventDefault(),!0})}},_removeMenuBehavior:function(t){this.element.removeAttr("aria-haspopup").off(this.menuEventNamespace),this._dismissMenu(t),e(t).off(this.menuEventNamespace),this._menuListenerSet=!1},_getMenu:function(){var t=this._getMenuOnly(this.options.menu);if(!t)throw new Error('JET Button: "menu" option specified, but does not reference a valid JET Menu.');if(!this._menuListenerSet){var e=this;t.widget().on("ojclose"+this.menuEventNamespace,function(t,i){e._menuDismissHandler(t)}),this._menuListenerSet=!0}return t},_getMenuOnly:function(i){var n=t.Components.getWidgetConstructor(e(i)[0],"ojMenu");return n&&n("instance")},_showMenu:function(t,e){if(!this._IsEffectivelyDisabled()){var i=this._getMenu(),n=i.widget();i.open(t,{launcher:this.element,initialFocus:e}),n.is(":visible")&&(this._menuVisible=!0,n.attr("aria-label")||n.attr("aria-labelledby")||(this.element.uniqueId(),this._setAriaLabelledBy=!0,n.attr("aria-labelledby",this.element.attr("id"))),this.rootElement.addClass("oj-selected").removeClass("oj-default oj-focus-only"))}},_dismissMenu:function(t,e){if(this._menuVisible){var i=this._getMenuOnly(t);i&&(i.__collapseAll(e,!0),i.__dismiss(e))}},_menuDismissHandler:function(t){this._setAriaLabelledBy&&(e(this.options.menu).removeAttr("aria-labelledby"),this._setAriaLabelledBy=!1),this.rootElement.removeClass("oj-selected"),this._toggleDefaultClasses(),this._menuVisible=!1},_toggleDefaultClasses:function(){var t,e,i=this.rootElement.is(".oj-hover, .oj-active, .oj-selected, .oj-disabled");if(i)t=!1,e=!1;else{var n=this.rootElement.is(".oj-focus");t=!n,e=n}this.rootElement.toggleClass("oj-default",t),this.rootElement.toggleClass("oj-focus-only",e)}}),t.__registerWidget("oj.ojButtonset",e.oj.baseComponent,{_items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a",widgetEventPrefix:"oj",options:{checked:null,chroming:"full",focusManagement:"oneTabstop"},_setCheckedOnDom:function(t,i){var n,o,r=e.type(t);if("null"!==r&&"array"!==r||(o=i.filter("input[type=checkbox]").length===i.length),o&&"null"===r)throw new Error("Invalid 'checked' value set on JET Buttonset: "+t);if("string"===r||"null"===r){var s=i[0].name,a=(s||i.length<=1)&&i.filter("input[type=radio][name="+s+"]").length===i.length&&(null===t||i.filter("[value="+t+"]").length);a&&i.each(function(){this.checked=this.value===t}),n=a||null===t}else if("array"===r){var l;n=o&&t.concat().sort().every(function(t,e,n){var o=t!==l&&i.filter("[value="+t+"]").length;return l=t,o}),n&&i.each(function(){this.checked=t.indexOf(this.value)>-1})}else n=!1;if(!n)throw new Error("Invalid 'checked' value set on JET Buttonset: "+t)},_getCheckedFromDom:function(t){var e=void 0,i=null,n=null;return t.each(function(t){var o=this.tagName.toLowerCase();if("input"!==o)return e=void 0,!1;var r,s,a=this.type.toLowerCase();if("radio"===a)r=!0,s=this.name.toLowerCase();else{if("checkbox"!==a)return e=void 0,!1;r=!1,s=null}return void 0!==e&&(r!==i||s!==n||i&&!n)?(e=void 0,!1):void(void 0===e?(e=r?this.checked?this.value:null:this.checked?[this.value]:[],i=r,n=s):this.checked&&(i?e=this.value:e.push(this.value)))}),e},_CompareOptionValues:function(t,i,n){return"checked"===t?i===n||"array"===e.type(i)&&"array"===e.type(n)&&this._compareArraysAsSets(i,n):this._superApply(arguments)},_compareArraysAsSets:function(t,e){return!t.some(function(t){return e.indexOf(t)<0})&&!e.some(function(e){return t.indexOf(e)<0})},_InitOptions:function(t,i){if(this._super(t,i),this.$buttons=this.element.find(this._items),!("checked"in i)){this.initCheckedFromDom=!0;var n=this._getCheckedFromDom(this.$buttons);"array"===e.type(n)&&(this.options.checked=[]),void 0!==n&&this.option("checked",n,{_context:{internalSet:!0}})}},_ComponentCreate:function(){this._super(),this.element.attr(t.Components._OJ_CONTAINER_ATTR,this.widgetName).addClass("oj-buttonset oj-component"),this._setRole(this.options.focusManagement),this._setup(!0)},_NotifyContextMenuGesture:function(t,e,i){var n=this.element.find(":oj-button[tabindex=0]");this._OpenContextMenu(e,i,{launcher:n,position:{of:"keyboard"===i?n.ojButton("widget"):e}})},_propagateDisabled:function(t){t=!!t,this.$buttons.each(function(){e(this).data("oj-ojButton").__setAncestorComponentDisabled(t)})},_setRole:function(t){"oneTabstop"===t?this.element.attr("role","toolbar"):this.element.removeAttr("role")},_setOption:function(t,i,n){this._superApply(arguments),"disabled"===t?this._propagateDisabled(i):"checked"===t?(this._setCheckedOnDom(i,this.$buttons),this.$buttons.each(function(){e(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)})):"focusManagement"===t?this._setRole(i):"chroming"===t&&(h(this.element,i),this.$buttons.ojButton("refresh"))},refresh:function(){this._super(),this._setup(!1)},_setup:function(t){var i=this;this.isRtl="rtl"===this._GetReadingDirection(),h(this.element,this.options.chroming),t?this.initCheckedFromDom||this._setCheckedOnDom(this.options.checked,this.$buttons):this.$buttons=this.element.find(this._items),this.element.toggleClass("oj-buttonset-multi",this.$buttons.length>1),this.$buttons.filter(":oj-button").ojButton("refresh").each(function(){e(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)}).end().not(":oj-button").ojButton().end().map(function(){return e(this).ojButton("widget")[0]}).removeClass("oj-buttonset-first oj-buttonset-last").filter(":first").addClass("oj-buttonset-first").end().filter(":last").addClass("oj-buttonset-last").end().end(),this._propagateDisabled(this.options.disabled),"oneTabstop"===this.options.focusManagement&&(this.$buttons.unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(t){i._handleKeyDown(t,e(this))}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(t){e(this).data("oj-ojButton")._IsEffectivelyDisabled()||i._setTabStop(e(this))}).unbind("focus"+this.eventNamespace).bind("focus"+this.eventNamespace,function(t){i._setTabStop(e(this))}),this.$enabledButtons=this.$buttons.filter(function(t){return!e(this).data("oj-ojButton")._IsEffectivelyDisabled()}),this._initTabindexes(t))},_initTabindexes:function(t){var i=e(this._lastTabStop);this._lastTabStop=void 0,this.$buttons.attr("tabindex","-1");var n;n=t||!i.is(this.$enabledButtons)?this.$enabledButtons.first():i,this._setTabStop(n)},_mapToTabbable:function(t){var e=this.$enabledButtons;return t.map(function(t,i){if("radio"!=i.type||i.checked||""==i.name)return i;var n=u(i,e).filter(":checked");return n.length?n[0]:i})},_setTabStop:function(t){t=this._mapToTabbable(t);var i=t[0],n=this._lastTabStop;i!==n&&(e(n).attr("tabindex","-1"),t.attr("tabindex","0"),this._lastTabStop=i)},_handleKeyDown:function(t,i){switch(t.which){case e.ui.keyCode.UP:case e.ui.keyCode.DOWN:if("radio"!=i.attr("type"))break;case e.ui.keyCode.LEFT:case e.ui.keyCode.RIGHT:t.preventDefault();var n=this.$enabledButtons,o=n.length;if(o<2)break;var r=n.index(i),s=t.which==e.ui.keyCode.DOWN||t.which==e.ui.keyCode.RIGHT^this.isRtl?1:-1,a=(r+s+o)%o;n.eq(a).focus()}},_destroy:function(){this.element.removeClass("oj-buttonset oj-component "+a).removeAttr(t.Components._OJ_CONTAINER_ATTR).removeAttr("role"),"oneTabstop"===this.options.focusManagement&&this.$buttons.attr("tabindex","0"),this.$buttons.map(function(){return e(this).ojButton("widget")[0]}).removeClass("oj-buttonset-first oj-buttonset-last").end().ojButton("destroy")}});var i,n,o="oj-button oj-component oj-enabled oj-default",r="oj-hover oj-active oj-selected",s="oj-button-icons-only oj-button-icon-only oj-button-text-icons oj-button-text-icon-start oj-button-text-icon-end oj-button-text-only",a="oj-button-full-chrome oj-button-half-chrome oj-button-outlined-chrome",l={full:"oj-button-full-chrome",half:"oj-button-half-chrome",outlined:"oj-button-outlined-chrome"},h=function(t,e){t.removeClass(a).addClass(l[e])},u=function(t,i){var n,o=t.name,r=t.form;if(o){o=o.replace(/'/g,"\\'");var s=":radio[name='"+o+"']:oj-button";n=i?i.filter(s):r?e(r).find(s):e(s,t.ownerDocument).filter(function(){return!this.form})}else n=(i?i.filter(t):e(t)).filter(":oj-button");return n},d=function(e,i,n){for(var o=0;o<n.length;++o){var r=n[o];if(i.indexOf(r)>=0)for(;;e=e.parentNode){var s=t.Components.getWidgetConstructor(e,r);if(s)return s}}return null},c={button:["ojButtonset","ojToolbar"],buttonset:["ojToolbar"]},p=function(e,i,n){var o=d(i,n,c[e]);return o?o("option","chroming"):(t.ThemeUtils.parseJSONFromFontFamily("oj-"+e+"-option-defaults")||{}).chroming};t.Components.setDefaultOptions({ojButton:{chroming:t.Components.createDynamicPropertyGetter(function(t){return p("button",t.element,t.containers)})},ojButtonset:{chroming:t.Components.createDynamicPropertyGetter(function(t){return p("buttonset",t.element,t.containers)})}})}(),function(){var e={properties:{chroming:{type:"string",enumValues:["full","half","outlined"]},disabled:{type:"boolean"},display:{type:"string",enumValues:["all","icons"]},href:{type:"string"},icons:{type:"Object",properties:{end:{type:"string"},start:{type:"string"}}},label:{type:"string"}},extension:{_WIDGET_NAME:"ojButton",_TRANSFER_ATTRS:["href"]}};t.CustomElementBridge.registerMetadata("oj-button","baseComponent",e),t.CustomElementBridge.register("oj-button",{metadata:t.CustomElementBridge.getMetadata("oj-button"),innerDomFunction:function(t){return t.getAttribute("href")?"a":"button"}})}()}),define("ojs/ojinputnumber",["ojs/ojcore","jquery","ojs/ojeditablevalue","ojs/ojvalidation-number","ojs/ojbutton"],function(t,e){!function(){t.__registerWidget("oj.ojInputNumber",e.oj.editableValue,{version:"1.0.0",defaultElement:"<input>",widgetEventPrefix:"oj",options:{converter:t.Validation.converterFactory(t.ConverterFactory.CONVERTER_TYPE_NUMBER).createConverter(),max:null,min:null,placeholder:void 0,rawValue:void 0,readOnly:!1,required:!1,step:1,validators:void 0,value:null},getNodeBySubId:function(t){var e,i=this._superApply(arguments);return i||(e=t.subId,"oj-inputnumber-up"===e&&(i=this.widget().find(".oj-inputnumber-up")[0]),"oj-inputnumber-down"===e&&(i=this.widget().find(".oj-inputnumber-down")[0]),"oj-inputnumber-input"===e&&(i=this.widget().find(".oj-inputnumber-input")[0])),i||null},getSubIdByNode:function(t){var e=null;return null!=t&&(t===this.widget().find(".oj-inputnumber-up")[0]?e={subId:"oj-inputnumber-up"}:t===this.widget().find(".oj-inputnumber-down")[0]?e={subId:"oj-inputnumber-down"}:t===this.widget().find(".oj-inputnumber-input")[0]&&(e={subId:"oj-inputnumber-input"})),e||this._superApply(arguments)},refresh:function(){this._super(),this._setup()},stepDown:function(t){this._step(t,!1)},stepUp:function(t){this._step(t,!0)},widget:function(){return this.uiInputNumber},_InitOptions:function(e,i){var n=this.options,o=this;this._superApply(arguments);var r=[{attribute:"disabled",validateOption:!0},{attribute:"placeholder"},{attribute:"value"},{attribute:"readonly",option:"readOnly",validateOption:!0},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"},{attribute:"min"},{attribute:"max"},{attribute:"step"}];if(t.EditableValueUtils.initializeOptionsFromDom(r,i,this,function(t){for(var e=["value","step","min","max"],i=0;i<e.length;i++){var r=e[i],s=r in t?t[r]:n[r];null!=s&&("step"===r?t[r]=o._parseStep(s):t[r]=o._parse(r,s))}}),void 0===n.value)throw new Error("ojInputNumber has no value");if(this.initialValue=n.value,null!=n.min&&null!=n.max&&n.max<n.min)throw new Error("ojInputNumber's max must not be less than min")},_ComponentCreate:function(){this._super(),this._draw(),this._inputNumberDefaultValidators={},this._setup(),this._on(this._events),this._focusable(this.uiInputNumber)},_AfterSetOption:function(e,i,n){switch(this._superApply(arguments),e){case"min":case"max":this._Refresh(e,this.options[e]);break;case"readOnly":this._AfterSetOptionDisabledReadOnly(e,t.EditableValueUtils.readOnlyOptionOptions);break;case"required":this._AfterSetOptionRequired(e);break;case"validators":this._AfterSetOptionValidators(e);break;case"converter":this._AfterSetOptionConverter(e)}},_CanSetValue:function(){var t,e=this._super();return!!e&&(t=this.options.readOnly||!1,!t)},_AfterSetOptionValue:function(t,e){this._superApply(arguments);var i,n,o=e?e._context:null;o&&(i=!!o.originalEvent,n=o.doNotClearMessages||!1),i||n||(this.initialValue=this.options.value)},_IsRequired:function(){return this.options.required},_AfterSetOptionRequired:t.EditableValueUtils._AfterSetOptionRequired,_AfterSetOptionValidators:t.EditableValueUtils._AfterSetOptionValidators,_AfterSetOptionConverter:t.EditableValueUtils._AfterSetOptionConverter,_ResetConverter:t.EditableValueUtils._ResetConverter,_GetConverter:function(){return this.options.converter?this._getConverter():e.oj.ojInputNumber.prototype.options.converter},_GetNormalizedValidatorsFromOption:t.EditableValueUtils._GetNormalizedValidatorsFromOption,_AriaRequiredUnsupported:function(){return!1},_setOption:function(t,e,i){var n;n="value"===t||"max"===t||"min"===t?this._parse(t,e):"step"===t?this._parseStep(e):e,this._super(t,n,i),"max"!==t&&"min"!==t||(this._createRangeValidator(),this._AfterSetOptionValidators()),"disabled"===t&&this.element.prop("disabled",!!e),"readOnly"===t&&(this.element.prop("readonly",!!e),this._refreshStateTheming("readOnly",this.options.readOnly),this._refreshRoleSpinbutton("readOnly",this.options.readOnly))},_destroy:function(){var e=this._super();return this.buttonSet.ojButtonset("destroy"),this.buttonSet.remove(),this.upButton=null,this.downButton=null,this.buttonSet=null,this.initialValue=null,t.DomUtils.unwrap(this.element,this.uiInputNumber),clearTimeout(this.timer),e},validate:t.EditableValueUtils.validate,_Refresh:function(t,e,i){var n;switch(this._superApply(arguments),t){case"disabled":case"max":case"min":case"value":n=this._getConvertedDisplayValue(),this._updateButtons(n);case"max":case"min":case"value":this._refreshAriaMinMaxValue(n);break;case"converter":n=this._getConvertedDisplayValue(),this._refreshAriaText(n);break;case"required":this._refreshRequired(e)}},_refreshRequired:t.EditableValueUtils._refreshRequired,_GetImplicitValidators:function(){var t=this._superApply(arguments);return null==this.options.min&&null==this.options.max||this._createRangeValidator(),e.extend(this._inputNumberDefaultValidators,t)},_GetDefaultStyleClass:function(){return"oj-inputnumber"},_events:{input:function(t){this._SetRawValue(this.element.val(),t)},keydown:function(t){var i=e.ui.keyCode;t.keyCode===i.ENTER?(this._blurEnterSetValue(t),t.preventDefault()):this._start()&&this._keydown(t)&&t.preventDefault()},keyup:function(t){this._stop(t)},blur:function(t){this._blurEnterSetValue(t)},"touchstart .oj-inputnumber-button.oj-enabled":function(t){this._start(),this._repeat(null,e(t.currentTarget).hasClass("oj-inputnumber-up")?1:-1,t)},"touchend .oj-inputnumber-button":function(t){this._stop(t)},"touchcancel .oj-inputnumber-button":function(t){this._stop(t)},"mousedown .oj-inputnumber-button.oj-enabled":function(t){this._isRealMouseEvent(t)&&(this._start(),this._repeat(null,e(t.currentTarget).hasClass("oj-inputnumber-up")?1:-1,t))},"mouseup .oj-inputnumber-button":function(t){this._isRealMouseEvent(t)&&this._stop(t)},"mouseenter .oj-inputnumber-button.oj-enabled":function(t){e(t.currentTarget).hasClass("oj-active")&&this._isRealMouseEvent(t)&&(this._start(),this._repeat(null,e(t.currentTarget).hasClass("oj-inputnumber-up")?1:-1,t))},"mouseleave .oj-inputnumber-button":function(t){this._isRealMouseEvent(t)&&this._stop(t)}},_BUNDLE_KEY:{_TOOLTIP_DECREMENT:"tooltipDecrement",_TOOLTIP_INCREMENT:"tooltipIncrement"},_OPTION_TO_CSS_MAPPING:{readOnly:"oj-read-only"},_setup:function(){var t=this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_INCREMENT),e=this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_DECREMENT),i=this._getConvertedDisplayValue();this.upButton.ojButton({label:t}),this.downButton.ojButton({label:e}),this._refreshAriaMinMaxValue(i),this._updateButtons(i),"boolean"==typeof this.options.readOnly&&this.element.prop("readonly",this.options.readOnly),this._refreshStateTheming("readOnly",this.options.readOnly),this._refreshRoleSpinbutton("readOnly",this.options.readOnly),this._refreshRequired(this.options.required)},_markInternalComponents:function(){this.upButton.attr("data-oj-internal",""),this.downButton.attr("data-oj-internal",""),this.buttonSet.attr("data-oj-internal","")},_createOjButtonset:function(){var t=this.uiInputNumber.find(".oj-inputnumber-up"),i=this.uiInputNumber.find(".oj-inputnumber-down"),n=t[0].parentNode;this.upButton=t.ojButton({display:"icons",icons:{start:"oj-component-icon oj-inputnumber-up-icon"}}),this.downButton=i.ojButton({display:"icons",icons:{start:"oj-component-icon oj-inputnumber-down-icon"}}),this.buttonSet=e(n).ojButtonset({focusManagement:"none"}),this._markInternalComponents()},_draw:function(){var t=this.element;this.uiInputNumber=t.addClass("oj-inputnumber-input").wrap(this._uiInputNumberHtml()).parent().append(this._buttonHtml()),this.OuterWrapper?(this.uiInputNumber=e(this.OuterWrapper).append(this.uiInputNumber),this.uiInputNumber.addClass("oj-inputnumber oj-component")):this.uiInputNumber=this.uiInputNumber.wrap("<div class='oj-inputnumber oj-component'></div>").parent(),this.saveType=t.prop("type"),t.attr("type","text"),this.uiInputNumber.find(".oj-inputnumber-button").attr("tabIndex","-1"),
this._createOjButtonset()},_keydown:function(t){var i=e.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0}return!1},_uiInputNumberHtml:function(){return"<span class='oj-inputnumber-wrapper'></span>"},_buttonHtml:function(){return"<div class='oj-buttonset-width-auto'><button type='button' class='oj-inputnumber-button oj-inputnumber-down'></button><button type='button' class='oj-inputnumber-button oj-inputnumber-up'></button></div>"},_start:function(){return this.spinning=!0,!0},_repeat:function(t,e,i){var n=!1;e>0?this.upButton.hasClass("oj-disabled")&&(n=!0):this.downButton.hasClass("oj-disabled")&&(n=!0),t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){n||this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this._getConvertedDisplayValue(),n=this.options,o=n.min,r=n.max,s=n.step,a=this.initialValue,l=this._precision(o,s,a);i=this._adjustValue(i,t,o,r,s,l,a),this._CanSetValue()&&(this.element.val(i),this._refreshAriaMinMaxValue(i),this._updateButtons(i),this._SetRawValue(i,e)),this._SetValue(i,e,{validationMode:this._VALIDATION_MODE.VALIDATORS_ONLY})},_precision:function(t,e,i){var n=this._precisionOf(e);return null!=t&&(n=Math.max(n,this._precisionOf(t))),null!=i&&(n=Math.max(n,this._precisionOf(i))),n},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return i===-1?0:e.length-i-1},_adjustValue:function(e,i,n,o,r,s,a){var l,h,u,d;if(s>0)return d=this._adjustValueForFractions(e,i,n,o,r,s,a);h=null!=n?n:a,null==h&&(h=0);try{e=parseFloat(e.toFixed(s))}catch(i){i instanceof TypeError&&(t.Logger.warn("inputNumber's value after conversion is not a number. \n                      The converter must convert the value to a Number. coercing using +"),e=+e)}u=e-h;var c=Math.round(u/r)*r;c=parseFloat(c.toFixed(s));var p=c===u;if(p?l=e+i:(u=i<0?Math.ceil(u/r)*r:Math.floor(u/r)*r,l=h+u+i),l=parseFloat(l.toFixed(s)),null!=n&&l<n)return n;if(null!=o&&l>o){var _=Math.floor((o-h)/r)*r+h;return _=parseFloat(_.toFixed(s))}return l},_adjustValueForFractions:function(e,i,n,o,r,s,a){t.Assert.assert(s>0);var l=Math.pow(10,s),h=null!=n?n*l:n,u=null!=o?o*l:o,d=null!=r?r*l:r,c=this._adjustValue(e*l,i*l,h,u,d,0,a*l);return c/l},_stop:function(t){this.spinning&&(clearTimeout(this.timer),this.spinning=!1)},_isRealMouseEvent:function(e){return!t.DomUtils.recentTouchEnd()},_updateButtons:function(t){var e,i,n=this.options,o=n.max,r=n.min,s=this.downButton,a=this.upButton,l=null!=o,h=null!=r;this.uiInputNumber&&(s||a)&&(e=s.hasClass("oj-disabled"),i=a.hasClass("oj-disabled"),n.disabled||void 0===t||l&&h&&o===r&&t===o?(e||s.ojButton("disable"),i||a.ojButton("disable")):l&&t>=o?(e&&s.ojButton("enable"),i||a.ojButton("disable")):h&&t<=r?(e||s.ojButton("disable"),i&&a.ojButton("enable")):(e&&s.ojButton("enable"),i&&a.ojButton("enable")))},_getConverter:t.EditableValueUtils._GetConverter,_getConvertedDisplayValue:function(){var t,e;try{e=this._GetDisplayValue()||0,t=this._parseValue(e)}catch(e){t=void 0}return t},_blurEnterSetValue:function(t){var e,i=this.element.val();this._stop(),e=this._getConvertedDisplayValue(),this._refreshAriaMinMaxValue(e),this._updateButtons(e),this._SetValue(i,t)},_createRangeValidator:function(){var e,i,n,o,r,s,a,l,h,u,d=this.options,c=d.min,p=d.max,_=null!=c?c:void 0,g=null!=p?p:void 0,m=d.translations,f=m?m.numberRange||{}:{},y=f.hint||{},v=f.messageDetail||{},S=f.messageSummary||{};null!==y&&(e=y.min||null,i=y.max||null,n=y.inRange||null,o=y.exact||null),null!==v&&(r=v.rangeOverflow||null,s=v.rangeUnderflow||null,a=v.exact||null),null!==S&&(l=S.rangeOverflow||null,h=S.rangeUnderflow||null),u={min:_,max:g,hint:{min:e||null,max:i||null,inRange:n||null,exact:o||null},messageDetail:{rangeOverflow:r||null,rangeUnderflow:s||null,exact:a||null},messageSummary:{rangeOverflow:l||null,rangeUnderflow:h||null},converter:this._GetConverter()},this._inputNumberDefaultValidators[t.ValidatorFactory.VALIDATOR_TYPE_NUMBERRANGE]=t.Validation.validatorFactory(t.ValidatorFactory.VALIDATOR_TYPE_NUMBERRANGE).createValidator(u)},_parse:function(t,e){var i;if(i=null!==e?+e:e,isNaN(i))throw new Error("ojInputNumber's "+t+" option is not a number");return i},_parseStep:function(t){var e,i=1;if(null===t)return i;if(e=this._parse("step",t),e<=0)throw new Error("Invalid step for ojInputNumber; step must be > 0");return(null===e||e<=0)&&(e=i),e},_refreshStateTheming:function(t,e){Object.keys(this._OPTION_TO_CSS_MAPPING).indexOf(t)!=-1&&this.widget().toggleClass(this._OPTION_TO_CSS_MAPPING[t],!!e)},_refreshRoleSpinbutton:function(t,e){e=!!e,e?this.element.removeAttr("role"):this.element.attr("role","spinbutton")},_refreshAriaMinMaxValue:function(t){var e=this.element;e.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":t}),this._refreshAriaText(t)},_refreshAriaText:function(t){var e=this.element,i=e.val();this._CompareOptionValues("value",""+t,i)||e.attr({"aria-valuetext":i})},_step:function(t,e){this._start(),e?this._spin((t||1)*this.options.step):this._spin((t||1)*-this.options.step),this._stop()}})}(),function(){var e={properties:{converter:{type:"Object"},max:{type:"number"},min:{type:"number"},placeholder:{type:"string"},rawValue:{type:"string",writeback:!0,readOnly:!0},readOnly:{type:"boolean"},required:{type:"boolean"},step:{type:"number"},validators:{type:"Array"},value:{type:"number",writeback:!0}},methods:{destroy:{},refresh:{},stepDown:{},stepUp:{},widget:{},validate:{}},extension:{_INNER_ELEM:"input",_WIDGET_NAME:"ojInputNumber"}};t.CustomElementBridge.registerMetadata("oj-input-number","editableValue",e),t.CustomElementBridge.register("oj-input-number",{metadata:t.CustomElementBridge.getMetadata("oj-input-number")})}()}),define("ojs/ojmenu",["ojs/ojcore","jquery","hammerjs","ojs/ojjquery-hammer","promise","ojs/ojcomponentcore","ojs/ojpopupcore"],function(t,e,i){!function(){t.__registerWidget("oj.ojMenu",e.oj.baseComponent,{defaultElement:"<ul>",delay:300,role:"menu",widgetEventPrefix:"oj",options:{menuSelector:"ul",openOptions:{display:"auto",initialFocus:"menu",launcher:null,position:{my:"start top",at:"start bottom",collision:"flipfit"}},submenuOpenOptions:{position:{my:"start top",at:"end top",collision:"flipfit"}},beforeOpen:null,close:null,open:null,select:null},_ComponentCreate:function(){this._super();var t=this;if(this._focusForTesting=this._focus,this._nextForTesting=this._next,this._selectForTesting=this._select,this.activeMenu=this.element,this.mouseHandled=!1,l&&"ul"!==this.element[0].tagName.toLowerCase())throw new Error("Cancel item supported for <ul> menus only.");this._setupSwipeBehavior(),this.element.uniqueId().addClass("oj-menu oj-component").hide().attr({role:this.role,tabIndex:"0"}),this._on(!0,{"mousedown .oj-menu-item":function(t){this.options.disabled&&t.preventDefault()},click:function(t){this.options.disabled&&t.preventDefault()},keydown:function(t){this.options.disabled&&(t.keyCode!==e.ui.keyCode.ESCAPE&&t.keyCode!==e.ui.keyCode.TAB||(t.keyCode===e.ui.keyCode.TAB&&t.preventDefault(),this._launcher&&this._focusLauncherAndDismiss(t)))}}),this.options.disabled&&this.element.addClass("oj-disabled").attr("aria-disabled","true");var i=function(t){if(!this.focusHandled){this.focusHandled=!0;var i=e(t.currentTarget);try{this._focusIsFromPointer=!0,this._focus(t,i)}finally{this._focusIsFromPointer=!1}}}.bind(this),n=function(t){t&&t.target&&!e(t.target).is(":visible")||this._collapse(t,"eventSubtree")}.bind(this);this._on({"mousedown .oj-menu-item > a":function(t){t.preventDefault()},"click .oj-disabled > a":function(t){t.preventDefault()},click:function(t){this.mouseHandled=!1},touchstart:function(t){this.focusHandled=!1},mouseover:function(t){this.focusHandled=!1},"click .oj-menu-item:has(a)":function(t){var i=e(t.target).closest(".oj-menu-item");if(!this.mouseHandled&&i.not(".oj-disabled").length){if(this.mouseHandled=!0,t.preventDefault(),this.active&&this.active.closest(i).length&&this.active.get(0)!=i.get(0))return;i.has(".oj-menu").length?this._expand(t):(this._select(t),this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".oj-menu").length&&this._clearTimer&&this._clearTimer()))}},"mouseenter .oj-menu-item":i,"touchstart .oj-menu-item":i,mouseleave:n,"mouseleave .oj-menu":n,focus:function(t,e){if(!e){var i=this.active||this.element.children(".oj-menu-item").eq(0);this._focus(t,i)}},keydown:this._keydown,keyup:function(t){t.keyCode!=e.ui.keyCode.ENTER&&t.keyCode!=e.ui.keyCode.SPACE||(this.__spaceEnterDownInMenu=!1)}}),this._focusable({applyHighlight:!s,recentPointer:function(){return t._focusIsFromPointer},setupHandlers:function(e,i){t._focusInHandler=e,t._focusOutHandler=i}}),this._usingCallback=e.proxy(this._usingHandler,this),this._setup()},__contextMenuPressHoldJustEnded:function(t){return arguments.length?void(o=t):o},_clickAwayHandler:function(t){if("focus"===t.type||"mousedown"===t.type||"touchstart"===t.type||93==t.which||121==t.which&&t.shiftKey||93==t.keyCode){if("mousedown"===t.type&&o)return;var i=n.slice(0,n.length);e.each(i,function(i,n){!e(t.target).closest(n.element).length&&("keydown"===t.type||"mousedown"===t.type&&3===t.which||!e(t.target).closest(n._launcher).length||n._launcherClickShouldDismiss&&("mousedown"===t.type&&3!==t.which||"touchstart"===t.type))&&(n._collapse(t,"eventSubtree"),n._launcher&&n.__dismiss(t))})}},_setOption:function(t,e){switch(this._superApply(arguments),t){case"translations.labelCancel":case"translations":this._cancelAnchor&&this._cancelAnchor.text(this.options.translations.labelCancel)}},_destroy:function(){this.element.is(":visible")&&this.__dismiss(),this._clearTimer&&this._clearTimer(),delete this._clearTimer,this.element.removeAttr("aria-activedescendant").removeClass("oj-component").find(".oj-menu").addBack().removeClass("oj-menu oj-menu-submenu oj-menu-icons oj-menu-text-only").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".oj-menu-item").removeClass("oj-menu-item").removeAttr("role").children("a").removeAttr("aria-disabled").removeUniqueId().removeClass("oj-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("oj-ojMenu-submenu-icon")&&t.remove()}),this.element.find("a").removeAttr("aria-expanded"),this.element.find(".oj-menu-divider").removeClass("oj-menu-divider").removeAttr("role"),n.indexOf(this)>=0&&n.splice(n.indexOf(this),1),delete this._popupServiceEvents,delete this._usingCallback;var t=this._clearCloseDelayTimer;delete this._clearCloseDelayTimer,t&&t(),this._cancelDom&&this._cancelDom.remove(),this.element.ojHammer("destroy"),this._super()},_keydown:function(t){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,o,r,s,a,l=!0;switch(t.keyCode){case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this._previous(t);break;case e.ui.keyCode.DOWN:this._next(t);break;case e.ui.keyCode.LEFT:case e.ui.keyCode.RIGHT:var h=t.keyCode===e.ui.keyCode.RIGHT^this.isRtl;h?this.active&&!this.active.is(".oj-disabled")&&this._expand(t):this._collapse(t,"active");break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._handleEnterSpace(t),this.__spaceEnterDownInMenu=!0;var u=this,d=100;setTimeout(function(){u.__spaceEnterDownInMenu=!1},d);break;case e.ui.keyCode.TAB:t.preventDefault(),this._launcher&&this._focusLauncherAndDismiss(t);break;case e.ui.keyCode.ESCAPE:if(this._launcher){var c=this.element.attr("aria-activedescendant"),p="#"+this.element.attr("id")+">*>a",_=c&&!e("#"+c).is(p);_?this._collapse(t,"active"):this._focusLauncherAndDismiss(t)}else this._collapse(t,"active");break;default:l=!1,o=this.previousFilter||"",r=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),r===o?s=!0:r=o+r,a=new RegExp("^"+i(r),"i"),n=this.activeMenu.children(".oj-menu-item").filter(function(){return a.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".oj-menu-item"):n,n.length||(r=String.fromCharCode(t.keyCode),a=new RegExp("^"+i(r),"i"),n=this.activeMenu.children(".oj-menu-item").filter(function(){return a.test(e(this).children("a").text())})),n.length?(this._focus(t,n),n.length>1?(this.previousFilter=r,this.filterTimer=setTimeout(function(){delete this.previousFilter}.bind(this),1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_handleEnterSpace:function(t){this.active&&!this.active.is(".oj-disabled")&&(this.active.children("a[aria-haspopup='true']").length?this._expand(t):this._select(t))},refresh:function(){this._super(),this._setup();var t=this.element;if(t.is(":visible")){var i=t.data(r);if(i&&(i.of instanceof e.Event||i.of instanceof Window||e(i.of).is(":visible"))){t.position(i);var n=t.find(".oj-menu");n.each(function(){var t=e(this);t.is(":visible")&&(i=t.data(r),i&&t.position(i))})}}},_setup:function(){this.isRtl="rtl"===this._GetReadingDirection();var t=this,i=this.element.find(this.options.menuSelector),n=i.add(this.element),o=n.children();this._hasSubmenus=!!i.length,o.filter(".oj-menu-divider").has("a").removeClass("oj-menu-divider oj-menu-item").removeAttr("role");var r=o.filter(":not(.oj-menu-item):has(a)"),s=r.children("a");this._initMenuItems(r),this._initAnchors(s);var a=o.filter(function(t,i){var n=e(i);return n.is(":not(.oj-menu-item)")&&!/[^\-\u2014\u2013\s]/.test(n.text())});this._initDividers(a),this._initDividerNeighbors(o,a),o.filter(".oj-disabled").children("a").attr("aria-disabled","true"),o.filter(":not(.oj-disabled)").children("a").removeAttr("aria-disabled"),i.filter(":not(.oj-menu)").addClass("oj-menu oj-menu-submenu oj-menu-dropdown").hide().attr({role:this.role,"aria-hidden":"true"}).each(function(){var i=e(this),n=t._getSubmenuAnchor(i),o=e("<span>");o.addClass("oj-menu-submenu-icon oj-component-icon").data("oj-ojMenu-submenu-icon",!0),n.attr("aria-haspopup","true").attr("aria-expanded","false").append(o);var r=n.attr("id");i.attr("aria-labelledby",r)}),n.each(function(){var t=e(this),i=t.children().children().children(".oj-menu-item-icon:not(.oj-menu-cancel-icon)").length;t.toggleClass("oj-menu-icons",!!i).toggleClass("oj-menu-text-only",!i)}),this.active&&!e.contains(this.element[0],this.active[0])&&this._blur()},_initMenuItems:function(t){t.addClass("oj-menu-item").attr("role","presentation")},_initAnchors:function(t){t.uniqueId().attr({tabIndex:"-1",role:this._itemRole()})},_initDividers:function(t){t.addClass("oj-menu-divider").attr("role","separator")},_initDividerNeighbors:function(t,e){t.removeClass("oj-menu-item-before-divider oj-menu-item-after-divider"),e.prev().addClass("oj-menu-item-before-divider"),e.next().addClass("oj-menu-item-after-divider")},_getSubmenuAnchor:function(t){return t.prev("a")},_itemRole:function(){return"menuitem"},_getAdjacentDividers:function(t,e){var i=t.prev(".oj-menu-divider").add(t.next(".oj-menu-divider"));return e&&(i=i.add(t)),i},_focus:function(t,e){t&&"focus"===t.type||this._clearTimer&&this._clearTimer(),e=e.first(),this._makeActive(e,t);var i=e.parent(),n=i.closest(".oj-menu-item");i.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor"),this._getAdjacentDividers(n,!0).addClass("oj-focus-ancestor"),t&&"keydown"===t.type?this._close():this._clearTimer=this._setTimer(function(){delete this._clearTimer,this._close()},this._getSubmenuBusyStateDescription("closing"),this.delay);var o=e.children(".oj-menu");o.length&&t&&/^mouse/.test(t.type)&&!this.active.hasClass("oj-disabled")&&this._startOpening(o),this.activeMenu=e.parent()},_makeActive:function(t,i){var n=t.is(this.active);if(!n){var o=this.active?this.active:e(),r=t.children("a");this.active=t,this.element.attr("aria-activedescendant",r.attr("id")),this._focusOutHandler(o),this._focusInHandler(t),this._getAdjacentDividers(o).removeClass("oj-focus"),this._getAdjacentDividers(t).addClass("oj-focus"),this._trigger("_activeItem",i,{previousItem:o,item:t,privateNotice:"The _activeItem event is private.  Do not use."})}},_removeActive:function(t){if(this.active){var i=this.active;this.active=null,this.element.removeAttr("aria-activedescendant"),this._focusOutHandler(i),this._getAdjacentDividers(i).removeClass("oj-focus"),this._trigger("_activeItem",t,{previousItem:i,item:e(),privateNotice:"The _activeItem event is private.  Do not use."})}},_blur:function(t){this._clearTimer&&this._clearTimer(),this._removeActive(t)},_focusLauncherAndDismiss:function(t,e){this._launcher.focus(),this.__dismiss(t,e)},__dismiss:function(e,i){if(!this._isOperationPending("close","__dismiss",[e,i])){var n=this.element.is(":visible");this._setWhenReady("close");var o={};o[t.PopupService.OPTION.POPUP]=this.element,o[t.PopupService.OPTION.CONTEXT]={event:e,selectUi:i,isOpen:n},t.PopupService.getInstance().close(o)}},_beforeCloseHandler:function(e){var i=e[t.PopupService.OPTION.POPUP],n=(t.ThemeUtils.parseJSONFromFontFamily("oj-menu-option-defaults")||{}).animation;if(n&&n.close){var o=t.AnimationUtils.startAnimation(i,"close",n.close).then(function(){i.hide()});return o}return void i.hide()},_afterCloseHandler:function(e){var i=e[t.PopupService.OPTION.CONTEXT],o=i.event,s=i.selectUi,a=i.isOpen;if(this.element.removeData(r),this._launcher=void 0,this._sheetMenuIsOpen=!1,s){var l=this._trigger2("select",o,s);o=l.event}a&&this._trigger("close",o,{}),this._currentOpenOptions=null,n.indexOf(this)>=0&&n.splice(n.indexOf(this),1)},getCurrentOpenOptions:function(){return e.extend(!0,{},this._currentOpenOptions||this.options.openOptions)},open:function(i,o,s){if(!this._isOperationPending("open","open",[i,o,s])){o=e.extend({},this.options.openOptions,o),o.position=e.extend({},o.position),s=e.extend({},this.options.submenuOpenOptions,s);var a=this._currentOpenOptions;this._currentOpenOptions=o,t.PositionUtils._normalizeEventForPosition(i),this._launcherClickShouldDismiss=this.__openingContextMenu;var l=this._trigger2("beforeOpen",i,{openOptions:o});if(!l.proceed)return void(this._currentOpenOptions=a);this.element.is(":visible")&&(this._currentOpenOptions=a,this.__dismiss(l.event),this._currentOpenOptions=o);var h=o.launcher;if(h="string"===e.type(h)?e(h):h,!h||!h.length)return t.Logger.warn("When calling Menu.open(), must specify openOptions.launcher via the component option, method param, or beforeOpen listener.  Ignoring the call."),void(this._currentOpenOptions=null);var p=this._isDropDown(o.display);this._toggleCancelDom(p);var _,g;if(p){if(this.element.addClass("oj-menu-dropdown").removeClass("oj-menu-sheet"),g=u,_=t.PositionUtils.normalizeHorizontalAlignment(o.position,this.isRtl),_.of=t.PositionUtils.normalizePositionOf(_.of,h,i),null==_.of)return t.Logger.warn("position.of passed to Menu.open() is 'event', but the event is null.  Ignoring the call."),void(this._currentOpenOptions=null)}else this.element.addClass("oj-menu-sheet").removeClass("oj-menu-dropdown"),g=d,_={my:"bottom",at:c,of:window,collision:"flipfit"};var m=this.element[0],f=n.slice(0,n.length);e.each(f,function(t,e){e.element[0]!==m&&(e._collapse(i,"eventSubtree"),e._launcher&&e.__dismiss(i))}),this._submenuPosition=t.PositionUtils.normalizeHorizontalAlignment(s.position,this.isRtl);var y=this._usingCallback;e.isFunction(_.using)&&_.using!==y&&(_.origUsing=_.using),_.using=y,this.element.data(r,_),this._setWhenReady("open");var v={};v[t.PopupService.OPTION.POPUP]=this.element,v[t.PopupService.OPTION.LAUNCHER]=h,v[t.PopupService.OPTION.POSITION]=_,v[t.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),v[t.PopupService.OPTION.LAYER_SELECTORS]="oj-menu-layer",v[t.PopupService.OPTION.MODALITY]=g,v[t.PopupService.OPTION.CONTEXT]={event:i,initialFocus:o.initialFocus,launcher:h,isDropDown:p},t.PopupService.getInstance().open(v)}},_beforeOpenHandler:function(e){var i=e[t.PopupService.OPTION.POPUP],n=e[t.PopupService.OPTION.POSITION];i.show(),i.position(n);var o=(t.ThemeUtils.parseJSONFromFontFamily("oj-menu-option-defaults")||{}).animation;return o&&o.open?t.AnimationUtils.startAnimation(i,"open",o.open):void 0},_afterOpenHandler:function(e){var i=e[t.PopupService.OPTION.CONTEXT],o=i.event,r=i.initialFocus,s=i.launcher,a=i.isDropDown,l="firstItem"===r,h=l||"menu"===r;h&&this.element.focus(),l?this._focus(o,this.element.children().first()):this._blur(o),this._launcher=s,this._sheetMenuIsOpen=!a,n.push(this),this._trigger("open",o,{})},_startOpening:function(t){this._clearTimer&&this._clearTimer(),"true"===t.attr("aria-hidden")&&(this._clearTimer=this._setTimer(function(){delete this._clearTimer,this._close(),this._open(t)},this._getSubmenuBusyStateDescription("closing and opening"),this.delay))},_open:function(t){var i=e.extend({of:this.active},this._submenuPosition);this._clearTimer&&this._clearTimer(),this.element.find(".oj-menu").not(t.parents(".oj-menu")).hide().attr("aria-hidden","true").removeData(r),t.show().removeAttr("aria-hidden").position(i).data(r,i),this._getSubmenuAnchor(t).attr("aria-expanded","true"),!this._launcher&&n.indexOf(this)<0&&n.push(this)},__collapseAll:function(t,i,n){this._clearTimer&&this._clearTimer();var o=this,r=function(){delete o._clearTimer;var n=i?o.element:e(t&&t.target).closest(o.element.find(".oj-menu"));n.length||(n=o.element),o._close(n),o._blur(t),o.activeMenu=n};n?this._clearTimer=this._setTimer(r,this._getSubmenuBusyStateDescription("closing"),n):r()},_close:function(t){t||(t=this.active?this.active.parent():this.element);var e=t.find(".oj-menu");e.hide().attr("aria-hidden","true").removeData(r),this._getSubmenuAnchor(e).attr("aria-expanded","false"),t.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor"),this._launcher||n.indexOf(this)>=0&&t===this.element&&n.splice(n.indexOf(this),1)},_collapse:function(e,i){if(null==i||"active"===i){var n=this.activeMenu&&this.activeMenu.closest(".oj-menu-item",this.element);n&&n.length&&(this._close(),this._focus(e,n))}else"all"===i||"eventSubtree"===i?this.__collapseAll(e,"all"===i,this.delay):t.Logger.warn("Invalid param "+i+" passed to Menu._collapse().  Ignoring the call.")},_expand:function(t){var e=this.active&&this.active.children(".oj-menu ").children(".oj-menu-item").first();e&&e.length&&(this._open(e.parent()),this._clearTimer&&this._clearTimer(),this._clearTimer=this._setTimer(function(){delete this._clearTimer,this._focus(t,e)},this._getBusyStateDescription("focusing an item")))},_next:function(t){this._move("next","first",t)},_previous:function(t){this._move("prev","last",t)},_isFirstItem:function(){return this.active&&!this.active.prevAll(".oj-menu-item").length},_isLastItem:function(){return this.active&&!this.active.nextAll(".oj-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".oj-menu-item").eq(-1):this.active[t+"All"](".oj-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".oj-menu-item")[e]()),this._focus(i,n)},_select:function(i){if(!this.active&&i&&i.target){var n=e(i.target).closest(".oj-menu-item");n.closest(this.element).length&&this._makeActive(n,i)}if(!this.active)return void t.Logger.warn("Menu._select() called when no menu item is focused and no menu item can be inferred from event param.");if(this.active.has(".oj-menu").length||this.active.is(".oj-disabled"))return void t.Logger.warn("Selecting a disabled menu item or parent menu item is not allowed.");var o=this.active.is(this._cancelItem)?void 0:{item:this.active};this.__collapseAll(i,!0),this._launcher&&this._focusLauncherAndDismiss(i,o)},_surrogateRemoveHandler:function(){var t=this.element;t.remove()},_getPopupServiceEvents:function(){if(!this._popupServiceEvents){var e=this._popupServiceEvents={};e[t.PopupService.EVENT.POPUP_CLOSE]=this._closeAll.bind(this),e[t.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),e[t.PopupService.EVENT.POPUP_REFRESH]=this.refresh.bind(this),e[t.PopupService.EVENT.POPUP_AUTODISMISS]=this._clickAwayHandler.bind(this),e[t.PopupService.EVENT.POPUP_BEFORE_OPEN]=this._beforeOpenHandler.bind(this),e[t.PopupService.EVENT.POPUP_AFTER_OPEN]=this._afterOpenHandler.bind(this),e[t.PopupService.EVENT.POPUP_BEFORE_CLOSE]=this._beforeCloseHandler.bind(this),e[t.PopupService.EVENT.POPUP_AFTER_CLOSE]=this._afterCloseHandler.bind(this)}return this._popupServiceEvents},_closeAll:function(){this._close(this.element),this.__dismiss(null)},_usingHandler:function(e,i){var n=i.element.element;n.css(e);var o=n.data(r);if(o){var s=o.origUsing;s&&s(e,i)}t.PositionUtils.isAligningPositionClipped(i)&&(this._clearCloseDelayTimer=this._setTimer(this._closeAll,this._getSubmenuBusyStateDescription("closing"),1))},getNodeBySubId:function(t){switch(t&&t.subId){case g:return this._cancelDomAttached?this._cancelItem[0]:null;default:return this._super(t)}},getSubIdByNode:function(t){return this._cancelItem&&this._cancelItem.is(t)?g:this._super(t)},_isDropDown:function(t){if(this._hasSubmenus)return!0;switch(t){case"dropDown":return!0;case"sheet":return!1;case"auto":return _.matches;default:throw new Error("Invalid value for Menu openOptions.display: "+t)}},_toggleCancelDom:function(t){l&&(t?this._cancelDomAttached&&(this._getCancelDom().detach().eq(0).prev().removeClass("oj-menu-item-before-divider"),this._cancelDomAttached=!1):(this._getCancelDom().appendTo(this.element).eq(0).prev().addClass("oj-menu-item-before-divider"),this._cancelDomAttached=!0))},_getCancelDom:function(){if(!this._cancelDom){var t=e("<li></li>",this.document[0]),i=e("<a href='#'></a>",this.document[0]).text(this.options.translations.labelCancel);e("<span class='oj-menu-item-icon oj-component-icon oj-menu-cancel-icon'></span>",this.document[0]).prependTo(i);var n=e("<li></li>",this.document[0]).addClass("oj-menu-item-cancel oj-menu-item-after-divider").append(i);this._initDividers(t),this._initAnchors(i),this._initMenuItems(n),this._cancelAnchor=i,this._cancelItem=n,this._cancelDom=e([t[0],n[0]])}return this._cancelDom},_setupSwipeBehavior:function(){h&&(this.element.ojHammer(p),this._on({swipedown:function(t){this._sheetMenuIsOpen&&"touch"===t.gesture.pointerType&&(this.__collapseAll(t,!0),this._focusLauncherAndDismiss(t))}}))},_setWhenReady:function(e){var i=this._whenReadyMediator;i&&(i.destroy(),delete this._whenReadyMediator),["open","close"].indexOf(e)<0||(this._whenReadyMediator=new t.PopupWhenReadyMediator(this.element,e,"ojMenu",this._IsCustomElement()))},_isOperationPending:function(t,e,i){var n=this._whenReadyMediator;return!!n&&n.isOperationPending(this,t,e,i)},_setTimer:function(e,i,n){var o=t.Context.getContext(this.element[0]).getBusyContext().addBusyState({description:i}),r=function(){o&&(o(),o=null)},s=this,a=setTimeout(function(){e.bind(s)(),r()},n||0);return function(){clearTimeout(a),r()}},_getBusyStateDescription:function(t){return"Menu with id '"+this.element.attr("id")+"' is busy "+t+"."},_getSubmenuBusyStateDescription:function(t){return this._getBusyStateDescription(t+" a submenu")}});var n=new Array,o=!1,r="oj-menu-position",s=navigator.userAgent.indexOf("Macintosh")>-1&&navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1,a=t.ThemeUtils.parseJSONFromFontFamily("oj-menu-config")||{},l="menuItem"===a.sheetCancelAffordance,h="dismiss"===a.sheetSwipeDownBehavior,u=a.dropDownModality||"modeless",d=a.sheetModality||"modal",c="bottom-"+(a.sheetMarginBottom||0),p=h&&{recognizers:[[i.Swipe,{direction:i.DIRECTION_DOWN}]]},_=function(){var t=a.dropDownThresholdWidth;null==t&&(t="768px");var e="(min-width: "+t+")";return window.matchMedia(e)}(),g="oj-menu-cancel-command"}(),function(){var e={properties:{disabled:{type:"boolean"},menuSelector:{type:"string"},openOptions:{type:"Object"},submenuOpenOptions:{type:"Object"}},methods:{destroy:{},getCurrentOpenOptions:{},getSubIdByNode:{},open:{},refresh:{},widget:{}},extension:{_INNER_ELEM:"ul",_WIDGET_NAME:"ojMenu"}};t.CustomElementBridge.registerMetadata("oj-menu","baseComponent",e),t.CustomElementBridge.register("oj-menu",{metadata:t.CustomElementBridge.getMetadata("oj-menu")})}()}),define("ojs/ojdialog",["ojs/ojcore","jquery","promise","ojs/ojcomponentcore","ojs/ojpopupcore","ojs/ojanimation","ojs/ojbutton","jqueryui-amd/widgets/draggable","jqueryui-amd/widgets/mouse"],function(t,e){!function(){t.__registerWidget("oj.ojResizable",e.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,resize:null,start:null,stop:null},_num:function(t){return parseInt(t,10)||0},_isNumber:function(t){return!isNaN(parseInt(t,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return t[n]>0||(t[n]=1,o=t[n]>0,t[n]=0,o)},_ComponentCreate:function(){this._super();var t,i,n,o,r,s=this,a=this.options,l=this.element.mouse.bind(this.element);if(l(),this.mouse=l("instance"),this.mouse._mouseCapture=function(t){return s._mouseCapture(t)},this.mouse._mouseStart=function(t){return s._mouseStart(t)},this.mouse._mouseDrag=function(t){return s._mouseDrag(t)},this.mouse._mouseStop=function(t){return this.element&&this.element.focus(),s._mouseStop(t)},this.element.addClass("oj-resizable"),e.extend(this,{originalElement:this.element,_proportionallyResizeElements:[],_helper:null}),this._initialResize=!0,this.handles=a.handles||(e(".oj-resizable-handle",this.element).length?{n:".oj-resizable-n",e:".oj-resizable-e",s:".oj-resizable-s",w:".oj-resizable-w",se:".oj-resizable-se",sw:".oj-resizable-sw",ne:".oj-resizable-ne",nw:".oj-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)n=e.trim(t[i]),r="oj-resizable-"+n,o=e("<div class='oj-resizable-handle "+r+"'></div>"),this.handles[n]=".oj-resizable-"+n,this.element.append(o);this._renderAxis=function(t){var e;t=t||this.element;for(e in this.handles)this.handles[e].constructor===String&&(this.handles[e]=this.element.children(this.handles[e]).first().show())},this._renderAxis(this.element),this._handles=e(".oj-resizable-handle",this.element),this._handles.mouseover(function(){s.resizing||(this.className&&(o=this.className.match(/oj-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),this.mouse._mouseInit()},_destroy:function(){this.mouse&&this.mouse._mouseDestroy();try{this.mouse.destroy(),this.mouse=null}catch(t){}var t=function(t){e(t).removeClass("oj-resizable oj-resizable-disabled oj-resizable-resizing").removeData("resizable").removeData("oj-resizable").unbind(".resizable").find(".oj-resizable-handle").remove()};return t(this.originalElement),this},_mouseCapture:function(t){var i,n,o=!1;for(i in this.handles)n=e(this.handles[i])[0],(n===t.target||e.contains(n,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(t){var i,n,o,r=this.options,s=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".oj-draggable")&&a.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),r.containment&&(i+=e(r.containment).scrollLeft()||0,n+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size={width:a.width(),height:a.height()},this.originalSize={width:a.width(),height:a.height()},this.originalPosition={left:i,top:n},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=this.originalSize.width/this.originalSize.height||1,
o=e(".oj-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),a.addClass("oj-resizable-resizing"),this._propagate("start",t),this._alsoresize_start(t),this._containment_start(t),!0},_mouseDrag:function(t){var i,n=this.helper,o={},r=this.originalMousePosition,s=this.axis,a=t.pageX-r.left||0,l=t.pageY-r.top||0,h=this._change[s];return this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height},!!h&&(i=h.apply(this,[t,a,l]),this._updateVirtualBoundaries(t.shiftKey),t.shiftKey&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this._alsoresize_resize(t,this.ui()),this._containment_resize(t,this.ui()),this.position.top!==this.prevPosition.top&&(o.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(o.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(o.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(o.height=this.size.height+"px"),n.css(o),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(o)||this._trigger("resize",t,this.ui()),!1)},_mouseStop:function(t){return this.resizing=!1,e("body").css("cursor","auto"),this.element.removeClass("oj-resizable-resizing"),this._propagate("stop",t),this._alsoresize_stop(t),this._containment_stop(t),!1},_updateVirtualBoundaries:function(t){var e,i,n,o,r,s=this.options;r={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},t&&(e=r.minHeight*this.aspectRatio,n=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),n>r.minHeight&&(r.minHeight=n),i<r.maxWidth&&(r.maxWidth=i),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,s=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,h=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return r&&(t.width=e.minWidth),s&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),r&&h&&(t.left=a-e.minWidth),n&&h&&(t.left=a-e.maxWidth),s&&u&&(t.top=l-e.minHeight),o&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,n,o,r=this.helper||this.element;for(t=0;t<this._proportionallyResizeElements.length;t++){if(o=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],n=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")],e=0;e<i.length;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(n[e],10)||0);o.css({height:r.height()-this.borderDif[0]-this.borderDif[2]||0,width:r.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element;this.options;this.elementOffset=t.offset(),this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize,o=this.originalPosition;return{top:o.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,e){"resize"!==t&&this._trigger(t,e,this.ui())},_alsoresize_start:function(){var t=this,i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("oj-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(t){n(t)})},_alsoresize_resize:function(t,i){var n=this,o=n.options,r=n.originalSize,s=n.originalPosition,a={height:n.size.height-r.height||0,width:n.size.width-r.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0},l=function(t,n){e(t).each(function(){var t=e(this),o=e(this).data("oj-resizable-alsoresize"),r={},s=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(t,e){var i=(o[e]||0)+(a[e]||0);i&&i>=0&&(r[e]=i||null)}),t.css(r)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?l(o.alsoResize,null):e.each(o.alsoResize,function(t,e){l(t,e)})},_alsoresize_stop:function(){e(this).removeData("oj-resizable-alsoresize")},_containment_start:function(){var t,i,n,o,r,s,a,l=this,h=l.options,u=l.element,d=h.containment,c=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;c&&(l.containerElement=e(c),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(c),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){i[e]=l._num(t.css("padding"+n))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},n=l.containerOffset,o=l.containerSize.height,r=l.containerSize.width,s=l._hasScroll(c,"left")?c.scrollWidth:r,a=l._hasScroll(c)?c.scrollHeight:o,l.parentData={element:c,left:n.left,top:n.top,width:s,height:a}))},_containment_resize:function(t,e){var i,n,o,r,s=this,a=s.options,l=s.containerOffset,h=s.position,u=t.shiftKey,d={top:0,left:0},c=s.containerElement,p=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=l),h.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-d.left),u&&(s.size.height=s.size.width/s.aspectRatio,p=!1),s.position.left=a.helper?l.left:0),h.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),u&&(s.size.width=s.size.height*s.aspectRatio,p=!1),s.position.top=s._helper?l.top:0),s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top,i=Math.abs((s._helper?s.offset.left-d.left:s.offset.left-l.left)+s.sizeDiff.width),n=Math.abs((s._helper?s.offset.top-d.top:s.offset.top-l.top)+s.sizeDiff.height),o=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),o&&r&&(i-=Math.abs(s.parentData.left)),i+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-i,u&&(s.size.height=s.size.width/s.aspectRatio,p=!1)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,u&&(s.size.width=s.size.height*s.aspectRatio,p=!1)),p||(s.position.left=e.prevPosition.left,s.position.top=e.prevPosition.top,s.size.width=e.prevSize.width,s.size.height=e.prevSize.height)},_containment_stop:function(){var t=this,i=t.options,n=t.containerOffset,o=t.containerPosition,r=t.containerElement,s=e(t.helper),a=s.offset(),l=s.outerWidth()-t.sizeDiff.width,h=s.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(r.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:h}),t._helper&&!i.animate&&/static/.test(r.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:h})},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition,prevSize:this.prevSize,prevPosition:this.prevPosition}}})}(),function(){var i=!0,n="ojDialogPlaceHolderFooter-",o="ojDialogPlaceHolderHeader-",r="ojDialogWrapper-";t.__registerWidget("oj.ojDialog",e.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{cancelBehavior:"icon",dragAffordance:"title-bar",initialVisibility:"hide",modality:"modal",position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;i<0&&e(this).css("top",t.top-i)}},resizeBehavior:"resizable",role:"dialog",title:null,beforeClose:null,beforeOpen:null,close:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null,animateStart:null,animateEnd:null},_ComponentCreate:function(){this._super(),this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("oj-dialog-content oj-dialog-default-content").appendTo(this.uiDialog),this.userDefinedDialogHeader=!1;var t=this.element.find(".oj-dialog");if(t.length){var i=this.element.find(".oj-dialog-header"),n=this;i.each(function(t,i){var o=e(i),r=o.closest(".oj-dialog-body");if(!r.length)return n._userDefinedHeader=o,n.userDefinedDialogHeader=!0,!1})}else this._userDefinedHeader=this.element.find(".oj-dialog-header"),this._userDefinedHeader.length&&(this.userDefinedDialogHeader=!0);this.userDefinedDialogHeader?(this._createPlaceHolderHeader(this._userDefinedHeader),this._userDefinedHeader.prependTo(this.uiDialog),this._userDefinedTitle=this._userDefinedHeader.find(".oj-dialog-title"),"icon"===this.options.cancelBehavior&&(this._createCloseButton(this._userDefinedHeader),this._userDefinedTitle.length&&this._userDefinedTitle.insertAfter(this.closeButton)),this._userDefinedTitle.length&&(this._userDefinedTitle.uniqueId(),this.uiDialog.attr({"aria-labelledby":this._userDefinedTitle.attr("id")}))):this._createTitlebar(),this.uiDialogFooter=this.element.children(".oj-dialog-footer"),this._createPlaceHolderFooter(this.uiDialogFooter),this.uiDialogFooter.length&&(this.uiDialogFooter.addClass("oj-helper-clearfix"),this.uiDialogFooter.appendTo(this.uiDialog)),"title-bar"===this.options.dragAffordance&&e.fn.draggable&&this._makeDraggable(),this._setupFocus(this.uiDialog),this._isOpen=!1},_AfterCreateEvent:function(){"show"===this.options.initialVisibility&&this.open()},_destroy:function(){this._delayId&&window.clearTimeout(this._delayId),this.isOpen()&&this._closeImplicitly(),this._setWhenReady("none");this.uiDialog.hasClass("oj-draggable");if(this._resizableComponent&&(this._resizableComponent("instance")&&this._resizableComponent("destroy"),this._resizableComponent=null),this.uiDialogFooter.length&&(this.uiDialogFooter.removeClass("oj-helper-clearfix"),e("#"+this._placeHolderFooterId).replaceWith(this.uiDialogFooter)),this._destroyCloseButton(),this.userDefinedDialogHeader){this._userDefinedTitle.removeUniqueId();var t=this.uiDialog.find(".oj-dialog-header");t&&e("#"+this._placeHolderHeaderId).replaceWith(t)}this.uiDialogTitle&&(this.uiDialogTitle.remove(),this.uiDialogTitle=null),this.element.removeUniqueId().removeClass("oj-dialog-content oj-dialog-default-content").css(this.originalCss),this.uiDialog&&this.uiDialog.stop(!0,!0),this.element.unwrap(),this.originalTitle&&this.element.attr("title",this.originalTitle),i&&this.uiDialogTitlebar&&(this.uiDialogTitlebar.remove(),this.uiDialogTitlebar=null),delete this._popupServiceEvents,delete this._isOpen,this._super()},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(i){if(!this._isOperationPending("close",[i])&&this.isOpen()&&(this._trigger("beforeClose",i)!==!1||this._ignoreBeforeCloseResultant)){if(this._setWhenReady("close"),this._isOpen=!1,this._focusedElement=null,this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),"modal"===this.options.modality){var n=Array.prototype.forEach,o=this.element[0].parentElement.getElementsByClassName("oj-helper-element-in-dialog-with-accesskey");n.call(o,function(t){t.classList.remove("oj-helper-element-in-dialog-with-accesskey")});var r=document.getElementsByClassName("oj-helper-element-with-accesskey");n.call(r,function(t){t.setAttribute("accesskey",t.getAttribute("data-ojAccessKey")),t.removeAttribute("data-ojAccessKey"),t.classList.remove("oj-helper-element-with-accesskey")})}var s={};s[t.PopupService.OPTION.POPUP]=this.uiDialog,s[t.PopupService.OPTION.CONTEXT]={closeEvent:i},t.PopupService.getInstance().close(s)}},_beforeCloseHandler:function(e){var i=e[t.PopupService.OPTION.POPUP],n=(t.ThemeUtils.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).animation;if(!this._ignoreBeforeCloseResultant&&n&&n.close){var o=i.attr("style"),r=t.AnimationUtils.startAnimation(i[0],"close",n.close,this).then(function(){i.attr("style",o),i.hide()});return r}return void i.hide()},_afterCloseHandler:function(e){var i,n=e[t.PopupService.OPTION.CONTEXT];n&&(i=n.closeEvent),this._trigger("close",i)},isOpen:function(){return this._isOpen},open:function(i){if(!this._isOperationPending("open",[i])&&this._trigger("beforeOpen",i)!==!1){if(this.isOpen())return void this._focusTabbable();this._setWhenReady("open"),this._isOpen=!0,this.opener=e(this.document[0].activeElement),"resizable"===this.options.resizeBehavior&&this._makeResizable();var n="rtl"===this._GetReadingDirection(),o=t.PositionUtils.normalizeHorizontalAlignment(this.options.position,n);if("modal"===this.options.modality){var r=Array.prototype.forEach,s=this.element[0].parentElement.querySelectorAll("[accesskey]");r.call(s,function(t){t.classList.add("oj-helper-element-in-dialog-with-accesskey")});var a=document.querySelectorAll("[accesskey]");r.call(a,function(t){t.classList.contains("oj-helper-element-in-dialog-with-accesskey")||(t.classList.add("oj-helper-element-with-accesskey"),t.setAttribute("data-ojAccessKey",t.getAttribute("accesskey")),t.removeAttribute("accesskey"))})}var l={};l[t.PopupService.OPTION.POPUP]=this.uiDialog,l[t.PopupService.OPTION.LAUNCHER]=this.opener,l[t.PopupService.OPTION.POSITION]=o,l[t.PopupService.OPTION.MODALITY]=this.options.modality,l[t.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),l[t.PopupService.OPTION.LAYER_SELECTORS]="oj-dialog-layer",l[t.PopupService.OPTION.LAYER_LEVEL]=t.PopupService.LAYER_LEVEL.TOP_LEVEL,t.PopupService.getInstance().open(l)}},_beforeOpenHandler:function(e){var i=e[t.PopupService.OPTION.POPUP],n=e[t.PopupService.OPTION.POSITION];i.show(),i.position(n),i.parent().addClass("oj-animate-open");var o=(t.ThemeUtils.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).animation;return o&&o.open?t.AnimationUtils.startAnimation(i[0],"open",o.open,this):void 0},_afterOpenHandler:function(e){var i=e[t.PopupService.OPTION.POPUP];i.parent().removeClass("oj-animate-open"),this._trigger("open"),this._focusTabbable()},refresh:function(){this._super()},_focusTabbable:function(){var e=this._focusedElement;e&&e.length>0&&t.DomUtils.isAncestorOrSelf(this.uiDialog[0],e[0])||(e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||this.uiDialogFooter.length&&(e=this.uiDialogFooter.find(":tabbable")),e.length||this.closeButton&&(e=this.closeButton.filter(":focusable")),e.length||(e=this.uiDialog),e.eq(0).focus(),this._trigger("focus"))},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this)},_isNumber:function(t){return!isNaN(parseInt(t,10))},_createWrapper:function(){this._isResizing=!1,this.element.uniqueId(),this._elementId=this.element.attr("id"),this.OuterWrapper?(this.uiDialog=e(this.OuterWrapper),this.uiDialog.uniqueId(),this._wrapperId=this.uiDialog.attr("id")):(this._wrapperId=r+this._elementId,this.uiDialog=e("<div>"),this.uiDialog.insertBefore(this.element)),this.uiDialog.addClass("oj-dialog oj-component").hide().attr({tabIndex:-1,role:this.options.role,id:this._wrapperId}),this._on(this.uiDialog,{keyup:function(t){},keydown:function(t){if("none"!=this.options.cancelBehavior&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),t.stopImmediatePropagation(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var i,n=this.uiDialog.find(":tabbable"),o=n.filter(":first"),r=n.filter(":last");t.shiftKey?t.shiftKey&&(t.target===o[0]||t.target===this.uiDialog[0]?(r.focus(),t.preventDefault()):(i=n.index(document.activeElement),1==i&&n[0]&&(n[0].focus(),t.preventDefault()))):t.target===r[0]||t.target===this.uiDialog[0]?(o.focus(),t.preventDefault()):(i=n.index(document.activeElement),0==i&&n[1]&&(n[1].focus(),t.preventDefault()))}}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_setupFocus:function(t){var i=this;this._focusable({applyHighlight:!0,setupHandlers:function(n,o){i._on(t,{focus:function(t){n(e(t.currentTarget))},blur:function(t){o(e(t.currentTarget))}})}})},_destroyCloseButton:function(){this.closeButton&&(this.closeButton.remove(),this.closeButton=null)},_createCloseButton:function(t){this.closeButton=e("<button><\button>").addClass("oj-dialog-header-close-wrapper"),this.closeButton.ojButton({display:"icons",chroming:"half",label:this.getTranslatedString("labelCloseIcon"),icons:{start:"oj-component-icon oj-fwk-icon-cross"}}).attr("tabindex","1").appendTo(t),this._on(this.closeButton,{click:function(t){t.preventDefault(),t.stopImmediatePropagation(),this.close(t)}})},_createTitlebar:function(){var t,i;i="oj-dialog-header oj-helper-clearfix",this.uiDialogTitlebar=e("<div>").addClass(i).prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){var i=(e(t.target).closest(".oj-dialog-header-close-wrapper"),e(t.target).parent().parent()),n=!1;i&&(n=i.hasClass("oj-dialog-header-close-wrapper")),n||this.uiDialog.focus()}}),"icon"===this.options.cancelBehavior&&this._createCloseButton(this.uiDialogTitlebar),t=e("<span>").uniqueId().addClass("oj-dialog-title").appendTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_makeDraggable:function(){function t(t){return{position:t.position,offset:t.offset}}var i=this,n=this.options;this.uiDialog.draggable({addClasses:!1,cancel:".oj-dialog-content, .oj-dialog-header-close",handle:".oj-dialog-header",containment:"document",start:function(n,o){e(this).addClass("oj-dialog-dragging"),i._positionDescendents(),i._trigger("dragStart",n,t(o))},drag:function(e,n){i._positionDescendents(),i._trigger("drag",e,t(n))},stop:function(o,r){var s=r.offset.left-i.document.scrollLeft(),a=r.offset.top-i.document.scrollTop();n.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(a>=0?"+":"")+a,of:window},e(this).removeClass("oj-dialog-dragging"),i._positionDescendents(),i._trigger("dragStop",o,t(r))}}),this.uiDialog.addClass("oj-draggable")},_makeResizable:function(){function t(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,n=(this.options,this.uiDialog.css("position"),"n,e,s,w,se,sw,ne,nw");this._resizableComponent=this.uiDialog.ojResizable.bind(this.uiDialog),this._resizableComponent({cancel:".oj-dialog-content",containment:"document",handles:n,start:function(n,o){i._isResizing=!0,e(this).addClass("oj-dialog-resizing"),i._trigger("resizeStart",n,t(o))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(n,o){i._isResizing=!1,e(this).removeClass("oj-dialog-resizing"),i._trigger("resizeStop",n,t(o))}})},_position:function(){var e="rtl"===this._GetReadingDirection(),i=t.PositionUtils.normalizeHorizontalAlignment(this.options.position,e);this.uiDialog.position(i),this._positionDescendents()},_positionDescendents:function(){t.PopupService.getInstance().triggerOnDescendents(this.uiDialog,t.PopupService.EVENT.POPUP_REFRESH)},_setOption:function(e,i,n){var o,r,s=this.uiDialog;if("disabled"!==e)switch(this._super(e,i,n),e){case"dragAffordance":o=s.hasClass("oj-draggable"),o&&"none"===i&&(s.draggable("destroy"),this.uiDialog.removeClass("oj-draggable")),o||"title-bar"!==i||this._makeDraggable();break;case"position":this._position();break;case"resizeBehavior":r=!1,this._resizableComponent&&(r=!0),r&&"resizable"!=i&&(this._resizableComponent("instance")&&this._resizableComponent("destroy"),this._resizableComponent=null),r||"resizable"!==i||this._makeResizable();break;case"title":this._title(this.uiDialogTitlebar.find(".oj-dialog-title"));break;case"role":s.attr("role",i);break;case"modality":if(this.isOpen()){var a={};a[t.PopupService.OPTION.POPUP]=this.uiDialog,a[t.PopupService.OPTION.MODALITY]=i,t.PopupService.getInstance().changeOptions(a)}break;case"cancelBehavior":"none"===i||"escape"===i?this._destroyCloseButton():"icon"===i&&(this.userDefinedDialogHeader?(this._destroyCloseButton(),this._createCloseButton(this._userDefinedHeader),this._userDefinedTitle=this._userDefinedHeader.find(".oj-dialog-title"),this._userDefinedTitle.length&&this._userDefinedTitle.insertAfter(this.closeButton)):(this._destroyCloseButton(),this._createCloseButton(this.uiDialogTitlebar),this.standardTitle=this.uiDialogTitlebar.find(".oj-dialog-title"),this.standardTitle.length&&this.standardTitle.insertAfter(this.closeButton)))}},_createPlaceHolderFooter:function(t){this._placeHolderFooterId=n+this._elementId,this._placeHolderFooter=e("<div>").hide().attr({id:this._placeHolderFooterId}),this._placeHolderFooter.insertBefore(t)},_createPlaceHolderHeader:function(t){this._placeHolderHeaderId=o+this._elementId,this._placeHolderHeader=e("<div>").hide().attr({id:this._placeHolderHeaderId}),this._placeHolderHeader.insertBefore(t)},getNodeBySubId:function(t){if(null==t)return this.element?this.element[0]:null;var e=t.subId;switch(e){case"oj-dialog-header":case"oj-dialog-body":case"oj-dialog-footer":case"oj-dialog-content":case"oj-dialog-header-close-wrapper":case"oj-resizable-n":case"oj-resizable-e":case"oj-resizable-s":case"oj-resizable-w":case"oj-resizable-se":case"oj-resizable-sw":case"oj-resizable-ne":case"oj-resizable-nw":var i="."+e;return this.widget().find(i)?this.widget().find(i)[0]:null;case"oj-dialog-close-icon":case"oj-dialog-close":return null}return null},getSubIdByNode:function(t){if(null!=t){var i=e(t);if(i.hasClass("oj-dialog-header"))return{subId:"oj-dialog-header"};if(i.hasClass("oj-dialog-footer"))return{subId:"oj-dialog-footer"};if(i.hasClass("oj-dialog-content"))return{subId:"oj-dialog-content"};if(i.hasClass("oj-dialog-header-close-wrapper"))return{subId:"oj-dialog-header-close-wrapper"};if(i.hasClass("oj-resizable-n"))return{subId:"oj-resizable-n"};if(i.hasClass("oj-resizable-e"))return{subId:"oj-resizable-e"};if(i.hasClass("oj-resizable-s"))return{subId:"oj-resizable-s"};if(i.hasClass("oj-resizable-w"))return{subId:"oj-resizable-w"};if(i.hasClass("oj-resizable-se"))return{subId:"oj-resizable-se"};if(i.hasClass("oj-resizable-sw"))return{subId:"oj-resizable-sw"};if(i.hasClass("oj-resizable-ne"))return{subId:"oj-resizable-ne"};if(i.hasClass("oj-resizable-nw"))return{subId:"oj-resizable-nw"}}return null},_surrogateRemoveHandler:function(){var t=this.element;t.remove()},_getPopupServiceEvents:function(){if(!this._popupServiceEvents){var e=this._popupServiceEvents={};e[t.PopupService.EVENT.POPUP_CLOSE]=this._closeImplicitly.bind(this),e[t.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),e[t.PopupService.EVENT.POPUP_REFRESH]=this._positionDescendents.bind(this),e[t.PopupService.EVENT.POPUP_BEFORE_OPEN]=this._beforeOpenHandler.bind(this),e[t.PopupService.EVENT.POPUP_AFTER_OPEN]=this._afterOpenHandler.bind(this),e[t.PopupService.EVENT.POPUP_BEFORE_CLOSE]=this._beforeCloseHandler.bind(this),e[t.PopupService.EVENT.POPUP_AFTER_CLOSE]=this._afterCloseHandler.bind(this)}return this._popupServiceEvents},_closeImplicitly:function(){this._ignoreBeforeCloseResultant=!0,this.close(),delete this._ignoreBeforeCloseResultant},_setWhenReady:function(e){var i=this._whenReadyMediator;i&&(i.destroy(),delete this._whenReadyMediator),["open","close"].indexOf(e)<0||(this._whenReadyMediator=new t.PopupWhenReadyMediator(this.element,e,"ojDialog",this._IsCustomElement()))},_isOperationPending:function(t,e){var i=this._whenReadyMediator;return!!i&&i.isOperationPending(this,t,t,e)}}),t.Components.setDefaultOptions({ojDialog:{resizeBehavior:t.Components.createDynamicPropertyGetter(function(){return(t.ThemeUtils.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).resizeBehavior}),cancelBehavior:t.Components.createDynamicPropertyGetter(function(){return(t.ThemeUtils.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).cancelBehavior}),dragAffordance:t.Components.createDynamicPropertyGetter(function(){return(t.ThemeUtils.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).dragAffordance})}})}(),function(){var e={properties:{cancelBehavior:{type:"string"},dragAffordance:{type:"string"},initialVisibility:{type:"string"},modality:{type:"string"},position:{type:"Object"},resizeBehavior:{type:"string"},role:{type:"string"},title:{type:"string"},widget:{}},methods:{close:{},destroy:{},isOpen:{},open:{},refresh:{},whenReady:{}},extension:{_INNER_ELEM:"div",_WIDGET_NAME:"ojDialog"}};t.CustomElementBridge.registerMetadata("oj-dialog","baseComponent",e),t.CustomElementBridge.register("oj-dialog",{metadata:t.CustomElementBridge.getMetadata("oj-dialog")})}()}),define("ojs/ojdatagrid",["ojs/ojcore","jquery","promise","ojs/ojcomponentcore","ojs/ojdatasource-common","ojs/ojdatacollection-utils","ojs/ojinputnumber","ojs/ojmenu","ojs/ojdialog"],function(t,e){t.DataGridResources=function(e,i){this.rtlMode=e,this.translationFunction=i,this.styles={},this.styles.datagrid="oj-datagrid",this.styles.cell="oj-datagrid-cell",this.styles.banded="oj-datagrid-banded",this.styles.row="oj-datagrid-row",this.styles.databody="oj-datagrid-databody",this.styles.topcorner="oj-datagrid-top-corner",this.styles.bottomcorner="oj-datagrid-bottom-corner",this.styles.rowheaderspacer="oj-datagrid-row-header-spacer",this.styles.colheaderspacer="oj-datagrid-column-header-spacer",this.styles.status="oj-datagrid-status",this.styles.emptytext="oj-datagrid-empty-text",this.styles.header="oj-datagrid-header",this.styles.endheader="oj-datagrid-end-header",this.styles.groupingcontainer="oj-datagrid-header-grouping",this.styles.headercell="oj-datagrid-header-cell",this.styles.rowheader="oj-datagrid-row-header",this.styles.colheader="oj-datagrid-column-header",this.styles.colheadercell="oj-datagrid-column-header-cell",this.styles.rowheadercell="oj-datagrid-row-header-cell",this.styles.endheadercell="oj-datagrid-end-header-cell",this.styles.rowendheader="oj-datagrid-row-end-header",this.styles.colendheader="oj-datagrid-column-end-header",this.styles.colendheadercell="oj-datagrid-column-end-header-cell",this.styles.rowendheadercell="oj-datagrid-row-end-header-cell",this.styles["scroller-mobile"]="oj-datagrid-scroller-touch",this.styles.scroller="oj-datagrid-scroller",this.styles.scrollers="oj-datagrid-scrollers",this.styles.focus="oj-focus",this.styles.hover="oj-hover",this.styles.active="oj-active",this.styles.selected="oj-selected",this.styles.topSelected="oj-datagrid-selected-top",this.styles.bottomSelected="oj-datagrid-selected-bottom",this.styles.disabled="oj-disabled",this.styles.enabled="oj-enabled",this.styles.default="oj-default",this.styles.sortcontainer="oj-datagrid-sort-icon-container",this.styles.sortascending="oj-datagrid-sort-ascending-icon",this.styles.sortdescending="oj-datagrid-sort-descending-icon",this.styles.icon="oj-component-icon",this.styles.clickableicon="oj-clickable-icon-nocontext",this.styles.info="oj-helper-hidden-accessible",this.styles.rowexpander="oj-rowexpander",this.styles.cut="oj-datagrid-cut",this.styles.selectaffordancetop="oj-datagrid-touch-selection-affordance-top",this.styles.selectaffordancebottom="oj-datagrid-touch-selection-affordance-bottom",this.styles.toucharea="oj-datagrid-touch-area",this.styles.readOnly="oj-read-only",this.styles.editable="oj-datagrid-editable",this.styles.cellEdit="oj-datagrid-cell-edit",this.styles.draggable="oj-draggable",this.styles.drag="oj-drag",this.styles.drop="oj-drop",this.styles.activedrop="oj-active-drop",this.styles.validdrop="oj-valid-drop",this.styles.invaliddrop="oj-invalid-drop",this.styles.formcontrol="oj-form-control-inherit",this.styles.borderHorizontalNone="oj-datagrid-border-horizontal-none",this.styles.borderVerticalNone="oj-datagrid-border-vertical-none",this.styles.borderHorizontalSmall="oj-datagrid-small-content-border-horizontal",this.styles.borderVerticalSmall="oj-datagrid-small-content-border-vertical",this.styles.offsetOutline="oj-datagrid-focus-offset",this.styles.depth="oj-datagrid-depth-",this.commands={},this.commands.sortCol="oj-datagrid-sortCol",this.commands.sortColAsc="oj-datagrid-sortColAsc",this.commands.sortColDsc="oj-datagrid-sortColDsc",this.commands.sortRow="oj-datagrid-sortRow",this.commands.sortRowAsc="oj-datagrid-sortRowAsc",this.commands.sortRowDsc="oj-datagrid-sortRowDsc",this.commands.resize="oj-datagrid-resize",this.commands.resizeWidth="oj-datagrid-resizeWidth",this.commands.resizeHeight="oj-datagrid-resizeHeight",this.commands.cut="oj-datagrid-cut",this.commands.paste="oj-datagrid-paste",this.commands.discontiguousSelection="oj-datagrid-discontiguousSelection",this.attributes={},this.attributes.key="data-oj-key",this.attributes.context="data-oj-context",this.attributes.resizable="data-oj-resizable",this.attributes.sortable="data-oj-sortable",this.attributes.sortDir="data-oj-sortdir",this.attributes.expander="data-oj-expander",this.attributes.expanderIndex="data-oj-expander-index",this.attributes.container=t.Components._OJ_CONTAINER_ATTR,this.attributes.extent="data-oj-extent",this.attributes.start="data-oj-start",this.attributes.depth="data-oj-depth",this.attributes.level="data-oj-level",this.attributes.tabMod="data-oj-tabmod"},t.DataGridResources.prototype.isRTLMode=function(){return"rtl"===this.rtlMode},t.DataGridResources.prototype.getTranslatedText=function(t,e){return this.translationFunction(t,e)},t.DataGridResources.prototype.getMappedStyle=function(t){return null!=t?this.styles[t]:null},t.DataGridResources.prototype.getMappedCommand=function(t){return null!=t?this.commands[t]:null},t.DataGridResources.prototype.getMappedAttribute=function(t){return null!=t?this.attributes[t]:null};var i=function(){this.MAX_COLUMN_THRESHOLD=20,this.MAX_ROW_THRESHOLD=30,this.m_utils=new o(this),this.m_discontiguousSelection=!1,this.m_sizingManager=new n,this.m_keyboardHandler=new s(this),this.m_rowHeaderWidth=null,
this.m_rowEndHeaderWidth=null,this.m_colHeaderHeight=null,this.m_colEndHeaderHeight=null,this.m_styleClassDimensionMap={},this.m_isEstimateRowCount=void 0,this.m_isEstimateColumnCount=void 0,this.m_stopRowFetch=!1,this.m_stopRowHeaderFetch=!1,this.m_stopRowEndHeaderFetch=!1,this.m_stopColumnFetch=!1,this.m_stopColumnHeaderFetch=!1,this.m_stopColumnEndHeaderFetch=!1,this.m_initialized=!1,this.m_shouldFocus=null,this.callbacks={},this._setupActions(),this.m_readinessStack=[],this.m_modelEvents=[]};i.keyCodes={TAB_KEY:9,ENTER_KEY:13,SHIFT_KEY:16,CTRL_KEY:17,ALT_KEY:18,ESC_KEY:27,SPACE_KEY:32,PAGEUP_KEY:33,PAGEDOWN_KEY:34,END_KEY:35,HOME_KEY:36,LEFT_KEY:37,UP_KEY:38,RIGHT_KEY:39,DOWN_KEY:40,NUM5_KEY:53,V_KEY:86,X_KEY:88,F2_KEY:113,F8_KEY:119,F10_KEY:121},i.UPDATE_ANIMATION_FADE_INOUT=1,i.UPDATE_ANIMATION_SLIDE_INOUT=2,i.UPDATE_ANIMATION_DURATION=250,i.EXPAND_ANIMATION_DURATION=500,i.COLLAPSE_ANIMATION_DURATION=400,i.MAX_OVERSCROLL_PIXEL=50,i.BOUNCE_ANIMATION_DURATION=500,i.DECELERATION_FACTOR=6e-4,i.TAP_AND_SCROLL_RESET=300,i.MIN_SWIPE_DURATION=200,i.MAX_SWIPE_DURATION=400,i.MIN_SWIPE_DISTANCE=10,i.MIN_SWIPE_TRANSITION_DURATION=100,i.MAX_SWIPE_TRANSITION_DURATION=500,i.CONTEXT_MENU_TAP_HOLD_DURATION=750,i.HEADER_TAP_SHORT_HOLD_DURATION=300,i.FETCH_PIXEL_THRESHOLD=5,i.VISIBILITY_STATE_HIDDEN="hidden",i.VISIBILITY_STATE_REFRESH="refresh",i.VISIBILITY_STATE_RENDER="render",i.VISIBILITY_STATE_VISIBLE="visible",i.prototype.SetOptions=function(t){this.m_options=new r(t)},i.prototype.UpdateOptions=function(t,e){var i;for(i in t)i in this.m_options.options&&this.m_options.options[i]!=t[i]&&(this.m_options.options[i]=t[i]);for(i in t)if(!this._updateDataGrid(i,e)){this.empty(),this.refresh(this.m_root);break}},i.prototype._updateDataGrid=function(t,e){var i;switch(t){case"bandingInterval":this._removeBanding(),this.updateColumnBanding(),this.updateRowBanding();break;case"currentCell":i=this.m_options.getCurrentCell(),this._updateActive(i,!0);break;case"editMode":this.m_editMode=this.m_options.getEditMode();break;case"gridlines":this._updateGridlines();break;case"header":i=this.m_options.options.header,this._updateHeaderOptions(i,e);break;case"scrollPosition":this.setInitialScrollPosition();break;case"selection":i=this.m_options.getSelection(),this._updateSelection(i);break;default:return!1}return!0},i.prototype._updateSelection=function(t){null!=t&&(this._isSelectionEnabled()?this.SetSelection(t):t.length=0)},i.prototype._updateHeaderOptions=function(t,e){var i,n,o,r,s,a,l,h,u,d;if(null!=e&&null!=e.subkey&&(i=e.subkey,n=i.split("."),o=n[0],r=n[1],"column"==o&&null!=this.m_colHeader&&null!=this.m_colHeader.firstChild?s=this.m_colHeader.firstChild.childNodes:"row"==o&&null!=this.m_rowHeader&&null!=this.m_rowHeader.firstChild?s=this.m_rowHeader.firstChild.childNodes:"columnEnd"==o&&null!=this.m_colEndHeader&&null!=this.m_colEndHeader.firstChild?s=this.m_colEndHeader.firstChild.childNodes:"rowEnd"==o&&null!=this.m_rowEndHeader&&null!=this.m_rowEndHeader.firstChild&&(s=this.m_rowEndHeader.firstChild.childNodes),null!=s))for(h=0;h<s.length;h++)a=s[h],l=a[this.getResources().getMappedAttribute("context")],l.index=this.getHeaderCellIndex(a),"resizable"==r?this._isHeaderResizeEnabled(o,l)?this._setAttribute(a,r,"true"):this._setAttribute(a,r,"false"):"sortable"==r&&(u=this.m_utils.containsCSSClassName(a.lastChild,this.getMappedStyle("sortcontainer")),this._isSortEnabled(o,l)?(u||(d=this._buildSortIcon(l),a.appendChild(d)),this._setAttribute(a,r,"true")):(u&&this._remove(a.lastChild),this._setAttribute(a,r,"false")))},i.prototype._updateGridlines=function(){var t,e,i,n,o,r,s,a;for(o=this.m_options.getHorizontalGridlines(),r=this.m_options.getVerticalGridlines(),s=this.m_databody.firstChild.childNodes,n=s.length,a=this.getResources().isRTLMode()?"right":"left",t=0;t<n;t+=1)for(i=s[t].childNodes,e=0;e<i.length;e+=1)"hidden"===r||this._isLastColumn(e+this.m_startCol)&&this.getRowHeaderWidth()+this.getElementDir(i[e],a)+this.calculateColumnWidth(i[e])>=this.getWidth()?this.m_utils.addCSSClassName(i[e],this.getMappedStyle("borderVerticalNone")):this.m_utils.removeCSSClassName(i[e],this.getMappedStyle("borderVerticalNone")),"hidden"===o||this._isLastRow(t+this.m_startRow)&&this.getRowBottom(s[t],null)>=this.getHeight()?this.m_utils.addCSSClassName(i[e],this.getMappedStyle("borderHorizontalNone")):this.m_utils.removeCSSClassName(i[e],this.getMappedStyle("borderHorizontalNone"))},i.prototype._updateEdgeCellBorders=function(t,e){var i,n;null!=this.m_active&&"header"!=this.m_active.type&&(i=this._getActiveElement(),null!=i&&(this._isLastRow(this.m_active.indexes.row)&&("none"==t?this.m_utils.addCSSClassName(i,this.getMappedStyle("borderHorizontalNone")):this.m_utils.removeCSSClassName(i,this.getMappedStyle("borderHorizontalNone"))),this._isLastColumn(this.m_active.indexes.column)&&("none"==t?this.m_utils.addCSSClassName(i,this.getMappedStyle("borderVerticalNone")):this.m_utils.removeCSSClassName(i,this.getMappedStyle("borderVerticalNone"))))),null!=e&&null!=this.m_prevActive&&"header"!=this.m_prevActive.type&&(n=this._getElementFromActiveObject(this.m_prevActive),null!=n&&(this._isLastRow(this.m_prevActive.indexes.row)&&("none"==e?this.m_utils.addCSSClassName(n,this.getMappedStyle("borderHorizontalNone")):this.m_utils.removeCSSClassName(n,this.getMappedStyle("borderHorizontalNone"))),this._isLastColumn(this.m_prevActive.indexes.column)&&("none"==e?this.m_utils.addCSSClassName(n,this.getMappedStyle("borderVerticalNone")):this.m_utils.removeCSSClassName(n,this.getMappedStyle("borderVerticalNone")))))},i.prototype.GetOptions=function(){return null==this.m_options&&(this.m_options=new r),this.m_options},i.prototype.SetResources=function(t){this.m_resources=t},i.prototype.getResources=function(){return this.m_resources},i.prototype.getStartRow=function(){return this.m_startRow},i.prototype.getStartRowHeader=function(){return this.m_startRowHeader},i.prototype.getStartColumn=function(){return this.m_startCol},i.prototype.getStartColumnHeader=function(){return this.m_startColHeader},i.prototype.getStartRowEndHeader=function(){return this.m_startRowEndHeader},i.prototype.getStartColumnEndHeader=function(){return this.m_startColEndHeader},i.prototype.getMappedStyle=function(t){return this.getResources().getMappedStyle(t)},i.prototype.SetDataSource=function(t){this._removeDataSourceEventListeners(),this.m_modelEvents=[],null!=t&&(this.m_handleModelEventListener=this.handleModelEvent.bind(this),this.m_handleExpandEventListener=this.handleExpandEvent.bind(this),this.m_handleCollapseEventListener=this.handleCollapseEvent.bind(this),t.on("change",this.m_handleModelEventListener,this),t.on("expand",this.m_handleExpandEventListener,this),t.on("collapse",this.m_handleCollapseEventListener,this)),this.m_dataSource=t},i.prototype.getDataSource=function(){return this.m_dataSource},i.prototype.setVisibility=function(t){this.m_visibility=t},i.prototype.getVisibility=function(){return null==this.m_visibility&&(null!=this.m_root.offsetParent?this.setVisibility(i.VISIBILITY_STATE_VISIBLE):this.setVisibility(i.VISIBILITY_STATE_HIDDEN)),this.m_visibility},i.prototype.SetOptionCallback=function(t){this.m_setOptionCallback=t},i.prototype.SetRemoveCallback=function(t){this.m_removeCallback=t},i.prototype.SetSubtreeAttachedCallback=function(t){this.m_subtreeAttachedCallback=t},i.prototype._remove=function(t){null!=this.m_removeCallback?this.m_removeCallback.call(null,t):t.parentNode.removeChild(t)},i.prototype.SetNotReadyCallback=function(t){this.m_notReady=t},i.prototype.SetMakeReadyCallback=function(t){this.m_makeReady=t},i.prototype._signalTaskStart=function(){this.m_readinessStack&&(0==this.m_readinessStack.length&&this.m_notReady(),this.m_readinessStack.push(1))},i.prototype._signalTaskEnd=function(){this.m_readinessStack&&this.m_readinessStack.length>0&&(this.m_readinessStack.pop(),0==this.m_readinessStack.length&&this.m_makeReady())},i.prototype._indexes=function(t,e){var i,n=this;i=this.getDataSource().indexes(t),"function"==typeof i.then?(n._signalTaskStart(),i.then(function(i){e.call(n,i,t),n._signalTaskEnd()},function(){e.call(n,{row:-1,column:-1},t),n._signalTaskEnd()})):e.call(n,i,t)},i.prototype._keys=function(t,e){var i,n=this;i=this.getDataSource().keys(t),"function"==typeof i.then?(n._signalTaskStart(),i.then(function(i){e.call(n,i,t),n._signalTaskEnd()},function(){e.call(n,{row:null,column:null},t),n._signalTaskEnd()})):e.call(n,i,t)},i.prototype._getLocalKeys=function(t){var e={row:null,column:null};return null!=t.row&&(e.row=this._getKey(this.m_databody.firstChild.childNodes[t.row-this.m_startRow])),null!=t.column&&(e.column=this._getKey(this._getHeaderByIndex(t.column,this.m_columnHeaderLevelCount-1,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader))),e},i.prototype.SetCreateContextCallback=function(t){this.m_createContextCallback=t},i.prototype.SetFocusableCallback=function(t,e){this.m_focusInHandler=t,this.m_focusOutHandler=e},i.prototype.SetFixContextCallback=function(t){this.m_fixContextCallback=t},i.prototype._isHighWatermarkScrolling=function(){return"scroll"!=this.m_options.getScrollPolicy()},i.prototype.destroy=function(){delete this.m_fetching,this._removeDataSourceEventListeners(),this._removeDomEventListeners(),delete this.m_styleClassDimensionMap,this.m_styleClassDimensionMap={}},i.prototype._removeDataSourceEventListeners=function(){null!=this.m_dataSource&&(this.m_dataSource.off("change",this.m_handleModelEventListener),this.m_dataSource.off("expand",this.m_handleExpandEventListener),this.m_dataSource.off("collapse",this.m_handleCollapseEventListener))},i.prototype._removeDomEventListeners=function(){document.removeEventListener("mousemove",this.m_docMouseMoveListener,!1),document.removeEventListener("mouseup",this.m_docMouseUpListener,!1),null!=this.m_root&&(this.m_handleDatabodyKeyDown&&this.m_root.removeEventListener("keydown",this.m_handleDatabodyKeyDown,!1),this.m_handleRootFocus&&this.m_root.removeEventListener("focus",this.m_handleRootFocus,!0),this.m_handleRootBlur&&this.m_root.removeEventListener("blur",this.m_handleRootBlur,!0))},i.prototype.getRootElement=function(){return this.m_root},i.prototype.getWidth=function(){return null==this.m_width&&(this.m_width=this.getRootElement().clientWidth),this.m_width},i.prototype.getHeight=function(){return null==this.m_height&&(this.m_height=this.getRootElement().clientHeight),this.m_height},i.prototype.getScrollableWidth=function(){var t=this.m_databody.firstChild;return this.getElementWidth(t)},i.prototype.getViewportWidth=function(){var t=this.getWidth();return Math.round(1.5*t)},i.prototype.getViewportHeight=function(){var t=this.getHeight();return Math.round(1.5*t)},i.prototype._getViewportTop=function(){return this.m_currentScrollTop},i.prototype._getViewportBottom=function(){var t=this._getViewportTop(),e=this.getElementHeight(this.m_databody),i=this.m_utils.getScrollbarSize();return this.m_hasHorizontalScroller?t+e-i:t+e},i.prototype._getViewportLeft=function(){return this.m_currentScrollLeft},i.prototype._getViewportRight=function(){var t=this._getViewportLeft(),e=this.getElementWidth(this.m_databody),i=this.m_utils.getScrollbarSize();return this.m_hasVerticalScroller?t+e-i:t+e},i.prototype.getFetchSize=function(t){return"row"==t?(null==this.m_rowFetchSize&&(this.m_rowFetchSize=Math.max(1,Math.round(this.getViewportHeight()/this.getDefaultRowHeight()))),this.m_rowFetchSize):"column"==t?(null==this.m_columnFetchSize&&(this.m_columnFetchSize=Math.max(1,Math.round(this.getViewportWidth()/this.getDefaultColumnWidth()))),this.m_columnFetchSize):0},i.prototype.getEmptyText=function(){var t,e;return t=this.m_options.getEmptyText(),null==t&&(e=this.getResources(),t=e.getTranslatedText("msgNoData")),t},i.prototype._buildEmptyText=function(){var t,e,i,n,o;return t=this.getEmptyText(),e=document.createElement("div"),e.id=this.createSubId("empty"),e.className=this.getMappedStyle("emptytext"),i=this.m_endColHeader>=0?this.getColumnHeaderHeight():0,this.setElementDir(e,i,"top"),n=this.getResources().isRTLMode()?"right":"left",o=this.m_endRowHeader>=0?this.getRowHeaderWidth():0,this.setElementDir(e,o,n),e.textContent=t,this.m_empty=e,e},i.prototype.getRowThreshold=function(){return 0},i.prototype.getColumnThreshold=function(){return 0},i.prototype.setDefaultDimensions=function(){var t,e;t=document.createElement("div"),t.style.visibilty="hidden",e=this.getResources(),t.className=e.getMappedStyle("row")+" "+e.getMappedStyle("colheadercell")+" "+e.getMappedStyle("headercell"),document.body.appendChild(t),this.m_defaultColumnWidth=Math.round(t.getBoundingClientRect().width),this.m_defaultRowHeight=Math.round(t.getBoundingClientRect().height),document.body.removeChild(t)},i.prototype.getDefaultRowHeight=function(){return null==this.m_defaultRowHeight&&this.setDefaultDimensions(),this.m_defaultRowHeight},i.prototype.getDefaultColumnWidth=function(){return null==this.m_defaultColumnWidth&&this.setDefaultDimensions(),this.m_defaultColumnWidth},i.prototype._getDefaultDimension=function(t){return"row"==t?this.getDefaultRowHeight():"column"==t?this.getDefaultColumnWidth():void 0},i.prototype._getHeaderDimension=function(t,e,i,n){var o,r;return o=this.m_sizingManager.getSize(i,e),null!=o?o:""!=t.style[n]?(o=this.getElementDir(t,n),this.m_sizingManager.setSize(i,e,o),o):(r=t.className,o=this.m_styleClassDimensionMap[r],null==o&&(o=this.getElementDir(t,n)),this.m_sizingManager.setSize(i,e,o),this.m_styleClassDimensionMap[r]=o,o)},i.prototype.createSubId=function(t){var e=this.getRootElement().id;return null==e&&(e=""),[e,t].join(":")},i.prototype.isHeaderFetchComplete=function(){return this.m_fetching.row===!1&&this.m_fetching.column===!1},i.prototype.isFetchComplete=function(){return null!=this.m_fetching&&this.isHeaderFetchComplete()&&this.m_fetching.cells===!1},i.prototype._isLastRow=function(t){return this._isCountUnknown("row")?t===this.m_endRow&&this.m_stopRowFetch:t+1===this.getDataSource().getCount("row")},i.prototype._isLastColumn=function(t){return this._isCountUnknown("column")?t===this.m_endCol&&this.m_stopColumnFetch:t+1===this.getDataSource().getCount("column")},i.prototype.empty=function(){this.m_empty&&this.m_root.removeChild(this.m_empty),this.m_corner&&this.m_root.removeChild(this.m_corner),this.m_bottomCorner&&this.m_root.removeChild(this.m_bottomCorner),this.m_columnHeaderScrollbarSpacer&&this.m_root.removeChild(this.m_columnHeaderScrollbarSpacer),this.m_rowHeaderScrollbarSpacer&&this.m_root.removeChild(this.m_rowHeaderScrollbarSpacer),this.m_root.removeChild(this.m_placeHolder),this.m_root.removeChild(this.m_status),this.m_root.removeChild(this.m_accSummary),this.m_root.removeChild(this.m_accInfo),this.m_root.removeChild(this.m_stateInfo),this.m_root.removeChild(this.m_contextInfo),this._remove(this.m_colHeader),this._remove(this.m_rowHeader),this._remove(this.m_colEndHeader),this._remove(this.m_rowEndHeader),this._remove(this.m_databody)},i.prototype.refresh=function(t){this._removeDomEventListeners(),this.resetInternal(),this.render(t)},i.prototype.resetInternal=function(){this.m_initialized=!1,this.m_readinessStack=[],this._signalTaskStart(),this._signalTaskEnd(),this.m_cursor=null,this.m_corner=null,this.m_bottomCorner=null,this.m_columnHeaderScrollbarSpacer=null,this.m_rowHeaderScrollbarSpacer=null,this.m_colHeader=null,this.m_colEndHeader=null,this.m_rowHeader=null,this.m_rowEndHeader=null,this.m_databody=null,this.m_empty=null,this.m_accInfo=null,this.m_accSummary=null,this.m_contextInfo=null,this.m_placeHolder=null,this.m_stateInfo=null,this.m_status=null,this.m_isEstimateRowCount=void 0,this.m_isEstimateColumnCount=void 0,this.m_stopRowFetch=!1,this.m_stopRowHeaderFetch=!1,this.m_stopRowEndHeaderFetch=!1,this.m_stopColumnFetch=!1,this.m_stopColumnHeaderFetch=!1,this.m_stopColumnEndHeaderFetch=!1,this.m_rowFetchSize=null,this.m_columnFetchSize=null,this.m_fetching=null,this.m_processingModelEvent=!1,this.m_processingEventQueue=!1,this.m_animating=!1,this.m_sizingManager.clear(),this.m_styleClassDimensionMap={},this.m_height=null,this.m_width=null,this.m_scrollHeight=null,this.m_scrollWidth=null,this.m_avgRowHeight=void 0,this.m_avgColWidth=void 0,this.m_defaultColumnWidth=null,this.m_defaultRowHeight=null,this.m_colHeaderHeight=null,this.m_colEndHeaderHeight=null,this.m_rowHeaderWidth=null,this.m_rowEndHeaderWidth=null,this.m_rowHeaderLevelWidths=[],this.m_rowEndHeaderLevelWidths=[],this.m_columnHeaderLevelHeights=[],this.m_columnEndHeaderLevelHeights=[],this.m_active=null,this.m_prevActive=null,this.m_databodyDragState=!1,this.m_databodyMove=!1,this.m_moveRow=null,this.m_moveRowHeader=null,this.m_dropTarget=null,this.m_dropTargetHeader=null,this.m_discontiguousSelection=!1,this.m_docMouseMoveListener=null,this.m_docMouseUpListener=null,this.m_handleDatabodyKeyDown=null,this.m_handleRootFocus=null,this.m_handleRootBlur=null,this.m_modelEvents=[],this.m_hasHorizontalScroller=null,this.m_hasVerticalScroller=null,this.m_currentScrollLeft=null,this.m_currentScrollTop=null,this.m_prevScrollLeft=null,this.m_prevScrollTop=null,this.m_resizing=!1,this.m_resizingElement=null,this.m_resizingElementMin=null,this.m_startRow=null,this.m_startCol=null,this.m_endRow=null,this.m_endCol=null,this.m_startRowPixel=null,this.m_startColPixel=null,this.m_endRowPixel=null,this.m_endColPixel=null,this.m_startRowHeader=null,this.m_startColHeader=null,this.m_endRowHeader=null,this.m_endColHeader=null,this.m_startRowHeaderPixel=null,this.m_startColHeaderPixel=null,this.m_endRowHeaderPixel=null,this.m_endColHeaderPixel=null,this.m_rowHeaderLevelCount=null,this.m_columnHeaderLevelCount=null,this.m_startRowEndHeader=null,this.m_startColEndHeader=null,this.m_endRowEndHeader=null,this.m_endColEndHeader=null,this.m_startRowEndHeaderPixel=null,this.m_startColEndHeaderPixel=null,this.m_endRowEndHeaderPixel=null,this.m_endColEndHeaderPixel=null,this.m_rowEndHeaderLevelCount=null,this.m_columnEndHeaderLevelCount=null,this.m_sortInfo=null,this.m_resizeRequired=null,this.m_externalFocus=null,this.m_currentMode=null,this.m_editMode=null,this.m_hasCells=null,this.m_hasRowHeader=null,this.m_hasRowEndHeader=null,this.m_hasColHeader=null,this.m_hasColEndHeader=null,this.m_isLongScroll=null,this.m_addBorderBottom=null,this.m_addBorderRight=null},i.prototype._shouldInitialize=function(){return this.isFetchComplete()&&!this.m_initialized&&null!=this.m_databody.parentNode},i.prototype._handleInitialization=function(t){1==t?(this.resizeGrid(),this.setInitialScrollPosition(),this.fillViewport(),this.isFetchComplete()&&(this._updateActive(this.m_options.getCurrentCell(),!1),this.m_initialized=!0,this.fireEvent("ready",{}),this._runModelEventQueue())):(this.m_initialized=!0,this.fireEvent("ready",{}),this._runModelEventQueue())},i.prototype._runModelEventQueue=function(){var t,e;if(!this.m_processingEventQueue){if(this.m_processingEventQueue=!0,null!=this.m_modelEvents){for(t=0;t<this.m_modelEvents.length;t++)e=this.m_modelEvents[t],"expand"==e.operation?this.handleExpandEvent(e,!0):"collapse"==e.operation?this.handleCollapseEvent(e,!0):this.handleModelEvent(e,!0);this.m_modelEvents.length=0}this.m_processingEventQueue=!1}},i.prototype.render=function(t){null!=this.m_databody&&(this.destroy(),this.resetInternal()),this.m_timingStart=new Date,this.m_fetching={},this.m_startRow=0,this.m_startCol=0,this.m_endRow=-1,this.m_endCol=-1,this.m_startRowPixel=0,this.m_startColPixel=0,this.m_endRowPixel=0,this.m_endColPixel=0,this.m_startRowHeader=0,this.m_startColHeader=0,this.m_endRowHeader=-1,this.m_endColHeader=-1,this.m_startRowHeaderPixel=0,this.m_startColHeaderPixel=0,this.m_endRowHeaderPixel=0,this.m_endColHeaderPixel=0,this.m_startRowEndHeader=0,this.m_startColEndHeader=0,this.m_endRowEndHeader=-1,this.m_endColEndHeader=-1,this.m_startRowEndHeaderPixel=0,this.m_startColEndHeaderPixel=0,this.m_endRowEndHeaderPixel=0,this.m_endColEndHeaderPixel=0,this.m_currentScrollLeft=0,this.m_currentScrollTop=0,this.m_prevScrollLeft=0,this.m_prevScrollTop=0,this.m_rowHeaderLevelWidths=[],this.m_rowEndHeaderLevelWidths=[],this.m_columnHeaderLevelHeights=[],this.m_columnEndHeaderLevelHeights=[],this.buildGrid(t)},i.prototype.buildGrid=function(t){var e,i,n,o,r,s,a,l,h,u,d,c,p,_,g;this.m_root=t,this.m_root.setAttribute("role","application"),this._isCellEditable()?this.m_utils.addCSSClassName(this.m_root,this.getMappedStyle("editable")):this.m_utils.addCSSClassName(this.m_root,this.getMappedStyle("readOnly")),t.tabIndex=0,e=this.buildStatus(),t.appendChild(e),this.m_status=e,i=this.buildAccSummary(),t.appendChild(i),this.m_accSummary=i,n=this.buildAccInfo(),t.appendChild(n),this.m_accInfo=n,o=this.buildStateInfo(),t.appendChild(o),this.m_stateInfo=o,u=this.buildContextInfo(),t.appendChild(u),this.m_contextInfo=u,d=this.buildPlaceHolder(),t.appendChild(d),this.m_placeHolder=d,null!=this.getDataSource()?(this.m_empty=null,r=this.getResources().isRTLMode(),_=this.buildHeaders("column",this.getMappedStyle("colheader"),this.getMappedStyle("colendheader")),s=_.root,c=_.endRoot,t.insertBefore(s,e),t.insertBefore(c,e),_=this.buildHeaders("row",this.getMappedStyle("rowheader"),this.getMappedStyle("rowendheader")),a=_.root,p=_.endRoot,t.insertBefore(a,e),t.insertBefore(p,e),l=this.buildDatabody(),t.insertBefore(l,e),r&&(s.style.direction="rtl",l.style.direction="rtl"),this.m_isResizing=!1,this.m_resizingElement=null,this.m_resizingElementMin=null,this.m_databodyDragState=!1,this.m_handleDatabodyKeyDown=this.handleDatabodyKeyDown.bind(this),this.m_handleRootFocus=this.handleRootFocus.bind(this),this.m_handleRootBlur=this.handleRootBlur.bind(this),this.m_docMouseMoveListener=this.handleMouseMove.bind(this),this.m_docMouseUpListener=this.handleMouseUp.bind(this),this.m_utils.isTouchDevice()?(l.addEventListener("touchstart",this.handleTouchStart.bind(this),!1),l.addEventListener("touchmove",this.handleTouchMove.bind(this),!1),l.addEventListener("touchend",this.handleTouchEnd.bind(this),!1),l.addEventListener("touchcancel",this.handleTouchCancel.bind(this),!1),s.addEventListener("touchstart",this.handleHeaderTouchStart.bind(this),!1),s.addEventListener("touchmove",this.handleHeaderTouchMove.bind(this),!1),s.addEventListener("touchend",this.handleHeaderTouchEnd.bind(this),!1),s.addEventListener("touchcancel",this.handleHeaderTouchCancel.bind(this),!1),a.addEventListener("touchstart",this.handleHeaderTouchStart.bind(this),!1),a.addEventListener("touchmove",this.handleHeaderTouchMove.bind(this),!1),a.addEventListener("touchend",this.handleHeaderTouchEnd.bind(this),!1),a.addEventListener("touchcancel",this.handleHeaderTouchCancel.bind(this),!1),c.addEventListener("touchstart",this.handleHeaderTouchStart.bind(this),!1),c.addEventListener("touchmove",this.handleHeaderTouchMove.bind(this),!1),c.addEventListener("touchend",this.handleHeaderTouchEnd.bind(this),!1),c.addEventListener("touchcancel",this.handleHeaderTouchCancel.bind(this),!1),p.addEventListener("touchstart",this.handleHeaderTouchStart.bind(this),!1),p.addEventListener("touchmove",this.handleHeaderTouchMove.bind(this),!1),p.addEventListener("touchend",this.handleHeaderTouchEnd.bind(this),!1),p.addEventListener("touchcancel",this.handleHeaderTouchCancel.bind(this),!1),t.addEventListener("focus",this.m_handleRootFocus,!0),t.addEventListener("blur",this.m_handleRootBlur,!0),t.addEventListener("keydown",this.m_handleDatabodyKeyDown,!1)):(t.addEventListener("keydown",this.m_handleDatabodyKeyDown,!1),t.addEventListener("focus",this.m_handleRootFocus,!0),t.addEventListener("blur",this.m_handleRootBlur,!0),g=this.m_utils.getMousewheelEvent(),l.addEventListener(g,this.handleDatabodyMouseWheel.bind(this),!1),l.addEventListener("mousedown",this.handleDatabodyMouseDown.bind(this),!1),l.addEventListener("mousemove",this.handleDatabodyMouseMove.bind(this),!1),l.addEventListener("mouseup",this.handleDatabodyMouseUp.bind(this),!1),l.addEventListener("mouseout",this.handleDatabodyMouseOut.bind(this),!1),l.addEventListener("mouseover",this.handleDatabodyMouseOver.bind(this),!1),l.addEventListener("dblclick",this.handleDatabodyDoubleClick.bind(this),!1),a.addEventListener(g,this.handleDatabodyMouseWheel.bind(this),!1),a.addEventListener("mousedown",this.handleHeaderMouseDown.bind(this),!1),s.addEventListener("mousedown",this.handleHeaderMouseDown.bind(this),!1),a.addEventListener("mouseover",this.handleHeaderMouseOver.bind(this),!1),s.addEventListener("mouseover",this.handleHeaderMouseOver.bind(this),!1),a.addEventListener("mousemove",this.handleRowHeaderMouseMove.bind(this),!1),s.addEventListener("mousemove",this.handleColumnHeaderMouseMove.bind(this),!1),a.addEventListener("mouseup",this.handleHeaderMouseUp.bind(this),!1),a.addEventListener("mouseout",this.handleHeaderMouseOut.bind(this),!1),s.addEventListener("mouseout",this.handleHeaderMouseOut.bind(this),!1),a.addEventListener("click",this.handleHeaderClick.bind(this),!1),s.addEventListener("click",this.handleHeaderClick.bind(this),!1),p.addEventListener(g,this.handleDatabodyMouseWheel.bind(this),!1),p.addEventListener("mousedown",this.handleHeaderMouseDown.bind(this),!1),c.addEventListener("mousedown",this.handleHeaderMouseDown.bind(this),!1),p.addEventListener("mouseover",this.handleHeaderMouseOver.bind(this),!1),c.addEventListener("mouseover",this.handleHeaderMouseOver.bind(this),!1),p.addEventListener("mousemove",this.handleRowHeaderMouseMove.bind(this),!1),c.addEventListener("mousemove",this.handleColumnHeaderMouseMove.bind(this),!1),p.addEventListener("mouseup",this.handleHeaderMouseUp.bind(this),!1),p.addEventListener("mouseout",this.handleHeaderMouseOut.bind(this),!1),c.addEventListener("mouseout",this.handleHeaderMouseOut.bind(this),!1),p.addEventListener("click",this.handleHeaderClick.bind(this),!1),c.addEventListener("click",this.handleHeaderClick.bind(this),!1)),this._shouldInitialize()&&this._handleInitialization(!0)):(h=this._buildEmptyText(),this.m_root.appendChild(h),this._handleInitialization(!1))},i.prototype.HandleResize=function(t,e){t=this.getRootElement().clientWidth,e=this.getRootElement().clientHeight,t==this.m_width&&e==this.m_height||(this.m_width=t,this.m_height=e,this.m_rowFetchSize=null,this.m_columnFetchSize=null,this.m_initialized&&(this.resizeGrid(),this.isFetchComplete()&&(this.m_resizeRequired=!0,this.fillViewport())))},i.prototype.resizeGrid=function(){var t,e,i,n,o,r,s,a,l,h,u,d,c,p,_,g,m,f,y,v,S,C,E,b,T,A,O,P,I,D,x,M;t=this.getWidth(),e=this.getHeight(),i=this.m_colHeader,S=this.m_colEndHeader,n=this.m_rowHeader,C=this.m_rowEndHeader,o=this.m_databody,M=o.firstChild,s=this.getColumnHeaderHeight(),E=this.getColumnEndHeaderHeight(),a=this.getRowHeaderWidth(),b=this.getRowEndHeaderWidth(),O=e-s-E,P=t-a-b,p=this.m_utils.isTouchDevice(),m=this.m_utils.getScrollbarSize(),x=this._databodyEmpty(),x&&(null==this.m_empty?(y=this._buildEmptyText(),this.m_root.appendChild(y)):y=this.m_empty,T=this.getElementHeight(y),A=this.getElementWidth(y),T>this.getElementHeight(M)&&this.setElementHeight(M,T),A>this.getElementWidth(M)&&this.setElementWidth(M,A)),h=this.getElementWidth(o.firstChild),d=this.getElementHeight(o.firstChild),_=this.isDatabodyHorizontalScrollbarRequired(P),_?(g=this.isDatabodyVerticalScrollbarRequired(O-m),o.style.overflow="auto"):(g=this.isDatabodyVerticalScrollbarRequired(O),g?(_=this.isDatabodyHorizontalScrollbarRequired(P-m),o.style.overflow="auto"):o.style.overflow="hidden"),this.m_hasHorizontalScroller=_,this.m_hasVerticalScroller=g,this.m_endColEndHeader!=-1?(c=Math.min(d+(_?m:0),O),l=_?c-m:c):(c=O,l=Math.min(d,_?c-m:c)),this.m_endRowEndHeader!=-1?(u=Math.min(h+(g?m:0),P),r=g?u-m:u):(u=P,r=Math.min(h,g?u-m:u)),I=a+r+(g?m:0),D=s+l+(_?m:0),f=this.getResources().isRTLMode()?"right":"left",this.setElementDir(n,0,f),this.setElementDir(n,s,"top"),this.setElementHeight(n,l),this.setElementDir(C,I,f),this.setElementDir(C,s,"top"),this.setElementHeight(C,l),this.setElementDir(i,a,f),this.setElementWidth(i,r),this.setElementDir(S,a,f),this.setElementDir(S,D,"top"),this.setElementWidth(S,r),this.setElementDir(o,s,"top"),this.setElementDir(o,a,f),this.setElementWidth(o,u),this.setElementHeight(o,c),this.m_scrollWidth=h-r,this.m_scrollHeight=d-l,this.buildCorners(),this._adjustHeaderBorders(),this.m_resizeRequired=!1,v=new Date},i.prototype._sizeDatabodyScroller=function(){var t,e,i,n,o,r,s,a,l,h,u,d;t=this.m_databody,e=t.firstChild,i=this._databodyEmpty(),n=this._isHighWatermarkScrolling(),o=this.m_utils._getMaxDivHeightForScrolling(),r=this.m_utils._getMaxDivWidthForScrolling(),s=this.getDataSource().getCount("row"),a=this.getDataSource().getCount("column"),l=0,h=0,u=0,d=0,i?(u=Math.max(Math.max(this.m_endRowHeaderPixel,this.m_endRowEndHeaderPixel),1),d=Math.max(Math.max(this.m_endColHeaderPixel,this.m_endColEndHeaderPixel),1)):(u=this.m_endRowPixel,d=this.m_endColPixel),l=s==-1||n?u:s*this.m_avgRowHeight,h=a==-1||n?d:a*this.m_avgColWidth,this.setElementHeight(e,Math.min(o,l)),this.setElementWidth(e,Math.min(r,h)),this.m_initialized&&(this.m_scrollWidth=this.getElementWidth(e)-this.getElementWidth(t)+(this.m_hasVerticalScroller?this.m_utils.getScrollbarSize():0),this.m_scrollHeight=this.getElementHeight(e)-this.getElementHeight(t)+(this.m_hasHorizontalScroller?this.m_utils.getScrollbarSize():0))},i.prototype._adjustLastHeadersAlongAxis=function(t,e,i,n,o,r){var s,a;for(s=0;s<e;)a=this._getHeaderByIndex(t,s,i,e,n),r?this.m_utils.removeCSSClassName(a,o):this.m_utils.addCSSClassName(a,o),s+=this.getHeaderCellDepth(a)},i.prototype._adjustHeaderBordersAlongAxis=function(t,e,i,n,o,r,s,a){null!=t&&i>=0&&(n?this.m_utils.addCSSClassName(o,r):this.m_utils.removeCSSClassName(o,r),e(i)&&this._adjustLastHeadersAlongAxis(i,s,t,a,r,n))},i.prototype._adjustHeaderBorders=function(){var t,e,i,n,o,r,s,a,l,h,u,d,c,p,_,g;if(o=this.m_utils.getScrollbarSize(),u=this.getWidth(),d=this.getHeight(),t=this.getColumnHeaderHeight(),e=this.getElementWidth(this.m_colHeader),s=this.getElementHeight(this.m_colEndHeader),a=this.getRowHeaderWidth(),l=this.getElementHeight(this.m_rowHeader),h=this.getElementWidth(this.m_rowEndHeader),i=a+e+h+(this.m_hasVerticalScroller?o:0)<u,n=t+l+s+(this.m_hasHorizontalScroller?o:0)<d,i&&this.m_endRowEndHeader>=0?(_=!0,this.m_addBorderRight=!0):1==this.m_addBorderRight&&(_=!1),null!=_)for(r=this.getMappedStyle("borderVerticalSmall"),null!=this.m_columnHeaderScrollbarSpacer&&(_?this.m_utils.addCSSClassName(this.m_columnHeaderScrollbarSpacer,r):this.m_utils.removeCSSClassName(this.m_columnHeaderScrollbarSpacer,r)),null!=this.m_bottomCorner&&(_?this.m_utils.addCSSClassName(this.m_bottomCorner,r):this.m_utils.removeCSSClassName(this.m_bottomCorner,r)),p=this.m_rowEndHeader.firstChild.childNodes,c=0;c<p.length;c++)_?this.m_utils.addCSSClassName(p[c],r):this.m_utils.removeCSSClassName(p[c],r);else r=this.getMappedStyle("borderVerticalNone"),g=this._isLastColumn.bind(this),this._adjustHeaderBordersAlongAxis(this.m_colHeader,g,this.m_endColHeader,i,this.m_columnHeaderScrollbarSpacer,r,this.m_columnHeaderLevelCount,this.m_startColHeader),this._adjustHeaderBordersAlongAxis(this.m_colEndHeader,g,this.m_endColEndHeader,i,this.m_bottomCorner,r,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader);if(_=null,n&&this.m_endColEndHeader>=0?(this.m_addBorderBottom=!0,_=!0):1==this.m_addBorderBottom&&(_=!1),null!=_)for(r=this.getMappedStyle("borderHorizontalSmall"),null!=this.m_rowHeaderScrollbarSpacer&&(_?this.m_utils.addCSSClassName(this.m_rowHeaderScrollbarSpacer,r):this.m_utils.removeCSSClassName(this.m_rowHeaderScrollbarSpacer,r)),null!=this.m_bottomCorner&&(_?this.m_utils.addCSSClassName(this.m_bottomCorner,r):this.m_utils.removeCSSClassName(this.m_bottomCorner,r)),p=this.m_colEndHeader.firstChild.childNodes,c=0;c<p.length;c++)_?this.m_utils.addCSSClassName(p[c],r):this.m_utils.removeCSSClassName(p[c],r);else r=this.getMappedStyle("borderHorizontalNone"),g=this._isLastRow.bind(this),this._adjustHeaderBordersAlongAxis(this.m_rowHeader,g,this.m_endRowHeader,n,this.m_rowHeaderScrollbarSpacer,r,this.m_rowHeaderLevelCount,this.m_startRowHeader),
this._adjustHeaderBordersAlongAxis(this.m_rowEndHeader,g,this.m_endRowEndHeader,n,this.m_bottomCorner,r,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader)},i.prototype.buildCorners=function(){var t,e,i,n,o,r,s,a,l,h,u,d,c,p;t=this.m_utils.getScrollbarSize(),c=this.getWidth(),p=this.getHeight(),e=this.getColumnHeaderHeight(),l=this.getElementWidth(this.m_colHeader),u=this.getColumnEndHeaderHeight(),i=this.getRowHeaderWidth(),d=this.getRowEndHeaderWidth(),h=this.getElementHeight(this.m_rowHeader),r=this.getResources().isRTLMode()?"right":"left",this.m_endRowHeader!=-1&&this.m_endColHeader!=-1&&(null!=this.m_corner?o=this.m_corner:(o=document.createElement("div"),o.id=this.createSubId("corner"),o.className=this.getMappedStyle("topcorner")),this.setElementWidth(o,i),this.setElementHeight(o,e),null==this.m_corner&&(this.m_root.appendChild(o),this.m_corner=o)),null!=this.m_corner&&null==o&&(this.m_root.removeChild(this.m_corner),this.m_corner=null),this.m_endRowHeader!=-1&&(this.m_hasHorizontalScroller||this.m_endColEndHeader!=-1?(null!=this.m_rowHeaderScrollbarSpacer?s=this.m_rowHeaderScrollbarSpacer:(s=document.createElement("div"),s.id=this.createSubId("rhSbSpacer"),s.className=this.getMappedStyle("rowheaderspacer")),this.setElementDir(s,h+e,"top"),this.setElementDir(s,0,r),this.setElementWidth(s,i),this.m_endColEndHeader!=-1?this.setElementHeight(s,u+(this.m_hasHorizontalScroller?t:0)):this.setElementHeight(s,p-h-e),null==this.m_rowHeaderScrollbarSpacer&&(this.m_root.appendChild(s),this.m_rowHeaderScrollbarSpacer=s)):(null!=this.m_rowHeaderScrollbarSpacer&&this.m_root.removeChild(this.m_rowHeaderScrollbarSpacer),this.m_rowHeaderScrollbarSpacer=null)),this.m_endColHeader!=-1&&(this.m_hasVerticalScroller||this.m_endRowEndHeader!=-1?(null!=this.m_columnHeaderScrollbarSpacer?a=this.m_columnHeaderScrollbarSpacer:(a=document.createElement("div"),a.id=this.createSubId("chSbSpacer"),a.className=this.getMappedStyle("colheaderspacer")),this.setElementDir(a,i+l,r),this.setElementDir(a,0,"top"),this.m_endRowEndHeader!=-1?this.setElementWidth(a,d+(this.m_hasVerticalScroller?t:0)):this.setElementWidth(a,c-l-i),this.setElementHeight(a,e),null==this.m_columnHeaderScrollbarSpacer&&(this.m_root.appendChild(a),this.m_columnHeaderScrollbarSpacer=a)):(null!=this.m_columnHeaderScrollbarSpacer&&this.m_root.removeChild(this.m_columnHeaderScrollbarSpacer),this.m_columnHeaderScrollbarSpacer=null)),(this.m_hasHorizontalScroller&&this.m_hasVerticalScroller||this.m_hasVerticalScroller&&this.m_endColEndHeader!=-1||this.m_hasHorizontalScroller&&this.m_endRowEndHeader!=-1||this.m_endRowEndHeader!=-1&&this.m_endColEndHeader!=-1)&&(null!=this.m_bottomCorner?n=this.m_bottomCorner:(n=document.createElement("div"),n.id=this.createSubId("bcorner"),n.className=this.getMappedStyle("bottomcorner")),this.setElementDir(n,h+e,"top"),this.setElementDir(n,i+l,r),this.m_endRowEndHeader!=-1?this.setElementWidth(n,d+(this.m_hasVerticalScroller?t:0)):this.setElementWidth(n,c-l-i),this.m_endColEndHeader!=-1?this.setElementHeight(n,u+(this.m_hasHorizontalScroller?t:0)):this.setElementHeight(n,p-h-e),null==this.m_bottomCorner&&(this.m_root.appendChild(n),this.m_bottomCorner=n)),null!=this.m_bottomCorner&&null==n&&(this.m_root.removeChild(this.m_bottomCorner),this.m_bottomCorner=null)},i.prototype.setInitialScrollPosition=function(){var t,e,i,n,o,r;if(t=this.m_options.getScrollPositionMode(),void 0!=this.m_databody&&null!=t){if(e=this.m_options.getColumnScrollPosition(),i=this.m_options.getRowScrollPosition(),null==e&&null==i)return;"key"===t?(null!=i&&null!=e||(n=this.m_databody,o=null!=n?n.firstChild.firstChild:null,r=null!=o?n.firstChild.firstChild.firstChild:null,null==i&&null!=r?i=r[this.getResources().getMappedAttribute("context")].keys.row:null==e&&null!=r&&(e=r[this.getResources().getMappedAttribute("context")].keys.column)),null!=i&&null!=e&&this._indexes({row:i,column:e},this._intialScrollPositionCallback)):(null==i?i=0:null==e&&(e=0),this._intialScrollPositionCallback({row:i,column:e}))}},i.prototype._intialScrollPositionCallback=function(t){var e,i,n,o=0;e=t.column===-1?0:t.column,i=t.row===-1?0:t.row,n=e*this.m_avgColWidth,o=i*this.m_avgRowHeight,this._initiateScroll(n,o)},i.prototype.isDatabodyHorizontalScrollbarRequired=function(t){var e,i,n;return e=this.m_databody,n=null==t?this.getElementWidth(e):t,i=e.firstChild,this.getElementWidth(i)>n},i.prototype.isDatabodyVerticalScrollbarRequired=function(t){var e,i,n;return e=this.m_databody,n=null==t?this.getElementHeight(e):t,i=e.firstChild,this.getElementHeight(i)>n},i.prototype.buildStatus=function(){var t=document.createElement("div");return t.id=this.createSubId("status"),t.className=this.getMappedStyle("status"),t.setAttribute("role","status"),t},i.prototype.buildAccInfo=function(){var t=document.createElement("div");return t.id=this.createSubId("info"),t.className=this.getMappedStyle("info"),t.setAttribute("role","status"),t},i.prototype.buildAccSummary=function(){var t=document.createElement("div");return t.id=this.createSubId("summary"),t.className=this.getMappedStyle("info"),t},i.prototype.buildStateInfo=function(){var t=document.createElement("div");return t.id=this.createSubId("state"),t.className=this.getMappedStyle("info"),t},i.prototype.buildContextInfo=function(){var t=document.createElement("div");return t.id=this.createSubId("context"),t.className=this.getMappedStyle("info"),t},i.prototype.buildPlaceHolder=function(){var t=document.createElement("div");return t.id=this.createSubId("placeHolder"),t.className=this.getMappedStyle("info"),t},i.prototype.populateAccInfo=function(){var t,e;t=this.getResources().getTranslatedText("accessibleSummaryExact",{rownum:this.m_endRow+1,colnum:this.m_endCol+1}),this.getDataSource().getExpandedKeys&&(e=this.getResources().getTranslatedText("accessibleSummaryExpanded",{num:this.getDataSource().getExpandedKeys().length}),t=t+". "+e),t+=". ",this.m_accSummary.textContent=t},i.prototype.SetAccessibleContext=function(t){var e,i,n,o,r,s,a,l;if(null!=t&&(null!=t.context&&(this.m_accessibleContext=t.context),null!=t.state&&(this.m_stateInfo.textContent=t.state),null!=t.ancestors&&this._isDatabodyCellActive())){if(e="",i=t.ancestors,n=this.m_active.indexes.column,null!=n&&n>=0)for(o=0;o<i.length;o++)o>0&&(e=e.concat(", ")),r=i[o],s=this._findRowByKey(r.key),null!=s&&(a=s.childNodes[n-this.m_startCol],l=a.textContent,l=null!=l?l.replace(/\n|<br\s*\/?>/gi,"").trim():"",e=e.concat(r.label).concat(" ").concat(l));this.m_accessibleContext=e.concat(", ").concat(this.m_accessibleContext)}},i.prototype._updateStateInfo=function(t,e){var i=this.getResources().getTranslatedText(t,e);null!=i&&(this.m_stateInfo.textContent=i)},i.prototype._updateContextInfo=function(t,e){var i,n,o,r,s,a,l,h,u;i=t.row,n=t.column,s=t.level,a=t.rowHeader,l=t.rowEndHeader,h=t.columnHeader,u=t.columnEndHeader,o="",null!=this.m_accessibleContext||isNaN(i)||"row"==e||(r=this.getResources().getTranslatedText("accessibleRowContext",{index:i+1}),null!=r&&(o=r)),isNaN(n)||"column"==e||(r=this.getResources().getTranslatedText("accessibleColumnContext",{index:n+1}),null!=r&&(o=0===o.length?r:o+" "+r)),isNaN(a)||"rowHeader"==e||(r=this.getResources().getTranslatedText("accessibleRowHeaderContext",{index:a+1}),null!=r&&(o=0===o.length?r:o+" "+r)),isNaN(h)||"columnHeader"==e||(r=this.getResources().getTranslatedText("accessibleColumnHeaderContext",{index:h+1}),null!=r&&(o=0===o.length?r:o+" "+r)),isNaN(l)||"rowEndHeader"==e||(r=this.getResources().getTranslatedText("accessibleRowEndHeaderContext",{index:l+1}),null!=r&&(o=0===o.length?r:o+" "+r)),isNaN(u)||"columnEndHeader"==e||(r=this.getResources().getTranslatedText("accessibleColumnEndHeaderContext",{index:u+1}),null!=r&&(o=0===o.length?r:o+" "+r)),isNaN(s)||"level"==e||(r=this.getResources().getTranslatedText("accessibleLevelContext",{level:s+1}),null!=r&&(o=0===o.length?r:o+" "+r)),null!=this.m_accessibleContext&&(o=o+", "+this.m_accessibleContext,this.m_accessibleContext=null),this.m_contextInfo.textContent=o},i.prototype._isCountUnknown=function(t){var e,i,n,o,r;return e=this.getDataSource(),"row"===t||"rowEnd"===t?(void 0===this.m_isEstimateRowCount&&(i=e.getCountPrecision("row"),o=e.getCount("row"),"estimate"===i||o<0?this.m_isEstimateRowCount=!0:this.m_isEstimateRowCount=!1),this.m_isEstimateRowCount):("column"===t||"columnEnd"===t)&&(void 0===this.m_isEstimateColumnCount&&(n=e.getCountPrecision("column"),r=e.getCount("column"),"estimate"===n||r<0?this.m_isEstimateColumnCount=!0:this.m_isEstimateColumnCount=!1),this.m_isEstimateColumnCount)},i.prototype._isCountUnknownOrHighwatermark=function(t){return this._isCountUnknown(t)||this._isHighWatermarkScrolling()},i.prototype._hideHeader=function(t){t.style.display="none"},i.prototype._showHeader=function(t){t.style.display=""},i.prototype.buildHeaders=function(t,e,i){var n,o,r,s,a;return a=this.getMappedStyle("scroller")+(this.m_utils.isTouchDevice()?" "+this.getMappedStyle("scroller-mobile"):""),n=document.createElement("div"),n.id=this.createSubId(t+"Header"),n.className=e+" "+this.getMappedStyle("header"),r=document.createElement("div"),r.className=a,n.appendChild(r),o=document.createElement("div"),o.id=this.createSubId(t+"EndHeader"),o.className=i+" "+this.getMappedStyle("endheader"),s=document.createElement("div"),s.className=a,o.appendChild(s),"column"===t?(this.m_colHeader=n,this.m_colEndHeader=o):"row"===t&&(this.m_rowHeader=n,this.m_rowEndHeader=o),this.fetchHeaders(t,0,n,o,null,null),{root:n,endRoot:o}},i.prototype.fetchHeaders=function(t,e,i,n,o,r){var s,a;this.m_fetching[t]||(void 0==o&&(o=this.getFetchSize(t)),s={axis:t,start:e,count:o,header:i,endHeader:n},this.m_fetching[t]=s,a=null!=r&&null!=r.success?r.success:this.handleHeadersFetchSuccess,this.showStatusText(),this._signalTaskStart(),this.getDataSource().fetchHeaders(s,{success:a,error:this.handleHeadersFetchError},{success:this,error:this}))},i.prototype.isHeaderFetchResponseValid=function(t){var e,i;return e=t.axis,null!=this.m_fetching&&(i=this.m_fetching[e].count,t==this.m_fetching[e])},i.prototype.isHeaderFetchResponseInViewport=function(t){var e,i,n;return!this.m_initialized||(n=t.axis,e=t.start,i="row"==n?this._getLongScrollStart(this.m_currentScrollTop,this.m_prevScrollTop,n):this._getLongScrollStart(this.m_currentScrollLeft,this.m_prevScrollLeft,n),i.start==e)},i.prototype.handleHeadersFetchSuccess=function(t,e,i,n){var o,r,s,a,l;return this.isHeaderFetchResponseValid(e)?(o=e.axis,this.isLongScroll()&&!this.isHeaderFetchResponseInViewport(e)?(this.m_fetching[o]=!1,this.m_headerInvalid=!0,void this._signalTaskEnd()):(this.m_fetching[o]=!1,r=e.header,s=e.endHeader,a=e.start,l=this.getDataSource().getCount(o),"column"===o?(null!=t&&(this.buildColumnHeaders(r,t,a,l,!1,!1),t.getCount()<e.count&&(this.m_stopColumnHeaderFetch=!0)),this.m_endColHeader<0?(this._hideHeader(r),this.m_stopColumnHeaderFetch=!0):this.m_hasColHeader=!0,null!=i&&(this.buildColumnEndHeaders(s,i,a,l,!1,!1),i.getCount()<e.count&&(this.m_stopColumnEndHeaderFetch=!0)),this.m_endColEndHeader<0?(this._hideHeader(s),this.m_stopColumnEndHeaderFetch=!0):this.m_hasColEndHeader=!0):"row"===o&&(null!=t&&(this.buildRowHeaders(r,t,a,l,n,!1),t.getCount()<e.count&&(this.m_stopRowHeaderFetch=!0)),this.m_endRowHeader<0?(this._hideHeader(r),this.m_stopRowHeaderFetch=!0):this.m_hasRowHeader=!0,null!=i&&(this.buildRowEndHeaders(s,i,a,l,n,!1),i.getCount()<e.count&&(this.m_stopRowEndHeaderFetch=!0)),this.m_endRowEndHeader<0?(this._hideHeader(s),this.m_stopRowEndHeaderFetch=!0):this.m_hasRowEndHeader=!0),this.isFetchComplete()&&(this.hideStatusText(),this._shouldInitialize()&&!n&&this._handleInitialization(!0)),this.m_initialized&&this._sizeDatabodyScroller(),void this._signalTaskEnd())):void this._signalTaskEnd()},i.prototype.handleHeadersFetchError=function(t,e){var i=e.axis;this.m_fetching[i]=!1,this._signalTaskEnd()},i.prototype.createHeaderContext=function(t,e,i,n,o,r,s,a){var l,h,u;l={},l.axis=t,l.index=e,l.data=i,l.component=this,l.datasource=this.getDataSource(),l.level=r,l.depth=a,l.extent=s,null!=o&&(l.parentElement=o),h=n.key,null!=h&&null!=o&&this._setKey(o,h);for(u in n)n.hasOwnProperty(u)&&(l[u]=n[u]);return null!=this.m_createContextCallback&&this.m_createContextCallback.call(this,l),this.m_fixContextCallback.call(this,l)},i.prototype.buildColumnHeaders=function(t,e,i,n,o,r){var s,a,l,h,u,d,c,p,_,g,m,f;if(null==this.m_columnHeaderLevelCount&&(this.m_columnHeaderLevelCount=e.getLevelCount()),0!=this.m_columnHeaderLevelCount){if(a="column",l=e.getCount(),h=i>this.m_endColHeader,o=!1,u=null,d=h?this.m_endColHeaderPixel:this.m_startColHeaderPixel,c=this.m_endColHeader,p=this.m_columnHeaderLevelCount,_=this.getMappedStyle("colheader")+" "+this.getMappedStyle("header"),g=this.getMappedStyle("headercell")+" "+this.getMappedStyle("colheadercell"),r=!1,s=this.buildAxisHeaders(t,e,a,i,l,h,o,u,d,c,p,_,g,r),r)return s;m=s.totalHeaderDimension,f=s.totalLevelDimension,0==m||0!=this.m_avgColWidth&&void 0!=this.m_avgColWidth||(this.m_avgColWidth=m/l),this.m_colHeaderHeight||(this.m_colHeaderHeight=f,this.setElementHeight(t,this.m_colHeaderHeight)),h?(this.m_endColHeader=i+l-1,this.m_endColHeaderPixel=this.m_endColHeaderPixel+m):(this.m_startColHeader=this.m_startColHeader-l,this.m_startColHeaderPixel=this.m_startColHeaderPixel-m),n==-1&&(n=this.m_endColHeader),!this._isCountUnknown("column")&&this._isHighWatermarkScrolling()&&this.m_endColHeader+1>=n?this.m_stopColumnHeaderFetch=!0:this.m_stopColumnHeaderFetch=s.stopFetch,0==this.m_startColHeader&&0!=this.m_startColHeaderPixel&&(this._shiftHeadersAlongAxisInContainer(t.firstChild,0,this.m_startColHeaderPixel*-1,this.getResources().isRTLMode()?"right":"left",this.getMappedStyle("colheadercell")),this.m_startColHeaderPixel=0)}},i.prototype.buildColumnEndHeaders=function(t,e,i,n,o,r){var s,a,l,h,u,d,c,p,_,g,m,f;if(null==this.m_columnEndHeaderLevelCount&&(this.m_columnEndHeaderLevelCount=e.getLevelCount()),0!=this.m_columnEndHeaderLevelCount){if(a="columnEnd",l=e.getCount(),h=i>this.m_endColEndHeader,o=!1,u=null,d=h?this.m_endColEndHeaderPixel:this.m_startColEndHeaderPixel,c=this.m_endColEndHeader,p=this.m_columnEndHeaderLevelCount,_=this.getMappedStyle("colendheader")+" "+this.getMappedStyle("endheader"),g=this.getMappedStyle("endheadercell")+" "+this.getMappedStyle("colendheadercell"),r=!1,s=this.buildAxisHeaders(t,e,a,i,l,h,o,u,d,c,p,_,g,r),r)return s;m=s.totalHeaderDimension,f=s.totalLevelDimension,0==m||0!=this.m_avgColWidth&&void 0!=this.m_avgColWidth||(this.m_avgColWidth=m/l),this.m_colEndHeaderHeight||(this.m_colEndHeaderHeight=f,this.setElementHeight(t,this.m_colEndHeaderHeight)),h?(this.m_endColEndHeader=i+l-1,this.m_endColEndHeaderPixel=this.m_endColEndHeaderPixel+m):(this.m_startColEndHeader=this.m_startColEndHeader-l,this.m_startColEndHeaderPixel=this.m_startColEndHeaderPixel-m),n==-1&&(n=this.m_endColEndHeader),!this._isCountUnknown("column")&&this._isHighWatermarkScrolling()&&this.m_endColEndHeader+1>=n?this.m_stopColumnEndHeaderFetch=!0:this.m_stopColumnEndHeaderFetch=s.stopFetch,0==this.m_startColEndHeader&&0!=this.m_startColEndHeaderPixel&&(this._shiftHeadersAlongAxisInContainer(t.firstChild,0,this.m_startColEndHeaderPixel*-1,this.getResources().isRTLMode()?"right":"left",this.getMappedStyle("colendheadercell")),this.m_startColEndHeaderPixel=0)}},i.prototype.buildRowHeaders=function(t,e,i,n,o,r){var s,a,l,h,u,d,c,p,_,g,m,f,y;if(null==this.m_rowHeaderLevelCount&&(this.m_rowHeaderLevelCount=e.getLevelCount()),0!=this.m_rowHeaderLevelCount){if(a="row",l=e.getCount(),h=i>this.m_endRowHeader,d=h?this.m_endRowHeaderPixel:this.m_startRowHeaderPixel,o?(u=t.firstChild.childNodes[i-this.m_startRowHeader],d=this.getElementDir(u,"top")):u=null,c=this.m_endRowHeader,p=this.m_rowHeaderLevelCount,_=this.getMappedStyle("rowheader")+" "+this.getMappedStyle("header"),g=this.getMappedStyle("row")+" "+this.getMappedStyle("headercell")+" "+this.getMappedStyle("rowheadercell"),s=this.buildAxisHeaders(t,e,a,i,l,h,o,u,d,c,p,_,g,r),m=s.totalHeaderDimension,f=s.totalLevelDimension,r)return s;0==m||0!=this.m_avgRowHeight&&void 0!=this.m_avgRowHeight||(this.m_avgRowHeight=m/l),this.m_rowHeaderWidth||(this.m_rowHeaderWidth=f,this.setElementWidth(t,this.m_rowHeaderWidth)),h?(this.m_endRowHeader!=-1&&0!=l&&(y=t.firstChild.childNodes[this.m_endRowHeader-this.m_startRowHeader],null!=y&&this.m_utils.removeCSSClassName(y,this.getMappedStyle("borderHorizontalNone"))),this.m_endRowHeader=i+l-1,this.m_endRowHeaderPixel=this.m_endRowHeaderPixel+m):o?(i<this.m_startRowHeader&&(this.m_startRowHeader=i,this.m_startRowHeaderPixel=Math.max(0,this.m_startRowHeaderPixel-m)),this.m_endRowHeader=this.m_endRowHeader+l,this.m_endRowHeaderPixel=Math.max(0,this.m_endRowHeaderPixel+m),this.pushRowHeadersDown(u,m)):(this.m_startRowHeader=Math.max(0,this.m_startRowHeader-l),this.m_startRowHeaderPixel=this.m_startRowHeaderPixel-m),n==-1&&(n=this.m_endRowHeader),!this._isCountUnknown("row")&&this._isHighWatermarkScrolling()&&this.m_endRowHeader+1>=n?this.m_stopRowHeaderFetch=!0:this.m_stopRowHeaderFetch=s.stopFetch,0==this.m_startRowHeader&&0!=this.m_startRowHeaderPixel&&(this._shiftHeadersAlongAxisInContainer(t.firstChild,0,this.m_startRowHeaderPixel*-1,"top",this.getMappedStyle("rowheadercell")),this.m_startRowHeaderPixel=0)}},i.prototype.buildRowEndHeaders=function(t,e,i,n,o,r){var s,a,l,h,u,d,c,p,_,g,m,f,y;if(null==this.m_rowEndHeaderLevelCount&&(this.m_rowEndHeaderLevelCount=e.getLevelCount()),0!=this.m_rowEndHeaderLevelCount){if(a="rowEnd",l=e.getCount(),h=i>this.m_endRowEndHeader,d=h?this.m_endRowEndHeaderPixel:this.m_startRowEndHeaderPixel,o?(u=t.firstChild.childNodes[i-this.m_startRowEndHeader],d=this.getElementDir(u,"top")):u=null,c=this.m_endRowEndHeader,p=this.m_rowEndHeaderLevelCount,_=this.getMappedStyle("rowendheader")+" "+this.getMappedStyle("endheader"),g=this.getMappedStyle("row")+" "+this.getMappedStyle("endheadercell")+" "+this.getMappedStyle("rowendheadercell"),s=this.buildAxisHeaders(t,e,a,i,l,h,o,u,d,c,p,_,g,r),r)return s;if(m=s.totalHeaderDimension,f=s.totalLevelDimension,r)return s;0==m||0!=this.m_avgRowHeight&&void 0!=this.m_avgRowHeight||(this.m_avgRowHeight=m/l),this.m_rowEndHeaderWidth||(this.m_rowEndHeaderWidth=f,this.setElementWidth(t,this.m_rowEndHeaderWidth)),h?(this.m_endRowEndHeader!=-1&&0!=l&&(y=t.firstChild.childNodes[this.m_endRowEndHeader-this.m_startRowEndHeader],null!=y&&this.m_utils.removeCSSClassName(y,this.getMappedStyle("borderHorizontalNone"))),this.m_endRowEndHeader=i+l-1,this.m_endRowEndHeaderPixel=this.m_endRowEndHeaderPixel+m):o?(i<this.m_startRowEndHeader&&(this.m_startRowEndHeader=i,this.m_startRowEndHeaderPixel=Math.max(0,this.m_startRowEndHeaderPixel-m)),this.m_endRowEndHeader=this.m_endRowEndHeader+l,this.m_endRowEndHeaderPixel=Math.max(0,this.m_endRowEndHeaderPixel+m),this.pushRowHeadersDown(u,m)):(this.m_startRowEndHeader=Math.max(0,this.m_startRowEndHeader-l),this.m_startRowEndHeaderPixel=this.m_startRowEndHeaderPixel-m),n==-1&&(n=this.m_endRowEndHeader),!this._isCountUnknown("row")&&this._isHighWatermarkScrolling()&&this.m_endRowEndHeader+1>=n?this.m_stopRowEndHeaderFetch=!0:this.m_stopRowEndHeaderFetch=s.stopFetch,0==this.m_startRowEndHeader&&0!=this.m_startRowEndHeaderPixel&&(this._shiftHeadersAlongAxisInContainer(t.firstChild,0,this.m_startRowEndHeaderPixel*-1,"top",this.getMappedStyle("rowendheadercell")),this.m_startRowEndHeaderPixel=0)}},i.prototype.buildAxisHeaders=function(t,e,i,n,o,r,s,a,l,h,u,d,c,p){var _,g,m,f,y,v,S,C,E,b,T,A,O;if(O=i.indexOf("column")!=-1,C=O?"height":"width",g=!1,f=0,y=0,A=0,T=0,!p){if(0==o&&this._isCountUnknown(i))return g=!0,{totalHeaderDimension:f,totalLevelDimension:y,stopFetch:g};_=t.firstChild,h==-1&&""==t.className&&(t.className=d,t.style[C]="",_.style[C]="")}for(m=this.m_options.getRenderer(i),v=document.createDocumentFragment(),S=0;o-S>0;)r?(E=n+S,A=O?l+f:0,T=O?0:l+f):(E=n+(o-1-S),A=O?l-f:0,T=O?0:l-f),b=this.buildLevelHeaders(v,E,0,A,T,r,s,m,e,i,c,u),S+=b.count,f+=b.totalHeaderDimension,b.totalLevelDimension>y&&(y=b.totalLevelDimension);return p?v:(r?_.appendChild(v):s?_.insertBefore(v,a):_.insertBefore(v,_.firstChild),t.hasChildNodes()||s||t.appendChild(_),{totalHeaderDimension:f,totalLevelDimension:y,stopFetch:g})},i.prototype._renderContent=function(t,e,i,n){var o;null!=t?(o=t.call(this,e),null!=o&&(null===o.parentNode||o.parentNode instanceof DocumentFragment?(i.appendChild(o),this.m_subtreeAttachedCallback(o)):null!=o.parentNode||o.toString&&i.appendChild(document.createTextNode(o.toString()))),this._disableAllFocusableElements(i)):(null!=n&&"object"==typeof n&&n.hasOwnProperty("data")&&(n=n.data),null==n&&(n=""),i.appendChild(document.createTextNode(n.toString())))},i.prototype.buildLevelHeaders=function(t,e,i,n,o,r,s,a,l,h,u,d){var c,p,_,g,m,f,y,v,S,C,E,b,T,A,O,P,I,D,x,M,L,R,w,N,U,B,H,k,F,G,j,V,Y;if(D=0,F=0,M=0,L=0,"row"===h?(Y="row",V=this.m_rowHeader,c="width",A=this.m_rowHeaderLevelWidths,p="height",_="top",g=o,m=this.getResources().isRTLMode()?"right":"left",f=n,y=this.m_startRowHeader,v=this.m_endRowHeader):"rowEnd"==h?(Y="row",V=this.m_rowEndHeader,c="width",A=this.m_rowEndHeaderLevelWidths,p="height",_="top",g=o,m=this.getResources().isRTLMode()?"left":"right",f=n,y=this.m_startRowEndHeader,v=this.m_endRowEndHeader):"column"==h?(Y="column",V=this.m_colHeader,c="height",A=this.m_columnHeaderLevelHeights,p="width",_=this.getResources().isRTLMode()?"right":"left",g=n,m="top",f=o,y=this.m_startColHeader,v=this.m_endColHeader):(Y="column",V=this.m_colEndHeader,c="height",A=this.m_columnEndHeaderLevelHeights,p="width",_=this.getResources().isRTLMode()?"right":"left",g=n,m="bottom",f=o,y=this.m_startColEndHeader,v=this.m_endColEndHeader),S=l.getExtent(e,i),C=S.extent,E=S.more.before,b=S.more.after,U=l.getDepth(e,i),E&&e===v+1){for(T=this._getHeaderContainer(e-1,i,0,null,V,d),this._setAttribute(T,"extent",this._getAttribute(T,"extent",!0)+C),O=T.firstChild,D=this.getElementDir(O,c),I=0;I<C;)P="column"===h||"columnEnd"===h?this.buildLevelHeaders(T,e+I,i+U,g,f+D,r,s,a,l,h,u,d):this.buildLevelHeaders(T,e+I,i+U,f+D,g,r,s,a,l,h,u,d),g+=P.totalHeaderDimension,M+=P.totalHeaderDimension,L+=P.count,I+=P.count;this.setElementDir(O,this.getElementDir(O,p)+M,p)}else if(b&&e===y-1){for(T=this._getHeaderContainer(e+1,i,0,null,V,d),this._setAttribute(T,"extent",this._getAttribute(T,"extent",!0)+C),this._setAttribute(T,"start",this._getAttribute(T,"start",!0)-C),O=T.firstChild,D=this.getElementDir(O,c),I=0;I<C;)P="column"===h||"columnEnd"===h?this.buildLevelHeaders(T,e-I,i+U,g,f+D,r,s,a,l,h,u,d):this.buildLevelHeaders(T,e-I,i+U,f+D,g,r,s,a,l,h,u,d),g-=P.totalHeaderDimension,M+=P.totalHeaderDimension,L+=P.count,I+=P.count;this.setElementDir(O,this.getElementDir(O,p)+M,p),this.setElementDir(O,g,_)}else{if(R=l.getData(e,i),w=l.getMetadata(e,i),O=document.createElement("div"),N=this.createHeaderContext(h,e,R,w,O,i,C,U),O.id=this._createHeaderId(h,N.key),O[this.getResources().getMappedAttribute("context")]=N,B=this.m_options.getInlineStyle(h,N),H=this.m_options.getStyleClass(h,N),null!=B&&(O.style.cssText=B),O.className=u,O.className+=" "+this.getMappedStyle("depth")+U,null!=H&&(O.className+=" "+H),D=this._getHeaderLevelDimension(i,O,A,c,U),this.setElementDir(O,g,_),this.setElementDir(O,f,m),this.setElementDir(O,D,c),x=this._getHeaderDimension(O,N.key,Y,p),this._setAttribute(O,"depth",U),i!=d-1&&(T=document.createElement("div"),T.className=this.getMappedStyle("groupingcontainer"),T.appendChild(O),this._setAttribute(T,"start",r?e:e-C+1),this._setAttribute(T,"extent",C),this._setAttribute(T,"level",i)),i+U==d)this.setElementDir(O,x,p),M+=x,L++,F=D,r||s||(g-=x,this.setElementDir(O,g,_));else{for(I=0;I<C;I++)k=r?e+I:e-I,P="column"===h||"columnEnd"===h?this.buildLevelHeaders(T,k,i+U,g,f+D,r,s,a,l,h,u,d):this.buildLevelHeaders(T,k,i+U,f+D,g,r,s,a,l,h,u,d),x=P.totalHeaderDimension,g=r?g+x:g-x,M+=x,L+=P.count,I+=P.count-1;F=D+P.totalLevelDimension,r||s||this.setElementDir(O,g,_),this.setElementDir(O,M,p)}"columnEnd"==h&&this.m_addBorderBottom&&this.m_utils.addCSSClassName(O,this.getMappedStyle("borderHorizontalSmall")),"rowEnd"==h&&this.m_addBorderRight&&this.m_utils.addCSSClassName(O,this.getMappedStyle("borderVerticalSmall")),this._isHeaderResizeEnabled(h,N)&&this._setAttribute(O,"resizable","true"),null!=T?this.m_root.appendChild(T):this.m_root.appendChild(O),this._renderContent(a,N,O,R),"column"===h&&this._isSortEnabled(h,N)&&(null!=w.sortDirection&&null==this.m_sortInfo&&(this.m_sortInfo={},this.m_sortInfo.key=w.key,this.m_sortInfo.direction=w.sortDirection,this.m_sortInfo.axis=h),j=this._buildSortIcon(N),O.appendChild(j),this._setAttribute(O,"sortable","true")),r?null!=T?t.appendChild(T):t.appendChild(O):null!=T?t.firstChild?this.m_utils.containsCSSClassName(t.firstChild,this.getMappedStyle("groupingcontainer"))?t.insertBefore(T,t.firstChild):(this.m_utils.containsCSSClassName(t.firstChild,this.getMappedStyle("headercell"))||this.m_utils.containsCSSClassName(t.firstChild,this.getMappedStyle("endheadercell")))&&t.insertBefore(T,t.firstChild.nextSibling):t.appendChild(T):this.m_utils.containsCSSClassName(t,this.getMappedStyle("groupingcontainer"))?t.insertBefore(O,t.firstChild.nextSibling):t.insertBefore(O,t.firstChild)}return"column"===h||"columnEnd"===h?this._isLastColumn(e+C-1)&&this.m_utils.addCSSClassName(O,this.getMappedStyle("borderVerticalNone")):this._isLastRow(e+C-1)&&!s&&this.m_utils.addCSSClassName(O,this.getMappedStyle("borderHorizontalNone")),G={},G.totalLevelDimension=F,G.totalHeaderDimension=M,G.count=L,G},i.prototype._getHeaderLevelDimension=function(t,e,i,n,o){for(var r=0,s=0,a=0;a<o;a++){if(s=i[t+a],null==s){r=null;break}r+=s}return null!=r?r:(r=this.getElementDir(e,n),1==o&&(i[t]=r),r)},i.prototype._getHeaderContainer=function(t,e,i,n,o,r){var s,a,l,h;if(null==n?(n=o.firstChild.childNodes,h=0):h=1,i===r-1)return n[0].parentNode;for(;h<n.length;){if(s=this._getAttribute(n[h],"start",!0),a=this._getAttribute(n[h],"extent",!0),l=this._getAttribute(n[h].firstChild,"depth",!0),t>=s&&t<s+a)return e<i+l?n[h]:this._getHeaderContainer(t,e,i+l,n[h].childNodes,o,r);h++}return null},i.prototype._getHeaderByIndex=function(t,e,i,n,o){var r,s,a,l;return e<0?null:1===n?(s=i.firstChild.childNodes,r=t-o,s[r]):(a=this._getHeaderContainer(t,e,0,null,i,n),null==a?null:e<=this._getAttribute(a,"level",!0)+this._getAttribute(a.firstChild,"depth",!0)-1?a.firstChild:(l=this._getAttribute(a,"start",!0),r=t-l+1,a.childNodes[r]))},i.prototype._getColumnHeaderLevelHeight=function(t,e){var i;return null==this.m_columnHeaderLevelHeights&&(this.m_columnHeaderLevelHeights=[]),i=this.m_columnHeaderLevelHeights[t],null!=i?i:(i=this.getElementHeight(e),this.m_columnHeaderLevelHeights[t]=i,i)},i.prototype._getAttribute=function(t,e,i){var n=t.getAttribute(this.getResources().getMappedAttribute(e));return i?parseInt(n,10):n},i.prototype._setAttribute=function(t,e,i){t.setAttribute(this.getResources().getMappedAttribute(e),i)},i.prototype.buildDatabody=function(){var t,e;return t=document.createElement("div"),t.id=this.createSubId("databody"),t.className=this.getMappedStyle("databody"),t.tabIndex="-1",this.m_databody=t,t.addEventListener?t.addEventListener("scroll",this.handleScroll.bind(this),!1):t.attachEvent("onscroll",this.handleScroll.bind(this)),e=document.createElement("div"),e.className=this.getMappedStyle("scroller")+(this.m_utils.isTouchDevice()?" "+this.getMappedStyle("scroller-mobile"):""),t.appendChild(e),this.fetchCells(t,0,0),t},i.prototype.fetchCells=function(t,e,i,n,o,r){var s,a,l;this.m_fetching.cells||(null==n&&(n=this.getFetchSize("row")),null==o&&(o=this.getFetchSize("column")),s={axis:"row",start:e,count:n},a={axis:"column",start:i,count:o,databody:t},this.m_fetching.cells={rowRange:s,columnRange:a},l=null!=r&&null!=r.success?r.success:this.handleCellsFetchSuccess,this.showStatusText(),this._signalTaskStart(),this.getDataSource().fetchCells([s,a],{success:l,error:this.handleCellsFetchError},{success:this,error:this}))},i.prototype.isCellFetchResponseValid=function(t){var e,i,n;return e=t[0],i=t[1],null!=this.m_fetching&&(n=this.m_fetching.cells,e==n.rowRange&&i==n.columnRange)},i.prototype.isLongScroll=function(){return this.m_isLongScroll},i.prototype.isCellFetchResponseInViewport=function(t,e){var i,n,o,r,s,a;return!(!isNaN(this.m_avgRowHeight)&&!isNaN(this.m_avgColWidth)&&null==this.m_empty&&this.m_initialized)||(i=e[0],n=i.start,o=e[1],r=o.start,s=this._getLongScrollStart(this.m_currentScrollTop,this.m_prevScrollTop,"row"),a=this._getLongScrollStart(this.m_currentScrollLeft,this.m_prevScrollLeft,"column"),s.start==n&&a.start==r)},i.prototype.handleCellsFetchSuccess=function(t,e,n){var o,r,s,a,l,h,u,d,c,p,_,g,m,f,y,v,S,C,E,b,T,A,O,P,I,D,x;if(o=this.getDataSource().getCount("row"),r=this.getDataSource().getCount("column"),P=this,O=i.EXPAND_ANIMATION_DURATION,void 0===n){if(n=!1,!this.isCellFetchResponseValid(e))return void this._signalTaskEnd();if(this.isLongScroll()&&(!this.isCellFetchResponseInViewport(t,e)||this.m_headerInvalid))return this.m_fetching.cells=!1,this.m_headerInvalid=!1,this.handleLongScroll(this.m_currentScrollLeft,this.m_currentScrollTop),void this._signalTaskEnd();this.m_isLongScroll=!1}if(s=this.getDefaultRowHeight(),a=e[0],l=a.start,h=t.getCount("row"),u=h>0&&(l>this.m_endRow||l+h<=this.m_startRow),(0==h&&this._isCountUnknown("row")&&a.count>0||u&&this._isHighWatermarkScrolling()&&!this._isCountUnknown("row")&&this.m_endRow+h+1>=o||h<a.count)&&(this.m_stopRowFetch=!0),d=e[1],c=d.start,p=t.getCount("column"),_=p>0&&(c>this.m_endCol||c+p==this.m_startCol),(0==p&&this._isCountUnknown("column")&&d.count>0||_&&this._isHighWatermarkScrolling()&&!this._isCountUnknown("column")&&this.m_endCol+p+1>=r||p<d.count)&&(this.m_stopColumnFetch=!0),g=this.m_databody,null==g&&(g=d.databody),y=g.firstChild,u||n)if(S=!n&&l>=this.m_startRow,S?(f=y.childNodes[l-this.m_startRow],m=this.m_endRowPixel):n?(f=y.childNodes[l-this.m_startRow],m=this.getElementDir(f,"top")):m=this.m_startRowPixel,C=document.createDocumentFragment(),x=this._addRows(C,S||n,m,l,h,c,_,t),E=x.totalRowHeight,A=x.avgWidth,T=E/h,S){if(y.appendChild(C),this.m_endRow!=-1&&0!=h&&(D=y.childNodes[this.m_endRow-this.m_startRow],null!=D))for(D=D.childNodes,b=0;b<D.length;b+=1)this.m_utils.removeCSSClassName(D,this.getMappedStyle("borderHorizontalNone"));this.m_endRow=l+h-1,this.m_endRowPixel=this.m_endRowPixel+E}else n?(y.insertBefore(C,f),l<this.m_startRow&&(this.m_startRow=l,this.m_startRowPixel=Math.max(0,this.m_startRowPixel-E)),this.m_endRow=this.m_endRow+h,this.m_endRowPixel=this.m_endRowPixel+E,this.pushRowsDown(f,E)):(y.insertBefore(C,y.firstChild),this.m_startRow=this.m_startRow-h,this.m_startRowPixel=this.m_startRowPixel-E);else _&&(I=y.childNodes,h==I.length&&(A=this._addColumns(I,l,h,c,t)));void 0==A||0!=this.m_avgColWidth&&void 0!=this.m_avgColWidth||(this.m_avgColWidth=A),void 0==T||0!=this.m_avgRowHeight&&void 0!=this.m_avgRowHeight||(this.m_avgRowHeight=T),this._sizeDatabodyScroller(),_&&(c<this.m_startCol?this.m_startCol=this.m_startCol-p:this.m_endCol=c+p-1),this.m_endCol>=0&&this.m_endRow>=0&&(this.m_hasCells=!0),0==this.m_startCol&&0!=this.m_startColPixel&&(this._shiftCellsInRows(-1*this.m_startColPixel,!1,null,0,this.m_endCol,null,this.getResources().isRTLMode()?"right":"left"),this.m_startColPixel=0),0==this.m_startRow&&0!=this.m_startRowPixel&&(this.pushRowsDown(this.m_databody.firstChild.firstChild,-this.m_startRowPixel),this.m_startRowPixel=0),this.m_fetching.cells=!1,this.m_initialized&&this._syncScroller(),this.isFetchComplete()&&(this.hideStatusText(),null!=this.m_scrollIndexAfterFetch?this.scrollToIndex(this.m_scrollIndexAfterFetch):null!=this.m_scrollHeaderAfterFetch?this.scrollToHeader(this.m_scrollHeaderAfterFetch):this.isActionableMode()||null==this._getActiveElement()||this.m_utils.containsCSSClassName(this._getActiveElement(),this.getMappedStyle("focus"))||(1!=this.m_shouldFocus&&(this.m_shouldFocus=!1),this._highlightActive(),this._manageMoveCursor()),this._isSelectionEnabled()&&this.applySelection(l,l+h,c,c+p),
this.populateAccInfo(),this.m_utils.isTouchDevice()&&window.hasOwnProperty("WebKitCSSMatrix")&&(g.style.webkitTransform="translate3d(0, 0, 0)",null!=this.m_rowHeader&&(this.m_rowHeader.style.webkitTransform="translate3d(0, 0, 0)"),null!=this.m_colHeader&&(this.m_colHeader.style.webkitTransform="translate3d(0, 0, 0)"),null!=this.m_rowEndHeader&&(this.m_rowEndHeader.style.webkitTransform="translate3d(0, 0, 0)"),null!=this.m_colEndHeader&&(this.m_colEndHeader.style.webkitTransform="translate3d(0, 0, 0)")),this._shouldInitialize()?this._handleInitialization(!0):this.m_initialized&&((1==this.m_resizeRequired||this.m_endRowPixel-E<this.getElementHeight(g)&&this.m_endRowPixel>this.getElementHeight(g))&&this.resizeGrid(),u?S?v="top":n||(v="bottom"):_&&(v=c==this.m_startCol?"right":"left"),this._cleanupViewport(v),this.fillViewport(),this.isFetchComplete()&&this.fireEvent("ready",{}))),this._signalTaskEnd()},i.prototype._insertRowsWithAnimation=function(t,e,n,o,r){var s,a,l,h,u,d,c,p,_,g,m,f,y,v,S,C,E,b,T,A,O;for(s=this,s._signalTaskStart(),a=o>this.m_endRow,l=this.m_databody.firstChild,h=null!=e,E=null!=n,d=l.childNodes[o-this.m_startRow-1],p=this.getElementDir(d,"top"),_=p+this.getElementHeight(d),this.changeStyleProperty(d,this.getCssSupport("z-index"),10),h&&(u=this.m_rowHeader.firstChild,c=u.childNodes[o-this.m_startRow-1],this.changeStyleProperty(c,this.getCssSupport("z-index"),10)),E&&(b=this.m_rowEndHeader.firstChild,T=b.childNodes[o-this.m_startRow-1],this.changeStyleProperty(T,this.getCssSupport("z-index"),10)),g=0;g<t.childNodes.length;g++)m=t.childNodes[g],y=_+this.getElementDir(m,"top"),v=p-y,this.setElementDir(m,y,"top"),this.addTransformMoveStyle(m,0,0,"linear",0,v,0),h&&(f=e.childNodes[g],this.setElementDir(f,y,"top"),this.addTransformMoveStyle(f,0,0,"linear",0,v,0)),E&&(A=n.childNodes[g],this.setElementDir(A,y,"top"),this.addTransformMoveStyle(A,0,0,"linear",0,v,0));for(g=o-this.m_startRow;g<l.childNodes.length;g++)m=l.childNodes[g],y=r+this.getElementDir(m,"top"),v=-r,this.setElementDir(m,y,"top"),this.addTransformMoveStyle(m,0,0,"linear",0,v,0),h&&(f=u.childNodes[g],this.setElementDir(f,y,"top"),this.addTransformMoveStyle(f,0,0,"linear",0,v,0)),E&&(A=b.childNodes[g],this.setElementDir(A,y,"top"),this.addTransformMoveStyle(A,0,0,"linear",0,v,0));this.m_endRow+=t.childNodes.length,this.m_endRowPixel+=r,h&&(this.m_endRowHeader+=e.childNodes.length,this.m_endRowHeaderPixel+=r),E&&(this.m_endRowEndHeader+=e.childNodes.length,this.m_endRowEndHeaderPixel+=r),a?(l.appendChild(t),h&&u.appendChild(e),E&&b.appendChild(n)):(l.insertBefore(t,d.nextSibling),h&&u.insertBefore(e,c.nextSibling),E&&b.insertBefore(n,T.nextSibling)),this.setElementHeight(l,this.m_endRowPixel-this.m_startRowPixel),this.resizeGrid(),this.updateRowBanding(),S=l.lastChild,C=function(){s._handleAnimationEnd(),S.removeEventListener("transitionend",C,!1)},S.addEventListener("transitionend",C,!1),this.m_animating=!0,O=s.m_processingEventQueue?1:i.EXPAND_ANIMATION_DURATION,setTimeout(function(){var t,e;for(O=i.EXPAND_ANIMATION_DURATION,e="ease-out",t=l.childNodes.length-1;t>=o-s.m_startRow;t--)s.addTransformMoveStyle(l.childNodes[t],O+"ms",0,e,0,0,0),h&&s.addTransformMoveStyle(u.childNodes[t],O+"ms",0,e,0,0,0),E&&s.addTransformMoveStyle(b.childNodes[t],O+"ms",0,e,0,0,0)},0)},i.prototype._addColumns=function(t,e,i,n,o){var r,s,a,l,h,u,d,c;for(r=this.m_options.getRenderer("cell"),s=this.m_options.getColumnBandingInterval(),a=this.m_options.getHorizontalGridlines(),l=this.m_options.getVerticalGridlines(),d=0;d<i;d+=1)h=t[d],c=this.addCellsToRow(o,h,e+d,r,!1,n,d==i-1,s,a,l),u=c.avgWidth;return u},i.prototype._addRows=function(t,e,i,n,o,r,s,a){var l,h,u,d,c,p,_,g,m,f,y,v;for(l=this.m_options.getRenderer("cell"),h=this.m_options.getColumnBandingInterval(),u=this.m_options.getRowBandingInterval(),d=this.m_options.getHorizontalGridlines(),c=this.m_options.getVerticalGridlines(),g=0,y=0;y<o;y+=1)m=e?n+y:n+(o-1-y),p=document.createElement("div"),p.className=this.getMappedStyle("row"),Math.floor(m/u)%2===1&&(p.className+=" "+this.getMappedStyle("banded")),this.m_root.appendChild(p),v=this.addCellsToRow(a,p,m,l,!0,r,y==o-1&&s,h,d,c,i),_=v.avgWidth,f=v.height,g+=f,e?(p.style.top=i+"px",i+=f,t.appendChild(p)):(i-=f,p.style.top=i+"px",t.insertBefore(p,t.firstChild));return{avgWidth:_,totalRowHeight:g,top:i}},i.prototype.pushRowsDown=function(t,e){for(;t;){var i=this.getElementDir(t,"top")+e;t.style.top=i+"px",t=t.nextSibling}},i.prototype.pushRowsUp=function(t,e){this.pushRowsDown(t,-e)},i.prototype.pushRowHeadersDown=function(t,e){for(;t;){var i=this.getElementDir(t,"top")+e;t.style.top=i+"px",t=t.nextSibling}},i.prototype.pushRowHeadersUp=function(t,e){this.pushRowsDown(t,-e)},i.prototype.createCellContext=function(t,e,i,n){var o,r;o={},o.parentElement=n,o.indexes=t,o.cell=e,o.data=null!=e&&"object"==typeof e&&e.hasOwnProperty("data")?e.data:e,o.component=this,o.datasource=this.getDataSource(),o.mode="navigation";for(r in i)i.hasOwnProperty(r)&&(o[r]=i[r]);return null!=this.m_createContextCallback&&this.m_createContextCallback.call(this,o),this.m_fixContextCallback.call(this,o)},i.prototype._createCellId=function(t){return this.createSubId("r"+t.row+"c"+t.column)},i.prototype._createHeaderId=function(t,e){var i;return i="columnEnd"==t?"ce":"rowEnd"==t?"re":t.charAt(0),this.createSubId(i+e)},i.prototype.createCellElement=function(t){return document.createElement("div")},i.prototype.getRowHeaderWidth=function(){return this.m_endRowHeader===-1?0:this.m_rowHeaderWidth},i.prototype.getColumnHeaderHeight=function(){return this.m_endColHeader===-1?0:this.m_colHeaderHeight},i.prototype.getRowEndHeaderWidth=function(){return this.m_endRowEndHeader===-1?0:this.m_rowEndHeaderWidth},i.prototype.getColumnEndHeaderHeight=function(){return this.m_endColEndHeader===-1?0:this.m_colEndHeaderHeight},i.prototype.getRowBottom=function(t,e){var i,n,o;return i=this.getColumnHeaderHeight(),null!=e?i+e:(n=this.getElementDir(t,"top"),o=this.calculateRowHeight(t),isNaN(n)||isNaN(o)?i:i+n+o)},i.prototype.addCellsToRow=function(t,e,i,n,o,r,s,a,l,h,u){var d,c,p,_,g,m,f,y,v,S,C,E,b,T,A,O,P,I,D,x,M,L;for(d=r>=this.m_startCol,c=e.firstChild,_=o||!d?this.m_startColPixel:this.m_endColPixel,this.m_utils.isTouchDevice()&&this.m_utils.containsCSSClassName(e.lastChild,this.getMappedStyle("toucharea"))&&(P=this.m_utils.containsCSSClassName(e.children[e.children.length-2],this.getMappedStyle("toucharea"))?e.children[e.children.length-2]:e.lastChild),g=this.getResources().isRTLMode()?"right":"left",m=0,f=t.getCount("column"),E=0;E<f;E+=1)O=d||o?r+E:r+(f-1-E),y={row:i,column:O},v=t.getData(y),S=t.getMetadata(y),b=this.createCellElement(S),b.setAttribute("tabIndex",-1),C=this.createCellContext(y,v,S,b),b.id=this._createCellId(C.keys),b[this.getResources().getMappedAttribute("context")]=C,null==this._getKey(e)&&(M=C.keys.row,this._setKey(e,M),this.m_endRowHeader==-1?(I=this.createHeaderContext("row",i,null,{key:M},null,0,0,1),T=this.m_options.getInlineStyle("row",I),D=this.m_options.getStyleClass("row",I),L=document.createElement("div"),L.style.cssText=T,L.className=this.getMappedStyle("row")+" "+D,x=this._getHeaderDimension(L,M,"row","height")):x=this._getHeaderDimension(e,M,"row","height"),this.setElementHeight(e,x)),T=this.m_options.getInlineStyle("cell",C),null!=T&&(b.style.cssText=T),""!=b.style.height&&(b.style.height=""),""!=b.style.width&&(b.style.width=""),this.m_utils.addCSSClassName(b,this.getMappedStyle("cell")),this.m_utils.addCSSClassName(b,this.getMappedStyle("formcontrol")),Math.floor(O/a)%2===1&&this.m_utils.addCSSClassName(b,this.getMappedStyle("banded")),p=this.m_options.getStyleClass("cell",C),null!=p&&this.m_utils.addCSSClassName(b,p),this.m_endColHeader!=-1||0!=i||this.m_initialized?A=this._getHeaderDimension(b,C.keys.column,"column","width"):(I=this.createHeaderContext("column",O,null,{key:C.keys.column},null,0,0,1),T=this.m_options.getInlineStyle("column",I),D=this.m_options.getStyleClass("column",I),L=document.createElement("div"),L.style.cssText=T,L.className=this.getMappedStyle("colheadercell")+" "+this.getMappedStyle("headercell")+" "+D,A=this._getHeaderDimension(L,C.keys.column,"column","width")),this.setElementWidth(b,A),("hidden"===h||this._isLastColumn(O)&&(this.getRowHeaderWidth()+_+A>=this.getWidth()||this.m_endRowEndHeader!=-1))&&this.m_utils.addCSSClassName(b,this.getMappedStyle("borderVerticalNone")),"hidden"===l?this.m_utils.addCSSClassName(b,this.getMappedStyle("borderHorizontalNone")):this._isLastRow(i)&&(null!=u&&O==r&&(u+=this.getElementHeight(e)),(this.getRowBottom(e,u)>=this.getHeight()||this.m_endColEndHeader!=-1)&&this.m_utils.addCSSClassName(b,this.getMappedStyle("borderHorizontalNone"))),d||o?this.setElementDir(b,_,g):this.setElementDir(b,_-A,g),d||o?P?(e.insertBefore(b,P),_+=A):(e.appendChild(b),_+=A):(e.insertBefore(b,c),c=b,_-=A),this._renderContent(n,C,b,v),s&&(d||o?this.m_endColPixel=this.m_endColPixel+A:this.m_startColPixel=this.m_startColPixel-A,m+=A);return s&&f>0?{avgWidth:m/f,height:x}:{avgWidth:null,height:x}},i.prototype.handleCellsFetchError=function(t,e){var i,n;this.m_fetching.cells=!1,this.hideStatusText(),null==this.m_databody.firstChild?this._shouldInitialize()&&this._handleInitialization(!0):(i=e[0],n=e[1],n.start+n.count-1>this.m_endCol&&(this.m_stopColumnFetch=!0,this.m_stopColumnHeaderFetch=!0,this.m_stopColumnEndHeaderFetch=!0),i.start+i.count-1>this.m_endRow&&(this.m_stopRowFetch=!0,this.m_stopRowHeaderFetch=!0,this.m_stopRowEndHeaderFetch=!0))},i.prototype.showStatusText=function(){var t,e;e=this.getResources().getTranslatedText("msgFetchingData"),"block"!=this.m_status.style.display&&(this.m_status.textContent=e,this.m_status.style.display="block",t=this.getWidth()/2-this.m_status.offsetWidth/2,this.m_status.style.left=t+"px")},i.prototype.hideStatusText=function(){this.m_status.style.display="none"},i.prototype.getFocusableElementsInNode=function(t,e){var i,n,o,r,s,a;if(i=[],a=this.getResources().getMappedAttribute("tabMod"),document.evaluate)for(n=document.evaluate(".//*[@tabindex>=0]|.//*[@"+a+">=0]|.//input|.//select|.//textarea|.//button|.//a|.//INPUT|.//SELECT|.//TEXTAREA|.//BUTTON|.//A",t,null,XPathResult.ANY_TYPE,null),o=n.iterateNext();o;)!o.disabled&&"none"!=o.style.display&&(e||!o.tabIndex||o.tabIndex>0||parseInt(o.getAttribute(a),10)>=0)&&i.push(o),o=n.iterateNext();else for(n=t.querySelectorAll("input, select, button, a, textarea, [tabIndex]:not([tabIndex='-1']), ["+a+"]:not(["+a+"='-1'])"),r=n.length,s=0;s<r;s+=1)o=n[s],!o.disabled&&"none"!=o.style.display&&(e||!o.tabIndex||o.tabIndex>=0||parseInt(o.getAttribute(a),10)>=0)&&i.push(o);return i},i.prototype.isElementVisible=function(t,e){return!0},i.prototype._disableAllFocusableElements=function(t){var e,i,n,o;for(o=this.getResources().getMappedAttribute("tabMod"),e=this.getFocusableElementsInNode(t),i=0;i<e.length;i++)n=parseInt(e[i].tabIndex,10),(isNaN(n)||n>=0)&&(e[i].setAttribute(o,isNaN(n)?-1:n),e[i].setAttribute("tabIndex",-1))},i.prototype._enableAllFocusableElements=function(t){var e,i,n,o;for(o=this.getResources().getMappedAttribute("tabMod"),e=this.getFocusableElementsInNode(t,!1),i=0;i<e.length;i++)n=parseInt(e[i].getAttribute(o),10),e[i].removeAttribute(o),n==-1?e[i].removeAttribute("tabIndex"):e[i].setAttribute("tabIndex",n)},i.prototype._isFocusableElement=function(t){var e=t.tagName;return"INPUT"===e||"TEXTAREA"===e||"SELECT"===e||"BUTTON"===e||"A"===e||null!=t.getAttribute("tabIndex")&&parseInt(t.getAttribute("tabIndex"),10)>=0&&this.findCell(t)!=t},i.prototype._isFocusableElementBeforeCell=function(t){if(null==t||t==this.getRootElement()||this.m_utils.containsCSSClassName(t,this.getMappedStyle("cell")))return!1;var e=t.tagName;return!!("INPUT"===e||"TEXTAREA"===e||"SELECT"===e||"BUTTON"===e||"A"===e||this.m_utils.containsCSSClassName(t,this.getMappedStyle("active"))||null!=t.getAttribute("tabIndex")&&parseInt(t.getAttribute("tabIndex"),10)>=0&&this.findCell(t)!=t)||this._isFocusableElementBeforeCell(t.parentNode)},i.prototype._setFocusToFirstFocusableElement=function(t){var e,i;if(e=this.getFocusableElementsInNode(t,!0),e.length>0){if(i=e[0],i.focus(),i.setSelectionRange&&i.value)try{i.setSelectionRange(i.value.length,i.value.length)}catch(t){}return this._overwriteFlag===!0&&"function"==typeof e[0].select&&i.select(),!0}return!1},i.prototype.handleScroll=function(t){if(!this.m_utils.isTouchDevice()){if(1==this.m_silentScroll)return void(this.m_silentScroll=!1);var e,i,n;t||(t=window.event),n=t.target?t.target:t.srcElement,e=this.m_utils.getElementScrollLeft(n),i=n.scrollTop,this.scrollTo(e,i)}},i.prototype._getMaxScrollWidth=function(){return this._isCountUnknownOrHighwatermark("column")&&!this.m_stopColumnFetch?Number.MAX_VALUE:this.m_scrollWidth},i.prototype._getMaxScrollHeight=function(){return this._isCountUnknownOrHighwatermark("row")&&!this.m_stopRowFetch?Number.MAX_VALUE:this.m_scrollHeight},i.prototype.scroll=function(t){var e,i;null!=t.position&&(e=Math.max(0,Math.min(this._getMaxScrollWidth(),t.position.scrollX)),i=Math.max(0,Math.min(this._getMaxScrollHeight(),t.position.scrollY)),this._initiateScroll(e,i))},i.prototype.scrollDelta=function(t,e){var i,n;0!=t&&0!=e&&(Math.abs(t)>Math.abs(e)?(e=0,this.m_extraScrollOverY=null):(t=0,this.m_extraScrollOverX=null)),i=Math.max(0,Math.min(this._getMaxScrollWidth(),this.m_currentScrollLeft-t)),n=Math.max(0,Math.min(this._getMaxScrollHeight(),this.m_currentScrollTop-e)),this._initiateScroll(i,n)},i.prototype._initiateScroll=function(t,e){this.m_utils.isTouchDevice()?this.scrollTo(t,e):(this.m_utils.setElementScrollLeft(this.m_databody,t),this.m_databody.scrollTop=e)},i.prototype._disableTouchScrollAnimation=function(){this.m_databody.firstChild.style.webkitTransitionDuration="0ms",this.m_rowHeader.firstChild.style.webkitTransitionDuration="0ms",this.m_colHeader.firstChild.style.webkitTransitionDuration="0ms"},i.prototype._shouldLongScroll=function(t,e){return!this._isHighWatermarkScrolling()&&(t+this.getViewportWidth()<this._getMaxLeftPixel()||e+this.getViewportHeight()<this._getMaxTopPixel()||t>this._getMaxRightPixel()||e>this._getMaxBottomPixel())},i.prototype.scrollTo=function(t,e){if(t!=this.m_currentScrollLeft&&(this.m_prevScrollLeft=this.m_currentScrollLeft,this.m_currentScrollLeft=t),e!=this.m_currentScrollTop&&(this.m_prevScrollTop=this.m_currentScrollTop,this.m_currentScrollTop=e),this.m_utils.isTouchDevice()||(this._shouldLongScroll(t,e)?this.handleLongScroll(t,e):this.fillViewport()),this._syncScroller(),this._adjustScrollerSize(),null!=this.m_cellToFocus){var n=this.m_cellToFocus;this.m_cellToFocus=null,this._setActive(n,null,!1)}null!=this.m_scrollIndexAfterFetch&&this._isInViewport(this.m_scrollIndexAfterFetch)===i.INSIDE&&(this._isDatabodyCellActive()&&this.m_scrollIndexAfterFetch.row==this.m_active.indexes.row&&this.m_scrollIndexAfterFetch.column==this.m_active.indexes.column&&this._highlightActive(),this.m_scrollIndexAfterFetch=null),null!=this.m_scrollHeaderAfterFetch&&(this._isDatabodyCellActive()||this.m_scrollHeaderAfterFetch.axis!=this.m_active.axis||this.m_scrollHeaderAfterFetch.index!=this.m_active.index||this.m_scrollHeaderAfterFetch.level!=this.m_active.level||this._highlightActive(),this.m_scrollHeaderAfterFetch=null),this.m_utils.isTouchDevice()||this.m_prevScrollTop===e&&this.m_prevScrollLeft===t||this.fireEvent("scroll",{event:null,ui:{scrollX:t,scrollY:e}})},i.prototype._scrollTransitionEnd=function(){var t;null!=this.m_scrollTransitionEnd&&(t=this.m_databody.firstChild,t.removeEventListener("webkitTransitionEnd",this.m_scrollTransitionEnd)),this._isSelectionEnabled()&&this._scrollTouchSelectionAffordance(),this.fireEvent("scroll",{event:null,ui:{scrollX:this.m_currentScrollLeft,scrollY:this.m_currentScrollTop}}),this._shouldLongScroll(this.m_currentScrollLeft,this.m_currentScrollTop)?this.handleLongScroll(this.m_currentScrollLeft,this.m_currentScrollTop):this.fillViewport()},i.prototype._bounceBack=function(){var t,e,n,o,r,s,a;t=this.m_currentScrollLeft,e=this.m_currentScrollTop,n=this.m_databody.firstChild,o=this.m_colHeader.firstChild,r=this.m_rowHeader.firstChild,s=this.m_colEndHeader.firstChild,a=this.m_rowEndHeader.firstChild,n.removeEventListener("webkitTransitionEnd",this.m_bounceBack),n.style.webkitTransitionDuration=i.BOUNCE_ANIMATION_DURATION+"ms",r.style.webkitTransitionDuration=i.BOUNCE_ANIMATION_DURATION+"ms",a.style.webkitTransitionDuration=i.BOUNCE_ANIMATION_DURATION+"ms",o.style.webkitTransitionDuration=i.BOUNCE_ANIMATION_DURATION+"ms",s.style.webkitTransitionDuration=i.BOUNCE_ANIMATION_DURATION+"ms",null==this.m_scrollTransitionEnd&&(this.m_scrollTransitionEnd=this._scrollTransitionEnd.bind(this)),n.addEventListener("webkitTransitionEnd",this.m_scrollTransitionEnd),this.getResources().isRTLMode()?(n.style.webkitTransform="translate3d("+t+"px, "+-e+"px, 0)",o.style.webkitTransform="translate3d("+t+"px, 0, 0)",s.style.webkitTransform="translate3d("+t+"px, 0, 0)"):(n.style.webkitTransform="translate3d("+-t+"px, "+-e+"px, 0)",o.style.webkitTransform="translate3d("+-t+"px, 0, 0)",s.style.webkitTransform="translate3d("+-t+"px, 0, 0)"),r.style.webkitTransform="translate3d(0, "+-e+"px, 0)",a.style.webkitTransform="translate3d(0, "+-e+"px, 0)",this.m_extraScrollOverX=null,this.m_extraScrollOverY=null},i.prototype._syncScroller=function(){var t,e,i,n,o,r,s,a;t=this.m_currentScrollLeft,e=this.m_currentScrollTop,i=this.m_databody.firstChild,n=this.m_colHeader.firstChild,o=this.m_rowHeader.firstChild,s=this.m_colEndHeader.firstChild,a=this.m_rowEndHeader.firstChild,this.m_utils.isTouchDevice()&&window.hasOwnProperty("WebKitCSSMatrix")?(null!=this.m_extraScrollOverX||null!=this.m_extraScrollOverY?(null!=this.m_extraScrollOverX?t+=this.m_extraScrollOverX:e+=this.m_extraScrollOverY,null==this.m_bounceBack&&(this.m_bounceBack=this._bounceBack.bind(this)),i.addEventListener("webkitTransitionEnd",this.m_bounceBack)):"0ms"==i.style.webkitTransitionDuration?this._scrollTransitionEnd():(null==this.m_scrollTransitionEnd&&(this.m_scrollTransitionEnd=this._scrollTransitionEnd.bind(this)),i.addEventListener("webkitTransitionEnd",this.m_scrollTransitionEnd)),this.getResources().isRTLMode()?(i.style.webkitTransform="translate3d("+t+"px, "+-e+"px, 0)",n.style.webkitTransform="translate3d("+t+"px, 0, 0)",s.style.webkitTransform="translate3d("+t+"px, 0, 0)"):(i.style.webkitTransform="translate3d("+-t+"px, "+-e+"px, 0)",n.style.webkitTransform="translate3d("+-t+"px, 0, 0)",s.style.webkitTransform="translate3d("+-t+"px, 0, 0)"),o.style.webkitTransform="translate3d(0, "+-e+"px, 0)",a.style.webkitTransform="translate3d(0, "+-e+"px, 0)"):(r=this.getResources().isRTLMode()?"right":"left",this.setElementDir(n,-t,r),this.setElementDir(s,-t,r),this.setElementDir(o,-e,"top"),this.setElementDir(a,-e,"top"))},i.prototype._adjustScrollerSize=function(){var t,e,i;t=this.m_databody.firstChild,e=this.getElementHeight(t),i=this.getElementWidth(t),(this._getMaxBottomPixel()>e||this.getDataSource().getCount("row")==this._getMaxBottom()+1&&!this._isCountUnknown("row")&&this._getMaxBottom()>-1)&&this.setElementHeight(t,this._getMaxBottomPixel()),(this._getMaxRightPixel()>i||this.getDataSource().getCount("column")==this._getMaxRight()+1&&!this._isCountUnknown("column")&&this._getMaxRight()>-1)&&this.setElementWidth(t,this._getMaxRightPixel())},i.prototype._getLongScrollStart=function(t,e,i){var n,o,r,s,a,l,h,u,d,c;return e!=t?("row"==i?(l=this.getElementHeight(this.m_databody.firstChild),h=this.m_utils._getMaxDivHeightForScrolling(),u=this._getMaxScrollHeight(),d=this.m_avgRowHeight,c=this.m_hasHorizontalScroller?this.m_utils.getScrollbarSize():0):"column"==i&&(l=this.getElementWidth(this.m_databody.firstChild),h=this.m_utils._getMaxDivWidthForScrolling(),u=this._getMaxScrollWidth(),d=this.m_avgColWidth,c=this.m_hasVerticalScroller?this.m_utils.getScrollbarSize():0),r=Math.max(Math.min(t/l,1),0),a=this.getDataSource().getCount(i),s=this.getFetchSize(i),n=Math.floor(a*r),o=h<=l?Math.min(t,u):n*d,(1==r||t+s*d>l-c)&&(n=Math.max(a-s,0),o=Math.max(l-s*d,0))):"row"==i?(n=this.m_startRow,o=this.m_startRowPixel):"column"==i&&(n=this.m_startCol,o=this.m_startColPixel),{start:n,startPixel:o}},i.prototype.handleLongScroll=function(t,e){var i,n,o,r,s,a;this.m_isLongScroll=!0,this.isFetchComplete()&&(s=this._getLongScrollStart(e,this.m_prevScrollTop,"row"),i=s.start,o=s.startPixel,a=this._getLongScrollStart(t,this.m_prevScrollLeft,"column"),n=a.start,r=a.startPixel,this.m_hasCells&&(this.m_startRow=i,this.m_endRow=-1,this.m_startRowPixel=o,this.m_endRowPixel=o,this.m_startCol=n,this.m_endCol=-1,this.m_startColPixel=r,this.m_endColPixel=r),this.m_hasRowHeader&&(this.m_startRowHeader=i,this.m_endRowHeader=-1,this.m_startRowHeaderPixel=o,this.m_endRowHeaderPixel=o),this.m_hasRowEndHeader&&(this.m_startRowEndHeader=i,this.m_endRowEndHeader=-1,this.m_startRowEndHeaderPixel=o,this.m_endRowEndHeaderPixel=o),this.m_hasColHeader&&(this.m_startColHeader=n,this.m_endColHeader=-1,this.m_startColHeaderPixel=r,this.m_endColHeaderPixel=r),this.m_hasColEndHeader&&(this.m_startColEndHeader=n,this.m_endColEndHeader=-1,this.m_startColEndHeaderPixel=r,this.m_endColEndHeaderPixel=r),this.m_stopRowFetch=!1,this.m_stopRowHeaderFetch=!1,this.m_stopRowEndHeaderFetch=!1,this.m_stopColumnFetch=!1,this.m_stopColumnHeaderFetch=!1,this.m_stopColumnEndHeaderFetch=!1,this.fetchHeaders("row",i,this.m_rowHeader,this.m_rowEndHeader,void 0,{success:function(t,e,i){this.handleRowHeadersFetchSuccessForLongScroll(t,e,i)}}),this.fetchHeaders("column",n,this.m_colHeader,this.m_colEndHeader,void 0,{success:function(t,e,i){this.handleColumnHeadersFetchSuccessForLongScroll(t,e,i)}}),this.fetchCells(this.m_databody,i,n,null,null,{success:function(t,e){this.handleCellsFetchSuccessForLongScroll(t,e,i,n,o,r)}}))},i.prototype.handleRowHeadersFetchSuccessForLongScroll=function(t,e,i){var n,o;n=this.m_rowHeader.firstChild,o=this.m_rowEndHeader.firstChild,null!=n&&this.m_utils.empty(n),null!=o&&this.m_utils.empty(o),this.handleHeadersFetchSuccess(t,e,i,!1)},i.prototype.handleColumnHeadersFetchSuccessForLongScroll=function(t,e,i){var n,o;n=this.m_colHeader.firstChild,o=this.m_colEndHeader.firstChild,null!=n&&this.m_utils.empty(n),null!=o&&this.m_utils.empty(o),this.handleHeadersFetchSuccess(t,e,i,!1)},i.prototype.handleCellsFetchSuccessForLongScroll=function(t,e,i,n,o,r){var s=this.m_databody.firstChild;null!=s&&this.m_utils.empty(s),this.handleCellsFetchSuccess(t,e)},i.prototype._cleanupViewport=function(t){var e,i,n,o;!this._isHighWatermarkScrolling()&&this._isScrollBackToEditable()&&(e=this._getViewportLeft(),i=this._getViewportRight(),n=this._getViewportTop(),o=this._getViewportBottom(),"top"==t&&n>this._getMaxTopPixel()?(this.removeRowsFromTop(this.m_databody),this.removeRowHeadersFromTop()):"bottom"==t&&o<this._getMaxBottomPixel()?(this.removeRowsFromBottom(this.m_databody),this.removeRowHeadersFromBottom()):"left"==t&&e>this._getMaxLeftPixel()?(this.removeColumnsFromLeft(this.m_databody),this.removeColumnHeadersFromLeft()):"right"==t&&i<this._getMaxRightPixel()&&(this.removeColumnsFromRight(this.m_databody),this.removeColumnHeadersFromRight()))},i.prototype.fillViewport=function(){var t,e,n,o,r,s;if(this.isFetchComplete()){if(t=this._getViewportLeft(),e=this._getViewportRight()+i.FETCH_PIXEL_THRESHOLD,n=this._getViewportTop(),o=this._getViewportBottom()+i.FETCH_PIXEL_THRESHOLD,this._getMaxBottomPixel()<=o&&(!this.m_stopRowHeaderFetch||!this.m_stopRowEndHeaderFetch||!this.m_stopRowFetch))return r=Math.max(0,this._getMaxBottom()+1),s=Math.max(0,this.getFetchSize("row")),this.fetchHeaders("row",r,this.m_rowHeader,this.m_rowEndHeader,s),void this.fetchCells(this.m_databody,r,this.m_startCol,s,this.m_endCol-this.m_startCol+1);if(this._getMaxTopPixel()>n)return r=Math.max(0,this._getMaxTop()-this.getFetchSize("row")),s=Math.max(0,this._getMaxTop()-r),this.fetchHeaders("row",r,this.m_rowHeader,this.m_rowEndHeader,s),void this.fetchCells(this.m_databody,r,this.m_startCol,s,this.m_endCol-this.m_startCol+1);if(this._getMaxRightPixel()<=e&&(!this.m_stopColumnHeaderFetch||!this.m_stopColumnEndHeaderFetch||!this.m_stopColumnFetch))return r=Math.max(0,this._getMaxRight()+1),s=Math.max(0,this.getFetchSize("column")),this.fetchHeaders("column",r,this.m_colHeader,this.m_colEndHeader,s),void this.fetchCells(this.m_databody,this.m_startRow,r,this.m_endRow-this.m_startRow+1,s);if(this._getMaxLeftPixel()>t)return r=Math.max(0,this._getMaxLeft()-this.getFetchSize("column")),s=Math.max(0,this._getMaxLeft()-r),this.fetchHeaders("column",r,this.m_colHeader,this.m_colEndHeader,s),void this.fetchCells(this.m_databody,this.m_startRow,r,this.m_endRow-this.m_startRow+1,s)}},i.prototype._getMaxRight=function(){return Math.max(Math.max(this.m_endCol,this.m_endColHeader),this.m_endColEndHeader)},i.prototype._getMaxLeft=function(){return Math.max(Math.max(this.m_startCol,this.m_startColHeader),this.m_startColEndHeader)},i.prototype._getMaxRightPixel=function(){return Math.max(Math.max(this.m_endColPixel,this.m_endColHeaderPixel),this.m_endColEndHeaderPixel)},i.prototype._getMaxLeftPixel=function(){return Math.max(Math.max(this.m_startColPixel,this.m_startColHeaderPixel),this.m_startColEndHeaderPixel)},i.prototype._getMaxBottom=function(){return Math.max(Math.max(this.m_endRow,this.m_endRowHeader),this.m_endRowEndHeader)},i.prototype._getMaxTop=function(){return Math.max(Math.max(this.m_startRow,this.m_startRowHeader),this.m_startRowEndHeader)},i.prototype._getMaxBottomPixel=function(){return Math.max(Math.max(this.m_endRowPixel,this.m_endRowHeaderPixel),this.m_endRowEndHeaderPixel)},i.prototype._getMaxTopPixel=function(){return Math.max(Math.max(this.m_startRowPixel,this.m_startRowHeaderPixel),this.m_startRowEndHeaderPixel)};i.prototype._isScrollBackToEditable=function(){var t=this._getCurrentMode(),e=this._getActiveElement();return"edit"!=t||!this._isCellGoingToBeRemoved(e)||this._handleExitEdit(null,e)};i.prototype._isCellGoingToBeRemoved=function(t){var e,i,n,o;if(!this._isHighWatermarkScrolling()){if(this.m_endRow-this.m_startRow>this.MAX_ROW_THRESHOLD&&(o=this.getElementDir(t.parentNode,"top"),e=this.getElementHeight(t),o+e<this.m_currentScrollTop||o<this.m_currentScrollTop+this.getViewportHeight()))return!0;if(this.m_endCol-this.m_startCol>this.MAX_COLUMN_THRESHOLD&&(n=this.getElementDir(t,"left"),i=this.getElementWidth(t),n+i<this.m_currentScrollLeft||n<this.m_currentScrollLeft+this.getViewportHeight()))return!0}},i.prototype.fetchCellsToBottom=function(){this.fetchCells(this.m_databody,this.m_endRow+1,this.m_startCol,null,this.m_endCol-this.m_startCol+1)},i.prototype.fetchCellsToTop=function(){var t,e;e=Math.max(0,this.m_startRow-this.getFetchSize("row")),t=Math.max(0,this.m_startRow-e),this.fetchCells(this.m_databody,e,this.m_startCol,t,this.m_endCol-this.m_startCol+1)},i.prototype.removeHeadersFromStartOfContainer=function(t,e,i,n,o,r,s,a){var l,h,u,d,c,p,_=0,g=0;if(l=t.childNodes,h=null==e?t.firstChild:e.nextSibling,null==h)return{extentChange:0,dimensionChange:0};for(d=this.m_utils.containsCSSClassName(h,o),u=d?h:h.firstChild,c=this.getElementDir(u,r);i+c<a-n;){if(this._remove(h),g+=c,_+=d?1:this._getAttribute(h,"extent",!0),i+=c,h=null==e?t.firstChild:e.nextSibling,null==h)return{extentChange:_,dimensionChange:g};d=this.m_utils.containsCSSClassName(h,o),u=d?h:h.firstChild,c=this.getElementDir(u,r)}return d||(p=this.removeHeadersFromStartOfContainer(h,h.firstChild,i,n,o,r,s,a),this._setAttribute(h,"start",this._getAttribute(h,"start",!0)+p.extentChange),this._setAttribute(h,"extent",this._getAttribute(h,"extent",!0)-p.extentChange),this.setElementDir(u,this.getElementDir(u,s)+p.dimensionChange,s),this.setElementDir(u,this.getElementDir(u,r)-p.dimensionChange,r),_+=p.extentChange,g+=p.dimensionChange),{extentChange:_,dimensionChange:g}},i.prototype.removeHeadersFromEndOfContainer=function(t,e,i,n,o){var r,s,a,l,h,u=0,d=0;for(r=t.lastChild,a=this.m_utils.containsCSSClassName(r,n),s=a?r:r.firstChild,l=this.getElementDir(s,o);e-l>i;)this._remove(r),d+=l,u+=a?1:this._getAttribute(r,"extent",!0),e-=l,r=t.lastChild,a=this.m_utils.containsCSSClassName(r,n),s=a?r:r.firstChild,l=this.getElementDir(s,o);return a||(h=this.removeHeadersFromEndOfContainer(r,e,i,n,o),this._setAttribute(r,"extent",this._getAttribute(r,"extent",!0)-h.extentChange),this.setElementDir(s,this.getElementDir(s,o)-h.dimensionChange,o),u+=h.extentChange,d+=h.dimensionChange),{extentChange:u,dimensionChange:d}},i.prototype.removeColumnHeadersFromLeft=function(){var t,e,i,n;this.m_endColHeader-this.m_startColHeader>this.MAX_COLUMN_THRESHOLD&&(t=this.m_colHeader.firstChild,e=this.getColumnThreshold(),this.m_startColHeaderPixel<=this.m_currentScrollLeft-e&&(i=this.removeHeadersFromStartOfContainer(t,null,this.m_startColHeaderPixel,e,this.getMappedStyle("colheadercell"),"width",this.getResources().isRTLMode()?"right":"left",this.m_currentScrollLeft),this.m_startColHeaderPixel+=i.dimensionChange,this.m_startColHeader+=i.extentChange)),this.m_endColEndHeader-this.m_startColEndHeader>this.MAX_COLUMN_THRESHOLD&&(n=this.m_colEndHeader.firstChild,e=this.getColumnThreshold(),this.m_startColEndHeaderPixel<this.m_currentScrollLeft-e&&(i=this.removeHeadersFromStartOfContainer(n,null,this.m_startColEndHeaderPixel,e,this.getMappedStyle("colendheadercell"),"width",this.getResources().isRTLMode()?"right":"left",this.m_currentScrollLeft),this.m_startColEndHeaderPixel+=i.dimensionChange,this.m_startColEndHeader+=i.extentChange))},i.prototype.removeColumnsFromLeft=function(t){var e,i,n,o,r,s,a,l,h,u,d,c;if(this.m_endCol-this.m_startCol>this.MAX_COLUMN_THRESHOLD){if(e=t.firstChild,i=e.childNodes,n=0,o=0,r=this.getColumnThreshold(),i.length<1)return;for(s=i[0].childNodes,a=0;a<s.length;a+=1)if(l=s[a],h=o,o=this.getElementDir(l,"left"),o>this.m_currentScrollLeft-r){n=a-1,this.m_startCol=this.m_startCol+n,this.m_startColPixel=h;break}for(u=0;u<i.length;u+=1)for(d=i[u],c=0;c<n;c+=1)this._remove(d.firstChild)}},i.prototype.removeColumnHeadersFromRight=function(){var t,e,i;e=this.m_currentScrollLeft+this.getViewportWidth()+this.getColumnThreshold(),this.m_endColHeader-this.m_startColHeader>this.MAX_COLUMN_THRESHOLD&&(t=this.m_colHeader.firstChild,this.m_endColHeaderPixel>e&&(this.m_stopColumnHeaderFetch&&(this.m_stopColumnHeaderFetch=!1),i=this.removeHeadersFromEndOfContainer(t,this.m_endColHeaderPixel,e,this.getMappedStyle("colheadercell"),"width"),this.m_endColHeaderPixel-=i.dimensionChange,this.m_endColHeader-=i.extentChange)),this.m_endColEndHeader-this.m_startColEndHeader>this.MAX_COLUMN_THRESHOLD&&(t=this.m_colEndHeader.firstChild,this.m_endColEndHeaderPixel>e&&(this.m_stopColumnEndHeaderFetch&&(this.m_stopColumnEndHeaderFetch=!1),i=this.removeHeadersFromEndOfContainer(t,this.m_endColEndHeaderPixel,e,this.getMappedStyle("colendheadercell"),"width"),this.m_endColEndHeaderPixel-=i.dimensionChange,this.m_endColEndHeader-=i.extentChange))},i.prototype.removeColumnsFromRight=function(t){var e,i,n,o,r,s,a,l;if(this.m_endCol-this.m_startCol>this.MAX_COLUMN_THRESHOLD){if(e=t.firstChild,s=e.childNodes,i=this.m_currentScrollLeft+this.getViewportWidth()+this.getColumnThreshold(),this.m_endColPixel<=i||s.length<1)return;for(this.m_stopColumnFetch&&(this.m_stopColumnFetch=!1),n=s[0],o=n.lastChild,r=this.getElementWidth(o);this.m_endColPixel-r>i;){for(a=0;a<s.length;a+=1)l=s[a],this._remove(l.lastChild);this.m_endColPixel=this.m_endColPixel-r,this.m_endCol-=1,o=n.lastChild,r=this.getElementWidth(o)}}},i.prototype.removeRowHeadersFromTop=function(){var t,e,i,n;this.m_endRowHeader-this.m_startRowHeader>this.MAX_ROW_THRESHOLD&&(t=this.m_rowHeader.firstChild,e=this.getRowThreshold(),this.m_startRowHeaderPixel>=this.m_currentScrollTop-e||(i=this.removeHeadersFromStartOfContainer(t,null,this.m_startRowHeaderPixel,e,this.getMappedStyle("rowheadercell"),"height","top",this.m_currentScrollTop),this.m_startRowHeaderPixel+=i.dimensionChange,this.m_startRowHeader+=i.extentChange)),this.m_endRowEndHeader-this.m_startRowEndHeader>this.MAX_ROW_THRESHOLD&&(n=this.m_rowEndHeader.firstChild,
e=this.getRowThreshold(),this.m_startRowEndHeaderPixel>=this.m_currentScrollTop-e||(i=this.removeHeadersFromStartOfContainer(n,null,this.m_startRowEndHeaderPixel,e,this.getMappedStyle("rowendheadercell"),"height","top",this.m_currentScrollTop),this.m_startRowEndHeaderPixel+=i.dimensionChange,this.m_startRowEndHeader+=i.extentChange))},i.prototype.removeRowsFromTop=function(t){var e,i,n,o;if(this.m_endRow-this.m_startRow>this.MAX_ROW_THRESHOLD){if(e=t.firstChild,i=this.getRowThreshold(),this.m_startRowPixel>=this.m_currentScrollTop-i)return;for(n=e.firstChild,o=this.getElementHeight(n);this.m_startRowPixel+o<this.m_currentScrollTop-i&&(this._remove(n),this.m_startRowPixel=this.m_startRowPixel+o,this.m_startRow+=1,n=e.firstChild,null!=n);)o=this.getElementHeight(n)}},i.prototype.removeRowHeadersFromBottom=function(){var t,e,i,n;e=this.m_currentScrollTop+this.getViewportHeight()+this.getRowThreshold(),this.m_endRowHeader-this.m_startRowHeader>this.MAX_ROW_THRESHOLD&&(t=this.m_rowHeader.firstChild,this.m_endRowHeaderPixel<=e||(this.m_stopRowHeaderFetch&&(this.m_stopRowHeaderFetch=!1),i=this.removeHeadersFromEndOfContainer(t,this.m_endRowHeaderPixel,e,this.getMappedStyle("rowheadercell"),"height"),this.m_endRowHeaderPixel-=i.dimensionChange,this.m_endRowHeader-=i.extentChange)),this.m_endRowEndHeader-this.m_startRowEndHeader>this.MAX_ROW_THRESHOLD&&(n=this.m_rowEndHeader.firstChild,this.m_endRowEndHeaderPixel<=e||(this.m_stopRowEndHeaderFetch&&(this.m_stopRowEndHeaderFetch=!1),i=this.removeHeadersFromEndOfContainer(n,this.m_endRowEndHeaderPixel,e,this.getMappedStyle("rowendheadercell"),"height"),this.m_endRowEndHeaderPixel-=i.dimensionChange,this.m_endRowEndHeader-=i.extentChange))},i.prototype.removeRowsFromBottom=function(t){var e,i,n,o;if(this.m_endRow-this.m_startRow>this.MAX_ROW_THRESHOLD){if(e=t.firstChild,i=this.m_currentScrollTop+this.getViewportHeight()+this.getRowThreshold(),this.m_endRowPixel<=i)return;for(this.m_stopRowFetch&&(this.m_stopRowFetch=!1),n=e.lastChild,o=this.getElementHeight(n);this.m_endRowPixel-o>i;)this._remove(n),this.m_endRowPixel=this.m_endRowPixel-o,this.m_endRow-=1,n=e.lastChild,o=this.getElementHeight(n)}},i.prototype.dumpRanges=function(){void 0!=console&&console.log},i.prototype.handleContextMenuGesture=function(t,e,i){var n,o,r,s,a;if(a=t.originalEvent.target,o=this.findCell(a),"touch"===e&&null!=o&&(n={row:this.getRowIndex(o.parentNode),column:this.getCellIndex(o)},(!this.isMultipleSelection()||!this._isContainSelection(n)||this._isDatabodyCellActive()&&n.row!=this.m_active.indexes.row&&n.column!=this.m_active.indexes.column)&&(this._isSelectionEnabled()?this.handleDatabodyClickSelection(t.originalEvent):this.handleDatabodyClickActive(t.originalEvent))),!this.m_utils._isNodeEditableOrClickable(a,this.m_root)){if(null!=o)n={row:this.getRowIndex(o.parentNode),column:this.getCellIndex(o)},this.isMultipleSelection()&&this._isContainSelection(n)?(s=this._getActiveElement(),r=this._isDatabodyCellActive()?"keyboard"===e?this._getCellCapability(s):this._getCellCapability(s,o):this._getHeaderCapability(s,o)):(s=o,r=this._getCellCapability(s));else{if(o=this.findHeader(a),null==o)return;r=this._getHeaderCapability(o),s=o}i.call(null,{capabilities:r,launcher:s},t,e)}},i.prototype._getCellCapability=function(t,e){var i,n,o,r,s,a,l,h,u=!0,d=!0;return a="disable",l="enable",i={resize:a,resizeWidth:a,resizeHeight:a,sortRow:a,sortCol:a,cut:a,paste:a,sortColAsc:a,sortColDsc:a},null!=e&&(u=this.getCellIndex(t)===this.getCellIndex(e),d=t.parentNode===e.parentNode,d===!1&&u===!1)?i:(n=this.getHeaderFromCell(t,"row"),o=this.getHeaderFromCell(t,"column"),r=this.getResources().getMappedAttribute("resizable"),s=this.getResources().getMappedAttribute("sortable"),null!=o&&u&&("true"===o.getAttribute(r)&&(i.resize=l,i.resizeWidth=l),"true"===o.getAttribute(s)&&(i.sortCol=l,i.sortColAsc=l,i.sortColDsc=l,h=o.getAttribute(this.getResources().getMappedAttribute("sortDir")),"ascending"===h?i.sortColAsc=a:"descending"===h&&(i.sortColDsc=a))),d&&(this._isMoveEnabled("row")&&(i.cut=l,i.paste=l),null!=n&&("true"===n.getAttribute(r)&&(i.resize=l,i.resizeHeight=l),"true"===n.getAttribute(s)&&(i.sortRow=l))),i)},i.prototype._getHeaderCapability=function(t,e){var i,n,o,r,s,a,l,h=!0,u=!0;return r="disable",s="enable",i={resize:r,resizeWidth:r,resizeHeight:r,sortRow:r,sortCol:r,cut:r,paste:r,sortColAsc:r,sortColDsc:r},null!=e&&(h=this.getHeaderCellIndex(t)===this.getCellIndex(e),u=this._getKey(t)===this._getKey(e.parentNode),u===!1&&h===!1)?i:(l=this.getHeaderCellAxis(t),n=this.getResources().getMappedAttribute("resizable"),o=this.getResources().getMappedAttribute("sortable"),null!==t&&("column"!=l&&"columnEnd"!=l||!h?u&&(this._isMoveEnabled("row")&&(i.cut=s,i.paste=s),"true"===t.getAttribute(n)&&(i.resize=s,i.resizeHeight=s),i.resizeWidth=this.m_options.isResizable(l,"width"),"true"===t.getAttribute(o)&&(i.sortRow=s)):("true"===t.getAttribute(n)&&(i.resizeWidth=s,i.resize=s),i.resizeHeight=this.m_options.isResizable(l,"height"),"true"===t.getAttribute(o)&&(i.sortCol=s,i.sortColAsc=s,i.sortColDsc=s,a=t.getAttribute(this.getResources().getMappedAttribute("sortDir")),"ascending"===a?i.sortColAsc=r:"descending"===a&&(i.sortColDsc=r)))),i.resize=i.resizeHeight===s||i.resizeWidth===s?s:r,i)},i.prototype.handleContextMenuReturn=function(t,e,i){var n,o;null!=this.m_active&&(n=this._getActiveElement()),e===this.m_resources.getMappedCommand("resizeHeight")||e===this.m_resources.getMappedCommand("resizeWidth")?this.isResizeEnabled()&&this.handleContextMenuResize(t,e,i,n):e===this.m_resources.getMappedCommand("sortColAsc")||e===this.m_resources.getMappedCommand("sortColDsc")?(o=e===this.m_resources.getMappedCommand("sortColAsc")?"ascending":"descending",this.m_utils.containsCSSClassName(n,this.getMappedStyle("cell"))&&(n=this.getHeaderFromCell(n,"column")),this._isDOMElementSortable(n)&&this._handleCellSort(t,o,n)):e===this.m_resources.getMappedCommand("sortRowAsc")||e===this.m_resources.getMappedCommand("sortRowDsc")?(o=e===this.m_resources.getMappedCommand("sortRowAsc")?"ascending":"descending",this.m_utils.containsCSSClassName(n,this.getMappedStyle("cell"))&&(n=this.getHeaderFromCell(n,"row")),this._isDOMElementSortable(n)&&this._handleCellSort(t,o,n)):e===this.m_resources.getMappedCommand("cut")?this._handleCut(t,n):e===this.m_resources.getMappedCommand("paste")?this._handlePaste(t,n):e===this.m_resources.getMappedCommand("discontiguousSelection")&&this.setDiscontiguousSelectionMode(i)},i.prototype._isSortEnabled=function(t,e){var i,n;return i=this.getDataSource().getCapability("sort"),n=this.m_options.isSortable(t,e),!("enable"!==n&&"auto"!==n||"full"!==i&&i!==t)},i.prototype._isDOMElementSortable=function(t){if(null==t)return!1;var e=this.findHeader(t);return null!=e&&"true"==e.getAttribute(this.getResources().getMappedAttribute("sortable"))},i.prototype._isSelectionEnabled=function(){return"none"!=this.m_options.getSelectionCardinality()},i.prototype.isMultipleSelection=function(){return"multiple"==this.m_options.getSelectionCardinality()},i.prototype.isResizeEnabled=function(){return this.m_options.isResizable("row","width")||this.m_options.isResizable("row","height")||this.m_options.isResizable("column","width")||this.m_options.isResizable("column","height")||this.m_options.isResizable("rowEnd","width")||this.m_options.isResizable("rowEnd","height")||this.m_options.isResizable("columnEnd","width")||this.m_options.isResizable("columnEnd","height")},i.prototype._isHeaderResizeEnabled=function(t,e){var i;return"column"==t||"columnEnd"==t?(i=this.m_options.isResizable(t,"width",e),"enable"==i):("row"==t||"rowEnd"==t)&&(i=this.m_options.isResizable(t,"height",e),"enable"==i)},i.prototype.handleMouseMove=function(t){this.isResizeEnabled()&&0==this.m_databodyDragState&&this.handleResize(t)},i.prototype.handleRowHeaderMouseMove=function(t){this.m_databodyMove?this._handleMove(t):this.m_isResizing||this.handleMouseMove(t)},i.prototype.handleColumnHeaderMouseMove=function(t){this.m_isResizing||this.handleMouseMove(t)},i.prototype.handleHeaderMouseDown=function(t){var e,i,n,o;if(this._exitActionableMode(),o=t.target,!this._isEditOrEnter()||(e=this._getActiveElement(),0!=this._leaveEditing(t,e,!1))){if(0===t.button){if((this.m_utils.containsCSSClassName(o,this.getMappedStyle("sortascending"))||this.m_utils.containsCSSClassName(o,this.getMappedStyle("sortdescending")))&&this._isDOMElementSortable(o))return t.preventDefault(),void this._handleSortIconMouseDown(o);this.isResizeEnabled()&&(n=this.handleResizeMouseDown(t)),i=this.findRow(o),!this.m_isResizing&&this._isMoveOnRowEnabled(i)&&(this.m_databodyMove=!0,this.m_currentX=t.pageX,this.m_currentY=t.pageY,n=!0)}this.m_isResizing||(this.m_root.contains(document.activeElement)&&document.activeElement!==this.m_root||(this.m_externalFocus=!0),this.handleHeaderClickActive(t)),n===!0&&t.preventDefault()}},i.prototype.handleMouseUp=function(t){this.m_databodyMove?this._handleMoveMouseUp(t,!1):this.isResizeEnabled()&&this.handleResizeMouseUp(t),this.m_databodyMove=!1},i.prototype.handleHeaderMouseOver=function(t){var e=t.target;this.m_utils.addCSSClassName(this.findHeader(e),this.getMappedStyle("hover")),this._isDOMElementSortable(e)&&this._handleSortMouseOver(t)},i.prototype.handleHeaderMouseOut=function(t){var e=t.target;this.m_utils.removeCSSClassName(this.findHeader(e),this.getMappedStyle("hover")),this._isDOMElementSortable(e)&&this._handleSortMouseOut(t)},i.prototype.handleHeaderMouseUp=function(t){this.m_databodyMove&&this._handleMoveMouseUp(t,!0)},i.prototype.handleHeaderClick=function(t){var e=t.target;(this.m_utils.containsCSSClassName(e,this.getMappedStyle("sortascending"))||this.m_utils.containsCSSClassName(e,this.getMappedStyle("sortdescending")))&&this._isDOMElementSortable(e)&&(this._handleHeaderSort(t),t.preventDefault())},i.prototype.handleDatabodyMouseDown=function(t){var e,i,n;if(n=t.target,e=this.findCell(n),null==e)return void(this.m_scrollbarFocus=!0);if(this._isEditOrEnter()){if(i=this._getActiveElement(),e==i)return;if(0==this._leaveEditing(t,i,!1))return}else this._exitActionableMode();0===t.button&&this._isMoveOnRowEnabled(this.find(n,"row"))&&(this.m_databodyMove=!0,this.m_currentX=t.pageX,this.m_currentY=t.pageY),this.m_root.contains(document.activeElement)&&document.activeElement!==this.m_root||(this.m_externalFocus=!0),this._isGridEditable()&&(this.m_shouldFocus=!this._isFocusableElementBeforeCell(n)),this._isSelectionEnabled()?(this.handleDatabodyClickSelection(t),this.isMultipleSelection()&&0===t.button&&(this.m_databodyDragState=!0)):this.handleDatabodyClickActive(t)},i.prototype.handleDatabodyMouseOut=function(t){var e,i,n;this.m_databodyMove||(i=this.m_options.getSelectionMode(),n=t.target,e=this.findRow(n),"cell"===i?this.m_utils.removeCSSClassName(this.findCell(n),this.getMappedStyle("hover")):"row"===i&&this.m_utils.removeCSSClassName(e,this.getMappedStyle("hover")))},i.prototype.handleDatabodyMouseOver=function(t){var e,i,n;this.m_databodyMove||(i=this.m_options.getSelectionMode(),n=t.target,e=this.findRow(n),"cell"===i?this.m_utils.addCSSClassName(this.findCell(n),this.getMappedStyle("hover")):"row"===i&&this.m_utils.addCSSClassName(e,this.getMappedStyle("hover")))},i.prototype.handleDatabodyDoubleClick=function(t){var e,i,n;this._isGridEditable()&&(e=t.target,i=this.findCell(e),n=this._getCurrentMode(),"edit"==n&&this._handleExitEdit(t,i),this._handleEditable(t,i),this._handleEdit(t,i))},i.prototype.handleDatabodyMouseMove=function(t){this.m_databodyMove?this._handleMove(t):this.m_databodyDragState&&this.handleDatabodySelectionDrag(t)},i.prototype.handleDatabodyMouseUp=function(t){this.m_databodyDragState=!1,this.m_databodyMove&&this._handleMoveMouseUp(t,!0)},i.prototype.handleDatabodyKeyDown=function(t){var e,n,o,r,s;o=t.target,r=t.keyCode,s=this.m_utils.ctrlEquivalent(t),t.defaultPrevented&&s&&(i.keyCodes.LEFT_KEY||i.keyCodes.RIGHT_KEY)||(e=null!=this.m_active&&"header"==this.m_active.type?this._getActionFromKeyDown(t,this.m_active.axis):this._getActionFromKeyDown(t,"cell"),n=this._getActiveElement(),null!=e&&e.call(this,t,n)&&t.preventDefault())},i.prototype._fireKeyDownEvent=function(t){var e,i;return e=this._getActiveRowKey(),i={event:t,ui:{rowKey:e}},this.fireEvent("keydown",i)},i.prototype.findPos=function(t){var e,i;return t?(e=this.findPos(t.offsetParent),i=this.getElementTranslationXYZ(t.offsetParent),[parseInt(e[0],10)+parseInt(t.offsetLeft,10)+i[0],parseInt(e[1],10)+parseInt(t.offsetTop,10)+i[1]]):[0,0]},i.prototype.getElementTranslationXYZ=function(t){var e,i,n,o,r,s;return t?(e=document.defaultView.getComputedStyle(t,null),i=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform"),n=i.substr(7,i.length-8).split(", "),o=isNaN(parseInt(n[4],10))?0:parseInt(n[4],10),r=isNaN(parseInt(n[5],10))?0:parseInt(n[5],10),s=isNaN(parseInt(n[6],10))?0:parseInt(n[6],10),[o,r,s]):[0,0,0]},i.prototype.handleDatabodyMouseWheel=function(t){var e,i,n;t.preventDefault(),e=this.m_utils.getMousewheelScrollDelta(t),i=e.deltaX,n=e.deltaY,this.scrollDelta(i,n)},i.prototype.handleTouchStart=function(t){var e,i,n,o;e=t.touches.length,o=t.touches[0].target,1==e?(this.m_startX=t.touches[0].pageX,this.m_startY=t.touches[0].pageY,this.m_currentX=this.m_startX,this.m_currentY=this.m_startY,this.m_prevX=this.m_startX,this.m_prevY=this.m_startY,this.m_startTime=(new Date).getTime(),this.m_touchActive=!0,this.isMultipleSelection()&&(o.className!==this.getMappedStyle("selectaffordancetop")&&o.className!==this.getMappedStyle("selectaffordancebottom")||(o=o.parentNode),i=o===this.m_topSelectIconContainer?"top":o===this.m_bottomSelectIconContainer?"bottom":null,i&&(this.m_touchMultipleSelect=!0,n=this.GetSelection(),"top"===i?this.m_touchSelectAnchor=n[n.length-1].endIndex:this.m_touchSelectAnchor=n[n.length-1].startIndex)),!this.m_touchMultipleSelect&&this._isMoveOnRowEnabled(this.find(o,"row"))&&(this.m_databodyMove=!0)):this.handleTouchCancel(t)},i.prototype.handleTouchMove=function(t){var e,i,n;if(n=t.target,this.m_touchActive){if(t.preventDefault(),this.m_currentX=t.touches[0].pageX,this.m_currentY=t.touches[0].pageY,e=this.m_currentX-this.m_prevX,i=this.m_currentY-this.m_prevY,this.getResources().isRTLMode()&&(e*=-1),this.m_touchMultipleSelect)this.handleDatabodySelectionDrag(t);else if(this.m_databodyMove)this._removeTouchSelectionAffordance(),this._handleMove(t);else if(this._isEditOrEnter()){var o=this._getActiveElement();this.findCell(n)!=o&&this._handleNonSwipeScroll(e,i)}else this._handleNonSwipeScroll(e,i);this.m_prevX=this.m_currentX,this.m_prevY=this.m_currentY}else this.handleTouchCancel(t)},i.prototype.handleTouchEnd=function(t){var e,n,o;if(o=t.target,this._isEditOrEnter()){if(n=this._getActiveElement(),this.findCell(o)==n)return void this.handleTouchCancel(t);this._leaveEditing(t,n,!1)}else this._exitActionableMode();if(null!=this.m_lastTapTime&&this.m_startTime-this.m_lastTapTime<250&&this.m_lastTapTarget===o?(this.m_lastTapTime=null,this.m_lastTapTarget=null,n=this.findCell(o),null!=n&&(this._handleEditable(t,n),this._handleEdit(t,n),t.preventDefault())):(this.m_lastTapTarget=t.target,this.m_lastTapTime=(new Date).getTime()),this.m_touchActive&&!t.defaultPrevented)if(this.m_touchMultipleSelect)t.preventDefault(),this.m_touchMultipleSelect=!1;else{if(e=this.m_lastTapTime-this.m_startTime,this.m_currentX==this.m_startX&&this.m_currentY==this.m_startY)return this.m_databodyMove=!1,this._isSelectionEnabled()&&e<i.CONTEXT_MENU_TAP_HOLD_DURATION?void this.handleDatabodyClickSelection(t):void this.handleDatabodyClickActive(t);if(this.m_databodyMove)return t.preventDefault(),this.m_databodyMove=!1,void this._handleMoveMouseUp(t,!0);this._handleSwipe(t)}this.handleTouchCancel(t)},i.prototype._calculateMomentum=function(t,e,n,o,r,s){var a,l,h,u,d;return a=t-e,l=Math.abs(a)/n,h=l*l/(2*i.DECELERATION_FACTOR)*(a<0?-1:1),u=l/i.DECELERATION_FACTOR,s&&(h*=-1),o-h>r?(d=Math.max(i.MAX_OVERSCROLL_PIXEL*-1,h),h=o-r,a=r-o,u=a/l):o-h<0&&(d=Math.min(i.MAX_OVERSCROLL_PIXEL,h),h=o,a=o,u=a/l),{destination:Math.round(h),duration:Math.min(Math.max(i.MIN_SWIPE_TRANSITION_DURATION,u),i.MAX_SWIPE_TRANSITION_DURATION),overScroll:d}},i.prototype.handleTouchCancel=function(t){this.m_databodyMove&&(this._handleMoveMouseUp(t,!1),this.m_databodyMove=!1),this.m_touchSelectAnchor=null,this.m_touchMultipleSelect=!1,this.m_touchActive=!1,this.m_startX=0,this.m_startY=0,this.m_prevX=0,this.m_prevY=0,this.m_currentX=0,this.m_currentY=0,this.m_startTime=0},i.prototype.handleHeaderTouchStart=function(t){var e,n,o;this.m_touchStart=(new Date).getTime(),n=t.touches.length,o=t.target,1==n?(this.m_startX=t.touches[0].pageX,this.m_startY=t.touches[0].pageY,this.m_currentX=this.m_startX,this.m_currentY=this.m_startY,this.m_prevX=this.m_startX,this.m_prevY=this.m_startY,this.m_touchActive=!0,e=this.findHeader(o),setTimeout(function(){this.m_touchActive&&!this.m_isResizing&&this.m_currentX==this.m_startX&&this.m_currentY==this.m_startY&&(this._removeTouchSelectionAffordance(),this._setActive(e,t,!0))}.bind(this),i.HEADER_TAP_SHORT_HOLD_DURATION),this.isResizeEnabled()&&(this.handleResize(t),this.handleResizeMouseDown(t)),!this.m_isResizing&&this._isMoveOnRowEnabled(this.findRow(o))&&(this.m_databodyMove=!0)):this.handleHeaderTouchCancel(t)},i.prototype.handleHeaderTouchMove=function(t){var e,i,n,o,r;this.m_touchActive?(t.preventDefault(),this.m_currentX=t.touches[0].pageX,this.m_currentY=t.touches[0].pageY,e=this.m_currentX-this.m_prevX,i=this.m_currentY-this.m_prevY,this.m_isResizing&&this.isResizeEnabled()?this.handleResize(t):this.m_databodyMove?(this._removeTouchSelectionAffordance(),this._handleMove(t)):(o=t.target,n=this.findHeader(o),r=this.getHeaderCellAxis(n),"column"==r||"columnEnd"==r?this._handleNonSwipeScroll(e,0):this._handleNonSwipeScroll(0,i)),this.m_prevX=this.m_currentX,this.m_prevY=this.m_currentY):this.handleTouchCancel(t)},i.prototype.handleHeaderTouchEnd=function(t){var e,n,o,r,s=i.HEADER_TAP_SHORT_HOLD_DURATION;e=(new Date).getTime(),n=e-this.m_touchStart,this.m_touchActive&&!t.defaultPrevented&&(r=t.target,this.m_isResizing&&this.isResizeEnabled()?(this.handleResizeMouseUp(t),this.m_currentX!=this.m_startX&&this.m_currentY!=this.m_startY&&t.preventDefault()):this.m_currentX==this.m_startX&&this.m_currentY==this.m_startY&&n<s?this._isDOMElementSortable(r)&&(t.preventDefault(),this._handleHeaderSort(t),this._removeTouchSelectionAffordance()):this.m_databodyMove?(t.preventDefault(),this.m_databodyMove=!1,this._handleMoveMouseUp(t,!0)):(o=this.findHeader(r),this._handleSwipe(t,this.getHeaderCellAxis(o)))),this.handleHeaderTouchCancel(t)},i.prototype.handleHeaderTouchCancel=function(t){this.m_databodyMove&&(this._handleMoveMouseUp(t,!1),this.m_databodyMove=!1),this.m_touchActive=!1,this.m_startX=0,this.m_startY=0,this.m_prevX=0,this.m_prevY=0,this.m_currentX=0,this.m_currentY=0},i.prototype._handleNonSwipeScroll=function(t,e){var n=(new Date).getTime();this._disableTouchScrollAnimation(),this.scrollDelta(t,e),n-this.m_startTime>i.TAP_AND_SCROLL_RESET&&(this.m_startX=this.m_currentX,this.m_startY=this.m_currentY,this.m_startTime=(new Date).getTime())},i.prototype._handleSwipe=function(t,e){var n,o,r,s,a,l,h;n=(new Date).getTime()-this.m_startTime,o=this.getResources().isRTLMode(),r=this.m_currentX-this.m_startX,s=this.m_currentY-this.m_startY,o&&(r*=-1),Math.abs(r)<i.MIN_SWIPE_DISTANCE&&Math.abs(s)<i.MIN_SWIPE_DISTANCE&&n<i.MIN_SWIPE_DURATION?(t.preventDefault(),this._isSelectionEnabled()&&this._scrollTouchSelectionAffordance()):n<i.MAX_SWIPE_DURATION&&(t.preventDefault(),"row"!=e&&"rowEnd"!=e?(a=this._calculateMomentum(this.m_currentX,this.m_startX,n,this.m_currentScrollLeft,this.m_scrollWidth,o),isNaN(a.overScroll)||(a.overScroll>0||this.m_stopColumnFetch)&&(this.m_extraScrollOverX=a.overScroll*-1)):(a={duration:0,destination:0},r=0),"column"!=e&&"columnEnd"!=e?(l=this._calculateMomentum(this.m_currentY,this.m_startY,n,this.m_currentScrollTop,this.m_scrollHeight),isNaN(l.overScroll)||(l.overScroll>0||this.m_stopRowFetch)&&(this.m_extraScrollOverY=l.overScroll*-1)):(l={duration:0,destination:0},s=0),h=Math.max(a.duration,l.duration),this.m_databody.firstChild.style.webkitTransitionDuration=h+"ms",this.m_rowHeader.firstChild.style.webkitTransitionDuration=h+"ms",this.m_colHeader.firstChild.style.webkitTransitionDuration=h+"ms",this.m_rowEndHeader.firstChild.style.webkitTransitionDuration=h+"ms",this.m_colEndHeader.firstChild.style.webkitTransitionDuration=h+"ms",this.scrollDelta(r+a.destination,s+l.destination))},i.prototype.fireEvent=function(t,e){var i;if(null!=t&&null!=e)return i=this.callbacks[t],null==i||i(e)},i.prototype.addListener=function(t,e){this.callbacks[t]=e},i.prototype.setElementHeight=function(t,e){t.style.height=e+"px"},i.prototype.getElementHeight=function(t){return this.getElementDir(t,"height")},i.prototype.setElementWidth=function(t,e){t.style.width=e+"px"},i.prototype.getElementWidth=function(t){return this.getElementDir(t,"width")},i.prototype.setElementDir=function(t,e,i){t.style[i]=e+"px"},i.prototype.getElementDir=function(t,e){var i;return t.style[e].indexOf("px")>-1&&t.style[e].indexOf("e")==-1?parseFloat(t.style[e]):(document.body.contains(t)?i=Math.round(t["offset"+e.charAt(0).toUpperCase()+e.slice(1)]):(t.style.visibility="hidden",document.body.appendChild(t),i=Math.round(t["offset"+e.charAt(0).toUpperCase()+e.slice(1)]),document.body.removeChild(t),t.style.visibility=""),i)},i.BEFORE=1,i.AFTER=2,i.INSIDE=3,i.prototype._isInViewport=function(t){var e,n;return e=t.row,n=t.column,e===-1&&n===-1?-1:e===-1?n<this.m_startCol?i.BEFORE:n>this.m_endCol?i.AFTER:i.INSIDE:n===-1?e<this.m_startRow?i.BEFORE:e>this.m_endRow?i.AFTER:i.INSIDE:n>=this.m_startCol&&n<=this.m_endCol&&e>=this.m_startRow&&e<=this.m_endRow?i.INSIDE:-1},i.prototype.queueModelEvent=function(t){return!(this.m_initialized&&!this.m_processingEventQueue&&!this.m_animating&&!this.m_processingModelEvent)&&(null==this.m_modelEvents&&(this.m_modelEvents=[]),this.m_modelEvents.push(t),!0)},i.prototype.handleModelEvent=function(e,i){var n,o,r,s,a,l,h,u;void 0===i&&this.queueModelEvent(e)||(n=e.operation,o=e.keys,h=e.source,l=e.indexes,r=e.result,s=e.header,a=e.endheader,u=e.silent,this.m_processingModelEvent=!0,"insert"===n?(this._adjustActive(n,l),this.m_shouldFocus=!0,this._adjustSelectionOnModelChange(n,o,l),null!=r?this._handleModelInsertRangeEvent(r,s,a):this._handleModelInsertEvent(l,o)):"update"===n?this._handleModelUpdateEvent(l,o):"delete"===n?(this._adjustActive(n,l),this._adjustSelectionOnModelChange(n,o,l),h&&t.FlattenedTreeDataGridDataSource&&h instanceof t.FlattenedTreeDataGridDataSource&&this.m_utils.supportsTransitions()?this._handleModelDeleteEventWithAnimation(o):this._handleModelDeleteEvent(l,o,u)):"refresh"===n||"reset"===n?this._handleModelRefreshEvent():"sync"===n&&this._handleModelSyncEvent(e),this.m_processingModelEvent=!1)},i.prototype._adjustActive=function(t,e){var i,n,o,r,s=0;if(null!=this.m_active){if("cell"==this.m_active.type)r=!1,i=this.m_active.indexes.row;else{if("row"!==this.m_active.axis)return;r=!0,i=this.m_active.index}if(Array.isArray(e)||(e=new Array(e)),this.m_moveActive===!0){if("insert"===t)return void(r?this.m_active.index=e[0].row:this.m_active.indexes.row=e[0].row);if("delete"===t&&e[0].row===i)return}for(s="insert"===t?1:-1,n=0;n<e.length;n++)o=e[n].row,o<i?r?this.m_active.index+=s:this.m_active.indexes.row+=s:o===i&&"delete"===t&&this._setActive(null)}},i.prototype._adjustSelectionOnModelChange=function(t,e,i){var n,o,r,s,a,l,h,u,d,c,p,_,g;if(Array.isArray(e)||(e=new Array(e)),Array.isArray(i)||(i=new Array(i)),n=this.GetSelection(),null==e||null==i||e.length!=i.length||0==n.length)return void(this.m_moveActive&&"insert"==t&&(this._isSelectionEnabled()&&this._isDatabodyCellActive()&&(g="cell"==this.m_options.getSelectionMode()?this.createRange(this.m_active.indexes,this.m_active.indexes,e[0],e[0]):this.createRange(i[0],i[0],e[0],e[0]),this.m_selectionFrontier=this.m_active.indexes,n.push(g)),this.m_moveActive=!1));for(_="insert"===t?1:-1,o=0;o<e.length;o++)for(r=e[o].row,s=i[o].row,a=n.length;a--;)if(l=n[a],h=l.startKey.row,u=l.endKey.row,d=l.startIndex.row,c=l.endIndex.row,h==r){if(u==r&&"delete"==t){n.splice(a,1);continue}p=this._getKey(this.m_databody.firstChild.childNodes[l.startIndex.row+1-this.m_startRow]),l.startKey.row=p,l.endIndex.row+=_}else u==r?(p=this._getKey(this.m_databody.firstChild.childNodes[l.endIndex.row-1-this.m_startRow]),l.endKey.row=p,l.endIndex.row+=_):s<d?(l.startIndex.row+=_,l.endIndex.row+=_):s<c&&(l.endIndex.row+=_)},i.prototype._handleModelInsertEvent=function(t,e){var n,o,r,s;n=this._isInViewport(t),n===i.INSIDE||n===i.AFTER&&t.row==this.m_endRow+1?null!=e.row&&(this._databodyEmpty()?(this.empty(),this.refresh(this.m_root)):(this.fetchHeaders("row",t.row,this.m_rowHeader,this.m_rowEndHeader,1,{success:this._handleHeaderInsertsFetchSuccess}),this.fetchCells(this.m_databody,t.row,this.m_startCol,1,this.m_endCol-this.m_startCol+1,{success:this._handleCellInsertsFetchSuccess}))):(n===i.BEFORE&&(this.m_startRow++,this.m_startRowHeader++,this.m_endRow++,this.m_endRowHeader++,this.m_startRowPixel+=this.m_avgRowHeight,this.m_startRowHeaderPixel+=this.m_avgRowHeight,this.m_endRowPixel+=this.m_avgRowHeight,this.m_endRowHeaderPixel+=this.m_avgRowHeight,o=this.m_databody.firstChild.firstChild,null!=o&&this.pushRowsDown(o,this.m_avgRowHeight),r=this.m_rowHeader.firstChild.firstChild,null!=r&&this.pushRowsDown(r,this.m_avgRowHeight),s=this.m_rowEndHeader.firstChild.firstChild,null!=s&&this.pushRowsDown(s,this.m_avgRowHeight)),this.scrollToIndex(t))},i.prototype._handleCellInsertsFetchSuccess=function(t,e){var i;this.m_initialized=!1,this.handleCellsFetchSuccess(t,e,this.m_endRow>=e[0].start),i=e[0].start,this._scrollRowIntoViewport(i),this._isHighWatermarkScrolling()||this._cleanupViewport("top"),this.updateRowBanding(),this.m_stopRowFetch=!1,this.m_endRowHeader!=-1&&(this.m_stopRowHeaderFetch=!1),this.m_endRowEndHeader!=-1&&(this.m_stopRowEndHeaderFetch=!1),this.fillViewport()},i.prototype._handleHeaderInsertsFetchSuccess=function(t,e,i){this.m_resizeRequired=!0,this.handleHeadersFetchSuccess(t,e,i,this.m_endRowHeader>=e.start)},i.prototype._scrollRowIntoViewport=function(t){var e,i,n,o,r,s,a;e=t-this.m_startRow,i=this.m_databody.firstChild,n=i.childNodes[e],null!=n&&(o=this._getViewportTop(),r=this._getViewportBottom(),s=n.offsetTop,a=o-s,a>0?this.scrollDelta(0,a):(a=r-s,a<0&&this.scrollDelta(0,a)))},i.prototype._handleModelInsertRangeEvent=function(t,e,i){var n,o,r,s,a,l,h,u,d,c,p,_,g,m,f,y,v,S;if(n=t.getStart("row"),o=t.getCount("row"),r=t.getStart("column"),s=t.getCount("column"),this.m_utils.supportsTransitions()){if(null!=e)for(a=document.createDocumentFragment(),h=e.getCount(),c=0,u=0,_=this.getMappedStyle("row")+" "+this.getMappedStyle("headercell")+" "+this.getMappedStyle("rowheadercell"),g=this.m_options.getRenderer("row");h-u>0;)d=n+u,p=this.buildLevelHeaders(a,d,0,0,this.m_startRowPixel+c,!0,n!=this.m_endRowHeader+1&&u!=o-1,g,e,"row",_,this.m_rowHeaderLevelCount),u+=p.count,c+=p.totalHeight;if(null!=i)for(v=document.createDocumentFragment(),S=i.getCount(),c=0,u=0,_=this.getMappedStyle("row")+" "+this.getMappedStyle("endheadercell")+" "+this.getMappedStyle("rowendheadercell"),g=this.m_options.getRenderer("rowEnd");S-u>0;)d=n+u,p=this.buildLevelHeaders(v,d,0,0,this.m_startRowPixel+c,!0,n!=this.m_endRowEndHeader+1&&u!=o-1,g,i,"rowEnd",_,this.m_rowEndHeaderLevelCount),u+=p.count,c+=p.totalHeight;if(l=document.createDocumentFragment(),p=this._addRows(l,!0,this.m_startRowPixel,n,o,r,!1,t),!(0!==l.childNodes.length||null!=a&&0!==a.childNodes.length||null!=v&&0!==v.childNodes.length))return;this._insertRowsWithAnimation(l,a,v,n,p.totalRowHeight)}else m={axis:"row",start:n,count:o},f={axis:"column",start:r,count:s},null!=e&&(y={axis:"row",header:this.m_rowHeader,endHeader:this.m_rowEndHeader,start:n,count:e.getCount()},this.m_fetching.row=y,this._handleHeaderInsertsFetchSuccess(e,y,i)),this._handleCellInsertsFetchSuccess(t,[m,f])},i.prototype._handleModelUpdateEvent=function(t,e){var n;n=this._isInViewport(t),n===i.INSIDE&&(this.m_endRowHeader!=-1&&this.fetchHeaders("row",t.row,this.m_rowHeader,this.m_rowEndHeader,1,{success:this._handleHeaderUpdatesFetchSuccess,error:this.handleHeadersFetchError}),this.fetchCells(this.m_databody,t.row,this.m_startCol,1,this.m_endCol-this.m_startCol+1,{success:this._handleCellUpdatesFetchSuccess,error:this.handleCellsFetchError}))},i.prototype._handleHeaderUpdatesFetchSuccess=function(t,e,i){var n,o,r;n=e.axis,this.m_fetching[n]=!1,o=e.start,this._replaceHeaders(this.buildRowHeaders.bind(this),t,this.m_rowHeader,o-this.m_startRowHeader),this._replaceHeaders(this.buildRowEndHeaders.bind(this),i,this.m_rowEndHeader,o-this.m_startRowEndHeader),r=this.m_rowHeader.firstChild.childNodes[o-this.m_startRowHeader],null==this.m_active||"header"!==this.m_active.type||"row"!==this.m_active.axis&&"rowEnd"!==this.m_active.axis||this._getKey(r)!==this.m_active.key||this._highlightActive(),this._signalTaskEnd()},i.prototype._replaceHeaders=function(t,e,i,n){var o,r,s;null!=e&&(r=t(i,e,n,1,!0,!0),o=i.firstChild,s=o.childNodes[n],o.replaceChild(r,s))},i.prototype._handleCellUpdatesFetchSuccess=function(t,e){var i,n,o,r,s,a,l;this.m_fetching.cells=!1,i=e[0].start,n=this.m_databody.firstChild,o=this.m_options.getRenderer("cell"),r=this.m_options.getColumnBandingInterval(),s=this.m_options.getRowBandingInterval(),a=i-this.m_startRow,l=n.childNodes[a],this._updateCellsInRow(t,l,a,o,this.m_startCol,r),this._signalTaskEnd()},i.prototype._getUpdateAnimation=function(){return i.UPDATE_ANIMATION_SLIDE_INOUT},i.prototype._getUpdateAnimationDuration=function(){return i.UPDATE_ANIMATION_DURATION},i.prototype._updateCellsInRow=function(t,e,i,n,o,r){var s,a,l,h;s=this._getUpdateAnimationDuration(),0!==s&&this.m_utils.supportsTransitions()?(a=this,a._signalTaskStart(),h=function(){e.style.left="",a.removeTransformMoveStyle(e),e.removeEventListener("transitionend",h,!1),a._isSelectionEnabled()&&a.applySelection(),a._highlightActive(),a._signalTaskEnd()},e.addEventListener("transitionend",h),l=this.getElementWidth(this.m_databody),this.setElementDir(e,l,"left"),this.m_utils.empty(e),this.addCellsToRow(t,e,i,n,!0,o,!1,r),this.hideStatusText(),this.addTransformMoveStyle(e,s+"ms",0,"linear",-1*l,0,0)):(this.m_utils.empty(e),this.addCellsToRow(t,e,i,n,!0,o,!1,r),this._isSelectionEnabled()&&this.applySelection(),this._highlightActive())},i.prototype._handleModelDeleteEvent=function(t,e,n){var o,r,s,a,l,h,u,d,c,p,_,g,m,f,y,v,S,C;for(Array.isArray(e)||(e=new Array(e),t=new Array(t)),d=0,c=0,p=0,y=0,v=0,r=0;r<e.length;r++)o=e[r],f=t[r],null!=o.row&&(l=0,s=o.row,m=this._isInViewport(f),m===i.BEFORE?(y++,d+=this.m_avgRowHeight,this.m_startRowPixel-=this.m_avgRowHeight,this.m_endRowPixel-=this.m_avgRowHeight,this.m_endRowHeader!=-1&&(this.m_startRowHeaderPixel-=this.m_avgRowHeight,this.m_endRowHeaderPixel-=this.m_avgRowHeight),a=this.m_databody.firstChild.firstChild,null!=a&&this.pushRowsUp(a,this.m_avgRowHeight),g=this.m_rowHeader.firstChild.firstChild,null!=g&&this.pushRowsUp(g,this.m_avgRowHeight),C=this.m_rowEndHeader.firstChild.firstChild,null!=C&&this.pushRowsUp(C,this.m_avgRowHeight)):m===i.INSIDE?(v++,a=this._findRowByKey(s),null!=a&&(l=this.calculateRowHeight(a),h=a.nextSibling,this._remove(a),this.pushRowsUp(h,l),this.m_endRowPixel-=l),g=this._findHeaderByKey(s,this.m_rowHeader,this.getMappedStyle("rowheadercell")),null!=g&&(l=this.calculateRowHeaderHeight(g),h=g.nextSibling,this._remove(g),this.pushRowHeadersUp(h,l),this.m_endRowHeaderPixel-=l),C=this._findHeaderByKey(s,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")),null!=C&&(l=this.calculateRowHeaderHeight(C),h=C.nextSibling,this._remove(C),this.pushRowHeadersUp(h,l),this.m_endRowEndHeaderPixel-=l),c+=l):"scroll"===this.m_options.getScrollPolicy()&&(p+=this.m_avgRowHeight));
this.m_startRow-=y,this.m_endRow=this.m_endRow-y-v,this.m_endRowHeader!=-1&&(this.m_startRowHeader-=y,this.m_endRowHeader=this.m_endRowHeader-y-v),this.m_endRowEndHeader!=-1&&(this.m_startRowEndHeader-=y,this.m_endRowEndHeader=this.m_endRowEndHeader-y-v),S=d+c+p,u=this.m_databody.firstChild,_=this.getElementHeight(u)-S,this.setElementHeight(u,_),this.resizeGrid(),n||1==this.m_moveActive||(this.m_resizeRequired=!0,this.m_stopRowFetch=!1,this.m_endRowHeader!=-1&&(this.m_stopRowHeaderFetch=!1),this.m_endRowEndHeader!=-1&&(this.m_stopRowEndHeaderFetch=!1),this.fillViewport()),this.updateRowBanding()},i.prototype._handleModelDeleteEventWithAnimation=function(t){this._collapseRowsWithAnimation(t)},i.prototype._getSelectionGaps=function(t){var e,i,n,o;for(i=[],n=[],o=!0,e=0;e<t.length-1;e++)t[e+1]-t[e]==1?(i.push(t[e]),o=!1):(o?i.push(t[e]):i.push(t[e]),n.push(i),i=[],o=!0);return i.push(t[t.length-1]),n.push(i),n},i.prototype._getRowByLocalPosition=function(t){var e;return e=this._getLocalKeys({row:t}).row,this._findRowByKey(e)},i.prototype._removeRowsWithAnimation=function(t,e){var n,o,r,s,a,l,h,u,d,c,p,_,g,m,f,y,v,S,C,E,b,T,A,O,P,I,D,x,M,L,R,w;for(n=this,n._signalTaskStart(),T=n._getSelectionGaps(e),h=n._getRowByLocalPosition(e[e.length-1]),c=h.nextSibling,R=0,v=600,S=400,C=150,E=0,b="Cubic-bezier(0.70,0.00,0.51,1.29)",A=n.getCssSupport("transition-duration"),O=n.getCssSupport("transition-delay"),P=n.getCssSupport("transition-timing-function"),I=n.getCssSupport("opacity"),D=n.getCssSupport("transform"),g=i.COLLAPSE_ANIMATION_DURATION,y=!0,p=n.m_databody.firstChild,m=n._getRowByLocalPosition(e[0]),0!=m.previousSibling.childElementCount&&(m=m.previousSibling,y=!1),r=0;r<t.length;r++)o=t[r],o.row&&(l=o.row,h=n._findRowByKey(l),null!=h?(d=n.calculateRowHeight(h),n.changeStyleProperty(h,A,S+"ms"),n.changeStyleProperty(h,O,E+"ms"),n.changeStyleProperty(h,P,b),n.changeStyleProperty(h,I,0)):d=n.m_avgRowHeight,_=n._findHeaderByKey(l,this.m_rowHeader,this.getMappedStyle("rowheadercell")),null!=_&&(d=n.calculateRowHeaderHeight(_),c=_.nextSibling,n.pushRowHeadersUp(c,d),n._remove(_),_.style.display="none",n.m_endRowHeader=n.m_endRowHeader-1,n.m_endRowHeaderPixel=n.m_endRowHeaderPixel-d),n.m_endRow=n.m_endRow-1,n.m_endRowPixel=n.m_endRowPixel-d,u+=d);if(T.length>1)for(r=0;r<T.length-1;r++)for(R+=T[r].length,M=d*R,s=T[r][T[r].length-1]+1;s<T[r+1][0];s++)h=n._getRowByLocalPosition(s),n.addTransformMoveStyle(h,v+"ms",C+"ms",b,0,"-"+M,0);for(x=c,M=d*t.length;x;)L=x.previousSibling,n.addTransformMoveStyle(x,v+"ms",C+"ms",b,0,"-"+M,0),x=x.nextSibling,x||(w=function(){for(s=0;s<t.length;s++)t[s].row&&(h=n._findRowByKey(t[s].row),n._remove(h),h.style.display="none");for(f=-1,a=1;a<p.childElementCount;a++)h=p.childNodes[a],n._getKey(m)&&n._getKey(m)==n._getKey(p.childNodes[a])&&(f=a+1),n.changeStyleProperty(h,n.getCssSupport("z-index"),0,"remove"),n.removeTransformMoveStyle(h),f>0?p.childNodes[a].style.top=m.offsetTop+d*(a-f+1)+"px":y&&(p.childNodes[a].style.top=m.offsetTop+d*(a-1)+"px");n.setElementHeight(p,n.getElementHeight(p)-u),n.resizeGrid(),n.m_stopRowFetch=!1,n.fillViewport(),n.updateRowBanding(),this.removeEventListener("transitionend",w,!1)},L.addEventListener("transitionend",w,!1))},i.prototype._collapseRowsWithAnimation=function(t){var e,n,o,r,s,a,l,h,u,d,c,p,_,g,m,f,y,v,S,C,E,b;for(e=this,e._signalTaskStart(),n=this.m_processingEventQueue?1:i.COLLAPSE_ANIMATION_DURATION,c=[],g=0,C=this.m_endRowHeader!=-1,b=this.m_endRowEndHeader!=-1,o=this.m_databody.firstChild,r=this._findRowByKey(t[0].row).previousSibling,v=this.getElementDir(r,"top"),d=r;d&&!(this.getElementDir(d,"top")<this.m_currentScrollTop);)this.changeStyleProperty(d,this.getCssSupport("z-index"),10),d=d.previousSibling;if(C)for(p=[],s=this._findHeaderByKey(t[0].row,this.m_rowHeader,this.getMappedStyle("rowheadercell")).previousSibling,S=this.getElementDir(s,"top"),d=s;d&&!(this.getElementDir(d,"top")<this.m_currentScrollTop);)this.changeStyleProperty(d,this.getCssSupport("z-index"),10),d=d.previousSibling;if(b)for(_=[],a=this._findHeaderByKey(t[0].row,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")).previousSibling,E=this.getElementDir(a,"top"),d=a;d&&!(this.getElementDir(d,"top")<this.m_currentScrollTop);)this.changeStyleProperty(d,this.getCssSupport("z-index"),10),d=d.previousSibling;for(h=0;h<t.length;h++)u=t[h].row,d=this._findRowByKey(u),null!=d&&(c.push(d),g+=this.getElementHeight(d),this.setElementDir(d,this.getElementDir(d,"top")-g,"top"),this.addTransformMoveStyle(d,0,0,"linear",0,g,0)),C&&(m=this._findHeaderByKey(u,this.m_rowHeader,this.getMappedStyle("rowheadercell")),null!=m&&(p.push(m),this.setElementDir(m,this.getElementDir(m,"top")-g,"top"),this.addTransformMoveStyle(m,0,0,"linear",0,g,0))),b&&(f=this._findHeaderByKey(u,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")),null!=f&&(_.push(f),this.setElementDir(f,this.getElementDir(f,"top")-g,"top"),this.addTransformMoveStyle(f,0,0,"linear",0,g,0)));for(;d.nextSibling;)d=d.nextSibling,this.setElementDir(d,this.getElementDir(d,"top")-g,"top"),this.addTransformMoveStyle(d,0,0,"linear",0,g,0),C&&(m=m.nextSibling,this.setElementDir(m,this.getElementDir(m,"top")-g,"top"),this.addTransformMoveStyle(m,0,0,"linear",0,g,0)),b&&(f=f.nextSibling,this.setElementDir(f,this.getElementDir(f,"top")-g,"top"),this.addTransformMoveStyle(f,0,0,"linear",0,g,0));l=o.lastChild,y=function(){var t;for(t=0;t<c.length;t++)e._remove(c[t]),C&&e._remove(p[t]),b&&e._remove(_[t]);e.setElementHeight(o,e.m_endRowPixel-e.m_startRowPixel),e.resizeGrid(),e.updateRowBanding(),e.fillViewport(),e._handleAnimationEnd(),l.removeEventListener("transitionend",y,!1)},l.addEventListener("transitionend",y,!1),this.m_endRow-=c.length,this.m_endRowPixel-=g,this.m_stopRowFetch=!1,C&&(this.m_endRowHeader-=p.length,this.m_endRowHeaderPixel-=g,this.m_stopRowHeaderFetch=!1),b&&(this.m_endRowEndHeader-=p.length,this.m_endRowEndHeaderPixel-=g,this.m_stopRowEndHeaderFetch=!1),this.m_animating=!0,d=r.nextSibling,C&&(m=s.nextSibling),b&&(f=a.nextSibling),setTimeout(function(){for(;d;)e.addTransformMoveStyle(d,n+"ms",0,"ease-out",0,0,0),d=d.nextSibling,C&&(e.addTransformMoveStyle(m,n+"ms",0,"ease-out",0,0,0),m=m.nextSibling),b&&(e.addTransformMoveStyle(f,n+"ms",0,"ease-out",0,0,0),f=f.nextSibling)},0)},i.prototype._handleAnimationEnd=function(){var t,e,i,n;for(e=this.m_databody.firstChild,i=this.m_rowHeader.firstChild,n=this.m_rowEndHeader.firstChild,t=0;t<e.childNodes.length;t++)this.removeTransformMoveStyle(e.childNodes[t]),this.changeStyleProperty(e.childNodes[t],this.getCssSupport("z-index"),null,"remove"),this.m_endRowHeader!=-1&&(this.removeTransformMoveStyle(i.childNodes[t]),this.changeStyleProperty(i.childNodes[t],this.getCssSupport("z-index"),null,"remove")),this.m_endRowEndHeader!=-1&&(this.removeTransformMoveStyle(n.childNodes[t]),this.changeStyleProperty(n.childNodes[t],this.getCssSupport("z-index"),null,"remove"));this.m_animating=!1,this._runModelEventQueue(),this._signalTaskEnd()},i.prototype._findRowByKey=function(t){var e,i,n,o,r;if(null==this.m_databody||null==this.m_databody.firstChild)return null;for(e=this.m_databody.firstChild,i=e.childNodes,o=0;o<i.length;o++)if(n=i[o],r=this._getKey(n),r==t)return n;return null},i.prototype._findHeaderByKey=function(t,e,i){var n,o,r,s;if(null==e)return null;for(n=e.getElementsByClassName(i),r=0;r<n.length;r++)if(o=n[r],s=this._getKey(o),s==t)return o;return null},i.prototype._handleModelRefreshEvent=function(){var t=this.getVisibility();t===i.VISIBILITY_STATE_VISIBLE?(this.empty(),null!=this.m_root.offsetParent?this.refresh(this.m_root):this.setVisibility(i.VISIBILITY_STATE_REFRESH)):t===i.VISIBILITY_STATE_HIDDEN&&(this.empty(),this.setVisibility(i.VISIBILITY_STATE_REFRESH))},i.prototype._handleModelSyncEvent=function(t){var e,i,n,o,r;e=0,n=0,o=0,r=0,i=t.pageSize,this.m_fetching={},this.m_startRow=e,this.m_endRow=-1,this.m_startRowHeader=e,this.m_endRowHeader=-1,this.m_startRowEndHeader=e,this.m_endRowEndHeader=-1,this.m_startRowPixel=n,this.m_endRowPixel=n,this.m_startRowHeaderPixel=n,this.m_endRowHeaderPixel=n,this.m_startRowEndHeaderPixel=n,this.m_endRowEndHeaderPixel=n,this.m_startCol=o,this.m_endCol=-1,this.m_startColHeader=o,this.m_endColHeader=-1,this.m_startColEndHeader=o,this.m_endColEndHeader=-1,this.m_startColPixel=r,this.m_endColPixel=r,this.m_startColHeaderPixel=r,this.m_endColHeaderPixel=r,this.m_startColEndHeaderPixel=r,this.m_endColEndHeaderPixel=r,this.m_rowHeaderLevelCount=void 0,this.m_columnHeaderLevelCount=void 0,this.m_rowEndHeaderLevelCount=void 0,this.m_columnEndHeaderLevelCount=void 0,this.m_avgRowHeight=void 0,this.m_avgColWidth=void 0,this.m_isEstimateRowCount=void 0,this.m_isEstimateColumnCount=void 0,this.m_stopRowFetch=!1,this.m_stopRowHeaderFetch=!1,this.m_stopRowEndHeaderFetch=!1,this.m_stopColumnFetch=!1,this.m_stopColumnHeaderFetch=!1,this.m_stopColumnEndHeaderFetch=!1,this.m_selection=null,this.m_active=null,this.m_prevActive=null,null!=this.m_empty&&(this.m_root.removeChild(this.m_empty),this.m_empty=null),this._showHeader(this.m_rowHeader),this._showHeader(this.m_colHeader),this._showHeader(this.m_rowEndHeader),this._showHeader(this.m_colEndHeader),this.m_initialized=!1,this.fetchHeaders("row",e,this.m_rowHeader,this.m_rowEndHeader,i,{success:function(t,e,i){this.handleRowHeadersFetchSuccessForLongScroll(t,e,i)}}),this.fetchHeaders("column",o,this.m_colHeader,this.m_colEndHeader,void 0,{success:function(t,e,i){this.handleColumnHeadersFetchSuccessForLongScroll(t,e,i)}}),this.fetchCells(this.m_databody,e,o,i,null,{success:function(t,e){this.handleCellsFetchSuccessForLongScroll(t,e)}}),this.setInitialScrollPosition()},i.prototype._setActiveByIndex=function(t,e,i){return this._setActive(this._getCellByIndex(t),e,i)},i.prototype._updateActive=function(t,e){var i,n;null==t?this._setActive(null,null,null,!0):null!=t.keys?n=this._getCellByKeys(t.keys):null!=t.indexes?n=this._getCellByIndex(t.indexes):null!=t.axis&&(i=null==t.level?0:t.level,"column"==t.axis?null!=t.key?n=this._findHeaderByKey(t.key,this.m_colHeader,this.getMappedStyle("colheadercell")):null!=t.index&&(n=this._getHeaderByIndex(t.index,i,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader)):"row"==t.axis?null!=t.key?n=this._findHeaderByKey(t.key,this.m_rowHeader,this.getMappedStyle("rowheadercell")):null!=t.index&&(n=this._getHeaderByIndex(t.index,i,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader)):"columnEnd"==t.axis?null!=t.key?n=this._findHeaderByKey(t.key,this.m_colEndHeader,this.getMappedStyle("colendheadercell")):null!=t.index&&(n=this._getHeaderByIndex(t.index,i,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader)):"rowEnd"==t.axis&&(null!=t.key?n=this._findHeaderByKey(t.key,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")):null!=t.index&&(n=this._getHeaderByIndex(t.index,i,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader)))),null!=n&&(e||(this.m_shouldFocus=!1),this._setActive(n,null,null,!0))},i.prototype._setActive=function(t,e,i,n){if(null!=t){var o=this._createActiveObject(t);if(this._compareActive(o,this.m_active)){if(n||this._fireBeforeCurrentCellEvent(o,this.m_active,e))return this.m_prevActive=this.m_active,this.m_active=o,this.m_shouldFocus!==!1&&this._scrollToActive(o),i&&this._isSelectionEnabled()&&this._clearSelection(e),this._unhighlightActiveObject(this.m_prevActive),this._highlightActiveObject(this.m_active,this.m_prevActive),this._manageMoveCursor(),this._isGridEditable()&&this._updateEdgeCellBorders(""),n||this._fireCurrentCellEvent(o,e),!0}else this._highlightActive()}else if(!this.m_scrollIndexAfterFetch&&!this.m_scrollHeaderAfterFetch)return(n||this._fireBeforeCurrentCellEvent(o,this.m_active,e))&&(this.m_prevActive=this.m_active,this.m_active=null,this._unhighlightActiveObject(this.m_prevActive),n||this._fireCurrentCellEvent(o,e)),!0;return!1},i.prototype._createActiveObject=function(t){var e=t[this.getResources().getMappedAttribute("context")];return this.m_utils.containsCSSClassName(t,this.getMappedStyle("headercell"))||this.m_utils.containsCSSClassName(t,this.getMappedStyle("endheadercell"))?{type:"header",axis:e.axis,index:this.getHeaderCellIndex(t),key:e.key,level:e.level}:{type:"cell",indexes:{row:this.getRowIndex(t.parentNode),column:this.getCellIndex(t)},keys:{row:e.keys.row,column:e.keys.column}}},i.prototype._getActiveElement=function(){return this._getElementFromActiveObject(this.m_active)},i.prototype._getElementFromActiveObject=function(t){var e;if(null!=t)if("header"==t.type){if("row"===t.axis)return this._findHeaderByKey(t.key,this.m_rowHeader,this.getMappedStyle("rowheadercell"));if("column"===t.axis)return this._findHeaderByKey(t.key,this.m_colHeader,this.getMappedStyle("colheadercell"));if("rowEnd"===t.axis)return this._findHeaderByKey(t.key,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell"));if("columnEnd"===t.axis)return this._findHeaderByKey(t.key,this.m_colEndHeader,this.getMappedStyle("colendheadercell"))}else if(e=this.getElementsInRange(this.createRange(t.indexes)),null!=e)return e[0];return null},i.prototype._compareActive=function(t,e){if(null==t&&null==e)return!1;if(null==t&&null!=e||null!=t&&null==e)return!0;if(t.type!=e.type)return!0;if("header"==t.type){if(t.index!=e.index||t.key!=e.key||t.axis!=e.axis||t.level!=e.level)return!0}else if(t.indexes.row!=e.indexes.row||t.indexes.column!=e.indexes.column||t.keys.row!=e.keys.row||t.keys.column!=e.keys.column)return!0;return!1},i.prototype._fireBeforeCurrentCellEvent=function(t,e,i){var n={event:i,ui:{currentCell:t,previousCurrentCell:e}};return this.fireEvent("beforeCurrentCell",n)},i.prototype._fireCurrentCellEvent=function(t,e){var i={event:e,ui:t};return this.fireEvent("currentCell",i)},i.prototype._isDatabodyCellActive=function(){return null!=this.m_active&&"cell"==this.m_active.type},i.prototype._updateActiveContext=function(t,e){var i,n,o,r,s;"header"===t.type?(i=t.axis,n=t.index,o=t.level,r={},"row"===t.axis?(this.m_rowHeaderLevelCount>1&&(null!=e&&o===e.level&&i===e.axis||(r.level=o)),null!=e&&n===e.index&&i===e.axis||(r.rowHeader=n)):"column"===i?(this.m_columnHeaderLevelCount>1&&(null!=e&&o===e.level&&i===e.axis||(r.level=o)),null!=e&&n===e.index&&i===e.axis||(r.columnHeader=n)):"rowEnd"===t.axis?(this.m_rowEndHeaderLevelCount>1&&(null!=e&&o===e.level&&i===e.axis||(r.level=o)),null!=e&&n===e.index&&i===e.axis||(r.rowEndHeader=n)):"columnEnd"===i&&(this.m_columnEndHeaderLevelCount>1&&(null!=e&&o===e.level&&i===e.axis||(r.level=o)),null!=e&&n===e.index&&i===e.axis||(r.columnEndHeader=n)),this._updateContextInfo(r,s)):(null==e||"cell"!=e.type||null==t||this.m_externalFocus||(t.indexes.row===e.indexes.row?s="row":t.indexes.column===e.indexes.column&&(s="column")),this._updateContextInfo(t.indexes,s))},i.prototype.handleDatabodyClickActive=function(t){var e,i;i=t.target,e=this.findCell(i),null!=e&&this._setActive(e,t)},i.prototype.handleHeaderClickActive=function(t){var e,i;e=t.target,i=this.findHeader(e),null!=i&&(this._isSelectionEnabled()&&this._clearSelection(t),this._setActive(i,t))},i.prototype._scrollToActive=function(t){"header"===t.type?this.scrollToHeader(t):this.scrollToIndex(t.indexes)},i.prototype._getCellByIndex=function(t){var e=this.getElementsInRange(this.createRange(t));return null!=e?e[0]:null},i.prototype._getCellByKeys=function(t){var e=this._findRowByKey(t.row);if(null!=e)for(var i=e.childNodes,n=0;n<i.length;n++)if(i[n][this.getResources().getMappedAttribute("context")].keys.column===t.column)return i[n];return null},i.prototype.getRowIndex=function(t){for(var e=this.m_startRow;t.previousSibling;)e+=1,t=t.previousSibling;return e},i.prototype.getCellIndex=function(t){for(var e=this.m_startCol;t.previousSibling;)e+=1,t=t.previousSibling;return e},i.prototype.getHeaderCellIndex=function(t){var e,i,n,o;switch(e=this.getHeaderCellAxis(t)){case"column":i=this.m_columnHeaderLevelCount,n=this.m_startColHeader;break;case"row":i=this.m_rowHeaderLevelCount,n=this.m_startRowHeader;break;case"columnEnd":i=this.m_columnEndHeaderLevelCount,n=this.m_startColEndHeader;break;case"rowEnd":i=this.m_rowEndHeaderLevelCount,n=this.m_startRowEndHeader;break;default:return-1}if(i>1){if(o=this._getAttribute(t.parentNode,"start",!0),t===t.parentNode.firstChild)return o;o--}else o=n;for(;t.previousSibling;)o+=1,t=t.previousSibling;return o},i.prototype.getHeaderCellAxis=function(t){return this.m_utils.containsCSSClassName(t,this.getMappedStyle("colheadercell"))?"column":this.m_utils.containsCSSClassName(t,this.getMappedStyle("rowheadercell"))?"row":this.m_utils.containsCSSClassName(t,this.getMappedStyle("rowendheadercell"))?"rowEnd":this.m_utils.containsCSSClassName(t,this.getMappedStyle("colendheadercell"))?"columnEnd":null},i.prototype.getHeaderCellLevel=function(t){var e;if(this.m_utils.containsCSSClassName(t,this.getMappedStyle("colheadercell"))){if(1===this.m_columnHeaderLevelCount)return 0}else if(this.m_utils.containsCSSClassName(t,this.getMappedStyle("rowheadercell"))){if(1===this.m_rowHeaderLevelCount)return 0}else if(this.m_utils.containsCSSClassName(t,this.getMappedStyle("colendheadercell"))){if(1===this.m_columnEndHeaderLevelCount)return 0}else if(this.m_utils.containsCSSClassName(t,this.getMappedStyle("rowendheadercell"))&&1===this.m_rowEndHeaderLevelCount)return 0;return e=this._getAttribute(t.parentNode,"level",!0),t===t.parentNode.firstChild?e:e+this.getHeaderCellDepth(t.parentNode.firstChild)},i.prototype.getHeaderCellDepth=function(t){return this._getAttribute(t,"depth",!0)},i.prototype.findCell=function(t){return this.find(t,"cell")},i.prototype.find=function(t,e,i){return null==t||t==this.getRootElement()?null:(void 0==i&&(i=this.getMappedStyle(e)),null==i?null:this.m_utils.containsCSSClassName(t,i)?t:this.find(t.parentNode,e,i))},i.prototype._highlightActive=function(t){this._highlightActiveObject(this.m_active,this.m_prevActive,t)},i.prototype._unhighlightActive=function(t){this._unhighlightActiveObject(this.m_active,t)},i.prototype._highlightActiveObject=function(t,e,i){if(null==i&&this.m_utils.shouldOffsetOutline()&&(i=["offsetOutline"]),null!=t){var n=this._getElementFromActiveObject(t);null!=n&&(this.m_focusInHandler(n),null!=i&&this._highlightElement(n,i),this._setAriaProperties(t,e,n))}},i.prototype._unhighlightActiveObject=function(t,e){if(null==e&&this.m_utils.shouldOffsetOutline()&&(e=["offsetOutline"]),null!=t){var i=this._getElementFromActiveObject(t);null!=i&&(this.m_focusOutHandler(i),null!=e&&this._unhighlightElement(i,e),this._unsetAriaProperties(i))}},i.prototype._highlightElement=function(t,e){var i,n;for(n=0;n<e.length;n++)i=this.getMappedStyle(e[n]),this.m_utils.addCSSClassName(t,i)},i.prototype._unhighlightElement=function(t,e){var i,n;for(n=0;n<e.length;n++)i=this.getMappedStyle(e[n]),this.m_utils.removeCSSClassName(t,i)},i.prototype._setAriaProperties=function(t,e,i){var n;n=this.getLabelledBy(t,e,i),this._updateActiveContext(t,e),i.setAttribute("tabIndex",0),i.setAttribute("aria-labelledby",n),null!=this.m_cellToFocus&&this.m_cellToFocus==i||this.m_shouldFocus===!1||i.focus(),this.m_shouldFocus=null},i.prototype._unsetAriaProperties=function(t){null!=t&&(t.setAttribute("tabIndex",-1),t.removeAttribute("aria-labelledby"))},i.prototype.getLabelledBy=function(t,e,i){var n,o,r,s,a,l,h,u,d,c;return n="","header"==t.type?(null==e||"header"!=e.type||this.m_externalFocus||("row"===e.axis&&this.m_rowHeaderLevelCount>1?o=this._getHeaderByIndex(e.index,e.level,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader):"column"===e.axis&&this.m_columnHeaderLevelCount>1?o=this._getHeaderByIndex(e.index,e.level,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader):"rowEnd"===e.axis&&this.m_rowEndHeaderLevelCount>1?o=this._getHeaderByIndex(e.index,e.level,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader):"columnEnd"===e.axis&&this.m_columnEndHeaderLevelCount>1&&(o=this._getHeaderByIndex(e.index,e.level,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader))),n=[this.createSubId("context"),this._getHeaderAndParentIds(i,o)].join(" "),r=i.getAttribute(this.getResources().getMappedAttribute("sortDir")),"ascending"===r?(s="accessibleSortAscending",n=n+" "+this.createSubId("state")):"descending"===r&&(s="accessibleSortDescending",n=n+" "+this.createSubId("state")),this.m_externalFocus===!0&&(n=[this.createSubId("summary"),n].join(" "),this.m_externalFocus=!1),null!=s&&this._updateStateInfo(s,{id:""}),i.setAttribute("tabIndex",0)):(null!=e&&("header"===e.type?(a="row"===e.axis?e.index:null,l="column"===e.axis?e.index:null):(a=e.indexes.row,l=e.indexes.column)),h=this._getHeaderLabel("row",this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader,this.m_endRowHeader,t.indexes.row,a,i),u=this._getHeaderLabel("rowEnd",this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader,this.m_endRowEndHeader,t.indexes.row,a,i),d=this._getHeaderLabel("column",this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader,this.m_endColHeader,t.indexes.column,l,i),c=this._getHeaderLabel("columnEnd",this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader,this.m_endColEndHeader,t.indexes.column,l,i),n=[this.createSubId("context"),h,u,d,c,i.id,this.createSubId("state")].join(" "),n=n.replace(/ +(?= )/g,""),this.m_externalFocus&&(n=[this.createSubId("summary"),n].join(" "),this.m_externalFocus=!1)),n},i.prototype.getHeaderFromCell=function(t,e){var i,n,o;if("row"===e){if(null!=this.m_rowHeader&&(i=t.parentNode,n=this.findIndexOf(i)+this.m_startRow,n>-1))return this._getHeaderByIndex(n,this.m_rowHeaderLevelCount-1,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader)}else if("column"===e){if(null!=this.m_colHeader&&(o=this.findIndexOf(t)+this.m_startCol,o>-1))return this._getHeaderByIndex(o,this.m_columnHeaderLevelCount-1,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader)}else if("rowEnd"===e){if(null!=this.m_rowEndHeader&&(i=t.parentNode,n=this.findIndexOf(i)+this.m_startRow,n>-1))return this._getHeaderByIndex(n,this.m_rowEndHeaderLevelCount-1,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader)}else if("columnEnd"===e&&null!=this.m_colEndHeader&&(o=this.findIndexOf(t)+this.m_startCol,o>-1))return this._getHeaderByIndex(o,this.m_columnEndHeaderLevelCount-1,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader);return null},i.prototype.findIndexOf=function(t){var e,i,n,o;for(i=t.parentNode.childNodes,n=-1,o=0;o<i.length;o+=1){if(e=i[o],e===t)return n+1;"DIV"==e.nodeName&&n++}return n},i.prototype.createRange=function(t,e,i,n){var o,r,s,a,l,h,u,d;return e&&(t.row<e.row||e.row==-1?(o=t.row,r=e.row,i&&(l=i.row,h=n.row)):(o=e.row,r=t.row,i&&(l=n.row,h=i.row)),isNaN(t.column)||isNaN(e.column)?(t={row:o},e={row:r},i&&(i={row:l,column:u},n={row:h,column:d})):(t.column<e.column||e.column==-1?(s=t.column,a=e.column,i&&(u=i.column,d=n.column)):(s=e.column,a=t.column,i&&(u=n.column,d=i.column)),t={row:o,column:s},e={row:r,column:a},i&&(i={row:l,column:u},n={row:h,column:d}))),i?{startIndex:t,endIndex:e,startKey:i,endKey:n}:{startIndex:t,endIndex:e}},i.prototype._createRangeWithKeys=function(t,e,i){this._keys(t,this._createRangeStartKeyCallback.bind(this,e,i))},i.prototype._createRangeStartKeyCallback=function(t,e,i,n){t===n?this._createRangeEndKeyCallback(i,n,e,i,n):t?this._keys(t,this._createRangeEndKeyCallback.bind(this,i,n,e)):e.call(this,{startIndex:n,endIndex:n,startKey:i,endKey:i})},i.prototype._createRangeEndKeyCallback=function(t,e,i,n,o){i.call(this,this.createRange(e,o,t,n))},i.prototype.getEndIndex=function(t){return null==t.endIndex?t.startIndex:t.endIndex},i.prototype.getElementsInRange=function(t,e,i,n,o){var r,s,a,l,h,u,d,c,p,_,g,m,f,y;if(void 0==e&&(e=this.m_startRow),void 0==i&&(i=this.m_endRow+1),r=t.startIndex,s=this.getEndIndex(t),a=r.row,l=s.row,l==-1&&(l=Number.MAX_VALUE),i<a||l<e)return null;if(!isNaN(r.column)&&!isNaN(s.column)&&(h=r.column,u=s.column,u==-1&&(u=Number.MAX_VALUE),this.m_endCol+1<h||u<this.m_startCol))return null;if(d=[],c=this.m_databody.firstChild,null==c)return null;if(p=c.childNodes,a=Math.max(0,a-this.m_startRow),l=Math.min(p.length,l-this.m_startRow+1),isNaN(h)||isNaN(u))for(_=a;_<l;_+=1)y=p[_],d.push(y);else for(void 0==n&&(n=this.m_startCol),h=Math.max(0,h-this.m_startCol),u=u-this.m_startCol+1,_=a;_<l;_+=1)for(g=p[_].childNodes,m=h;m<Math.min(g.length,u);m+=1)f=g[m],d.push(f);return d},i.prototype.readCurrentContent=function(){var t,e,i,n,o,r,s;if(null==this.m_active)return!1;if("header"==this.m_active.type)t={},"row"===this.m_active.axis?(this.m_rowHeaderLevelCount>1&&(t.level=this.m_active.level),t.rowHeader=this.m_active.index):(this.m_columnHeaderLevelCount>1&&(t.level=this.m_active.level),t.columnHeader=this.m_active.index),n=this._getActiveElement();else{if(t=this.m_active.indexes,this._isSelectionEnabled()&&this.isMultipleSelection()&&null!=this.m_selectionFrontier&&(t=this.m_selectionFrontier),null==t)return!1;if(e=this.createRange(t),i=this.getElementsInRange(e),null==i||0==i.length)return!1;n=i[0]}return this._setAriaProperties(this._createActiveObject(n),null,n),o=this.createSubId("placeHolder"),r=!0,s=n.getAttribute("aria-labelledby"),null!=s&&s.indexOf(o)!=-1&&(r=!1),r?(this.m_placeHolder.textContent="&nbsp",s=n.getAttribute("aria-labelledby"),n.setAttribute("aria-labelledby",s+" "+o)):this.m_utils.empty(this.m_placeHolder),n.focus(),!0},i.prototype._enterActionableMode=function(t){return this._enableAllFocusableElements(t),this._setFocusToFirstFocusableElement(t)&&(this.m_focusOutHandler(t),this.setActionableMode(!0)),!1},i.prototype._exitActionableMode=function(){var t;this.isActionableMode()&&(t=this._getActiveElement(),this.setActionableMode(!1),this._disableAllFocusableElements(t),this.m_focusInHandler(t))},i.prototype._reRenderCell=function(t,e,i){var n,o;n=this.m_options.getRenderer("cell"),o=t[this.getResources().getMappedAttribute("context")],o.mode=e,this.m_utils.empty(t),this.m_utils.containsCSSClassName(t,i)?this.m_utils.removeCSSClassName(t,i):this.m_utils.addCSSClassName(t,i),this._renderContent(n,o,t,o.data)},i.prototype.isNavigationKey=function(t){return this.isArrowKey(t)||t==i.keyCodes.HOME_KEY||t==i.keyCodes.END_KEY||t==i.keyCodes.PAGEUP_KEY||t==i.keyCodes.PAGEDOWN_KEY},i.prototype.isArrowKey=function(t){return t==i.keyCodes.UP_KEY||t==i.keyCodes.DOWN_KEY||t==i.keyCodes.LEFT_KEY||t==i.keyCodes.RIGHT_KEY},i.prototype.createIndex=function(t,e){return null!=t?null!=e?{row:t,column:e}:{row:t}:null},i.prototype.handleHeaderFocusChange=function(t,e,n){var o,r,s,a,l,h,u,d,c,p,_,g,m,f;if(!this.isFetchComplete())return!0;switch(this.getResources().isRTLMode()&&(t==i.keyCodes.LEFT_KEY?t=i.keyCodes.RIGHT_KEY:t==i.keyCodes.RIGHT_KEY&&(t=i.keyCodes.LEFT_KEY)),o=this.m_active.axis,r=this.m_active.index,s=this.m_active.level,a=this._getActiveElement(),c=null!=a?this._getAttribute(a,"depth",!0):1,"column"==o?(p=this.m_colHeader,_=this.m_startColHeader,g=this.m_endColHeader,m=this.m_columnHeaderLevelCount,f=this.m_stopColumnHeaderFetch):"row"==o&&(p=this.m_rowHeader,_=this.m_startRowHeader,g=this.m_endRowHeader,m=this.m_rowHeaderLevelCount,f=this.m_stopRowHeaderFetch),"columnEnd"==o&&(t==i.keyCodes.DOWN_KEY?t=i.keyCodes.UP_KEY:t==i.keyCodes.UP_KEY&&(t=i.keyCodes.DOWN_KEY),p=this.m_colEndHeader,_=this.m_startColEndHeader,g=this.m_endColEndHeader,m=this.m_columnEndHeaderLevelCount,f=this.m_stopColumnEndHeaderFetch),"rowEnd"==o&&(t==i.keyCodes.LEFT_KEY?t=i.keyCodes.RIGHT_KEY:t==i.keyCodes.RIGHT_KEY&&(t=i.keyCodes.LEFT_KEY),p=this.m_rowEndHeader,_=this.m_startRowEndHeader,g=this.m_endRowEndHeader,m=this.m_rowEndHeaderLevelCount,f=this.m_stopRowEndHeaderFetch),t){case i.keyCodes.LEFT_KEY:if(("column"===o||"columnEnd"===o)&&r>0){if(1===m)u=r-1,h=null!=a?a.previousSibling:null,d=s;else if(h=this._getHeaderByIndex(r-1,s,p,m,_),u=null!=h?this._getAttribute(h.parentNode,"start",!0):r-1,d=null!=h?this.getHeaderCellLevel(h):s,u<0)break;this.scrollToHeader({axis:o,index:u,level:d}),this._setActive(h,e)}else("row"===o||"rowEnd"===o)&&s>0&&(h=this._getHeaderByIndex(r,s-1,p,m,_),u=this._getAttribute(h.parentNode,"start",!0),d=this.getHeaderCellLevel(h),this.scrollToHeader({axis:o,index:u,level:d}),this._setActive(h,e));break;case i.keyCodes.RIGHT_KEY:"rowEnd"==o&&n&&this.m_endRowHeader!=-1?(h=this._getHeaderByIndex(r,this.m_rowHeaderLevelCount,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader),this.scrollToHeader({axis:"row",index:r,level:0}),this._setActive(h,e)):"row"==o&&n&&this.m_endRowEndHeader!=-1?(h=this._getHeaderByIndex(r,this.m_rowEndHeaderLevelCount,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader),this.scrollToHeader({axis:"rowEnd",index:r,level:0}),this._setActive(h,e)):"row"===o||"rowEnd"===o?s+c>=m?(l="row"==o?this.createIndex(r,0):this._isHighWatermarkScrolling()?this.createIndex(r,this.m_endCol):this.createIndex(r,this.getDataSource().getCount("column")-1),this.scrollToIndex(l),this._isSelectionEnabled()?this.selectAndFocus(l,e):this._setActiveByIndex(l,e)):(h=this._getHeaderByIndex(r,s+c,p,m,_),u=this._getAttribute(h.parentNode,"start",!0),d=this.getHeaderCellLevel(h),this.scrollToHeader({axis:o,index:u,level:d}),this._setActive(h,e)):(1===m?(u=r+1,h=null!=a?a.nextSibling:null,d=s):(s===m-1?(u=r+1,h=this._getHeaderByIndex(u,s,p,m,_)):(u=null!=a?this._getAttribute(a.parentNode,"start",!0)+this._getAttribute(a.parentNode,"extent",!0):r+1,h=this._getHeaderByIndex(u,s,p,m,_)),d=null!=h?this.getHeaderCellLevel(h):s),u>g&&f||!(this._isCountUnknown("column")||u<this.getDataSource().getCount("column"))||(this.scrollToHeader({axis:o,index:u,level:d}),this._setActive(h,e)));break;case i.keyCodes.UP_KEY:if(("row"===o||"rowEnd"===o)&&r>0){if(1===m)u=r-1,h=null!=a?a.previousSibling:null,d=s;else if(s===m-1?(u=r-1,h=this._getHeaderByIndex(u,s,p,m,_)):(h=this._getHeaderByIndex(this._getAttribute(a.parentNode,"start",!0)-1,s,p,m,_),u=null!=h?this._getAttribute(h.parentNode,"start",!0):r-1),d=null!=h?this.getHeaderCellLevel(h):s,u<0)break;this.scrollToHeader({axis:o,index:u,level:d}),this._setActive(h,e)}else("column"===o||"columnEnd"===o)&&s>0&&(h=this._getHeaderByIndex(r,s-1,p,m,_),u=this._getAttribute(h.parentNode,"start",!0),d=this.getHeaderCellLevel(h),this.scrollToHeader({axis:o,index:u,level:d}),this._setActive(h,e));break;case i.keyCodes.DOWN_KEY:"columnEnd"==o&&n&&this.m_endColHeader!=-1?(h=this._getHeaderByIndex(r,this.m_columnHeaderLevelCount,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader),this.scrollToHeader({axis:"column",index:r,level:0}),this._setActive(h,e)):"column"==o&&n&&this.m_endColEndHeader!=-1?(h=this._getHeaderByIndex(r,this.m_columnEndHeaderLevelCount,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader),this.scrollToHeader({axis:"columnEnd",index:r,level:0}),this._setActive(h,e)):"column"===o||"columnEnd"===o?s+c>=m?(l="column"==o?this.createIndex(0,r):this._isHighWatermarkScrolling()?this.createIndex(this.m_endRow,r):this.createIndex(this.getDataSource().getCount("row")-1,r),this.scrollToIndex(l),this._isSelectionEnabled()?this.selectAndFocus(l,e):this._setActiveByIndex(l,e)):(h=this._getHeaderByIndex(r,s+c,p,m,_),u=this._getAttribute(h.parentNode,"start",!0),d=this.getHeaderCellLevel(h),this.scrollToHeader({axis:o,index:u,level:d}),this._setActive(h,e)):(1===m?(u=r+1,h=null!=a?a.nextSibling:null,d=s):(s===m-1?(u=r+1,h=this._getHeaderByIndex(u,s,p,m,_)):(u=null!=a?this._getAttribute(a.parentNode,"start",!0)+this._getAttribute(a.parentNode,"extent",!0):r+1,h=this._getHeaderByIndex(u,s,p,m,_)),d=null!=h?this.getHeaderCellLevel(h):s),u>g&&f||!(this._isCountUnknown("row")||u<this.getDataSource().getCount("row"))||(this.scrollToHeader({axis:o,index:u,level:d}),this._setActive(h,e)));break;case i.keyCodes.PAGEUP_KEY:"row"!==o&&"rowEnd"!==o||(a=this._getHeaderByIndex(0,s,p,m,_),this.scrollToHeader({axis:o,
index:0,level:s}),this._setActive(a,e));break;case i.keyCodes.PAGEDOWN_KEY:"row"!==o&&"rowEnd"!==o||(r=this._isCountUnknown("row")||this._isHighWatermarkScrolling()?Math.max(0,g):Math.max(0,this.getDataSource().getCount("row")-1),a=this._getHeaderByIndex(r,s,p,m,_),this.scrollToHeader({axis:o,index:r,level:s}),this._setActive(a,e));break;case i.keyCodes.HOME_KEY:"column"!==o&&"columnEnd"!==o||(a=this._getHeaderByIndex(0,s,p,m,_),this.scrollToHeader({axis:o,index:0,level:s}),this._setActive(a,e));break;case i.keyCodes.END_KEY:"column"!==o&&"columnEnd"!==o||(r=this._isCountUnknown("column")||this._isHighWatermarkScrolling()?Math.max(0,g):Math.max(0,this.getDataSource().getCount("column")-1),a=this._getHeaderByIndex(r,s,p,m,_),this.scrollToHeader({axis:o,index:r,level:s}),this._setActive(a,e))}return!0},i.prototype._getHeaderLabel=function(t,e,i,n,o,r,s,a){var l,h;return o==-1||r==s&&!this.m_externalFocus?"":(l=this.getHeaderFromCell(a,t),null!=s&&(h=this._getHeaderByIndex(s,i-1,e,i,n)),this._getHeaderAndParentIds(l,h))},i.prototype._getHeaderAndParentIds=function(t,e){var i,n,o="",r=[];if(null==t)return"";for(n=this._getHeaderAndParents(t),null!=e&&(r=this._getHeaderAndParents(e)),i=0;i<n.length;i++)r[i]==n[i]&&i!==n.length-1||(o+=(""==o?"":" ")+n[i].id);return o},i.prototype._getHeaderAndParents=function(t){var e,i,n,o=[t];if(e=this.getHeaderCellAxis(t),i=this.getHeaderCellLevel(t),"row"===e?n=this.m_rowHeaderLevelCount:"column"===e?n=this.m_columnHeaderLevelCount:"rowEnd"===e?n=this.m_rowEndHeaderLevelCount:"columnEnd"===e&&(n=this.m_columnEndHeaderLevelCount),1===n)return o;for(i===n-1&&(t=t.parentNode.firstChild,o.unshift(t),i-=1);i>0;)t=t.parentNode.parentNode.firstChild,o.unshift(t),i-=1;return o},i.prototype.handleFocusChange=function(t,e,n,o,r){var s,a,l,h,u;if(!this.isFetchComplete())return!0;if(s=e?this.m_selectionFrontier:this.m_active.indexes,null!=s){switch(this.getResources().isRTLMode()&&(t==i.keyCodes.LEFT_KEY?t=i.keyCodes.RIGHT_KEY:t==i.keyCodes.RIGHT_KEY&&(t=i.keyCodes.LEFT_KEY)),u=this._isSelectionEnabled()?this.selectAndFocus.bind(this):this._setActiveByIndex.bind(this),a=s.row,l=s.column,t){case i.keyCodes.LEFT_KEY:l>0&&(!r||this.m_endRowHeader==-1)?"row"==this.m_options.getSelectionMode()?(h=this.createIndex(this.m_active.indexes.row,l-1),this.scrollToIndex(h,e),this._setActiveByIndex(h,n)):(h=this.createIndex(a,l-1),this.scrollToIndex(h,e),e?this.extendSelection(h,n):u(h,n),l-1===0&&this._setAccInfoText("accessibleFirstColumn")):!e&&o&&(this.scrollToHeader({axis:"row",index:a,level:this.m_rowHeaderLevelCount-1}),this._setActive(this._getHeaderByIndex(a,this.m_rowHeaderLevelCount-1,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader),n,!0));break;case i.keyCodes.RIGHT_KEY:this._isLastColumn(l)||r&&this.m_endRowEndHeader!=-1?this.m_endRowEndHeader!=-1&&o?(this.scrollToHeader({axis:"rowEnd",index:a,level:this.m_rowEndHeaderLevelCount-1}),this._setActive(this._getHeaderByIndex(a,this.m_rowEndHeaderLevelCount-1,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader),n,!0)):e||(u(s,n),this.scrollToIndex(s)):"row"==this.m_options.getSelectionMode()?(h=this.createIndex(this.m_active.indexes.row,l+1),this.scrollToIndex(h,e),this._setActiveByIndex(h,n)):(h=this.createIndex(a,l+1),this.scrollToIndex(h,e),e?this.extendSelection(h,n):u(h,n),this._isLastColumn(l+1)&&this._setAccInfoText("accessibleLastColumn"));break;case i.keyCodes.UP_KEY:a>0&&(!r||this.m_endColHeader==-1)?(h=this.createIndex(a-1,l),this.scrollToIndex(h,e),e?this.extendSelection(h,n):u(h,n),a-1===0&&this._setAccInfoText("accessibleFirstRow")):!e&&o&&(this.scrollToHeader({axis:"column",index:l,level:this.m_columnHeaderLevelCount-1}),this._setActive(this._getHeaderByIndex(l,this.m_columnHeaderLevelCount-1,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader),n,!0));break;case i.keyCodes.DOWN_KEY:this._isLastRow(a)||r&&this.m_endColEndHeader!=-1?this.m_endColEndHeader!=-1&&o?(this.scrollToHeader({axis:"columnEnd",index:l,level:this.m_columnEndHeaderLevelCount-1}),this._setActive(this._getHeaderByIndex(l,this.m_columnEndHeaderLevelCount-1,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader),n,!0)):e||(u(s,n),this.scrollToIndex(s)):(h=this.createIndex(a+1,l),this.scrollToIndex(h,e),e?this.extendSelection(h,n):u(h,n),this._isLastRow(a+1)&&this._setAccInfoText("accessibleLastRow"));break;case i.keyCodes.HOME_KEY:h=this.createIndex(a,0),this.scrollToIndex(h),u(h,n);break;case i.keyCodes.END_KEY:h=this._isCountUnknown("column")||this._isHighWatermarkScrolling()?this.createIndex(a,Math.max(0,this.m_endCol)):this.createIndex(a,Math.max(0,this.getDataSource().getCount("column")-1)),this.scrollToIndex(h),u(h,n);break;case i.keyCodes.PAGEUP_KEY:h=this.createIndex(0,l),this.scrollToIndex(h),u(h,n);break;case i.keyCodes.PAGEDOWN_KEY:h=this._isCountUnknown("column")||this._isHighWatermarkScrolling()?this.createIndex(Math.max(0,this.m_endRow),l):this.createIndex(Math.max(0,this.getDataSource().getCount("row")-1),l),this.scrollToIndex(h),u(h,n)}return!0}},i.prototype.scrollToIndex=function(t,e){var i,n,o,r,s,a,l,h,u,d,c,p,_,g,m,f,y,v,S;i=t.row,n=t.column,d=this.getResources().isRTLMode()?"right":"left",o=0,r=0,h=this._getViewportTop(),u=this._getViewportBottom(),y=this._getViewportLeft(),v=this._getViewportRight(),i<this.m_startRow||i>this.m_endRow?(s=i<this.m_startRow?this.m_avgRowHeight*i:this.m_avgRowHeight*(i+1)-u+h,r=this.m_currentScrollTop-s,this.m_scrollIndexAfterFetch=t,S=!0):(a=this.m_databody.firstChild,l=a.childNodes[i-this.m_startRow],c=this.getElementDir(l,"top"),p=this.calculateRowHeight(l),c+p>u?r=u-(c+p):c<h&&(r=h-c)),isNaN(n)||1==S||(n<this.m_startCol||n>this.m_endCol?(_=n<this.m_startCol?this.m_avgColWidth*n:this.m_avgColWidth*(n+1)-v+y,o=this.m_currentScrollLeft-_,this.m_scrollIndexAfterFetch=t):(a=this.m_databody.firstChild,l=a.childNodes[i-this.m_startRow],g=l.childNodes[n-this.m_startCol],m=this.getElementDir(g,d),f=this.getElementWidth(g),m<y?o=y-m:m+f>v&&(o=v-(m+f)))),0!=o||0!=r?(null!=g&&e!==!0&&(this.m_cellToFocus=g),this.scrollDelta(o,r)):null!=this.m_scrollIndexAfterFetch&&this._setActiveByIndex(this.m_scrollIndexAfterFetch)&&(this.m_scrollIndexAfterFetch=null)},i.prototype.scrollToHeader=function(t){var e,i,n,o,r,s,a,l,h,u,d,c,p,_,g;p=t.axis,_=t.index,g=t.level,e=0,"row"===p?(i=this.m_startRowHeader,n=this.m_endRowHeader,o=this.m_avgRowHeight,r=this.m_currentScrollTop,u=this._getViewportTop(),d=this._getViewportBottom()):"column"===p?(i=this.m_startColHeader,n=this.m_endColHeader,o=this.m_avgColWidth,r=this.m_currentScrollLeft,u=this._getViewportLeft(),d=this._getViewportRight()):"rowEnd"===p?(i=this.m_startRowEndHeader,n=this.m_endRowEndHeader,o=this.m_avgRowHeight,r=this.m_currentScrollTop,u=this._getViewportTop(),d=this._getViewportBottom()):"columnEnd"===p&&(i=this.m_startColEndHeader,n=this.m_endColEndHeader,o=this.m_avgColWidth,r=this.m_currentScrollLeft,u=this._getViewportLeft(),d=this._getViewportRight()),c=d-u,_<i||_>n?(s=_<i?o*_:o*(_+1)-c,e=r-s,this.m_scrollHeaderAfterFetch=t):("row"===p||"rowEnd"===p?(h="row"===p?this._getHeaderByIndex(_,g,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader):this._getHeaderByIndex(_,g,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader),a=this.getElementDir(h,"top"),l=this.getElementHeight(h)):"column"!==p&&"columnEnd"!==p||(h="column"===p?this._getHeaderByIndex(_,g,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader):this._getHeaderByIndex(_,g,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader),a=this.getElementDir(h,this.getResources().isRTLMode()?"right":"left"),l=this.getElementWidth(h)),c>l?a+l>d?e=d-(a+l):a<u&&(e=u-a):e=u-a),0!=e?(null!=h&&(this.m_cellToFocus=h),"row"===p||"rowEnd"===p?this.scrollDelta(0,e):this.scrollDelta(e,0)):null!=this.m_scrollHeaderAfterFetch&&(this._updateActive(t,!0),this.m_scrollHeaderAfterFetch=null)},i.prototype.findHeader=function(t,e,i){if(null==e&&(e=this.getMappedStyle("headercell")),null==i&&(i=this.getMappedStyle("endheadercell")),null!=e){if(this.m_utils.containsCSSClassName(t,e)||this.m_utils.containsCSSClassName(t,i))return t;if(t.parentNode)return this.findHeader(t.parentNode,e,i);if(t===this.m_root)return null}return null},i.prototype.updateRowBanding=function(){var t,e,i,n,o;if(t=this.m_options.getRowBandingInterval(),t>0)for(e=this.m_databody.firstChild.childNodes,o=this.getMappedStyle("banded"),i=0;i<e.length;i++)n=this.m_startRow+i,Math.floor(n/t)%2===1?this.m_utils.containsCSSClassName(e[i],o)||this.m_utils.addCSSClassName(e[i],o):this.m_utils.containsCSSClassName(e[i],o)&&this.m_utils.removeCSSClassName(e[i],o)},i.prototype.updateColumnBanding=function(){var t,e,i,n,o,r,s;if(t=this.m_options.getColumnBandingInterval(),t>0)for(e=this.m_databody.firstChild.childNodes,o=this.getMappedStyle("banded"),i=0;i<e.length;i+=1)for(s=e[i].childNodes,r=0;r<s.length;r+=1)n=this.m_startCol+r,Math.floor(n/t)%2===1?this.m_utils.containsCSSClassName(s[r],o)||this.m_utils.addCSSClassName(s[r],o):this.m_utils.containsCSSClassName(s[r],o)&&this.m_utils.removeCSSClassName(e[r],o)},i.prototype._removeBanding=function(){var t,e,i,n,o;for(t=this.m_databody.firstChild.childNodes,o=this.getMappedStyle("banded"),i=0;i<t.length;i++)for(this.m_utils.containsCSSClassName(t[i],o)&&this.m_utils.removeCSSClassName(t[i],o),e=t[i].childNodes,n=0;n<e.length;n+=1)this.m_utils.containsCSSClassName(e[n],o)&&this.m_utils.removeCSSClassName(e[n],o)},i.prototype._setAccInfoText=function(t,e){var i=this.getResources().getTranslatedText(t,e);null!=i&&(this.m_accInfo.textContent=i)},i.prototype.handleExpandEvent=function(t,e){var i,n;return void 0===e&&this.queueModelEvent(t)?void(t.operation="expand"):(n=t.rowKey,i=this._findRowByKey(n),i.setAttribute("aria-expanded",!0),this._setAccInfoText("accessibleRowExpanded"),void this.populateAccInfo())},i.prototype.handleCollapseEvent=function(t,e){var i,n;return void 0===e&&this.queueModelEvent(t)?void(t.operation="collapse"):(n=t.rowKey,i=this._findRowByKey(n),i.setAttribute("aria-expanded",!1),this._setAccInfoText("accessibleRowCollapsed"),void this.populateAccInfo())},i.prototype._setKey=function(t,e){null!=t&&(t[this.getResources().getMappedAttribute("key")]=e)},i.prototype._getKey=function(t){return null!=t?t[this.getResources().getMappedAttribute("key")]:null},i.prototype._getActiveRowKey=function(t){if(t&&null!=this.m_prevActive){if("header"==this.m_prevActive.type&&("row"===this.m_prevActive.axis||"rowEnd"===this.m_prevActive.axis))return this.m_prevActive.key;if("cell"==this.m_prevActive.type)return this.m_prevActive.keys.row}else if(null!=this.m_active){if("header"==this.m_active.type&&("row"===this.m_active.axis||"rowEnd"===this.m_active.axis))return this.m_active.key;if("cell"==this.m_active.type)return this.m_active.keys.row}return null},i.prototype._getActiveRow=function(){return null!=this.m_active?this._findRowByKey(this.m_active.keys.row):null},i.prototype._handleCut=function(t,e){var i;return null==e&&(e=t.target),!!this._isMoveOnRowEnabled(this.findRow(e))&&(null!=this.m_cutRow&&this.m_utils.removeCSSClassName(this.m_cutRow,this.getMappedStyle("cut")),i=this._getKey(this.find(e,"row")),this.m_cutRow=this._findRowByKey(i),this.m_cutRowHeader=this._findHeaderByKey(i,this.m_rowHeader,this.getMappedStyle("rowheadercell")),this.m_cutRowEndHeader=this._findHeaderByKey(i,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")),this.m_utils.addCSSClassName(this.m_cutRow,this.getMappedStyle("cut")),null!==this.m_cutRowHeader&&this.m_utils.addCSSClassName(this.m_cutRowHeader,this.getMappedStyle("cut")),!0)},i.prototype._handlePaste=function(t,e){var i;return null==e&&(e=t.target),null!=this.m_cutRow&&(this.m_utils.removeCSSClassName(this.m_cutRow,this.getMappedStyle("cut")),null!==this.m_cutRowHeader&&(this.m_utils.removeCSSClassName(this.m_cutRowHeader,this.getMappedStyle("cut")),this.m_cutRowHeader=null),null!==this.m_cutRowEndHeader&&(this.m_utils.removeCSSClassName(this.m_cutRowEndHeader,this.getMappedStyle("cut")),this.m_cutRowEndHeader=null),i=this.find(e,"row"),this.m_cutRow!==i&&(this._isSelectionEnabled()&&this._clearSelection(t),this._isDatabodyCellActive()&&this._unhighlightActive(),this.m_moveActive=!0,this.getDataSource().move(this._getKey(this.m_cutRow),this._getKey(i))),this.m_cutRow=null,!0)},i.prototype._handleCancelReorder=function(t,e){if(null!=this.m_cutRow)return this.m_utils.removeCSSClassName(this.m_cutRow,this.getMappedStyle("cut")),this.m_cutRow=null,null!==this.m_cutRowHeader&&(this.m_utils.removeCSSClassName(this.m_cutRowHeader,this.getMappedStyle("cut")),this.m_cutRowHeader=null),null!==this.m_cutRowEndHeader&&(this.m_utils.removeCSSClassName(this.m_cutRowEndHeader,this.getMappedStyle("cut")),this.m_cutRowEndHeader=null),!0},i.prototype._handleMove=function(t){var e,i,n,o;null==this.m_moveRow&&(o=t.target,n=this._getKey(this.find(o,"row")),this.m_moveRow=this._findRowByKey(n),this.m_moveRowHeader=this._findHeaderByKey(n,this.m_rowHeader,this.getMappedStyle("rowheadercell")),this.m_moveRowEndHeader=this._findHeaderByKey(n,this.m_rowEndHeader,this.getMappedStyle("rowendheadercell")),null!=this.m_moveRow.style.height&&this.setElementHeight(this.m_moveRow,this.calculateRowHeight(this.m_moveRow)),this.m_utils.addCSSClassName(this.m_moveRow,this.getMappedStyle("drag")),this.m_originalTop=this.getElementDir(this.m_moveRow,"top"),this.m_dropTarget=document.createElement("div"),this.m_utils.addCSSClassName(this.m_dropTarget,this.getMappedStyle("drop")),this.setElementHeight(this.m_dropTarget,this.calculateRowHeight(this.m_moveRow)),this.setElementDir(this.m_dropTarget,this.m_originalTop,"top"),this.m_databody.firstChild.appendChild(this.m_dropTarget),this._addHeaderDropTarget(this.m_moveRowHeader,this.m_rowHeader,!1),this._addHeaderDropTarget(this.m_moveRowEndHeader,this.m_rowEndHeader,!0)),this.m_utils.isTouchDevice()||(this.m_prevY=this.m_currentY,this.m_currentY=t.pageY),e=this.m_currentY-this.m_prevY,i=this.calculateRowHeight(this.m_moveRow),this.setElementDir(this.m_moveRow,this.getElementDir(this.m_moveRow,"top")+e,"top"),null!==this.m_moveRowHeader&&this.setElementDir(this.m_moveRowHeader,this.getElementDir(this.m_moveRowHeader,"top")+e,"top"),null!==this.m_moveRowEndHeader&&this.setElementDir(this.m_moveRowEndHeader,this.getElementDir(this.m_moveRowEndHeader,"top")+e,"top"),null!=this.m_moveRow.nextSibling&&this.m_moveRow.nextSibling!=this.m_dropTarget&&this.getElementDir(this.m_moveRow.nextSibling,"top")<this.getElementDir(this.m_moveRow,"top")+i/2?this._moveDropRows("nextSibling"):null!=this.m_moveRow.previousSibling&&this.getElementDir(this.m_moveRow.previousSibling,"top")>this.getElementDir(this.m_moveRow,"top")-i/2&&this._moveDropRows("previousSibling")},i.prototype._addHeaderDropTarget=function(t,e,i){var n;null!==t&&(null==t.style.height&&this.setElementHeight(t,this.calculateRowHeight(t)),this.m_utils.addCSSClassName(t,this.getMappedStyle("drag")),n=document.createElement("div"),this.m_utils.addCSSClassName(n,this.getMappedStyle("drop")),this.setElementHeight(n,this.calculateRowHeight(t)),this.setElementDir(n,this.m_originalTop,"top"),e.firstChild.appendChild(n),i?this.m_dropTargetEndHeader=n:this.m_dropTargetHeader=n)},i.prototype._moveDropRows=function(t){var e,i,n,o,r;i=this.m_moveRow.parentNode,"nextSibling"==t?(e=this.m_originalTop+this.calculateRowHeight(this.m_moveRow[t]),n=this.m_originalTop):(e=this.getElementDir(this.m_moveRow[t],"top"),n=e+this.calculateRowHeight(this.m_moveRow)),this.setElementDir(this.m_dropTarget,e,"top"),this.setElementDir(this.m_moveRow[t],n,"top"),null!==this.m_moveRowHeader&&(o=this.m_moveRowHeader.parentNode,this.setElementDir(this.m_dropTargetHeader,e,"top"),this.setElementDir(this.m_moveRowHeader[t],n,"top")),null!==this.m_moveRowEndHeader&&(r=this.m_moveRowEndHeader.parentNode,this.setElementDir(this.m_dropTargetEndHeader,e,"top"),this.setElementDir(this.m_moveRowEndHeader[t],n,"top")),this.m_originalTop=e,this.m_utils.removeCSSClassName(this.m_moveRow.previousSibling,this.getMappedStyle("activedrop")),"nextSibling"===t?(i.insertBefore(this.m_moveRow,this.m_moveRow[t][t]),null!==this.m_moveRowHeader&&o.insertBefore(this.m_moveRowHeader,this.m_moveRowHeader[t][t]),null!==this.m_moveRowEndHeader&&r.insertBefore(this.m_moveRowEndHeader,this.m_moveRowEndHeader[t][t])):(i.insertBefore(this.m_moveRow,this.m_moveRow[t]),null!==this.m_moveRowHeader&&o.insertBefore(this.m_moveRowHeader,this.m_moveRowHeader[t]),null!==this.m_moveRowEndHeader&&r.insertBefore(this.m_moveRowEndHeader,this.m_moveRowEndHeader[t])),this.m_utils.addCSSClassName(this.m_moveRow.previousSibling,this.getMappedStyle("activedrop"))},i.prototype._isMoveEnabled=function(t){var e,i;return e=this.getDataSource().getCapability("move"),i=this.m_options.isMoveable("row"),"enable"===i&&("full"===e||e===t)},i.prototype._handleMoveMouseUp=function(t,e){null!=this.m_moveRow&&(this._remove(this.m_dropTarget),this.m_moveRow.style.zIndex="",null!==this.m_moveRowHeader&&(this._remove(this.m_dropTargetHeader),this.m_moveRowHeader.style.zIndex=""),null!==this.m_moveRowEndHeader&&(this._remove(this.m_dropTargetEndHeader),this.m_moveRowEndHeader.style.zIndex=""),null!=this.m_active&&"column"!=this.m_active.axis&&(this.m_moveActive=!0),this._isSelectionEnabled()&&this._clearSelection(t),1==e?this.getDataSource().move(this._getKey(this.m_moveRow),null===this.m_moveRow.nextSibling?null:this._getKey(this.m_moveRow.nextSibling)):this.getDataSource().move(this._getKey(this.m_moveRow),this._getKey(this.m_moveRow)),this.m_moveRow=null),this.m_databodyMove=!1},i.prototype._isMoveOnRowEnabled=function(t){return null!=t&&!this.m_utils.containsCSSClassName(t.parentNode,this.getMappedStyle("colheader"))&&!(!this._isMoveEnabled("row")||this._getActiveRowKey()!==this._getKey(t))},i.prototype._manageMoveCursor=function(){var t,e,i,n,o,r,s,a,l,h;t=this.getMappedStyle("draggable"),e=this._getActiveRowKey(),i=this._getActiveRowKey(!0),n=this._findRowByKey(e),o=this._findRowByKey(i),l=this.getMappedStyle("rowheadercell"),h=this.getMappedStyle("rowendheadercell"),this.m_utils.containsCSSClassName(o,t)&&(this.m_utils.removeCSSClassName(o,t),s=this._findHeaderByKey(i,this.m_rowHeader,l),this.m_utils.containsCSSClassName(s,t)&&this.m_utils.removeCSSClassName(s,t),s=this._findHeaderByKey(i,this.m_rowEndHeader,h),this.m_utils.containsCSSClassName(s,t)&&this.m_utils.removeCSSClassName(s,t)),this._isMoveOnRowEnabled(n)&&(r=this._findHeaderByKey(e,this.m_rowHeader,l),a=this._findHeaderByKey(e,this.m_rowEndHeader,h),this.m_utils.addCSSClassName(n,t),this.m_utils.addCSSClassName(r,t),this.m_utils.addCSSClassName(a,t))},i.prototype.handleRootFocus=function(t){var e,i;this.m_utils.addCSSClassName(this.m_root,this.getMappedStyle("focus")),(!this.m_root.contains(document.activeElement)||document.activeElement===this.m_root&&0==this.m_root.tabIndex||document.activeElement===this.m_databody&&this.m_scrollbarFocus&&0==this.m_root.tabIndex)&&(this.m_externalFocus=!0,this._isCellEditable()?this._setAccInfoText("accessibleEditableMode"):this._isGridEditable()&&this._setAccInfoText("accessibleNavigationMode"),null!=this.m_active||this._databodyEmpty()?null!=this.m_active&&this._highlightActive():(e=this.createIndex(0,0),1==this.m_scrollbarFocus?(this.m_shouldFocus=!1,this.m_scrollbarFocus=!1):this.scrollToIndex(e),i=this.GetSelection(),!this._isSelectionEnabled()||null!=i&&0!=i.length?this._setActiveByIndex(e):this.selectAndFocus(e,t))),this.m_root.tabIndex=-1},i.prototype.handleRootBlur=function(t){var e;setTimeout(function(){this.m_root.contains(document.activeElement)||(this.m_root.tabIndex=0,e=this._getActiveElement(),null!=e&&this._unsetAriaProperties(e))}.bind(this),100),null==this.m_moveRow&&this.m_utils.removeCSSClassName(this.m_root,this.getMappedStyle("focus"))},i.prototype.calculateRowHeight=function(t){return""!=t.style.height?this.getElementHeight(t):null!=t.nextSibling?this.getElementDir(t.nextSibling,"top")-this.getElementDir(t,"top"):this.m_endRowPixel-this.getElementDir(t,"top")},i.prototype.calculateRowHeaderHeight=function(t){return""!=t.style.height?this.getElementHeight(t):null!=t.nextSibling?this.getElementDir(t.nextSibling,"top")-this.getElementDir(t,"top"):this.m_endRowHeaderPixel-this.getElementDir(t,"top")},i.prototype.calculateColumnWidth=function(t){if(""!=t.style.width)return this.getElementWidth(t);var e=this.getResources().isRTLMode()?"right":"left";return null!=t.nextSibling?this.getElementDir(t.nextSibling,e)-this.getElementDir(t,e):this.m_endColPixel-this.getElementDir(t,e)},i.prototype.calculateColumnHeaderWidth=function(t){if(""!=t.style.width)return this.getElementWidth(t);var e=this.getResources().isRTLMode()?"right":"left";return null!=t.nextSibling?this.getElementDir(t.nextSibling,e)-this.getElementDir(t,e):this.m_endColHeaderPixel-this.getElementDir(t,e)},i.prototype._databodyEmpty=function(){return null==this.m_databody.firstChild||null==this.m_databody.firstChild.firstChild},i.prototype.changeStyleProperty=function(t,e,i,n){"undefined"!=typeof e&&(t.style[e]="remove"==n?"":i)},i.prototype.addTransformMoveStyle=function(t,e,i,n,o,r,s){this.changeStyleProperty(t,this.getCssSupport("transition-delay"),i),this.changeStyleProperty(t,this.getCssSupport("transition-timing-function"),n),this.changeStyleProperty(t,this.getCssSupport("transition-duration"),e),this.changeStyleProperty(t,this.getCssSupport("transform"),"translate3d("+o+"px,"+r+"px,"+s+"px)")},i.prototype.removeTransformMoveStyle=function(t){this.changeStyleProperty(t,this.getCssSupport("transition-delay"),null,"remove"),this.changeStyleProperty(t,this.getCssSupport("transition-timing-function"),null,"remove"),this.changeStyleProperty(t,this.getCssSupport("transition-duration"),null,"remove"),this.changeStyleProperty(t,this.getCssSupport("transform"),null,"remove")},i.prototype.getCssSupport=function(t){function e(t){return t.replace(/\-([a-z])/gi,function(t,e){return e.toUpperCase()})}var i,n,o,r;for(i=["","-moz-","-webkit-","-o-","-ms-","-khtml-"],n=document.documentElement,o=0;o<i.length;o++)if(r=e(i[o]+t),"Ms"==r.substr(0,2)&&(r="m"+r.substr(1)),r in n.style)return r},i.prototype._isContainFocusableElement=function(t){var e=this.getFocusableElementsInNode(t);return e.length>0},i.prototype.unhighlightSelection=function(){var t,e;for(e=this.GetSelection(),t=0;t<e.length;t+=1)this.unhighlightRange(e[t])},i.prototype.unhighlightRange=function(t){var e=this.getElementsInRange(t);this.unhighlightElems(e)},i.prototype.highlightRange=function(t,e){var i,n;i=this.getElementsInRange(t),this.highlightElems(i),e&&(n=1==this.GetSelection().length?i.length:this._getCurrentSelectionCellCount(),this._setAccInfoText("accessibleMultiCellSelected",{num:n}))},i.prototype._getCurrentSelectionCellCount=function(){var t,e,i,n;for(t=0,e=this.GetSelection(),n=0;n<e.length;n++)i=this.getElementsInRange(e[n]),null!=i&&(t+=i.length);return t},i.prototype.unhighlightElems=function(t){var e,i;if(null!=t&&0!=t.length)for(e=0;e<t.length;e+=1)i=t[e],this._unhighlightElement(i,["selected","topSelected","bottomSelected"])},i.prototype.highlightElems=function(t){var e,i,n,o,r,s,a;if(null!=t&&0!=t.length)for(i=t[0],n=this.m_utils.containsCSSClassName(i,this.getMappedStyle("cell")),o=this.getRowIndex(n?i.parentNode:i),i=t[t.length-1],n=this.m_utils.containsCSSClassName(i,this.getMappedStyle("cell")),r=this.getRowIndex(n?i.parentNode:i),e=0;e<t.length;e+=1)s=["selected"],i=t[e],a=this.getRowIndex(n?i.parentNode:i),a===o&&s.push("topSelected"),a===r&&s.push("bottomSelected"),this._highlightElement(i,s)},i.prototype.applySelection=function(t,e,i,n){var o,r,s;for(r=this.GetSelection(),o=0;o<r.length;o+=1)s=this.getElementsInRange(r[o],t,e,i,n),this.highlightElems(s)},i.prototype.handleDatabodySelectionDrag=function(t){var e,i,n;this.m_utils.isTouchDevice()?i=this.findCell(document.elementFromPoint(t.touches[0].clientX,t.touches[0].clientY)):(n=t.target,i=this.findCell(n)),null!=i&&(e={row:this.getRowIndex(i.parentNode),column:this.getCellIndex(i)},this.extendSelection(e,t))},i.prototype._isSelected=function(t){var e=this.getMappedStyle("selected");return"row"==this.m_options.getSelectionMode()&&null!=e?this.m_utils.containsCSSClassName(this.findRow(t),e):null!=e&&this.m_utils.containsCSSClassName(t,e)},i.prototype._deselect=function(t){var e,i,n,o,r,s,a,l,h,u,d,c;for("row"==this.m_options.getSelectionMode()&&(t=this.createIndex(t.row)),e=t.row,i=t.column,n=-1,o=this.GetSelection(),r=0;r<o.length;r+=1)if(s=o[r],a=s.startIndex,l=this.getEndIndex(s),h=a.row,u=l.row,h==e&&u==e){if(isNaN(a.column)||isNaN(l.column)){if(!isNaN(i))continue;n=r;break}if(d=a.column,c=l.column,d==i&&c==i){n=r;break}}n!=-1&&(this.unhighlightRange(o[n]),o.splice(n,1))},i.prototype.handleDatabodyClickSelection=function(t){var e,i,n,o,r;if(r=t.target,i=this.findCell(r),null!=i&&(e={row:this.getRowIndex(i.parentNode),column:this.getCellIndex(i)}),null!=e&&void 0!=e){if(this.isMultipleSelection()&&2===t.button&&this._isContainSelection(e))return;n=this.m_utils.ctrlEquivalent(t),o=t.shiftKey,this.isMultipleSelection()?this.m_utils.isTouchDevice()?(this._removeTouchSelectionAffordance(),null!=this.m_active&&this._unhighlightActive(),this.selectAndFocus(e,t,!1)):n||o?!n&&o?this.extendSelection(e,t):this.selectAndFocus(e,t,!0):this.selectAndFocus(e,t,!1):this.selectAndFocus(e,t,!1)}},i.prototype._isContainSelection=function(t,e){var i,n,o,r,s,a,l,h;for(null==e&&(e=this.GetSelection()),h=0;h<e.length;h+=1)if(i=e[h],n=i.startIndex,o=this.getEndIndex(i),r=n.row,s=o.row,!(t.row<r||s!=-1&&t.row>s)){if(isNaN(n.column)||isNaN(o.column))return!0;if(a=n.column,l=o.column,!(t.column<a||l!=-1&&t.column>l))return!0}return!1},i.prototype._compareSelections=function(t,e){var i,n,o;if(t.length!==e.length)return!1;for(i=0;i<t.length;i+=1){for(o=!1,n=0;n<e.length;n+=1)t[i].startIndex.row===e[n].startIndex.row&&t[i].startIndex.column===e[n].startIndex.column&&t[i].endIndex.row===e[n].endIndex.row&&t[i].endIndex.column===e[n].endIndex.column&&(o=!0);if(o===!1)return!1}return!0},i.prototype.findRow=function(t){return this.find(t,"row")},i.prototype._clearSelection=function(t){var e;this.unhighlightSelection(),this._removeTouchSelectionAffordance(),e=this.GetSelection(),this.m_selection=[],this._compareSelectionAndFire(t,e)},i.prototype.setDiscontiguousSelectionMode=function(t){this.m_discontiguousSelection=t,this._setAccInfoText(t?"accessibleRangeSelectModeOn":"accessibleRangeSelectModeOff")},i.prototype._selectEntireRow=function(t,e,i){var n,o;n=this.createIndex(t,0),o=this.createIndex(e,-1),this._selectRange(n,o,i)},i.prototype._selectEntireColumn=function(t,e,i){var n,o;n=this.createIndex(0,t),o=this.createIndex(-1,e),this._selectRange(n,o,i)};i.prototype._selectRange=function(t,e,i){this.unhighlightSelection(),this._createRangeWithKeys(t,e,this._selectRangeCallback.bind(this,i))};i.prototype._selectRangeCallback=function(t,e){var i,n;n=this.GetSelection(),i=[],i.push(e),this.m_selection=i,this.highlightRange(e),this._isDatabodyCellActive()&&(this.m_selectionFrontier=this.m_active.indexes,this._highlightActive()),this._compareSelectionAndFire(t,n)},i.prototype.GetSelection=function(){return null==this.m_selection&&(this.m_selection=[]),this.m_selection},i.prototype.SetSelection=function(t){var e;void 0!=t&&(null==t&&(t=[]),this.unhighlightSelection(),e=this.GetSelection(),this.m_selection=t,null!=this.m_databody&&this.applySelection(this.m_startRow,this.m_endRow,this.m_startCol,this.m_endCol))},i.prototype.fireSelectionEvent=function(t,e){var i={event:t,ui:{selection:this.GetSelection(),previousSelection:e}};this.fireEvent("select",i)},i.prototype.extendSelection=function(t,e){var i;i=this.m_utils.isTouchDevice()?this.m_touchSelectAnchor:this.m_active.indexes,null!=i&&(this._resetSelectionFrontierFocus(),this.m_selectionFrontier=t,"row"==this.m_options.getSelectionMode()&&(t=this.createIndex(t.row)),this._createRangeWithKeys(i,t,this._extendSelectionCallback.bind(this,e,i)))},i.prototype._getLastAnchoredSelectionIndex=function(t,e){var i,n,o,r,s,a,l;for(i=0;i<t.length;i+=1)if(n=t[i].startIndex.row,o=t[i].endIndex.row,r=t[i].startIndex.column,s=t[i].endIndex.column,a=e.row,l=e.column,!(n!==a&&o!=a||"row"!=this.m_options.getSelectionMode()&&r!==l&&s!=l))return i;return i-1},i.prototype._extendSelectionCallback=function(t,e,i){var n,o,r,s,a,l;o=this.GetSelection(),l=this._getLastAnchoredSelectionIndex(o,e),r=o[l],null!=r&&(s=r.startIndex.row==i.startIndex.row,null!=r.startIndex.column&&null!=i.startIndex.column&&(s=s&&r.startIndex.column==i.startIndex.column),a=r.endIndex.row==i.endIndex.row,null!=r.endIndex.column&&null!=i.endIndex.column&&(a=a&&r.endIndex.column==i.endIndex.column),s&&a||(n=o.slice(0),n.splice(l,1),n.push(i),this.m_selection=n,this.unhighlightRange(r),this.highlightRange(i,!0),this._makeSelectionFrontierFocus(),this._compareSelectionAndFire(t,o),this.m_discontiguousSelection&&!this.m_utils.isTouchDevice()&&this.setDiscontiguousSelectionMode(!1)))},i.prototype._resetSelectionFrontierFocus=function(){var t,e;null==this.m_selectionFrontier||this._isDatabodyCellActive()&&this.m_selectionFrontier.row==this.m_active.indexes.row&&this.m_selectionFrontier.column==this.m_active.indexes.column||(t=this.createRange(this.m_selectionFrontier),e=this.getElementsInRange(t),null!=e&&e.length>0&&this._unsetAriaProperties(e[0]))},i.prototype._makeSelectionFrontierFocus=function(){var t,e,i;null==this.m_selectionFrontier||this._isDatabodyCellActive()&&this.m_selectionFrontier.row==this.m_active.indexes.row&&this.m_selectionFrontier.column==this.m_active.indexes.column||(this._isDatabodyCellActive()&&(t=this.createRange(this.m_active.indexes),i=this.getElementsInRange(t),null!=i&&i.length>0&&this._unsetAriaProperties(i[0])),t=this.createRange(this.m_selectionFrontier),e=this.getElementsInRange(t),null!=e&&0!=e.length&&(this._updateContextInfo(this.m_selectionFrontier),i=this.m_utils.containsCSSClassName(e[0],this.getMappedStyle("row"))?e[0].firstChild:e[0],this._setAriaProperties(this._createActiveObject(i),null,i)))},i.prototype.selectAndFocus=function(t,e,i){null==i&&(i=!1),this._resetSelectionFrontierFocus(),this._setActiveByIndex(t,e),"row"==this.m_options.getSelectionMode()&&(t=this.createIndex(t.row)),this._createRangeWithKeys(t,t,this._selectAndFocusRangeCallback.bind(this,t,e,i))},i.prototype._selectAndFocusRangeCallback=function(t,e,i,n){var o,r;r=this.GetSelection(),o=r.slice(0),i||(this.m_discontiguousSelection?this._isDatabodyCellActive()&&null!=this.m_prevActive&&"cell"==this.m_prevActive.type&&this.m_selectionFrontier.row==this.m_prevActive.indexes.row&&this.m_selectionFrontier.column==this.m_prevActive.indexes.column&&!this.m_utils.isTouchDevice()&&(o.pop(),this._isContainSelection(this.m_prevActive.indexes,o)||this._unhighlightElement(this._getCellByIndex(this.m_prevActive.indexes),["selected","topSelected","bottomSelected"])):(this.unhighlightSelection(),o=[])),this.m_selectionFrontier=t,o.push(n),this.m_selection=o,this._highlightElement(this._getCellByIndex(t),["selected","topSelected","bottomSelected"]),this._compareSelectionAndFire(e,r)},i.prototype._compareSelectionAndFire=function(t,e){var i=this.GetSelection();this.m_utils.isTouchDevice()&&this.isMultipleSelection()&&i.length>0&&(this._addTouchSelectionAffordance(t),this._moveTouchSelectionAffordance()),this._compareSelections(i,e)||this.fireSelectionEvent(t,e)},i.prototype._addTouchSelectionAffordance=function(t){var e,i,n,o,r,s,a,l,h;null==this.m_topSelectIconContainer&&null==this.m_bottomSelectIconContainer&&(l=this.getResources().isRTLMode()?"right":"left",i=this._getTouchSelectionAffordanceSize(),this.m_topSelectIconContainer=document.createElement("div"),this.m_topSelectIconContainer.className=this.getMappedStyle("toucharea"),this.setElementDir(this.m_topSelectIconContainer,-i/2,"top"),n=document.createElement("div"),n.className=this.getMappedStyle("selectaffordancetop"),n.setAttribute("role","button"),
n.setAttribute("aria-label",this.getResources().getTranslatedText("accessibleSelectionAffordanceTop")),this.m_topSelectIconContainer.appendChild(n),this.m_bottomSelectIconContainer=document.createElement("div"),this.m_bottomSelectIconContainer.className=this.getMappedStyle("toucharea"),this.setElementDir(this.m_bottomSelectIconContainer,-1*i/2,"bottom"),o=document.createElement("div"),o.className=this.getMappedStyle("selectaffordancebottom"),o.setAttribute("role","button"),o.setAttribute("aria-label",this.getResources().getTranslatedText("accessibleSelectionAffordanceBottom")),this.m_bottomSelectIconContainer.appendChild(o),s=this.m_options.getSelectionMode(),"row"===s?(a=this.getElementWidth(this.m_databody)/2+this.m_currentScrollLeft-i/2,this.setElementDir(this.m_topSelectIconContainer,a,l),this.setElementDir(this.m_bottomSelectIconContainer,a,l)):(h=t.target,e=this.findCell(h),a=this.getElementDir(e,l)-i/2,this.setElementDir(this.m_topSelectIconContainer,a,l),this.setElementDir(this.m_bottomSelectIconContainer,a+this.calculateColumnWidth(e),l)),r=this.getElementsInRange(this.createRange(this.m_active.indexes))[0].parentNode,r.appendChild(this.m_topSelectIconContainer),r.appendChild(this.m_bottomSelectIconContainer))},i.prototype._removeTouchSelectionAffordance=function(){this._isDatabodyCellActive()&&this.m_topSelectIconContainer&&this.m_topSelectIconContainer.parentNode&&(this.m_topSelectIconContainer.parentNode.removeChild(this.m_topSelectIconContainer),this.m_bottomSelectIconContainer.parentNode.removeChild(this.m_bottomSelectIconContainer))},i.prototype._moveTouchSelectionAffordance=function(){var t,e,i,n,o,r,s,a;t=this.GetSelection(),t.length>0&&(n=this.m_options.getSelectionMode(),e=this._findRowByKey(t[t.length-1].startKey.row),i=this._findRowByKey(t[t.length-1].endKey.row),null!=this.m_topSelectIconContainer&&null!=this.m_bottomSelectIconContainer&&("row"===n?(e.appendChild(this.m_topSelectIconContainer),i.appendChild(this.m_bottomSelectIconContainer)):(a=this.getResources().isRTLMode()?"right":"left",s=this.getElementsInRange(t[t.length-1]),o=s[0],r=s[s.length-1],e.appendChild(this.m_topSelectIconContainer),i.appendChild(this.m_bottomSelectIconContainer),this.setElementDir(this.m_topSelectIconContainer,this.getElementDir(o,a)-this._getTouchSelectionAffordanceSize()/2,a),this.setElementDir(this.m_bottomSelectIconContainer,this.getElementDir(r,a)+this.calculateColumnWidth(r)-this._getTouchSelectionAffordanceSize()/2,a))))},i.prototype._scrollTouchSelectionAffordance=function(){var t,e,i;t=this.m_options.getSelectionMode(),"row"===t&&null!=this.m_topSelectIconContainer&&(i=this.getResources().isRTLMode()?"right":"left",e=this.getElementWidth(this.m_databody)/2+this.m_currentScrollLeft,this.setElementDir(this.m_topSelectIconContainer,e,i),this.setElementDir(this.m_bottomSelectIconContainer,e,i))},i.prototype._getTouchSelectionAffordanceSize=function(){var t,e;return null==this.m_touchSelectionAffordanceSize&&(t=document.createElement("div"),t.className=this.getMappedStyle("toucharea"),t.style.visibilty="hidden",t.style.top="0px",t.style.visibilty="0px",this.m_root.appendChild(t),e=t.offsetWidth,this.m_root.removeChild(t),this.m_touchSelectionAffordanceSize=e),this.m_touchSelectionAffordanceSize},i.SORT_ANIMATION_DURATION=800,i.prototype._handleSortMouseOver=function(t){var e,i;this._databodyEmpty()||(e=t.target,i=this.findHeader(e),i&&this._showOrHideSortIcon(i,!1),(this.m_utils.containsCSSClassName(e,this.getMappedStyle("sortascending"))||this.m_utils.containsCSSClassName(e,this.getMappedStyle("sortdescending")))&&this.m_utils.addCSSClassName(e,this.getMappedStyle("hover")))},i.prototype._handleSortMouseOut=function(t){var e,i,n;this._databodyEmpty()||(i=t.target,n=t.relatedTarget,e=this.findHeader(i),null!=e&&null!=n&&e===this.findHeader(n)||this._showOrHideSortIcon(e,!0),(this.m_utils.containsCSSClassName(i,this.getMappedStyle("sortascending"))||this.m_utils.containsCSSClassName(i,this.getMappedStyle("sortdescending")))&&(this.m_utils.removeCSSClassName(i,this.getMappedStyle("hover")),this.m_utils.removeCSSClassName(i,this.getMappedStyle("selected"))))},i.prototype._handleSortIconMouseDown=function(t){this._databodyEmpty()||this.m_utils.addCSSClassName(t,this.getMappedStyle("selected"))},i.prototype._toggleSortIconDirection=function(t,e){var i;null!=t&&(i=this._getSortIcon(t),"descending"===e&&this.m_utils.containsCSSClassName(i,this.getMappedStyle("sortascending"))?(this.m_utils.removeCSSClassName(i,this.getMappedStyle("sortascending")),this.m_utils.addCSSClassName(i,this.getMappedStyle("sortdescending"))):"ascending"===e&&this.m_utils.containsCSSClassName(i,this.getMappedStyle("sortdescending"))&&(this.m_utils.removeCSSClassName(i,this.getMappedStyle("sortdescending")),this.m_utils.addCSSClassName(i,this.getMappedStyle("sortascending"))))},i.prototype._showOrHideSortIcon=function(t,e){var i,n=!1;null!=t&&(i=this._getSortIcon(t),null!=this.m_sortInfo&&(n=this.m_sortInfo.key===this._getKey(t)),e!==!1||n?e!==!0||n||(this.m_utils.removeCSSClassName(i,this.getMappedStyle("default")),this.m_utils.addCSSClassName(i,this.getMappedStyle("disabled"))):(this.m_utils.removeCSSClassName(i,this.getMappedStyle("disabled")),this.m_utils.addCSSClassName(i,this.getMappedStyle("default"))))},i.prototype._buildSortIcon=function(t){var e,i,n,o,r;return r=document.createElement("div"),r.className=this.getMappedStyle("sortcontainer"),e=document.createElement("div"),i=this.getMappedStyle("icon")+" "+this.getMappedStyle("clickableicon"),n=null!=this.m_sortInfo?this.m_sortInfo.key:null,t.key===n?(o=null!=this.m_sortInfo?this.m_sortInfo.direction:null,"ascending"===o?e.className=this.getMappedStyle("sortascending")+" "+i+" "+this.getMappedStyle("default"):"descending"===o&&(e.className=this.getMappedStyle("sortdescending")+" "+i+" "+this.getMappedStyle("default"))):(i+=" "+this.getMappedStyle("disabled"),e.className=this.getMappedStyle("sortascending")+" "+i),r.appendChild(e),r},i.prototype._handleKeyboardSort=function(t,e){if(!this._databodyEmpty()){var i=t.getAttribute(this.getResources().getMappedAttribute("sortDir"));i=null==i||"descending"===i?"ascending":"descending",this._doHeaderSort(e,t,i)}},i.prototype._handleHeaderSort=function(t,e){var i,n;this._databodyEmpty()||(i=t.target,n=this.findHeader(i),null!=n&&(null==e&&(e=null!=this.m_sortInfo&&this.m_sortInfo.key===this._getKey(n)&&"ascending"===this.m_sortInfo.direction?"descending":"ascending"),this._doHeaderSort(t,n,e)))},i.prototype._handleCellSort=function(t,e,i){var n;n=t.target,null==i||this._databodyEmpty()||this._doHeaderSort(t,i,e)},i.prototype._doHeaderSort=function(t,e,i){var n,o,r;1!=this.m_isSorting?(this.m_delayedSort=null,n=this._getKey(e),o=this._getAxis(e),this._removeSortSelection(),e.setAttribute(this.getResources().getMappedAttribute("sortDir"),i),this.m_sortInfo={event:t,key:n,axis:o,direction:i},this._toggleSortIconDirection(e,i),this._addSortSelection(),null!=i&&null!=n&&null!=o&&(this.m_isSorting=!0,this.showStatusText(),r={axis:o,key:n,direction:i},this.getDataSource().sort(r,{success:this._handleSortSuccess.bind(this),error:this._handleSortError.bind(this)})),this._setAccInfoText("ascending"===i?"accessibleSortAscending":"accessibleSortDescending",{id:n})):this.m_delayedSort={event:t,header:e,direction:i}},i.prototype._handleSortError=function(){this.hideStatusText()},i.prototype._removeSortSelection=function(){var t,e;null!=this.m_sortInfo&&(t=this._findHeaderByKey(this.m_sortInfo.key,this.m_colHeader,this.getMappedStyle("colheadercell")),t.removeAttribute(this.getResources().getMappedAttribute("sortDir")),e=this._getSortIcon(t),this._toggleSortIconDirection(t,"ascending"),"descending"===this.m_sortInfo.direction&&(this.m_utils.removeCSSClassName(e,this.getMappedStyle("sortdescending")),this.m_utils.addCSSClassName(e,this.getMappedStyle("sortascending"))),this.m_utils.addCSSClassName(e,this.getMappedStyle("disabled")),this.m_utils.removeCSSClassName(e,this.getMappedStyle("default")),this.m_utils.removeCSSClassName(this._getSortContainer(t),this.getMappedStyle("enabled")))},i.prototype._addSortSelection=function(){var t,e;null!=this.m_sortInfo&&(t=this._findHeaderByKey(this.m_sortInfo.key,this.m_colHeader,this.getMappedStyle("colheadercell")),e=this._getSortIcon(t),this.m_utils.addCSSClassName(e,this.getMappedStyle("default")),this.m_utils.removeCSSClassName(e,this.getMappedStyle("disabled")),this.m_utils.removeCSSClassName(e,this.getMappedStyle("selected")),this.m_utils.addCSSClassName(this._getSortContainer(t),this.getMappedStyle("enabled")))},i.prototype._getAxis=function(t){var e,i;return e=this.getMappedStyle("colheadercell"),i=this.getMappedStyle("rowheadercell"),this.m_utils.containsCSSClassName(t,e)?"column":this.m_utils.containsCSSClassName(t,i)?"row":null},i.prototype._handleSortSuccess=function(){this.hideStatusText(),this._isDatabodyCellActive()?this._indexes({row:this.m_active.keys.row,column:this.m_active.keys.column},this._handlePreSortScrolling):this._fetchForSort(this.m_startRow,this.m_endRow-this.m_startRow+1,!1)},i.prototype._handlePreSortScrolling=function(t){var e,i,n,o,r,s,a,l;e=t.row===-1?0:t.row,n=e*this.m_avgRowHeight,o=n+this.m_avgRowHeight,a=this._isHighWatermarkScrolling(),s=this._isInViewport(t)!=-1,l=this.m_currentScrollTop<=n&&o<=this.m_currentScrollTop+this.getElementHeight(this.m_databody),l||a?this._fetchForSort(this.m_startRow,this.m_endRow-this.m_startRow+1,!1):(this.m_currentScrollTop=Math.min(n,this._getMaxScrollHeight()),i=Math.floor(this.m_currentScrollTop/this.m_avgRowHeight),r=i*this.m_avgRowHeight,this.m_startRow=i,this.m_endRow=-1,this.m_startRowHeader=i,this.m_endRowHeader=-1,this.m_startRowPixel=r,this.m_endRowPixel=r,this.m_startRowHeaderPixel=r,this.m_endRowHeaderPixel=r,this._fetchForSort(i,null,!0))},i.prototype._fetchForSort=function(t,e,i){var n=document.createDocumentFragment(),o=document.createDocumentFragment();this.fetchHeaders("row",t,n,o,e,{success:this.handleHeadersFetchSuccessForSort.bind(this),error:this.handleCellsFetchError}),this.fetchCells(this.m_databody,t,this.m_startCol,e,this.m_endCol-this.m_startCol+1,{success:this.handleCellsFetchSuccessForSort.bind(this,n,o,i),error:this.handleCellsFetchError})},i.prototype.handleHeadersFetchSuccessForSort=function(t,e,i,n){var o,r,s,a,l,h,u,d,c,p,_;if(o=e.axis,s=e.start,r=e.header,_=e.endHeader,this.m_fetching[o]=!1,null!=t){for(a=t.getCount(),u=0,l=0,c=this.getMappedStyle("row")+" "+this.getMappedStyle("headercell")+" "+this.getMappedStyle("rowheadercell"),p=this.m_options.getRenderer("row");a-l>0;)h=s+l,d=this.buildLevelHeaders(r,h,0,0,this.m_startRowPixel+u,!0,n,p,t,"row",c,this.m_rowHeaderLevelCount),l+=d.count,u+=d.totalHeaderDimension;this.m_endRowHeader=this.m_startRowHeader+a-1,this.m_endRowHeaderPixel=this.m_startRowHeaderPixel+u}if(null!=i){for(a=i.getCount(),u=0,l=0,c=this.getMappedStyle("row")+" "+this.getMappedStyle("endheadercell")+" "+this.getMappedStyle("rowendheadercell"),p=this.m_options.getRenderer("rowEnd");a-l>0;)h=s+l,d=this.buildLevelHeaders(_,h,0,0,this.m_startRowPixel+u,!0,n,p,i,"rowEnd",c,this.m_rowEndHeaderLevelCount),l+=d.count,u+=d.totalHeaderDimension;this.m_endRowEndHeader=this.m_startRowEndHeader+a-1,this.m_endRowEndHeaderPixel=this.m_startRowEndHeaderPixel+u}this._signalTaskEnd()},i.prototype.handleCellsFetchSuccessForSort=function(t,e,n,o,r){var s,a,l,h,u,d,c,p,_,g,m,f,y;this.m_fetching.cells=!1,m=i.SORT_ANIMATION_DURATION,this.isFetchComplete()&&this.hideStatusText(),s=r[0],a=s.start,l=o.getCount("row"),h=r[1],u=h.start,d=o.getCount("column"),c=document.createDocumentFragment(),f=this._addRows(c,!0,this.m_startRowPixel,a,l,u,!1,o),this.m_endRow=this.m_startRowHeader+l-1,this.m_endRowPixel=this.m_startRowPixel+f.totalRowHeight,p=this.m_databody.firstChild,_=this.m_rowHeader.firstChild,g=this.m_rowEndHeader.firstChild,1==n&&(y=this._isHighWatermarkScrolling(),this.m_utils.isTouchDevice()?(this._disableTouchScrollAnimation(),this.scrollTo(this.m_currentScrollLeft,this.m_currentScrollTop)):(this.m_silentScroll=!0,this.m_databody.scrollTop=this.m_currentScrollTop,this._syncScroller())),!m||0==m||!this.m_utils.supportsTransitions()||1===l||this.m_rowHeaderLevelCount>1&&null!=this.m_rowHeaderLevelCount||y===!1?(this._signalTaskStart(),this._handleSortEnd(c,t,e)):this.processSortAnimationToPosition(m,0,"ease-in",_,t,p,c,g,e),this._signalTaskEnd()},i.prototype._handleSortEnd=function(t,e,i){var n,o;e.childNodes.length>1&&(n=this.m_rowHeader.firstChild,this.m_utils.empty(n),n.appendChild(e)),i.childNodes.length>1&&(n=this.m_rowEndHeader.firstChild,this.m_utils.empty(n),n.appendChild(i)),o=this.m_databody.firstChild,this.m_utils.empty(o),o.appendChild(t),this._restoreActive(),this.m_isSorting=!1,this._fireSortEvent(),this._doDelayedSort(),this.m_animating=!1,this._signalTaskEnd(),this._runModelEventQueue()},i.prototype.processSortAnimationToPosition=function(t,e,i,n,o,r,s,a,l){var h,u,d,c,p,_,g,m,f,y,v,S,C,E,b,T,A,O,P,I;for(h=this,this._signalTaskStart(),_=[],g=[],I=[],y=o.childNodes.length>1,O=l.childNodes.length>1,b=this._getViewportTop(),T=this._getViewportBottom(),C=s.cloneNode(!0),E=o?o.cloneNode(!0):null,P=l?l.cloneNode(!0):null,d={},m=0;m<r.childNodes.length;m++)f=r.childNodes[m],u=this._getKey(f),c=this.getElementDir(f,"top"),v=c+this.getElementHeight(f),p=v<b||c>T?c:T,d[u]={oldTop:c,newTop:p};for(m=0;m<s.childNodes.length;m++)f=s.childNodes[m],u=this._getKey(f),p=this.getElementDir(f,"top"),this._setKey(C.childNodes[m],u),this._setKey(E.childNodes[m],u),this._setKey(P.childNodes[m],u),d.hasOwnProperty(u)?d[u].newTop=p:(c=T,S=p+this.getElementHeight(f),d[u]={oldTop:c,newTop:p},S>=b&&p<T&&(f=C.childNodes[m],this.setElementDir(f,d[u].oldTop,"top"),_.push(f),y&&(f=E.childNodes[m],this.setElementDir(f,d[u].oldTop,"top"),g.push(f)),O&&(f=P.childNodes[m],this.setElementDir(f,d[u].oldTop,"top"),I.push(f))));for(m=0;m<_.length;m++)r.appendChild(_[m]),y&&n.appendChild(g[m]),O&&a.appendChild(I[m]);for(m=r.childNodes.length-1;m>=0;m--)if(f=r.childNodes[m],u=this._getKey(f),d[u].newTop-d[u].oldTop!=0){A=f;break}null!=A?(A.addEventListener("transitionend",this._handleSortEnd.bind(this,s,o,l),!1),this.m_animating=!0,setTimeout(function(){var o,s,l,u;for(u=0;u<r.childNodes.length;u++)s=e*u+"ms",f=r.childNodes[u],l=d[h._getKey(f)],o=l.newTop-l.oldTop,0!=o&&(h.addTransformMoveStyle(f,t/2+"ms",s,i,0,o,0),y&&h.addTransformMoveStyle(n.childNodes[u],t/2+"ms",s,i,0,o,0),O&&h.addTransformMoveStyle(a.childNodes[u],t/2+"ms",s,i,0,o,0))},0)):this._handleSortEnd(s,o,l)},i.prototype._restoreActive=function(){var t,e,i,n,o,r;null!=this.m_active&&(n=this.m_active.axis,"cell"==this.m_active.type?(t=this._findRowByKey(this.m_active.keys.row),e=this._findHeaderByKey(this.m_active.keys.column,this.m_colHeader,this.getMappedStyle("colheadercell")),null!=t&&null!=e?(i=this.createIndex(this.getRowIndex(t),this.getHeaderCellIndex(e)),this.scrollToIndex(i),this._isSelectionEnabled()?this.selectAndFocus(i):this._setActiveByIndex(i)):(this._setActive(null,null,!0),this._isSelectionEnabled()&&this._clearSelection(this.m_sortInfo.event))):"row"!=n&&"rowEnd"!=n||(o="row"==n?this.m_rowHeader:this.m_rowEndHeader,r="row"==n?this.getMappedStyle("rowheadercell"):this.getMappedStyle("rowendheadercell"),t=this._findHeaderByKey(this.m_active.key,o,r),null!=t?this._setActive(t):this._setActive(null)))},i.prototype.getSortIconSize=function(){var t,e;return null==this.m_sortIconSize&&(t=document.createElement("div"),t.className=this.getMappedStyle("sortascending")+" "+this.getMappedStyle("icon")+" "+this.getMappedStyle("clickableicon"),t.style.visibilty="hidden",t.style.top="0px",t.style.visibilty="0px",this.m_root.appendChild(t),e=t.offsetWidth,this.m_root.removeChild(t),this.m_sortIconSize=e),this.m_sortIconSize},i.prototype._getSortIcon=function(t){return t.lastChild.firstChild},i.prototype._getSortContainer=function(t){return t.lastChild},i.prototype._fireSortEvent=function(){var t={event:this.m_sortInfo.event,ui:{header:this.m_sortInfo.key,direction:this.m_sortInfo.direction}};this.fireEvent("sort",t)},i.prototype._doDelayedSort=function(){null!=this.m_delayedSort?this._doHeaderSort(this.m_delayedSort.event,this.m_delayedSort.header,this.m_delayedSort.direction):this.fillViewport()},i.RESIZE_OFFSET=5,i.RESIZE_TOUCH_OFFSET=8,i.prototype.handleResize=function(t){var e;this.m_isResizing===!1?(e=this.find(t.target,"header"),null==e&&(e=this.find(t.target,"endheader")),null==e||e!=this.m_rowHeader&&e!=this.m_colHeader&&e!=this.m_rowEndHeader&&e!=this.m_colEndHeader||(this.m_cursor=this.manageHeaderCursor(t),null!=this.m_resizingElement&&("default"==this.m_cursor?(this.m_resizingElement.style.cursor="",null!=this.m_resizingElementSibling&&(this.m_resizingElementSibling.style.cursor="")):(this.m_resizingElement.style.cursor=this.m_cursor,null!=this.m_resizingElementSibling&&(this.m_resizingElementSibling.style.cursor=this.m_cursor))))):this.handleResizeMouseMove(t)},i.prototype.handleResizeMouseDown=function(t){return("col-resize"===this.m_cursor||"row-resize"===this.m_cursor)&&(this.m_isResizing=!0,this.m_utils.isTouchDevice()?(this.m_lastMouseX=t.touches[0].pageX,this.m_lastMouseY=t.touches[0].pageY):(document.addEventListener("mousemove",this.m_docMouseMoveListener,!1),document.addEventListener("mouseup",this.m_docMouseUpListener,!1),this.m_lastMouseX=t.pageX,this.m_lastMouseY=t.pageY),this.m_overResizeLeft=0,this.m_overResizeMinLeft=0,this.m_overResizeTop=0,this.m_overResizeMinTop=0,this.m_overResizeRight=0,this.m_overResizeBottom=0,this.m_orginalResizeDimensions={width:this.getElementWidth(this.m_resizingElement),height:this.getElementHeight(this.m_resizingElement)},!0)},i.prototype.handleResizeMouseUp=function(t){var e,i,n,o;this.m_isResizing===!0&&(o=this.getElementWidth(this.m_resizingElement),n=this.getElementHeight(this.m_resizingElement),o==this.m_orginalResizeDimensions.width&&n==this.m_orginalResizeDimensions.height||(e="col-resize"===this.m_cursor?this.m_resizingElement.style.width:this.m_resizingElement.style.height,i={event:t,ui:{header:this._getKey(this.m_resizingElement),oldDimensions:{width:this.m_orginalResizeDimensions.width,height:this.m_orginalResizeDimensions.height},newDimensions:{width:this.getElementWidth(this.m_resizingElement),height:this.getElementHeight(this.m_resizingElement)},size:e}},this.fireEvent("resize",i)),this.m_isResizing=!1,this.m_cursor="default",this.m_resizingElement.style.cursor="",null!=this.m_resizingElementSibling&&(this.m_resizingElementSibling.style.cursor=""),this.m_resizingElement=null,this.m_resizingElementMin=null,this.m_resizingElementSibling=null,this.m_orginalResizeDimensions=null,document.removeEventListener("mousemove",this.m_docMouseMoveListener,!1),document.removeEventListener("mouseup",this.m_docMouseUpListener,!1))},i.prototype._isDOMElementResizable=function(t){return null!=t&&"true"===t.getAttribute(this.getResources().getMappedAttribute("resizable"))},i.prototype.manageHeaderCursor=function(t){var e,n,o,r,s,a,l,h,u,d,c,p,_,g,m,f,y,v,S=t.target;if(S=this.find(t.target,"headercell"),S||(S=this.find(t.target,"endheadercell")),!S)return"default";if(e=this.getHeaderCellAxis(S),d=this.getHeaderCellIndex(S),c=this.getHeaderCellLevel(S),"column"===e?(l="enable"===this.m_options.isResizable(e,"height"),a=this._isDOMElementResizable(S),p=this._getHeaderByIndex(d-1,c,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader),h=this._isDOMElementResizable(p),_=this._getHeaderByIndex(d,c-1,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader)):"row"===e?(a="enable"===this.m_options.isResizable(e,"width"),l=this._isDOMElementResizable(S),p=this._getHeaderByIndex(d-1,c,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader),h=this._isDOMElementResizable(p),_=this._getHeaderByIndex(d,c-1,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader)):"columnEnd"===e?(l="enable"===this.m_options.isResizable(e).height,a=this._isDOMElementResizable(S),p=this._getHeaderByIndex(d-1,c,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader),h=this._isDOMElementResizable(p),_=this._getHeaderByIndex(d,c-1,this.m_colEndHeader,this.m_columnEndHeaderLevelCount,this.m_startColEndHeader)):"rowEnd"===e&&(a="enable"===this.m_options.isResizable(e).width,l=this._isDOMElementResizable(S),p=this._getHeaderByIndex(d-1,c,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader),h=this._isDOMElementResizable(p),_=this._getHeaderByIndex(d,c-1,this.m_rowEndHeader,this.m_rowEndHeaderLevelCount,this.m_startRowEndHeader)),this.m_utils.isTouchDevice()?(o=t.touches[0].pageX,r=t.touches[0].pageY,s=i.RESIZE_TOUCH_OFFSET):(o=t.pageX,r=t.pageY,s=i.RESIZE_OFFSET),n=this.getHeaderEdgePixels(S),u=this.getResources().isRTLMode(),v="columnEnd"===e||"rowEnd"===e,g=o<n[0]+s,f=r<n[1]+s,m=o>n[2]-s,y=r>n[3]-s,"column"===e||"columnEnd"===e){if(a&&(u?g:m))return this.m_resizingElement=S,"col-resize";if(h&&(u?m:g)){if(this.m_resizingElement=p,this.m_resizingElementSibling=S,null!==this.m_resizingElement)return"col-resize"}else if(l){if(!v&&y||v&&f)return this.m_resizingElement=S,"row-resize";if(!v&&f||v&&y)return this.m_resizingElement=_,this.m_resizingElementSibling=S,"row-resize"}}else if("row"===e||"rowEnd"===e){if(l&&y)return this.m_resizingElement=S,"row-resize";if(h&&f&&(this.m_resizingElement=p,this.m_resizingElementSibling=S,null!==this.m_resizingElement))return"row-resize";if(a){if(!v&&(u?g:m)||v&&(u?m:g))return this.m_resizingElement=S,"col-resize";if((!v&&(u?m:g)||v&&(u?g:m))&&(this.m_resizingElement=_,this.m_resizingElementSibling=S,null!==this.m_resizingElement))return"col-resize"}}return"default"},i.prototype.handleResizeMouseMove=function(t){var e,i,n,o,r,s;this.m_currentMouseX=t.pageX,this.m_currentMouseY=t.pageY,this.m_utils.isTouchDevice()?(this.m_currentMouseX=t.touches[0].pageX,this.m_currentMouseY=t.touches[0].pageY):(this.m_currentMouseX=t.pageX,this.m_currentMouseY=t.pageY),e=this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colheadercell"))||this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colendheadercell"))?"column":"row",s=this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("endheadercell")),"col-resize"===this.m_cursor?"column"===e?(i=this.calculateColumnHeaderWidth(this.m_resizingElement),n=this.getNewElementWidth("column",i,s),this.resizeColWidth(i,n)):"row"===e&&(i=this.getElementWidth(this.m_resizingElement),n=this.getNewElementWidth("row",i,s),this.resizeRowWidth(n,n-i,s)):"row-resize"===this.m_cursor&&("row"===e?(o=this.calculateRowHeaderHeight(this.m_resizingElement),r=this.getNewElementHeight("row",o,s),this.resizeRowHeight(o,r)):"column"===e&&(o=this.getElementHeight(this.m_resizingElement),r=this.getNewElementHeight("column",o,s),this.resizeColHeight(r,r-o,s))),this.buildCorners(),this.m_utils.isTouchDevice()&&this._moveTouchSelectionAffordance(),this.m_lastMouseX=this.m_currentMouseX,this.m_lastMouseY=this.m_currentMouseY},i.prototype.resizeColWidth=function(t,e){var i,n,o;i=e-t,0!=i&&(null!=this.m_databody.firstChild&&(n=this.getElementWidth(this.m_databody.firstChild),o=n+i,this.setElementWidth(this.m_databody.firstChild,o)),this.resizeColumnWidthAndShift(i),this.m_endColPixel+=i,this.m_endColHeaderPixel+=i,this.m_endColEndHeaderPixel+=i,this.m_avgColWidth=o/this.getDataSource().getCount("column"),this.manageResizeScrollbars())},i.prototype.resizeRowHeight=function(t,e){var i,n,o;i=e-t,0!=i&&(null!=this.m_databody.firstChild&&(n=this.getElementHeight(this.m_databody.firstChild),o=n+i,this.setElementHeight(this.m_databody.firstChild,o)),this.resizeRowHeightAndShift(i),this.m_endRowPixel+=i,this.m_endRowHeaderPixel+=i,this.m_endRowEndHeaderPixel+=i,this.m_avgRowHeight=o/this.getDataSource().getCount("row"),this.manageResizeScrollbars())},i.prototype.resizeColHeight=function(t,e,i){if(0!=e){var n=this.getHeaderCellLevel(this.m_resizingElement)+this.getHeaderCellDepth(this.m_resizingElement)-1;i?this.m_columnEndHeaderLevelHeights[n]+=e:this.m_columnHeaderLevelHeights[n]+=e,this.resizeColumnHeightsAndShift(e,n,i),i?(this.m_colEndHeaderHeight+=e,this.setElementHeight(this.m_colEndHeader,this.m_colEndHeaderHeight)):(this.m_colHeaderHeight+=e,this.setElementHeight(this.m_colHeader,this.m_colHeaderHeight)),this.manageResizeScrollbars()}},i.prototype.resizeRowWidth=function(t,e,i){var n;0!=e&&(n=this.getHeaderCellLevel(this.m_resizingElement)+this.getHeaderCellDepth(this.m_resizingElement)-1,i?this.m_rowEndHeaderLevelWidths[n]+=e:this.m_rowHeaderLevelWidths[n]+=e,this.resizeRowWidthsAndShift(e,n,i),i?(this.m_rowEndHeaderWidth+=e,this.setElementWidth(this.m_rowEndHeader,this.m_rowEndHeaderWidth)):(this.m_rowHeaderWidth+=e,this.setElementWidth(this.m_rowHeader,this.m_rowHeaderWidth)),this.manageResizeScrollbars())},i.prototype.getNewElementWidth=function(t,e,i){var n,o,r,s,a;return n=this._getMinValue("width",t),o=this.getElementWidth(this.m_databody),r=this.getResources().isRTLMode()?this.m_lastMouseX-this.m_currentMouseX:this.m_currentMouseX-this.m_lastMouseX,i&&"row"==t&&(r*=-1),s=e+r+this.m_overResizeLeft+this.m_overResizeMinLeft+this.m_overResizeRight,a=Math.round(this.getWidth()/2),s<n?(this.m_overResizeMinLeft+=r-n+e,s=n):(this.m_overResizeMinLeft=0,this.m_overResizeLeft=0),"row"===t&&(s>a?(this.m_overResizeRight+=r-a+e,s=a):this.m_overResizeRight=0),s},i.prototype.getNewElementHeight=function(t,e,i){var n,o,r,s,a;return o=this._getMinValue("height",t),n=this.getElementHeight(this.m_databody),r=this.m_currentMouseY-this.m_lastMouseY,i&&"column"==t&&(r*=-1),s=e+r+this.m_overResizeTop+this.m_overResizeMinTop+this.m_overResizeBottom,a=Math.round(this.getHeight()/2),s<o?(this.m_overResizeMinTop+=r-o+e,s=o):(this.m_overResizeMinTop=0,this.m_overResizeTop=0),"column"===t&&(s>a?(this.m_overResizeBottom+=r-a+e,s=a):this.m_overResizeBottom=0),s},i.prototype._getMinValue=function(t,e){var n,o,r,s,a,l,h,u,d,c;return r=this.m_resizingElement,o=this.getHeaderCellLevel(r),d=this.getHeaderCellDepth(r),c=this._getCellPaddingBorder(t,r),s=Math.max(this.m_utils.isTouchDevice()?2*i.RESIZE_TOUCH_OFFSET:2*i.RESIZE_OFFSET,c),"column"===e&&(1===this.m_columnHeaderLevelCount||"width"===t&&this.m_columnHeaderLevelCount===o+1||"height"===t&&1===d)||"row"===e&&(1===this.m_rowHeaderLevelCount||"height"===t&&this.m_rowHeaderLevelCount===o+1||"width"===t&&1===d)?s:(n=this.getHeaderCellIndex(r),a=this._getAttribute(this.m_resizingElement.parentNode,"extent",!0),l=this.getElementDir(r,t),"column"===e?"width"===t?(h=this._getHeaderByIndex(n+a-1,this.m_columnHeaderLevelCount-1,this.m_colHeader,this.m_columnHeaderLevelCount,this.m_startColHeader),u=this.getElementDir(h,t)):u=this._getColumnHeaderLevelHeight(o+d-1,r):"row"===e&&("height"===t?(h=this._getHeaderByIndex(n+a-1,this.m_rowHeaderLevelCount-1,this.m_rowHeader,this.m_rowHeaderLevelCount,this.m_startRowHeader),u=this.getElementDir(h,t)):u=this._getHeaderLevelDimension(o+d-1,r,this.m_rowHeaderLevelWidths,"width",1)),l-(u-s))},i.prototype._getCellPaddingBorder=function(t,e){var i,n,o,r;if(null==this.m_resizingElementMin){for(i=["top","right","bottom","left"],n="width"===t?1:0,o=0,r=window.getComputedStyle(e);n<4;n+=2)o+=parseFloat(r.getPropertyValue("padding-"+i[n])),o+=parseFloat(r.getPropertyValue("border-"+i[n]+"-width"));this.m_resizingElementMin=Math.round(o)}return this.m_resizingElementMin},i.prototype.manageResizeScrollbars=function(){var t,e,i,n,o,r,s,a,l,h,u,d,c,p,_,g,m,f,y,v,S,C,E,b,T,A,O,P,I,D,x=0,M=0;t=this.getWidth(),e=this.getHeight(),i=this.m_colHeader,S=this.m_colEndHeader,n=this.m_rowHeader,C=this.m_rowEndHeader,o=this.m_databody,O=o.firstChild,r=this.getColumnHeaderHeight(),T=this.getColumnEndHeaderHeight(),a=this.getRowHeaderWidth(),A=this.getRowEndHeaderWidth(),E=e-r-T,b=t-a-A,g=this.m_utils.getScrollbarSize(),m=this.getResources().isRTLMode()?"right":"left",v=this._databodyEmpty(),v&&(null==this.m_empty?(P=this._buildEmptyText(),this.m_root.appendChild(P)):P=this.m_empty,D=this.getElementHeight(P),I=this.getElementWidth(P),D>this.getElementHeight(O)&&this.setElementHeight(O,D),I>this.getElementWidth(O)&&this.setElementWidth(O,I)),h=this.getElementWidth(o.firstChild),d=this.getElementHeight(o.firstChild),p=this.isDatabodyHorizontalScrollbarRequired(b),p?(_=this.isDatabodyVerticalScrollbarRequired(E-g),o.style.overflow="auto"):(_=this.isDatabodyVerticalScrollbarRequired(E),_?(p=this.isDatabodyHorizontalScrollbarRequired(b-g),o.style.overflow="auto"):o.style.overflow="hidden"),this.m_hasHorizontalScroller=p,this.m_hasVerticalScroller=_,this.m_endColEndHeader!=-1?(c=Math.min(d+(p?g:0),E),l=p?c-g:c):(c=E,l=Math.min(d,p?c-g:c)),this.m_endRowEndHeader!=-1?(u=Math.min(h+(_?g:0),b),s=_?u-g:u):(u=b,s=Math.min(h,_?u-g:u)),f=a+s+(_?g:0),y=r+l+(p?g:0),this.setElementDir(n,0,m),this.setElementDir(n,r,"top"),this.setElementHeight(n,l),this.setElementDir(C,f,m),this.setElementDir(C,r,"top"),this.setElementHeight(C,l),this.setElementDir(i,a,m),this.setElementWidth(i,s),this.setElementDir(S,a,m),this.setElementDir(S,y,"top"),this.setElementWidth(S,s),this.setElementDir(o,r,"top"),this.setElementDir(o,a,m),this.setElementWidth(o,u),this.setElementHeight(o,c),this.m_scrollWidth=h-s,this.m_scrollHeight=d-l,this.buildCorners(),this._adjustHeaderBorders(),this.m_utils.isTouchDevice()&&(this.m_currentScrollLeft>this.m_scrollWidth&&(x=this.m_scrollWidth-this.m_currentScrollLeft),this.m_currentScrollTop>this.m_scrollHeight&&(M=this.m_scrollHeight-this.m_currentScrollTop),0==x&&0==M||(this._disableTouchScrollAnimation(),this.scrollDelta(x,M)))},i.prototype.resizeColumnWidthAndShift=function(t){var e,i,n,o,r;e=this.getResources().isRTLMode()?"right":"left",o=this.m_colHeader.style.display,r=this.m_colEndHeader.style.display,this.m_databody.style.display="none",this.m_colHeader.style.display="none",this.m_colEndHeader.style.display="none",i=this.getHeaderCellIndex(this.m_resizingElement),this.m_columnHeaderLevelCount>1&&this.m_resizingElement===this.m_resizingElement.parentNode.firstChild&&null!=this.m_resizingElement.nextSibling&&(i+=this._getAttribute(this.m_resizingElement.parentNode,"extent",!0)-1),this._shiftHeadersAlongAxisInContainer(this.m_colHeader.firstChild,i,t,e,this.getMappedStyle("colheadercell"),"column"),this._shiftHeadersAlongAxisInContainer(this.m_colEndHeader.firstChild,i,t,e,this.getMappedStyle("colendheadercell"),"column"),this._shiftCellsInRows(t,!0,n,i-this.m_startCol+1,this.m_endCol-this.m_startCol+1,i-this.m_startCol,e),this.m_databody.style.display="",this.m_colHeader.style.display=o,this.m_colEndHeader.style.display=r},i.prototype._shiftCellsInRows=function(t,e,i,n,o,r,s){var a,l,h,u,d,c;if(null!=this.m_databody.firstChild)for(h=this.m_databody.firstChild.childNodes,a=0;a<h.length;a++)for(u=h[a].childNodes,e&&(d=u[r],null==i&&(i=this.getElementWidth(d)+t),this.setElementWidth(d,i)),l=n;l<o;l+=1)d=u[l],c=this.getElementDir(d,s)+t,this.setElementDir(d,c,s)},i.prototype.resizeRowHeightAndShift=function(t){var e,i,n,o,r,s,a,l;if(a=this.m_rowHeader.style.display,l=this.m_rowEndHeader.style.display,this.m_databody.style.display="none",this.m_rowHeader.style.display="none",this.m_rowEndHeader.style.display="none",o=this.getHeaderCellIndex(this.m_resizingElement),this.m_rowHeaderLevelCount>1&&this.m_resizingElement===this.m_resizingElement.parentNode.firstChild&&null!=this.m_resizingElement.nextSibling&&(o+=this._getAttribute(this.m_resizingElement.parentNode,"extent",!0)-1),this._shiftHeadersAlongAxisInContainer(this.m_rowHeader.firstChild,o,t,"top",this.getMappedStyle("rowheadercell"),"row"),this._shiftHeadersAlongAxisInContainer(this.m_rowEndHeader.firstChild,o,t,"top",this.getMappedStyle("rowendheadercell"),"row"),null!=this.m_databody.firstChild&&(e=this.m_databody.firstChild.childNodes,r=e[o-this.m_startRow],null!=r))for(s=this.getElementHeight(r)+t,this.setElementHeight(r,s),i=o-this.m_startRow+1;i<e.length;i++)r=e[i],n=this.getElementDir(r,"top")+t,this.setElementDir(r,n,"top");this.m_databody.style.display="",
this.m_rowHeader.style.display=a,this.m_rowEndHeader.style.display=l},i.prototype._shiftHeadersAlongAxisInContainer=function(t,e,i,n,o,r){var s,a,l,h,u,d,c,p,_=0;if(s=t.lastChild,null!=s){for(l=this.m_utils.containsCSSClassName(s,o),l?(h=s.parentNode,a=s,u=this.getHeaderCellIndex(a)):(h=s,a=s.firstChild,u=this._getAttribute(h,"start",!0));e<u;)if(l)p=this.getElementDir(a,n)+i,this.setElementDir(a,p,n),s=s.previousSibling,l=this.m_utils.containsCSSClassName(s,o),h=s.parentNode,a=s,u=this.getHeaderCellIndex(a);else{for(d=h.getElementsByClassName(o),c=0;c<d.length;c++)p=this.getElementDir(d[c],n)+i,this.setElementDir(d[c],p,n);s=s.previousSibling,l=this.m_utils.containsCSSClassName(s,o),h=s,a=s.firstChild,u=this._getAttribute(h,"start",!0)}"column"==r?(_=this.getElementWidth(a)+i,this.setElementWidth(a,_)):"row"==r?(_=this.getElementHeight(a)+i,this.setElementHeight(a,_)):null==r&&(p=this.getElementDir(a,n)+i,this.setElementDir(a,p,n)),l||null==a.nextSibling?null!=r&&this.m_sizingManager.setSize(r,this._getKey(a),_):this._shiftHeadersAlongAxisInContainer(s,e,i,n,o,r)}},i.prototype.resizeColumnHeightsAndShift=function(t,e,i){var n,o,r,s;i?(n=this.m_colEndHeader,o=this.getMappedStyle("colendheadercell"),r="columnEnd",s="bottom"):(n=this.m_colHeader,o=this.getMappedStyle("colheadercell"),r="column",s="top"),n.style.display="none",this.m_databody.style.display="none",this._shiftHeadersDirInContainer(n.firstChild,t,e,s,o,r),n.style.display="",this.m_databody.style.display=""},i.prototype.resizeRowWidthsAndShift=function(t,e,i){var n,o,r,s;i?(n=this.m_rowEndHeader,o=this.getMappedStyle("rowendheadercell"),r="rowEnd",s=this.getResources().isRTLMode()?"left":"right"):(n=this.m_rowHeader,o=this.getMappedStyle("rowheadercell"),r="row",s=this.getResources().isRTLMode()?"right":"left"),n.style.display="none",this.m_databody.style.display="none",this._shiftHeadersDirInContainer(n.firstChild,t,e,s,o,r),n.style.display="",this.m_databody.style.display=""},i.prototype._shiftHeadersDirInContainer=function(t,e,i,n,o,r){var s,a,l,h,u,d,c,p,_;for(s=t.childNodes,a=0;a<s.length;a++)if(l=s[a],h=this.m_utils.containsCSSClassName(l,o))u=this.getHeaderCellLevel(l),_=this.getHeaderCellDepth(l),u<=i&&i<u+_?"column"===r||"columnEnd"===r?(c=this.getElementHeight(l)+e,this.setElementHeight(l,c)):(c=this.getElementWidth(l)+e,this.setElementWidth(l,c)):u>i&&(c=this.getElementDir(l,n)+e,this.setElementDir(l,c,n));else if(u=this._getAttribute(l,"level",!0),u<=i)this._shiftHeadersDirInContainer(l,e,i,n,o,r);else for(d=l.getElementsByClassName(o),p=0;p<d.length;p++)c=this.getElementDir(d[p],n)+e,this.setElementDir(d[p],c,n)},i.prototype.handleContextMenuResize=function(t,e,i,n){var o,r,s,a,l,h,u;l=parseInt(i,10),this.m_utils.containsCSSClassName(n,this.getMappedStyle("cell"))&&(n=e===this.m_resources.getMappedCommand("resizeHeight")?this.getHeaderFromCell(n,"row"):this.getHeaderFromCell(n,"column")),this.m_resizingElement=n,o=this.getElementWidth(n),r=this.getElementHeight(n),u=this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("endheadercell")),e===this.m_resources.getMappedCommand("resizeWidth")?o!==l&&(this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colheadercell"))||this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colendheadercell"))?this._isDOMElementResizable(this.m_resizingElement)&&this.resizeColWidth(o,l):this.resizeRowWidth(l,l-o,u)):e===this.m_resources.getMappedCommand("resizeHeight")&&(r=this.getElementHeight(n),r!==l&&(this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colheadercell"))||this.m_utils.containsCSSClassName(this.m_resizingElement,this.getMappedStyle("colendheadercell"))?this.resizeColHeight(l,l-r,u):this._isDOMElementResizable(this.m_resizingElement)&&this.resizeRowHeight(r,l))),s=this.getElementWidth(n),a=this.getElementHeight(n),s==o&&a==r||(h={event:t,ui:{header:this._getKey(this.m_resizingElement),oldDimensions:{width:o,height:r},newDimensions:{width:s,height:a},size:l}},this.fireEvent("resize",h),this.buildCorners(),this.m_utils.isTouchDevice()&&this._moveTouchSelectionAffordance()),this.m_resizingElement=null,this.m_resizingElementMin=null},i.prototype.getHeaderEdgePixels=function(t){var e,i,n,o,r,s,a;return e=this.findPos(t),i=e[0],n=e[1],this.m_utils.containsCSSClassName(t,this.getMappedStyle("colheadercell"))?(s=this.calculateColumnHeaderWidth(t),a=this.getElementHeight(t)):(s=this.getElementWidth(t),a=this.calculateRowHeaderHeight(t)),o=i+s,r=n+a,[i,n,o,r]};var n=function(){this.sizes={column:{},row:{}}};n.prototype.setSize=function(t,e,i){this.sizes[t][e]=i},n.prototype.getSize=function(t,e){return this.sizes[t].hasOwnProperty(e)?this.sizes[t][e]:null},n.prototype.clear=function(){this.sizes={column:{},row:{}}};var o=function(t){this.scrollbarSize=-1,this.dataGrid=t;var e=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():null;this.os=this._determineOS(e),this.platform=this._determinePlatform(e)};o.IE_PLATFORM="ie",o.GECKO_PLATFORM="gecko",o.WEBKIT_PLATFORM="webkit",o.UNKNOWN_PLATFORM="unknown",o.EDGE_PLATFORM="edge",o.WINDOWS_OS="Windows",o.SOLARIS_OS="Solaris",o.MAC_OS="Mac",o.UNKNOWN_OS="Unknown",o.prototype._getMaxDivHeightForScrolling=function(){return null==this.m_maxDivHeightForScrolling&&this._setMaxValuesForScrolling(),this.m_maxDivHeightForScrolling},o.prototype._getMaxDivWidthForScrolling=function(){return null==this.m_maxDivWidthForScrolling&&this._setMaxValuesForScrolling(),this.m_maxDivWidthForScrolling},o.prototype._setMaxValuesForScrolling=function(){var t;return this.platform===o.IE_PLATFORM||this.platform===o.EDGE_PLATFORM?(this.m_maxDivHeightForScrolling=1e6,void(this.m_maxDivWidthForScrolling=1e6)):(t=document.createElement("div"),t.style.cssText="width:1000000000px;height:1000000000px;display:none;",document.body.appendChild(t),this.m_maxDivHeightForScrolling=parseInt(parseFloat(window.getComputedStyle(t).height)/2,10),this.m_maxDivWidthForScrolling=parseInt(parseFloat(window.getComputedStyle(t).width)/2,10),void document.body.removeChild(t))},o.prototype.calculateScrollbarSize=function(){var t=document.createElement("div");t.style.cssText="width:100px;height:100px;overflow:scroll;position:absolute;top:-9999px;",document.body.appendChild(t),this.scrollbarSize=t.offsetWidth-t.clientWidth,document.body.removeChild(t)},o.prototype.getScrollbarSize=function(){return this.scrollbarSize==-1&&this.calculateScrollbarSize(),this.scrollbarSize},o.prototype.isTouchDevice=function(){if(void 0==this.isTouch){var t=navigator.userAgent.toLowerCase();t.indexOf("mobile")!=-1||t.indexOf("android")!=-1?this.isTouch=!0:this.isTouch=!1}return this.isTouch},o.prototype.addCSSClassName=function(t,e){var i,n,r,s;return i=!1,null!=e&&null!=t&&(n=t.className,r=o._getCSSClassNameIndex(n,e),r==-1&&(s=n?e+" "+n:e,t.className=s,i=!0)),i},o.prototype.removeCSSClassName=function(t,e){var i,n,r,s,a,l,h;return i=!1,null!=e&&null!=t&&(n=t.className,r=o._getCSSClassNameIndex(n,e),r!=-1&&(s=r+e.length,a=0==r?null:n.substring(0,r),l=s==n.length?null:n.substring(s+1),h=null==a?null==l?"":l:null==l?a:a+l,t.className=h,i=!0)),i},o.prototype.containsCSSClassName=function(t,e){return null!=e&&null!=t&&o._getCSSClassNameIndex(t.className,e)!=-1},o._getCSSClassNameIndex=function(t,e){var i,n,o,r,s,a,l;if(!t||!t.indexOf)return-1;if(e===t)return 0;if(i=e.length,n=t.length,o=t.indexOf(e),o>=0){if(r=0==o||" "==t.charAt(o-1),s=o+i,a=s==n||" "==t.charAt(s),r&&a)return o;if(l=t.lastIndexOf(e),l!=o)return r=t.charAt(l-1),s=l+i,a=s==n||" "==t.charAt(s),r&&a?l:t.indexOf(" "+e+" ")}return-1},o.prototype.ctrlEquivalent=function(t){var e=this.os===o.MAC_OS;return e?t.metaKey:t.ctrlKey},o.prototype.getElementScrollLeft=function(t){var e,i;return this.dataGrid.getResources().isRTLMode()?this.platform==o.GECKO_PLATFORM||this.platform==o.IE_PLATFORM||this.platform==o.EDGE_PLATFORM?Math.abs(t.scrollLeft):(e=this.dataGrid.getScrollableWidth(),i=t.clientWidth,Math.max(0,e-i-t.scrollLeft)):t.scrollLeft},o.prototype.setElementScrollLeft=function(t,e){var i,n,r;this.dataGrid.getResources().isRTLMode()?this.platform===o.GECKO_PLATFORM?t.scrollLeft=-e:this.platform==o.IE_PLATFORM||this.platform==o.EDGE_PLATFORM?t.scrollLeft=e:(i=this.dataGrid.getScrollableWidth(),n=t.clientWidth,r=i-n-e,t.scrollLeft=r):t.scrollLeft=e},o.prototype._determineOS=function(t){if(t){if(t.indexOf("win")!=-1)return o.WINDOWS_OS;if(t.indexOf("mac")!=-1)return o.MAC_OS;if(t.indexOf("sunos")!=-1)return o.SOLARIS_OS}return o.UNKNOWN_OS},o.prototype._determinePlatform=function(t){if(t){if(t.indexOf("opera")!=-1)return o.UNKNOWN_PLATFORM;if(t.indexOf("trident")!=-1||t.indexOf("msie")!=-1)return o.IE_PLATFORM;if(t.indexOf("edge")!=-1)return o.EDGE_PLATFORM;if(t.indexOf("applewebkit")!=-1||t.indexOf("safari")!=-1)return o.WEBKIT_PLATFORM;if(t.indexOf("gecko/")!=-1)return o.GECKO_PLATFORM}return o.UNKNOWN_PLATFORM},o.prototype.getMousewheelEvent=function(){return"wheel"},o.prototype.getMousewheelScrollDelta=function(t){var e,i,n=0,o=0;return e=t.deltaMode,e==t.DOM_DELTA_PIXEL?i=-1:e!=t.DOM_DELTA_LINE&&e!=t.DOM_DELTA_PAGE||(i=-40),n=t.deltaX*i,o=t.deltaY*i,{deltaX:n,deltaY:o}},o.prototype.empty=function(t){for(;t.firstChild;)this.dataGrid._remove(t.firstChild)},o.prototype.supportsTransitions=function(){var t=document.body||document.documentElement,e=t.style,i="transition",n=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<11);if(n)return!1;if("string"==typeof e[i])return!0;var o=["Moz","webkit","Webkit","Khtml","O","ms"];i=i.charAt(0).toUpperCase()+i.substr(1);for(var r=0;r<o.length;r++)if("string"==typeof e[o[r]+i])return!0;return!1},o.prototype._isNodeEditableOrClickable=function(t,e){for(var i,n,o;null!=t&&t!=e;)if(i=t.nodeName,3!=t.nodeType){if(n=parseInt(t.getAttribute("tabIndex"),10),o=parseInt(t.getAttribute(this.dataGrid.getResources().getMappedAttribute("tabindex")),10),null!=n&&n>=0)return!(this.containsCSSClassName(t,this.dataGrid.getResources().getMappedStyle("cell"))||this.containsCSSClassName(t,this.dataGrid.getResources().getMappedStyle("headercell"))||this.containsCSSClassName(t,this.dataGrid.getResources().getMappedStyle("endheadercell")));if(i.match(/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA/)&&(n!=-1||o!=-1))return!0;t=t.parentNode}else t=t.parentNode;return!1},o.prototype.shouldOffsetOutline=function(){return this.os==o.MAC_OS&&this.platform==o.WEBKIT_PLATFORM};var r=function(t){this.options=t};r.prototype.extract=function(t,e,i,n){var o,r,s;return null!=t?(o=this.options[t],null!=e&&null!=o?(r=o[e],null!=i&&null!=r?(s=r[i],null!=n&&null!=s?s[n]:s):r):o):null},r.prototype.evaluate=function(t,e){return"function"==typeof t?t.call(this,e):t},r.prototype.getRawProperty=function(t,e){var i,n,o;return"row"==e||"column"==e||"rowEnd"==e||"columnEnd"==e?(i="header",n=e,o=t):"cell"==e&&(i="cell",n=t),this.extract(i,n,o)},r.prototype.getProperty=function(t,e,i){return void 0===i?this.extract(t,e):this.evaluate(this.getRawProperty(t,e),i)},r.prototype.nullOrDefault=function(t,e){return null!=t?t:null!=e?e:null},r.prototype.getRowBandingInterval=function(){var t=this.getProperty("bandingInterval","row");return null!=t?t:0},r.prototype.getColumnBandingInterval=function(){var t=this.getProperty("bandingInterval","column");return null!=t?t:0},r.prototype.getEmptyText=function(){return this.getProperty("emptyText")},r.prototype.getHorizontalGridlines=function(){var t;return t=this.extract("gridlines","horizontal"),null!=t?t:"visible"},r.prototype.getVerticalGridlines=function(){var t;return t=this.extract("gridlines","vertical"),null!=t?t:"visible"},r.prototype.getRowScrollPosition=function(){var t;return t=this.extract("scrollPosition","key","row"),null!=t?t:this.extract("scrollPosition","index","row")},r.prototype.getColumnScrollPosition=function(){var t;return t=this.extract("scrollPosition","key","column"),null!=t?t:this.extract("scrollPosition","index","column")},r.prototype.getScrollPositionMode=function(){var t;return t=this.getProperty("scrollPosition"),void 0==t?null:void 0!=t.key?"key":void 0!=t.index?"index":null},r.prototype.getSelectionCardinality=function(){var t,e,i;return t=this.getProperty("selectionMode"),void 0==t?"none":(e=this.getSelectionMode(),i=t[e],null!=i?i:"none")},r.prototype.getSelectionMode=function(){var t,e;return t=this.getProperty("selectionMode"),void 0==t?"cell":(e=t.row,null!=e&&"none"!=e?"row":"cell")},r.prototype.getSelection=function(){return this.getProperty("selection")},r.prototype.getCurrentCell=function(){return this.getProperty("currentCell")},r.prototype.getEditMode=function(){return this.getProperty("editMode")},r.prototype.isSortable=function(t,e){return this.nullOrDefault(this.getProperty("sortable",t,e),!1)},r.prototype.isResizable=function(t,e,i){var n=this.extract("header",t,"resizable",e);return void 0!=i?this.evaluate(n,i):n},r.prototype.isMoveable=function(t){return this.nullOrDefault(this.extract("dnd","reorder",t),!1)},r.prototype.getInlineStyle=function(t,e){return this.getProperty("style",t,e)},r.prototype.getStyleClass=function(t,e){return this.getProperty("className",t,e)},r.prototype.getRenderer=function(t){return this.getRawProperty("renderer",t)},r.prototype.getScrollPolicy=function(){var t=this.getProperty("scrollPolicy");return null==t&&(t="auto"),t},t.__registerWidget("oj.ojDataGrid",e.oj.baseComponent,{widgetEventPrefix:"oj",options:{bandingInterval:{row:0,column:0},data:null,gridlines:{horizontal:"visible",vertical:"visible"},scrollPosition:null,selectionMode:null,dnd:{reorder:{row:"disable"}},scrollPolicy:"auto",selection:[],currentCell:null,editMode:"none",header:{row:{className:null,renderer:null,resizable:{width:"disable",height:"disable"},sortable:"auto",style:null},column:{className:null,renderer:null,resizable:{width:"disable",height:"disable"},sortable:"auto",style:null},columnEnd:{className:null,renderer:null,resizable:{width:"disable",height:"disable"},style:null},rowEnd:{className:null,renderer:null,resizable:{width:"disable",height:"disable"},style:null}},cell:{className:null,renderer:null,style:null},resize:null,sort:null,ready:null,scroll:null,beforeCurrentCell:null,beforeEdit:null,beforeEditEnd:null},_ComponentCreate:function(){this._super(),this.root=this.element[0],this.rootId=this.root.getAttribute("id"),this.grid=new i,this.grid.setVisibility(i.VISIBILITY_STATE_RENDER),e(this.root).addClass("oj-datagrid oj-component"),e(this.root).attr(t.Components._OJ_CONTAINER_ATTR,this.widgetName),this.redrawSet={data:"all",header:["className","renderer","style","template"]}},_AfterCreate:function(){var i=this;this._unregisterResizeListener(this.root),e(this.root).empty(),this._super(),this.resources=new t.DataGridResources(this._GetReadingDirection(),this._getTranslation.bind(i)),this._setDataSource(),this._setSelection(),null!=this.datasource&&(this._addContextMenu(),this.grid.SetDataSource(this.datasource)),this.grid.SetOptions(this.options),this.grid.SetResources(this.resources),this.grid.SetCreateContextCallback(this._modifyContext.bind(i)),this.grid.SetFixContextCallback(this._FixRendererContext.bind(i)),this.grid.SetRemoveCallback(this._remove.bind(i)),this.grid.SetNotReadyCallback(this._NotReady.bind(i)),this.grid.SetMakeReadyCallback(this._MakeReady.bind(i)),this.grid.SetOptionCallback(this.option.bind(i)),this.grid.SetSubtreeAttachedCallback(t.Components.subtreeAttached),this._focusable({applyHighlight:!0,setupHandlers:function(t,n){var o=function(i){return t(e(i))},r=function(t){return n(e(t))};i.grid.SetFocusableCallback.call(i.grid,o,r)}}),this._registerEventListeners(),this._possiblyRenderOrRefresh(),null!=this.datasource&&this._registerResizeListener(this.root)},_registerEventListeners:function(){var t=this;this.grid.addListener("resize",function(e){t._trigger("resize",e.event,e.ui)}),this.grid.addListener("select",function(e){t.option("selection",e.ui.selection,{_context:{originalEvent:e.event,internalSet:!0},changed:!0})}),this.grid.addListener("currentCell",function(e){t.option("currentCell",e.ui,{_context:{originalEvent:e.event,internalSet:!0},changed:!0})}),this.grid.addListener("beforeCurrentCell",function(e){return t._trigger("beforeCurrentCell",e.event,e.ui)}),this.grid.addListener("sort",function(e){t._trigger("sort",e.event,e.ui)}),this.grid.addListener("keydown",function(e){return t._trigger("keydown",e.event,e.ui)}),this.grid.addListener("ready",function(e){t._trigger("ready",null,{})}),this.grid.addListener("scroll",function(e){t._trigger("scroll",e.event,e.ui)}),this.grid.addListener("beforeEdit",function(e){return t._trigger("beforeEdit",e.event,e.ui)}),this.grid.addListener("beforeEditEnd",function(e){return t._trigger("beforeEditEnd",e.event,e.ui)})},refresh:function(){this._super(),this._unregisterResizeListener(this.root),e(this.root).empty(),this._useDefaultContextMenu===!0&&(this.options.contextMenu=null),this._setDataSource(),null!=this.datasource&&(t.FlattenedTreeDataGridDataSource&&this.datasource instanceof t.FlattenedTreeDataGridDataSource&&(this.datasource.Destroy(),this.datasource.Init()),this._addContextMenu(),this.grid.SetDataSource(this.datasource)),this.grid.SetOptions(this.options),this.grid.SetResources(this.resources),this.grid.getVisibility()!=i.VISIBILITY_STATE_RENDER&&this.grid.setVisibility(i.VISIBILITY_STATE_REFRESH),this._possiblyRenderOrRefresh(),null!=this.datasource&&this._registerResizeListener(this.root)},_destroy:function(){e(this.root).removeAttr(t.Components._OJ_CONTAINER_ATTR),null!=this.datasource&&this.datasource.Destroy&&this.datasource.Destroy(),this.grid.destroy(),this._unregisterResizeListener(this.root),e(this.root).empty(),this._MakeReady()},_setOptions:function(t,e){var i;this.datasource?(i=this._handleOptionUpdate(t,e),this._super(t,e),"refresh"==i?this.refresh():"pass"==i&&this.grid.UpdateOptions(t,e)):(this._super(t,e),null!=t.data&&this.refresh())},_NotifyShown:function(){this._super(),this._possiblyRenderOrRefresh()},_NotifyHidden:function(){this._super(),this.grid.getVisibility()===i.VISIBILITY_STATE_VISIBLE&&this.grid.setVisibility(i.VISIBILITY_STATE_HIDDEN)},_NotifyAttached:function(){this._super(),this._possiblyRenderOrRefresh()},_NotifyDetached:function(){this._super(),this.grid.getVisibility()===i.VISIBILITY_STATE_VISIBLE&&this.grid.setVisibility(i.VISIBILITY_STATE_HIDDEN)},_handleOptionUpdate:function(t,e){var i,n,o,r="ignore";for(i in t)switch(i){case"bandingInterval":case"currentCell":case"editMode":case"gridlines":case"scrollPosition":case"selection":r="pass";break;case"beforeCurrentCell":case"beforeEdit":case"beforeEditEnd":case"create":case"disabled":case"dnd":case"optionChange":case"ready":case"resize":case"rootAttributes":case"scroll":case"selectionMode":case"sort":break;case"cell":case"header":if(n=e.subkey,null!=n&&(o=n.split("."),"resizable"==o[1]||"sortable"==o[1])){r="pass";break}case"contextMenu":case"data":case"scrollPolicy":default:return"refresh"}return r},_isResizeEnabled:function(t,e){return!(!this.options.header[t]||!this.options.header[t].resizable)&&"disable"!==this.options.header[t].resizable[e]},_isSortEnabled:function(t){return!!this.options.header[t]&&"disable"!==this.options.header[t].sortable},_addContextMenu:function(){var i,n,o,r,s,a=null,l=null,h=null,u=null;if(i=this,null==this.options.contextMenu){if(null!=this.datasource){if(n=e("<ul>"),n.css("display","none").attr("id",this.rootId+"contextmenu"),e(this.root).append(n),(this._isResizeEnabled("column","width")||this._isResizeEnabled("column","height")||this._isResizeEnabled("row","width")||this._isResizeEnabled("row","height"))&&(a=this._buildContextMenuItem("resize")),r=this.datasource.getCapability("sort"),this._isSortEnabled("column")&&("column"!==r&&"full"!==r||(l=this._buildContextMenuItem("sortCol"))),this._isSortEnabled("row")&&("row"!==r&&"full"!==r||(l=null!=l?l.add(this._buildContextMenuItem("sortRow")):this._buildContextMenuItem("sortRow"))),"enable"===this.options.dnd.reorder.row)switch(this.datasource.getCapability("move")){case"none":break;default:u=this._buildContextMenuListItem("cut").add(this._buildContextMenuListItem("paste"))}this._isMultipleSelection()&&t.DomUtils.isTouchSupported()&&(this._discontiguousSelection=!1,h=this._buildContextMenuListItem("discontiguousSelection")),null==a&&null==l&&null==u&&null==h||(n.append(a).append(l).append(u).append(h),n.ojMenu(),this._useDefaultContextMenu=!0,this._setOption("contextMenu",n.get(0)),n.on("ojselect",this._handleContextMenuSelect.bind(this)))}}else null==this._menuItemsSetByGrid&&(this._menuItemsSetByGrid=[]),n=e(this.options.contextMenu),o=n.find("[data-oj-command]"),s=[],o.each(function(){var t,n,o;n=e(this).children("a"),0!==n.length&&i._menuItemsSetByGrid.indexOf(n.get(0))==-1||(t=e(this).attr("data-oj-command").split("-"),o=i._buildContextMenuItem(t[t.length-1]),e(this).replaceWith(o),s.push(o.children("a").get(0)))}),this._menuItemsSetByGrid=s,n.data("oj-ojMenu")&&n.ojMenu("refresh"),n.on("ojselect",this._handleContextMenuSelect.bind(this))},_buildContextMenuItem:function(t){return"resize"===t?this._buildContextMenuListItem("resize").append(e("<ul></ul>").append(this._buildContextMenuListItem("resizeWidth")).append(this._buildContextMenuListItem("resizeHeight"))):"sortCol"===t?this._buildContextMenuListItem("sortCol").append(e("<ul></ul>").append(this._buildContextMenuListItem("sortColAsc")).append(this._buildContextMenuListItem("sortColDsc"))):"sortRow"===t?this._buildContextMenuListItem("sortRow").append(e("<ul></ul>").append(this._buildContextMenuListItem("sortRowAsc")).append(this._buildContextMenuListItem("sortRowDsc"))):Object.keys(this.resources.commands).indexOf(t)!=-1?e(this._buildContextMenuListItem(t)):void 0},_buildContextMenuListItem:function(t){var i=e("<li></li>");return i.attr("data-oj-command",this._getMappedCommand(t)),i.append(this._buildContextMenuLabel(t)),i},_buildContextMenuLabel:function(t){var i="label"+t.charAt(0).toUpperCase()+t.slice(1);return"discontiguousSelection"===t&&(i="labelEnableNonContiguous"),e('<a href="#"></a>').text(this._getTranslation(i))},_getDataGridContextMenu:function(){return e(this.options.contextMenu).get(0)},_getTranslation:function(t,e){return this.getTranslatedString(t,e)},_handleResizeDialog:function(t){var i=e("#"+this.rootId+"spinner").ojInputNumber("option","value");e("#"+this.rootId+"dialog").ojDialog("close"),this.grid.handleContextMenuReturn(this.contextMenuEvent,this.menuItemFunction,i),this.contextMenuEvent.target.focus()},_buildResizeDialog:function(t,i){var n,o,r,s,a;n=e("#"+this.rootId+"dialog"),r=e("#"+this.rootId+"spinner"),0===n.length||0===r.length?(n=e("<div>"),n.attr("id",this.rootId+"dialog"),o=e('<div class="oj-dialog-body"></div>'),s=e('<div class="oj-dialog-footer"></div>'),n.append(o).append(s),r=e('<input id="'+this.rootId+'spinner"/>'),a=e('<button id="'+this.rootId+'dialogsubmit"/>'),o.append(r),s.append(a),e(this.root).append(n),a.ojButton({component:"ojButton",label:this._getTranslation("labelResizeDialogSubmit")}),a.on("click",this._handleResizeDialog.bind(this)),r.ojInputNumber({component:"ojInputNumber",max:1e3,min:20,step:1,value:i}),n.ojDialog({initialVisibility:"show",title:t,position:{my:"center center",at:"center center",collision:"none",of:e(this.root)}})):(n=e("#"+this.rootId+"dialog"),r.ojInputNumber("option","value",i),n.ojDialog("option","title",t),n.ojDialog("open"))},_handleContextMenuSelect:function(t,i){var n,o;if(this.menuItemFunction=i.item.attr("data-oj-command"),this.menuItemFunction===this._getMappedCommand("sortColAsc")||this.menuItemFunction===this._getMappedCommand("sortColDsc")||this.menuItemFunction===this._getMappedCommand("cut")||this.menuItemFunction===this._getMappedCommand("paste"))this.grid.handleContextMenuReturn(this.contextMenuEvent,this.menuItemFunction,null);else if(this.menuItemFunction===this._getMappedCommand("resizeWidth")||this.menuItemFunction===this._getMappedCommand("resizeHeight"))o=e(this.contextMenuEvent.target).closest("."+this._getMappedStyle("cell")),0==o.length&&(o=e(this.contextMenuEvent.target).closest("."+this._getMappedStyle("headercell"))),0==o.length&&(o=e(this.contextMenuEvent.target).closest("."+this._getMappedStyle("endheadercell"))),o.length>0&&(n=this.menuItemFunction===this._getMappedCommand("resizeWidth")?o.outerWidth():o.outerHeight(),this._buildResizeDialog(i.item.text(),n));else if(this.menuItemFunction===this._getMappedCommand("discontiguousSelection")){this._discontiguousSelection=!this._discontiguousSelection,this.grid.handleContextMenuReturn(this.contextMenuEvent,this.menuItemFunction,this._discontiguousSelection);var r=this._discontiguousSelection?"labelDisableNonContiguous":"labelEnableNonContiguous";i.item.children().first().text(this._getTranslation(r))}},_NotifyContextMenuGesture:function(t,e,i){this.grid.handleContextMenuGesture(e,i,this._contextMenuGestureCallback.bind(this))},_contextMenuGestureCallback:function(t,i,n){var o,r,s;null!=t&&(this.contextMenuEvent=i.originalEvent,o=t.launcher,r=t.capabilities,this._manageContextMenu(r),s="keyboard"===n?{position:{of:o},launcher:e(o)}:{launcher:e(o)},this._OpenContextMenu(i,n,s))},_addContextMenuCapability:function(t){var i;i=e(this._getDataGridContextMenu()),i.find("[data-oj-command="+t+"]").hasClass("oj-disabled")||i.find("[data-oj-command="+t+"]").addClass("oj-disabled")},_removeContextMenuCapability:function(t){e(this._getDataGridContextMenu()).find("[data-oj-command="+t+"]").removeClass("oj-disabled")},_manageContextMenu:function(t){var e,i;for(e in t)t.hasOwnProperty(e)&&(i=this.resources.getMappedCommand(e),"disable"===t[e]?this._addContextMenuCapability(i):this._removeContextMenuCapability(i))},_findCellIndex:function(t){var e,i,n;return e=t.parent(),n=t.index(),i=e.index(),{rowIndex:i,columnIndex:n}},_findHeadersByCellIndex:function(t){var e,i;return e=this._getRowHeader().children().eq(0).children().eq(t.rowIndex+1),i=this._getColumnHeader().children().eq(0).children().eq(t.columnIndex),{rowHeader:e,columnHeader:i}},_getGrid:function(){return e(this.root)},_getColumnHeader:function(){return e("#"+this.rootId+"\\:columnHeader")},_getRowHeader:function(){return e("#"+this.rootId+"\\:rowHeader")},_getDatabodyRows:function(){return e("#"+this.rootId+"\\:databody ."+this._getMappedStyle("row"))},_setDataSource:function(){null!=this.options.data?this.datasource=this.options.data:this.datasource=null},_setSelection:function(){var t=this.options.selection;null!=t&&this.grid.SetSelection(t)},_modifyContext:function(e){e.component=t.Components.getWidgetConstructor(this.element,"ojDataGrid")},_setAccessibleContext:function(t){this.grid.SetAccessibleContext(t)},_unregisterResizeListener:function(e){e&&this._resizeHandler&&t.DomUtils.removeResizeListener(e,this._resizeHandler)},_registerResizeListener:function(e){e&&(null==this._resizeHandler&&(this._resizeHandler=this._handleResize.bind(this)),t.DomUtils.addResizeListener(e,this._resizeHandler))},_handleResize:function(t,e){t>0&&e>0&&(this._possiblyRenderOrRefresh(),this.grid.HandleResize(t,e))},getNodeBySubId:function(t){var i,n,o,r,s,a,l,h;if(null==t)return this.element?this.element[0]:null;if(i=t.subId,"oj-datagrid-cell"===i)o=t.rowIndex-this.grid.getStartRow(),r=t.columnIndex-this.grid.getStartColumn(),h=this._getDatabodyRows().eq(o).children().eq(r);else if("oj-datagrid-sort-icon"===i||"oj-datagrid-sort-ascending"===i||"oj-datagrid-sort-descending"===i||"oj-datagrid-header"===i){if(a=t.axis,s=t.index,l=null==t.level?0:t.level,"column"===a?n=this._getHeaderByIndex(s,l,e("#"+this.rootId+"\\:columnHeader"),this.grid.getStartColumnHeader()):"row"===a?n=this._getHeaderByIndex(s,l,e("#"+this.rootId+"\\:rowHeader"),this.grid.getStartRowHeader()):"columnEnd"===a?n=this._getHeaderByIndex(s,l,e("#"+this.rootId+"\\:columnEndHeader"),this.grid.getStartColumnEndHeader()):"rowEnd"===a&&(n=this._getHeaderByIndex(s,l,e("#"+this.rootId+"\\:rowEndHeader"),this.grid.getStartRowEndHeader())),null==n)return null;if("oj-datagrid-sort-icon"===i)return n.children("."+this._getMappedStyle("sortcontainer")).children().get(0);h="oj-datagrid-sort-ascending"===i?n.find("."+this._getMappedStyle("sortascending")):"oj-datagrid-sort-descending"===i?n.find("."+this._getMappedStyle("sortdescending")):n}return null!=h&&h.length>0?h[0]:null},getSubIdByNode:function(t){var i,n,o,r,s;return i=e(t).closest("."+this._getMappedStyle("cell")),i.length>0?(s=this._findCellIndex(i),{subId:"oj-datagrid-cell",rowIndex:s.rowIndex+this.grid.getStartRow(),columnIndex:s.columnIndex+this.grid.getStartColumn()}):(o=e(t).closest("."+this._getMappedStyle("headercell")),0==o.length&&(o=e(t).closest("."+this._getMappedStyle("endheadercell"))),o.length>0?(n=o[0][this._getMappedAttribute("context")],r=e(t).hasClass(this._getMappedStyle("sortascending"))?"oj-datagrid-sort-ascending":e(t).hasClass(this._getMappedStyle("sortdescending"))?"oj-datagrid-sort-descending":"oj-datagrid-header",{subId:r,axis:n.axis,index:this._getHeaderIndex(o),level:n.level}):null)},getContextByNode:function(t){var i,n,o,r;return i=e(t).closest("."+this._getMappedStyle("cell")),i.length>0?(o=i[0][this._getMappedAttribute("context")],r=this._findCellIndex(i),{subId:"oj-datagrid-cell",component:o.component,cell:o.cell,data:o.data,datasource:o.datasource,indexes:{row:r.rowIndex+this.grid.getStartRow(),column:r.columnIndex+this.grid.getStartColumn()},keys:{row:o.keys.row,column:o.keys.column},mode:o.mode}):(n=e(t).closest("."+this._getMappedStyle("headercell")),0==n.length&&(n=e(t).closest("."+this._getMappedStyle("endheadercell"))),n.length>0?(o=n[0][this._getMappedAttribute("context")],{subId:"oj-datagrid-header",axis:o.axis,component:o.component,data:o.data,datasource:o.datasource,depth:o.depth,extent:o.extent,index:this._getHeaderIndex(n),key:o.key,level:o.level}):null)},_getMappedStyle:function(t){return this.resources.getMappedStyle(t)},_getMappedAttribute:function(t){return this.resources.getMappedAttribute(t)},_getMappedCommand:function(t){return this.resources.getMappedCommand(t)},_isDataGridSizingAvailable:function(){return null!=this.root.offsetParent},_possiblyRenderOrRefresh:function(){var t=this.grid.getVisibility();this._isDataGridSizingAvailable()?(t===i.VISIBILITY_STATE_RENDER?this.grid.render(this.root):t===i.VISIBILITY_STATE_REFRESH&&this.grid.refresh(this.root),this.grid.setVisibility(i.VISIBILITY_STATE_VISIBLE)):t===i.VISIBILITY_STATE_VISIBLE&&this.grid.setVisibility(i.VISIBILITY_STATE_HIDDEN)},_getHeaderByIndex:function(t,e,i,n){var o,r,s;return e<0?null:(o=i.children().first().children().last(),o.hasClass(this._getMappedStyle("headercell"))?i.children().first().children("."+this._getMappedStyle("headercell")).eq(t-n):o.hasClass(this._getMappedStyle("endheadercell"))?i.children().first().children("."+this._getMappedStyle("endheadercell")).eq(t-n):(r=this._getGroupingContainer(t,e,0,i.children().first().children()),null==r?null:e<=parseInt(r.attr(this._getMappedAttribute("level")),10)+parseInt(r.children().eq(0).attr(this._getMappedAttribute("depth")),10)-1?r.children().eq(0):(n=parseInt(r.attr(this._getMappedAttribute("start")),10),s=t-n+1,r.children().eq(s))))},_getGroupingContainer:function(t,e,i,n){var o,r,s,a,l;if(null==n.eq(1)||n.eq(1).hasClass(this._getMappedStyle("headercell"))||n.eq(1).hasClass(this._getMappedStyle("endheadercell")))return e===i?n.eq(0).parent():null;for(a=n.parent().parent(),s=a.hasClass(this._getMappedStyle("header"))||a.hasClass(this._getMappedStyle("endheader"))?0:1;s<n.length;s++)if(o=parseInt(n.eq(s).attr(this._getMappedAttribute("start")),10),r=parseInt(n.eq(s).attr(this._getMappedAttribute("extent")),10),l=parseInt(n.eq(s).children().eq(0).attr(this._getMappedAttribute("depth")),10),t>=o&&t<o+r)return e<i+l?n.eq(s):this._getGroupingContainer(t,e,i+l,n.eq(s).children());return null},_getHeaderIndex:function(t){var e;if(t.parent().hasClass(this._getMappedStyle("groupingcontainer"))){if(e=parseInt(t.parent().attr(this._getMappedAttribute("start")),10),t.get(0)===t.parent().children(":first").get(0))return e;
e--}else e=t.hasClass(this._getMappedStyle("rowheadercell"))?this.grid.getStartRowHeader():t.hasClass(this._getMappedStyle("colheadercell"))?this.grid.getStartColumnHeader():t.hasClass(this._getMappedStyle("colendheadercell"))?this.grid.getStartColumnEndHeader():this.grid.getStartRowEndHeader();return e+=t.index()},_getHeaderLevel:function(t){var e;return t.parent().hasClass(this._getMappedStyle("groupingcontainer"))?(e=parseInt(t.parent().attr(this._getMappedAttribute("level")),10),t.get(0)===t.parent().children(":first").get(0)?e:e+1):0},_isMultipleSelection:function(){return null!=this.options.selectionMode&&("multiple"===this.options.selectionMode.row||"multiple"===this.options.selectionMode.cell)},_remove:function(t){e(t).remove()},scrollTo:function(t){this.grid.scroll(t)},whenReady:function(){if(this._ready)return Promise.resolve(!0);if(!this._readyPromise){var t=this;this._readyPromise=new Promise(function(e){t._readyPromiseResolve=e})}return this._readyPromise},_NotReady:function(){if(this._ready=!1,!this._readyResolveFunc){var e=t.Context.getContext(this.element[0]).getBusyContext(),i={description:"The component identified by '"+this.element.attr("id")+"' is being loaded."};this._readyResolveFunc=e.addBusyState(i)}},_MakeReady:function(){this._readyPromiseResolve&&(this._readyPromiseResolve(!0),this._readyPromiseResolve=null),this._ready=!0,this._promise=null,this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null)}}),i.prototype._setupActions=function(){this.actions={ACTIONABLE:this._handleActionable,EXIT_ACTIONABLE:this._handleExitActionable,TAB_NEXT_IN_CELL:this._handleActionableTab,TAB_PREV_IN_CELL:this._handleActionablePrevTab,EDITABLE:this._handleEditable,EXIT_EDITABLE:this._handleExitEditable,DATA_ENTRY:this._handleDataEntry,EXIT_DATA_ENTRY:this._handleExitDataEntry,EDIT:this._handleEdit,EXIT_EDIT:this._handleExitEdit,CANCEL_EDIT:this._handleCancelEdit,NO_OP:this._handleNoOp,EAT:this._handleEat,FOCUS_LEFT:this._handleFocusLeft,FOCUS_RIGHT:this._handleFocusRight,FOCUS_UP:this._handleFocusUp,FOCUS_DOWN:this._handleFocusDown,FOCUS_ROW_FIRST:this._handleFocusRowFirst,FOCUS_ROW_LAST:this._handleFocusRowLast,FOCUS_COLUMN_FIRST:this._handleFocusColumnFirst,FOCUS_COLUMN_LAST:this._handleFocusColumnLast,FOCUS_COLUMN_HEADER:this._handleFocusColumnHeader,FOCUS_COLUMN_END_HEADER:this._handleFocusColumnEndHeader,FOCUS_ROW_HEADER:this._handleFocusRowHeader,FOCUS_ROW_END_HEADER:this._handleFocusRowEndHeader,READ_CELL:this.readCurrentContent,SORT:this._handleSortKey,SELECT_DISCONTIGUOUS:this._handleSelectDiscontiguous,SELECT_EXTEND_LEFT:this._handleExtendSelectionLeft,SELECT_EXTEND_RIGHT:this._handleExtendSelectionRight,SELECT_EXTEND_UP:this._handleExtendSelectionUp,SELECT_EXTEND_DOWN:this._handleExtendSelectionDown,SELECT_ROW:this._handleSelectRow,SELECT_COLUMN:this._handleSelectColumn,CUT:this._handleCut,CANCEL_REORDER:this._handleCancelReorder,PASTE:this._handlePaste}},i.prototype._getActionFromKeyDown=function(t,e){var i={cellOrHeader:e,readOnly:!this._isCellEditable(),currentMode:this._getCurrentMode(),activeMove:null!=this.m_cutRow,rowMove:this._isMoveEnabled("row"),columnSort:"column"==e&&this._isDOMElementSortable(this._getActiveElement()),selection:this._isSelectionEnabled(),selectionMode:this.m_options.getSelectionMode(),multipleSelection:this.isMultipleSelection()};return this.actions[this.m_keyboardHandler.getAction(t,i)]},i.prototype.isActionableMode=function(){return"actionable"===this.m_currentMode},i.prototype.setActionableMode=function(t){t?this.m_currentMode="actionable":this.m_currentMode="navigation",this._setAccInfoText(this.isActionableMode()?"accessibleActionableMode":"accessibleNavigationMode")},i.prototype._handleActionable=function(t,e){return this._enterActionableMode(e),!1},i.prototype._handleExitActionable=function(t,e){return this._exitActionableMode(),this._highlightActive(),!1},i.prototype._handleActionableTab=function(t,e){var i=this.getFocusableElementsInNode(e);return i.length>0&&t.target==i[i.length-1]&&(i[0].focus(),!0)},i.prototype._handleActionablePrevTab=function(t,e){var i=this.getFocusableElementsInNode(e);return i.length>0&&t.target==i[0]&&(i[i.length-1].focus(),!0)},i.prototype._getEditMode=function(){return null==this.m_editMode&&(this.m_editMode=this.m_options.getEditMode()),this.m_editMode},i.prototype._getCurrentMode=function(){return null==this.m_currentMode&&(this.m_currentMode="navigation"),this.m_currentMode},i.prototype._isEditOrEnter=function(){var t=this._getCurrentMode();return"edit"===t},i.prototype._isGridEditable=function(){var t=this._getEditMode();return"cellNavigation"===t||"cellEdit"===t},i.prototype._isCellEditable=function(){var t=this._getEditMode();return"cellEdit"===t},i.prototype._handleEditable=function(t,e){return this._isGridEditable()?(this.m_editMode=null,this.m_setOptionCallback("editMode","cellEdit",{_context:{writeback:!0,internalSet:!0}}),this.m_utils.removeCSSClassName(this.m_root,this.getMappedStyle("readOnly")),this.m_utils.addCSSClassName(this.m_root,this.getMappedStyle("editable")),this._updateEdgeCellBorders(""),this._setAccInfoText("accessibleEditableMode")):this._handleActionable(t,e),!1},i.prototype._handleExitEditable=function(t,e){this.m_editMode=null,this.m_setOptionCallback("editMode","cellNavigation",{_context:{writeback:!0,internalSet:!0}}),this.m_utils.addCSSClassName(this.m_root,this.getMappedStyle("readOnly")),this.m_utils.removeCSSClassName(this.m_root,this.getMappedStyle("editable")),this._updateEdgeCellBorders("none"),this._setAccInfoText("accessibleNavigationMode")},i.prototype._handleDataEntry=function(t,e){var i,n;return i={event:t,ui:{cell:e,cellContext:e[this.getResources().getMappedAttribute("context")]}},n=this.fireEvent("beforeEdit",i),n&&(this._reRenderCell(e,"edit",this.getMappedStyle("cellEdit")),this._enableAllFocusableElements(e),this._overwriteFlag=!0,this._setFocusToFirstFocusableElement(e)?this.m_currentMode="edit":this.m_utils.removeCSSClassName(e,this.getMappedStyle("cellEdit")),this._overwriteFlag=!1),!1},i.prototype._handleExitDataEntry=function(t,e){return this._leaveEditing(t,e,!1)},i.prototype._handleEdit=function(t,e){var i,n;return i={event:t,ui:{cell:e,cellContext:e[this.getResources().getMappedAttribute("context")]}},n=this.fireEvent("beforeEdit",i),n?(this._reRenderCell(e,"edit",this.getMappedStyle("cellEdit")),this._enableAllFocusableElements(e),this._setFocusToFirstFocusableElement(e)?this.m_currentMode="edit":this.m_utils.removeCSSClassName(e,this.getMappedStyle("cellEdit"))):(n=!1,this._enterActionableMode(e)),n},i.prototype._handleExitEdit=function(t,e){return this._leaveEditing(t,e,!1)},i.prototype._handleCancelEdit=function(t,e){return this._leaveEditing(t,e,!0)},i.prototype._leaveEditing=function(t,e,i){var n,o;return n={event:t,ui:{cell:e,cellContext:e[this.getResources().getMappedAttribute("context")],cancelEdit:i}},i||(this._disableAllFocusableElements(e),this._highlightActive()),o=this.fireEvent("beforeEditEnd",n),o?(this.m_currentMode="navigation",this._disableAllFocusableElements(e),this._highlightActive(),this._reRenderCell(e,"navigation",this.getMappedStyle("cellEdit"))):(o=!1,this._scrollToActive(this.m_active),this._enableAllFocusableElements(e),this._setFocusToFirstFocusableElement(e)),o},i.prototype._handleFocusKey=function(t,e,i,n,o){var r,s,a,l=!0,h=!0;return null!=this.m_active&&("cell"==this.m_active.type?(this._isEditOrEnter()?(r=!0,l=this._leaveEditing(t,e,!1),h=!1):this.isActionableMode()&&this._exitActionableMode(),!l||(a=this.m_active,s=this.handleFocusChange(i,n,t,h,o),this.m_utils.isTouchDevice()&&r&&a!=this.m_active?this._handleEdit(t,this._getActiveElement()):s)):this.handleHeaderFocusChange(i,t,o))},i.prototype._handleFocusLeft=function(t,e){return this._handleFocusKey(t,e,i.keyCodes.LEFT_KEY,!1,!1)},i.prototype._handleFocusRight=function(t,e){return this._handleFocusKey(t,e,i.keyCodes.RIGHT_KEY,!1,!1)},i.prototype._handleFocusUp=function(t,e){return this._handleFocusKey(t,e,i.keyCodes.UP_KEY,!1,!1)},i.prototype._handleFocusDown=function(t,e){return this._handleFocusKey(t,e,i.keyCodes.DOWN_KEY,!1,!1)},i.prototype._handleFocusRowFirst=function(t,e){return this._handleFocusKey(t,e,i.keyCodes.PAGEUP_KEY,!1,!1)},i.prototype._handleFocusRowLast=function(t,e){return this._handleFocusKey(t,e,i.keyCodes.PAGEDOWN_KEY,!1,!1)},i.prototype._handleFocusColumnFirst=function(t,e){return this._handleFocusKey(t,e,i.keyCodes.HOME_KEY,!1,!1)},i.prototype._handleFocusColumnLast=function(t,e){return this._handleFocusKey(t,e,i.keyCodes.END_KEY,!1,!1)},i.prototype._handleFocusRowHeader=function(t,e){return this._handleFocusKey(t,e,i.keyCodes.LEFT_KEY,!1,!0)},i.prototype._handleFocusRowEndHeader=function(t,e){return this._handleFocusKey(t,e,i.keyCodes.RIGHT_KEY,!1,!0)},i.prototype._handleFocusColumnHeader=function(t,e){return this._handleFocusKey(t,e,i.keyCodes.UP_KEY,!1,!0)},i.prototype._handleFocusColumnEndHeader=function(t,e){return this._handleFocusKey(t,e,i.keyCodes.DOWN_KEY,!1,!0)},i.prototype._handleSelectRow=function(t,e){var i,n,o,r,s,a;if(!this._isSelectionEnabled()||!this.isMultipleSelection())return!1;if(this.m_utils.containsCSSClassName(e,this.getMappedStyle("cell")))a=this.m_active.indexes.row,n=a,o=a;else{if(null==this.m_active||"header"!=this.m_active.type||"row"!=this.m_active.axis)return!1;i=this.m_active.axis,a=this.m_active.index,s=this.m_active.level,this.m_rowHeaderLevelCount-1===s?(n=a,o=a):(r=this._getActiveElement(),n=this._getAttribute(r.parentNode,"start",!0),o=n+this._getAttribute(r.parentNode,"extent",!0)-1)}return this._selectEntireRow(n,o,t),this._setAccInfoText("accessibleRowSelected",{row:a+1}),!0},i.prototype._handleSelectColumn=function(t,e){var i,n,o,r,s,a;if(!this._isSelectionEnabled()||!this.isMultipleSelection()||"cell"!=this.m_options.getSelectionMode())return!1;if(this.m_utils.containsCSSClassName(e,this.getMappedStyle("cell")))a=this.m_active.indexes.column,n=a,o=a;else{if(null==this.m_active||"header"!=this.m_active.type||"column"!=this.m_active.axis)return!1;i=this.m_active.axis,a=this.m_active.index,s=this.m_active.level,this.m_columnHeaderLevelCount-1===s?(n=a,o=a):(r=this._getActiveElement(),n=this._getAttribute(r.parentNode,"start",!0),o=n+this._getAttribute(r.parentNode,"extent",!0)-1)}return this._selectEntireColumn(n,o,t),this._setAccInfoText("accessibleColumnSelected",{column:a+1}),!0},i.prototype._handleSelectDiscontiguous=function(t,e){return this.setDiscontiguousSelectionMode(!this.m_discontiguousSelection),!0},i.prototype._handleExtendSelectionLeft=function(t,e){return this._handleFocusKey(t,e,i.keyCodes.LEFT_KEY,!0,!1)},i.prototype._handleExtendSelectionRight=function(t,e){return this._handleFocusKey(t,e,i.keyCodes.RIGHT_KEY,!0,!1)},i.prototype._handleExtendSelectionUp=function(t,e){return this._handleFocusKey(t,e,i.keyCodes.UP_KEY,!0,!1)},i.prototype._handleExtendSelectionDown=function(t,e){return this._handleFocusKey(t,e,i.keyCodes.DOWN_KEY,!0,!1)},i.prototype._handleSortKey=function(t,e){return"true"==e.getAttribute(this.getResources().getMappedAttribute("sortable"))?(this._handleKeyboardSort(e,t),!0):this._handleActionable(t,e)},i.prototype._handleNoOp=function(t,e){return!1},i.prototype._handleEat=function(t,e){return!0};var s=function(t){this.grid=t};s.prototype.getAction=function(t,e){var n,o,r,s,a,l,h,u,d,c,p,_,g,m;switch(n=t.keyCode,r=this.grid.m_utils.ctrlEquivalent(t),s=t.shiftKey,a=t.altKey,o=i.keyCodes,l=e.cellOrHeader,h=e.readOnly,u=e.currentMode,d=e.activeMove,c=e.rowMove,p=e.columnSort,_=e.selection,g=e.selectionMode,m=e.multipleSelection,n){case o.TAB_KEY:if("actionable"===u)return s?"TAB_PREV_IN_CELL":"TAB_NEXT_IN_CELL";if(!h)return s?"FOCUS_LEFT":"FOCUS_RIGHT";break;case o.ENTER_KEY:if("column"===l&&p)return"SORT";if(!a&&h&&"navigation"===u||"cell"!=l)return"ACTIONABLE";if(!h&&!a)return s?"FOCUS_UP":"FOCUS_DOWN";if(a&&h&&"navigation"===u)return"EDITABLE";if(!h&&("navigation"==u||"edit"===u))return"EDIT";break;case o.ESC_KEY:if("actionable"===u)return"EXIT_ACTIONABLE";if(d)return"CANCEL_REORDER";if(!h){if("navigation"===u)return"EXIT_EDITABLE";if("edit"===u)return"CANCEL_EDIT"}break;case o.SPACE_KEY:if("row"===l&&_&&("cell"==g&&m||"row"==g))return"SELECT_ROW";if("column"===l&&_&&"cell"==g&&m)return"SELECT_COLUMN";if("cell"===l)if(h&&"navigation"===u){if(r&&_&&"cell"==g&&m)return"SELECT_COLUMN";if(s&&_&&("cell"==g&&m||"row"==g))return"SELECT_ROW"}else if("navigation"===u)return"DATA_ENTRY";break;case o.PAGEUP_KEY:if("edit"!==u)return"FOCUS_ROW_FIRST";break;case o.PAGEDOWN_KEY:if("edit"!==u)return"FOCUS_ROW_LAST";break;case o.END_KEY:if("edit"!==u)return"FOCUS_COLUMN_LAST";break;case o.HOME_KEY:if("edit"!==u)return"FOCUS_COLUMN_FIRST";break;case o.LEFT_KEY:if("actionable"===u)return"NO_OP";if("edit"!==u)return s&&_&&"cell"==g&&m?"SELECT_EXTEND_LEFT":r&&"column"!=l?"FOCUS_ROW_HEADER":"FOCUS_LEFT";break;case o.UP_KEY:if("actionable"===u)return"NO_OP";if("edit"!==u)return s&&_&&m?"SELECT_EXTEND_UP":r&&"row"!=l?"FOCUS_COLUMN_HEADER":"FOCUS_UP";break;case o.RIGHT_KEY:if("actionable"===u)return"NO_OP";if("edit"!==u)return s&&_&&"cell"==g&&m?"SELECT_EXTEND_RIGHT":r&&"column"!=l?"FOCUS_ROW_END_HEADER":"FOCUS_RIGHT";break;case o.DOWN_KEY:if("actionable"===u)return"NO_OP";if("edit"!==u)return s&&_&&m?"SELECT_EXTEND_DOWN":r&&"row"!=l?"FOCUS_COLUMN_END_HEADER":"FOCUS_DOWN";break;case o.F2_KEY:if("cell"!=l)return"ACTIONABLE";if(h&&"navigation"===u)return"EDITABLE";if(!h&&"navigation"==u)return"EDIT";break;case o.F8_KEY:if(s&&_&&m)return"SELECT_DISCONTIGUOUS";break;case o.F10_KEY:if(s)return"NO_OP";break;case o.V_KEY:if("navigation"===u&&r&&c)return"PASTE";if(!h&&"navigation"===u)return"DATA_ENTRY";break;case o.X_KEY:if("navigation"===u&&r&&c)return"CUT";if(!h&&"navigation"===u)return"DATA_ENTRY";break;case o.SHIFT_KEY:case o.CTRL_KEY:case o.ALT_KEY:break;case o.NUM5_KEY:if(r&&a)return"READ_CELL";default:if(!h&&"navigation"===u&&"cell"==l)return"DATA_ENTRY"}return"NO_OP"},function(){var e={properties:{bandingInterval:{type:"object",properties:{row:{type:"number"},column:{type:"number"}}},cell:{type:"object",properties:{className:{type:"string"},renderer:{},style:{type:"string"}}},currentCell:{type:"object"},data:{},dnd:{type:"object",properties:{reorder:{type:"object",properties:{row:{type:"string",enumValues:["disable","enable"]}}}}},editMode:{type:"string",enumValues:["none","cellNavigation","cellEdit"]},gridlines:{type:"object",properties:{horizontal:{type:"string",enumValues:["visible","hidden"]},vertical:{type:"string",enumValues:["visible","hidden"]}}},header:{type:"object",properties:{column:{type:"object",properties:{className:{type:"string"},renderer:{},resizable:{type:"object",properties:{width:{type:"string",enumValues:["disable","enable"]},height:{type:"string",enumValues:["disable","enable"]}}},sortable:{type:"string",enumValues:["auto","disable","enable"]},style:{type:"string"}}},columnEnd:{type:"object",properties:{className:{type:"string"},renderer:{},resizable:{type:"object",properties:{width:{type:"string",enumValues:["disable","enable"]},height:{type:"string",enumValues:["disable","enable"]}}},sortable:{type:"string",enumValues:["auto","disable","enable"]},style:{type:"string"}}},row:{type:"object",properties:{className:{type:"string"},renderer:{},resizable:{type:"object",properties:{width:{type:"string",enumValues:["disable","enable"]},height:{type:"string",enumValues:["disable","enable"]}}},sortable:{type:"string",enumValues:["auto","disable","enable"]},style:{type:"string"}}},rowEnd:{type:"object",properties:{className:{type:"string"},renderer:{},resizable:{type:"object",properties:{width:{type:"string",enumValues:["disable","enable"]},height:{type:"string",enumValues:["disable","enable"]}}},sortable:{type:"string",enumValues:["auto","disable","enable"]},style:{type:"string"}}}}},scrollPolicy:{type:"string",enumValues:["auto","loadMoreOnScroll","scroll"]},scrollPosition:{type:"object",properties:{index:{type:"object",properties:{row:{type:"number"},column:{type:"number"}}},key:{type:"object",properties:{row:{type:"string"},column:{type:"string"}}}}},selection:{type:"Array<object>"},selectionMode:{type:"object",properties:{row:{type:"string",enumValues:["single","multiple"]},cell:{type:"string",enumValues:["single","multiple"]}}}},methods:{getContextByNode:{},getNodeBySubId:{},getSubIdByNode:{},refresh:{},scrollTo:{}},events:{beforeCurrentCell:{},beforeEdit:{},beforeEditEnd:{},resize:{},scroll:{},sort:{}},extension:{_WIDGET_NAME:"ojDataGrid"}};t.CustomElementBridge.registerMetadata("oj-data-grid","baseComponent",e),t.CustomElementBridge.register("oj-data-grid",{metadata:t.CustomElementBridge.getMetadata("oj-data-grid")})}()}),define("ojs/internal-deps/dvt/DvtPanZoomCanvas",["./DvtToolkit"],function(t){return function(t){t.ComboBox=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.ComboBox,t.Container),t.ComboBox._HIDE_DROPDOWN_DELAY=100,t.ComboBox._DROPDOWN_OUTOFFOCUS_CHECK=100,t.ComboBox.prototype.Init=function(e,i,n){t.ComboBox.superclass.Init.call(this,e,null,i),this._styleMap=n,this._itemButtonStates=[],this._items=[],this._tooltips=[],this._selectedIndex=0,this._bStaticButtonStates=!1,this._bRemoveDropdown=!1,this._maxItemDim=new t.Rectangle(0,0,0,0),this._itemDim=new t.Rectangle(0,0,0,0),this._tooltipManager=e.getTooltipManager(),this._isTouchDevice=t.Agent.isTouchDevice(),this._button=this.createButton(i+"_cl"),this.addChild(this._button),this._contentArea=new t.Container(e),this._contentArea.setMouseEnabled(!1),this.addChild(this._contentArea),this._hideDropdownTimer=new t.Timer(e,t.ComboBox._HIDE_DROPDOWN_DELAY,this.HandleHideDropdownTimer,this,1),this._outOfFocusCheckTimer=new t.Timer(e,t.ComboBox._DROPDOWN_OUTOFFOCUS_CHECK,this.HandleOutOfFocusCheckTimer,this,1),this._dropdownItemClickEvent=!1},t.ComboBox.prototype._stopHideDropdownTimer=function(){this._hideDropdownTimer&&(this._hideDropdownTimer.stop(),this._hideDropdownTimer=null)},t.ComboBox.prototype.getSelectedIndex=function(){return this._selectedIndex},t.ComboBox.prototype.setSelectedIndex=function(t){this._selectedIndex=t,this._bStaticButtonStates||this.UpdateContentArea(),this.FireChangeEvent(t)},t.ComboBox.prototype.createButton=function(e){var i=new t.Button(this.getCtx(),this.createUpState(e),this.createDownState(e),this.createOverState(e),null,e);return i.setCallback(this.HandleExpandClick,this),this._isTouchDevice||i.addEvtListener(t.MouseEvent.MOUSEDOWN,this.HandleButtonDown,!1,this),i.setToggleEnabled(!0),i},t.ComboBox.prototype.createUpState=function(e){var i=this.getCtx(),n=new t.Rect(i,0,0,this._itemDim.w,this._itemDim.h,e+"_up");return n.setCornerRadius(t.ButtonLAFUtils.ROUND_RECT_ELLIPSE),n.setInvisibleFill(),n.addChild(t.ComboBox.DrawArrow(i,n.getWidth(),n.getHeight())),n},t.ComboBox.prototype.createOverState=function(e){var i=this.getCtx(),n=new t.Rect(i,0,0,this._itemDim.w,this._itemDim.h,e+"_up");return n.setCornerRadius(t.ButtonLAFUtils.ROUND_RECT_ELLIPSE),n.setSolidStroke(t.ButtonLAFUtils.BORDER_COLOR),n.setFill(new t.LinearGradientFill(0,[t.ButtonLAFUtils.GRADIENT_DARK,t.ButtonLAFUtils.GRADIENT_LIGHT])),n.addChild(t.ComboBox.DrawArrow(i,n.getWidth(),n.getHeight())),n},t.ComboBox.prototype.createDownState=function(e){var i=this.getCtx(),n=new t.Rect(i,0,0,this._itemDim.w,this._itemDim.h,e+"_up");return n.setSolidStroke(t.ButtonLAFUtils.BORDER_COLOR),n.setFill(new t.LinearGradientFill(0,[t.ButtonLAFUtils.GRADIENT_LIGHT,t.ButtonLAFUtils.GRADIENT_DARK])),n.setCornerRadius(t.ButtonLAFUtils.ROUND_RECT_ELLIPSE),n.addChild(t.ComboBox.DrawArrow(i,n.getWidth(),n.getHeight())),n},t.ComboBox.prototype.setStaticButtonStates=function(t,e,i){this._button.setUpState(t),this._button.setDownState(i),this._button.setOverState(e),this._bStaticButtonStates=!0},t.ComboBox.prototype.addItem=function(e,i,n,o,r){e.setMouseEnabled(!1),this._items.push(e),this._tooltips.push(i);var s=t.ButtonLAFUtils._getDimForced(this.getCtx(),n?n:e),a=this._getMaxItemDim();this.getCtx();s.w>a.w&&(a.w=s.w,this._itemDim.w=s.w+16),s.h>a.h&&(a.h=s.h,this._itemDim.h=s.h),this._maxItemDim=a;var l=null;n&&o&&r&&(l=[],l[t.Button.STATE_ENABLED]=n,l[t.Button.STATE_OVER]=o,l[t.Button.STATE_DOWN]=r),this._itemButtonStates.push(l),this._bStaticButtonStates||(this.removeChild(this._button),this._button=this.createButton(e.getId()),this.addChildAt(this._button,0),this.UpdateContentArea())},t.ComboBox.prototype.getItem=function(t){return this._items[t]},t.ComboBox.prototype.getItemCount=function(){return this._items.length},t.ComboBox.prototype.getItemIndex=function(t){for(var e=0;e<this.getItemCount();e++)if(this.getItem(e)===t)return e;return-1},t.ComboBox.prototype.getSelectedItem=function(){var t=this.getSelectedIndex();return t<0||t>this._items.length-1?null:this._items[t]},t.ComboBox.prototype.FireChangeEvent=function(e){var i=new t.ComboBoxEvent(t.ComboBoxEvent.SUBTYPE_ITEM_CHANGE,e);return this.FireListener(i),!0},t.ComboBox.prototype.HandleExpandClick=function(e){t.EventManager.consumeEvent(e),this._bRemoveDropdown&&this.RemoveDropdown();var i=this.getCtx();this._dropdown=this.createDropdown();var n=t.ButtonLAFUtils._getDimForced(i,this._dropdown);this.addChild(this._dropdown);var o,r=this._button.getDimensions();o=t.Agent.isRightToLeft(i)?-n.w+1*r.w/4:3*r.w/4,this._dropdown.setTranslate(o,3*r.h/4),this._button.setMouseEnabled(!1),this._button.setToggled(!0),this.FireListener(new t.ComboBoxEvent(t.ComboBoxEvent.SUBTYPE_SHOW_DROPDOWN));var s=i.getStage();s&&(this._isTouchDevice?s.addEvtListener(t.TouchEvent.TOUCHSTART,this.HandleStageMouseFocusChange,!0,this):s.addEvtListener(t.MouseEvent.MOUSEUP,this.HandleStageMouseFocusChange,!0,this))},t.ComboBox.prototype.HandleHideDropdownTimer=function(t){this.HideDropdown(),this._bStaticButtonStates||this.UpdateContentArea()},t.ComboBox.prototype.HandleStageMouseFocusChange=function(t){this._dropdownItemClickEvent=!1,this._outOfFocusCheckTimer.reset(),this._outOfFocusCheckTimer.start()},t.ComboBox.prototype.HandleOutOfFocusCheckTimer=function(t){this._dropdownItemClickEvent||(this._hideDropdownTimer.reset(),this._hideDropdownTimer.start())},t.ComboBox.prototype.createDropdown=function(){function e(t){var e={};return e.HandleClick=function(t){_.HandleDropdownItemClick(t)},e.HandleMouseDown=function(t){_.HandleButtonDown(t)},e.getTooltip=function(){return t},e}for(var i,n,o,r=this._styleMap?this._styleMap.comboBox:null,s=t.StyleUtils.getStyle(r,t.ControlPanel.CP_PADDING_TOP,0),a=t.StyleUtils.getStyle(r,t.ControlPanel.CP_PADDING_LEFT,0),l=t.StyleUtils.getStyle(r,t.ControlPanel.CP_PADDING_BOTTOM,0),h=t.StyleUtils.getStyle(r,t.ControlPanel.CP_PADDING_RIGHT,0),u=t.StyleUtils.getStyle(r,t.ControlPanel.CP_PADDING_INNER,0),d=s,c=this.getCtx(),p=new t.Container(c,"__dd"),_=this,g=0;g<this._items.length;g++)o=this._items[g],i=t.ButtonLAFUtils._getDimForced(c,o),n=new t.Container(c,"__it"+g),n.setTranslate(a,d),n.addChild(o),o.setMouseEnabled(!0),o.setCursor(t.SelectionEffectUtils.getSelectingCursor()),d+=i.h+u,this._eventManager&&this._eventManager.associate(o,e(this._tooltips[g])),p.addChild(n);var m=t.ButtonLAFUtils.drawDropdownShape(c,this._getMaxItemDim().w+a+h,d+l-u,r);m.addChild(p);var f=t.StyleUtils.getStyle(this._styleMap,t.CSSStyle.BORDER_COLOR,null),y=t.StyleUtils.getStyle(this._styleMap,t.ControlPanel.FRAME_ROLLOUT_ALPHA,1),v=t.StyleUtils.getStyle(this._styleMap,t.CSSStyle.BACKGROUND_COLOR,null),S=t.StyleUtils.getStyle(this._styleMap,t.ControlPanel.BG_ALPHA,1);return m.setSolidStroke(f,y),v&&m.setSolidFill(v,S),m},t.ComboBox.prototype.HandleButtonDown=function(e){t.EventManager.consumeEvent()},t.ComboBox.prototype.HandleDropdownItemClick=function(e){this._dropdownItemClickEvent=!0,this._hideDropdownTimer.stop(),t.EventManager.consumeEvent(e);var i,n=t.ComboBox.getRootDropdownItemSprite(e.target);if(this._dropdown&&n){var o=this._dropdown.getChildAt(0);o&&(i=o.getChildIndex(n))}this.HideDropdown(),this.setSelectedIndex(i)},t.ComboBox.getRootDropdownItemSprite=function(e){for(var i,n;e;){if(n=e.getId(),n&&e instanceof t.Container&&"__it"==n.substr(0,4)){i=e;break}e=e.getParent()}return i},t.ComboBox.prototype.HideDropdown=function(){this._dropdown&&(this._dropdown.setVisible(!1),this._button.setToggled(!1),this.FireListener(new t.ComboBoxEvent(t.ComboBoxEvent.SUBTYPE_HIDE_DROPDOWN)),this._bRemoveDropdown=!0);var e=this.getCtx().getStage();e&&(this._isTouchDevice?e.removeEvtListener(t.TouchEvent.TOUCHSTART,this.HandleStageMouseFocusChange,!0,this):e.removeEvtListener(t.MouseEvent.MOUSEUP,this.HandleStageMouseFocusChange,!0,this)),this._button.setMouseEnabled(!0)},t.ComboBox.prototype.RemoveDropdown=function(){this._bRemoveDropdown=!1,this._dropdown&&(this._dropdown.setVisible(!1),this._dropdown.getParent().removeChild(this._dropdown),this._dropdown=null)},t.ComboBox.prototype._getMaxItemDim=function(){return this._maxItemDim},t.ComboBox.prototype.getDimensions=function(){return null!=this._button?this._button.getDimensions():new t.Rectangle(0,0,0,0)},t.ComboBox.prototype.getButton=function(){return this._button},t.ComboBox.prototype.getItems=function(){return this._items},t.ComboBox.prototype.UpdateContentArea=function(){var e=!0,i=this.getSelectedIndex();if(this._itemButtonStates&&this._itemButtonStates.length>i){var n=this._itemButtonStates[i];n&&n.length>2&&(this._button.setUpState(n[t.Button.STATE_ENABLED]),this._button.setOverState(n[t.Button.STATE_OVER]),this._button.setDownState(n[t.Button.STATE_DOWN]),e=!1)}e&&(this._contentArea.getNumChildren()>0&&this._contentArea.removeChildAt(0),this._contentArea.addChild(this.getSelectedItem()))},t.ComboBox.DrawArrow=function(e,i,n){var o=4,r=[];r.push(i-12,n/2-o/2),r.push(i-4,n/2-o/2),r.push(i-8,n/2+o/2),r.push(i-12,n/2-o/2);var s=new t.Polygon(e,r,null);return s.setSolidStroke(t.ButtonLAFUtils.BORDER_COLOR),s.setSolidFill(t.ButtonLAFUtils.BORDER_COLOR),s.setMouseEnabled(!1),s},t.ComboBox.prototype.closeDropdown=function(){this.HideDropdown()},t.ComboBox.prototype.setEventManager=function(t){this._eventManager=t};var e=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)};t.Obj.createSubclass(e,t.Rect),e.prototype.Init=function(e,i,n,o,r,s){t.Rect.superclass.Init.call(this,e)},t.ComboBoxEvent=function(t,e){this.Init(t,e)},t.ComboBoxEvent.TYPE="comboBoxEvent",t.ComboBoxEvent.SUBTYPE_ITEM_CHANGE="cbItemChange",t.ComboBoxEvent.SUBTYPE_SHOW_DROPDOWN="cbShowDropdown",t.ComboBoxEvent.SUBTYPE_HIDE_DROPDOWN="cbHideDropdown",t.Obj.createSubclass(t.ComboBoxEvent,t.Obj),t.ComboBoxEvent.prototype.Init=function(e,i){this.type=t.ComboBoxEvent.TYPE,void 0===i&&(i=-1),this.subtype=e,this._index=i},t.ComboBoxEvent.prototype.getIndex=function(){return this._index};var i=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)};i.PAN_TIMER_INTERVAL=50,i.PAN_TIMER_ACCELERATE_COUNT=2*(1e3/i.PAN_TIMER_INTERVAL),t.Obj.createSubclass(i,t.Container),i.prototype.Init=function(e,n,o,r,s,a){i.superclass.Init.call(this,e),this._panTimer=new t.Timer(e,i.PAN_TIMER_INTERVAL,this.HandlePanTimer,this),this._tooltipManager=e.getTooltipManager(),this._bPanMouseDown=!1,this._panZoomCanvas=r,this._panCenter=new t.Point(20,20),s?this._controls=s:this._controls=t.ControlPanel.CONTROLS_ALL,n.addChild(o),o&&(this._panCenterSprite=o,this._panCenterSprite.setVisible(!1),this._panCenterSprite.addEvtListener(t.TouchEvent.TOUCHSTART,this.HandlePanCenterClick,!1,this),t.Agent.isTouchDevice()||(this._panCenterSprite.addEvtListener(t.MouseEvent.CLICK,this.HandlePanCenterClick,!1,this),this._panCenterSprite.addEvtListener(t.MouseEvent.MOUSEDOWN,this.HandlePanCenterDown,!1,this),this._panCenterSprite.addEvtListener(t.MouseEvent.MOUSEUP,this.HandlePanCenterUp,!1,this),this._panCenterSprite.addEvtListener(t.MouseEvent.MOUSEOVER,this.HandlePanCenterRollOver,!1,this),this._panCenterSprite.addEvtListener(t.MouseEvent.MOUSEOUT,this.HandlePanCenterRollOut,!1,this)),this._panCenterSprite.addEvtListener(t.MouseEvent.MOUSEMOVE,this.HandlePanCenterMouseMove,!1,this)),this._panButton=n,this._panButton.addEvtListener(t.TouchEvent.TOUCHSTART,this.HandlePanClick,!1,this),t.Agent.isTouchDevice()||(this._panButton.addEvtListener(t.MouseEvent.CLICK,this.HandlePanClick,!1,this),this._panButton.addEvtListener(t.MouseEvent.MOUSEDOWN,this.HandlePanMouseDown,!1,this),this._panButton.addEvtListener(t.MouseEvent.MOUSEUP,this.HandlePanMouseUp,!1,this),this._panButton.addEvtListener(t.MouseEvent.MOUSEOVER,this.HandlePanRollOver,!1,this),this._panButton.addEvtListener(t.MouseEvent.MOUSEOUT,this.HandlePanRollOut,!1,this),this._panButton.addEvtListener(t.MouseEvent.MOUSEMOVE,this.HandlePanMouseMove,!1,this)),this._panControl=t.ButtonLAFUtils.createPanButtonBackground(e,a),this._panControl.addChild(this._panButton),this.addChild(this._panControl)},i.prototype.HandlePanClick=function(e){t.EventManager.consumeEvent(e)},i.prototype.HandlePanMouseDown=function(e){t.EventManager.consumeEvent(e),this._bPanMouseDown=!0,this._panCenterSprite&&this._panCenterSprite.setVisible(!1);var i=this._panZoomCanvas.GetRelativeMousePosition(e),n=this._panButton.stageToLocal(i);this._rotatePanControlDirectionalArrow(n.x,n.y,this._panButton.downState),this._panMousePoint=new t.Point(n.x,n.y),this._panTimer.start(),this._panTimerCount=0},i.prototype.HandlePanMouseUp=function(e){this._bPanMouseDown&&(t.EventManager.consumeEvent(e),this._bPanMouseDown=!1,this._panCenterSprite&&this._panCenterSprite.setVisible(!0),this._panTimer.stop()),this._panButton._mouseOutHandler(e),this._tooltipManager.hideTooltip()},i.prototype.HandlePanRollOver=function(e){this._panCenterSprite&&this._panCenterSprite.setVisible(!0),this._tooltipManager.showTooltip(e.pageX,e.pageY,t.Bundle.getTranslatedString(t.Bundle.SUBCOMPONENT_PREFIX,"CONTROL_PANEL_PAN"),e.target)},i.prototype.HandlePanRollOut=function(t){this.HandlePanMouseUp(t),this._panCenterSprite&&this._panCenterSprite.setVisible(!1)},i.prototype.HandlePanMouseMove=function(e){t.EventManager.consumeEvent(e);var i=this._panZoomCanvas.GetRelativeMousePosition(e),n=this._panButton.stageToLocal(i);this._bPanMouseDown?(this._rotatePanControlDirectionalArrow(n.x,n.y,this._panButton.downState),this._panMousePoint=new t.Point(n.x,n.y)):this._rotatePanControlDirectionalArrow(n.x,n.y,this._panButton.overState)},i.prototype.HandlePanTimer=function(){if(this._bPanMouseDown){var t=this._panCenter.y-this._panMousePoint.y,e=this._panCenter.x-this._panMousePoint.x,n=Math.atan2(t,e),o=Math.cos(n),r=Math.sin(n),s=15;this._panTimerCount++,this._panTimerCount>i.PAN_TIMER_ACCELERATE_COUNT&&(s*=3),this._panZoomCanvas.panBy(s*o,s*r)}},i.prototype.HandlePanCenterClick=function(e){t.EventManager.consumeEvent(e),this._panZoomCanvas.zoomAndCenter()},i.prototype.HandlePanCenterDown=function(e){t.EventManager.consumeEvent(e)},i.prototype.HandlePanCenterUp=function(e){t.EventManager.consumeEvent(e),this._tooltipManager.hideTooltip()},i.prototype.HandlePanCenterRollOver=function(e){this._tooltipManager.showTooltip(e.pageX,e.pageY,t.Bundle.getTranslatedString(t.Bundle.SUBCOMPONENT_PREFIX,"CONTROL_PANEL_ZOOMANDCENTER"),e.target),this._panCenterSprite.setVisible(!0),t.EventManager.consumeEvent(e)},i.prototype.HandlePanCenterRollOut=function(e){this._tooltipManager.hideTooltip(),t.EventManager.consumeEvent(e)},i.prototype.HandlePanCenterMouseMove=function(e){t.EventManager.consumeEvent(e)},i.prototype._rotatePanControlDirectionalArrow=function(t,e,i){var n=t-this._panCenter.x,o=e-this._panCenter.y,r=Math.atan2(o,n);i.setRotation(r-Math.PI/4)};var n=function(t){this.Init(n.TYPE),this._subtype=t};t.Obj.createSubclass(n,t.BaseComponentEvent),n.TYPE="dvtPZCPExpand",n.SUBTYPE_SHOW="show",n.SUBTYPE_HIDE="hide",n.prototype.getSubType=function(){return this._subtype},t.ControlPanel=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.ControlPanel,t.Container),t.ControlPanel.STATE_COLLAPSED=1,t.ControlPanel.STATE_EXPANDED=2,t.ControlPanel.CONTROLS_ALL=16777215,t.ControlPanel.CONTROLS_ZOOM_SLIDER=1,t.ControlPanel.CONTROLS_CENTER_BUTTON=16,t.ControlPanel.CONTROLS_ZOOM_TO_FIT_BUTTON=256,t.ControlPanel.CONTROLS_ZOOM=4097,t.ControlPanel.DEFAULT_ZOOM_LEVELS=[0,.25,.5,.75,1],
t.ControlPanel.CONTROL_PANEL_BEHAVIOR_KEY="controlPanelBehavior",t.ControlPanel.BG_ALPHA="backgroundAlpha",t.ControlPanel.BG_ROLLOVER_ALPHA="backgroundHoverAlpha",t.ControlPanel.BG_DRAG_ALPHA="backgroundDragAlpha",t.ControlPanel.FRAME_ROLLOUT_ALPHA="borderAlpha",t.ControlPanel.FRAME_ROLLOVER_ALPHA="borderHoverAlpha",t.ControlPanel.FRAME_DRAG_ALPHA="borderDragAlpha",t.ControlPanel.CP_BUTTON_WIDTH="buttonWidth",t.ControlPanel.CP_BUTTON_HEIGHT="buttonHeight",t.ControlPanel.CP_OPEN_CLOSE_BUTTON_WIDTH="openCloseButtonWidth",t.ControlPanel.CP_TAB_SIZE="tabSize",t.ControlPanel.CP_PADDING_TOP="paddingTop",t.ControlPanel.CP_PADDING_SIDE="paddingSide",t.ControlPanel.CP_PADDING_BOTTOM="paddingBottom",t.ControlPanel.CP_PADDING_LEFT="paddingLeft",t.ControlPanel.CP_PADDING_RIGHT="paddingRight",t.ControlPanel.CP_PADDING_INNER="paddingInner",t.ControlPanel.CP_PANEL_DRAWER_STYLES="panelDrawerStyles",t.ControlPanel.CP_IMAGE_WIDTH="imageWidth",t.ControlPanel.CP_IMAGE_HEIGHT="imageHeight",t.ControlPanel.CP_CENTER_BUTTON_DISPLAYED="centerButtonDisplayed",t.ControlPanel.prototype.Init=function(e,i,n){t.ControlPanel.superclass.Init.call(this,e),this._bMouseDragPanning=!1,this._bMouseOver=!1,this._panZoomCanvas=i.getPanZoomCanvas(),this._controls=i.getDisplayedControls(),this._buttonImages=i.getResourcesMap(),this._tooltipManager=e.getTooltipManager(),this._styleMap=null,this._view=i,this._view&&(this._styleMap=this._view.getSubcomponentStyles(),this._styleMap[t.ControlPanel.CP_CENTER_BUTTON_DISPLAYED]||(this._controls=this._controls&~t.ControlPanel.CONTROLS_CENTER_BUTTON,this._view.setDisplayedControls(this._controls))),this._zoomLevels=t.ControlPanel.DEFAULT_ZOOM_LEVELS,this._bTransition=!1,this._bgAlpha=this._styleMap[t.ControlPanel.BG_ALPHA],this._eventManager=new r(e,null,i),this._eventManager.addRolloverType(t.ControlPanel),this._eventManager.addListeners(this),this._eventManager.associate(this,this),this._state=n,this.tabChildren=!1,this.setPixelHinting(!0)},t.ControlPanel.prototype.getState=function(){return this._state},t.ControlPanel.prototype.setZoomLevels=function(e){e||(e=t.ControlPanel.DEFAULT_ZOOM_LEVELS),this._zoomLevels=e},t.ControlPanel.prototype.getZoomLevels=function(){return this._zoomLevels},t.ControlPanel.prototype.mouseDragPanningStarted=function(){this._bMouseDragPanning=!0,this._background.setMouseEnabled(!1),this._frame.setMouseEnabled(!1),this._background.setAlpha(this._styleMap[t.ControlPanel.BG_DRAG_ALPHA]),this._frame.setAlpha(this._styleMap[t.ControlPanel.FRAME_DRAG_ALPHA])},t.ControlPanel.prototype.mouseDragPanningEnded=function(){this._bMouseDragPanning=!1,this._background.setMouseEnabled(!0),this._frame.setMouseEnabled(!0);var t=this._bMouseOver;t?this.HandleRollOver(null):this.HandleRollOut(null)},t.ControlPanel.prototype.rotateControlPanelDisplayObject=function(e){e.setRotation(Math.PI);var i=t.ButtonLAFUtils._getDimForced(this._context,e);e.setTranslate(e.getTranslateX()+i.w,e.getTranslateY()+i.h)},t.ControlPanel.prototype.isSingleHorzRow=function(){return!0},t.ControlPanel.prototype.getViewPanelHeight=function(){var e=0;e=this.isSingleHorzRow()?t.ControlPanelLAFUtils.getViewPanelHalfHeight():t.ControlPanelLAFUtils.getViewPanelHeight();var i=t.StyleUtils.getStyle(this._styleMap,t.ControlPanel.CP_TAB_SIZE,0);return Math.max(i,e)},t.ControlPanel.prototype.getViewPanelWidth=function(){return t.StyleUtils.getStyle(this._styleMap,t.ControlPanel.CP_TAB_SIZE,0)},t.ControlPanel.prototype.RenderCollapsed=function(){var e=this.getCtx(),i=new t.Container(e),n=this.getViewPanelHeight(),o=t.Agent.isRightToLeft(e);return this._background=t.ControlPanelLAFUtils.createEmptyViewClosedShape(e,n,this._styleMap,o),this._frame=t.ControlPanelLAFUtils.createEmptyViewClosedFrame(e,n,this._styleMap,o),this._collapsedDim=t.ButtonLAFUtils._getDimForced(e,this._frame),this._expandButton=t.ButtonLAFUtils.createExpandButton(this.getCtx(),this._buttonImages,this.getViewPanelHeight(),this._styleMap,o?t.ButtonLAFUtils.DIR_RIGHT:t.ButtonLAFUtils.DIR_LEFT),this._expandButton.setCallback(this.HandleExpandClick,this),this._expandButton.setTooltip(t.Bundle.getTranslatedString(t.Bundle.SUBCOMPONENT_PREFIX,"CONTROL_PANEL")),this._eventManager.associate(this._expandButton,this._expandButton),this._frame.addChild(this._expandButton),i.addChild(this._background),i.addChild(this._frame),i},t.ControlPanel.prototype._addZoomToFitButton=function(e,i){if(0!=(this._controls&t.ControlPanel.CONTROLS_ZOOM_TO_FIT_BUTTON)){var n=t.StyleUtils.getStyle(this._styleMap.vbar,t.ControlPanel.CP_PADDING_INNER,0),o=t.StyleUtils.getStyle(this._styleMap.vbar,t.ControlPanel.CP_PADDING_LEFT,0);this._zoomToFitButton=t.ButtonLAFUtils.createZoomToFitButton(this.getCtx(),this._buttonImages,this._styleMap),this._zoomToFitButton.setTranslate(o,this._zoomToFitButton.getTranslateY()+i),this._zoomToFitButton.setCallback(this.HandleZoomToFitClick,this),this._zoomToFitButton.setTooltip(t.Bundle.getTranslatedString(t.Bundle.SUBCOMPONENT_PREFIX,"CONTROL_PANEL_ZOOMTOFIT")),this._eventManager.associate(this._zoomToFitButton,this._zoomToFitButton);var r=t.ButtonLAFUtils._getDimForced(this.getCtx(),this._zoomToFitButton);e.addChild(this._zoomToFitButton),i+=r.h,i+=n}return i},t.ControlPanel.prototype._addZoomControls=function(e,i){var n=t.StyleUtils.getStyle(this._styleMap.vbar,t.ControlPanel.CP_PADDING_INNER,0),o=t.StyleUtils.getStyle(this._styleMap.vbar,t.ControlPanel.CP_PADDING_LEFT,0);if(0!=(this._controls&t.ControlPanel.CONTROLS_ZOOM)){this._zoomInButton=t.ButtonLAFUtils.createZoomInButton(this.getCtx(),this._buttonImages,this._styleMap),this._zoomInButton.setTranslate(o,this._zoomInButton.getTranslateY()+i),this._zoomInButton.setCallback(this.HandleZoomInClick,this),this._zoomInButton.setTooltip(t.Bundle.getTranslatedString(t.Bundle.SUBCOMPONENT_PREFIX,"CONTROL_PANEL_ZOOMIN")),this._eventManager.associate(this._zoomInButton,this._zoomInButton);var r=t.ButtonLAFUtils._getDimForced(this.getCtx(),this._zoomInButton);e.addChild(this._zoomInButton),i+=r.h+n,this._zoomOutButton=t.ButtonLAFUtils.createZoomOutButton(this.getCtx(),this._buttonImages,this._styleMap),this._zoomOutButton.setTranslate(o,this._zoomOutButton.getTranslateY()+i),this._zoomOutButton.setCallback(this.HandleZoomOutClick,this),this._zoomOutButton.setTooltip(t.Bundle.getTranslatedString(t.Bundle.SUBCOMPONENT_PREFIX,"CONTROL_PANEL_ZOOMOUT")),this._eventManager.associate(this._zoomOutButton,this._zoomOutButton),r=t.ButtonLAFUtils._getDimForced(this.getCtx(),this._zoomOutButton),e.addChild(this._zoomOutButton),i+=r.h,this.enableZoomControls()}return i},t.ControlPanel.prototype._createVBarBackground=function(e,i,n,o){var r=this.getCtx();if(i){var s=i.getNumChildren(),a=s>1||null==this._zoomToFitButton||n>1||n>0&&1==s,l=null;this._styleMap&&this._styleMap[t.ControlPanel.CP_PANEL_DRAWER_STYLES]&&(l=n>0?t.ControlPanelLAFUtils.OPEN_TOP:t.ControlPanelLAFUtils.OPEN_RIGHT);var h=t.ButtonLAFUtils._getDimForced(r,e);o+=4;var u=a?o:Math.max(h.h,o),d=t.StyleUtils.getStyle(this._styleMap.vbar,t.ControlPanel.CP_PADDING_BOTTOM,0);u+=d;var c=t.ControlPanelLAFUtils.renderEmptyZoomShape(r,u,this._styleMap,l,this.getViewPanelHeight()),p=t.ControlPanelLAFUtils.renderEmptyZoomFrame(r,u,a,this._styleMap,l,this.getViewPanelHeight());c.setTranslate(i.getTranslateX(),i.getTranslateY()),this._background.addChild(c),i.addChildAt(p,0)}return o},t.ControlPanel.prototype._positionVBarElements=function(e,i,n){var o=this.getCtx(),r=t.Agent.isRightToLeft(o),s=t.StyleUtils.getStyle(this._styleMap,t.ControlPanel.CP_OPEN_CLOSE_BUTTON_WIDTH,0);if(this._additionalContent||0!=(this._controls&t.ControlPanel.CONTROLS_CENTER_BUTTON)){if(r&&i){var a=t.ButtonLAFUtils._getDimForced(o,e),l=this.getViewPanelWidth();e.setTranslateX(0),i.setTranslateX(a.w+a.x-l)}}else if(r)e.setTranslateX(0-e.getTranslateX()),e.setTranslateY(0),i&&(e.setTranslateX(e.getTranslateX()-s),i.setTranslateY(0));else if(i){var h=this.getViewPanelWidth();i.setTranslate(0,0),e.setTranslate(e.getTranslateX()+h,0)}else e.setTranslate(e.getTranslateX(),0)},t.ControlPanel.prototype._createHBarPanControl=function(e,i){var n=this.getCtx(),o=this.isSingleHorzRow();return 0!=(this._controls&t.ControlPanel.CONTROLS_CENTER_BUTTON)&&(this._panControl=t.ButtonLAFUtils.createPanControl(n,this._panZoomCanvas,this._controls,this._buttonImages,this._styleMap),o&&(this._panControlUnderlay=t.ButtonLAFUtils.createPanButtonUnderlay(n,this._styleMap),this._panControlUnderlay2=t.ButtonLAFUtils.createPanButtonUnderlay(n,this._styleMap),e.addChild(this._panControlUnderlay2),e.addChild(this._panControlUnderlay)),e.addChild(this._panControl),i++),i},t.ControlPanel.prototype._createHBarAdditionalContent=function(e,i){var n=this.getCtx();return this._additionalContent=new t.Container(n),this.PopulateHorzContentBar(this._additionalContent),this._additionalContent.getNumChildren()>0?(e.addChild(this._additionalContent),i++):this._additionalContent=null,i},t.ControlPanel.prototype._createHBarCollapseButton=function(e){this._collapseButton=t.ButtonLAFUtils.createCollapseButton(this.getCtx(),this._buttonImages,this.getViewPanelHeight(),this._styleMap,t.Agent.isRightToLeft(this.getCtx())?t.ButtonLAFUtils.DIR_RIGHT:t.ButtonLAFUtils.DIR_LEFT),this._collapseButton.setCallback(this.HandleCollapseClick,this),this._collapseButton.setTooltip(t.Bundle.getTranslatedString(t.Bundle.SUBCOMPONENT_PREFIX,"CONTROL_PANEL")),this._eventManager.associate(this._collapseButton,this._collapseButton),e.addChild(this._collapseButton)},t.ControlPanel.prototype._positionHBarElements=function(e,i){var n=this._context,o=null,r=t.StyleUtils.getStyle(this._styleMap,t.ControlPanel.CP_OPEN_CLOSE_BUTTON_WIDTH,0),s=t.StyleUtils.getStyle(this._styleMap,t.ControlPanel.CP_BUTTON_WIDTH,0),a=this.getViewPanelWidth(),l=this.getViewPanelHeight(),h=t.StyleUtils.getStyle(this._styleMap.hbar,t.ControlPanel.CP_PADDING_LEFT,0),u=t.StyleUtils.getStyle(this._styleMap.hbar,t.ControlPanel.CP_PADDING_INNER,0);if(e){if(this._collapseButton.setTranslateX(0),i+=r,this._additionalContent&&(o=t.ButtonLAFUtils._getDimForced(n,this._additionalContent),i+=u,this._additionalContent.setTranslate(i,(l-o.h)/2),i+=Math.max(o.w,s)),this._panControl){i+=u;var d=3.5;this._panControl.setTranslate(i,d),this._panControlUnderlay&&this._panControlUnderlay.setTranslate(i,d),this._panControlUnderlay2&&this._panControlUnderlay2.setTranslate(i,d),o=t.ButtonLAFUtils._getDimForced(n,this._panControl),i+=o.w}i+=h}else{if(this._panControl){i+=h;var c=h,d=3.5;this._panControl.setTranslate(c,d),this._panControlUnderlay&&this._panControlUnderlay.setTranslate(c,d),this._panControlUnderlay2&&this._panControlUnderlay2.setTranslate(c,d),o=t.ButtonLAFUtils._getDimForced(n,this._panControl),i+=u+o.w,i+=1}this._additionalContent&&(o=t.ButtonLAFUtils._getDimForced(n,this._additionalContent),0==i&&(i+=h),this._additionalContent.setTranslate(i,(l-o.h)/2),i+=o.w,i+=u,i=Math.max(i,a)),this._collapseButton.setTranslateX(i),i+=r}return i},t.ControlPanel.prototype._createHBarBackground=function(e,i,n,o,r){var s=this._context,a=t.StyleUtils.getStyle(this._styleMap,t.ControlPanel.CP_OPEN_CLOSE_BUTTON_WIDTH,0),l=t.StyleUtils.getStyle(this._styleMap,t.ControlPanel.CP_TAB_SIZE,0),h=t.StyleUtils.getStyle(this._styleMap,t.ControlPanel.CP_PANEL_DRAWER_STYLES,null),u=h?r:r-a,d=this.getViewPanelHeight(),c=0,p=0;if(h?h&&0==n&&(p=o?-l:l):(c=o?a:0,p=o?a:0),n>0||h){var _=null,g=null,m=parseInt(t.StyleUtils.getStyle(this._styleMap,t.CSSStyle.BORDER_RADIUS,0));if(h){var f=n>0&&null!=i?t.ControlPanelLAFUtils.OPEN_BOTTOM:t.ControlPanelLAFUtils.OPEN_LEFT;_=t.ControlPanelLAFUtils.makeViewOpenShapeHelperOpenSide(s,m,u,d,f,l),g=t.ControlPanelLAFUtils.makeViewOpenShapeHelperOpenSide(s,m,u,d,f,l)}else _=t.ControlPanelLAFUtils.createEmptyViewOpenShape(s,u,this.getViewPanelHeight(),!o,this._styleMap),g=t.ControlPanelLAFUtils.createEmptyViewOpenShape(s,u,this.getViewPanelHeight(),!o,this._styleMap);_.setSolidStroke(t.StyleUtils.getStyle(this._styleMap,t.CSSStyle.BORDER_COLOR,null)),_.setFill(null),_.setTranslate(e.getTranslateX()+c,e.getTranslateY()),e.addChildAt(_,0),g.setSolidFill(t.StyleUtils.getStyle(this._styleMap,t.CSSStyle.BACKGROUND_COLOR,null)),g.setTranslate(e.getTranslateX()+p,e.getTranslateY()),this._background.addChild(g)}},t.ControlPanel.prototype.RenderExpanded=function(){var e=this.getCtx(),i=new t.Container(e);this._background=new t.Container(e),this._frame=new t.Container(e),i.addChild(this._background),i.addChild(this._frame);var n=t.Agent.isRightToLeft(e),o=0,r=new t.Container(e),s=0;s=this._createHBarPanControl(r,s),this._createHBarCollapseButton(r),s=this._createHBarAdditionalContent(r,s),o=this._positionHBarElements(n,o);var a=null,l=this._getVBarButtonsOffsetY(s);return this.isSingleHorzRow()&&0!=(this._controls&t.ControlPanel.CONTROLS_CENTER_BUTTON)&&(l+=t.ControlPanelLAFUtils.getViewPanelHeight()-this.getViewPanelHeight()),0==(this._controls&t.ControlPanel.CONTROLS_ZOOM_TO_FIT_BUTTON)&&0==(this._controls&t.ControlPanel.CONTROLS_ZOOM)||(a=new t.Container(e),a.setTranslateY(r.getTranslateY()+this.getViewPanelHeight()),l=this._addZoomToFitButton(a,l),l=this._addZoomControls(a,l),this._frame.addChild(a)),this._createHBarBackground(r,a,s,n,o),this._frame.addChild(r),this._positionVBarElements(r,a,l),this._createVBarBackground(r,a,s,l),this._expandedDim=t.ButtonLAFUtils._getDimForced(e,i),i},t.ControlPanel.prototype.PopulateHorzContentBar=function(t){},t.ControlPanel.prototype.toggleExpandCollapse=function(){this._bTransition||(this._state===t.ControlPanel.STATE_EXPANDED?this._doCollapse():this._state===t.ControlPanel.STATE_COLLAPSED&&this._doExpand())},t.ControlPanel.prototype.getCollapsedDim=function(){return this._collapsedDim},t.ControlPanel.prototype.getExpandedDim=function(){return this._expandedDim},t.ControlPanel.prototype.HandleExpandClick=function(e){t.EventManager.consumeEvent(e),this._bTransition||(this._doExpand(),this._tooltipManager.hideTooltip())},t.ControlPanel.prototype._doExpand=function(){this._bTransition=!0,this.setMouseEnabled(!1);var t=this.RenderExpanded();this.addChild(t),this._applyAlphasForMouse(),this.transitionExpand(this.getChildAt(0),t),this.fireExpandEvent()},t.ControlPanel.prototype._applyAlphasForMouse=function(){var t=!1,e=this.getCtx().getStage();e&&(t=!0),t?this._applyAlphasRollover():this._applyAlphasRollout()},t.ControlPanel.prototype.HandleCollapseClick=function(e){t.EventManager.consumeEvent(e),this._bTransition||this._doCollapse()},t.ControlPanel.prototype._doCollapse=function(){this._bTransition=!0;var t=this.RenderCollapsed();this.addChild(t),this._applyAlphasForMouse(),this.transitionCollapse(this.getChildAt(0),t),this.fireCollapseEvent()},t.ControlPanel.prototype.transitionExpand=function(e,i){var n=e.getDimensions(),o=t.StyleUtils.getStyle(this._styleMap,t.ControlPanel.CP_OPEN_CLOSE_BUTTON_WIDTH,0);if(n&&0!=n.w){var r=i.getDimensions(),s=new t.Animator(this.getCtx(),.25);if(e.setAlpha(1),i.setAlpha(0),s.addProp(t.Animator.TYPE_NUMBER,e,e.getAlpha,e.setAlpha,0),s.addProp(t.Animator.TYPE_NUMBER,i,i.getAlpha,i.setAlpha,1),i.setScaleX(n.w/r.w),s.addProp(t.Animator.TYPE_NUMBER,i,i.getScaleX,i.setScaleX,1),t.Agent.isRightToLeft(this.getCtx())){i.setTranslateX(e.getTranslateX());var a=r.w+r.x;s.addProp(t.Animator.TYPE_NUMBER,i,i.getTranslateX,i.setTranslateX,e.getTranslateX()+o-a)}i.setScaleY(n.h/r.h),s.addProp(t.Animator.TYPE_NUMBER,i,i.getScaleY,i.setScaleY,1),s.setOnEnd(function(){e.getParent().removeChild(e),this._bTransition=!1,this.setMouseEnabled(!0),this._state=t.ControlPanel.STATE_EXPANDED},this),s.play()}else this._state=t.ControlPanel.STATE_EXPANDED,e.getParent().removeChild(e),this.PositionExpanded(i)},t.ControlPanel.prototype.PositionExpanded=function(e){var i;if(t.Agent.isRightToLeft(this.getCtx())){var n=t.StyleUtils.getStyle(this._styleMap,t.ControlPanel.CP_OPEN_CLOSE_BUTTON_WIDTH,0),o=t.DisplayableUtils.getDimensionsForced(this.getCtx(),e),r=Math.floor(o.w+o.x);i=n-r}else i=0;e.setTranslate(i,0)},t.ControlPanel.prototype.transitionCollapse=function(e,i){var n=new t.Animator(this.getCtx(),.25);e.setAlpha(1),i.setAlpha(0),n.addProp(t.Animator.TYPE_NUMBER,e,e.getAlpha,e.setAlpha,0),n.addProp(t.Animator.TYPE_NUMBER,i,i.getAlpha,i.setAlpha,1);var o=this.getCollapsedDim(),r=this.getExpandedDim();n.addProp(t.Animator.TYPE_NUMBER,e,e.getScaleX,e.setScaleX,o.w/r.w),t.Agent.isRightToLeft(this.getCtx())&&n.addProp(t.Animator.TYPE_NUMBER,e,e.getTranslateX,e.setTranslateX,i.getTranslateX()),n.addProp(t.Animator.TYPE_NUMBER,e,e.getScaleY,e.setScaleY,o.h/r.h),n.setOnEnd(function(){e.getParent().removeChild(e),this._bTransition=!1,this._state=t.ControlPanel.STATE_COLLAPSED},this),n.play()},t.ControlPanel.prototype.fireExpandEvent=function(){var t=new n(n.SUBTYPE_SHOW);return this.FireListener(t),!0},t.ControlPanel.prototype.fireCollapseEvent=function(){var t=new n(n.SUBTYPE_HIDE);return this.FireListener(t),!0},t.ControlPanel.prototype.HandleRollOver=function(t){this._bMouseOver=!0,this._bMouseDragPanning||this._applyAlphasRollover()},t.ControlPanel.prototype.HandleRollOut=function(t){this._bMouseOver=!1,this._bMouseDragPanning||this._applyAlphasRollout()},t.ControlPanel.prototype._applyAlphasRollover=function(){this._background.setAlpha(this._styleMap[t.ControlPanel.BG_ROLLOVER_ALPHA]),this._frame.setAlpha(this._styleMap[t.ControlPanel.FRAME_ROLLOVER_ALPHA]),this._panControlUnderlay&&this._panControlUnderlay.setAlpha(this._styleMap[t.ControlPanel.BG_ROLLOVER_ALPHA])},t.ControlPanel.prototype._applyAlphasRollout=function(){this._background.setAlpha(this._bgAlpha),this._frame.setAlpha(this._styleMap[t.ControlPanel.FRAME_ROLLOUT_ALPHA]),this._panControlUnderlay&&this._panControlUnderlay.setAlpha(this._bgAlpha)},t.ControlPanel.prototype.isPanControlShown=function(){return(this._controls&t.ControlPanel.CONTROLS_CENTER_BUTTON)>0},t.ControlPanel.prototype.getDimensions=function(){return this._dim||(this._dim=t.ControlPanel.superclass.getDimensions.call(this)),this._dim},t.ControlPanel.prototype.renderComponent=function(){var e;this._state==t.ControlPanel.STATE_COLLAPSED?e=this.RenderCollapsed():(e=this.RenderExpanded(),this.PositionExpanded(e)),this._background.setAlpha(this._bgAlpha),this._frame.setAlpha(this._styleMap[t.ControlPanel.FRAME_ROLLOUT_ALPHA]),this.addChild(e)},t.ControlPanel.prototype.getButtonImages=function(){return this._buttonImages},t.ControlPanel.prototype._getVBarButtonsOffsetY=function(e){return this._controls&t.ControlPanel.CONTROLS_CENTER_BUTTON||this._styleMap&&this._styleMap[t.ControlPanel.CP_PANEL_DRAWER_STYLES]&&0==e?t.StyleUtils.getStyle(this._styleMap.vbar,t.ControlPanel.CP_PADDING_TOP,0):0},t.ControlPanel.prototype.enableZoomControls=function(){var t=this._panZoomCanvas.getZoom(),e=this._panZoomCanvas.getNextZoomLevel(t),i=this._panZoomCanvas.getPrevZoomLevel(t);this._zoomInButton&&this._zoomInButton.setEnabled(t!=e),this._zoomOutButton&&this._zoomOutButton.setEnabled(t!=i)},t.ControlPanel.prototype.enableZoomInControl=function(t){this._zoomInButton&&this._zoomInButton.setEnabled(t)},t.ControlPanel.prototype.enableZoomOutControl=function(t){this._zoomOutButton&&this._zoomOutButton.setEnabled(t)},t.ControlPanel.prototype.HandleZoomInClick=function(e){var i=this._panZoomCanvas.getZoom(),n=this._panZoomCanvas.getNextZoomLevel(i),o=new t.Animator(this.getCtx(),this._panZoomCanvas.getAnimationDuration());this._panZoomCanvas.zoomTo(n,void 0,void 0,o),o.play()},t.ControlPanel.prototype.HandleZoomOutClick=function(e){var i=this._panZoomCanvas.getZoom(),n=this._panZoomCanvas.getPrevZoomLevel(i),o=this.getCtx(),r=new t.Animator(o,this._panZoomCanvas.getAnimationDuration());this._panZoomCanvas.zoomTo(n,void 0,void 0,r),r.play()},t.ControlPanel.prototype.HandleZoomToFitClick=function(e){var i=new t.Animator(this.getCtx(),this._panZoomCanvas.getAnimationDuration());this._panZoomCanvas.zoomToFit(i),i.play()},t.ControlPanel.prototype.getEventManager=function(){return this._eventManager},t.ControlPanel.prototype.isDisclosed=function(){return this.getState()==t.ControlPanel.STATE_EXPANDED},t.ControlPanel.prototype.getActionDisplayable=function(t,e){if("disclosure"==t)return this.isDisclosed()?this._collapseButton:this._expandButton;if(this.isDisclosed()){if("zoomToFit"==t&&this._zoomToFitButton&&this._zoomToFitButton.isEnabled())return this._zoomToFitButton;if("zoomIn"==t&&this._zoomInButton&&this._zoomInButton.isEnabled())return this._zoomInButton;if("zoomOut"==t&&this._zoomOutButton&&this._zoomOutButton.isEnabled())return this._zoomOutButton}return null};var o=new Object;t.Obj.createSubclass(o,t.Obj),o.SKIN_ALTA={"fill-type":"solid",backgroundAlpha:1,backgroundDragAlpha:1,borderDragAlpha:1,panelDrawerStyles:!0,buttonWidth:42,buttonHeight:42,buttonRadius:0,openCloseButtonWidth:42,tabSize:42,paddingTop:15,paddingSide:-1,imageWidth:24,imageHeight:24,centerButtonDisplayed:!1,scrollbarBackground:"linear-gradient(bottom, #dce2e7 0%, #f8f8f8 8%)",scrollbarBorderColor:"#dce2e7",scrollbarHandleColor:"#abb0b4",scrollbarHandleHoverColor:"#333333",scrollbarHandleActiveColor:"#333333",comboBox:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingInner:0,itemHeight:30,imagePadding:0,itemPadding:10},vbar:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingInner:0},hbar:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingInner:0}},o.SKIN_SKYROS={"fill-type":"solid"},o.DEFAULT={"fill-type":"gradient","border-color":"#ffffff","background-color":"#ffffff","border-radius":6,backgroundAlpha:.5,backgroundHoverAlpha:1,backgroundDragAlpha:.5,borderAlpha:1,borderHoverAlpha:1,borderDragAlpha:.5,tabSize:26,buttonWidth:22,buttonHeight:22,buttonRadius:3,paddingTop:5,paddingSide:5,imageWidth:22,imageHeight:20,openCloseButtonWidth:10,centerButtonDisplayed:!0,comboBox:{paddingTop:2,paddingBottom:6,paddingLeft:3,paddingRight:3,paddingInner:2,itemHeight:22,radius:4,imagePadding:2,itemPadding:7},vbar:{paddingTop:2.5,paddingBottom:2.5,paddingLeft:2,paddingRight:2,paddingInner:2},hbar:{paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:3,paddingInner:2}},o.calcOptions=function(e){var i=o._getDefaults(e);return e?t.JsonUtils.merge(e,i):i},o._getDefaults=function(e){var i=null;return i=e&&"skyros"===e.skin?t.JsonUtils.merge(o.SKIN_SKYROS,o.DEFAULT):e&&"alta"===e.skin?t.JsonUtils.merge(o.SKIN_ALTA,o.DEFAULT):t.JsonUtils.clone(o.DEFAULT)};var r=function(t,e,i){this.Init(t,e,i)};t.Obj.createSubclass(r,t.EventManager),r.prototype.OnMouseDown=function(t){var e=this.GetLogicalObject(this.GetCurrentTargetForEvent(t));r.superclass.OnMouseDown.call(this,t),e&&(e.HandleMouseDown&&e.HandleMouseDown(t),t.stopPropagation())},r.prototype.OnMouseUp=function(t){var e=this.GetLogicalObject(this.GetCurrentTargetForEvent(t));r.superclass.OnMouseUp.call(this,t),e&&(e.HandleMouseUp&&e.HandleMouseUp(t),t.stopPropagation())},r.prototype.OnMouseOut=function(t){var e=this.GetLogicalObject(this.GetCurrentTargetForEvent(t));r.superclass.OnMouseOut.call(this,t),e&&(e.HandleMouseOut&&e.HandleMouseOut(t),t.stopPropagation())},r.prototype.OnClick=function(t){var e=this.GetLogicalObject(this.GetCurrentTargetForEvent(t));r.superclass.OnClick.call(this,t),e&&(e.HandleClick&&e.HandleClick(t),t.stopPropagation())},r.prototype.OnRollOver=function(t){r.superclass.OnRollOver.call(this,t);var e=this.GetLogicalObject(this.GetCurrentTargetForEvent(t));e&&e.HandleRollOver&&e.HandleRollOver(t)},r.prototype.OnRollOut=function(t){r.superclass.OnRollOut.call(this,t);var e=this.GetLogicalObject(this.GetCurrentTargetForEvent(t));e&&e.HandleRollOut&&e.HandleRollOut(t)},r.prototype.OnComponentTouchClick=function(t){var e=this.GetLogicalObject(this.GetCurrentTargetForEvent(t));e&&(e.HandleClick&&e.HandleClick(t),t.stopPropagation())},r.prototype.HandleImmediateTouchStartInternal=function(e){e.blockTouchHold(),t.EventManager.consumeEvent(e)},t.ControlPanelLAFUtils={},t.Obj.createSubclass(t.ControlPanelLAFUtils,t.Obj),t.ControlPanelLAFUtils.OPEN_TOP="top",t.ControlPanelLAFUtils.OPEN_RIGHT="right",t.ControlPanelLAFUtils.OPEN_LEFT="left",t.ControlPanelLAFUtils.OPEN_BOTTOM="bottom",t.ControlPanelLAFUtils.VIEW_PANEL_HEIGHT=47,t.ControlPanelLAFUtils.VIEW_PANEL_HALF_HEIGHT=26,t.ControlPanelLAFUtils.SIN_PI_4=Math.sin(Math.PI/4),t.ControlPanelLAFUtils.TAN_PI_8=Math.tan(Math.PI/8),t.ControlPanelLAFUtils.getViewPanelHeight=function(){return t.ControlPanelLAFUtils.VIEW_PANEL_HEIGHT},t.ControlPanelLAFUtils.getViewPanelHalfHeight=function(){return t.ControlPanelLAFUtils.VIEW_PANEL_HALF_HEIGHT},t.ControlPanelLAFUtils.createEmptyViewOpenShape=function(e,i,n,o,r){i||(i=86),n||(n=47),void 0===o&&(o=!0);var s=parseInt(t.StyleUtils.getStyle(r,t.CSSStyle.BORDER_RADIUS,0)),a=i-2*s,l=n-2*s,h=0,u=0,d=t.ControlPanelLAFUtils.makeViewOpenShapeHelper(e,s,a,l,h,u,o);return d},t.ControlPanelLAFUtils.makeViewOpenShapeHelper=function(e,i,n,o,r,s,a){var l=n+i,h=o+i,u=t.PathUtils.moveTo(l+i,h+i);return u+=t.PathUtils.lineTo(l-n,h+i),l-=n,h=h,u+=t.PathUtils.lineTo(l-i,h+i),u+=t.PathUtils.lineTo(l-i,h-o),l=l,h-=o,a?(u+=t.PathUtils.quadTo(-i+l,-t.ControlPanelLAFUtils.TAN_PI_8*i+h,-t.ControlPanelLAFUtils.SIN_PI_4*i+l,-t.ControlPanelLAFUtils.SIN_PI_4*i+h)+t.PathUtils.quadTo(-t.ControlPanelLAFUtils.TAN_PI_8*i+l,-i+h,l,-i+h)+t.PathUtils.lineTo(l,-i+h),u+=t.PathUtils.lineTo(l+n+i,-i+h),l+=n,h=h,u+=t.PathUtils.lineTo(l+i,h+o)):(u+=t.PathUtils.lineTo(l-i,-i+h),u+=t.PathUtils.lineTo(l+n,-i+h),l+=n,h=h,u+=t.PathUtils.quadTo(t.ControlPanelLAFUtils.TAN_PI_8*i+l,-i+h,t.ControlPanelLAFUtils.SIN_PI_4*i+l,-t.ControlPanelLAFUtils.SIN_PI_4*i+h)+t.PathUtils.quadTo(i+l,-t.ControlPanelLAFUtils.TAN_PI_8*i+h,i+l,h)+t.PathUtils.lineTo(l+i,h+o)),u+=t.PathUtils.closePath(),new t.Path(e,u)},t.ControlPanelLAFUtils.createEmptyViewClosedShape=function(e,i,n,o){i||(i=47);var r=parseInt(t.StyleUtils.getStyle(n,t.CSSStyle.BORDER_RADIUS,0)),s=t.StyleUtils.getStyle(n,t.ControlPanel.CP_OPEN_CLOSE_BUTTON_WIDTH,0),a=Math.max(i,t.StyleUtils.getStyle(n,t.ControlPanel.CP_BUTTON_HEIGHT,i)),l=t.ButtonLAFUtils.GetButtonPathCommands(s,a,r,o);l=l.concat("Z");var h=new t.Path(e,l,"cls_shape"),u=t.StyleUtils.getStyle(n,t.PanelDrawer.TAB_BG_COLOR_INACTIVE,null);return u||(u=t.StyleUtils.getStyle(n,t.CSSStyle.BACKGROUND_COLOR,null)),h.setSolidFill(u),h},t.ControlPanelLAFUtils.createEmptyViewClosedFrame=function(e,i,n,o){i||(i=47);var r=parseInt(t.StyleUtils.getStyle(n,t.CSSStyle.BORDER_RADIUS,0)),s=t.StyleUtils.getStyle(n,t.ControlPanel.CP_OPEN_CLOSE_BUTTON_WIDTH,0),a=Math.max(i,t.StyleUtils.getStyle(n,t.ControlPanel.CP_BUTTON_HEIGHT,i)),l=t.ButtonLAFUtils.GetButtonPathCommands(s,a,r,o);l=l.concat("Z");var h=new t.Path(e,l,"cls_shape");return h.setSolidStroke(t.StyleUtils.getStyle(n,t.CSSStyle.BORDER_COLOR,null)),h.setFill(null),h},t.ControlPanelLAFUtils.renderEmptyZoomShape=function(e,i,n,o,r){i||(i=137);var s,a=parseInt(t.StyleUtils.getStyle(n,t.CSSStyle.BORDER_RADIUS,0)),l=t.StyleUtils.getStyle(n,t.ControlPanel.CP_TAB_SIZE,0),h=l-2*a,u=i+7-2*a,d=0,c=0;return s=o&&r?t.ControlPanelLAFUtils.makeZoomShapeHelperOpenSide(e,a,l,i,o,r):t.ControlPanelLAFUtils.makeZoomShapeHelper(e,a,h,u,d,c),s.setSolidFill(t.StyleUtils.getStyle(n,t.CSSStyle.BACKGROUND_COLOR,null)),s},t.ControlPanelLAFUtils.renderEmptyZoomFrame=function(e,i,n,o,r,s){i||(i=137),n||(n=!0);var a=parseInt(t.StyleUtils.getStyle(o,t.CSSStyle.BORDER_RADIUS,0)),l=t.StyleUtils.getStyle(o,t.ControlPanel.CP_TAB_SIZE,0),h=l-2*a,u=i+7-2*a,d=0,c=0,p=null;return p=r&&s?t.ControlPanelLAFUtils.makeZoomShapeHelperOpenSide(e,a,l,i,r,s):t.ControlPanelLAFUtils.makeZoomShapeHelper(e,a,h,u,d,c,n),p.setSolidStroke(t.StyleUtils.getStyle(o,t.CSSStyle.BORDER_COLOR,null)),p.setFill(null),p},t.ControlPanelLAFUtils.makeZoomShapeHelper=function(e,i,n,o,r,s,a){a||(a=!0);var l=n+i,h=o,u=t.PathUtils.moveTo(l+i,h);return u+=a?t.PathUtils.quadTo(i+l,t.ControlPanelLAFUtils.TAN_PI_8*i+h,t.ControlPanelLAFUtils.SIN_PI_4*i+l,t.ControlPanelLAFUtils.SIN_PI_4*i+h)+t.PathUtils.quadTo(t.ControlPanelLAFUtils.TAN_PI_8*i+l,i+h,l,i+h)+t.PathUtils.lineTo(l,i+h):t.PathUtils.lineTo(l+i,h+i),u+=t.PathUtils.lineTo(l-n,i+h),l-=n,h=h,u+=t.PathUtils.quadTo(-t.ControlPanelLAFUtils.TAN_PI_8*i+l,i+h,-t.ControlPanelLAFUtils.SIN_PI_4*i+l,t.ControlPanelLAFUtils.SIN_PI_4*i+h)+t.PathUtils.quadTo(-i+l,t.ControlPanelLAFUtils.TAN_PI_8*i+h,-i+l,h)+t.PathUtils.lineTo(-i+l,h)+t.PathUtils.lineTo(-i+l,h-o),l=l,h-=o,u+=t.PathUtils.lineTo(l+n+i,h)+t.PathUtils.lineTo(l+n+i,h+o)+t.PathUtils.closePath(),new t.Path(e,u)},t.ControlPanelLAFUtils.makeZoomShapeHelperOpenSide=function(e,i,n,o,r,s){var a=t.ControlPanelLAFUtils.GetShapePathCommands(e,n,o,i,r,s);return new t.Path(e,a)},t.ControlPanelLAFUtils.makeViewOpenShapeHelperOpenSide=function(e,i,n,o,r,s){var a=t.ControlPanelLAFUtils.GetShapePathCommands(e,n,o,i,r,s);return new t.Path(e,a)},t.ControlPanelLAFUtils.GetShapePathCommands=function(e,i,n,o,r,s){var a,l=t.Agent.isRightToLeft(e);return r!=t.ControlPanelLAFUtils.OPEN_TOP||l||(a=["M",i,0,"L",i,n-o,"A",o,o,0,0,1,i-o,n,"L",0,n,"L",0,0]),r==t.ControlPanelLAFUtils.OPEN_TOP&&l?a=["M",i,0,"L",i,n,"L",o,n,"A",o,o,0,0,1,0,n-o,"L",0,0]:r!=t.ControlPanelLAFUtils.OPEN_RIGHT||l?r==t.ControlPanelLAFUtils.OPEN_RIGHT&&l?a=["M",0,0,"L",i,0,"L",i,n,"L",o,n,"A",o,o,0,0,1,0,n-o,"L",0,s]:r!=t.ControlPanelLAFUtils.OPEN_LEFT||l?r==t.ControlPanelLAFUtils.OPEN_LEFT&&l?a=["M",i,n,"L",o,n,"A",o,o,0,0,1,0,n-o,"L",0,o,"A",o,o,0,0,1,o,0,"L",i,0]:r!=t.ControlPanelLAFUtils.OPEN_BOTTOM||l?r==t.ControlPanelLAFUtils.OPEN_BOTTOM&&l&&(a=["M",i,n,"L",i,0,"L",o,0,"A",o,o,0,0,0,0,o,"L",0,n-o,"A",o,o,0,0,0,o,n,"L",i-s,n]):a=["M",0,n,"L",0,0,"L",i-o,0,"A",o,o,0,0,1,i,o,"L",i,n-o,"A",o,o,0,0,1,i-o,n,"L",s,n]:a=["M",0,0,"L",i-o,0,"A",o,o,0,0,1,i,o,"L",i,n-o,"A",o,o,0,0,1,i-o,n,"L",0,n]:a=["M",i,s,"L",i,n-o,"A",o,o,0,0,1,i-o,n,"L",0,n,"L",0,0,"L",i,0],a},t.PanZoomComponent=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.PanZoomComponent,t.BaseComponent),t.PanZoomComponent.BOX_SHADOW="box-shadow",t.PanZoomComponent.CONTROL_PANEL_BEHAVIOR_INIT_COLLAPSED="initCollapsed",t.PanZoomComponent.CONTROL_PANEL_BEHAVIOR_INIT_EXPANDED="initExpanded",t.PanZoomComponent.CONTROL_PANEL_BEHAVIOR_HIDDEN="hidden",t.PanZoomComponent.PAN_ZOOM_KEY="panZoomInfo",t.PanZoomComponent.SKIN_NAME="skin",t.PanZoomComponent._ATTR_INLINE_STYLE="inlineStyle",t.PanZoomComponent._ATTR_CTRLPANEL_BACKGROUND_COLOR="cpBackgroundColor",t.PanZoomComponent._ATTR_CTRLPANEL_BORDER_COLOR="cpBorderColor",t.PanZoomComponent._ATTR_CTRLPANEL_BOX_SHADOW="cpBoxShadow",t.PanZoomComponent._ATTR_CTRLPANEL_BORDER_RADIUS="cpBorderRadius",t.PanZoomComponent._ATTR_TAB_BG_COLOR_INACTIVE="tabBgColorInactive",t.PanZoomComponent._ATTR_TAB_BORDER_COLOR_INACTIVE="tabBorderColorInactive",t.PanZoomComponent.LEGEND_DISCLOSED_EVENT_KEY="isLegendDisclosed",t.PanZoomComponent.prototype.Init=function(e,i,n){t.PanZoomComponent.superclass.Init.call(this,e,i,n),this._controlPanelBehavior=t.PanZoomComponent.CONTROL_PANEL_BEHAVIOR_INIT_COLLAPSED,this._displayedControls=t.PanZoomCanvas.DEFAULT_DISPLAYED_CONTROLS,this._bSupportsVectorEffects=!(t.Agent.isEnvironmentBatik()||t.Agent.isPlatformIE()&&t.Agent.getVersion()<=11),this._resourcesMap=null,this._subcomponentStyles=null,this._skinName="",this._panAnimator=null,this._panningInterrupted=!1},t.PanZoomComponent.prototype.getDisplayedControls=function(){return this._displayedControls},t.PanZoomComponent.prototype.getPanZoomCanvas=function(){return this._panZoomCanvas},t.PanZoomComponent.prototype.getResourcesMap=function(){return this._resourcesMap||(this.Options?this._resourcesMap=this.Options._resources:this._resourcesMap={}),this._resourcesMap},t.PanZoomComponent.prototype.getSkinName=function(){return this._skinName},t.PanZoomComponent.prototype.getSubcomponentStyles=function(){return this._subcomponentStyles},t.PanZoomComponent.prototype.parseComponentJson=function(e){var i=new t.CSSStyle(e[t.PanZoomComponent._ATTR_INLINE_STYLE]),n=i.getStyle(t.CSSStyle.BACKGROUND_COLOR);n&&this.SetEndGradientColor(n);var r=new Object,s=e[t.PanZoomComponent.SKIN_NAME];s&&(this._setSkinName(s),r[t.PanZoomComponent.SKIN_NAME]=s,"undefined"!=typeof t.PanelDrawer&&(t.StyleUtils.setStyle(r,t.CSSStyle.BACKGROUND_COLOR,e[t.PanZoomComponent._ATTR_CTRLPANEL_BACKGROUND_COLOR]),
t.StyleUtils.setStyle(r,t.CSSStyle.BORDER_COLOR,e[t.PanZoomComponent._ATTR_CTRLPANEL_BORDER_COLOR]),t.StyleUtils.setStyle(r,t.CSSStyle.BORDER_RADIUS,e[t.PanZoomComponent._ATTR_CTRLPANEL_BORDER_RADIUS]),t.StyleUtils.setStyle(r,t.PanZoomComponent.BOX_SHADOW,e[t.PanZoomComponent._ATTR_CTRLPANEL_BOX_SHADOW]),t.StyleUtils.setStyle(r,t.PanelDrawer.TAB_BG_COLOR_INACTIVE,e[t.PanZoomComponent._ATTR_TAB_BG_COLOR_INACTIVE]),t.StyleUtils.setStyle(r,t.PanelDrawer.TAB_BORDER_COLOR_INACTIVE,e[t.PanZoomComponent._ATTR_TAB_BORDER_COLOR_INACTIVE])),this.setSubcomponentStyles(o.calcOptions(r)))},t.PanZoomComponent.prototype.parseComponentAttrs=function(e){var i=new t.CSSStyle(e.getAttr(t.PanZoomComponent._ATTR_INLINE_STYLE)),n=i.getStyle(t.CSSStyle.BACKGROUND_COLOR);n&&this.SetEndGradientColor(n);var r=new Object,s=e.getAttr(t.PanZoomComponent.SKIN_NAME);s&&(this._setSkinName(s),r[t.PanZoomComponent.SKIN_NAME]=s),"undefined"!=typeof t.PanelDrawer&&(t.StyleUtils.setStyle(r,t.CSSStyle.BACKGROUND_COLOR,e.getAttr(t.PanZoomComponent._ATTR_CTRLPANEL_BACKGROUND_COLOR)),t.StyleUtils.setStyle(r,t.CSSStyle.BORDER_COLOR,e.getAttr(t.PanZoomComponent._ATTR_CTRLPANEL_BORDER_COLOR)),t.StyleUtils.setStyle(r,t.CSSStyle.BORDER_RADIUS,e.getAttr(t.PanZoomComponent._ATTR_CTRLPANEL_BORDER_RADIUS)),t.StyleUtils.setStyle(r,t.PanZoomComponent.BOX_SHADOW,e.getAttr(t.PanZoomComponent._ATTR_CTRLPANEL_BOX_SHADOW)),t.StyleUtils.setStyle(r,t.PanelDrawer.TAB_BG_COLOR_INACTIVE,e.getAttr(t.PanZoomComponent._ATTR_TAB_BG_COLOR_INACTIVE)),t.StyleUtils.setStyle(r,t.PanelDrawer.TAB_BORDER_COLOR_INACTIVE,e.getAttr(t.PanZoomComponent._ATTR_TAB_BORDER_COLOR_INACTIVE))),this.setSubcomponentStyles(o.calcOptions(r))},t.PanZoomComponent.prototype.render=function(t,e,i){this.Width=e,this.Height=i,this._isResize=!t,this.IsResize()&&!this.getPanZoomCanvas()||(this.PreRender(),this.IsResize()||("object"==typeof t?this.SetOptions(t):this._loadXml(t)),this.Render(t,e,i),this.UpdateAriaAttributes())},t.PanZoomComponent.prototype.setControlPanelBehavior=function(t){this._controlPanelBehavior=t},t.PanZoomComponent.prototype.setDisplayedControls=function(t){this._displayedControls=t},t.PanZoomComponent.prototype.supportsVectorEffects=function(){return this._bSupportsVectorEffects},t.PanZoomComponent.prototype.GetControlPanel=function(){var e=this.GetControlPanelBehavior();if(e!=t.PanZoomComponent.CONTROL_PANEL_BEHAVIOR_HIDDEN){var i=e==t.PanZoomComponent.CONTROL_PANEL_BEHAVIOR_INIT_COLLAPSED?t.ControlPanel.STATE_COLLAPSED:t.ControlPanel.STATE_EXPANDED;return new t.ControlPanel(this.getCtx(),this,i)}return null},t.PanZoomComponent.prototype.GetControlPanelBehavior=function(){return this._controlPanelBehavior},t.PanZoomComponent.prototype.GetXmlDomParser=function(){return null},t.PanZoomComponent.prototype.GetXmlStringParser=function(){return new t.XmlParser(this.getCtx())},t.PanZoomComponent.prototype.HandlePanEvent=function(t){},t.PanZoomComponent.prototype.HandleZoomEvent=function(t){},t.PanZoomComponent.prototype.IsResize=function(){return this._isResize},t.PanZoomComponent.prototype.PreRender=function(){},t.PanZoomComponent.prototype.Render=function(){if(!this._endGradientColor&&this.getSkinName()||(this._backgroundPane||(this._backgroundPane=new t.Rect(this.getCtx(),0,0,0,0),this.addChild(this._backgroundPane)),this._backgroundPane.setWidth(this.getWidth()),this._backgroundPane.setHeight(this.getHeight()),this._backgroundPane.setFill(this._getBackgroundGradient(this._endGradientColor))),this.IsResize())this._panZoomCanvas.setSize(this.getWidth(),this.getHeight());else{this._panZoomCanvas&&(this.removeChild(this._panZoomCanvas),this._panZoomCanvas=null),this._panZoomCanvas=new t.PanZoomCanvas(this.getCtx(),this.getWidth(),this.getHeight(),this),this._panZoomCanvas.addEvtListener(t.PanEvent.TYPE,this.HandlePanEvent,!1,this),this._panZoomCanvas.addEvtListener(t.ZoomEvent.TYPE,this.HandleZoomEvent,!1,this),this.addChild(this._panZoomCanvas);var e=this.GetControlPanel();e&&(e.addEvtListener(n.TYPE,this._handleControlPanelEvent,!1,this),this._panZoomCanvas.setControlPanel(e)),this._panZoomCanvas.renderComponent()}var i=new t.ClipPath("comp");i.addRect(this.getTranslateX(),this.getTranslateY(),this.getWidth(),this.getHeight()),this.setClipPath(i)},t.PanZoomComponent.prototype.SetEndGradientColor=function(t){this._endGradientColor=t},t.PanZoomComponent.prototype.SetOptions=function(t){this.Options=this.Defaults?this.Defaults.calcOptions(t):t},t.PanZoomComponent.prototype._getBackgroundGradient=function(e){var i,n="#FFFFFF",o="#FFFFFF",r="#AECDEA",s="#7396C8",a=1;if(e&&e!=s){a=t.ColorUtils.getAlpha(e);var l=(t.ColorUtils.getRed(r)-t.ColorUtils.getRed(s))/(255-t.ColorUtils.getRed(s)),h=(t.ColorUtils.getGreen(r)-t.ColorUtils.getGreen(s))/(255-t.ColorUtils.getGreen(s)),u=(t.ColorUtils.getBlue(r)-t.ColorUtils.getBlue(s))/(255-t.ColorUtils.getBlue(s)),d=t.ColorUtils.getRed(e),c=t.ColorUtils.getGreen(e),p=t.ColorUtils.getBlue(e),_=Math.round(d+l*(255-d)),g=Math.round(c+h*(255-c)),m=Math.round(p+u*(255-p)),f=t.ColorUtils.makeRGB(_,g,m),y=t.ColorUtils.getRGB(e);i=new Array(n,o,f,y)}else i=[n,o,r,s];var v=[a,a,a,a],S=[0,45/255,190/255,1],C=0,E=0,b=this.Width,T=this.Height,A=1.7,O=b*A*A,P=T*A,I=C+(b-O)/2,D=E-35,x=I+O/2,M=D+P/2,L=1.5*Math.min(O/2,P/2),R=[I,D,O,P];return new t.RadialGradientFill(i,v,S,x,M,L,R)},t.PanZoomComponent.prototype._handleControlPanelEvent=function(e){var i=t.EventFactory.newAdfPropertyChangeEvent(t.ControlPanel.CONTROL_PANEL_BEHAVIOR_KEY,e.getSubType()==n.SUBTYPE_SHOW?t.PanZoomComponent.CONTROL_PANEL_BEHAVIOR_INIT_EXPANDED:t.PanZoomComponent.CONTROL_PANEL_BEHAVIOR_INIT_COLLAPSED);this.dispatchEvent(i)},t.PanZoomComponent.prototype._loadXml=function(t){if(null!=t&&0!=t.length){var e=this.GetXmlStringParser();if(e){var i=e.parse(t);i&&("r"===i.getName()&&(i=i.getFirstChild()),i&&this.GetXmlDomParser().loadXmlInitial(i))}}},t.PanZoomComponent.prototype._setSkinName=function(t){this._skinName=t},t.PanZoomComponent.prototype.setSubcomponentStyles=function(t){this._subcomponentStyles=t},t.PanZoomComponent.prototype._getLegendMaxWidthValue=function(e,i){var n=i;return e?(n=t.StringUtils.trim(e),t.StringUtils.endsWith(n,"%")?(n=t.StringUtils.trim(n.replace(/\%$/,"")),isNaN(parseFloat(n))||(n=parseFloat(n)/100*i)):t.StringUtils.endsWith(n,"px")&&(n=n.replace(/px$/,"")),n=isNaN(parseFloat(n))?i:parseFloat(n),Math.min(n,i)):n},t.PanZoomComponent.prototype.destroy=function(){this._panZoomCanvas&&(this._panZoomCanvas.destroy(),this._panZoomCanvas=null),t.PanZoomComponent.superclass.destroy.call(this)},t.PanZoomComponent.prototype.ensureObjInViewport=function(e,i){if(this._panZoomCanvas.isPanningEnabled()){this._panAnimator&&(this._panningInterrupted=!0,this._panAnimator.stop());var n=this.Width,o=this.Height,r=i.getKeyboardBoundingBox(this.getCtx().getStage()),s=new t.Rectangle(0,0,n,o);if(!s.getUnion(r).equals(s)){var a=0,l=0,h=r.w,u=r.h,d=r.x,c=r.y;h<=n?d<0?a=d:d+h>n&&(a=d+h-n):a=d+.5*h-.5*n,u<=o?c<0?l=c:c+u>o&&(l=c+u-o):l=c+.5*u-.5*o;var p=new t.Animator(this.getCtx(),this.getAnimationDuration());this._panAnimator=p;var _=this,g=function(){_._panAnimator=null,_.getEventManager().showFocusEffect(e,i),_._panningInterrupted=!1};this.getPanZoomCanvas().panBy(-a,-l,p,g),p.play()}}},t.PanZoomComponent.prototype.isPanning=function(){return null!=this._panAnimator||this._panningInterrupted},t.PanZoomCanvas=function(t,e,i,n){this.Init(t,e,i,n)},t.Obj.createSubclass(t.PanZoomCanvas,t.Container),t.PanZoomCanvas.DEFAULT_PAN_INCREMENT=15,t.PanZoomCanvas.DEFAULT_ZOOM_INCREMENT=.05,t.PanZoomCanvas.DEFAULT_ANIMATION_DURATION=.5,t.PanZoomCanvas.DEFAULT_DISPLAYED_CONTROLS=t.ControlPanel.CONTROLS_ALL,t.PanZoomCanvas.prototype.Init=function(e,i,n,o){t.PanZoomCanvas.superclass.Init.call(this,e),this._view=o,this._ww=i,this._hh=n,this._px=0,this._py=0,this._mx=0,this._my=0,this._minPanX=null,this._maxPanX=null,this._minPanY=null,this._maxPanY=null,this._minZoom=.1,this._maxZoom=1,this._panIncrement=t.PanZoomCanvas.DEFAULT_PAN_INCREMENT,this._zoomIncrement=t.PanZoomCanvas.DEFAULT_ZOOM_INCREMENT,this._bTiltPanningEnabled=!1,this._zoomToFitPadding=20,this._controlPanel=null,this._bPanningEnabled=!0,this._panDirection="auto",this._bZoomingEnabled=!0,this._bZoomToFitEnabled=!0,this._backgroundPane=new t.Rect(this.getCtx(),0,0,this._ww,this._hh),this.addChild(this._backgroundPane),this._backgroundPane.setInvisibleFill(),this._contentPane=new t.Container(this.getCtx()),this.addChild(this._contentPane),this._contentPane.setMatrix(new t.Matrix),this._animationDuration=t.PanZoomCanvas.DEFAULT_ANIMATION_DURATION,this._eventManager=new t.PanZoomCanvasEventManager(e,this.FireListener,this),this._eventManager.addListeners(this),this._clipIdSuffix=1,this.SetClipRect(i,n),this._bElasticConstraints=!1,this._elasticConstraintsAnim=null},t.PanZoomCanvas.prototype.setSize=function(t,e,i){this._ww=t,this._hh=e,i||(this._backgroundPane.setWidth(t),this._backgroundPane.setHeight(e),this._controlPanel&&this.PositionControlPanel(),this.SetClipRect(t,e))},t.PanZoomCanvas.prototype.getSize=function(){return new t.Dimension(this._ww,this._hh)},t.PanZoomCanvas.prototype.SetClipRect=function(e,i){var n=new t.ClipPath("pzc");n.addRect(this.getTranslateX(),this.getTranslateY(),e,i),this.setClipPath(n)},t.PanZoomCanvas.prototype.getContentPane=function(){return this._contentPane},t.PanZoomCanvas.prototype.setContentPane=function(t){this._contentPane=t},t.PanZoomCanvas.prototype.getBackgroundPane=function(){return this._backgroundPane},t.PanZoomCanvas.prototype.getContentPaneMatrix=function(t){if(t){var e=t.getDestVal(this._contentPane,this._contentPane.getMatrix);if(e)return e}return this._contentPane.getMatrix()},t.PanZoomCanvas.prototype.getZoom=function(t){return this.getContentPaneMatrix(t).getA()},t.PanZoomCanvas.prototype.getPanX=function(t){return this.getContentPaneMatrix(t).getTx()},t.PanZoomCanvas.prototype.getPanY=function(t){return this.getContentPaneMatrix(t).getTy()},t.PanZoomCanvas.prototype.setZoomToFitPadding=function(t){this._zoomToFitPadding=t},t.PanZoomCanvas.prototype.getZoomToFitPadding=function(){return this._zoomToFitPadding},t.PanZoomCanvas.prototype.panBy=function(e,i,n,o){if(this.isPanningEnabled()){var r=this.getPanX(n),s=this.getPanY(n),a="y"==this.getPanDirection()?r:this.ConstrainPanX(r+e),l="x"==this.getPanDirection()?s:this.ConstrainPanY(s+i),h=a-r,u=l-s,d=null;n&&(d=n.getDestVal(this._contentPane,this._contentPane.getMatrix),d&&(d=d.clone())),d||(d=this._contentPane.getMatrix().clone()),d.translate(h,u);var c=this,p=function(){c.FirePanEvent(t.PanEvent.SUBTYPE_PANNING,a,l,r,s,n)},_=function(){c.FirePanEvent(t.PanEvent.SUBTYPE_PANNED,a,l,r,s,n)};n?(n.addProp(t.Animator.TYPE_MATRIX,this._contentPane,this._contentPane.getMatrix,this._contentPane.setMatrix,d),t.Playable.prependOnInit(n,p),t.Playable.appendOnEnd(n,_),o&&t.Playable.appendOnEnd(n,o)):(p(),this._contentPane.setMatrix(d),_(),o&&o())}},t.PanZoomCanvas.prototype.panTo=function(t,e,i){if(this.isPanningEnabled()){var n=t-this.getPanX(i),o=e-this.getPanY(i);this.panBy(n,o,i)}},t.PanZoomCanvas.prototype.zoomBy=function(e,i,n,o){if(this.isZoomingEnabled()){i||0===i||(i=this._ww/2),n||0===n||(n=this._hh/2);var r=this.getZoom(o),s=this.ConstrainZoom(r*e);if(this.adjustZoomControls(s),t.PanZoomCanvas.RoundFloatForCompare(r)!=t.PanZoomCanvas.RoundFloatForCompare(s)){var a=s/r,l=null;o&&(l=o.getDestVal(this._contentPane,this._contentPane.getMatrix),l&&(l=l.clone())),l||(l=this._contentPane.getMatrix().clone()),l.scale(a,a,i,n);var h=this.ConstrainPanX(l.getTx())-l.getTx(),u=this.ConstrainPanY(l.getTy())-l.getTy();this.FireZoomEvent(t.ZoomEvent.SUBTYPE_ADJUST_PAN_CONSTRAINTS,s,r,o,null,i,n,h,u),h=this.ConstrainPanX(l.getTx())-l.getTx(),u=this.ConstrainPanY(l.getTy())-l.getTy(),l.translate(h,u);var d=this,c=function(){d.FireZoomEvent(t.ZoomEvent.SUBTYPE_ZOOMING,s,r,o,null,i,n,h,u)},p=function(){d.FireZoomEvent(t.ZoomEvent.SUBTYPE_ZOOMED,d.getZoom(),r,o,null,i,n,h,u)};o?(o.addProp(t.Animator.TYPE_MATRIX,this._contentPane,this._contentPane.getMatrix,this._contentPane.setMatrix,l),t.Playable.prependOnInit(o,c),t.Playable.appendOnEnd(o,p)):(c(),this._contentPane.setMatrix(l),p())}}},t.PanZoomCanvas.prototype.zoomTo=function(t,e,i,n){if(this.isZoomingEnabled()){var o=t/this.getZoom(n);this.zoomBy(o,e,i,n)}},t.PanZoomCanvas.prototype.center=function(t,e){var i=this.isPanningEnabled(),n=this.getPanDirection();this.setPanningEnabled(!0),this.setPanDirection("auto");var o=e;o||(o=this._contentPane.getDimensions());var r=(o.x+o.w/2)*this.getZoom(),s=(o.y+o.h/2)*this.getZoom(),a=this._ww/2-r,l=this._hh/2-s;this.panTo(a,l,t),this.setPanningEnabled(i),this.setPanDirection(n)},t.PanZoomCanvas.prototype.zoomToFit=function(e,i){if(this.isZoomToFitEnabled()){var n=this.isPanningEnabled(),o=this.getPanDirection(),r=this.isZoomingEnabled();this.setPanningEnabled(!0),this.setPanDirection("auto"),this.setZoomingEnabled(!0);try{var s=i?i:this._contentPane.getDimensions(),a=this.FireZoomEvent(t.ZoomEvent.SUBTYPE_ZOOM_TO_FIT_CALC_BOUNDS,null,null,e,s);if(s=a.getZoomToFitBounds(),!s)return;var l=(this._ww-2*this._zoomToFitPadding)/s.w,h=(this._hh-2*this._zoomToFitPadding)/s.h,u=Math.min(l,h);u=this.ConstrainZoom(u);var d=(s.x+s.w/2)*u,c=(s.y+s.h/2)*u,p=this._ww/2-d,_=this._hh/2-c,g=this,m=function(){g.FireZoomEvent(t.ZoomEvent.SUBTYPE_ZOOM_TO_FIT_BEGIN,null,null,e,s)},f=function(){g.FireZoomEvent(t.ZoomEvent.SUBTYPE_ZOOM_TO_FIT_END,null,null,e,s)};e?t.Playable.prependOnInit(e,m):m(),this.zoomTo(u,0,0,e),this.panTo(p,_,e),e?t.Playable.appendOnEnd(e,f):f()}finally{this.setPanningEnabled(n),this.setPanDirection(o),this.setZoomingEnabled(r)}}},t.PanZoomCanvas.prototype.calcZoomToFitScale=function(e){e||(e=this._contentPane.getDimensions());var i=this.FireZoomEvent(t.ZoomEvent.SUBTYPE_ZOOM_TO_FIT_CALC_BOUNDS,null,null,null,e);e=i.getZoomToFitBounds();var n=(this._ww-2*this._zoomToFitPadding)/e.w,o=(this._hh-2*this._zoomToFitPadding)/e.h,r=Math.min(n,o);return r=this.ConstrainZoom(r)},t.PanZoomCanvas.prototype.calcZoomToFitBounds=function(){var e=this._contentPane.getDimensions(),i=this.FireZoomEvent(t.ZoomEvent.SUBTYPE_ZOOM_TO_FIT_CALC_BOUNDS,null,null,null,e);return e=i.getZoomToFitBounds(),e.x-=this._zoomToFitPadding,e.y-=this._zoomToFitPadding,e.w+=2*this._zoomToFitPadding,e.h+=2*this._zoomToFitPadding,e},t.PanZoomCanvas.prototype.getViewport=function(){var e=this.localToStage(new t.Point(0,0)),i=this.localToStage(new t.Point(this._ww,this._hh)),n=this.getContentPane().stageToLocal(e),o=this.getContentPane().stageToLocal(i);return new t.Rectangle(n.x,n.y,o.x-n.x,o.y-n.y)},t.PanZoomCanvas.prototype.SetElasticConstraints=function(e){if(this._bElasticConstraints=e,e)this._elasticConstraintsAnim&&(this._elasticConstraintsAnim.isRunning()&&this._elasticConstraintsAnim.stop(),this._elasticConstraintsAnim=null);else{var i=this.getPanX(),n=this.getPanY(),o=this.getZoom();this._bElasticPan=i!=this.ConstrainPanX(i)||n!=this.ConstrainPanY(n),this._bElasticZoom=o!=this.ConstrainZoom(o),(this._bElasticPan||this._bElasticZoom)&&(this._elasticConstraintsAnim=new t.Animator(this.getCtx(),.4),this._elasticConstraintsAnim.setEasing(t.Easing.cubicOut),this._bElasticZoom&&this.zoomBy(1,.5*this._ww,.5*this._hh,this._elasticConstraintsAnim),this._bElasticPan&&this.panBy(0,0,this._elasticConstraintsAnim),t.Playable.appendOnEnd(this._elasticConstraintsAnim,this._elasticConstraintsAnimOnEnd,this),this._bElasticPan&&this.FirePanEvent(t.PanEvent.SUBTYPE_ELASTIC_ANIM_BEGIN,null,null,null,null,this._elasticConstraintsAnim),this._bElasticZoom&&this.FireZoomEvent(t.ZoomEvent.SUBTYPE_ELASTIC_ANIM_BEGIN,null,null,null,null,this._elasticConstraintsAnim),this._elasticConstraintsAnim.play())}},t.PanZoomCanvas.prototype.IsElasticConstraints=function(){return this._bElasticConstraints},t.PanZoomCanvas.prototype._elasticConstraintsAnimOnEnd=function(){this._elasticConstraintsAnim=null,this._bElasticPan&&this.FirePanEvent(t.PanEvent.SUBTYPE_ELASTIC_ANIM_END),this._bElasticZoom&&this.FireZoomEvent(t.ZoomEvent.SUBTYPE_ELASTIC_ANIM_END)},t.PanZoomCanvas.prototype._panDampingFunc=function(t,e){var i=.01*e;return Math.sqrt(4*i*t)},t.PanZoomCanvas.prototype._zoomDampingFunc=function(t,e){var i=.002*e;return Math.sqrt(4*i*t)},t.PanZoomCanvas.prototype.ConstrainPanX=function(t){var e=t;if(null!=this._minPanX&&e<this._minPanX)if(this.IsElasticConstraints()){var i=this._minPanX-e;e=this._minPanX-this._panDampingFunc(i,this._ww)}else e=this._minPanX;if(null!=this._maxPanX&&e>this._maxPanX)if(this.IsElasticConstraints()){var i=e-this._maxPanX;e=this._maxPanX+this._panDampingFunc(i,this._ww)}else e=this._maxPanX;return e},t.PanZoomCanvas.prototype.ConstrainPanY=function(t){var e=t;if(null!=this._minPanY&&e<this._minPanY)if(this.IsElasticConstraints()){var i=this._minPanY-e;e=this._minPanY-this._panDampingFunc(i,this._hh)}else e=this._minPanY;if(null!=this._maxPanY&&e>this._maxPanY)if(this.IsElasticConstraints()){var i=e-this._maxPanY;e=this._maxPanY+this._panDampingFunc(i,this._hh)}else e=this._maxPanY;return e},t.PanZoomCanvas.prototype.ConstrainZoom=function(t){var e=Math.max(0,t);if(this._minZoom&&e<this._minZoom)if(this.IsElasticConstraints()){var i=this._minZoom-e;e=this._minZoom-this._zoomDampingFunc(i,this._maxZoom-this._minZoom)}else e=this._minZoom;if(this._maxZoom&&e>this._maxZoom)if(this.IsElasticConstraints()){var i=e-this._maxZoom;e=this._maxZoom+this._zoomDampingFunc(i,this._maxZoom-this._minZoom)}else e=this._maxZoom;return e},t.PanZoomCanvas.RoundFloatForCompare=function(t){return Math.round(1e5*t)},t.PanZoomCanvas.prototype.renderComponent=function(){var t=this.getControlPanel();t&&(this.addChild(t),this.PositionControlPanel(),t.renderComponent())},t.PanZoomCanvas.prototype.setControlPanel=function(t){this._controlPanel=t},t.PanZoomCanvas.prototype.getControlPanel=function(){return this._controlPanel},t.PanZoomCanvas.prototype.PositionControlPanel=function(){var e,i=this._view.getSubcomponentStyles(),n=t.StyleUtils.getStyle(i,t.ControlPanel.CP_PADDING_SIDE,0),o=t.StyleUtils.getStyle(i,t.ControlPanel.CP_PADDING_TOP,0),r=t.StyleUtils.getStyle(i,t.ControlPanel.CP_OPEN_CLOSE_BUTTON_WIDTH,0);e=t.Agent.isRightToLeft(this.getCtx())?this._ww-r-n:n,this._controlPanel.setTranslate(e,o)},t.PanZoomCanvas.prototype.GetRelativeMousePosition=function(t){return this.getCtx().pageToStageCoords(t.pageX,t.pageY)},t.PanZoomCanvas.prototype.FirePanEvent=function(e,i,n,o,r,s){var a=new t.PanEvent(e,i,n,o,r,s);this.FireListener(a)},t.PanZoomCanvas.prototype.FireZoomEvent=function(e,i,n,o,r,s,a,l,h){var u=new t.ZoomEvent(e,i,n,o,r,new t.Point(s,a),l,h);return this.FireListener(u),u},t.PanZoomCanvas.prototype.zoomAndCenter=function(){this.FireZoomEvent(t.ZoomEvent.SUBTYPE_ZOOM_AND_CENTER)},t.PanZoomCanvas.prototype.getNextZoomLevel=function(t){var e=t;return e+=this.getZoomIncrement(),e>this.getMaxZoom()&&(e=this.getMaxZoom()),e},t.PanZoomCanvas.prototype.getPrevZoomLevel=function(t){var e=t;return e-=this.getZoomIncrement(),e<this.getMinZoom()&&(e=this.getMinZoom()),e},t.PanZoomCanvas.prototype.setZoomIncrement=function(t){this._zoomIncrement=t},t.PanZoomCanvas.prototype.getZoomIncrement=function(){return this._zoomIncrement},t.PanZoomCanvas.prototype.setPanIncrement=function(t){this._panIncrement=t},t.PanZoomCanvas.prototype.getPanIncrement=function(){return this._panIncrement},t.PanZoomCanvas.prototype.setMinZoom=function(t){this._minZoom=t},t.PanZoomCanvas.prototype.getMinZoom=function(){return this._minZoom},t.PanZoomCanvas.prototype.setMaxZoom=function(t){t<0&&(t=1),this._maxZoom=t},t.PanZoomCanvas.prototype.getMaxZoom=function(){return this._maxZoom},t.PanZoomCanvas.prototype.setMinPanX=function(t){this._minPanX=t},t.PanZoomCanvas.prototype.getMinPanX=function(){return this._minPanX},t.PanZoomCanvas.prototype.setMaxPanX=function(t){this._maxPanX=t},t.PanZoomCanvas.prototype.getMaxPanX=function(){return this._maxPanX},t.PanZoomCanvas.prototype.setMinPanY=function(t){this._minPanY=t},t.PanZoomCanvas.prototype.getMinPanY=function(){return this._minPanY},t.PanZoomCanvas.prototype.setMaxPanY=function(t){this._maxPanY=t},t.PanZoomCanvas.prototype.getMaxPanY=function(){return this._maxPanY},t.PanZoomCanvas.prototype.setTiltPanningEnabled=function(t){this._bTiltPanningEnabled=t},t.PanZoomCanvas.prototype.isTiltPanningEnabled=function(t){return this._bTiltPanningEnabled},t.PanZoomCanvas.prototype.setAnimationDuration=function(t){this._animationDuration=t},t.PanZoomCanvas.prototype.getAnimationDuration=function(){return this._animationDuration},t.PanZoomCanvas.prototype.setPanningEnabled=function(t){this._bPanningEnabled=t},t.PanZoomCanvas.prototype.isPanningEnabled=function(){return this._bPanningEnabled},t.PanZoomCanvas.prototype.setPanDirection=function(t){this._panDirection=t},t.PanZoomCanvas.prototype.getPanDirection=function(){return this._panDirection},t.PanZoomCanvas.prototype.setZoomingEnabled=function(t){this._bZoomingEnabled=t},t.PanZoomCanvas.prototype.isZoomingEnabled=function(){return this._bZoomingEnabled},t.PanZoomCanvas.prototype.setZoomToFitEnabled=function(t){this._bZoomToFitEnabled=t},t.PanZoomCanvas.prototype.isZoomToFitEnabled=function(){return this._bZoomToFitEnabled},t.PanZoomCanvas.prototype.adjustZoomControls=function(t){if(this._controlPanel){var e=this.getZoom();t==this.getMinZoom()&&t==this.getMaxZoom()?(this._controlPanel.enableZoomInControl(!1),this._controlPanel.enableZoomOutControl(!1)):e<=t&&t==this.getMaxZoom()?(this._controlPanel.enableZoomInControl(!1),this._controlPanel.enableZoomOutControl(!0)):e>=t&&t==this.getMinZoom()?(this._controlPanel.enableZoomInControl(!0),this._controlPanel.enableZoomOutControl(!1)):(this._controlPanel.enableZoomInControl(!0),this._controlPanel.enableZoomOutControl(!0))}},t.PanZoomCanvas.prototype.setCurrentTouchTargets=function(t){this._currTargets=t},t.PanZoomCanvas.prototype.getCurrentTouchTargets=function(){return this._currTargets},t.PanZoomCanvas.prototype.resetTouchTargets=function(){t.Agent.isTouchDevice()&&(this._currTargets=null,this._eventManager.TouchManager.reset())},t.PanZoomCanvas.prototype.panZoomEnd=function(){this._eventManager.PanZoomEnd()},t.PanZoomCanvas.prototype.setInteractionEnabled=function(t){t?this._eventManager.addListeners(this):this._eventManager.removeListeners(this)},t.PanZoomCanvas.prototype.destroy=function(){this._elasticConstraintsAnim&&(this._elasticConstraintsAnim.stop(!0),this._elasticConstraintsAnim=null),this._eventManager&&(this._eventManager.removeListeners(this),this._eventManager.destroy(),this._eventManager=null),t.PanZoomCanvas.superclass.destroy.call(this)},t.PanZoomCanvasEventManager=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.PanZoomCanvasEventManager,t.EventManager),t.PanZoomCanvasEventManager.EVENT_INFO_PANNED_KEY="panned",t.PanZoomCanvasEventManager.prototype.Init=function(e,i,n){t.PanZoomCanvasEventManager.superclass.Init.call(this,e,i,n),this._pzc=n,this._zoomAnimator=null,this._bPanning=!1,this._bPanned=!1,this._bZooming=!1,this._bDragging=!1,this._bMomentumPanning=!0},t.PanZoomCanvasEventManager._PAN_TOUCH_KEY="panTouch",t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY="zoomTouch",t.PanZoomCanvasEventManager._MOMENTUM_START_TIMER_INTERVAL=50,t.PanZoomCanvasEventManager.prototype.addListeners=function(e){t.PanZoomCanvasEventManager.superclass.addListeners.call(this,e),e.addEvtListener(t.MouseEvent.MOUSEWHEEL,this.OnMouseWheel,!1,this)},t.PanZoomCanvasEventManager.prototype.RemoveListeners=function(e){t.PanZoomCanvasEventManager.superclass.RemoveListeners.call(this,e),e.removeEvtListener(t.MouseEvent.MOUSEWHEEL,this.OnMouseWheel,!1,this)},t.PanZoomCanvasEventManager.prototype.OnMouseDown=function(e){if(this._bDragging=!1,this._bPanned=!1,e.button!=t.MouseEvent.RIGHT_CLICK_BUTTON){var i=this._callbackObj.GetRelativeMousePosition(e);this._mx=i.x,this._my=i.y,this._px=this._mx,this._py=this._my,this._bDown=!0,this._origPanX=this._callbackObj.getPanX(),this._origPanY=this._callbackObj.getPanY(),this._origZoom=this._callbackObj.getZoom(),this._bMomentumPanning&&(this._currTime=(new Date).getTime())}this._momentumTimer&&this._momentumTimer.isRunning()&&(this._momentumTimer.stop(),this._momentumTimer.reset())},t.PanZoomCanvasEventManager.prototype.OnMouseMove=function(e){var i=this._callbackObj.GetRelativeMousePosition(e);if((i.x!==this._px||i.y!==this._py)&&this._bDown){this._bDragging=!0;var i=this._callbackObj.GetRelativeMousePosition(e),n=i.x,o=i.y;if(e.ctrlKey){this._bZooming||(this._callback.call(this._callbackObj,new t.ZoomEvent(t.ZoomEvent.SUBTYPE_DRAG_ZOOM_BEGIN)),this._bZooming=!0,this._pzc.getControlPanel()&&this._pzc.getControlPanel().mouseDragPanningStarted(),this._callbackObj.SetElasticConstraints(!0));var r=this._py>=o?1:-1,s=this._origZoom*Math.pow(1+.01*r,Math.abs(this._py-o));this._callbackObj.isPanningEnabled()?this._callbackObj.zoomTo(s,this._px,this._py):this._callbackObj.zoomTo(s,null,null)}else this._handlePanMove(n,o);this._mx=n,this._my=o}},t.PanZoomCanvasEventManager.prototype.OnMouseUp=function(e){this.PanZoomEnd(),t.PanZoomCanvasEventManager.superclass.OnMouseUp.call(this,e)},t.PanZoomCanvasEventManager.prototype.OnClick=function(e){(this._bDragging||this._bPanned)&&(this._bDragging=!1,this._bPanned=!1,t.EventManager.consumeEvent(e))},t.PanZoomCanvasEventManager.prototype.OnMouseOut=function(e){this._bDown&&(this._bPanning||this._bZooming)&&(e.relatedTarget&&null!=e.relatedTarget||this.OnMouseUp(e)),t.PanZoomCanvasEventManager.superclass.OnMouseOut.call(this,e)},t.PanZoomCanvasEventManager.prototype.OnMouseWheel=function(e){if(e.wheelDelta&&0!==e.wheelDelta&&this._callbackObj.isZoomingEnabled()){var i=this._callbackObj.getZoom(),n=null;if(this._zoomAnimator){var o=this._zoomAnimator;this._zoomAnimator.stop(),i=this._callbackObj.getZoom(o),this._zoomAnimator=null,o=null,n&&n.setEasing(t.Easing.cubicOut)}this._zoomAnimator=n;var r=e.wheelDelta,s=i*(1+this._callbackObj.getZoomIncrement()*r/Math.abs(r)),a=this._callbackObj.GetRelativeMousePosition(e),l=this.getCtx().getDocumentUtils();l.cancelDomEvent(e),this._callbackObj.isPanningEnabled()?this._callbackObj.zoomTo(s,a.x,a.y,this._zoomAnimator):this._callbackObj.zoomTo(s,null,null,this._zoomAnimator),this._zoomAnimator&&(t.Playable.appendOnEnd(this._zoomAnimator,this._clearZoomAnimator,this),this._zoomAnimator.play())}},t.PanZoomCanvasEventManager.prototype._clearZoomAnimator=function(){this._zoomAnimator=null},t.PanZoomCanvasEventManager.prototype._handleMomentumStartTimer=function(){},t.PanZoomCanvasEventManager.prototype._handleMomentumTimer=function(){var t=.04,e=1-t*this._momentumIterCount;e*=e;var i=this._momentumTimer.getInterval(),n=e*this._momentumXperMS*i,o=e*this._momentumYperMS*i;this._momentumDx+=n,this._momentumDy+=o;var r=this._origPanX+this._mx-this._px+this._momentumDx,s=this._origPanY+this._my-this._py+this._momentumDy;this._callbackObj.panTo(r,s);var a=!1;if(this._momentumIterCount>=1/t-1)a=!0;else{var l=this._callbackObj.getPanX(),h=this._callbackObj.getPanY(),u=this._pzc.getPanDirection();(Math.abs(l-r)>Math.abs(n)&&"y"!=u||Math.abs(h-s)>Math.abs(o)&&"x"!=u)&&(a=!0)}a?(this._momentumTimer.stop(),this._momentumTimer.reset(),this._callbackObj.SetElasticConstraints(!1)):this._momentumIterCount++},t.PanZoomCanvasEventManager.prototype.HandleImmediateTouchStartInternal=function(e){this._callbackObj.isZoomingEnabled()&&this.TouchManager.processAssociatedTouchAttempt(e,t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY,this.ZoomStartTouch,this),this._callbackObj.isPanningEnabled()&&this.TouchManager.processAssociatedTouchAttempt(e,t.PanZoomCanvasEventManager._PAN_TOUCH_KEY,this.PanStartTouch,this)},t.PanZoomCanvasEventManager.prototype.HandleImmediateTouchMoveInternal=function(e){this._callbackObj.isZoomingEnabled()&&this.TouchManager.processAssociatedTouchMove(e,t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY),this._callbackObj.isPanningEnabled()&&this.TouchManager.processAssociatedTouchMove(e,t.PanZoomCanvasEventManager._PAN_TOUCH_KEY),(this._callbackObj.isZoomingEnabled()||this._callbackObj.isPanningEnabled())&&e.preventDefault()},t.PanZoomCanvasEventManager.prototype.HandleImmediateTouchEndInternal=function(e){this._callbackObj.isZoomingEnabled()&&this.TouchManager.processAssociatedTouchEnd(e,t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY),this._callbackObj.isPanningEnabled()&&this.TouchManager.processAssociatedTouchEnd(e,t.PanZoomCanvasEventManager._PAN_TOUCH_KEY)},t.PanZoomCanvasEventManager.prototype.ZoomStartTouch=function(e,i){var n=this.TouchManager.getTouchIdsForObj(t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY);n.length<=1&&(this.TouchManager.saveProcessedTouch(i.identifier,t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY,null,t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY,t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY,this.ZoomMoveTouch,this.ZoomEndTouch,this),this._mx=i.pageX,this._my=i.pageY,this._px=this._mx,this._py=this._my,this._origPanX=this._callbackObj.getPanX(),this._origPanY=this._callbackObj.getPanY(),this._origZoom=this._callbackObj.getZoom(),this._origDist=null,n=this.TouchManager.getTouchIdsForObj(t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY),this._callbackObj.setCurrentTouchTargets(this.TouchManager.getStartTargetsByIds(n))),this._momentumTimer&&this._momentumTimer.isRunning()&&(this._momentumTimer.stop(),this._momentumTimer.reset())},t.PanZoomCanvasEventManager.prototype.ZoomMoveTouch=function(e,i){var n=this.TouchManager.getTouchIdsForObj(t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY);if(2==n.length){var o=this.TouchManager.getMultiTouchData(n);if(o){this._bZooming||(this._bZooming=!0,this.TouchManager.blockTouchHold(),this._callback.call(this._callbackObj,new t.ZoomEvent(t.ZoomEvent.SUBTYPE_DRAG_ZOOM_BEGIN)),this._pzc.getControlPanel()&&this._pzc.getControlPanel().mouseDragPanningStarted()),this._callbackObj.SetElasticConstraints(!0),null==this._origDist&&(this._origDist=o.dist-o.dz);var r=this._origZoom*(o.dist/this._origDist),s=this._pzc.getCtx().pageToStageCoords(o.cx,o.cy);this.hideTooltip(),this._callbackObj.setCurrentTouchTargets(this.TouchManager.getStartTargetsByIds(n)),this._callbackObj.zoomTo(r,s.x,s.y),this._callbackObj.panBy(o.dcx,o.dcy)}}},t.PanZoomCanvasEventManager.prototype.ZoomEndTouch=function(e,i){this._bZooming&&(this._origDist=null,this.TouchManager.unblockTouchHold(),this._handleZoomEnd());var n=this.TouchManager.getTouchIdsForObj(t.PanZoomCanvasEventManager._ZOOM_TOUCH_KEY);this._callbackObj.setCurrentTouchTargets(this.TouchManager.getStartTargetsByIds(n)),0==n.length&&this._callback.call(this._callbackObj,new t.ZoomEvent(t.ZoomEvent.SUBTYPE_ZOOM_END))},t.PanZoomCanvasEventManager.prototype.PanStartTouch=function(e,i){if(!this._bZooming){var n=this.TouchManager.getTouchIdsForObj(t.PanZoomCanvasEventManager._PAN_TOUCH_KEY);n.length<=1&&(this.TouchManager.saveProcessedTouch(i.identifier,t.PanZoomCanvasEventManager._PAN_TOUCH_KEY,null,t.PanZoomCanvasEventManager._PAN_TOUCH_KEY,t.PanZoomCanvasEventManager._PAN_TOUCH_KEY,this.PanMoveTouch,this.PanEndTouch,this),this._mx=i.pageX,this._my=i.pageY,this._px=this._mx,this._py=this._my,this._origPanX=this._callbackObj.getPanX(),this._origPanY=this._callbackObj.getPanY(),this._origZoom=this._callbackObj.getZoom(),this._bMomentumPanning&&(this._currTime=(new Date).getTime()))}this._momentumTimer&&this._momentumTimer.isRunning()&&(this._momentumTimer.stop(),this._momentumTimer.reset())},t.PanZoomCanvasEventManager.prototype.PanMoveTouch=function(e,i){if(!this._bZooming){var n=this.TouchManager.getTouchIdsForObj(t.PanZoomCanvasEventManager._PAN_TOUCH_KEY);if(1==n.length){var o=i.pageX,r=i.pageY;this._handlePanMove(o,r),this._mx=o,this._my=r}}},t.PanZoomCanvasEventManager.prototype.PanEndTouch=function(t,e){!this._bZooming&&this._bPanning&&(this._handlePanEnd(),this.SetEventInfo(t,"panned",!0))},t.PanZoomCanvasEventManager.prototype._handleZoomEnd=function(){this._callback.call(this._callbackObj,new t.ZoomEvent(t.ZoomEvent.SUBTYPE_DRAG_ZOOM_END)),this._bZooming=!1,this._pzc.getControlPanel()&&this._pzc.getControlPanel().mouseDragPanningEnded(),this._callbackObj.SetElasticConstraints(!1);
},t.PanZoomCanvasEventManager.prototype._handlePanMove=function(e,i){this._bPanning||(this._callback.call(this._callbackObj,new t.PanEvent(t.PanEvent.SUBTYPE_DRAG_PAN_BEGIN)),this._bPanning=!0,this._pzc.getControlPanel()&&this._pzc.getControlPanel().mouseDragPanningStarted(),this._callbackObj.SetElasticConstraints(!0),this._bMomentumPanning&&(this._arLastNMouseMoves=[])),this._callbackObj.panTo(this._origPanX+e-this._px,this._origPanY+i-this._py),this._bMomentumPanning&&(this._lastTime=this._currTime,this._currTime=(new Date).getTime(),this._momentumStartTimer?(this._momentumStartTimer.isRunning()&&this._momentumStartTimer.stop(),this._momentumStartTimer.reset()):this._momentumStartTimer=new t.Timer(this._context,t.PanZoomCanvasEventManager._MOMENTUM_START_TIMER_INTERVAL,this._handleMomentumStartTimer,this,1),this._arLastNMouseMoves.push({dt:this._currTime-this._lastTime,dx:e-this._mx,dy:i-this._my}),this._arLastNMouseMoves.length>5&&this._arLastNMouseMoves.splice(0,1),this._momentumStartTimer.start())},t.PanZoomCanvasEventManager.prototype._handlePanEnd=function(){if(this._callback.call(this._callbackObj,new t.PanEvent(t.PanEvent.SUBTYPE_DRAG_PAN_END)),this._bPanning=!1,this._bPanned=!0,this._pzc.getControlPanel()&&this._pzc.getControlPanel().mouseDragPanningEnded(),this._momentumStartTimer&&this._momentumStartTimer.isRunning()){this._momentumStartTimer.stop(),this._momentumStartTimer.reset(),this._momentumTimer?this._momentumTimer.reset():this._momentumTimer=new t.Timer(this._context,t.PanZoomCanvasEventManager._MOMENTUM_START_TIMER_INTERVAL,this._handleMomentumTimer,this);for(var e=0,i=0,n=0,o=this._arLastNMouseMoves.length;this._arLastNMouseMoves.length>0;){var r=this._arLastNMouseMoves.pop();e+=r.dt,i+=r.dx,n+=r.dy}this._arLastNMouseMoves=null,this._momentumXperMS=i/e,this._momentumYperMS=n/e,this._momentumTimer.setInterval(Math.ceil(e/o)),this._momentumIterCount=1,this._momentumDx=0,this._momentumDy=0,this._pzc.isPanningEnabled()&&this._momentumTimer.start()}else this._callbackObj.SetElasticConstraints(!1)},t.PanZoomCanvasEventManager.prototype.PanZoomEnd=function(){this._bDown=!1,this._bDragging=!1,this._bPanning&&this._handlePanEnd(),this._bZooming&&this._handleZoomEnd()},t.PanZoomCanvasEventManager.prototype.GetTouchResponse=function(){return this._pzc.isPanningEnabled()||this._pzc.isZoomingEnabled()?t.EventManager.TOUCH_RESPONSE_TOUCH_HOLD:t.EventManager.TOUCH_RESPONSE_AUTO},t.PanZoomCanvasEventManager.prototype.StoreInfoByEventType=function(e){return e!=t.PanZoomCanvasEventManager.EVENT_INFO_PANNED_KEY&&t.PanZoomCanvasEventManager.superclass.StoreInfoByEventType.call(this,e)},t.PanZoomCanvasKeyboardHandler=function(t,e){this.Init(t,e)},t.Obj.createSubclass(t.PanZoomCanvasKeyboardHandler,t.KeyboardHandler),t.PanZoomCanvasKeyboardHandler.prototype.Init=function(e,i){t.PanZoomCanvasKeyboardHandler.superclass.Init.call(this,i),this._component=e},t.PanZoomCanvasKeyboardHandler.prototype.processKeyDown=function(e){var i=e.keyCode,n=this._component.getPanZoomCanvas();if(i==t.KeyboardEvent.PAGE_UP)e.ctrlKey||e.shiftKey?n.panBy(n.getPanIncrement(),0):n.panBy(0,n.getPanIncrement());else if(i==t.KeyboardEvent.PAGE_DOWN)e.ctrlKey||e.shiftKey?n.panBy(-n.getPanIncrement(),0):n.panBy(0,-n.getPanIncrement());else if(i==t.KeyboardEvent.FORWARD_SLASH){var o=n.getControlPanel();o&&o.toggleExpandCollapse()}else if(t.KeyboardEvent.isEquals(e)||t.KeyboardEvent.isPlus(e))n.zoomTo(n.getZoom()+n.getZoomIncrement());else if(t.KeyboardEvent.isMinus(e)||t.KeyboardEvent.isUnderscore(e))n.zoomTo(n.getZoom()-n.getZoomIncrement());else{if(i!=t.KeyboardEvent.ZERO&&i!=t.KeyboardEvent.NUMPAD_ZERO||e.ctrlKey||e.shiftKey)return t.PanZoomCanvasKeyboardHandler.superclass.processKeyDown.call(this,e);n.zoomToFit()}},t.CollapsiblePanel=function(t,e,i,n,o,r,s,a){this.Init(t,e,i,n,o,r,s,a)},t.CollapsiblePanel.COLLAPSE_NORTHEAST="col_northeast";t.CollapsiblePanel.COLLAPSE_SOUTHEAST="col_southeast";t.CollapsiblePanel.COLLAPSE_NORTHWEST="col_northwest",t.CollapsiblePanel.COLLAPSE_SOUTHWEST="col_southwest",t.CollapsiblePanel.ANIMATIONDURATION=.25,t.CollapsiblePanel.BODYCOLOR="#EBEFF5",t.CollapsiblePanel.TITLEBARCLOSEICON_WIDTH=10,t.CollapsiblePanel.TITLEBARCLOSEICON_HEIGHT=10,t.CollapsiblePanel.BUTTONHEIGHT=25,t.CollapsiblePanel.BUTTONWIDTH=10,t.CollapsiblePanel._CONTENT_PADDING=5,t.Obj.createSubclass(t.CollapsiblePanel,t.Container),t.CollapsiblePanel.prototype.Init=function(e,i,n,o,r,s,a,l){t.CollapsiblePanel.superclass.Init.call(this,e),this._maxWidth=i,this._maxHeight=n,this.setCollapseDirection(o),this._buttonImages=r,this._isFixed=l?l:t.Agent.isEnvironmentBatik(),this._expandTooltip=null,this._collapseTooltip=null,this._animation=null,this._styleMap=s,this._borderColor=t.StyleUtils.getStyle(this._styleMap,t.CSSStyle.BORDER_COLOR,null),this._borderRadius=parseInt(t.StyleUtils.getStyle(this._styleMap,t.CSSStyle.BORDER_RADIUS,null)),this._bgColor=t.StyleUtils.getStyle(this._styleMap,t.CSSStyle.BACKGROUND_COLOR,null),this._bgAlpha=t.StyleUtils.getStyle(this._styleMap,t.ControlPanel.BG_ALPHA,1),void 0!==a?this._collapse=!a:this._collapse=!1,this._contentContainer=new t.Container(e),this.addChild(this._contentContainer),this._contentContainer.setTranslate(t.CollapsiblePanel._CONTENT_PADDING,t.CollapsiblePanel._CONTENT_PADDING),this.addEvtListener(t.MouseEvent.MOUSEOVER,this.HandleMouseOver,!1,this),this.addEvtListener(t.MouseEvent.MOUSEOUT,this.HandleMouseOut,!1,this)},t.CollapsiblePanel.prototype._drawButton=function(){if(!this._isFixed){this._buttonFrame=t.ControlPanelLAFUtils.createEmptyViewClosedFrame(this.getCtx(),t.CollapsiblePanel.BUTTONHEIGHT,this._styleMap,!1),this._buttonFrame.setAlpha(this._styleMap[t.ControlPanel.FRAME_ROLLOUT_ALPHA]),this.addChild(this._buttonFrame);var e=this._collapseDir==t.CollapsiblePanel.COLLAPSE_NORTHWEST||this._collapseDir==t.CollapsiblePanel.COLLAPSE_SOUTHWEST;this.isCollapsed()?this._collapseExpandButton=t.ButtonLAFUtils.createExpandButton(this.getCtx(),this._buttonImages,t.CollapsiblePanel.BUTTONHEIGHT,this._styleMap,e?t.ButtonLAFUtils.DIR_LEFT:t.ButtonLAFUtils.DIR_RIGHT):this._collapseExpandButton=t.ButtonLAFUtils.createCollapseButton(this.getCtx(),this._buttonImages,t.CollapsiblePanel.BUTTONHEIGHT,this._styleMap,e?t.ButtonLAFUtils.DIR_LEFT:t.ButtonLAFUtils.DIR_RIGHT),this._buttonFrame.addChild(this._collapseExpandButton),this._buttonFrame.setTranslateX(e?this._width:-t.CollapsiblePanel.BUTTONWIDTH),t.Agent.isTouchDevice()?this._collapseExpandButton.addEvtListener(t.TouchEvent.TOUCHSTART,this.OnButtonClick,!1,this):(this._collapseExpandButton.addEvtListener(t.MouseEvent.CLICK,this.OnButtonClick,!1,this),this._collapseExpandButton.addEvtListener(t.MouseEvent.MOUSEOVER,this.OnButtonHoverOver,!1,this),this._collapseExpandButton.addEvtListener(t.MouseEvent.MOUSEOUT,this.OnButtonHoverOut,!1,this))}},t.CollapsiblePanel.prototype.setBackgroundFill=function(t){this._background.setFill(t)},t.CollapsiblePanel.prototype.setBackgroundStroke=function(t){this._background.setStroke(t)},t.CollapsiblePanel.prototype.setButtonTooltips=function(t,e){this._expandTooltip=t,this._collapseTooltip=e},t.CollapsiblePanel.prototype.addContent=function(e){this._contentContainer.addChild(e),e.addEvtListener(t.ResizeEvent.RESIZE_EVENT,this.HandleResize,!1,this);var i=this._contentContainer.getDimensions();if(this._width=Math.min(this._maxWidth,i.w+2*t.CollapsiblePanel._CONTENT_PADDING),this._height=Math.min(this._maxHeight,i.h+2*t.CollapsiblePanel._CONTENT_PADDING),this._background){this._background.setCmds(this._getOutlinePath(this._width,this._height));var n=this._collapseDir==t.CollapsiblePanel.COLLAPSE_NORTHWEST||this._collapseDir==t.CollapsiblePanel.COLLAPSE_SOUTHWEST;this._buttonFrame&&n&&this._buttonFrame.setTranslateX(this._width)}else this._background=this._createRoundRectangle(this._width,this._height),this.addChildAt(this._background,0),this._drawButton();this._collapse&&this._collapseExpand(!1)},t.CollapsiblePanel.prototype.HandleResize=function(e){var i=e.getWidth()+2*t.CollapsiblePanel._CONTENT_PADDING,n=e.getHeight()+2*t.CollapsiblePanel._CONTENT_PADDING;this._background.setCmds(this._getOutlinePath(i,n));var o=this._collapseDir==t.CollapsiblePanel.COLLAPSE_NORTHWEST||this._collapseDir==t.CollapsiblePanel.COLLAPSE_SOUTHWEST;this._buttonFrame&&o&&this._buttonFrame.setTranslateX(i),this.FireListener(new t.ResizeEvent(i,n,0,0))},t.CollapsiblePanel.prototype.isCollapsed=function(){return this._collapse},t.CollapsiblePanel.prototype.setCollapsed=function(e){this._collapse!=e&&(this._collapse=e,this._collapseExpand(!0),this.FireListener(new t.CollapsiblePanelEvent(e?t.CollapsiblePanelEvent.SUBTYPE_HIDE:t.CollapsiblePanelEvent.SUBTYPE_SHOW)))},t.CollapsiblePanel.prototype.setCollapseDirection=function(e){this._collapseDir=e?e:t.CollapsiblePanel.COLLAPSE_NORTHEAST,t.Agent.isRightToLeft(this.getCtx())&&(this._collapseDir==t.CollapsiblePanel.COLLAPSE_NORTHEAST?this._collapseDir=t.CollapsiblePanel.COLLAPSE_NORTHWEST:this._collapseDir==t.CollapsiblePanel.COLLAPSE_NORTHWEST?this._collapseDir=t.CollapsiblePanel.COLLAPSE_NORTHEAST:this._collapseDir==t.CollapsiblePanel.COLLAPSE_SOUTHEAST?this._collapseDir=t.CollapsiblePanel.COLLAPSE_SOUTHWEST:this._collapseDir==t.CollapsiblePanel.COLLAPSE_SOUTHWEST&&(this._collapseDir=t.CollapsiblePanel.COLLAPSE_SOUTHEAST))},t.CollapsiblePanel.prototype.getMaxWidth=function(){return this._maxWidth},t.CollapsiblePanel.prototype.getMaxContentWidth=function(){return this._maxWidth-2*t.CollapsiblePanel._CONTENT_PADDING},t.CollapsiblePanel.prototype.getMaxHeight=function(){return this._maxHeight},t.CollapsiblePanel.prototype.getMaxContentHeight=function(){return this._maxHeight-2*t.CollapsiblePanel._CONTENT_PADDING},t.CollapsiblePanel.prototype._getRefPoint=function(e,i){return this.isCollapsed()?e:i?new t.Point(1/e.x,1/e.y):new t.Point(-e.x,-e.y)},t.CollapsiblePanel.prototype._collapseExpand=function(e){this._animation&&(this._animationStopped=!0,this._animation.stop(!0));var i=this._collapseDir==t.CollapsiblePanel.COLLAPSE_NORTHWEST||this._collapseDir==t.CollapsiblePanel.COLLAPSE_NORTHEAST,n=this._collapseDir==t.CollapsiblePanel.COLLAPSE_NORTHWEST||this._collapseDir==t.CollapsiblePanel.COLLAPSE_SOUTHWEST,o=n?0:this._width,r=i?0:this._height,s=new t.Point(1/this._width,1/this._height),a=new t.Point(o,r),l=i?0:t.CollapsiblePanel.BUTTONHEIGHT,h=new t.Point(n?-this._width:this._width,r-l);e||(this._background.setAlpha(0),this._buttonFrame&&this._buttonFrame.setAlpha(0));var u=new t.AnimScaleBy(this.getCtx(),this._background,this._getRefPoint(s,!0),e?t.CollapsiblePanel.ANIMATIONDURATION:1e-5),d=new t.AnimMoveBy(this.getCtx(),this._buttonFrame,this._getRefPoint(h),e?t.CollapsiblePanel.ANIMATIONDURATION:1e-5),c=new t.AnimMoveBy(this.getCtx(),this._background,this._getRefPoint(a),e?t.CollapsiblePanel.ANIMATIONDURATION:1e-5);this._animation=new t.ParallelPlayable(this.getCtx(),u,d,c),this._animation&&(this.getCtx().getTooltipManager().hideTooltip(),this.removeEvtListener(t.MouseEvent.MOUSEOVER,this.HandleMouseOver,!1,this),this.removeEvtListener(t.MouseEvent.MOUSEOUT,this.HandleMouseOut,!1,this),this._collapseExpandButton&&(this._collapseExpandButton.removeEvtListener(t.TouchEvent.TOUCHSTART,this.OnButtonClick,!1,this),this._collapseExpandButton.removeEvtListener(t.MouseEvent.CLICK,this.OnButtonClick,!1,this),this._collapseExpandButton.removeEvtListener(t.MouseEvent.MOUSEOVER,this.OnButtonHoverOver,!1,this),this._collapseExpandButton.removeEvtListener(t.MouseEvent.MOUSEOUT,this.OnButtonHoverOut,!1,this)),this.isCollapsed()&&this._contentContainer.setAlpha(0),this._animation.setOnEnd(this.OnAnimationEnd,this),this._animation.play())},t.CollapsiblePanel.prototype._createRoundRectangle=function(e,i){var n=new t.Path(this.getCtx(),this._getOutlinePath(e,i)),o=this._styleMap[t.ControlPanel.FRAME_ROLLOUT_ALPHA];return n.setSolidFill(this._bgColor,this._bgAlpha),n.setSolidStroke(this._borderColor,o),n},t.CollapsiblePanel.prototype._getOutlinePath=function(e,i){var n,o=this._borderRadius,r=this._collapseDir==t.CollapsiblePanel.COLLAPSE_NORTHWEST||this._collapseDir==t.CollapsiblePanel.COLLAPSE_SOUTHWEST;return i<=t.CollapsiblePanel.BUTTONHEIGHT&&(i=t.CollapsiblePanel.BUTTONHEIGHT),n=this._isFixed||r?t.PathUtils.moveTo(o,0):t.PathUtils.moveTo(0,0),n+=t.PathUtils.lineTo(e-o,0),!this._isFixed&&r?(n+=t.PathUtils.lineTo(e,0),n+=t.PathUtils.lineTo(e,o)):n+=t.PathUtils.quadTo(e,0,e,o),!this._isFixed&&i==t.CollapsiblePanel.BUTTONHEIGHT&&r?n+=t.PathUtils.lineTo(e,i):(n+=t.PathUtils.lineTo(e,i-o),n+=t.PathUtils.quadTo(e,i,e-o,i)),n+=t.PathUtils.lineTo(o,i),n+=this._isFixed||i!=t.CollapsiblePanel.BUTTONHEIGHT||r?t.PathUtils.quadTo(0,i,0,i-o):t.PathUtils.lineTo(0,i),(this._isFixed||r)&&(n+=t.PathUtils.lineTo(0,o),n+=t.PathUtils.quadTo(0,0,o,0)),n+=t.PathUtils.closePath()},t.CollapsiblePanel.prototype.OnAnimationEnd=function(){this._animationStopped=!1,this._animation=null;var e=this._background.getStroke().clone();e.setAlpha(this._styleMap[t.ControlPanel.FRAME_ROLLOUT_ALPHA]),this._background.setStroke(e);var i=this._styleMap[t.ControlPanel.BG_ROLLOUT_ALPHA],n=this._background.getFill().clone();n.setAlpha(i),this._background.setFill(n),this._buttonFrame&&this._buttonFrame.setAlpha(this._styleMap[t.ControlPanel.FRAME_ROLLOUT_ALPHA]),this.isCollapsed()||this._contentContainer.setAlpha(1);var o=this._collapseDir==t.CollapsiblePanel.COLLAPSE_NORTHWEST||this._collapseDir==t.CollapsiblePanel.COLLAPSE_SOUTHWEST;this._collapseExpandButton&&(this.isCollapsed()?this._collapseExpandButton=t.ButtonLAFUtils.createExpandButton(this.getCtx(),this._buttonImages,t.CollapsiblePanel.BUTTONHEIGHT,this._styleMap,o?t.ButtonLAFUtils.DIR_LEFT:t.ButtonLAFUtils.DIR_RIGHT):this._collapseExpandButton=t.ButtonLAFUtils.createCollapseButton(this.getCtx(),this._buttonImages,t.CollapsiblePanel.BUTTONHEIGHT,this._styleMap,o?t.ButtonLAFUtils.DIR_LEFT:t.ButtonLAFUtils.DIR_RIGHT),this._buttonFrame.addChild(this._collapseExpandButton),this._buttonFrame.removeChildAt(0),t.Agent.isTouchDevice()?this._collapseExpandButton.addEvtListener(t.TouchEvent.TOUCHSTART,this.OnButtonClick,!1,this):(this._collapseExpandButton.addEvtListener(t.MouseEvent.CLICK,this.OnButtonClick,!1,this),this._collapseExpandButton.addEvtListener(t.MouseEvent.MOUSEOVER,this.OnButtonHoverOver,!1,this),this._collapseExpandButton.addEvtListener(t.MouseEvent.MOUSEOUT,this.OnButtonHoverOut,!1,this)))},t.CollapsiblePanel.prototype.OnButtonClick=function(t){this.getCtx().getTooltipManager().hideTooltip(),this.setCollapsed(!this.isCollapsed())},t.CollapsiblePanel.prototype.OnButtonHoverOver=function(t){var e=this.isCollapsed()?this._expandTooltip:this._collapseTooltip;null!=e&&this.getCtx().getTooltipManager().showTooltip(t.pageX,t.pageY,e,this._collapseExpandButton,!0)},t.CollapsiblePanel.prototype.OnButtonHoverOut=function(t){this.getCtx().getTooltipManager().hideTooltip()},t.CollapsiblePanel.prototype.HandleMouseOver=function(e){var i=this._background.getStroke().clone();i.setAlpha(this._styleMap[t.ControlPanel.FRAME_ROLLOVER_ALPHA]),this._background.setStroke(i);var n=this._styleMap[t.ControlPanel.BG_ROLLOVER_ALPHA],o=this._background.getFill().clone();o.setAlpha(n),this._background.setFill(o),this._buttonFrame&&this._buttonFrame.setAlpha(this._styleMap[t.ControlPanel.FRAME_ROLLOVER_ALPHA])},t.CollapsiblePanel.prototype.HandleMouseOut=function(e){var i=this._background.getStroke().clone();i.setAlpha(this._styleMap[t.ControlPanel.FRAME_ROLLOUT_ALPHA]),this._background.setStroke(i);var n=this._background.getFill().clone();n.setAlpha(this._bgAlpha),this._background.setFill(n),this._buttonFrame&&this._buttonFrame.setAlpha(this._styleMap[t.ControlPanel.FRAME_ROLLOUT_ALPHA])},t.CollapsiblePanelEvent=function(e){this.Init(t.CollapsiblePanelEvent.TYPE),this._subtype=e},t.Obj.createSubclass(t.CollapsiblePanelEvent,t.BaseComponentEvent),t.CollapsiblePanelEvent.TYPE="dvtCollapsiblePanelEvent",t.CollapsiblePanelEvent.SUBTYPE_HIDE="hide",t.CollapsiblePanelEvent.SUBTYPE_SHOW="show",t.CollapsiblePanelEvent.prototype.getSubType=function(){return this._subtype},t.ImageLAFUtils={},t.Obj.createSubclass(t.ImageLAFUtils,t.Obj),t.ImageLAFUtils.loadIcon=function(e,i){var n=new t.Image(e,i);return n.setMouseEnabled(!1),t.ImageLoader.loadImage(e,i,function(t){null!=t&&t.width&&t.height&&(n.setWidth(t.width),n.setHeight(t.height))}),n},t.ButtonLAFUtils={},t.Obj.createSubclass(t.ButtonLAFUtils,t.Obj),t.ButtonLAFUtils.EXPAND_COLLAPSE_BUTTON_IMG_OFFSET=-6,t.ButtonLAFUtils.CONTROL_BUTTON_WIDTH=23,t.ButtonLAFUtils.CONTROL_BUTTON_HEIGHT=21,t.ButtonLAFUtils.ZOOM_BUTTON_HEIGHT=20,t.ButtonLAFUtils.OPEN_CLOSE_IMAGE_WIDTH=22,t.ButtonLAFUtils.OPEN_CLOSE_IMAGE_HEIGHT=20,t.ButtonLAFUtils.VIEW_PANEL_HEIGHT=47,t.ButtonLAFUtils.VIEW_PANEL_HALF_HEIGHT=26,t.ButtonLAFUtils.SIN_PI_4=Math.sin(Math.PI/4),t.ButtonLAFUtils.TAN_PI_8=Math.tan(Math.PI/8),t.ButtonLAFUtils.BORDER_COLOR="#7C8191",t.ButtonLAFUtils.GRADIENT_DARK="#E0E1E1",t.ButtonLAFUtils.GRADIENT_LIGHT="#F0F1F2",t.ButtonLAFUtils.ROUND_RECT_ELLIPSE=8,t.ButtonLAFUtils.DEFAULT_FILL_TYPE="solid",t.ButtonLAFUtils.DEFAULT_BORDER_COLOR="#7BA0D9",t.ButtonLAFUtils.DEFAULT_MID_COLOR="#3474D3",t.ButtonLAFUtils.DEFAULT_END_COLOR="#BFD8FB",t.ButtonLAFUtils._ZOOMIN_ENA="zoominUp",t.ButtonLAFUtils._ZOOMIN_OVR="zoominOver",t.ButtonLAFUtils._ZOOMIN_DWN="zoominDown",t.ButtonLAFUtils._ZOOMIN_DISABLED="zoominDisabled",t.ButtonLAFUtils._ZOOMTOFIT_ENA="zoomtofitUp",t.ButtonLAFUtils._ZOOMTOFIT_OVR="zoomtofitOver",t.ButtonLAFUtils._ZOOMTOFIT_DWN="zoomtofitDown",t.ButtonLAFUtils._ZOOMOUT_ENA="zoomoutUp",t.ButtonLAFUtils._ZOOMOUT_OVR="zoomoutOver",t.ButtonLAFUtils._ZOOMOUT_DWN="zoomoutDown",t.ButtonLAFUtils._ZOOMOUT_DISABLED="zoomoutDisabled",t.ButtonLAFUtils._PAN_ENA="pandialUp",t.ButtonLAFUtils._PAN_OVR="pandialOver",t.ButtonLAFUtils._PAN_DWN="pandialDown",t.ButtonLAFUtils._RECENTER_ENA="recenterUp",t.ButtonLAFUtils._RECENTER_OVR="recenterOver",t.ButtonLAFUtils._RECENTER_DWN="recenterDown",t.ButtonLAFUtils._RESET_ENA="resetUp",t.ButtonLAFUtils._RESET_OVR="resetOver",t.ButtonLAFUtils._RESET_DWN="resetDown",t.ButtonLAFUtils._DRILLUP_ENA="drillupUp",t.ButtonLAFUtils._DRILLUP_OVR="drillupOver",t.ButtonLAFUtils._DRILLUP_DWN="drillupDown",t.ButtonLAFUtils._DRILLDOWN_ENA="drilldownUp",t.ButtonLAFUtils._DRILLDOWN_OVR="drilldownOver",t.ButtonLAFUtils._DRILLDOWN_DWN="drilldownDown",t.ButtonLAFUtils._MAX_ENA="maxUp",t.ButtonLAFUtils._MAX_OVR="maxOver",t.ButtonLAFUtils._MAX_DWN="maxDown",t.ButtonLAFUtils._RESTORE_ENA="restoreUp",t.ButtonLAFUtils._RESTORE_OVR="restoreOver",t.ButtonLAFUtils._RESTORE_DWN="restoreDown",t.ButtonLAFUtils._COLLAPSE_ENA="collapseEna",t.ButtonLAFUtils._COLLAPSE_OVR="collapseOvr",t.ButtonLAFUtils._COLLAPSE_DWN="collapseDwn",t.ButtonLAFUtils._EXPAND_ENA="expandEna",t.ButtonLAFUtils._EXPAND_OVR="expandOvr",t.ButtonLAFUtils._EXPAND_DWN="expandDwn",t.ButtonLAFUtils._QUICKQUERY_ENA="quickQueryEna",t.ButtonLAFUtils._QUICKQUERY_OVR="quickQueryOvr",t.ButtonLAFUtils._QUICKQUERY_DWN="quickQueryDwn",t.ButtonLAFUtils._CLEARRESULTS_ENA="clearResultsEna",t.ButtonLAFUtils._CLEARRESULTS_OVR="clearResultsOvr",t.ButtonLAFUtils._CLEARRESULTS_DWN="clearResultsDwn",t.ButtonLAFUtils._UP="Up",t.ButtonLAFUtils._OVER="Over",t.ButtonLAFUtils._DOWN="Down",t.ButtonLAFUtils._SEL="Sel",t.ButtonLAFUtils._R2L="_r",t.ButtonLAFUtils._SYNC="synchronize",t.ButtonLAFUtils.DIR_RIGHT="right",t.ButtonLAFUtils.DIR_LEFT="left",t.ButtonLAFUtils.createPanControl=function(e,n,o,r,s){var a=t.ButtonLAFUtils._createPanButtonState(e,r[t.ButtonLAFUtils._PAN_ENA],s),l=new t.Container(e);l.setTranslate(20,20);var h=t.ButtonLAFUtils._createPanButtonState(e,r[t.ButtonLAFUtils._PAN_DWN],s);h.setTranslate(-20,-20),l.addChild(h);var u=new t.Container(e);u.setTranslate(20,20);var d=t.ButtonLAFUtils._createPanButtonState(e,r[t.ButtonLAFUtils._PAN_OVR],s);d.setTranslate(-20,-20),u.addChild(d);var c=new t.Button(e,a,u,l);if((o&t.ControlPanel.CONTROLS_CENTER_BUTTON)>0){var p=new t.Button(e,t.ButtonLAFUtils._createRecenterButtonState(e,r[t.ButtonLAFUtils._RECENTER_ENA],s),t.ButtonLAFUtils._createRecenterButtonState(e,r[t.ButtonLAFUtils._RECENTER_OVR],s),t.ButtonLAFUtils._createRecenterButtonState(e,r[t.ButtonLAFUtils._RECENTER_DWN],s));p.setTranslate(9,9)}return new i(e,c,p,n,o,s)},t.ButtonLAFUtils.createDrillUpButton=function(e,i,n){var o=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_ENABLED,i[t.ButtonLAFUtils._DRILLUP_ENA],n),r=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_OVER,i[t.ButtonLAFUtils._DRILLUP_OVR],n),s=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_DOWN,i[t.ButtonLAFUtils._DRILLUP_DWN],n),a=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_ENABLED,i[t.ButtonLAFUtils._DRILLUP_ENA],n,null,null,.4);return new t.Button(e,o,r,s,a)},t.ButtonLAFUtils.createDrillDownButton=function(e,i,n){var o=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_ENABLED,i[t.ButtonLAFUtils._DRILLDOWN_ENA],n),r=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_OVER,i[t.ButtonLAFUtils._DRILLDOWN_OVR],n),s=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_DOWN,i[t.ButtonLAFUtils._DRILLDOWN_DWN],n),a=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_ENABLED,i[t.ButtonLAFUtils._DRILLDOWN_ENA],n,null,null,.4);return new t.Button(e,o,r,s,a)},t.ButtonLAFUtils.createResetButton=function(e,i,n){var o=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_ENABLED,i[t.ButtonLAFUtils._RESET_ENA],n),r=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_OVER,i[t.ButtonLAFUtils._RESET_OVR],n),s=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_DOWN,i[t.ButtonLAFUtils._RESET_DWN],n),a=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_ENABLED,i[t.ButtonLAFUtils._RESET_ENA],n);return new t.Button(e,o,r,s,a)},t.ButtonLAFUtils.createZoomToFitButton=function(e,i,n){var o=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_ENABLED,i[t.ButtonLAFUtils._ZOOMTOFIT_ENA],n),r=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_OVER,i[t.ButtonLAFUtils._ZOOMTOFIT_OVR],n),s=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_DOWN,i[t.ButtonLAFUtils._ZOOMTOFIT_DWN],n);return new t.Button(e,o,r,s)},t.ButtonLAFUtils.createZoomInButton=function(e,i,n){var o=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_ENABLED,i[t.ButtonLAFUtils._ZOOMIN_ENA],n),r=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_OVER,i[t.ButtonLAFUtils._ZOOMIN_OVR],n),s=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_DOWN,i[t.ButtonLAFUtils._ZOOMIN_DWN],n),a=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_DISABLED,i[t.ButtonLAFUtils._ZOOMIN_DISABLED],n);return new t.Button(e,o,r,s,a)},t.ButtonLAFUtils.createZoomOutButton=function(e,i,n){var o=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_ENABLED,i[t.ButtonLAFUtils._ZOOMOUT_ENA],n),r=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_OVER,i[t.ButtonLAFUtils._ZOOMOUT_OVR],n),s=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_DOWN,i[t.ButtonLAFUtils._ZOOMOUT_DWN],n),a=t.ButtonLAFUtils._createButtonBaseImage(e,t.Button.STATE_DISABLED,i[t.ButtonLAFUtils._ZOOMOUT_DISABLED],n);return new t.Button(e,o,r,s,a)},t.ButtonLAFUtils.createLayoutItemButtonState=function(e,i,n,o,r,s){var a=t.StyleUtils.getStyle(s,"buttonRadius",0),l=t.StyleUtils.getStyle(s,t.ControlPanel.CP_BUTTON_WIDTH,0),h=t.StyleUtils.getStyle(s,t.ControlPanel.CP_BUTTON_WIDTH,0),u=t.ButtonLAFUtils._createBaseButtonShape(e,o,a,l,h,s);t.ButtonLAFUtils._setButtonColors(o,u,l,h+2*a,0,0,s,!0);var d=t.ButtonLAFUtils._getLayoutURI(e,o,n),c=t.ButtonLAFUtils._loadIcon(e,r[d],l,h);return c&&u.addChild(c),u},t.ButtonLAFUtils._getLayoutURI=function(e,i,n,o){var r=n,s="";return i==t.Button.STATE_ENABLED?i=t.ButtonLAFUtils._UP:i==t.Button.STATE_OVER?i=t.ButtonLAFUtils._OVER:i==t.Button.STATE_DOWN&&(i=t.ButtonLAFUtils._DOWN),o&&(r+=t.ButtonLAFUtils._SEL,t.Agent.isRightToLeft(e)&&(s=t.ButtonLAFUtils._R2L)),r+=i+s},t.ButtonLAFUtils.createPanelCardButtonState=function(e,i,n,o){var r=t.ButtonLAFUtils._getLayoutURI(e,i,t.ButtonLAFUtils._SYNC,!0),s=t.ButtonLAFUtils._createButtonBaseImage(e,i,o[r],n);return s},t.ButtonLAFUtils.createPanelCardSyncItemState=function(e,i,n,o,r,s){var a=t.StyleUtils.getStyle(r,"buttonRadius",0),l=t.ButtonLAFUtils._createBaseButtonShape(e,i,a,n,o,r);return t.ButtonLAFUtils._setButtonColors(i,l,n,o+2*a,0,0,r,!0),l},t.ButtonLAFUtils.createControlButtonState=function(e,i,n,o,r){var s=t.ButtonLAFUtils._getLayoutURI(e,n,i),a=t.ButtonLAFUtils._createButtonBaseImage(e,n,o[s],r);return a},t.ButtonLAFUtils.createExpandButton=function(e,i,n,o,r){var s=r==t.ButtonLAFUtils.DIR_RIGHT,a=t.ButtonLAFUtils._createCollapseExpandButtonState(e,t.Button.STATE_ENABLED,n,s?i[t.ButtonLAFUtils._COLLAPSE_ENA]:i[t.ButtonLAFUtils._EXPAND_ENA],o,s),l=t.ButtonLAFUtils._createCollapseExpandButtonState(e,t.Button.STATE_OVER,n,s?i[t.ButtonLAFUtils._COLLAPSE_OVR]:i[t.ButtonLAFUtils._EXPAND_OVR],o,s),h=t.ButtonLAFUtils._createCollapseExpandButtonState(e,t.Button.STATE_DOWN,n,s?i[t.ButtonLAFUtils._COLLAPSE_DWN]:i[t.ButtonLAFUtils._EXPAND_DWN],o,s);return new t.Button(e,a,l,h)},t.ButtonLAFUtils.createCollapseButton=function(e,i,n,o,r){var s=r==t.ButtonLAFUtils.DIR_RIGHT,a=t.ButtonLAFUtils._createCollapseExpandButtonState(e,t.Button.STATE_ENABLED,n,s?i[t.ButtonLAFUtils._EXPAND_ENA]:i[t.ButtonLAFUtils._COLLAPSE_ENA],o,s),l=t.ButtonLAFUtils._createCollapseExpandButtonState(e,t.Button.STATE_OVER,n,s?i[t.ButtonLAFUtils._EXPAND_OVR]:i[t.ButtonLAFUtils._COLLAPSE_OVR],o,s),h=t.ButtonLAFUtils._createCollapseExpandButtonState(e,t.Button.STATE_DOWN,n,s?i[t.ButtonLAFUtils._EXPAND_DWN]:i[t.ButtonLAFUtils._COLLAPSE_DWN],o,s);return new t.Button(e,a,l,h)},t.ButtonLAFUtils.createQuickQueryButton=function(e,i){var n=t.ButtonLAFUtils._createQuickQueryButtonState(e,t.Button.STATE_ENABLED,i[t.ButtonLAFUtils._QUICKQUERY_ENA]),o=t.ButtonLAFUtils._createQuickQueryButtonState(e,t.Button.STATE_OVER,i[t.ButtonLAFUtils._QUICKQUERY_OVR]),r=t.ButtonLAFUtils._createQuickQueryButtonState(e,t.Button.STATE_DOWN,i[t.ButtonLAFUtils._QUICKQUERY_DWN]);return new t.Button(e,n,o,r)},t.ButtonLAFUtils.createClearResultsButton=function(e,i){var n=t.ButtonLAFUtils._createQuickQueryButtonState(e,t.Button.STATE_ENABLED,i[t.ButtonLAFUtils._CLEARRESULTS_ENA]),o=t.ButtonLAFUtils._createQuickQueryButtonState(e,t.Button.STATE_OVER,i[t.ButtonLAFUtils._CLEARRESULTS_OVR]),r=t.ButtonLAFUtils._createQuickQueryButtonState(e,t.Button.STATE_DOWN,i[t.ButtonLAFUtils._CLEARRESULTS_DWN]);return new t.Button(e,n,o,r)},t.ButtonLAFUtils._createButtonBaseImage=function(e,i,n,o,r,s,a){var l=t.StyleUtils.getStyle(o,"buttonRadius",0);"undefined"!==r&&null!=r||(r=t.StyleUtils.getStyle(o,t.ControlPanel.CP_BUTTON_WIDTH,0)),"undefined"!==s&&null!=s||(s=t.StyleUtils.getStyle(o,t.ControlPanel.CP_BUTTON_WIDTH,0));var h=t.ButtonLAFUtils._drawBaseButton(e,i,l,r,s,o),u=t.ButtonLAFUtils._loadIcon(e,n,r,s);return u&&(null!=a&&u.setAlpha(a),h.addChild(u)),h},t.ButtonLAFUtils._loadIcon=function(e,i,n,o){var r=new t.Image(e,i);return r.setMouseEnabled(!1),t.ImageLoader.loadImage(e,i,function(t){if(null!=t&&t.width&&t.height){r.setWidth(t.width),r.setHeight(t.height);var e=o/2-t.height/2,i=n/2-t.width/2;r.setTranslate(i,e)}}),r},t.ButtonLAFUtils._createPanButtonState=function(e,i,n){var o=new t.Container(e),r=new t.Circle(e,20,20,20);r.setAlpha(0);var s=t.StyleUtils.getStyle(n,t.CSSStyle.BACKGROUND_COLOR,null);r.setSolidFill(s),o.addChild(r);var a=t.ImageLAFUtils.loadIcon(e,i);return a&&o.addChild(a),o},t.ButtonLAFUtils._createRecenterButtonState=function(e,i,n){var o=new t.Container(e),r=new t.Circle(e,11,11,8);r.setAlpha(0);var s=t.StyleUtils.getStyle(n,t.CSSStyle.BACKGROUND_COLOR,null);r.setSolidFill(s),o.addChild(r);var a=t.ImageLAFUtils.loadIcon(e,i);return a&&o.addChild(a),o},t.ButtonLAFUtils._createCollapseExpandButtonState=function(e,i,n,o,r,s){n||(n=47);var a=t.ButtonLAFUtils._drawOpenCloseButtonHelper(e,i,n,r,s),l=t.ImageLAFUtils.loadIcon(e,o);if(l){var h=t.StyleUtils.getStyle(r,t.ControlPanel.CP_IMAGE_WIDTH,0),u=t.StyleUtils.getStyle(r,t.ControlPanel.CP_IMAGE_HEIGHT,0);a.addChild(l);var d=t.StyleUtils.getStyle(r,t.ControlPanel.CP_OPEN_CLOSE_BUTTON_WIDTH,0),c=(d-h)/2,p=(n-u)/2;l.setTranslate(c,p)}return a},t.ButtonLAFUtils._createQuickQueryButtonState=function(e,i,n){var o=t.ImageLAFUtils.loadIcon(e,n);return o.setMouseEnabled(!0),o},t.ButtonLAFUtils.createPanButtonBackground=function(e,i){var n=t.ButtonLAFUtils._drawPanButtonBase(e),o=20,r=2*o,s=r,a=0,l=0,h=t.StyleUtils.getStyle(i,t.CSSStyle.BACKGROUND_COLOR,null),u=t.StyleUtils.getStyle(i,t.CSSStyle.BORDER_COLOR,null),d=t.StyleUtils.getStyle(i,t.CSSStyle.FILL_TYPE,null);if("solid"==d)n.setSolidStroke(u),n.setSolidFill(h);else{var c=36,p=["#8D93A5","#E0EAEB",u],_=[1,1,1],g=[0,125/255,1];n.setStroke(new t.LinearGradientStroke(c,p,_,g,[a,l,r,s],1));var m=90,f=[h,h,"#5A83BE",h],y=[.9,.1,0,.7],v=[0,105/255,150/255,1];n.setFill(new t.LinearGradientFill(m,f,y,v,[a,l,r,s]))}return n},t.ButtonLAFUtils.createPanButtonUnderlay=function(e,i){var n=t.ButtonLAFUtils._drawPanButtonBase(e),o=t.StyleUtils.getStyle(i,t.CSSStyle.BACKGROUND_COLOR,null);return n.setSolidStroke(o),n.setSolidFill(o),n},t.ButtonLAFUtils._drawPanButtonBase=function(e){var i=20,n=i,o=i,r=t.PathUtils.moveTo(n+i,o)+t.PathUtils.quadTo(i+n,t.ButtonLAFUtils.TAN_PI_8*i+o,t.ButtonLAFUtils.SIN_PI_4*i+n,t.ButtonLAFUtils.SIN_PI_4*i+o)+t.PathUtils.quadTo(t.ButtonLAFUtils.TAN_PI_8*i+n,i+o,n,i+o)+t.PathUtils.quadTo(-t.ButtonLAFUtils.TAN_PI_8*i+n,i+o,-t.ButtonLAFUtils.SIN_PI_4*i+n,t.ButtonLAFUtils.SIN_PI_4*i+o)+t.PathUtils.quadTo(-i+n,t.ButtonLAFUtils.TAN_PI_8*i+o,-i+n,o)+t.PathUtils.quadTo(-i+n,-t.ButtonLAFUtils.TAN_PI_8*i+o,-t.ButtonLAFUtils.SIN_PI_4*i+n,-t.ButtonLAFUtils.SIN_PI_4*i+o)+t.PathUtils.quadTo(-t.ButtonLAFUtils.TAN_PI_8*i+n,-i+o,n,-i+o)+t.PathUtils.quadTo(t.ButtonLAFUtils.TAN_PI_8*i+n,-i+o,t.ButtonLAFUtils.SIN_PI_4*i+n,-t.ButtonLAFUtils.SIN_PI_4*i+o)+t.PathUtils.quadTo(i+n,-t.ButtonLAFUtils.TAN_PI_8*i+o,i+n,o)+t.PathUtils.closePath();return new t.Path(e,r,"draw_pan_button")},t.ButtonLAFUtils._setGradientBorder=function(e,i,n,o,r){e.setSolidStroke("#FFFFFF");var s=63,a=["#8D93A5","#E0EAEB","#FFFFFF"],l=[1,1,1],h=[0,155/255,1];e.setStroke(new t.LinearGradientStroke(s,a,l,h,[o,r,i,n],1))},t.ButtonLAFUtils._setButtonColors=function(e,i,n,o,r,s,a,l){var h=t.StyleUtils.getStyle(a,t.ControlPanel.CP_PANEL_DRAWER_STYLES,null);if(h)!l||l&&e==t.Button.STATE_ENABLED?i.setInvisibleFill():e!=t.Button.STATE_OVER&&e!=t.Button.STATE_DOWN||i.setFill(new t.SolidFill("#EBECED"));else if(a[t.PanZoomComponent.SKIN_NAME]==t.CSSStyle.SKIN_SKYROS)switch(e){case t.Button.STATE_OVER:i.setFill(new t.SolidFill("#FFFFFF",.7)),i.setStroke(new t.SolidStroke(t.StyleUtils.getStyle(a,t.CSSStyle.BORDER_COLOR,null)));break;case t.Button.STATE_DOWN:i.setFill(new t.SolidFill("#B3C6DB")),i.setStroke(new t.SolidStroke(t.StyleUtils.getStyle(a,t.CSSStyle.BORDER_COLOR,null)));break;case t.Button.STATE_DISABLED:case t.Button.STATE_ENABLED:default:i.setInvisibleFill()}else{var u,d,c,p=90;switch(e){case t.Button.STATE_DISABLED:case t.Button.STATE_ENABLED:u=["#5B868A","#FFFFFF","#FFFFFF","#5B868A"],d=[.01,0,.05,.01],c=[0,120/255,130/255,1];break;case t.Button.STATE_OVER:t.ButtonLAFUtils._setGradientBorder(i,n,o,r,s),u=["#FFFFFF","#4671B0","#4671B0","#FFFFFF"],d=[.5,.2,.1,.7],c=[0,120/255,130/255,1];break;case t.Button.STATE_DOWN:t.ButtonLAFUtils._setGradientBorder(i,n,o,r,s),u=["#E0EAEB","#5B868A","#4671B0"],d=[.1,.3,.6],c=[0,130/255,1]}i.setFill(new t.LinearGradientFill(p,u,d,c,[r,s,n,o]))}},t.ButtonLAFUtils._setCloseButtonColors=function(e,i,n,o,r,s,a,l){var h=t.StyleUtils.getStyle(l,t.ControlPanel.CP_PANEL_DRAWER_STYLES,null);if(h)n.setInvisibleFill();else{var u,d,c=t.StyleUtils.getStyle(l,t.CSSStyle.FILL_TYPE,null),p=t.StyleUtils.getStyle(l,t.CSSStyle.BORDER_COLOR,null);if("solid"==c){var _,g,m=t.StyleUtils.getStyle(l,t.CSSStyle.BACKGROUND_COLOR,null);switch(i){case t.Button.STATE_ENABLED:_=t.StyleUtils.getStyle(l,t.ControlPanel.BG_ALPHA,1),g=t.StyleUtils.getStyle(l,t.ControlPanel.FRAME_ROLLOUT_ALPHA,1);
break;case t.Button.STATE_DOWN:case t.Button.STATE_OVER:_=t.StyleUtils.getStyle(l,t.ControlPanel.BG_ROLLOVER_ALPHA,1),g=t.StyleUtils.getStyle(l,t.ControlPanel.FRAME_ROLLOVER_ALPHA,1)}d=new t.SolidFill(m,_),u=new t.SolidStroke(p,g)}else{var f,y,v,S=0;switch(i){case t.Button.STATE_ENABLED:f=["#FFFFFF","#5B868A","#5B868A"],y=[0,.2,.3],v=[0,130/255,1];break;case t.Button.STATE_OVER:f=["#FFFFFF","#FFFFFF","#4671B0","#4671B0"],y=[.1,.2,.1,.6],v=[0,120/255,130/255,1];break;case t.Button.STATE_DOWN:f=["#4671B0","#5B868A","#5B868A"],y=[.5,.2,.4],v=[0,130/255,1]}d=new t.LinearGradientFill(S,f,y,v,[s,a,o,r]),u=new t.SolidStroke(p,1,.8)}n.setStroke(u),n.setFill(d)}},t.ButtonLAFUtils._setSliderButtonColors=function(e,i,n,o,r,s){var a,l,h,u=90;switch(e){case t.Button.STATE_ENABLED:var d=.25;i.setSolidStroke("#FFFFFF",1,d),a=["#FFFFFF","#4671B0","#E0EAEB","#FFFFFF"],l=[.6,.3,.3,.8],h=[0,125/255,130/255,1];break;case t.Button.STATE_OVER:t.ButtonLAFUtils._setGradientBorder(i,n,o,r,s),a=["#4671B0","#FFFFFF","#FFFFFF","#FFFFFF"],l=[.4,.3,.7,1],h=[0,70/255,200/255,1];break;case t.Button.STATE_DOWN:t.ButtonLAFUtils._setGradientBorder(i,n,o,r,s),a=["#FFFFFF","#4671B0","#E0EAEB"],l=[.6,.5,.8],h=[0,130/255,1]}i.setFill(new t.LinearGradientFill(u,a,l,h,[r,s,n,o]))},t.ButtonLAFUtils.GetButtonPathCommands=function(t,e,i,n){var o;return o=n?["M",t,0,"L",i,0,"A",i,i,0,0,0,0,i,"L",0,e-i,"A",i,i,0,0,0,i,e,"L",t,e]:["M",0,0,"L",t-i,0,"A",i,i,0,0,1,t,i,"L",t,e-i,"A",i,i,0,0,1,t-i,e,"L",0,e]},t.ButtonLAFUtils._drawOpenCloseButtonHelper=function(e,i,n,o,r){n||(n=47);var s=0,a=0,l=parseInt(t.StyleUtils.getStyle(o,t.CSSStyle.BORDER_RADIUS,0)),h=t.StyleUtils.getStyle(o,t.ControlPanel.CP_OPEN_CLOSE_BUTTON_WIDTH,0),u=Math.max(n,t.StyleUtils.getStyle(o,t.ControlPanel.CP_BUTTON_HEIGHT,n)),d=t.ButtonLAFUtils.GetButtonPathCommands(h,u,l,r),c=new t.Path(e,d);return t.ButtonLAFUtils._setCloseButtonColors(e,i,c,h,u,s,a,o),c},t.ButtonLAFUtils._drawBaseButton=function(e,i,n,o,r,s){var a=t.ButtonLAFUtils._createBaseButtonShape(e,i,n,o,r,s);return t.ButtonLAFUtils._setButtonColors(i,a,o,r+2*n,0,0,s),a},t.ButtonLAFUtils._createBaseButtonShape=function(e,i,n,o,r,s){if(s[t.PanZoomComponent.SKIN_NAME]==t.CSSStyle.SKIN_SKYROS)return new t.Rect(e,0,0,o,r);o-=2*n,r-=2*n;var a=o+n,l=r+n,h=t.PathUtils.moveTo(a+n,l)+t.PathUtils.quadTo(n+a,t.ButtonLAFUtils.TAN_PI_8*n+l,t.ButtonLAFUtils.SIN_PI_4*n+a,t.ButtonLAFUtils.SIN_PI_4*n+l)+t.PathUtils.quadTo(t.ButtonLAFUtils.TAN_PI_8*n+a,n+l,a,n+l)+t.PathUtils.lineTo(a,l+n)+t.PathUtils.lineTo(a-o,n+l);return a-=o,l=l,h+=t.PathUtils.quadTo(-t.ButtonLAFUtils.TAN_PI_8*n+a,n+l,-t.ButtonLAFUtils.SIN_PI_4*n+a,t.ButtonLAFUtils.SIN_PI_4*n+l)+t.PathUtils.quadTo(-n+a,t.ButtonLAFUtils.TAN_PI_8*n+l,-n+a,l)+t.PathUtils.lineTo(a-n,l)+t.PathUtils.lineTo(a-n,l-r),a=a,l-=r,h+=t.PathUtils.quadTo(-n+a,-t.ButtonLAFUtils.TAN_PI_8*n+l,-t.ButtonLAFUtils.SIN_PI_4*n+a,-t.ButtonLAFUtils.SIN_PI_4*n+l)+t.PathUtils.quadTo(-t.ButtonLAFUtils.TAN_PI_8*n+a,-n+l,a,-n+l)+t.PathUtils.lineTo(a,-n+l)+t.PathUtils.lineTo(a+o,-n+l),a+=o,l=l,h+=t.PathUtils.quadTo(t.ButtonLAFUtils.TAN_PI_8*n+a,-n+l,t.ButtonLAFUtils.SIN_PI_4*n+a,-t.ButtonLAFUtils.SIN_PI_4*n+l)+t.PathUtils.quadTo(n+a,-t.ButtonLAFUtils.TAN_PI_8*n+l,n+a,l)+t.PathUtils.lineTo(a+n,l+r)+t.PathUtils.closePath(),new t.Path(e,h)},t.ButtonLAFUtils.drawDropdownShape=function(e,i,n,o){var r=t.StyleUtils.getStyle(o,"radius",0);i-=2*r,n-=r;var s=i+r,a=n,l=t.PathUtils.moveTo(s+r,a)+t.PathUtils.quadTo(r+s,t.ButtonLAFUtils.TAN_PI_8*r+a,t.ButtonLAFUtils.SIN_PI_4*r+s,t.ButtonLAFUtils.SIN_PI_4*r+a)+t.PathUtils.quadTo(t.ButtonLAFUtils.TAN_PI_8*r+s,r+a,s,r+a)+t.PathUtils.lineTo(s,r+a)+t.PathUtils.lineTo(s-i,r+a);s-=i,a=a,l+=t.PathUtils.quadTo(-t.ButtonLAFUtils.TAN_PI_8*r+s,r+a,-t.ButtonLAFUtils.SIN_PI_4*r+s,t.ButtonLAFUtils.SIN_PI_4*r+a)+t.PathUtils.quadTo(-r+s,t.ButtonLAFUtils.TAN_PI_8*r+a,-r+s,a)+t.PathUtils.lineTo(-r+s,a)+t.PathUtils.lineTo(-r+s,a-n),s=s,a-=n,l+=t.PathUtils.lineTo(s+i+r,a)+t.PathUtils.lineTo(s+i+r,a+n)+t.PathUtils.closePath();var h=new t.Path(e,l);return h},t.ButtonLAFUtils._getDimForced=function(e,i){return i instanceof t.Button&&(i=i.getChildAt(0)),t.DisplayableUtils.getDimForced(e,i)},t.ButtonLAFUtils.parseStyle=function(e,i){var n,o=t.ButtonLAFUtils.DEFAULT_FILL_TYPE,r=t.ButtonLAFUtils.DEFAULT_BORDER_COLOR,s=t.ButtonLAFUtils.DEFAULT_MID_COLOR;i&&(i.getStyle(t.CSSStyle.FILL_TYPE)&&(o=i.getStyle(t.CSSStyle.FILL_TYPE)),i.getStyle(t.CSSStyle.BORDER_COLOR)&&(r=i.getStyle(t.CSSStyle.BORDER_COLOR)),i.getStyle(t.CSSStyle.BACKGROUND_COLOR)&&(s=i.getStyle(t.CSSStyle.BACKGROUND_COLOR)),i.getStyle(t.CSSStyle.BACKGROUND)&&(n=i.getStyle(t.CSSStyle.BACKGROUND)));var a,l=new t.SolidStroke(r);if("solid"==o)a=new t.SolidFill(s);else{var h,u,d,c;if(n&&n.indexOf("linear-gradient")>=0){var p=t.GradientParser.parseCSSGradient(n);p&&(c=p.getAngle(),h=p.getColors(),u=p.getAlphas(),d=p.getRatios())}else{var _=s,g=t.ButtonLAFUtils.DEFAULT_END_COLOR;_!=t.ButtonLAFUtils.DEFAULT_MID_COLOR&&(g=t.ColorUtils.inferColor(t.ButtonLAFUtils.DEFAULT_MID_COLOR,t.ButtonLAFUtils.DEFAULT_END_COLOR,_)),h=[_,g],u=[.6,.8],d=[0,1],c=-270}a=new t.LinearGradientFill(c,h,u,d)}e.setFill(a),e.setStroke(l)},t.exportProperty(t.PanZoomComponent.prototype,"render",t.PanZoomComponent.prototype.render)}(t),t}),define("ojs/internal-deps/dvt/DvtThematicMap",["./DvtToolkit","./DvtPanZoomCanvas"],function(t){return function(t){t.AmxThematicMap=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.AmxThematicMap,t.Container),t.AmxThematicMap._LEGEND_COMPONET_GAP=10,t.AmxThematicMap.prototype.Init=function(i,n,o){t.AmxThematicMap.superclass.Init.call(this,i),this._tmap=new t.ThematicMap(i,n,o),this._tmapContainer=new t.Container(i),this._tmapContainer.addChild(this._tmap),this.addChild(this._tmapContainer),this.Defaults=new e},t.AmxThematicMap.newInstance=function(e,i,n){return new t.AmxThematicMap(e,i,n)},t.AmxThematicMap.prototype.render=function(e,i,n){this.Options=this.Defaults.calcOptions(e),this._width=i,this._height=n;var o=new t.Rectangle(0,0,i,n);this._renderLegend(this,o),this._tmap.render(e,o.w,o.h)},t.AmxThematicMap.prototype._renderLegend=function(i,n){this._legend&&(i.removeChild(this._legend),this._legend=null);var o=new t.Rectangle(t.AmxThematicMap._LEGEND_COMPONET_GAP,t.AmxThematicMap._LEGEND_COMPONET_GAP,n.w-2*t.AmxThematicMap._LEGEND_COMPONET_GAP,n.h-2*t.AmxThematicMap._LEGEND_COMPONET_GAP),r=this.Options,s=r.legend.rendered,a=r.legend.scrolling,l=t.JsonUtils.clone(r.legend);this._addLegendData(this.Options,l);var h=l.sections;if(s&&(!h||0!=h.length)){var u=r.legend.position;delete l.position,l.layout.gapRatio=this.getGapRatio(),l.hideAndShowBehavior="none",l.rolloverBehavior="none",l.scrolling=r.legend.scrolling;var d=t.Legend.newInstance(this._tmap.getCtx());i.addChild(d);var c,p;"auto"==u&&"asNeeded"!==a?u="bottom":"auto"==u&&"asNeeded"==a&&(u="end");var _=t.Agent.isRightToLeft(i.getCtx());"start"==u?u=_?"right":"left":"end"==u&&(u=_?"left":"right"),l.orientation="left"==u||"right"==u?"vertical":"horizontal";var g="top"==u||"bottom"==u;c=g?o.w:r.layout.legendMaxSize*o.w,p=g?r.layout.legendMaxSize*o.h:o.h;var m=d.getPreferredSize(l,c,p);if(m.w>0&&m.h>0){d.render(l,m.w,m.h),this._legend=d;var f=e.getGapSize(this,r.layout.legendGap);switch(t.LayoutUtils.position(o,u,d,m.w,m.h,f),u){case"top":this._tmapContainer.setTranslateY(m.h+t.AmxThematicMap._LEGEND_COMPONET_GAP);case"bottom":n.h=n.h-(m.h+t.AmxThematicMap._LEGEND_COMPONET_GAP);break;case"left":this._tmapContainer.setTranslateX(m.w+t.AmxThematicMap._LEGEND_COMPONET_GAP);case"right":n.w=n.w-(m.w+t.AmxThematicMap._LEGEND_COMPONET_GAP)}}}},t.AmxThematicMap.prototype.getGapRatio=function(){if(null===this.Options.layout.gapRatio||isNaN(this.Options.layout.gapRatio)){var t=Math.min(this._width/400,1),e=Math.min(this._height/300,1);return Math.min(t,e)}return this.Options.layout.gapRatio},t.AmxThematicMap.prototype._addLegendData=function(t,e){if(e.title=t.legend?t.legend.title:null,e.sections=[],t&&t.legend&&t.legend.sections)for(var i=0;i<t.legend.sections.length;i++){var n=t.legend.sections[i];n&&e.sections.push({title:n.title,items:n.items,sections:n.sections})}return e},t.AmxThematicMap.prototype.getDomElementForSubId=function(t){var e;return this._legend&&(e=this._legend.getAutomation().getDomElementForSubId(t)),e?e:this._tmap.getAutomation().getDomElementForSubId(t)},t.AmxThematicMap.prototype.getSubIdForDomElement=function(t){var e;return this._legend&&(e=this._legend.getAutomation().getSubIdForDomElement(t)),e?e:this._tmap.getAutomation().getSubIdForDomElement(t)},t.AmxThematicMap.prototype.getMarker=function(t,e){return this._tmap.getAutomation().getData(t,"marker",e)},t.AmxThematicMap.prototype.getArea=function(t,e){return this._tmap.getAutomation().getData(t,"area",e)},t.ThematicMap=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.ThematicMap,t.PanZoomComponent),t.ThematicMap._FEATURES_OFF_PAN=1,t.ThematicMap._FEATURES_OFF_ZOOM=2,t.ThematicMap._FEATURES_OFF_PAN_ZOOM=3,t.ThematicMap._FEATURES_OFF_ZOOMTOFIT=4,t.ThematicMap._FEATURES_OFF_PAN_ZOOMTOFIT=5,t.ThematicMap._FEATURES_OFF_ZOOM_ZOOMTOFIT=6,t.ThematicMap._FEATURES_OFF_ALL=7,t.ThematicMap._COLLAPSIBLE_PANEL_OFFSET=5,t.ThematicMap._ELEM_RESOURCES_CONTROLPANEL="controlPanelResources",t.ThematicMap._ELEM_RESOURCES_LEGEND="legendResources",t.ThematicMap._ELEM_RESOURCES_PANEL_DRAWER="panelDrawerResources",t.ThematicMap._ELEM_RESOURCES="resources",t.ThematicMap.DEFAULT_MAX_ZOOM_FACTOR=6,t.ThematicMap.prototype.Init=function(i,n,o){t.ThematicMap.superclass.Init.call(this,i,n,o),this._createHandlers(),this._layers=[],this._drillAnimFadeOutObjs=[],this._legend=null,this._legendPanel=null,this._legendData=null,this._legendButtonImages=null,this._bBaseMapChanged=!1,this._drilledRowKeys=[],this._initDrilled=new Object,this._processingInitDrilled=!1,this._drillDataLayer=new Object,this._childToParent=new Object,this._drilled=[],this._createLayers(),this._initialZooming=!1,this._zooming=!1,this._panning=!1,this._maxZoomFactor=t.ThematicMap.DEFAULT_MAX_ZOOM_FACTOR,this._isMarkerZoomBehaviorFixed=!0,this._selectedAreas={},this._bListenersRemoved=!1,this._showPopupBehaviors=null,this.setDisplayedControls(t.ControlPanel.CONTROLS_ALL),this.Defaults=new e,this.EventManager.associate(this,this),this._bRendered=!1},t.ThematicMap.prototype._createLayers=function(){this._areaLayers=new t.Container(this.getCtx()),this._dataAreaLayers=new t.Container(this.getCtx()),this._dataPointLayers=new t.Container(this.getCtx()),this._labelLayers=new t.Container(this.getCtx()),this._linkLayers=new t.Container(this.getCtx())},t.ThematicMap.newInstance=function(e,i,n){return new t.ThematicMap(e,i,n)},t.ThematicMap.prototype.SetOptions=function(e){t.ThematicMap.superclass.SetOptions.call(this,e),t.Agent.isEnvironmentBrowser()||(this.Options.animationOnDisplay="none",this.Options.animationOnMapChange="none",this.Options.animationOnDrill="none");var i=new v(this);i.parse(this.Options)},t.ThematicMap.prototype.setStyleDefaults=function(t){this._styleDefaults=t},t.ThematicMap.prototype.getStyleDefaults=function(){return this._styleDefaults},t.ThematicMap.prototype.getMaxZoomFactor=function(){return this._zooming?this._maxZoomFactor:1},t.ThematicMap.prototype.setMaxZoomFactor=function(t){this._maxZoomFactor=t},t.ThematicMap.prototype.isMarkerZoomBehaviorFixed=function(){return this._isMarkerZoomBehaviorFixed},t.ThematicMap.prototype.setMarkerZoomBehavior=function(t){this._isMarkerZoomBehaviorFixed="fixed"==t},t.ThematicMap.prototype.addPointLayer=function(t){this._layers.push(t)},t.ThematicMap.prototype.addLayer=function(t){this._layers.push(t)},t.ThematicMap.prototype.getLayer=function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e].getLayerName()==t)return this._layers[e]},t.ThematicMap.prototype.getAllLayers=function(){return this._layers},t.ThematicMap.prototype.getAreaLayerContainer=function(){return this._areaLayers},t.ThematicMap.prototype.getDataAreaContainer=function(){return this._dataAreaLayers},t.ThematicMap.prototype.getDataPointContainer=function(){return this._dataPointLayers},t.ThematicMap.prototype.getLabelContainer=function(){return this._labelLayers},t.ThematicMap.prototype.getLinkContainer=function(){return this._linkLayers},t.ThematicMap.prototype.setMapName=function(t){this._bBaseMapChanged=this._mapName&&this._mapName!=t,this._mapName=t},t.ThematicMap.prototype.setAnimationOnDisplay=function(t){this._animationOnDisplay=t},t.ThematicMap.prototype.setAnimationOnMapChange=function(t){this._animationOnMapChange=t},t.ThematicMap.prototype.setAnimationDuration=function(t){this._animationDuration=parseFloat(t)},t.ThematicMap.prototype.getAnimationDuration=function(){return this._animationDuration},t.ThematicMap.prototype.setDisplayTooltips=function(t){this._displayTooltips=t},t.ThematicMap.prototype.getDisplayTooltips=function(){return this._displayTooltips},t.ThematicMap.prototype.setFeaturesOff=function(e){var i=parseInt(e),n=this.getDisplayedControls();i!=t.ThematicMap._FEATURES_OFF_PAN&&i!=t.ThematicMap._FEATURES_OFF_PAN_ZOOM&&i!=t.ThematicMap._FEATURES_OFF_PAN_ZOOMTOFIT&&i!=t.ThematicMap._FEATURES_OFF_ALL||(n&=~t.ControlPanel.CONTROLS_CENTER_BUTTON,this.setPanning(!1)),i!=t.ThematicMap._FEATURES_OFF_ZOOM&&i!=t.ThematicMap._FEATURES_OFF_PAN_ZOOM&&i!=t.ThematicMap._FEATURES_OFF_ZOOM_ZOOMTOFIT&&i!=t.ThematicMap._FEATURES_OFF_ALL||(n&=~t.ControlPanel.CONTROLS_ZOOM,this.setZooming(!1)),i!=t.ThematicMap._FEATURES_OFF_ZOOMTOFIT&&i!=t.ThematicMap._FEATURES_OFF_PAN_ZOOMTOFIT&&i!=t.ThematicMap._FEATURES_OFF_ZOOM_ZOOMTOFIT&&i!=t.ThematicMap._FEATURES_OFF_ALL||(n&=~t.ControlPanel.CONTROLS_ZOOM_TO_FIT_BUTTON),this.setDisplayedControls(n)},t.ThematicMap.prototype.setInitialCenterX=function(t){this._initialCenterX=t},t.ThematicMap.prototype.setInitialCenterY=function(t){this._initialCenterY=t},t.ThematicMap.prototype.setInitialZoom=function(t){this._initialZoom=t},t.ThematicMap.prototype.setAnimationOnDrill=function(t){this._animationOnDrill=t},t.ThematicMap.prototype.setDrillMode=function(t){this._drillMode=t,this.EventManager.setDrillMode(t)},t.ThematicMap.prototype.setInitialZooming=function(t){this._initialZooming=t},t.ThematicMap.prototype.getLegendPanel=function(t){return this._legendPanel},t.ThematicMap.prototype.PreRender=function(){t.ThematicMap.superclass.PreRender.call(this),!this.IsResize()&&this._pzcContainer&&(this._layers=[],this._drilledRowKeys=[],this._initDrilled=new Object,this._drillDataLayer=new Object,this._childToParent=new Object,this._drilled=[],this.removeChild(this._legendPanel),this._legendPanel=null,this._legend=null,this._legendData=null,this._legendButtonImages=null,this.setDisplayedControls(t.ControlPanel.CONTROLS_ALL),this._zooming=!0,this._panning=!0,this._oldPzc=this._pzc,this._createLayers(),this._showPopupBehaviors=null,this.EventManager.removeListeners(this),this._createHandlers(),this._bListenersRemoved=!1,this.EventManager.hideTooltip(),this.EventManager.associate(this,this))},t.ThematicMap.prototype._createHandlers=function(){this.EventManager=new y(this.getCtx(),this.dispatchEvent,this),this.EventManager.addListeners(this),t.Agent.isTouchDevice()?this._keyboardHandler=null:(this._keyboardHandler=new f(this,this.EventManager),this.EventManager.setKeyboardHandler(this._keyboardHandler))},t.ThematicMap.prototype.HandleLegendResize=function(e){if(!t.Agent.isRightToLeft(this.getCtx())){var i=this.getWidth()-5-e.getWidth();this._legendPanel.setTranslateX(i)}},t.ThematicMap.prototype._renderLegend=function(){if(this._legendData){this._legendPanel&&(this._legendPanel.destroy(),this.removeChild(this._legendPanel));var e="true"==this._legendData.disclosed,i="fixed"==this._legendData.display||t.Agent.isEnvironmentBatik();if(i&&!e)return;var n=this._legendData.maxWidth,o=n.indexOf("%"),r=o!=-1;n=r?parseFloat(n.substring(0,o))/100*this.getWidth():parseFloat(n);var s=this.getHeight()-2*t.ThematicMap._COLLAPSIBLE_PANEL_OFFSET;if(this.getSkinName()==t.CSSStyle.SKIN_ALTA)this._legendPanel=new t.PanelDrawer(this.getCtx(),null,this,"pd"),this._legendPanel.addEvtListener(t.PanelDrawerEvent.TYPE,this.HandleLegendEvent,!1,this),this._legendPanel.setMaxWidth(n),this._legendPanel.setMaxHeight(s),this._legendPanel.setFixed(i),t.Agent.isRightToLeft(this.getCtx())?(this._legendPanel.setDiscloseDirection(t.PanelDrawer.DIR_RIGHT),this._legendPanel.setTranslateX(0)):this._legendPanel.setTranslateX(this.getWidth());else{var a=t.CollapsiblePanel.COLLAPSE_NORTHEAST;this._legendPanel=new t.CollapsiblePanel(this.getCtx(),n,s,a,this.getResourcesMap(),this.getSubcomponentStyles(),e,i),this._legendPanel.addEvtListener(t.CollapsiblePanelEvent.TYPE,this.HandleLegendEvent,!1,this),this._legendPanel.addEvtListener(t.ResizeEvent.RESIZE_EVENT,this.HandleLegendResize,!1,this);var l=this._legendData.expandTooltip,h=this._legendData.collapseTooltip;this._legendPanel.setButtonTooltips(l,h)}var u=this._legendData;this._legend=t.Legend.newInstance(this.getCtx(),this.processLegendEvent,this),this.addChild(this._legendPanel),this.addChild(this._legend);var d=this._legend.getPreferredSize(u,this._legendPanel.getMaxContentWidth(),this._legendPanel.getMaxContentHeight());this._legend.render(u,d.w,d.h);var c;if(this.getSkinName()==t.CSSStyle.SKIN_ALTA){this._legendPanel.setMaxContainerHeight(this._legend.getContentDimensions().h),this.removeChild(this._legend);var p=new t.Image(this.getCtx(),this.getResourcesMap()[t.PanelDrawer.PANEL_LEGEND_ICON_ENA],0,0,t.PanelDrawer.IMAGE_SIZE,t.PanelDrawer.IMAGE_SIZE),_=new t.Image(this.getCtx(),this.getResourcesMap()[t.PanelDrawer.PANEL_LEGEND_ICON_OVR],0,0,t.PanelDrawer.IMAGE_SIZE,t.PanelDrawer.IMAGE_SIZE),g=new t.Image(this.getCtx(),this.getResourcesMap()[t.PanelDrawer.PANEL_LEGEND_ICON_DWN],0,0,t.PanelDrawer.IMAGE_SIZE,t.PanelDrawer.IMAGE_SIZE),m=t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"LEGEND");this._legendPanel.addPanel(this._legend,p,_,g,m,t.PanelDrawer.PANEL_LEGEND),this._legendPanel.renderComponent(),e&&this._legendPanel.setDisclosed(!0,!0)}else{this._legendPanel.addContent(this._legend),c=this._legendPanel.getDimensions();var f=t.Agent.isRightToLeft(this.getCtx())?5:this.getWidth()-5-c.w-c.x;this._legendPanel.setTranslate(f,5),c.w+=5}this._isFixedLegend=i,i&&(c||(c=this._legendPanel.getDimensions()),this._legendWidth=c.w,this._pzc.setSize(this.getWidth()-this._legendWidth,this.getHeight(),!0))}},t.ThematicMap.prototype.Render=function(){t.ThematicMap.superclass.Render.call(this);var e=new t.Container(this.getCtx()),i=new t.Container(this.getCtx());if(this._pzc=this.getPanZoomCanvas(),this._pzc.addChild(e),this._pzc.getContentPane().addChild(i),this._render(e,i),this._topLayer){this._controlPanel=this._pzc.getControlPanel(),this._controlPanel&&this._pzc.addChild(this._controlPanel),this.StopAnimation(!0);var n=new t.Rectangle(0,0,this.getWidth(),this.getHeight());if(this._bRendered||this._oldPzc){var o=null;this._bBaseMapChanged&&!this.IsResize()?o=this._animationOnMapChange:this._topLayer&&this._topLayer.getLayerName()!=this._oldTopLayerName&&(o=this._topLayer.getAnimation()),t.BlackBoxAnimationHandler.isSupported(o)&&(this.Animation=t.BlackBoxAnimationHandler.getCombinedAnimation(this.getCtx(),o,this._oldPzc,this._pzc,n,this._animationDuration),this.Animation&&this.addChild(this._oldPzc))}else t.BlackBoxAnimationHandler.isSupported(this._animationOnDisplay)&&(this.Animation=t.BlackBoxAnimationHandler.getInAnimation(this.getCtx(),this._animationOnDisplay,this._pzc,n,this._animationDuration));this.Animation?(this._controlPanel&&this.addChild(this._controlPanel),this.EventManager.hideTooltip(),this.EventManager.removeListeners(this),this._bListenersRemoved=!0,this.Animation.setOnEnd(this.OnAnimationEnd,this),this.Animation.play()):this.OnAnimationEnd(),this._pzcContainer=e,this._topLayer&&(this._oldTopLayerName=this._topLayer.getLayerName()),this.getCtx().setKeyboardFocusArray([this]),this._bRendered=!0}},t.ThematicMap.prototype._calcMinZoom=function(){var t=this._pzc.getZoomToFitPadding(),e=this._topLayer.getLayerDim(),i=this._pzc.getSize(),n=(i.w-2*t)/e.w,o=(i.h-2*t)/e.h,r=Math.min(n,o);return r},t.ThematicMap.prototype._render=function(t,e){this._renderLegend(),e.addChild(this._areaLayers),e.addChild(this._dataAreaLayers),this.isMarkerZoomBehaviorFixed()?t.addChild(this._dataPointLayers):e.addChild(this._dataPointLayers),t.addChild(this._labelLayers),t.addChild(this._linkLayers);var i=this._pzc.getContentPane().getMatrix();this._topLayerRendered=!1;for(var n=0;n<this._layers.length;n++){var o=this._layers[n];(!this._topLayerRendered&&o instanceof _||!(o instanceof _))&&(o.render(i),!this._topLayerRendered&&o instanceof _&&(this._topLayerRendered=!0,this._topLayer=o))}if(this._topLayer){var r=this._topLayer.getIsolatedArea();this._isolatedArea!=r&&(this._isolatedArea=r,this.setInitialCenterX(null),this.setInitialCenterY(null),this.setInitialZoom(null)),this._setInitialKeyboardFocus(),this._pzc.setMinZoom(null),this._pzc.setMaxZoom(null),this._pzc.setZoomingEnabled(!0),this._pzc.setPanningEnabled(!0),this._bBaseMapChanged||this.IsResize()||null==this._initialZoom?this._pzc.zoomToFit(null,this._topLayer.getLayerDim()):(this._pzc.zoomTo(this._initialZoom),this._pzc.panTo(this._initialCenterX,this._initialCenterY)),this._processInitialDrilled(),this._updateZoomLimits(),this._pzc.setZoomingEnabled(this._zooming),this._pzc.setPanningEnabled(this._panning)}},t.ThematicMap.prototype._setInitialKeyboardFocus=function(){if(this._keyboardHandler){var t=this.getNavigableAreas();0==t.length&&(t=this.getNavigableMarkers()),0==t.length&&(t=this.getNavigableLinks()),this.EventManager.setInitialFocus(t[0])}},t.ThematicMap.prototype.updateLayer=function(t,e,i){this._bRendered=!1,this.StopAnimation(!0);var n=new v(this);n.ParseDataLayers([t],this.getLayer(e),this._topLayer.getLayerName(),i),this._renderLegend(),this._bRendered=!0,this._setInitialKeyboardFocus(),this.getCtx().setKeyboardFocusArray([this]),this._updateZoomLimits()},t.ThematicMap.prototype._renderCompleted=function(){this.AnimationStopped||this.RenderComplete(),this.Animation=null,this.AnimationStopped=!1},t.ThematicMap.prototype._updateZoomLimits=function(){var t=this._calcMinZoom();this._pzc.setMinZoom(t),this._pzc.setMaxZoom(t*this.getMaxZoomFactor())},t.ThematicMap.prototype.OnUpdateLayerEnd=function(){this._topLayer.getIsolatedArea()&&this._pzc.zoomToFit(null,this._topLayer.getLayerDim()),this._processInitialDrilled(),this._initialZooming&&this._zoomData(),this._renderCompleted()},t.ThematicMap.prototype.getMapName=function(){return this._mapName},t.ThematicMap.prototype.getDrillMode=function(){return this._drillMode},t.ThematicMap.prototype.setLegendData=function(t){this._legendData=t},t.ThematicMap.prototype.setRolloverBehavior=function(t){this._rolloverBehavior=t},t.ThematicMap.prototype.getRolloverBehavior=function(){return this._rolloverBehavior},t.ThematicMap.prototype._transformContainers=function(e){var i=new t.Matrix;i.translate(e.getTx(),e.getTy()),this.isMarkerZoomBehaviorFixed()&&this._dataPointLayers.setMatrix(i),this._labelLayers.setMatrix(i),this._linkLayers.setMatrix(i)},t.ThematicMap.prototype.HandleLegendEvent=function(e){var i=t.EventFactory.newAdfPropertyChangeEvent(t.PanZoomComponent.LEGEND_DISCLOSED_EVENT_KEY,e.getSubType()==t.CollapsiblePanelEvent.SUBTYPE_SHOW);this.dispatchEvent(i)},t.ThematicMap.prototype._constrainPanning=function(e){var i=this._pzc.getZoomToFitPadding(),n=this._pzc.getSize(),o=new t.Rectangle(i,i,n.w-2*i,n.h-2*i),r=this._topLayer.getLayerDim(),s=r.x*e,a=r.y*e,l=r.w*e,h=r.h*e,u=0;if(l>o.w)this._isFixedLegend&&t.Agent.isRightToLeft(this.getCtx())&&(u=this._legendWidth),this._pzc.setMinPanX(o.x+o.w+u-(s+l)),this._pzc.setMaxPanX(o.x-s+u);else{this._isFixedLegend&&t.Agent.isRightToLeft(this.getCtx())&&(u=2*this._legendWidth);var d=(o.x+o.w+u)/2-(s+l/2);this._pzc.setMinPanX(d),this._pzc.setMaxPanX(d)}if(h>o.h)this._pzc.setMinPanY(o.y+o.h-(a+h)),this._pzc.setMaxPanY(o.y-a);else{var c=(o.y+o.h)/2-(a+h/2);this._pzc.setMinPanY(c),this._pzc.setMaxPanY(c)}},t.ThematicMap.prototype._updateAnimator=function(e,i){var n=e.getAnimator();if(n){var o=this._pzc.getContentPane(),r=n.getDestVal(o,o.getMatrix);i&&(this._currentAnimMatrix=o.getMatrix(),n.addProp(t.Animator.TYPE_MATRIX,this,this._getCenteredObjsMatrix,this._setCenteredObjsMatrix,r));var s=new t.Matrix(1,0,0,1,r.getTx(),r.getTy());this.isMarkerZoomBehaviorFixed()&&n.addProp(t.Animator.TYPE_MATRIX,this._dataPointLayers,this._dataPointLayers.getMatrix,this._dataPointLayers.setMatrix,s),n.addProp(t.Animator.TYPE_MATRIX,this._labelLayers,this._labelLayers.getMatrix,this._labelLayers.setMatrix,s),n.addProp(t.Animator.TYPE_MATRIX,this._linkLayers,this._linkLayers.getMatrix,this._linkLayers.setMatrix,s)}},t.ThematicMap.prototype.HandleZoomEvent=function(e){var i=e.getSubType();switch(i){case t.ZoomEvent.SUBTYPE_ADJUST_PAN_CONSTRAINTS:this._panning&&this._constrainPanning(e.getNewZoom());break;case t.ZoomEvent.SUBTYPE_ZOOMING:case t.ZoomEvent.SUBTYPE_ELASTIC_ANIM_BEGIN:this._updateAnimator(e,!0);break;case t.ZoomEvent.SUBTYPE_ZOOMED:var n=e.getNewZoom();if(null!=n){var o=this._pzc.getContentPane().getMatrix();e._animator=null,this.dispatchEvent(t.EventFactory.newThematicMapViewportChangeEvent(o.getTx(),o.getTy(),n)),this._transformContainers(o);for(var r=0;r<this._layers.length;r++)this._layers[r].HandleZoomEvent(e,o)}break;case t.ZoomEvent.SUBTYPE_ZOOM_AND_CENTER:this.fitSelectedRegions();break;case t.ZoomEvent.SUBTYPE_ZOOM_TO_FIT_END:this.dispatchEvent(t.EventFactory.newThematicMapViewportChangeEvent())}},t.ThematicMap.prototype.HandlePanEvent=function(e){var i=e.getSubType();if(i==t.PanEvent.SUBTYPE_ELASTIC_ANIM_BEGIN||i==t.PanEvent.SUBTYPE_PANNING)this._updateAnimator(e,!1);else if(i==t.PanEvent.SUBTYPE_PANNED&&null!=e.getNewX()){var n=this._pzc.getContentPane().getMatrix();e._animator=null,this.dispatchEvent(t.EventFactory.newThematicMapViewportChangeEvent(n.getTx(),n.getTy(),this._pzc.getZoom())),this._transformContainers(n);for(var o=0;o<this._layers.length;o++)this._layers[o].HandlePanEvent(n)}if(this._legendPanel)if(this.getSkinName()==t.CSSStyle.SKIN_ALTA)i===t.PanEvent.SUBTYPE_DRAG_PAN_BEGIN?this._legendPanel.setMouseEnabled(!1):i===t.PanEvent.SUBTYPE_DRAG_PAN_END&&this._legendPanel.setMouseEnabled(!0);else{var r=this.getSubcomponentStyles(),s=this._legendPanel._background.getStroke().clone();i===t.PanEvent.SUBTYPE_DRAG_PAN_BEGIN?(this._legend.setAlpha(r[t.ControlPanel.BG_DRAG_ALPHA]),s.setAlpha(r[t.ControlPanel.FRAME_DRAG_ALPHA]),this._legendPanel._background.setStroke(s),this._legendPanel._buttonFrame&&this._legendPanel._buttonFrame.setAlpha(r[t.ControlPanel.FRAME_DRAG_ALPHA]),this._legendPanel.setMouseEnabled(!1)):i===t.PanEvent.SUBTYPE_DRAG_PAN_END&&(this._legend.setAlpha(1),s.setAlpha(r[t.ControlPanel.FRAME_ROLLOUT_ALPHA]),this._legendPanel._background.setStroke(s),this._legendPanel._buttonFrame&&this._legendPanel._buttonFrame.setAlpha(r[t.ControlPanel.FRAME_ROLLOUT_ALPHA]),this._legendPanel.setMouseEnabled(!0))}},t.ThematicMap.prototype.GetControlPanelBehavior=function(){return"none"!=this._drillMode||this._zooming||this._panning&&this.getSkinName()!=t.CSSStyle.SKIN_ALTA?t.ThematicMap.superclass.GetControlPanelBehavior.call(this):t.PanZoomComponent.CONTROL_PANEL_BEHAVIOR_HIDDEN},t.ThematicMap.prototype.GetControlPanel=function(){var e=this.GetControlPanelBehavior();if(e!=t.PanZoomComponent.CONTROL_PANEL_BEHAVIOR_HIDDEN){var i=e==t.PanZoomComponent.CONTROL_PANEL_BEHAVIOR_INIT_COLLAPSED?t.ControlPanel.STATE_COLLAPSED:t.ControlPanel.STATE_EXPANDED;return new C(this.getCtx(),this,i)}return null},t.ThematicMap.prototype.setZooming=function(t){this._zooming=t},t.ThematicMap.prototype.setPanning=function(t){this._panning=t},t.ThematicMap.prototype.addDisclosedRowKey=function(t){this._drilledRowKeys.push(t)},t.ThematicMap.prototype.addDrilledLayer=function(t,e){this._initDrilled[t]=e},t.ThematicMap.prototype._processInitialDrilled=function(){this._processingInitDrilled=!0;for(var t=0;t<this._layers.length;t++){var e=this._layers[t].getLayerName();e in this._initDrilled&&(this._selectedAreas[e]=this._initDrilled[e][1],this._clickedLayerName=e,this._clickedDataLayerId=this._initDrilled[e][0],this.drillDown())}this._processingInitDrilled=!1},t.ThematicMap.prototype.resetMap=function(){this.StopAnimation(!0);for(var t=[],e=[],i=this._layers.length-1;i>-1;i--)this._layers[i].getLayerName()==this._topLayer.getLayerName()?this._layers[i].reset(e):this._layers[i].reset(t);for(var n=0;n<t.length;n++)if(t[n]){var o=t[n].getParent();o&&o.removeChild(t[n])}for(var n=0;n<e.length;n++)e[n]&&e[n].setAlpha(1);this._drilledRowKeys=[],this.fitMap(),this._drilled=[],this._controlPanel&&"none"!=this._drillMode&&(this._controlPanel.setEnabledDrillDownButton(!1),this._controlPanel.setEnabledDrillUpButton(!1))},t.ThematicMap.prototype._zoomData=function(){var e=this._dataAreaLayers.getDimensions(),i=this._dataPointLayers.getDimensions();if(this.isMarkerZoomBehaviorFixed()){var n=this._pzc.getContentPane().getMatrix();i.w/=n.getA(),i.h/=n.getD(),i.x/=n.getA(),i.y/=n.getD()}var o=e.getUnion(i);this.StopAnimation(!0);var r;this._pzc.isZoomingEnabled()||(r=this._pzc.getMaxZoom(),this._pzc.setMaxZoom(r*this._maxZoomFactor));var s;t.Agent.isEnvironmentBrowser()&&(s=new t.Animator(this.getCtx(),.3)),o.w>0&&o.h>0?this._pzc.zoomToFit(s,o):this._pzc.zoomToFit(s,this._topLayer.getLayerDim()),s&&s.play(),r&&this._pzc.setMaxZoom(r)},t.ThematicMap.prototype._zoomToFitBounds=function(e){var i=new t.Animator(this.getCtx(),.3);this._pzc.zoomToFit(i,e),i.play()},t.ThematicMap.prototype.fitRegion=function(t){t||(t=this._zoomToFitObject),t||(t=this._clickedObject),this._zoomToFitBounds(t.getDimensions())},t.ThematicMap.prototype.fitSelectedRegions=function(){if(this._clickedDataLayerId){var t=this.getLayer(this._clickedLayerName).getDataLayer(this._clickedDataLayerId);if(t){var e=t._selectionHandler;if(e){for(var i=e.getSelection(),n=0;n<i.length;n++)i[n]=i[n].getDisplayable();if(i.length>0){for(var o=i[0].getDimensions(),n=1;n<i.length;n++)o=o.getUnion(i[n].getDimensions());this._zoomToFitBounds(o)}}}}},t.ThematicMap.prototype.fitMap=function(){var e=new t.Animator(this.getCtx(),.3);this._pzc.zoomToFit(e),e.play()},t.ThematicMap.prototype.getDrillParentLayer=function(t){var e=s.getParentLayerName(this._mapName,t);return this.getLayer(e)},t.ThematicMap.prototype.getDrillChildLayer=function(t){var e=s.getChildLayerName(this._mapName,t);return this.getLayer(e)},t.ThematicMap.prototype.getNavigableAreas=function(){var t=[];if(this._topLayer)for(var e=0;e<this._layers.length;e++){var i=this._layers[e].getDataLayers();for(var n in i)t=this._topLayer.getLayerName()==this._layers[e].getLayerName()?t.concat(i[n].getNavigableAreaObjects()):t.concat(i[n].getNavigableDisclosedAreaObjects())}return t},t.ThematicMap.prototype.getNavigableMarkers=function(){var t=[];if(this._topLayer)for(var e=0;e<this._layers.length;e++){var i=this._layers[e].getDataLayers();if(this._topLayer.getLayerName()==this._layers[e].getLayerName()||!(this._layers[e]instanceof _))for(var n in i)t=t.concat(i[n].getMarkerObjects())}return t},t.ThematicMap.prototype.getNavigableLinks=function(){var t=[];if(this._topLayer)for(var e=0;e<this._layers.length;e++){var i=this._layers[e].getDataLayers();if(this._topLayer.getLayerName()==this._layers[e].getLayerName()||!(this._layers[e]instanceof _))for(var n in i)t=t.concat(i[n].getLinkObjects())}return t},t.ThematicMap.prototype._setCenteredObjsMatrix=function(t){if(this._currentAnimMatrix=t,this.isMarkerZoomBehaviorFixed()){for(var e=this.getNavigableMarkers(),i=0;i<e.length;i++)e[i].HandleZoomEvent(t);for(var n=this._labelLayers.getNumChildren(),o=0;o<n;o++)for(var r=this._labelLayers.getChildAt(o),s=r.getNumChildren(),a=0;a<s;a++){var h=r.getChildAt(a);h instanceof l&&h.update(t)}}},t.ThematicMap.prototype._getCenteredObjsMatrix=function(){return this._currentAnimMatrix},t.ThematicMap.prototype.drillDown=function(){this.StopAnimation(!0);var t=this.getDrillChildLayer(this._clickedLayerName),e=this.getLayer(this._clickedLayerName),i=[];
if(t){this._drillDataLayer[this._clickedLayerName]=this._clickedDataLayerId;for(var n=this._selectedAreas[this._clickedLayerName],o=[],r=0;r<n.length;r++)this._getAreaFromDataLayer(n[r],e.getDataLayer(this._clickedDataLayerId)).isDrilled()||o.push(n[r]);this._processingInitDrilled||"single"!=this._drillMode||(this._drilled.pop(),e.reset(i,n),t.reset(this._drillAnimFadeOutObjs));for(var s=[],r=0;r<o.length;r++){var a=o[r],l=e.getChildrenForArea(a);s.push(l[0]);for(var h=0;h<l.length;h++)this._childToParent[l[h]]=a;t.discloseAreas(l,i);var u=e.getDataLayer(this._clickedDataLayerId);u&&u.drill(a,this._drillAnimFadeOutObjs),this._drilled.push(a)}this._handleDrillAnimations(this._drillAnimFadeOutObjs,i,!1),this._updateDrillButton(t.getLayerName(),!0),this._clickedLayerName=t.getLayerName(),this._selectedAreas[this._clickedLayerName]=s}},t.ThematicMap.prototype.drillUp=function(){this.StopAnimation(!0);for(var e=this.getLayer(this._clickedLayerName),i=this.getDrillParentLayer(this._clickedLayerName),n=[],o=[],r=this._selectedAreas[this._clickedLayerName],s=0;s<r.length;s++){var a=this._childToParent[r[s]];if(o.push(a),t.ArrayUtils.getIndex(this._drilled,a)!=-1){var l=i.getChildrenForArea(a);e.undiscloseAreas(l,this._drillAnimFadeOutObjs),i.getDataLayer(this._drillDataLayer[i.getLayerName()]).undrill(a,n);var h=t.ArrayUtils.getIndex(this._drilled,a);h!=-1&&this._drilled.splice(h,1)}}this._handleDrillAnimations(this._drillAnimFadeOutObjs,n,!0),this._clickedLayerName=i.getLayerName(),this._clickedDataLayerId=this._drillDataLayer[this._clickedLayerName],this._selectedAreas[this._clickedLayerName]=o,this._updateDrillButton(this._clickedLayerName)},t.ThematicMap.prototype._handleDrillAnimations=function(e,i,n){this._pzc.getContentPane().getMatrix();if("zoomToFit"==this._animationOnDrill&&!this._processingInitDrilled){var o=new t.Animator(this.getCtx(),.3);t.Agent.isEnvironmentBrowser()||(o=null),n?this._pzc.zoomToFit(o):this.fitSelectedRegions(),o&&o.play()}this.StopAnimation(!0),!t.Agent.isEnvironmentBrowser()||"alphaFade"!=this._animationOnDrill&&"auto"!=this._animationOnDrill||(this.Animation=t.BlackBoxAnimationHandler.getCombinedAnimation(this.getCtx(),"alphaFade",e,i,null,.5)),this.Animation?(this.EventManager.hideTooltip(),this.EventManager.removeListeners(this),this.Animation.setOnEnd(this.OnDrillAnimationEnd,this),this.Animation.play()):this._cleanUpDrilledObjects()},t.ThematicMap.prototype.setClickInfo=function(t,e,i){this._clickedLayerName=e,this._clickedDataLayerId=t,this._clickedObject=i},t.ThematicMap.prototype.setEventClientId=function(t){this._eventClientId=t},t.ThematicMap.prototype.dispatchEvent=function(e){var i=e.type;"selection"==i?this._handleSelectionEvent(e):i==t.MapDrillEvent.TYPE?this._handleDrillEvent(e):"adfShowPopup"!=i&&"adfHidePopup"!=i||(e.clientId=this._eventClientId),t.ThematicMap.superclass.dispatchEvent.call(this,e)},t.ThematicMap.prototype._handleSelectionEvent=function(e){if(this._clickedDataLayerId){this._selectedRowKeys=e.selection;var i=this.getLayer(this._clickedLayerName).getDataLayer(this._clickedDataLayerId);this._selectedAreas[this._clickedLayerName]=i.getSelectedAreas(this._selectedRowKeys),this._updateDrillButton(this._clickedLayerName),e.clientId=this._clickedDataLayerId,this._clickedObject&&!(this._clickedObject instanceof t.SimpleMarker||this._clickedObject instanceof t.ImageMarker)&&(this._zoomToFitObject=this._clickedObject)}else this._updateDrillButton(null),this._zoomToFitObject=null},t.ThematicMap.prototype._hideSelectionMenu=function(){this._selectionText&&(this.removeChild(this._selectionText),this._selectionText=null)},t.ThematicMap.prototype._updateDrillButton=function(t,e){if(this._controlPanel&&this._drillMode&&"none"!=this._drillMode){var i=this.getDrillChildLayer(t),n=this.getDrillParentLayer(t);i&&!e?this._controlPanel.setEnabledDrillDownButton(!0):this._controlPanel.setEnabledDrillDownButton(!1),n?this._controlPanel.setEnabledDrillUpButton(!0):this._controlPanel.setEnabledDrillUpButton(!1)}},t.ThematicMap.prototype._handleDrillEvent=function(e){e.addParam("clientId",this._eventClientId),"multiple"==this._drillMode?this._drilledRowKeys=this._drilledRowKeys.concat(this._selectedRowKeys):this._drilledRowKeys=this._selectedRowKeys;var i=e.getDrillType();i==t.MapDrillEvent.DRILL_UP&&this.drillUp(),i==t.MapDrillEvent.DRILL_DOWN?this.drillDown():i==t.MapDrillEvent.RESET&&this.resetMap(),e.setDisclosed(this._drilledRowKeys)},t.ThematicMap.prototype.destroy=function(){for(var e=this.getAllLayers(),i=0;i<e.length;i++)e[i].destroy();t.ThematicMap.superclass.destroy.call(this)},t.ThematicMap.prototype.OnAnimationEnd=function(){this._controlPanel&&this._pzc.addChild(this._controlPanel),this._oldPzc&&(this.removeChild(this._oldPzc),this._oldPzc=null),this._renderCompleted(),this._initialZooming&&this._zoomData(),this.Options.highlightedCategories&&this.Options.highlightedCategories.length>0&&this.highlight(this.Options.highlightedCategories),this._bListenersRemoved&&(this.EventManager.addListeners(this),this._bListenersRemoved=!1)},t.ThematicMap.prototype.OnDrillAnimationEnd=function(){this._cleanUpDrilledObjects(),this.Animation=null,this.EventManager.addListeners(this)},t.ThematicMap.prototype._cleanUpDrilledObjects=function(){if(this._drillAnimFadeOutObjs.length>0){for(var t=0;t<this._drillAnimFadeOutObjs.length;t++){var e=this._drillAnimFadeOutObjs[t];if(e)if(e instanceof l)e.reset();else{if(e.isDrilled&&e.isDrilled()){e.setAlpha(0);continue}var i=e.getParent();i&&i.removeChild(e)}}this._drillAnimFadeOutObjs=[]}},t.ThematicMap.prototype.getShapesForViewSwitcher=function(t){var e={},i=this._topLayer.getDataLayers();for(var n in i){for(var o=i[n].getAreaObjects(),r=0;r<o.length;r++){var s=o[r],a=s.getDisplayable();e[s.getId()]=a}break}return e},t.ThematicMap.prototype.getShowPopupBehaviors=function(){return this._showPopupBehaviors},t.ThematicMap.prototype.setShowPopupBehaviors=function(t){this._showPopupBehaviors=t},t.ThematicMap.prototype.getAutomation=function(){return this.Automation||(this.Automation=new n(this)),this.Automation},t.ThematicMap.prototype.GetComponentDescription=function(){return t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"THEMATIC_MAP")},t.ThematicMap.prototype.processLegendEvent=function(e,i){e.type==t.ResizeEvent.RESIZE_EVENT&&this._legend&&this._legend.FireListener(e)},t.ThematicMap.prototype.highlight=function(e){this.Options.highlightedCategories=t.JsonUtils.clone(e),t.CategoryRolloverHandler.highlight(e,this.getNavigableAreas().concat(this.getNavigableMarkers()).concat(this.getNavigableLinks()),"any"==this.Options.highlightMatch)},t.ThematicMap.prototype.processDefaultHoverEffect=function(t,e){var i=this._getDataItemById(t);i&&i.processDefaultHoverEffect(e)},t.ThematicMap.prototype.processDefaultSelectionEffect=function(t,e){var i=this._getDataItemById(t);i&&i.processDefaultSelectionEffect(e)},t.ThematicMap.prototype.processDefaultFocusEffect=function(t,e){var i=this._getDataItemById(t);i&&i.processDefaultFocusEffect(e)},t.ThematicMap.prototype._getDataItemById=function(t){for(var e=0;e<this._layers.length;e++){var i=this._layers[e].getDataLayers();for(var n in i)for(var o=i[n].getMarkerObjects(),r=0;r<o.length;r++)if(o[r].getId()===t)return o[r]}return null},t.ThematicMap.prototype._getAreaFromDataLayer=function(t,e){for(var i=e.getAreaObjects(),n=0;n<i.length;n++)if(i[n].getLocation()===t)return i[n];return null};var e=function(){this.Init({fusion:e.DEFAULT,alta:e.SKIN_ALTA})};t.Obj.createSubclass(e,t.BaseComponentDefaults),e.DEFAULT={animationDuration:500,animationOnDisplay:"none",animationOnDrill:"none",animationOnMapChange:"none",controlPanelBehavior:"hidden",drilling:"none",highlightMatch:"all",hoverBehavior:"none",initialZooming:"none",markerZoomBehavior:"fixed",panning:"none",tooltipDisplay:"auto",touchResponse:"auto",visualEffects:"none",zooming:"none",styleDefaults:{skin:"alta",_areaStyle:{backgroundColor:"#B8CDEC",borderColor:"#FFFFFF"},hoverBehaviorDelay:200,dataAreaDefaults:{borderColor:"#FFFFFF",drilledInnerColor:"#FFFFFF",drilledOuterColor:"#000000",hoverColor:"#FFFFFF",opacity:1,selectedInnerColor:"#FFFFFF",selectedOuterColor:"#000000"},dataMarkerDefaults:{borderColor:"#FFFFFF",borderStyle:"solid",borderWidth:.5,color:"#000000",height:8,labelStyle:"font-family:Tahoma;font-size:13pt;color:#000000",opacity:.4,scaleX:1,scaleY:1,shape:"circle",width:8},linkDefaults:{color:"#9bb2c7",_hoverColor:"#FFFFFF",_selectedColor:"#000000",width:2},labelStyle:"font-family:Tahoma;font-size:11pt;"},legend:{position:"auto",rendered:!0,layout:{gapRatio:1}},layout:{gapRatio:null,legendMaxSize:.3,legendGap:10},resources:{images:{},translations:{}}},e.SKIN_ALTA={styleDefaults:{_areaStyle:{backgroundColor:"#DDDDDD",borderColor:"#FFFFFF"},dataAreaDefaults:{drilledOuterColor:"#0572CE"},dataMarkerDefaults:{color:"rgb(51,51,51)",labelStyle:t.BaseComponentDefaults.FONT_FAMILY_ALTA_12+"color:#333333",opacity:1},labelStyle:t.BaseComponentDefaults.FONT_FAMILY_ALTA_12}},e.DEFAULT_AREA_LAYER={animationOnLayerChange:"none",labelDisplay:"auto",labelType:"short"},e.DEFAULT_DATA_LAYER={animationOnDataChange:"none",selectionMode:"none"},e.prototype.calcAreaLayerOptions=function(i){return t.JsonUtils.merge(i,e.DEFAULT_AREA_LAYER)},e.prototype.calcDataLayerOptions=function(i){return t.JsonUtils.merge(i,e.DEFAULT_DATA_LAYER)},e.getGapSize=function(t,e){return Math.ceil(e*t.getGapRatio())},t.ThematicMap.prototype._getCurrentDragSource=function(){for(var t=0;t<this._layers.length;t++){var e=this._layers[t].getDataLayers();for(var i in e){var n=e[i],o=n.getDragSource();if(o&&o.getDragCandidate())return o}}return null},t.ThematicMap.prototype.isDragAvailable=function(t,e,i){this._dragAllowed=!1;var n=this._getCurrentDragSource();return!!n&&n.isDragAvailable(i)},t.ThematicMap.prototype.getDragTransferable=function(t,e){var i=this._getCurrentDragSource();return i?i.getDragTransferable(t,e):null},t.ThematicMap.prototype.getDragOverFeedback=function(t,e){var i=this._getCurrentDragSource();return i?i.getDragOverFeedback(t,e):null},t.ThematicMap.prototype.getDragContext=function(t,e){var i=this._getCurrentDragSource();return i?i.getDragContext(t,e):null},t.ThematicMap.prototype.getDragOffset=function(t,e){var i=this._getCurrentDragSource();return i?i.getDragOffset(t,e):null},t.ThematicMap.prototype.getPointerOffset=function(t,e){var i=this._getCurrentDragSource();return i?i.getPointerOffset(t,e):null},t.ThematicMap.prototype.initiateDrag=function(){var t=this._getCurrentDragSource();t&&t.initiateDrag()},t.ThematicMap.prototype.dragDropEnd=function(){var t=this._getCurrentDragSource();t&&t.dragDropEnd(),this.getPanZoomCanvas().resetTouchTargets()},t.ThematicMap.prototype.prepDrag=function(){this._panning?this._startDragDropTimer(1e3):this._dragAllowed=!0},t.ThematicMap.prototype.abortPrep=function(){this._stopDragDropTimer()},t.ThematicMap.prototype.recognizeDrag=function(){return this._stopDragDropTimer(),this._dragAllowed},t.ThematicMap.prototype._startDragDropTimer=function(e){this._dragDropTimer=new t.Timer(this.getCtx(),e,this._handleDragDropTimer,this,1),this._dragDropTimer.start()},t.ThematicMap.prototype._handleDragDropTimer=function(){this._stopDragDropTimer(),this._dragAllowed=!0},t.ThematicMap.prototype._stopDragDropTimer=function(){this._dragDropTimer&&(this._dragDropTimer.stop(),this._dragDropTimer=null)},t.ThematicMap.prototype._getCurrentDropTarget=function(t,e){for(var i=0;i<this._layers.length;i++)if(this._layers[i].getDropTarget){var n=this._layers[i].getDropTarget();if(n&&n.getDropSite(t,e))return n}return null},t.ThematicMap.prototype.acceptDrag=function(t,e,i){var n=this._pzc.getZoom();return t=(t-this._pzc.getPanX())/n,e=(e-this._pzc.getPanY())/n,this._dropTarget=this._getCurrentDropTarget(t,e),this._dropTarget?this._dropTarget.acceptDrag(t,e,i):null},t.ThematicMap.prototype.dragEnter=function(){return this._dropTarget?this._dropTarget.dragEnter():null},t.ThematicMap.prototype.dragExit=function(){return this._dropTarget?this._dropTarget.dragExit():null},t.ThematicMap.prototype.getDropSite=function(t,e){var i=this._pzc.getZoom();return t=(t-this._pzc.getPanX())/i,e=(e-this._pzc.getPanY())/i,this._dropTarget?this._dropTarget.getDropSite(t,e):null};var i=function(t,e){this._areaLayer=t,this._basemap=e};t.Obj.createSubclass(i,t.DropTarget),i.prototype.acceptDrag=function(t,e,i){var n=this._areaLayer.__getObjectUnderPoint(t,e);return n?(n!=this._dropSite&&(this._areaLayer.__showDropSiteFeedback(n),this._dropSite=n),i[0]):(this._areaLayer.__showDropSiteFeedback(null),null)},i.prototype.dragExit=function(){this._areaLayer.__showDropSiteFeedback(null),this._dropSite=null},i.prototype.getDropSite=function(t,e){var i=this._areaLayer.__getObjectUnderPoint(t,e);if(i){var n=S.inverseProject(t,e,this._basemap);return{regionId:i.getAreaId(),localX:n.x,localY:n.y}}return null};var n=function(t){this._tmap=t};t.Obj.createSubclass(n,t.Automation),n.prototype.GetSubIdForDomElement=function(e){var i=this._tmap.getEventManager().GetLogicalObject(e);if(i&&(i instanceof u||i instanceof h))return this._getSubId(i);var n=this._tmap.getPanZoomCanvas().getControlPanel();if(n&&(i=n.getEventManager().GetLogicalObject(e),i&&i instanceof t.Button))for(var o=["disclosure","zoomIn","zoomOut","zoomToFit","drillDown","drillUp","reset"],r=0;r<o.length;r++)if(n.getActionDisplayable(o[r])===i)return"controlPanel#"+o[r];return null},n.prototype.getDomElementForSubId=function(e){if(e==t.Automation.TOOLTIP_SUBID)return this.GetTooltipElement(this._tmap);var i=e.indexOf(":"),n=e.indexOf("[");if(i>0&&n>0){var o=e.substring(0,i),r=e.substring(i+1,n),s=parseInt(e.substring(n+1,e.length-1));return this._getDomElement(o,r,s)}if(0===e.lastIndexOf("controlPanel")){var a=e.indexOf("#");if(a>0){var l=e.substring(a+1),h=this._tmap.getPanZoomCanvas().getControlPanel();if(h&&l){var u=h.getActionDisplayable(l);return u?u.getElem():null}}}return null},n.prototype.getData=function(t,e,i){var n=this._getDataObject(t,e,i);if(n){var o={};o.color=n.getDatatipColor(),o.tooltip=n.getShortDesc();var r=n.getLabel();return o.label=r?r.getTextString():null,o.selected=n.isSelected(),o}return null},n.prototype._getDomElement=function(t,e,i){var n=this._getDataObject(t,e,i);return n?n.getDisplayable().getElem():null},n.prototype._getSubId=function(e){for(var i=e.getDisplayable(),n=this._tmap.getAllLayers(),o=0;o<n.length;o++){var r=n[o].getDataLayers();for(var s in r)if(i instanceof t.Path){for(var a=r[s].getAreaObjects(),l=0;l<a.length;l++)if(a[l]===e)return this._getDataLayerId(s)+":area["+l+"]";for(var h=r[s].getLinkObjects(),l=0;l<h.length;l++)if(h[l]===e)return this._getDataLayerId(s)+":link["+l+"]"}else if(i instanceof t.SimpleMarker||i instanceof t.ImageMarker)for(var u=r[s].getMarkerObjects(),l=0;l<u.length;l++)if(u[l]===e)return this._getDataLayerId(s)+":marker["+l+"]"}return null},n.prototype._getDataObject=function(t,e,i){for(var n=this._tmap.getAllLayers(),o=0;o<n.length;o++){var r=n[o].getDataLayers();for(var s in r)if(this._getDataLayerId(s)==t){if("area"==e)return r[s].getDataAreaCollection()[i];if("marker"==e)return r[s].getDataMarkerCollection()[i];if("link"==e)return r[s].getDataLinkCollection()[i]}}return null},n.prototype._getDataLayerId=function(t){var e=t.lastIndexOf(":");return e>0?t.substring(e+1):t};var o=function(t,e){this.Init(t,e)};t.Obj.createSubclass(o,t.Path),o.HOVER_STROKE_WIDTH=2,o.SELECTED_INNER_STROKE_WIDTH=1,o.SELECTED_OUTER_STROKE_WIDTH=4,o.SELECTED_HOVER_OUTER_STROKE_WIDTH=6,o.DISCLOSED_INNER_STROKE_WIDTH=2,o.DISCLOSED_OUTER_STROKE_WIDTH=4,o.prototype.Init=function(t,e){o.superclass.Init.call(this,t),this._disclosedInnerStroke=null,this._disclosedOuterStroke=null,this._disclosedInnerShape=null,this._disclosedOuterShape=null,this._isDrilled=!1,this.Zoom=1,this._bSupportsVectorEffects=e},o.prototype.isDrilled=function(){return this._isDrilled},o.prototype.setDrilled=function(t){if(this._isDrilled!=t)if(this._isDrilled=t,this.isDrilled()){this._disclosedInnerShape=this.copyShape(),this._disclosedInnerShape.setFill(null),this._disclosedInnerShape.setMouseEnabled(!1),this._disclosedOuterShape=this.copyShape(),this._disclosedOuterShape.setFill(null),this._disclosedOuterShape.setMouseEnabled(!1);var e=this.getParent();e.addChild(this._disclosedOuterShape),e.addChild(this._disclosedInnerShape),this._disclosedInnerShape.setStroke(this._adjustStrokeZoomWidth(this._disclosedInnerStroke,o.DISCLOSED_INNER_STROKE_WIDTH)),this._disclosedOuterShape.setStroke(this._adjustStrokeZoomWidth(this._disclosedOuterStroke,o.DISCLOSED_OUTER_STROKE_WIDTH)),this.setMouseEnabled(!1),this.IsShowingHoverEffect=!1}else this.isHoverEffectShown()&&(this.UpdateSelectionEffect(),this.InnerShape.setStroke(this._adjustStrokeZoomWidth(this.HoverInnerStroke,1),o.HOVER_STROKE_WIDTH)),this._disclosedOuterShape.getParent().removeChild(this._disclosedOuterShape),this._disclosedInnerShape.getParent().removeChild(this._disclosedInnerShape),this.setMouseEnabled(!0),this.setAlpha(1)},o.prototype.setSelected=function(t){this.IsSelected!=t&&(t&&(this.isHoverEffectShown()?(this.CreateSelectedHoverStrokes(),this.SelectedHoverInnerStroke=this._adjustStrokeZoomWidth(this.SelectedHoverInnerStroke,o.HOVER_STROKE_WIDTH),this.SelectedHoverOuterStroke=this._adjustStrokeZoomWidth(this.SelectedHoverOuterStroke,o.SELECTED_HOVER_OUTER_STROKE_WIDTH)):(this.SelectedInnerStroke=this._adjustStrokeZoomWidth(this.SelectedInnerStroke,o.SELECTED_INNER_STROKE_WIDTH),this.SelectedOuterStroke=this._adjustStrokeZoomWidth(this.SelectedOuterStroke,o.SELECTED_OUTER_STROKE_WIDTH))),o.superclass.setSelected.call(this,t))},o.prototype.showHoverEffect=function(){this.isSelected()?(this.CreateSelectedHoverStrokes(),this.SelectedHoverInnerStroke=this._adjustStrokeZoomWidth(this.SelectedHoverInnerStroke,o.HOVER_STROKE_WIDTH),this.SelectedHoverOuterStroke=this._adjustStrokeZoomWidth(this.SelectedHoverOuterStroke,o.SELECTED_HOVER_OUTER_STROKE_WIDTH)):this.HoverInnerStroke=this._adjustStrokeZoomWidth(this.HoverInnerStroke,o.HOVER_STROKE_WIDTH),o.superclass.showHoverEffect.call(this)},o.prototype.CreateSelectedHoverStrokes=function(){this.SelectedHoverInnerStroke||(this.SelectedHoverInnerStroke=this.HoverInnerStroke.clone(),this.SelectedHoverInnerStroke.setWidth(o.HOVER_STROKE_WIDTH),this._bSupportsVectorEffects&&this.SelectedHoverInnerStroke.setFixedWidth(!0)),this.SelectedHoverOuterStroke||(this.SelectedHoverOuterStroke=this.SelectedOuterStroke.clone(),this.SelectedHoverOuterStroke.setWidth(o.SELECTED_HOVER_OUTER_STROKE_WIDTH),this._bSupportsVectorEffects&&this.SelectedHoverOuterStroke.setFixedWidth(!0))},o.prototype.hideHoverEffect=function(){this.isSelected()&&(this.SelectedInnerStroke=this._adjustStrokeZoomWidth(this.SelectedInnerStroke,o.SELECTED_INNER_STROKE_WIDTH),this.SelectedOuterStroke=this._adjustStrokeZoomWidth(this.SelectedOuterStroke,o.SELECTED_OUTER_STROKE_WIDTH)),o.superclass.hideHoverEffect.call(this)},o.prototype.setHoverStroke=function(t,e){return o.superclass.setHoverStroke.call(this,t,e),this._bSupportsVectorEffects&&(this.HoverInnerStroke&&this.HoverInnerStroke.setFixedWidth(!0),this.HoverOuterStroke&&this.HoverOuterStroke.setFixedWidth(!0)),this},o.prototype.setSelectedStroke=function(t,e){return o.superclass.setSelectedStroke.call(this,t,e),this._bSupportsVectorEffects&&(this.SelectedInnerStroke&&this.SelectedInnerStroke.setFixedWidth(!0),this.SelectedOuterStroke&&this.SelectedOuterStroke.setFixedWidth(!0)),this},o.prototype.setSelectedHoverStroke=function(t,e){return o.superclass.setSelectedHoverStroke.call(this,t,e),this._bSupportsVectorEffects&&(this.SelectedHoverInnerStroke&&this.SelectedHoverInnerStroke.setFixedWidth(!0),this.SelectedHoverOuterStroke&&this.SelectedHoverOuterStroke.setFixedWidth(!0)),this},o.prototype.setDisclosedStroke=function(t,e){return this._disclosedInnerStroke=t,this._disclosedInnerStroke&&this._bSupportsVectorEffects&&this._disclosedInnerStroke.setFixedWidth(!0),this._disclosedOuterStroke=e,this._disclosedOuterStroke&&this._bSupportsVectorEffects&&this._disclosedOuterStroke.setFixedWidth(!0),this},o.prototype.savePatternFill=function(t){this._ptFill=t},o.prototype.getSavedPatternFill=function(){return this._ptFill},o.prototype._updateStrokeZoomWidth=function(t,e){if(!this._bSupportsVectorEffects){var i=t.getStroke();i&&(i=i.clone(),i.setWidth(e/this.Zoom),t.setStroke(i))}},o.prototype._adjustStrokeZoomWidth=function(t,e){if(!this._bSupportsVectorEffects){var i=t.clone();return i.setWidth(e/this.Zoom),i}return t},o.prototype.handleZoomEvent=function(t){this.Zoom=t.getA(),this.isDrilled()?(this._updateStrokeZoomWidth(this._disclosedInnerShape,o.DISCLOSED_INNER_STROKE_WIDTH),this._updateStrokeZoomWidth(this._disclosedOuterShape,o.DISCLOSED_OUTER_STROKE_WIDTH)):this.isSelected()?this.isHoverEffectShown()?(this._updateStrokeZoomWidth(this.InnerShape,o.HOVER_STROKE_WIDTH),this._updateStrokeZoomWidth(this,o.SELECTED_HOVER_OUTER_STROKE_WIDTH)):(this._updateStrokeZoomWidth(this.InnerShape,o.SELECTED_INNER_STROKE_WIDTH),this._updateStrokeZoomWidth(this,o.SELECTED_OUTER_STROKE_WIDTH)):this.isHoverEffectShown()?this._updateStrokeZoomWidth(this.InnerShape,o.HOVER_STROKE_WIDTH):this._updateStrokeZoomWidth(this,1)};var r=function(t,e,i){this.Init(t,e,i)};t.Obj.createSubclass(r,t.Container),r._RECT_PADDING=5,r.prototype.Init=function(e,i,n){if(r.superclass.Init.call(this,e),this._dataItem=i,i instanceof t.BaseComponent)this._width=i.getWidth(),this._height=i.getHeight(),this.addChild(i);else{this.getElem().appendChild(i);var o=t.DisplayableUtils.getDimensionsForced(e,this);this._width=o.w,this._height=o.h}this._boundingRect=new t.Rect(e,-r._RECT_PADDING,-r._RECT_PADDING,this._width+2*r._RECT_PADDING,this._height+2*r._RECT_PADDING),this._boundingRect.setInvisibleFill();var s=new t.SolidStroke(n.selectedInnerColor,1,2),a=new t.SolidStroke("rgb(235, 236, 237)",1,4),l=new t.SolidStroke(n.selectedInnerColor,1,2),h=new t.SolidStroke(n.selectedOuterColor,1,4),u=new t.SolidStroke(n.selectedInnerColor,1,2),d=new t.SolidStroke(n.selectedOuterColor,1,6);this._boundingRect.setHoverStroke(s,a).setSelectedStroke(l,h).setSelectedHoverStroke(u,d),this.addChildAt(this._boundingRect,0)},r.prototype.setAriaProperty=function(e,i){t.Agent.isTouchDevice()?this._boundingRect.setAriaProperty(e,i):r.superclass.setAriaProperty.call(this,e,i)},r.prototype.setAriaRole=function(e){t.Agent.isTouchDevice()?this._boundingRect.setAriaRole(e):r.superclass.setAriaRole.call(this,e)},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r.prototype.setSelectable=function(t){this._boundingRect.setSelectable(t)},r.prototype.isSelectable=function(){return this._boundingRect.isSelectable()},r.prototype.isSelected=function(){return this._boundingRect.isSelected()},r.prototype.setSelected=function(t){this._boundingRect.setSelected(t)},r.prototype.showHoverEffect=function(){this._boundingRect.showHoverEffect()},r.prototype.hideHoverEffect=function(){this._boundingRect.hideHoverEffect()},r.prototype.getRootElement=function(){return this._dataItem},r.prototype.updateRootElement=function(e){this._dataItem!==e&&(this._dataItem&&(this._dataItem instanceof t.BaseComponent?this.removeChild(this._dataItem):this.getElem().removeChild(this._dataItem)),e instanceof t.BaseComponent?this.addChild(e):this.getElem().appendChild(e),this._dataItem=e)},r.prototype.fireKeyboardListener=function(e){this._dataItem instanceof t.BaseComponent&&this._dataItem.fireKeyboardListener(e)};var s;this?this.DvtBaseMapManager?s=this.DvtBaseMapManager:(s={},this.DvtBaseMapManager=s,s._UNPROCESSED_MAPS=[[],[],[]],s._UNPROCESSED_PARENT_UPDATES=[[]]):window.DvtBaseMapManager?s=window.DvtBaseMapManager:(s={},window.DvtBaseMapManager=s,s._UNPROCESSED_MAPS=[[],[],[]],s._UNPROCESSED_PARENT_UPDATES=[[]]),t.Obj.createSubclass(s,t.Obj,"DvtBaseMapManager"),s.TYPE_LABELS=0,s.TYPE_PATH=1,s.TYPE_PARENTREGION_CHILDREN=2,s.TYPE_LABELINFO=3,s.TYPE_DIM=4,s._INDEX="__index",s._GLOBAL_MAPS=new Object,s.getBaseMapDim=function(e,i){s._processUnprocessedMaps();var n=s._GLOBAL_MAPS[e][i];if(n){var o=n[s.TYPE_DIM];if(o)return new t.Rectangle(o[0],o[1],o[2],o[3])}return null},s.getAreaLabelInfo=function(t,e){s._processUnprocessedMaps();var i=s._GLOBAL_MAPS[t][e];return i?i[s.TYPE_LABELINFO]:null},s.getAreaIds=function(t,e){var i=[],n=s.getAreaPaths(t,e);for(var o in n)i.push(o);return i},s.getAreaLabels=function(t,e){s._processUnprocessedMaps();var i=s._GLOBAL_MAPS[t][e];return i?i[s.TYPE_LABELS]:null},s.getLongAreaLabel=function(t,e,i){s._processUnprocessedMaps();var n,o=s._GLOBAL_MAPS[t][e];return o&&(n=o[s.TYPE_LABELS]),n&&n[i]?n[i][1]:null},s.getCityCoordinates=function(e,i){s._processUnprocessedMaps();var n=s._GLOBAL_MAPS[e];if(n){var o=n.cities;if(o){var r=o[s.TYPE_PATH][i];if(r)return new t.Point(r[0],r[1])}}return null},s.getCityLabel=function(t,e){s._processUnprocessedMaps();var i=s._GLOBAL_MAPS[t];if(i){var n=i.cities;if(n){var o=n[s.TYPE_LABELS][e];if(o)return o[1]}}return null},s.getAreaCenter=function(e,i,n){s._processUnprocessedMaps();var o=s._GLOBAL_MAPS[e];if(o){var r=o[i];if(r){var a=r[s.TYPE_LABELINFO];if(a&&a[n]){var l=a[n][0],h=t.Rectangle.create(l);return h.getCenter()}var u=s._GLOBAL_MAPS[e][i][s.TYPE_PATH][n];if(!u)return null;var d=t.PathUtils.createPathArray(u),c=t.PathUtils.getDimensions(d);return c.getCenter()}}return null},s.getChildLayerName=function(t,e){s._processUnprocessedMaps();var i=s._GLOBAL_MAPS[t][e];return i?s._GLOBAL_MAPS[t][s._INDEX][i.__index+1]:null},s.getParentLayerName=function(t,e){s._processUnprocessedMaps();var i=s._GLOBAL_MAPS[t][e];return i?s._GLOBAL_MAPS[t][s._INDEX][s._GLOBAL_MAPS[t][e].__index-1]:null},s.getAreaPaths=function(t,e){return s._processUnprocessedMaps(),s._GLOBAL_MAPS[t][e][s.TYPE_PATH]},s.getPathForArea=function(t,e,i){return s._processUnprocessedMaps(),s._GLOBAL_MAPS[t][e][s.TYPE_PATH][i]},s.getChildrenForLayerAreas=function(t,e){s._processUnprocessedMaps();var i=s.getChildLayerName(t,e);if(i){var n=s._GLOBAL_MAPS[t][i][s.TYPE_PARENTREGION_CHILDREN];return n?n:[]}return[]},s.getMapLayerName=function(t,e){return s._processUnprocessedMaps(),s._GLOBAL_MAPS[t][s._INDEX][e]},s.registerBaseMapLayer=function(t,e,i,n,o,r,a,l){var h=s._GLOBAL_MAPS[t];h||(h=new Object,h[s._INDEX]=new Array,s._GLOBAL_MAPS[t]=h);var u=h[e];u||(u=new Object,h[e]=u,null!=a&&(h[s._INDEX][a]=e)),u[s.TYPE_LABELS]=i,u[s.TYPE_PATH]=n,u[s.TYPE_PARENTREGION_CHILDREN]=o,u[s.TYPE_LABELINFO]=r,u[s.TYPE_DIM]=l,u[s._INDEX]=a},s.registerResourceBundle=function(t,e,i){var n=s._GLOBAL_MAPS[t];n||(n=new Object,s._GLOBAL_MAPS[t]=n);var o=n[e];o||(o=new Object,n[e]=o);var o=n[e];o&&(o[s.TYPE_LABELS]=i)},s.updateResourceBundle=function(t,e,i){var n=s._GLOBAL_MAPS[t];if(n){var o=n[e];if(o)for(var r in i)o[s.TYPE_LABELS][r]=i[r]}},s._processUnprocessedMaps=function(){var t,e,i=s._UNPROCESSED_MAPS;if(i){for(t=0;t<i[0].length;t++)e=i[0][t],s.registerBaseMapLayer(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);for(t=0;t<i[1].length;t++)e=i[1][t],s.registerResourceBundle(e[0],e[1],e[2]);for(t=0;t<i[2].length;t++)e=i[2][t],s.updateResourceBundle(e[0],e[1],e[2]);s._UNPROCESSED_MAPS=[[],[],[]]}var n=s._UNPROCESSED_PARENT_UPDATES;if(n){for(t=0;t<n[0].length;t++){e=n[0][t];var o,r,a=e[0],l=e[1],h=e[2],u=s._GLOBAL_MAPS[a];if(u){if(r=u[l]){r[s.TYPE_PARENTREGION_CHILDREN]=e[3],o=r[s.TYPE_DIM];var d=r[s._INDEX],c=u[s._INDEX];c.splice(d,0,h),u[h][s._INDEX]=d;for(var t=d+1;t<c.length;t++){var p=u[c[t]];p&&p[s._INDEX]++}}r=u[e[2]],r&&(r[s.TYPE_DIM]=o)}}s._UNPROCESSED_PARENT_UPDATES=[[]]}},s.simplifyAreaPaths=function(e,i,n,o,r,s){if(s>0){var a=o/i,l=r/n,h=Math.min(a,l),u=1/(h*s);if(u<=1)return e;var d=[];if(e)for(var c in e){var p=e[c];isNaN(p)&&(p=t.PathUtils.createPathArray(e[c])),d[c]=t.PathUtils.simplifyPath(p,u)}return d}return e},s.getLayerIds=function(t,e){s._processUnprocessedMaps();var i=s._GLOBAL_MAPS[t][e],n={};if(i){var o=i[s.TYPE_LABELS];for(var r in o)n[r]=o[r][1];if("cities"!==e&&!o)for(var a=s.getAreaIds(t,e),l=0;l<a.length;l++)n[a[l]]=null}return n};var a=function(t,e){this.Init(t,e)};t.Obj.createSubclass(a,t.Obj),a.prototype.Init=function(t,e){this._displayable=t,this._category=e},a.prototype.getCategories=function(){return this._category},a.prototype.getDisplayables=function(){return[this._displayable]},t.MapDrillEvent=function(e){this.Init(t.MapDrillEvent.TYPE),this._drillType=e},t.Obj.createSubclass(t.MapDrillEvent,t.BaseComponentEvent),t.MapDrillEvent.TYPE="drill",t.MapDrillEvent.DRILL_UP=0,t.MapDrillEvent.DRILL_DOWN=1,t.MapDrillEvent.RESET=2,t.MapDrillEvent.prototype.getDisclosed=function(){return this._disclosed},t.MapDrillEvent.prototype.setDisclosed=function(t){this._disclosed=t},t.MapDrillEvent.prototype.getDrillType=function(){return this._drillType},t.MapActionEvent=function(e,i,n){this.Init(t.MapActionEvent.TYPE),this.item=e,this.rowKey=i,this.action=n},t.Obj.createSubclass(t.MapActionEvent,t.BaseComponentEvent),t.MapActionEvent.TYPE="action",t.MapActionEvent.prototype.getClientId=function(){return this.item},t.MapActionEvent.prototype.getRowKey=function(){return this.rowKey},t.MapActionEvent.prototype.getAction=function(){return this.action};var l=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)};t.Obj.createSubclass(l,t.OutputText),l.prototype.Init=function(e,i,n,o,r,s){if(l.superclass.Init.call(this,e,i,0,0),this._bSupportsVectorEffects=s,this._boundRectangle=new Array,this.setMouseEnabled(!1),this.alignCenter(),this.alignMiddle(),this._center=null,this._labelDisplay=o,this._parentContainer=r,n&&(this._boundRectangle.push(t.Rectangle.create(n[0])),n.length>1)){this._leaderLines=new Array;for(var a=1;a<n.length;a++){var h=n[a];this._boundRectangle.push(t.Rectangle.create(h[0]));var u=new t.Polyline(e,h[1]);u.setPixelHinting(!0);var d=new t.SolidStroke("#000000");this._bSupportsVectorEffects&&d.setFixedWidth(!0),u.setStroke(d),this._leaderLines.push(u)}}},l.prototype.addBounds=function(t){this._boundRectangle.push(t)},l.prototype.hasBounds=function(){return this._boundRectangle.length>0},l.prototype.update=function(e){for(var i=e.getA(),n=-1,o=t.TextUtils.guessTextDimensions(this),r=!1,s=0;s<this._boundRectangle.length;s++){var a=this._boundRectangle[s].w*i,l=this._boundRectangle[s].h*i;if(o.h<=l){if(o.w<=a){n=s;break}if(this.getParent()||(r=!0,this._parentContainer.addChild(this)),this.getDimensions().w<=a){n=s;break}}}if(n==-1&&"on"==this._labelDisplay&&(n=this._boundRectangle.length-1),this._currentState!=n){if(n==-1)this.reset();else{this.getParent()||this._parentContainer.addChild(this);var h=this._boundRectangle[n].getCenter();if(this.setCenter(h),this._leaderLines)if(this._parentContainer.removeChild(this._leaderLine),this._leaderLine=null,n>0){this._leaderLine=this._leaderLines[n-1],this._parentContainer.addChild(this._leaderLine);var u=this.getCSSStyle();u.setStyle(t.CSSStyle.COLOR,"#000000"),this.setCSSStyle(u);var d=this._boundRectangle[n],c=this._leaderLine.getPoints(),p=c.length;d.x>c[p-2]?(this.alignLeft(),this.alignMiddle(),this.setCenter(new t.Point(d.x,h.y))):d.y>c[p-1]?(this.alignTop(),this.alignCenter(),this.setCenter(new t.Point(h.x,d.y))):d.x+d.w<c[p-2]?(this.alignRight(),this.alignMiddle(),this.setCenter(new t.Point(d.x+d.w,h.y))):d.y+d.h<c[p-1]&&(this.alignBottom(),this.alignCenter(),this.setCenter(new t.Point(h.x,d.y+d.h)))}else{this.alignCenter(),this.alignMiddle();var u=this.getCSSStyle();u.setStyle(t.CSSStyle.COLOR,this._labelColor),this.setCSSStyle(u)}}this._currentState=n}else n==-1&&r&&this._parentContainer.removeChild(this);if(this._currentState!=-1){var _=new t.Matrix;if(_.translate(i*this._center.x-this._center.x,i*this._center.y-this._center.y),this.setMatrix(_),this._leaderLine&&(this._leaderLine.setMatrix(new t.Matrix(i,0,0,i)),!this._bSupportsVectorEffects)){var g=this._leaderLine.getStroke().clone();g.setWidth(1/i),this._leaderLine.setStroke(g)}}},l.prototype.setCenter=function(t){this._center=t,this.setX(t.x),this.setY(t.y)},l.prototype.getLeaderLine=function(){return this._leaderLine},l.prototype.getCenter=function(){
return this._center},l.prototype.setCSSStyle=function(e){l.superclass.setCSSStyle.call(this,e),this._labelColor||(this._labelColor=e.getStyle(t.CSSStyle.COLOR))},l.prototype.reset=function(){this._parentContainer.removeChild(this),this._currentState=-1,this._leaderLine&&(this._parentContainer.removeChild(this._leaderLine),this._leaderLine=null)};var h=function(t,e,i,n,o){this.Init(t,e,i,n,o)};t.Obj.createSubclass(h,t.Obj,"DvtMapObjPeer"),h.ANIMATION_DELETE_PRIORITY=0,h.ANIMATION_UPDATE_PRIORITY=1,h.ANIMATION_INSERT_PRIORITY=2,h.prototype.Init=function(e,i,n,o,r){this._data=e,this._dataLayer=i,this.Displayable=n,this._isSelected=!1,this._isShowingHoverEffect=!1,this._isShowingKeyboardFocusEffect=!1,this.Displayable.setDataColor&&this.Displayable.setDataColor(e.color),this._label=o,this._center=r,this.Zoom=1,this._view=i.getMap(),this._data.categories||this._label&&(this._data.categories=[this._label.getTextString()]);var a=e.location;if(this._locationName,a){var l=i.getMapLayer();!(l instanceof _)||l instanceof g?this._locationName=s.getCityLabel(this._view.getMapName(),a):this._locationName=s.getLongAreaLabel(this._view.getMapName(),l.getLayerName(),a)}"auto"==this._view.getDisplayTooltips()&&this._locationName&&(this._data.shortDesc=e.shortDesc?this._locationName+": "+e.shortDesc:this._locationName),this.Displayable&&(this.Displayable.setStyle(e.style).setClassName(e.className),e.destination?(this.Displayable.setAriaRole("link"),this._linkCallback=t.ToolkitUtils.getLinkCallback("_blank",e.destination)):this.Displayable.setAriaRole("img")),this.UpdateAriaLabel(),this.setSelectable(this.isSelectable())},h.prototype.getId=function(){return this._data.id},h.prototype.getClientId=function(){return this._data.clientId},h.prototype.getLocation=function(){return this._data.location},h.prototype.getLocationName=function(){return this._locationName},h.prototype.getCenter=function(){return this._center},h.prototype._setCenter=function(t){this._center=t,this.__recenter()},h.prototype.getDisplayable=function(){return this.Displayable},h.prototype.getLabel=function(){return this._label},h.prototype.getDataLayer=function(){return this._dataLayer},h.prototype.hasAction=function(){return null!=this.getAction()},h.prototype.getAction=function(){return this._data.action},h.prototype.setVisible=function(t){this.Displayable.setVisible(t),this._label&&this._label.setVisible(t)},h.prototype.getShortDesc=function(){return this._data.shortDesc},h.prototype.removeLabel=function(){this._label=null},h.prototype.getSize=function(){return this.Displayable.getWidth?this.Displayable.getWidth()*this.Displayable.getHeight():0},h.prototype.getCategories=function(){var t=this._data.categories;return t?t:[]},h.prototype.getDatatip=function(){if("none"!=this._view.getDisplayTooltips()){var t=this._view.getOptions()._tooltip;return t?this._view.getCtx().getTooltipManager().getCustomTooltip(t.renderer,this.getDataContext()):this.getShortDesc()}return null},h.prototype.getDataContext=function(){return{color:this.getDatatipColor(),component:this._view.getOptions()._widgetConstructor,data:this._data,id:this.getId(),label:this._label?this._label.getTextString():null,location:this.getLocation(),locationName:this._locationName,tooltip:this.getShortDesc(),x:this._data.x,y:this._data.y}},h.prototype.getLinkCallback=function(){return this._linkCallback},h.prototype.getDatatipColor=function(){return this._data.color?this._data.color:"#000000"},h.prototype.getAriaLabel=function(){var e=[];return this.isSelectable()&&e.push(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,this.isSelected()?"STATE_SELECTED":"STATE_UNSELECTED")),t.Displayable.generateAriaLabel(this.getShortDesc(),e)},h.prototype.getDisplayables=function(){return[this.getDisplayable()]},h.prototype.UpdateAriaLabel=function(){if(!t.Agent.deferAriaCreation()){var e=this.getAriaLabel();e&&this.Displayable.setAriaProperty("label",e)}},h.prototype.setSelectable=function(e){var i=this.getLabel();this.Displayable.setSelectable&&(this.Displayable.setSelectable(e),i&&e&&i.setCursor(t.SelectionEffectUtils.getSelectingCursor())),this._data.destination&&(this.Displayable.setCursor(t.SelectionEffectUtils.getSelectingCursor()),i&&i.setCursor(t.SelectionEffectUtils.getSelectingCursor()))},h.prototype.isSelectable=function(){return!!this.Displayable.isSelectable&&("off"!==this._data.selectable&&this._dataLayer.isSelectable())},h.prototype.isSelected=function(){return this._isSelected},h.prototype.setSelected=function(t){if(this.isSelectable()){var e=this._getState();this._isSelected=t,this._dataLayer.getOptions().selectionRenderer?this._callCustomRenderer(this._dataLayer.getOptions().selectionRenderer,this._getState(),e):this.processDefaultSelectionEffect(t),this.UpdateAriaLabel()}},h.prototype.showHoverEffect=function(){var t=this._getState();this._isShowingHoverEffect=!0,this._dataLayer.getOptions().hoverRenderer?this._callCustomRenderer(this._dataLayer.getOptions().hoverRenderer,this._getState(),t):this.processDefaultHoverEffect(!0)},h.prototype.hideHoverEffect=function(){var t=this._getState();this._isShowingHoverEffect=!1,this._dataLayer.getOptions().hoverRenderer?this._callCustomRenderer(this._dataLayer.getOptions().hoverRenderer,this._getState(),t):this.processDefaultHoverEffect(!1)},h.prototype.setShowPopupBehaviors=function(t){this._showPopupBehaviors=t},h.prototype.getShowPopupBehaviors=function(){return this._showPopupBehaviors},h.prototype.isDragAvailable=function(t){for(var e=this._dataLayer.getClientId(),i=0;i<t.length;i++)if(t[i]==e)return e;return e},h.prototype.getDragTransferable=function(t,e){return this._dataLayer.__getDragTransferable(this)},h.prototype.getDragFeedback=function(t,e){return this._dataLayer.__getDragFeedback()},h.prototype.getNextNavigable=function(e){var i;if(e.type==t.MouseEvent.CLICK)return this;if(e.keyCode==t.KeyboardEvent.SPACE&&e.ctrlKey)return this;if((e.keyCode==t.KeyboardEvent.OPEN_ANGLED_BRACKET||t.KeyboardEvent.CLOSE_ANGLED_BRACKET)&&e.altKey){var n=this.getDataLayer().getNavigableLinksForNodeId(this.getId());i=f.getFirstNavigableLink(this,e,n)}else i=t.KeyboardHandler.getNextAdjacentNavigable(this,e,this.GetNavigables());return this.getDataLayer().getMap().ensureObjInViewport(e,i),i},h.prototype.GetNavigables=function(){return this.getDataLayer().getMap().getNavigableMarkers()},h.prototype.getKeyboardBoundingBox=function(e){return this.Displayable.getParent()?this.Displayable.getDimensions(e?e:this.Displayable.getCtx().getStage()):new t.Rectangle(0,0,0,0)},h.prototype.getTargetElem=function(){return this.Displayable.getElem()},h.prototype.showKeyboardFocusEffect=function(){var t=this._getState();this._isShowingKeyboardFocusEffect=!0,this._dataLayer.getOptions().focusRenderer?this._callCustomRenderer(this._dataLayer.getOptions().focusRenderer,this._getState(),t):this.processDefaultFocusEffect(!0)},h.prototype.hideKeyboardFocusEffect=function(){if(this.isShowingKeyboardFocusEffect()){var t=this._getState();this._isShowingKeyboardFocusEffect=!1,this._dataLayer.getOptions().focusRenderer?this._callCustomRenderer(this._dataLayer.getOptions().focusRenderer,this._getState(),t):this.processDefaultFocusEffect(!1)}},h.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},h.prototype.HandleZoomEvent=function(t){this.Displayable.getParent()&&(this.Zoom=t.getA(),this.__recenter())},h.prototype.positionLabel=function(){if(this._label){this._label.alignCenter();var e,i=this.Displayable.getCx()*this.Zoom,n=this.Displayable.getCy()*this.Zoom,o=this.Displayable.getHeight(),r=this.Displayable instanceof t.SimpleMarker?this.Displayable.getType():"image",s=this._data.labelPosition;"top"==s?(e=n-o/2-4,this._label.alignBottom()):"bottom"==s?(e=n+o/2,this._label.alignTop()):r==t.SimpleMarker.TRIANGLE_UP?(e=n+o/6,this._label.alignMiddle()):r==t.SimpleMarker.TRIANGLE_DOWN?(e=n-o/6,this._label.alignMiddle()):(e=n,this._label.alignMiddle()),this._label.setX(i).setY(e)}},h.prototype.__recenter=function(){var e=this.Displayable.getWidth(),i=this.Displayable.getHeight();if(null!=e&&null!=i&&this.Displayable.getParent()){var n=0,o=this._center.x,s=this._center.y;this.Displayable.getRotation&&(n=this.Displayable.getRotation(),o=this._center.x*Math.cos(n)-this._center.y*Math.sin(n),s=this._center.x*Math.sin(n)+this._center.y*Math.cos(n)),o=this._center.x*this.Zoom-o,s=this._center.y*this.Zoom-s,this.Displayable instanceof r&&(o+=this._center.x-e/2,s+=this._center.y-i/2),this.Displayable.setTranslate(o,s),t.Agent.workaroundFirefoxRepaint(this.Displayable),this.positionLabel()}},h.prototype.animateUpdate=function(e,i){var n=new t.CustomAnimation(this._view.getCtx(),this.Displayable,this.getDataLayer().getAnimationDuration()),o=i.getDisplayable();if(this.Displayable.getFill){var r=o.getFill(),s=this.Displayable.getFill();if(s instanceof t.SolidFill&&!s.equals(r)){if(this.Displayable.setFill(r),i.getLabel()&&this._label){var a=this._label.getFill();this._label.setFill(i.getLabel().getFill().clone()),a.equals(this._label.getFill())||n.getAnimator().addProp(t.Animator.TYPE_FILL,this._label,this._label.getFill,this._label.setFill,a)}n.getAnimator().addProp(t.Animator.TYPE_FILL,this.Displayable,this.Displayable.getFill,this.Displayable.setFill,s)}}if(this.Displayable.getCenterDimensions){var l=i.getDisplayable().getCenterDimensions(),u=this.Displayable.getCenterDimensions();l.x==u.x&&l.y==u.y&&l.w==u.w&&l.h==u.h||(this.Displayable.setCenterDimensions(l),n.getAnimator().addProp(t.Animator.TYPE_RECTANGLE,this.Displayable,this.Displayable.getCenterDimensions,this.Displayable.setCenterDimensions,u))}var d=o.getRotation(),c=this.Displayable.getRotation();if(d!=c){var p=d-c;p>Math.PI?d-=2*Math.PI:p<-Math.PI&&(d+=2*Math.PI),this.Displayable.setRotation(d),n.getAnimator().addProp(t.Animator.TYPE_NUMBER,this.Displayable,this.Displayable.getRotation,this.Displayable.setRotation,c)}var _=i.getCenter(),g=this.getCenter();if(_&&g&&(_.x==g.x&&_.y==g.y&&d==c||(this._setCenter(new t.Point(_.x,_.y)),n.getAnimator().addProp(t.Animator.TYPE_POINT,this,this.getCenter,this._setCenter,new t.Point(g.x,g.y)))),this._label&&i.getLabel()){var m=i.getLabel().getX(),f=this._label.getX();m!=f&&(this._label.setX(m),n.getAnimator().addProp(t.Animator.TYPE_NUMBER,this._label,this._label.getX,this._label.setX,f));var y=i.getLabel().getY(),v=this._label.getY();y!=v&&(this._label.setY(y),n.getAnimator().addProp(t.Animator.TYPE_NUMBER,this._label,this._label.getY,this._label.setY,v)),i.getLabel().setAlpha(0)}else i.getLabel()&&i.getLabel().setAlpha(0);o.setAlpha(0),e.add(n,h.ANIMATION_UPDATE_PRIORITY)},h.prototype.animateDelete=function(e,i){var n=[this.Displayable],o=this.getLabel();o&&n.push(o);var r=new t.AnimFadeOut(this._view.getCtx(),n,this.getDataLayer().getAnimationDuration());e.add(r,h.ANIMATION_DELETE_PRIORITY)},h.prototype.animateInsert=function(e){var i=[this.Displayable];this.Displayable.setAlpha(0);var n=this.getLabel();n&&(n.setAlpha(0),i.push(n));var o=new t.AnimFadeIn(this._view.getCtx(),i,this.getDataLayer().getAnimationDuration());e.add(o,h.ANIMATION_INSERT_PRIORITY)},h.prototype.processDefaultSelectionEffect=function(t){this.Displayable.setSelected&&this.Displayable.setSelected(t)},h.prototype.processDefaultFocusEffect=function(t){this.processDefaultHoverEffect(t)},h.prototype.processDefaultHoverEffect=function(t){t?this.Displayable.showHoverEffect&&this.Displayable.showHoverEffect():this.Displayable.hideHoverEffect&&!this.isShowingKeyboardFocusEffect()&&this.Displayable.hideHoverEffect()},h.prototype._callCustomRenderer=function(t,e,i){if(this.Displayable instanceof r){var n=this._view.getOptions()._contextHandler;if(n){var o=this.Displayable.getRootElement(),s=n(this.Displayable.getElem(),o,this._data,e,i),a=t(s);this.Displayable.updateRootElement(a)}}},h.prototype.IsHoverEffectShown=function(){return this._isShowingHoverEffect},h.prototype._getState=function(){return{hovered:this.IsHoverEffectShown(),selected:this.isSelected(),focused:this.isShowingKeyboardFocusEffect()}};var u=function(t,e,i,n){this.Init(t,e,i,n)};t.Obj.createSubclass(u,h,"DvtMapAreaPeer"),u.prototype.Init=function(t,e,i,n){u.superclass.Init.call(this,t,e,i,n)},u.prototype.setAreaLayer=function(t){this._dataAreaLayer=t},u.prototype.setSelected=function(t){this.isSelectable()&&(t&&!this.IsHoverEffectShown()&&this._dataAreaLayer.addChild(this.Displayable),u.superclass.setSelected.call(this,t))},u.prototype.showHoverEffect=function(){this._dataAreaLayer.addChild(this.Displayable),u.superclass.showHoverEffect.call(this)},u.prototype.hideHoverEffect=function(){this.isSelected()?this._dataAreaLayer.addChild(this.Displayable):this._dataAreaLayer.addChildAt(this.Displayable,0),u.superclass.hideHoverEffect.call(this)},u.prototype.isDrilled=function(){return this.Displayable.isDrilled()},u.prototype.setDrilled=function(t){t?this._dataAreaLayer.addChild(this.Displayable):this._dataAreaLayer.addChildAt(this.Displayable,0),this.Displayable.setDrilled(t)},u.prototype.HandleZoomEvent=function(t){u.superclass.HandleZoomEvent.call(this,t),this.Displayable.getParent()&&(this.Displayable.handleZoomEvent(t),this.isDrilled()||this.positionLabel(t))},u.prototype.positionLabel=function(t){this.getLabel()&&this.getLabel().update(t)},u.prototype.GetNavigables=function(){return this.getDataLayer().getMap().getNavigableAreas()},u.prototype.animateUpdate=function(t,e){u.superclass.animateUpdate.call(this,t,e),this.getDataLayer().getMapLayer().setAreaRendered(this.getLocation(),!1)},u.prototype.__recenter=function(){};var d=function(t,e,i,n,o,r,s){this.Init(t,e,i,n,o,r,s)};t.Obj.createSubclass(d,h,"DvtMapLinkPeer"),d.prototype.Init=function(t,e,i,n,o,r,s){d.superclass.Init.call(this,t,e,i),this._startPt=n,this._endPt=o,this._startMarker=r,this._endMarker=s},d.prototype.getStartMarker=function(){return this._startMarker},d.prototype.getEndMarker=function(){return this._endMarker},d.prototype.getStartPoint=function(){return this._startPt},d.prototype.getEndPoint=function(){return this._endPt},d.prototype.getNextNavigable=function(e){var i,n=this._dataLayer.getMap().EventManager.getKeyboardHandler();if(e.type==t.MouseEvent.CLICK)return this;if(e.keyCode==t.KeyboardEvent.SPACE&&e.ctrlKey)return this;if(n.getLinkNavigationType()===f.LINK_NODE_NAV)if(e.keyCode===t.KeyboardEvent.UP_ARROW){var o=n.getLinkMarker().getId(),r=this.getDataLayer().getNavigableLinksForNodeId(o),s=r.indexOf(this);s++,s===r.length&&(s=0),i=r[s]}else if(e.keyCode===t.KeyboardEvent.DOWN_ARROW){var o=n.getLinkMarker().getId(),r=this.getDataLayer().getNavigableLinksForNodeId(o),s=r.indexOf(this);s--,s===-1&&(s=r.length-1),i=r[s]}else if(e.keyCode===t.KeyboardEvent.LEFT_ARROW)i=this.getStartPoint().x<=this.getEndPoint().x?this.getStartMarker():this.getEndMarker();else{if(e.keyCode!==t.KeyboardEvent.RIGHT_ARROW)return this;i=this.getStartPoint().x>=this.getEndPoint().x?this.getStartMarker():this.getEndMarker()}else i=t.KeyboardHandler.getNextAdjacentNavigable(this,e,this.GetNavigables());return this.getDataLayer().getMap().ensureObjInViewport(e,i),i},d.prototype.GetNavigables=function(){return this.getDataLayer().getMap().getNavigableLinks()},d.prototype.__recenter=function(){if(this.Displayable.getParent()){var e=new t.Point(this._startPt.x*this.Zoom,this._startPt.y*this.Zoom),i=new t.Point(this._endPt.x*this.Zoom,this._endPt.y*this.Zoom),n=v.calcCurve(this._dataLayer,this._startPt,this._endPt,e,i);this.Displayable.setCmds(n),t.Agent.workaroundFirefoxRepaint(this.Displayable)}},d.prototype.animateUpdate=function(e,i){var n=new t.CustomAnimation(this._view.getCtx(),this.Displayable,this.getDataLayer().getAnimationDuration()),o=i.getDisplayable(),r=o.getStroke(),s=this.Displayable.getStroke();s.getColor()!=r.getColor()&&(this.Displayable.setStroke(r),n.getAnimator().addProp(t.Animator.TYPE_STROKE,this.Displayable,this.Displayable.getStroke,this.Displayable.setStroke,s));var a=i.getStartPoint(),l=i.getEndPoint(),u=this.getStartPoint(),d=this.getEndPoint(),c=!0;a.equals(u)&&l.equals(d)||(c=!1,this.Displayable.setAlpha(0),n.getAnimator().addProp(t.Animator.TYPE_NUMBER,this.Displayable,this.Displayable.getAlpha,this.Displayable.setAlpha,1),n.getAnimator().addProp(t.Animator.TYPE_NUMBER,o,o.getAlpha,o.setAlpha,0)),c&&o.setAlpha(0),e.add(n,h.ANIMATION_UPDATE_PRIORITY)};var c=function(t,e,i,n,o,r){this.Init(t,e,i,n,o,r)};t.Obj.createSubclass(c,t.Container),c._DEFAULT_STROKE_WIDTH=1,c.prototype.Init=function(t,e,i,n,o,r){c.superclass.Init.call(this,t),this._bSelectable=!1,this._isSelected=!1,this._areaId=n,this._areaName=o,this._shape=i,this.addChild(this._shape),this._view=e,this._bSupportsVectorEffects=r;var s=i.getStroke();s&&(this._areaStrokeWidth=s.getWidth())},c.prototype.getAreaId=function(){return this._areaId},c.prototype.getDatatip=function(){if("none"!=this._view.getDisplayTooltips()){var t=this._view.getOptions()._tooltip;return t?this._view.getCtx().getTooltipManager().getCustomTooltip(t.renderer,this.getDataContext()):this._tooltip}return null},c.prototype.setDatatip=function(t){this._tooltip=t},c.prototype.getDataContext=function(){return{color:null,component:this._view.getOptions()._widgetConstructor,data:null,id:null,label:null,location:this.getAreaId(),locationName:this._areaName,tooltip:this._tooltip,x:null,y:null}},c.prototype.getStroke=function(){return this._shape instanceof t.Shape?this._shape.getStroke():null},c.prototype.setStroke=function(e){this._shape instanceof t.Shape&&this._shape.setStroke(e)},c.prototype.setFill=function(e){this._shape instanceof t.Shape&&this._shape.setFill(e)},c.prototype.getFill=function(){return this._shape instanceof t.Shape?this._shape.getFill():null},c.prototype.getCmds=function(){return this._shape instanceof t.Path?this._shape.getCmds():null},c.prototype.setCmds=function(e){this._shape instanceof t.Path&&this._shape.setCmds(e)},c.prototype.setSrc=function(e){this._shape instanceof t.Image&&this._shape.setSrc(e)},c.prototype.getDropSiteFeedback=function(){return this._shape.copyShape()},c.prototype.contains=function(t,e){var i=this.getDimensions();return t>=i.x&&t<=i.x+i.w&&e>=i.y&&e<=i.y+i.h},c.prototype.HandleZoomEvent=function(t){if(!this._bSupportsVectorEffects&&this._shape&&this._areaStrokeWidth){var e=this._shape.getStroke().clone();e.setWidth(this._areaStrokeWidth/t.getA()),this._shape.setStroke(e)}};var p=function(t,e,i){this.Init(t,e,i)};t.Obj.createSubclass(p,t.Obj),p.prototype.Init=function(e,i,n){this._tmap=e,this.LayerName=i,this.EventHandler=n,this.DataLayers={},this.PzcMatrix=new t.Matrix},p.prototype.addDataLayer=function(t){this.DataLayers[t.getClientId()]=t},p.prototype.PreDataLayerUpdate=function(){},p.prototype.PostDataLayerUpdate=function(){},p.prototype.updateDataLayer=function(e,i,n){if(this._animation&&this._animation.stop(!0),this.PzcMatrix=i,this._oldDataLayer=this.getDataLayer(e.getClientId()),this.addDataLayer(e),e.render(this.PzcMatrix),e.HandleZoomEvent(new t.ZoomEvent(t.ZoomEvent.SUBTYPE_ZOOMED),this.PzcMatrix),this._oldDataLayer){var o=e.getAnimation(),r=e.getAnimationDuration();if("auto"==o){var s=new t.DataAnimationHandler(this._tmap.getCtx());s.constructAnimation(this._oldDataLayer.getAllObjects(),e.getAllObjects()),this._animation=s.getAnimation()}else if(t.BlackBoxAnimationHandler.isSupported(o)){this._removeAnimRect=!0;for(var a=new t.Rectangle(0,0,this._tmap.getWidth(),this._tmap.getHeight()),l=this._oldDataLayer.getNonScaledContainers(),h=0;h<l.length;h++){var u=new t.Rect(this._tmap.getCtx(),0,0,this._tmap.getWidth(),this._tmap.getHeight());u.setFill(null),l[h].addChild(u)}for(var d=e.getNonScaledContainers(),h=0;h<d.length;h++){var u=new t.Rect(this._tmap.getCtx(),0,0,this._tmap.getWidth(),this._tmap.getHeight());u.setFill(null),d[h].addChild(u)}for(var c=t.BlackBoxAnimationHandler.getCombinedAnimation(this._tmap.getCtx(),o,l,d,a,r),p=new t.Rectangle(0,0,this._tmap.getWidth()/this.PzcMatrix.getA(),this._tmap.getHeight()/this.PzcMatrix.getA()),_=this._oldDataLayer.getScaledContainers(),h=0;h<_.length;h++){var u=new t.Rect(this._tmap.getCtx(),0,0,this._tmap.getWidth()/this.PzcMatrix.getA(),this._tmap.getHeight()/this.PzcMatrix.getA());u.setFill(null),_[h].addChild(u)}for(var g=e.getScaledContainers(),h=0;h<g.length;h++){var u=new t.Rect(this._tmap.getCtx(),0,0,this._tmap.getWidth()/this.PzcMatrix.getA(),this._tmap.getHeight()/this.PzcMatrix.getA());u.setFill(null),g[h].addChild(u)}var m=t.BlackBoxAnimationHandler.getCombinedAnimation(this._tmap.getCtx(),o,_,g,p,r);this._animation=new t.ParallelPlayable(this._tmap.getCtx(),[c,m])}else for(var f=this._oldDataLayer.getContainers(),h=0;h<f.length;h++){var y=f[h].getParent();y.removeChild(f[h])}if(this.PreDataLayerUpdate(),this._animation){this.EventHandler.removeListeners(this._callbackObj);var v=this;this._animation.setOnEnd(function(){v.OnAnimationEnd(e)},this),this._animation.play()}}else this.PostDataLayerUpdate(),this._tmap.OnUpdateLayerEnd()},p.prototype.getDataLayers=function(){return this.DataLayers},p.prototype.getDataLayer=function(t){return this.DataLayers?this.DataLayers[t]:null},p.prototype.getLayerName=function(){return this.LayerName},p.prototype.render=function(t){this.PzcMatrix=t;for(var e in this.DataLayers)this.DataLayers[e].render(t)},p.prototype.reset=function(t,e){for(var i in this.DataLayers)this.DataLayers[i].reset(t,e)},p.prototype.HandleZoomEvent=function(t,e){this.PzcMatrix=e;for(var i in this.DataLayers)this.DataLayers[i].HandleZoomEvent(t,e)},p.prototype.HandlePanEvent=function(t){this.PzcMatrix=t;for(var e in this.DataLayers)this.DataLayers[e].HandlePanEvent(t)},p.prototype.OnAnimationEnd=function(t){if(this._oldDataLayer)for(var e=this._oldDataLayer.getContainers(),i=0;i<e.length;i++){var n=e[i].getParent();n&&n.removeChild(e[i])}if(this._removeAnimRect){this._removeAnimRect=!1;for(var o=t.getNonScaledContainers(),i=0;i<o.length;i++)o[i].removeChildAt(o[i].getNumChildren()-1);for(var r=t.getScaledContainers(),i=0;i<r.length;i++)r[i].removeChildAt(r[i].getNumChildren()-1)}this.PostDataLayerUpdate(),this._tmap.OnUpdateLayerEnd(),this._animation=null,this.EventHandler.addListeners(this._callbackObj)},p.prototype.destroy=function(){var t=this.getDataLayers();for(var e in t)t[e].destroy()};var _=function(t,e,i,n,o){this.Init(t,e,i,n,o)};t.Obj.createSubclass(_,p),_._SHORT_NAME=0,_._LONG_NAME=1,_.prototype.Init=function(e,n,o,r,s){_.superclass.Init.call(this,e,n,s),this._labelDisplay=o,this._labelType=r,this._areaLabels=new Object,this.Areas=new Object,this.AreaShapes={},this.AreaLabels=null,this._labelInfo=null,this._disclosed=[],this._renderArea={},this._renderLabel={},this._renderedLabels={},this.AreaContainer=new t.Container(this._tmap.getCtx()),this.LabelContainer=new t.Container(this._tmap.getCtx()),this._tmap.getAreaLayerContainer().addChildAt(this.AreaContainer,0),this._tmap.getLabelContainer().addChildAt(this.LabelContainer,0),this._dropTarget=new i(this,this._tmap.getMapName())},_.prototype.setAnimation=function(t){this._animType=t},_.prototype.getAnimation=function(){return this._animType},_.prototype.setAnimationDuration=function(t){this._animDur=t},_.prototype.getAnimationDuration=function(){return this._animDur},_.prototype.getDropTarget=function(){return this._dropTarget},_.prototype.getLabelType=function(){return this._labelType},_.prototype.setAreaShapes=function(t){this.AreaShapes=t;for(var e in t)this.setAreaRendered(e,!0)},_.prototype.setAreaLabels=function(t){this.AreaLabels=t;for(var e in t)this.setLabelRendered(e,!0)},_.prototype.getShortAreaName=function(t){return this.AreaLabels&&this.AreaLabels[t]?this.AreaLabels[t][_._SHORT_NAME]:null},_.prototype.getLongAreaName=function(t){return this.AreaLabels&&this.AreaLabels[t]?this.AreaLabels[t][_._LONG_NAME]:null},_.prototype.setAreaLabelInfo=function(t){this._labelInfo=t},_.prototype.getLabelInfoForArea=function(t){return this._labelInfo?this._labelInfo[t]:null},_.prototype.setAreaChildren=function(t){this._children=t},_.prototype.getChildrenForArea=function(t){return this._children[t]?this._children[t].split(","):[]},_.prototype.getArea=function(t){return this.Areas[t]},_.prototype.getAreaShape=function(t){return this.AreaShapes[t]},_.prototype.getLabelDisplay=function(){return this._labelDisplay},_.prototype.setDropSiteCSSStyle=function(t){this._dropSiteCSSStyle=t},_.prototype.setLayerCSSStyle=function(t){this._layerCSSStyle=t},_.prototype.getLayerCSSStyle=function(){return new t.CSSStyle(this._layerCSSStyle)},_.prototype.setAreaRendered=function(t,e){this._renderArea[t]=e},_.prototype.setLabelRendered=function(t,e){this._renderLabel[t]=e},_.prototype.setIsolatedArea=function(t){this._isolatedArea=t,this._layerDim=null;for(var e in this.AreaShapes)e!=t&&(this._renderArea[e]=!1)},_.prototype.getIsolatedArea=function(){return this._isolatedArea},_.prototype.getLayerDim=function(){if(!this._layerDim)if(this._isolatedArea)this._layerDim=t.PathUtils.getDimensions(t.PathUtils.createPathArray(s.getPathForArea(this._tmap.getMapName(),this.LayerName,this._isolatedArea)));else if("world"!=this._tmap.getMapName()&&"worldRegions"!=this._tmap.getMapName()&&(this._layerDim=s.getBaseMapDim(this._tmap.getMapName(),this.LayerName)),!this._layerDim){var e=this.AreaContainer.getDimensions().getUnion(this._tmap.getDataAreaContainer().getDimensions()).getUnion(this._tmap.getDataPointContainer().getDimensions()).getUnion(this._tmap.getLinkContainer().getDimensions());e.w>0&&e.h>0&&(this._layerDim=e)}return this._layerDim},_.prototype._createAreaAndLabel=function(e,i){var n=this.AreaShapes[e];if(n){if(!i&&this.Areas[e]||this.updateAreaShape(e),!this.Areas[e]){var o=this._tmap.getCtx(),r=this.AreaLabels&&this.AreaLabels[e]?this.AreaLabels[e][_._LONG_NAME]:null,s=new c(o,this._tmap,n,e,r,this._tmap.supportsVectorEffects());this.Areas[e]=s,this.EventHandler.associate(n,s),s.setDatatip(r)}if(this._renderLabel[e]){var a=this._areaLabels[e];if(!a&&"off"!=this._labelDisplay&&this.AreaLabels){var h="short"==this._labelType?this.AreaLabels[e][_._SHORT_NAME]:this.AreaLabels[e][_._LONG_NAME];if(h){if(this._labelInfo&&this._labelInfo[e])a=new l(this._tmap.getCtx(),h,this._labelInfo[e],this._labelDisplay,this.LabelContainer,this._tmap.supportsVectorEffects());else{var u=t.DisplayableUtils.getDimensionsForced(this._tmap.getCtx(),n);a=new l(this._tmap.getCtx(),h,[[u.x,u.y,u.w,u.h]],this._labelDisplay,this.LabelContainer,this._tmap.supportsVectorEffects())}this._areaLabels[e]=a,this._layerCSSStyle&&a.setCSSStyle(this._layerCSSStyle)}}}}},_.prototype._addAreaAndLabel=function(t,e){if(this.AreaShapes[t]){this.AreaContainer.addChild(this.Areas[t]);var i=this._areaLabels[t];i&&(this._renderLabel[t]?i.update(this.PzcMatrix):i.reset(),this._renderedLabels[t]=this._renderLabel[t]),e&&(e.push(this.Areas[t]),i&&(e.push(i),e.push(i.getLeaderLine())))}},_.prototype.updateAreaShape=function(t){if(!this._paths||this._bUpdateShapesForRender){this._bUpdateShapesForRender=!1;var e;e="world"==this._tmap.getMapName()||"worldRegions"==this._tmap.getMapName()?s.getBaseMapDim(this._tmap.getMapName(),this.LayerName):this.getLayerDim(),e?this._paths=s.simplifyAreaPaths(s.getAreaPaths(this._tmap.getMapName(),this.LayerName),e.w,e.h,this._tmap.getWidth(),this._tmap.getHeight(),this._tmap.getMaxZoomFactor()):this._paths=s.getAreaPaths(this._tmap.getMapName(),this.LayerName)}var i=this._paths[t];this.AreaShapes[t]&&i?this.AreaShapes[t].setCmds(i):delete this.AreaShapes[t]},_.prototype.resetRenderedAreas=function(){for(var t in this.AreaLabels)this.setAreaRendered(t,!0),this.setLabelRendered(t,!0)},_.prototype.updateDataLayer=function(t,e,i){if(_.superclass.updateDataLayer.call(this,t,e,i),i==this.getLayerName())for(var n in this.AreaShapes)this._createAreaAndLabel(n,!0),this._renderArea[n]&&this._addAreaAndLabel(n)},_.prototype.render=function(t){this._bUpdateShapesForRender=!0;for(var e in this.AreaShapes)this._createAreaAndLabel(e,!0),this._renderArea[e]&&this._addAreaAndLabel(e);_.superclass.render.call(this,t)},_.prototype.PreDataLayerUpdate=function(){for(var t in this._renderArea)this._renderArea[t]||(this._createAreaAndLabel(t,!1),this._addAreaAndLabel(t))},_.prototype.PostDataLayerUpdate=function(){for(var t in this._renderArea)if(!this._renderArea[t]){this.AreaContainer.removeChild(this.Areas[t]);var e=this._areaLabels[t];if(e){this._renderedLabels[t]=!1,this.LabelContainer.removeChild(e);var i=e.getLeaderLine();i&&this.LabelContainer.removeChild(i)}}},_.prototype._renderSelectedAreasAndLabels=function(t,e){for(var i=0;i<t.length;i++)this._createAreaAndLabel(t[i],!1),this._renderArea[t[i]]&&this._addAreaAndLabel(t[i],e)},_.prototype.discloseAreas=function(t,e){this._renderSelectedAreasAndLabels(t,e);for(var i in this.DataLayers)this.DataLayers[i].discloseAreas(t,e,this.PzcMatrix);this._disclosed=this._disclosed.concat(t)},_.prototype.undiscloseAreas=function(e,i){for(var n in this.DataLayers)this.DataLayers[n].undiscloseAreas(e,i);for(var o=this._tmap.getDrillChildLayer(this.LayerName),r=0;r<e.length;r++){var s=e[r];if(this.Areas[s]){var a=t.ArrayUtils.getIndex(this._disclosed,s);a!==-1&&(this._disclosed.splice(a,1),i.push(this.Areas[s]))}o&&o.undiscloseAreas(this.getChildrenForArea(s),i)}},_.prototype.reset=function(t,e){_.superclass.reset.call(this,t,e),"none"!=this._tmap.getDrillMode()&&(this.undiscloseAreas(this._disclosed,t),this._disclosed=[])},_.prototype.__getObjectUnderPoint=function(t,e){for(var i in this.Areas)if(this.Areas[i].contains(t,e))return this.Areas[i];return null},_.prototype.__showDropSiteFeedback=function(e){if(this._dropSiteFeedback&&(this.AreaContainer.removeChild(this._dropSiteFeedback),this._dropSiteFeedback=null),e&&(this._dropSiteFeedback=e.getDropSiteFeedback(),this._dropSiteFeedback)){this._dropSiteFeedback.setFill(new t.SolidFill(this._dropSiteCSSStyle.getStyle(t.CSSStyle.BACKGROUND_COLOR)));var i=this._dropSiteCSSStyle.getStyle(t.CSSStyle.BORDER_WIDTH)?this._dropSiteCSSStyle.getStyle(t.CSSStyle.BORDER_WIDTH).substring(0,this._dropSiteCSSStyle.getStyle(t.CSSStyle.BORDER_WIDTH).indexOf("px")):1;this._tmap.supportsVectorEffects()||(i/=this.PzcMatrix.getA());var n=new t.SolidStroke(this._dropSiteCSSStyle.getStyle(t.CSSStyle.BORDER_COLOR),1,i);this._tmap.supportsVectorEffects()&&n.setFixedWidth(!0),this._dropSiteFeedback.setStroke(n),this.AreaContainer.addChild(this._dropSiteFeedback)}return this._dropSiteFeedback},_.prototype.HandleZoomEvent=function(t,e){if(_.superclass.HandleZoomEvent.call(this,t,e),!this._tmap.supportsVectorEffects())for(var i in this.Areas)this.Areas[i].HandleZoomEvent(e);for(var i in this._renderedLabels)if(this._renderedLabels[i]){var n=this._areaLabels[i];n&&n.update(e)}};var g=function(t,e,i,n,o){this.Init(t,e,i,n,o)};t.Obj.createSubclass(g,_),g.prototype.Init=function(t,e,i,n,o){g.superclass.Init.call(this,t,e,i,n,o)},g.prototype.updateAreaShape=function(t){},g.prototype.getLayerDim=function(){return new t.Rectangle(0,0,this._layerWidth,this._layerHeight)},g.prototype._selectImageBasedOnResolution=function(){for(var t=this._tmap.getWidth(),e=this._tmap.getHeight(),i=this._areaLayerImages,n=0;n<i.length;n++){var o=i[n],r=o.source,s=o.width,a=o.height,l=r&&r.search(".svg")>-1;if(l||s>=t&&a>=e||n==i.length-1)return r}},g.prototype.setAreaLayerImage=function(e){var i=null,n=t.Agent.isRightToLeft(this._tmap.getCtx());if(e&&e.length>0){var o=e[0].width,r=e[0].height;this._layerWidth=o,this._layerHeight=r;for(var s=[],a=0;a<e.length;a++)n&&"rtl"==e[a].dir?s.push(e[a]):n||"ltr"!=e[a].dir||s.push(e[a]);this._areaLayerImages=s.length>0?s:e,this._imageSrc=this._selectImageBasedOnResolution(),i=new t.Image(this._tmap.getCtx(),this._imageSrc,0,0,o,r)}i&&(this.setAreaLabels({image:[null,null]}),this.setAreaShapes({image:i}))},g.prototype.HandleZoomEvent=function(t,e){if(g.superclass.HandleZoomEvent.call(this,t,e),this.Areas.image){var i=this._selectImageBasedOnResolution();i!=this._imageSrc&&(this._imageSrc=i,this.Areas.image.setSrc(this._imageSrc))}};var m=function(t,e,i,n,o){this.Init(t,e,i,n,o)};t.Obj.createSubclass(m,t.Obj),m.prototype.Init=function(e,i,n,o,r){
this._tmap=e,this._clientId=n,this._options=r,this._areaObjs=[],this._markerObjs=[],this._linkObjs=[],this._dataAreaCollection=[],this._dataMarkerCollection=[],this._dataLinkCollection=[],this._eventHandler=o,this._linkMap={},this._dragSource=new t.DragSource(e.getCtx()),this._eventHandler.setDragSource(this._dragSource),this._dataAreaLayer=new t.Container(this._tmap.getCtx()),this._dataPointLayer=new t.Container(this._tmap.getCtx()),this._dataLabelLayer=new t.Container(this._tmap.getCtx()),this._dataLinkLayer=new t.Container(this._tmap.getCtx()),this._tmap.getDataAreaContainer().addChildAt(this._dataAreaLayer,0),this._tmap.getDataPointContainer().addChildAt(this._dataPointLayer,0),this._tmap.getLabelContainer().addChildAt(this._dataLabelLayer,0),this._tmap.getLinkContainer().addChildAt(this._dataLinkLayer,0),this._parentLayer=i,this._disclosed=[],this._drilled=[]},m.prototype.getOptions=function(){return this._options},m.prototype.getDragSource=function(){return this._dragSource},m.prototype.getContainers=function(){var t=[this._dataAreaLayer,this._dataPointLayer,this._dataLabelLayer,this._dataLinkLayer];return t},m.prototype.getScaledContainers=function(){return[this._dataAreaLayer]},m.prototype.getNonScaledContainers=function(){var t=[this._dataLabelLayer,this._dataLinkLayer];return this._tmap.isMarkerZoomBehaviorFixed()&&t.push(this._dataPointLayer),t},m.prototype.getDataLabelContainer=function(){return this._dataLabelLayer},m.prototype.getMapLayer=function(){return this._parentLayer},m.prototype.getMap=function(){return this._tmap},m.prototype.getAllObjects=function(){return this._markerObjs.concat(this._areaObjs).concat(this._linkObjs)},m.prototype.getAreaObjects=function(){return this._areaObjs},m.prototype.getMarkerObjects=function(){return this._markerObjs},m.prototype.getLinkObjects=function(){return this._linkObjs},m.prototype.getNavigableAreaObjects=function(){for(var t=[],e=0;e<this._areaObjs.length;e++)this._areaObjs[e].isDrilled()||t.push(this._areaObjs[e]);return t},m.prototype.getNavigableDisclosedAreaObjects=function(){for(var t=[],e=0;e<this._areaObjs.length;e++)for(var i=0;i<this._disclosed.length;i++)this._areaObjs[e].getLocation()==this._disclosed[i]&&(this._areaObjs[e].isDrilled()||t.push(this._areaObjs[e]));return t},m.prototype.addMarkerObject=function(t){if(this._dataMarkerCollection.push(t),t){this._markerObjs.push(t),this._eventHandler.associate(t.getDisplayable(),t);var e=t.getLabel();e&&this._eventHandler.associate(e,t)}},m.prototype.addAreaObject=function(t){this._dataAreaCollection.push(t),t&&(this._areaObjs.push(t),this._eventHandler.associate(t.getDisplayable(),t),t.setAreaLayer(this._dataAreaLayer))},m.prototype.addLinkObject=function(t){this._dataLinkCollection.push(t),t&&(this._linkObjs.push(t),this._eventHandler.associate(t.getDisplayable(),t))},m.prototype.trackLink=function(t,e){var i=m._getLinkKey(t,e);return this._linkMap[i]?this._linkMap[i]++:this._linkMap[i]=1,this._linkMap[i]},m._getLinkKey=function(t,e){return t.x<e.x?t.x.toString()+t.y.toString()+e.x.toString()+e.y.toString():e.x.toString()+e.y.toString()+t.x.toString()+t.y.toString()},m.prototype.getDataAreaCollection=function(){return this._dataAreaCollection},m.prototype.getDataMarkerCollection=function(){return this._dataMarkerCollection},m.prototype.getDataLinkCollection=function(){return this._dataLinkCollection},m.prototype._removeAreaObject=function(t){var e=this._areaObjs.indexOf(t);e!==-1&&this._areaObjs.splice(e,1)},m.prototype.getClientId=function(){return this._clientId},m.prototype.setAnimation=function(t){this._animType=t},m.prototype.getAnimation=function(){return this._animType},m.prototype.setAnimationDuration=function(t){this._animDur=t},m.prototype.getAnimationDuration=function(){return this._animDur},m.prototype.setSelectionMode=function(e){this._selectionMode=e,this._selectionMode&&(this._selectionHandler=new t.SelectionHandler(this._selectionMode),this._eventHandler.setSelectionHandler(this._clientId,this._selectionHandler))},m.prototype.isSelectable=function(){return null!=this._selectionMode},m.prototype.setIsolatedAreaRowKey=function(t){this._isolatedAreaRowKey=t},m.prototype._updateAreaShape=function(t){var e=t.getDisplayable(),i=this._parentLayer.getAreaShape(t.getLocation());return i?(e.setCmds(i.getCmds()),!0):(this._removeAreaObject(t),!1)},m.prototype._renderAreaAndLabel=function(t){if(this._updateAreaShape(this._areaObjs[t])){var e=this._areaObjs[t].getDisplayable();this._dataAreaLayer.addChild(e);var i=this._areaObjs[t].getLabel();if(i){if(!i.hasBounds()){var n=e.getDimensions();i.addBounds(n)}i.update(this._pzcMatrix)}return!0}return!1},m.prototype.render=function(e){this._bFixPatterns=!0,this._pzcMatrix=e;var i={},n=this._markerObjs.slice();n.sort(function(t,e){return t.getSize()<e.getSize()?1:t.getSize()>e.getSize()?-1:0});for(var o=0;o<n.length;o++){var r=n[o],s=r.getDisplayable(),a=r.getLabel();if(a){var l=new t.Container(s.getCtx());this._dataPointLayer.addChild(l),l.addChild(s),l.addChild(a),r.positionLabel()}else this._dataPointLayer.addChild(s);var h=r.getLocation();h&&(i[h]=!0)}for(var o=0;o<this._areaObjs.length;o++)i[this._areaObjs[o].getLocation()]&&this._areaObjs[o].removeLabel(),this._renderAreaAndLabel(o)||o--;for(var o=0;o<this._linkObjs.length;o++)this._dataLinkLayer.addChild(this._linkObjs[o].getDisplayable());this._initSelections&&this._processInitialSelections()},m.prototype.discloseAreas=function(t,e,i){this._pzcMatrix=i;for(var n=[],o=0;o<t.length;o++)for(var r=0;r<this._areaObjs.length;r++)if(this._areaObjs[r].getLocation()==t[o]){n.push(this._areaObjs[r].getLocation()),this._renderAreaAndLabel(r);var s=this._areaObjs[r].getDisplayable();e.push(s),s.handleZoomEvent(i);var a=this._areaObjs[r].getLabel();if(a){e.push(a);var l=a.getLeaderLine();l&&e.push(l)}break}for(var r=0;r<this._markerObjs.length;r++)for(var o=0;o<t.length;o++){var h=this._markerObjs[r].getLocation(),s=this._markerObjs[r].getDisplayable();null!=h?h==t[o]&&(this._dataPointLayer.addChild(s),e.push(s)):(this._dataPointLayer.addChild(s),e.push(s))}this._disclosed=this._disclosed.concat(n)},m.prototype.undiscloseAreas=function(e,i){for(var n=0;n<e.length;n++)for(var o=0;o<this._areaObjs.length;o++)if(this._areaObjs[o].getLocation()==e[n]){this._areaObjs[o].isDrilled()&&this._areaObjs[o].setDrilled(!1),this._areaObjs[o].isSelected()&&this._selectionHandler.removeFromSelection(this._areaObjs[o]);var r=t.ArrayUtils.getIndex(this._disclosed,e[n]);if(r>-1){this._disclosed.splice(r,1),i.push(this._areaObjs[o].getDisplayable());var s=this._areaObjs[o].getLabel();s&&(i.push(s),i.push(s.getLeaderLine()))}break}},m.prototype.drill=function(t,e){for(var i=0;i<this._areaObjs.length;i++)if(this._areaObjs[i].getLocation()==t){this._areaObjs[i].setDrilled(!0),this._drilled.push(t),e.push(this._areaObjs[i].getDisplayable());var n=this._areaObjs[i].getLabel();if(n){e.push(n);var o=n.getLeaderLine();o&&e.push(o)}break}for(var i=0;i<this._markerObjs.length;i++)if(this._markerObjs[i].getLocation()==t){e.push(this._markerObjs[i].getDisplayable());break}},m.prototype.undrill=function(e,i){for(var n=0;n<this._areaObjs.length;n++)if(this._areaObjs[n].getLocation()==e){var o=t.ArrayUtils.getIndex(this._drilled,e);this._drilled.splice(o,1),this._areaObjs[n].setDrilled(!1);var r=this._areaObjs[n].getDisplayable();this._dataAreaLayer.addChild(r),i.push(r);var s=this._areaObjs[n].getLabel();s&&(s.update(this._pzcMatrix),i.push(s),i.push(s.getLeaderLine()));break}for(var n=0;n<this._markerObjs.length;n++)if(this._markerObjs[n].getLocation()==e){var r=this._markerObjs[n].getDisplayable();this._dataPointLayer.addChild(r),i.push(r);break}},m.prototype.reset=function(e,i){if(this._selectionHandler)for(var n=this._selectionHandler.getSelection(),o=0;o<n.length;o++)(!i||i&&t.ArrayUtils.getIndex(i,n[o].getLocation())==-1)&&this._selectionHandler.removeFromSelection(n[o]);if("none"!=this._tmap.getDrillMode())for(var r=0;r<this._drilled.length;r++){for(var o=0;o<this._areaObjs.length;o++)if(this._areaObjs[o].getLocation()==this._drilled[r]){this._areaObjs[o].setDrilled(!1);var s=this._areaObjs[o].getDisplayable();this._dataAreaLayer.addChild(s),e.push(s);var a=this._areaObjs[o].getLabel();a&&(a.update(this._pzcMatrix),e.push(a),e.push(a.getLeaderLine()));break}for(var o=0;o<this._markerObjs.length;o++)if(this._markerObjs[o].getLocation()==this._drilled[r]){var s=this._markerObjs[o].getDisplayable();this._dataPointLayer.addChild(s),e.push(s);break}}this._drilled=[]},m.prototype.HandleZoomEvent=function(e,i){this._pzcMatrix=i;var n=i.getA(),o=e.getSubType();if(this._bFixPatterns&&o==t.ZoomEvent.SUBTYPE_ZOOMED){this._bFixPatterns=!1;for(var r=0;r<this._areaObjs.length;r++){var s=this._areaObjs[r].getDisplayable(),a=s.getSavedPatternFill();if(a){var l=new t.PatternFill;a.mergeProps(l),l.setMatrix(new t.Matrix(1/n,null,null,1/n)),s.setFill(l)}}}for(var h=this.getAreaObjects(),u=0;u<h.length;u++)h[u].HandleZoomEvent(i);if(this._tmap.isMarkerZoomBehaviorFixed())for(var d=this.getMarkerObjects(),u=0;u<d.length;u++)d[u].HandleZoomEvent(i);this._linkMap={};for(var c=this.getLinkObjects(),u=0;u<c.length;u++)c[u].HandleZoomEvent(i)},m.prototype.HandlePanEvent=function(t){this._pzcMatrix=t},m.prototype.setInitialSelections=function(t){this._initSelections=t},m.prototype._processInitialSelections=function(){this._selectionHandler&&(this._selectionHandler.processInitialSelections(this._initSelections,this.getAllObjects()),this._initSelections=null)},m.prototype.__getDragTransferable=function(t){if(this._selectionHandler){t.isSelected()||(this._selectionHandler.processClick(t,!1),this._eventHandler.fireSelectionEvent(t));for(var e=[],i=this._selectionHandler.getSelection(),n=0;n<i.length;n++)e.push(i[n].getId());return e}return null},m.prototype.__getDragFeedback=function(){for(var t=[],e=this._selectionHandler.getSelection(),i=0;i<e.length;i++)t.push(e[i].getDisplayable());return t},m.prototype.getSelectedAreas=function(t){for(var e=[],i=this.getAreaObjects(),n=0;n<t.length;n++)for(var o=0;o<i.length;o++)if(i[o].getId()==t[n]){e.push(i[o].getLocation());break}return e},m.prototype.destroy=function(){for(var t=this.getAllObjects(),e=0;e<t.length;e++){var i=t[e].getDisplayable();if(i instanceof r){var n=i.getRootElement();n.destroy&&n.destroy()}}this._eventHandler=null},m.prototype.getNavigableLinksForNodeId=function(t){for(var e=[],i=0;i<this._dataLinkCollection.length;i++){var n=this._dataLinkCollection[i],o=n.getStartMarker(),r=n.getEndMarker();o&&o.getId()===t?e.push(n):r&&r.getId()===t&&e.push(n)}return e};var f=function(t,e){this.Init(t,e)};t.Obj.createSubclass(f,t.PanZoomCanvasKeyboardHandler),f.LINK_NODE_NAV="linkNode",f.LINK_NAV="link",f.prototype.Init=function(t,e){f.superclass.Init.call(this,t,e),this._tmap=t,this._linkNavType=f.LINK_NAV},f.prototype.isSelectionEvent=function(t){return this.isNavigationEvent(t)&&!t.ctrlKey},f.prototype.processKeyDown=function(e){var i=e.keyCode,n=this._eventManager.getFocus();if(i==t.KeyboardEvent.CLOSE_BRACKET){this._linkNavType=f.LINK_NAV;var o=[];n instanceof u&&(o=this._tmap.getNavigableMarkers()),"DvtMapObjPeer"!==n.getTypeName()&&0!==o.length||(o=this._tmap.getNavigableLinks()),o.length>0&&(n=t.KeyboardHandler.getNextAdjacentNavigable(n,e,o),this._tmap.ensureObjInViewport(e,n)),this._eventManager.SetClickInfo(n)}else if(i==t.KeyboardEvent.OPEN_BRACKET){this._linkNavType=f.LINK_NAV;var o=[];n instanceof d&&(o=this._tmap.getNavigableMarkers()),"DvtMapObjPeer"!==n.getTypeName()&&0!==o.length||(o=this._tmap.getNavigableAreas()),o.length>0&&(n=t.KeyboardHandler.getNextAdjacentNavigable(n,e,o),this._tmap.ensureObjInViewport(e,n)),this._eventManager.SetClickInfo(n)}else(e.keyCode==t.KeyboardEvent.OPEN_ANGLED_BRACKET||t.KeyboardEvent.CLOSE_ANGLED_BRACKET)&&e.altKey&&(this._linkMarker=n,this._linkNavType=f.LINK_NODE_NAV),n=f.superclass.processKeyDown.call(this,e),this.isNavigationEvent(e)&&!e.ctrlKey&&this._eventManager.SetClickInfo(n);return n},f.prototype.getLinkNavigationType=function(){return this._linkNavType},f.prototype.getLinkMarker=function(){return this._linkMarker},f.prototype.isMultiSelectEvent=function(e){return e.keyCode==t.KeyboardEvent.SPACE&&e.ctrlKey},f.prototype.isNavigationEvent=function(e){var i=f.superclass.isNavigationEvent.call(this,e);switch(e.keyCode){case t.KeyboardEvent.OPEN_BRACKET:case t.KeyboardEvent.CLOSE_BRACKET:i=!0;break;case t.KeyboardEvent.OPEN_ANGLED_BRACKET:case t.KeyboardEvent.CLOSE_ANGLED_BRACKET:i=!!e.altKey;break;default:i=f.superclass.isNavigationEvent.call(this,e)}return i},f.getFirstNavigableLink=function(e,i,n){var o=i.keyCode;if(!n||n.length<1||!e)return null;for(var r=e.getCenter(),s=0;s<n.length;s++){var a,l=n[s];if(a=e.getId()===l.getStartMarker().getId()?l.getEndPoint():l.getStartPoint(),o==t.KeyboardEvent.OPEN_ANGLED_BRACKET&&a.x<=r.x||o==t.KeyboardEvent.CLOSE_ANGLED_BRACKET&&a.x>=r.x)break}return l};var y=function(t,e,i){this.Init(t,e,i)};t.Obj.createSubclass(y,t.EventManager),y.prototype.Init=function(t,e,i){y.superclass.Init.call(this,t,e,i),this._selectionHandlers=new Object,this._tmap=i,this._bPassOnEvent=!1},y.prototype.getSelectionHandler=function(t){if(t&&t.getDataLayer){var e=t.getDataLayer().getClientId();return this._selectionHandlers[e]}},y.prototype.setSelectionHandler=function(t,e){this._selectionHandlers[t]=e},y.prototype.setDrillMode=function(t){this._drillMode=t},y.prototype.removeFromSelection=function(t,e){var i=this._selectionHandlers[t];i&&i.removeFromSelection(e)},y.prototype.clearSelection=function(t){var e=this._selectionHandlers[t];e&&e.clearSelection()},y.prototype.setInitialFocus=function(t){t&&y.superclass.setFocus.call(this,t)},y.prototype.OnMouseOver=function(t){var e=this.GetLogicalObject(t.target);e&&e.getShowPopupBehaviors&&e.getDataLayer&&this._tmap.setEventClientId(e.getDataLayer().getClientId()),y.superclass.OnMouseOver.call(this,t)},y.prototype.OnMouseOut=function(t){this._tmap.setEventClientId(null),y.superclass.OnMouseOut.call(this,t)},y.prototype.OnClick=function(e){var i=this.GetLogicalObject(e.target);if(this.SetClickInfo(i),!(i&&i.isSelectable&&i.isSelectable()))for(var n in this._selectionHandlers){var o=this._selectionHandlers[n].processClick(null,e.ctrlKey);if(o){var r=t.EventFactory.newSelectionEvent([]);r.clientId=n,this._callback.call(this._callbackObj,r)}}y.superclass.OnClick.call(this,e),this._handleClick(i,e.pageX,e.pageY)},y.prototype._handleClick=function(t,e,i){if(t instanceof h){var n=t.getLinkCallback();n?n.call():t.hasAction()?this.HandleAction(t,e,i):t.getShowPopupBehaviors()&&this._tmap.setEventClientId(t.getDataLayer().getClientId())}},y.prototype.HandleAction=function(e,i,n){var o=new t.MapActionEvent(e.getClientId(),e.getId(),e.getAction());if(o.addParam("clientId",e.getDataLayer().getClientId()),null!=i&&null!=n){var r=this._tmap.getCtx().pageToStageCoords(i,n);o.addParam("pointXY",{x:r.x,y:r.y})}this.hideTooltip(),this._callback.call(this._callbackObj,o)},y.prototype.SetClickInfo=function(t){var e=null,i=null,n=null;if(t&&(t instanceof h?n=t.getDisplayable():t instanceof c&&(n=t),t.getDataLayer)){var o=t.getDataLayer();e=o.getClientId(),i=o.getMapLayer().getLayerName()}this._tmap.setClickInfo(e,i,n)},y.prototype.OnDblClickInternal=function(e){var i=this.GetLogicalObject(e.target);if(this.getSelectionHandler(i)&&this._drillMode&&"none"!=this._drillMode){var n=new t.MapDrillEvent(t.MapDrillEvent.DRILL_DOWN);this._callback.call(this._callbackObj,n)}},y.prototype.ProcessKeyboardEvent=function(e){var i=!0,n=e.keyCode,o=this.getFocus(),s=o.getDisplayable();if(n!=t.KeyboardEvent.TAB&&this._bPassOnEvent)s.fireKeyboardListener(e),e.preventDefault();else if((n==t.KeyboardEvent.ZERO||n==t.KeyboardEvent.NUMPAD_ZERO)&&e.ctrlKey&&e.shiftKey)this._tmap.resetMap(),e.preventDefault();else if(n==t.KeyboardEvent.BACK_SLASH){var a=this._tmap.getLegendPanel();a&&(a instanceof t.CollapsiblePanel?a.setCollapsed(!a.isCollapsed()):a instanceof t.PanelDrawer&&a.setDisclosed(!a.isDisclosed())),e.preventDefault()}else if(n==t.KeyboardEvent.ENTER){if(o instanceof h){var l=o.getLinkCallback();l?l.call():o.hasAction()?this.HandleAction(o):e.shiftKey?this._tmap.drillUp():this._tmap.drillDown(),e.preventDefault()}}else n==t.KeyboardEvent.SPACE&&e.ctrlKey?(this.SetClickInfo(o),this.ProcessSelectionEventHelper(o,!0),e.preventDefault()):n!=t.KeyboardEvent.ZERO&&n!=t.KeyboardEvent.NUMPAD_ZERO||!e.ctrlKey?n==t.KeyboardEvent.TAB&&s instanceof r?!e.shiftKey&&o.isShowingKeyboardFocusEffect()?(o.hideKeyboardFocusEffect(),s.fireKeyboardListener(e),e.preventDefault(),this._bPassOnEvent=!0):e.shiftKey&&this._bPassOnEvent?(this.ShowFocusEffect(e,o),e.preventDefault(),this._bPassOnEvent=!1):(this._bPassOnEvent&&o.showKeyboardFocusEffect(),i=y.superclass.ProcessKeyboardEvent.call(this,e),this._bPassOnEvent=!1):(n==t.KeyboardEvent.TAB&&o&&this._tmap.ensureObjInViewport(e,o),i=y.superclass.ProcessKeyboardEvent.call(this,e)):(e.altKey?this._tmap.fitRegion(s):this._tmap.fitSelectedRegions(),e.preventDefault());return i},y.prototype.OnComponentTouchClick=function(e){var i=this.GetEventInfo(e,t.PanZoomCanvasEventManager.EVENT_INFO_PANNED_KEY);if(!i){var n=this.GetLogicalObject(e.target);if(this.SetClickInfo(n),n instanceof t.ThematicMap)for(var o in this._selectionHandlers){var r=this._selectionHandlers[o].processClick(null,e.ctrlKey);if(r){for(var s=this._selectionHandlers[o].getSelection(),a=[],l=0;l<s.length;l++)a.push(s[l].getId());var h=t.EventFactory.newSelectionEvent(a);this._callback.call(this._callbackObj,h)}}y.superclass.OnComponentTouchClick.call(this,e),this._handleClick(n,e.touch.pageX,e.touch.pageY)}},y.prototype.HandleTouchHoverStartInternal=function(t){var e=this.GetLogicalObject(t.target);e&&e.getShowPopupBehaviors&&e.getDataLayer?this._tmap.setEventClientId(e.getDataLayer().getClientId()):this._tmap.setEventClientId(null)},y.prototype.HandleTouchHoverOverInternal=function(t){var e=this.GetLogicalObject(t.target);e&&e.getShowPopupBehaviors&&e.getDataLayer?this._tmap.setEventClientId(e.getDataLayer().getClientId()):this._tmap.setEventClientId(null)},y.prototype.HandleTouchDblClickInternal=function(e){var i=this.GetLogicalObject(e.target);if(i&&this.getSelectionHandler(i)&&this._drillMode&&"none"!=this._drillMode){this.ProcessSelectionEventHelper(i,e.ctrlKey);var n=new t.MapDrillEvent(t.MapDrillEvent.DRILL_DOWN);this._callback.call(this._callbackObj,n)}},y.prototype.HandleTouchActionsEnd=function(t,e){var i=this.GetLogicalObject(t.target);this.SetClickInfo(i),y.superclass.HandleTouchActionsEnd.call(this,t,e)},y.prototype.ProcessRolloverEvent=function(e,i,n){var o=this._tmap.getOptions();if("dim"==o.hoverBehavior){var r=i.getCategories?i.getCategories():[];o.highlightedCategories=n?r.slice():null;var s=t.EventFactory.newCategoryHighlightEvent(o.highlightedCategories,n),a=t.StyleUtils.getTimeMilliseconds(o.styleDefaults.hoverBehaviorDelay);this.RolloverHandler.processEvent(s,this._tmap.getNavigableAreas().concat(this._tmap.getNavigableMarkers()).concat(this._tmap.getNavigableLinks()),a,"any"==o.highlightMatch)}},y.prototype.GetTouchResponse=function(){var e=this._tmap.getOptions();return"none"!==e.panning||"none"!==e.zooming?t.EventManager.TOUCH_RESPONSE_TOUCH_HOLD:e.touchResponse===t.EventManager.TOUCH_RESPONSE_TOUCH_START?t.EventManager.TOUCH_RESPONSE_TOUCH_START:t.EventManager.TOUCH_RESPONSE_AUTO},y.prototype.StoreInfoByEventType=function(e){return e!=t.PanZoomCanvasEventManager.EVENT_INFO_PANNED_KEY&&y.superclass.StoreInfoByEventType.call(this,e)},y.prototype.showFocusEffect=function(t,e){this.ShowFocusEffect(t,e)},y.prototype.ShowFocusEffect=function(t,e){this._tmap.isPanning()||y.superclass.ShowFocusEffect.call(this,t,e)};var v=function(t){this.Init(t)};t.Obj.createSubclass(v,t.Obj),v._MIN_MARKER_SIZE=6,v._MAX_MARKER_SIZE_RATIO=.5,v._PZC_PADDING=20,v.prototype.Init=function(t){this._tmap=t,this._isCustomBasemap=!1,this._areaLayerStyle=null,this._areaLayerStyleObject=null,this._customAreaLayerImages={}},v.prototype.parse=function(e){if(this._parseMapProperties(e),e._legend&&this._tmap.setLegendData(e._legend),this._parseStyles(e.styleDefaults),this._isCustomBasemap&&e.sourceXml){var i=new t.XmlParser(this._tmap.getCtx()),n=i.parse(e.sourceXml);this._parseCustomBasemap(n)}this._parseAreaLayers(e.areaLayers),this.ParseDataLayers(e.pointDataLayers,null,null,!1)},v.prototype._parseMapProperties=function(t){var e=t.animationDuration;"string"==typeof e?"ms"==e.slice(-2)?e=parseInt(e.slice(0,-2))/1e3:"s"==e.slice(-1)&&(e=parseFloat(e.slice(0,-1))):e/=1e3,this._tmap.setAnimationDuration(e),this._tmap.setAnimationOnDisplay("auto"==t.animationOnDisplay?"alphaFade":t.animationOnDisplay),this._tmap.setAnimationOnMapChange("auto"==t.animationOnMapChange?"alphaFade":t.animationOnMapChange),this._isCustomBasemap=null!=t.source,this._tmap.setMapName(this._isCustomBasemap?"$"+t.basemap:t.basemap),this._tmap.setFeaturesOff(t.featuresOff),this._tmap.setControlPanelBehavior(t.controlPanelBehavior);var i=t.tooltipDisplay;"shortDesc"==i?i="shortDescOnly":"labelAndShortDesc"==i&&(i="auto"),this._tmap.setDisplayTooltips(i);var n=t.popups;n&&this._tmap.setShowPopupBehaviors(this._getShowPopupBehaviors(n)),this._tmap.setDrillMode(t.drilling),this._tmap.setAnimationOnDrill(t.animationOnDrill),this._tmap.setInitialZooming("auto"==t.initialZooming),this._tmap.setMarkerZoomBehavior(t.markerZoomBehavior),this._tmap.setPanning("auto"==t.panning),this._tmap.setZooming("auto"==t.zooming),this._tmap.setInitialCenterX(t.panX),this._tmap.setInitialCenterY(t.panY),this._tmap.setInitialZoom(t.zoom),isNaN(t.maxZoom)||this._tmap.setMaxZoomFactor(Math.max(t.maxZoom,1))},v.prototype._parseAreaLayers=function(e){for(var i=this._tmap.getMapName(),n=0;n<e.length;n++){var o=this._tmap.Defaults.calcAreaLayerOptions(e[n]),r=o.layer;if(r){var a,l=o.areaStyle;if(l){l instanceof Object||(l=t.CSSStyle.cssStringToObject(l));var h=v._getAreaCSSStyle(l);this._areaLayerStyleObject=t.JsonUtils.merge(l,this._areaLayerStyleObject),this._areaLayerStyle.merge(h)}o.labelStyle&&this._areaLayerStyle.parseInlineStyle(o.labelStyle),this._isCustomBasemap?(a=new g(this._tmap,r,o.labelDisplay,o.labelType,this._tmap.getEventManager()),a.setAreaLayerImage(this._customAreaLayerImages[r])):(a=new _(this._tmap,r,o.labelDisplay,o.labelType,this._tmap.getEventManager()),a.setAreaShapes(this._createPathShapes(s.getAreaIds(i,r))),a.setAreaLabels(s.getAreaLabels(i,r)),a.setAreaLabelInfo(s.getAreaLabelInfo(i,r)),a.setAreaChildren(s.getChildrenForLayerAreas(this._tmap.getMapName(),r))),a.setLayerCSSStyle(this._areaLayerStyle),a.setDropSiteCSSStyle(this._areaDropSiteStyle),a.setAnimation("auto"==o.animationOnLayerChange?"alphaFade":o.animationOnLayerChange),a.setAnimationDuration(this._tmap.getAnimationDuration()),this._tmap.addLayer(a),o.areaDataLayer&&this.ParseDataLayers([o.areaDataLayer],a,null,!0),o.pointDataLayers&&this.ParseDataLayers(o.pointDataLayers,a,null,!1)}}},v.prototype.ParseDataLayers=function(e,i,n,o){if(e)for(var r=0;r<e.length;r++){var s=this._tmap.Defaults.calcDataLayerOptions(e[r]);s.legend&&this._tmap.setLegendData(s.legend),i?i instanceof _&&o&&i.resetRenderedAreas():(i=new p(this._tmap,s.id,this._tmap.getEventManager()),this._tmap.addPointLayer(i));var a=new m(this._tmap,i,s.id,this._tmap.getEventManager(),s),l=s.selectionMode;"single"==l?a.setSelectionMode(t.SelectionHandler.TYPE_SINGLE):"multiple"==l&&a.setSelectionMode(t.SelectionHandler.TYPE_MULTIPLE),a.setAnimation(s.animationOnDataChange),a.setAnimationDuration(this._tmap.getAnimationDuration());var h=null;i instanceof _&&(h=s.isolatedItem);var u,d,c=s.disclosedItems,g=[],o=i instanceof _;s.popups&&(d=this._getShowPopupBehaviors(s.popups));var f=this._tmap.getOptions().hiddenCategories,y=s.areas;if(y)for(var S=0;S<y.length;S++)if(f&&t.ArrayUtils.hasAnyItem(f,y[S].categories))a.addAreaObject(null);else{var C=y[S].location;if(h){if(h!=y[S].id)continue;u=C}c&&t.ArrayUtils.getIndex(c,y[S].id)!=-1&&g.push(C);var E=this._createArea(i,a,y[S]);E&&(d&&E.setShowPopupBehaviors(d),a.addAreaObject(E))}var b=s.renderer,T=s.markers;if(T&&!b){v._calcBubbleSizes(this._tmap,T);for(var S=0;S<T.length;S++)if(f&&t.ArrayUtils.hasAnyItem(f,T[S].categories))a.addMarkerObject(null);else{var C=T[S].location;if(h){if(h!=T[S].id)continue;u=C}var E=this._createMarker(i,a,T[S],o);E&&(d&&E.setShowPopupBehaviors(d),a.addMarkerObject(E))}}var A=s.images;if(A)for(var S=0;S<A.length;S++){var C=A[S].location;if(h){if(h!=A[S].id)continue;u=C}var E=this._createImage(i,a,A[S],o);E&&(d&&E.setShowPopupBehaviors(d),a.addMarkerObject(E))}var O=s.links;if(O)for(var S=0;S<O.length;S++)if(f&&t.ArrayUtils.hasAnyItem(f,O[S].categories))a.addAreaObject(null);else{var E=this._createLink(a,O[S]);E&&a.addLinkObject(E)}if(b)for(var S=0;S<T.length;S++){var C=T[S].location;if(h){if(h!=T[S].id)continue;u=C}c&&t.ArrayUtils.getIndex(c,T[S].id)!=-1&&g.push(C);var P={hovered:!1,selected:!1,focused:!1},I=this._tmap.getOptions()._contextHandler(this._tmap.getElem(),null,T[S],P,null),D=b(I),E=this._createCustomDataItem(i,a,T[S],D,o);d&&E.setShowPopupBehaviors(d),E&&a.addMarkerObject(E)}u&&(a.setIsolatedAreaRowKey(h),i.setIsolatedArea(u));var x=s.selection;x&&x.length>0&&a.setInitialSelections(x),g&&g.length>0&&this._tmap.addDrilledLayer(i.getLayerName(),[a.getClientId(),g]),n?i.updateDataLayer(a,this._tmap.getPanZoomCanvas().getContentPane().getMatrix(),n):i.addDataLayer(a)}},v.prototype._parseStyles=function(e){this._tmap.parseComponentJson(e);var i=e.areaStyle;!i||i instanceof Object||(i=t.CSSStyle.cssStringToObject(i)),i=t.JsonUtils.merge(i,e._areaStyle),this._areaLayerStyle=v._getAreaCSSStyle(i),this._areaLayerStyleObject=i,this._areaLayerStyle.parseInlineStyle(e.labelStyle),this._areaDropSiteStyle=new t.CSSStyle(e.dropTargetStyle),this._tmap.setStyleDefaults(e)},v._getAreaCSSStyle=function(e){var i=new t.CSSStyle;return t.ArrayUtils.forEach([t.CSSStyle.BORDER_COLOR,t.CSSStyle.BACKGROUND_COLOR],function(n){var o=null,r=t.CSSStyle.cssStringToObjectProperty(n);e&&null!=e[r]&&(o=e[r],delete e[r]),i.setStyle(n,o)}),i},v.prototype._parseCustomBasemap=function(t){for(var e,i,n=t.getChildNodes(),o=0;o<n.length;o++)e=n[o],i=e.getName(),"layer"==i?this._parseCustomLayer(e):"points"==i&&this._parseCustomPoints(e)},v.prototype._parseCustomLayer=function(t){for(var e,i,n=t.getChildNodes(),o=t.getAttr("id"),r=[],s=0;s<n.length;s++)if(e=n[s],i=e.getName(),"image"==i){var a={};a.source=e.getAttr("source"),a.width=Number(e.getAttr("width")),a.height=Number(e.getAttr("height"));var l=e.getAttr("bidi"),h=e.getAttr("dir");"true"==l||"rtl"==h?a.dir="rtl":a.dir="ltr",r.push(a)}this._customAreaLayerImages[o]=r},v.prototype._parseCustomPoints=function(t){for(var e,i,n=t.getChildNodes(),o={},r={},a=0;a<n.length;a++)e=n[a],i=e.getName(),"point"==i&&(o[e.getAttr("name")]=[Number(e.getAttr("x")),Number(e.getAttr("y"))],r[e.getAttr("name")]=[null,e.getAttr("longLabel")]);s.registerBaseMapLayer(this._tmap.getMapName(),"cities",r,o,null,null,1)},v.prototype._createPathShapes=function(e){for(var i={},n=this._tmap.getCtx(),o=0;o<e.length;o++){var r=e[o];i[r]=new t.Path(n);var s=this._areaLayerStyle.getStyle(t.CSSStyle.BORDER_COLOR);if(s&&"transparent"!=s){var a=new t.SolidStroke(s);this._tmap.supportsVectorEffects()&&a.setFixedWidth(!0),i[r].setStroke(a)}var l=this._areaLayerStyle.getStyle(t.CSSStyle.BACKGROUND_COLOR);"transparent"!=l?i[r].setSolidFill(l):i[r].setFill(null),this._areaLayerStyleObject&&i[r].setStyle(this._areaLayerStyleObject)}return i},v.prototype._createArea=function(e,i,n){var r=n.location,s=e.getAreaShape(r);if(s){e.setAreaRendered(r,!1);var a=this._tmap.getCtx(),l=new o(a,this._tmap.supportsVectorEffects());n=t.JsonUtils.merge(n,this._tmap.getStyleDefaults().dataAreaDefaults),n.labelStyle||(n.labelStyle=this._tmap.getStyleDefaults().labelStyle);var h=new t.SolidStroke(n.hoverColor,1,o.HOVER_STROKE_WIDTH),d=new t.SolidStroke(n.selectedInnerColor,1,o.SELECTED_INNER_STROKE_WIDTH),c=new t.SolidStroke(n.selectedOuterColor,1,o.SELECTED_OUTER_STROKE_WIDTH);l.setHoverStroke(h,null).setSelectedStroke(d,c);var p=new t.SolidStroke(n.drilledInnerColor,1,o.DISCLOSED_INNER_STROKE_WIDTH),_=new t.SolidStroke(n.drilledOuterColor,1,o.DISCLOSED_OUTER_STROKE_WIDTH);l.setDisclosedStroke(p,_),e.setLabelRendered(n.location,!1),this._styleDisplayable(n,l);var g=this._createLabel(e,i,n,l,!0);return new u(n,i,l,g)}return null},v.prototype._createMarker=function(e,i,n,o){var r,s=n._size,a=this._tmap.getOptions().mapProvider;if(r=a&&null!=a.geo?new t.Point(n.x,-n.y):v.getCenter(i,n.location,n.x,n.y),!r||0===s)return null;var l=this._tmap.getStyleDefaults().dataMarkerDefaults,u=new t.CSSStyle(l.labelStyle);u.parseInlineStyle(n.labelStyle),n=t.JsonUtils.merge(n,l),n.labelStyle=u.toString();var d,c;if(null!=s)d=s,c=s;else{var p=n.scaleX;null==p&&(p=1);var _=n.scaleY;null==_&&(_=1);var g=n.width;null==g&&(g=this._tmap.getOptions().styleDefaults.dataMarkerDefaults.width);var m=n.height;null==m&&(m=this._tmap.getOptions().styleDefaults.dataMarkerDefaults.height),d=g*p,c=m*_}var f,y=n.borderRadius;if(n.source)f=new t.ImageMarker(this._tmap.getCtx(),r.x,r.y,d,c,y,n.source,n.sourceSelected,n.sourceHover,n.sourceHoverSelected);else{var S=n.shape?n.shape:this._tmap.getOptions().styleDefaults.dataMarkerDefaults.shape;f=new t.SimpleMarker(this._tmap.getCtx(),S,this._tmap.getSkinName(),r.x,r.y,d,c,y)}var C=n.rotation;if(C){var E=C*Math.PI/180;f.setRotation(E)}o&&e.setLabelRendered(n.location,!1),this._styleDisplayable(n,f);var b=this._createLabel(e,i,n,f,o);return new h(n,i,f,b,r)},v.prototype._createImage=function(e,i,n,o){var r=v.getCenter(i,n.location,n.x,n.y);if(!r)return null;var s=new t.Image(this._tmap.getCtx(),n.url),a=n.width,l=n.height;null!=a&&null!=l&&(s.setX(r.x-a/2),s.setY(r.y-l/2),s.setWidth(a),s.setHeight(l)),o&&e.setLabelRendered(n.location,!1);var u=new h(n,i,s,null,r);if(!a||!l){var d=function(t){t&&t.width&&t.height&&(s.setWidth(t.width),s.setHeight(t.height),s.setX(r.x-t.width/2),s.setY(r.y-t.height/2),u.__recenter())};t.ImageLoader.loadImage(this._tmap.getCtx(),n.url,d)}return u},v.prototype._createCustomDataItem=function(t,e,i,n,o){var s=v.getCenter(e,i.location,i.x,i.y);if(!s)return null;o&&t.setLabelRendered(i.location,!1);var a=new r(this._tmap.getCtx(),n,this._tmap.getStyleDefaults().dataAreaDefaults);return new h(i,e,a,null,s)},v.prototype._createLink=function(e,i){var n,o,r=i.startLocation,s=i.endLocation;if(r.id){for(var a=e.getDataMarkerCollection(),l=0;l<a.length;l++){var h=a[l];if(h&&h.getId()==r.id){o=h,n=h.getCenter();break}}if(!o)for(var u=e.getDataAreaCollection(),l=0;l<u.length;l++){var c=u[l];if(c&&c.getId()==r.id){o=c,n=this._getPtFromLocation(e,{location:c.getLocation()});break}}}else n=this._getPtFromLocation(e,r);var p,_;if(s.id){for(var a=e.getDataMarkerCollection(),l=0;l<a.length;l++){var h=a[l];if(h&&h.getId()==s.id){_=h,p=h.getCenter();break}}if(!_)for(var u=e.getDataAreaCollection(),l=0;l<u.length;l++){var c=u[l];if(c&&c.getId()==s.id){_=c,p=this._getPtFromLocation(e,{location:c.getLocation()});break}}}else p=this._getPtFromLocation(e,s);if(!p||!n)return null;var g=new t.Path(this._tmap.getCtx(),v.calcCurve(e,n,p,n,p));g.setFill(null);var m=this._tmap.getStyleDefaults().linkDefaults,f=i.color;f||(f=m.color);var y=i.width;y||(y=m.width);var S=new t.SolidStroke(f,1,y);S.setFixedWidth(!0),g.setStroke(S);var C=m._hoverColor,E=m._selectedColor,b=new t.SolidStroke(C,1,y),T=new t.SolidStroke(f,1,y+2),A=new t.SolidStroke(f,1,y),O=new t.SolidStroke(E,1,y+2),P=new t.SolidStroke(C,1,y),I=new t.SolidStroke(E,1,y+2);return g.setHoverStroke(b,T).setSelectedStroke(A,O).setSelectedHoverStroke(P,I),new d(i,e,g,n,p,o,_)},v.prototype._getPtFromLocation=function(e,i){var n=this._tmap.getOptions().mapProvider;return n&&null!=n.geo?new t.Point(i.x,-i.y):v.getCenter(e,i.location,i.x,i.y)},v.prototype._createLabel=function(e,i,n,o,r){var s=n.location,a=n.label,h=a?"on":"off";r&&(h=e.getLabelDisplay());var u=o instanceof t.Path;if(!a&&r&&(u&&"off"!=h||!u&&"on"==h)&&(a="long"==e.getLabelType()?e.getLongAreaName(s):e.getShortAreaName(s)),
a){var d,c=this._tmap.getCtx();d=u?new l(c,a,e.getLabelInfoForArea?e.getLabelInfoForArea(s):null,h,i.getDataLabelContainer(),this._tmap.supportsVectorEffects()):new t.OutputText(c,a,0,0);var p=new t.CSSStyle;u&&p.merge(e.getLayerCSSStyle()),n.labelStyle&&p.parseInlineStyle(n.labelStyle);var _=p.getStyle(t.CSSStyle.COLOR);p.setStyle(t.CSSStyle.COLOR,null),d.setCSSStyle(p),n.color&&d instanceof l&&(t.Agent.isHighContrast()||!_)&&(_=t.ColorUtils.getContrastingTextColor(n.color)),_&&d.setSolidFill(_)}return d},v.prototype._styleDisplayable=function(e,i){var n=e.pattern,o=e.color,r=t.Agent.isTouchDevice()||this._tmap.getSkinName()==t.CSSStyle.SKIN_ALTA?"none":e.visualEffects;if(i instanceof t.SimpleMarker){if("none"!=e.borderStyle){var s=e.borderWidth;"string"==typeof s&&(s="px"==s.slice(-2)?parseFloat(e.borderWidth.slice(0,-2)):parseFloat(e.borderWidth));var a=new t.SolidStroke(e.borderColor,1,s);this._tmap.isMarkerZoomBehaviorFixed()||a.setFixedWidth(!0),a.setType(t.Stroke.convertTypeString(e.borderStyle)),i.setStroke(a)}var l=e.opacity;"none"!=r?i.setFill(new t.MarkerGradient.createMarkerGradient(o,i,l)):n?i.setFill(new t.PatternFill(n,o,"#FFFFFF")):o&&i.setSolidFill(o,l)}else if(i instanceof t.Path){var h=e.borderColor;if(h){var a=new t.SolidStroke(h);this._tmap.supportsVectorEffects()&&a.setFixedWidth(!0),i.setStroke(a)}n?i.savePatternFill(new t.PatternFill(n,o,"#FFFFFF")):i.setSolidFill(o,l)}},v.getCenter=function(t,e,i,n){var o=t.getMap(),r=o.getMapName();if(e){var a=s.getAreaCenter(r,t.getMapLayer().getLayerName(),e);return a||(a=s.getCityCoordinates(r,e)),a}return S.project(i,n,r)},v.prototype._getShowPopupBehaviors=function(e){for(var i=[],n=0;n<e.length;n++)i.push(new t.ShowPopupBehavior(e[n].popupId,e[n].triggerType,null,e[n].align));return i},v._calcBubbleSizes=function(e,i){for(var n=-(1/0),o=1/0,r="value",s=0;s<i.length;s++){var a=i[s][r];null==a||a<=0||(n=Math.max(n,a),o=Math.min(o,a))}if(o!==1/0){var l=2*v._PZC_PADDING,h=e.getWidth()-l,u=e.getHeight()-l,d=h/u;d<1.3?u=2*h/3:d>1.7&&(h=1.5*u);for(var c=v._MAX_MARKER_SIZE_RATIO*Math.min(h,u),s=0;s<i.length;s++){var a=i[s][r];i[s]._size=null==a||a<=0?0:t.LayoutUtils.getBubbleSize(a,o,n,v._MIN_MARKER_SIZE,c)}}},v.calcCurve=function(e,i,n,o,r){var s=o.x,a=o.y,l=r.x,h=r.y,u=e.getMap(),d=t.PathUtils.moveTo(s,a),c=e.trackLink(i,n),p=Math.min(u.getWidth(),u.getHeight())/35;if(l-s===0||h-a===0){var _,g,m,f;if(c>1){if(p*=c-1,l-s===0){var y=.3*Math.abs(a-h);_=s+p,g=a>h?a-y:a+y,m=_,f=h>a?h-y:h+y}else{var y=.3*Math.abs(s-l);_=s>l?s-y:s+y,g=a-p,m=l>s?l-y:l+y,f=g}d+=t.PathUtils.cubicTo(_,g,m,f,l,h)}else d+=t.PathUtils.lineTo(l,h)}else{var y=Math.sqrt(Math.pow(l-s,2),Math.pow(h-a,2)),v=y/4;c>1&&(v+=(c-1)*p);var S=(h-a)/(l-s),C=-1/S;C>0&&(v*=-1);var E=.3*y/Math.sqrt(1+Math.pow(S,2)),b=l-s>0,T=s+(b?1:-1)*E,A=S*(T-s)+a,O=l+(b?-1:1)*E,P=S*(O-l)+h,I=v/Math.sqrt(1+Math.pow(C,2)),_=T+I,g=C*(_-T)+A,m=O+I,f=C*(m-O)+P;d+=t.PathUtils.cubicTo(_,g,m,f,l,h)}return d};var S={};t.Obj.createSubclass(S,t.Obj),S._VIEWPORT_BOUNDS=new t.Rectangle(0,0,800,500),S._RADIUS=6378206.4,S._NEW_ZEALAND_RECT=new t.Rectangle(500,200,200,200),S._NEW_ZEALAND_BOUNDS=new t.Rectangle(163,-49,17,17),S._AFRICA_BOUNDS=new t.Rectangle(-17.379205428479874,-37.201510854305546,68.66391442808313,77.50071544582713),S._ASIA_BOUNDS=new t.Rectangle(-.8436866097568272,-.7626456732012923,1.8336308036296942,1.5748427214611724),S._AUSTRALIA_BOUNDS=new t.Rectangle(113.29667079927977,-52.89550592498755,65.25257389065216,42.123114617504626),S._EUROPE_BOUNDS=new t.Rectangle(-.47944476148667076,-.0014669405958800579,.7364925893845453,.6293972741802124),S._N_AMERICA_BOUNDS=new t.Rectangle(-.6154469465354344,-.24589767758847714,1.2448236795108683,1.2631535127174947),S._S_AMERICA_BOUNDS=new t.Rectangle(-80.60817722658722,-60.796273249672765,46.608687602908056,66.96595767361796),S._APAC_BOUNDS=new t.Rectangle(68.20516856593524,-52.89892708045518,111.65739821771903,116.55460214469134),S._EMEA_BOUNDS=new t.Rectangle(-24.543831069368586,-37.202500659225905,204.54283106936856,164.9634493690208),S._L_AMERICA_BOUNDS=new t.Rectangle(-117.12451221229134,-54.95921623126266,82.33223251442891,87.67786623127876),S._USA_CANADA_BOUNDS=new t.Rectangle(-.6154656300926513,.0507209798775865,1.0153104799231851,.966537441082997),S._WORLD_BOUNDS=new t.Rectangle(-171.9,-62.6,349.8,150.8),S._ALASKA1_RECT=new t.Rectangle(172,51,8,3),S._ALASKA2_RECT=new t.Rectangle(-180,51,51,21),S._HAWAII_RECT=new t.Rectangle(-178.5,18.9,35,11),S._USA_RECT=new t.Rectangle(-124.8,24.4,58,25.5),S._ALASKA_BOUNDS=new t.Rectangle(-187.5517578125,59.82610321044922,57.562225341796875,43.83738708496094),S._HAWAII_BOUNDS=new t.Rectangle(-160.23606872558594,18.91549301147461,5.4374847412109375,3.3189010620117188),S._USA_BOUNDS=new t.Rectangle(-2386803.25,-1183550.5,4514111,2908402),S._HAWAII_WINDOW=new t.Rectangle(165,400,100,100),S._ALASKA_WINDOW=new t.Rectangle(-75,350,240,150),S._ROBINSON_COORDINATES=[[1,0],[.9986,.0314],[.9954,.0629],[.99,.0943],[.9822,.1258],[.973,.1572],[.96,.1887],[.9427,.2201],[.9216,.2515],[.8962,.2826],[.8679,.3132],[.835,.3433],[.7986,.3726],[.7597,.4008],[.6732,.4532],[.6213,.4765],[.5722,.4951],[.5322,.5072]],S.project=function(e,i,n){var o;switch(n){case"africa":o=S._getAffineProjection(S._AFRICA_BOUNDS,S._getMercatorProjection(e,i));break;case"asia":o=S._getAffineProjection(S._ASIA_BOUNDS,S._getAlbersEqualAreaConicProjection(40,95,20,60,e,i),S.toRadians(5));break;case"australia":o=S._getAustraliaProjection(e,i);break;case"europe":o=S._getAffineProjection(S._EUROPE_BOUNDS,S._getAlbersEqualAreaConicProjection(35,25,40,65,e,i),S.toRadians(10));break;case"northAmerica":o=S._getAffineProjection(S._N_AMERICA_BOUNDS,S._getAlbersEqualAreaConicProjection(23,-96,20,60,e,i));break;case"southAmerica":o=S._getAffineProjection(S._S_AMERICA_BOUNDS,new t.Point(e,i),S.toRadians(5));break;case"apac":o=S._getAffineProjection(S._APAC_BOUNDS,S._getMercatorProjection(e,i));break;case"emea":o=S._getAffineProjection(S._EMEA_BOUNDS,S._getMercatorProjection(e,i));break;case"latinAmerica":o=S._getAffineProjection(S._L_AMERICA_BOUNDS,new t.Point(e,i));break;case"usaAndCanada":o=S._getAffineProjection(S._USA_CANADA_BOUNDS,S._getAlbersEqualAreaConicProjection(23,-96,20,60,e,i));break;case"worldRegions":o=S._getWorldProjection(e,i);break;case"usa":o=S._getUSAProjection(e,i);break;case"world":o=S._getWorldProjection(e,i)}return o?new t.Point(10*o.x,10*o.y):null},S._getUSAProjection=function(e,i){var n,o;return S._ALASKA1_RECT.containsPoint(e,i)||S._ALASKA2_RECT.containsPoint(e,i)?(n=S._getViewPortTransformation(S._ALASKA_BOUNDS,S._ALASKA_WINDOW),o=S._applyAffineTransform(n,S._getMercatorProjection(e,i))):S._HAWAII_RECT.containsPoint(e,i)?(n=S._getViewPortTransformation(S._HAWAII_BOUNDS,S._HAWAII_WINDOW),o=S._applyAffineTransform(n,new t.Point(e,i))):S._USA_RECT.containsPoint(e,i)&&(n=S._getViewPortTransformation(S._USA_BOUNDS,S._VIEWPORT_BOUNDS),o=S._applyAffineTransform(n,S._getOrthographicProjection(new t.Point(-95,36),e,i))),S._getBoundedTransformedPoint(S._VIEWPORT_BOUNDS,o)},S._getWorldProjection=function(t,e){var i=S._getViewPortTransformation(S._WORLD_BOUNDS,S._VIEWPORT_BOUNDS),n=S._applyAffineTransform(i,S._getRobinsonProjection(t,e));return S._getBoundedTransformedPoint(S._VIEWPORT_BOUNDS,n)},S._getAustraliaProjection=function(t,e){var i;i=S._NEW_ZEALAND_BOUNDS.containsPoint(t,e)?S._getViewPortTransformation(S._NEW_ZEALAND_BOUNDS,S._NEW_ZEALAND_RECT):S._getViewPortTransformation(S._AUSTRALIA_BOUNDS,S._VIEWPORT_BOUNDS);var n=S._applyAffineTransform(i,S._getMercatorProjection(t,e));return S._getBoundedTransformedPoint(S._VIEWPORT_BOUNDS,n)},S._getAffineProjection=function(e,i,n){var o=S._getViewPortTransformation(e,S._VIEWPORT_BOUNDS);if(n){var r=new t.Matrix;r.rotate(n),o=S._concatAffineTransforms(o,r)}var s=o.transformPoint(i);return S._getBoundedTransformedPoint(S._VIEWPORT_BOUNDS,s)},S._getBoundedTransformedPoint=function(t,e){return e&&t.containsPoint(e.x,e.y)?e:null},S._getAlbersEqualAreaConicProjection=function(e,i,n,o,r,s){var a=S.toRadians(i),l=S.toRadians(e);n=S.toRadians(n),o=S.toRadians(o);var h=.5*(Math.sin(n)+Math.sin(o)),u=Math.pow(Math.cos(n),2)+2*h*Math.sin(n),d=u-2*h*Math.sin(l);d=Math.sqrt(d)/h;var c=S.toRadians(r),p=S.toRadians(s),_=h*(c-a),g=u-2*h*Math.sin(p);g=Math.sqrt(g)/h;var m=g*Math.sin(_),f=d-g*Math.cos(_);return new t.Point(m,f)},S._getMercatorProjection=function(e,i){var n=Math.log(Math.tan(.25*Math.PI+.5*S.toRadians(i)));return new t.Point(e,S.toDegrees(n))},S._getOrthographicProjection=function(e,i,n){var o=S.toRadians(i),r=S.toRadians(n),s=S.toRadians(e.x),a=S.toRadians(e.y),l=Math.cos(r)*Math.sin(o-s),h=Math.cos(a)*Math.sin(r)-Math.sin(a)*Math.cos(r)*Math.cos(o-s);return new t.Point(l*S._RADIUS,h*S._RADIUS)},S._getRobinsonProjection=function(e,i){var n=Math.floor(Math.abs(i)/5);n>=S._ROBINSON_COORDINATES.length-1&&(n=S._ROBINSON_COORDINATES.length-2);var o=(Math.abs(i)-5*n)/5,r=S._ROBINSON_COORDINATES[n+1][0]-S._ROBINSON_COORDINATES[n][0],s=S._ROBINSON_COORDINATES[n+1][1]-S._ROBINSON_COORDINATES[n][1],a=e*(S._ROBINSON_COORDINATES[n][0]+o*r),l=S._ROBINSON_COORDINATES[n][1]+o*s;return i<0&&(l=-1*l),new t.Point(a,180*l)},S._applyAffineTransform=function(e,i){return new t.Point(i.x*e.getA()+e.getTx(),i.y*e.getD()+e.getTy())},S._concatAffineTransforms=function(e,i){var n=e.getA(),o=i.getA()*n,r=i.getB()*n,s=e.getTx()+i.getTx()*n,a=e.getD(),l=i.getC()*a,h=i.getD()*a,u=e.getTy()+i.getTy()*a;return new t.Matrix(o,r,l,h,s,u)},S._getViewPortTransformation=function(e,i){var n=i.x,o=i.y,r=e.w,s=e.h,a=0,l=i.w/r,h=i.h/s;a=l<=h?l:h;var u=n-e.x*a,d=o+e.y*a;return u+=(i.w-r*a)/2,d+=i.h-(i.h-s*a)/2,new t.Matrix(a,0,0,-a,u,d)},S.toRadians=function(t){return t*(Math.PI/180)},S.toDegrees=function(t){return t*(180/Math.PI)},S.inverseProject=function(e,i,n){var o;switch(e/=10,i/=10,n){case"africa":o=S._getInverseAffineProjection(S._AFRICA_BOUNDS,new t.Point(e,i)),o=S._getInverseMercatorProjection(o.x,o.y);break;case"asia":o=S._getInverseAffineProjection(S._ASIA_BOUNDS,new t.Point(e,i),S.toRadians(5)),o=S._getInverseAlbersEqualAreaConicProjection(40,95,20,60,o.x,o.y);break;case"australia":o=S._getInverseAustraliaProjection(e,i);break;case"europe":o=S._getInverseAffineProjection(S._EUROPE_BOUNDS,new t.Point(e,i),S.toRadians(10)),o=S._getInverseAlbersEqualAreaConicProjection(35,25,40,65,o.x,o.y);break;case"northAmerica":o=S._getInverseAffineProjection(S._N_AMERICA_BOUNDS,new t.Point(e,i)),o=S._getInverseAlbersEqualAreaConicProjection(23,-96,20,60,o.x,o.y);break;case"southAmerica":o=S._getInverseAffineProjection(S._S_AMERICA_BOUNDS,new t.Point(e,i),S.toRadians(5));break;case"apac":o=S._getInverseAffineProjection(S._APAC_BOUNDS,new t.Point(e,i)),o=S._getInverseMercatorProjection(o.x,o.y);break;case"emea":o=S._getInverseAffineProjection(S._EMEA_BOUNDS,new t.Point(e,i)),o=S._getInverseMercatorProjection(o.x,o.y);break;case"latinAmerica":o=S._getInverseAffineProjection(S._L_AMERICA_BOUNDS,new t.Point(e,i));break;case"usaAndCanada":o=S._getInverseAffineProjection(S._USA_CANADA_BOUNDS,new t.Point(e,i)),o=S._getInverseAlbersEqualAreaConicProjection(23,-96,20,60,o.x,o.y);break;case"worldRegions":o=S._getInverseWorldProjection(e,i);break;case"usa":o=S._getInverseUSAProjection(e,i);break;case"world":o=S._getInverseWorldProjection(e,i)}return o?o:new t.Point(e,i)},S._getInverseUSAProjection=function(e,i){var n;if(S._ALASKA_WINDOW.containsPoint(e,i)){n=S._getViewPortTransformation(S._ALASKA_BOUNDS,S._ALASKA_WINDOW),n.invert();var o=n.transformPoint(new t.Point(e,i));return S._getInverseMercatorProjection(o.x,o.y)}if(S._HAWAII_WINDOW.containsPoint(e,i))return n=S._getViewPortTransformation(S._HAWAII_BOUNDS,S._HAWAII_WINDOW),n.invert(),n.transformPoint(new t.Point(e,i));if(S._VIEWPORT_BOUNDS.containsPoint(e,i)){n=S._getViewPortTransformation(S._USA_BOUNDS,S._VIEWPORT_BOUNDS),n.invert();var o=n.transformPoint(new t.Point(e,i));return S._getInverseOrthographicProjection(new t.Point(-95,36),o.x,o.y)}return new t.Point(e,i)},S._getInverseWorldProjection=function(e,i){var n=S._getViewPortTransformation(S._WORLD_BOUNDS,S._VIEWPORT_BOUNDS);n.invert();var o=n.transformPoint(new t.Point(e,i));return S._getInverseRobinsonProjection(o.x,o.y)},S._getInverseAustraliaProjection=function(e,i){var n;n=S._NEW_ZEALAND_RECT.containsPoint(e,i)?S._getViewPortTransformation(S._NEW_ZEALAND_BOUNDS,S._NEW_ZEALAND_RECT):S._getViewPortTransformation(S._AUSTRALIA_BOUNDS,S._VIEWPORT_BOUNDS),n.invert();var o=n.transformPoint(new t.Point(e,i));return S._getInverseMercatorProjection(o.x,o.y)},S._getInverseAffineProjection=function(e,i,n){var o=S._getViewPortTransformation(e,S._VIEWPORT_BOUNDS);if(n){var r=new t.Matrix;r.rotate(n),o=S._concatAffineTransforms(o,r)}return o.invert(),o.transformPoint(i)},S._getInverseAlbersEqualAreaConicProjection=function(e,i,n,o,r,s){var a=S.toRadians(i),l=S.toRadians(e);n=S.toRadians(n),o=S.toRadians(o);var h=.5*(Math.sin(n)+Math.sin(o)),u=Math.pow(Math.cos(n),2)+2*h*Math.sin(n),d=u-2*h*Math.sin(l);d=Math.sqrt(d)/h;var c=Math.sqrt(r*r+(d-s)*(d-s)),p=Math.atan(r/(d-s)),_=Math.asin((u-c*c*h*h)/(2*h)),g=a+p/h;return new t.Point(S.toDegrees(g),S.toDegrees(_))},S._getInverseMercatorProjection=function(e,i){var n=2*Math.atan(Math.exp(S.toRadians(i)))-.5*Math.PI;return new t.Point(e,S.toDegrees(n))},S._getInverseOrthographicProjection=function(e,i,n){var o=i/S._RADIUS,r=n/S._RADIUS,s=S.toRadians(e.x),a=S.toRadians(e.y),l=Math.sqrt(o*o+r*r),h=Math.asin(l),u=Math.asin(Math.cos(h)*Math.sin(a)+r*Math.sin(h)*Math.cos(a)/l),d=s+Math.atan(o*Math.sin(h)/(l*Math.cos(a)*Math.cos(h)-r*Math.sin(a)*Math.sin(h)));return new t.Point(S.toDegrees(d),S.toDegrees(u))},S._getInverseRobinsonProjection=function(e,i){var n=Math.floor(Math.abs(i)/5);n>=S._ROBINSON_COORDINATES.length-1&&(n=S._ROBINSON_COORDINATES.length-2);var o=S._ROBINSON_COORDINATES[n+1][0]-S._ROBINSON_COORDINATES[n][0],r=S._ROBINSON_COORDINATES[n+1][1]-S._ROBINSON_COORDINATES[n][1],s=(Math.abs(i/180)-S._ROBINSON_COORDINATES[n][1])/r,a=5*s+5*n,l=e/(S._ROBINSON_COORDINATES[n][0]+s*o);return i<0&&(a=-1*a),new t.Point(l,a)};var C=function(t,e,i){this.Init(t,e,i)};t.Obj.createSubclass(C,t.ControlPanel),C.prototype.Init=function(e,i,n){C.superclass.Init.call(this,e,i,n),this._drillMode=i.getDrillMode(),this._buttonImages=i.getResourcesMap(),this._drillUpCallback=t.Obj.createCallback(i,i.drillUp),this._drillDownCallback=t.Obj.createCallback(i,i.drillDown),this._resetCallback=t.Obj.createCallback(i,i.resetMap),this._resetButton=null,this._drillUpButton=null,this._drillDownButton=null,this._drillDownButtonEnabled=!1,this._drillUpButtonEnabled=!1,this._styleMap=i.getSubcomponentStyles()},C.prototype.setEnabledDrillDownButton=function(t){this._drillDownButtonEnabled=t,this._drillDownButton&&this._drillDownButton.setEnabled(t)},C.prototype.setEnabledDrillUpButton=function(t){this._drillUpButtonEnabled=t,this._drillUpButton&&this._drillUpButton.setEnabled(t)},C.prototype.PopulateHorzContentBar=function(e){if(this._drillMode&&"none"!=this._drillMode){var i=t.StyleUtils.getStyle(this._styleMap,t.ControlPanel.CP_BUTTON_WIDTH,0);this._resetButton=t.ButtonLAFUtils.createResetButton(this.getCtx(),this._buttonImages,this._styleMap),this._resetButton.setCallback(this._resetCallback,this),this._resetButton.setTooltip(t.Bundle.getTranslatedString(t.Bundle.SUBCOMPONENT_PREFIX,"CONTROL_PANEL_RESET")),this._eventManager.associate(this._resetButton,this._resetButton),e.addChild(this._resetButton),this._drillDownButton=t.ButtonLAFUtils.createDrillDownButton(this.getCtx(),this._buttonImages,this._styleMap),this._drillDownButton.setCallback(this._drillDownCallback,this),this._drillDownButton.setTooltip(t.Bundle.getTranslatedString(t.Bundle.SUBCOMPONENT_PREFIX,"CONTROL_PANEL_DRILLDOWN")),this._eventManager.associate(this._drillDownButton,this._drillDownButton),this._drillDownButton.setTranslateX(i),this._drillDownButton.setEnabled(this._drillDownButtonEnabled),e.addChild(this._drillDownButton),this._drillUpButton=t.ButtonLAFUtils.createDrillUpButton(this.getCtx(),this._buttonImages,this._styleMap),this._drillUpButton.setCallback(this._drillUpCallback,this),this._drillUpButton.setTooltip(t.Bundle.getTranslatedString(t.Bundle.SUBCOMPONENT_PREFIX,"CONTROL_PANEL_DRILLUP")),this._eventManager.associate(this._drillUpButton,this._drillUpButton),this._drillUpButton.setTranslateX(2*i),this._drillUpButton.setEnabled(this._drillUpButtonEnabled),e.addChild(this._drillUpButton)}},C.prototype.getActionDisplayable=function(t,e){var i=C.superclass.getActionDisplayable.call(this,t,e);return!i&&this.isDisclosed()&&("drillDown"==t&&this._drillDownButton&&this._drillDownButton.isEnabled()?i=this._drillDownButton:"drillUp"==t&&this._drillUpButton&&this._drillUpButton.isEnabled()?i=this._drillUpButton:"reset"==t&&this._resetButton&&this._resetButton.isEnabled()&&(i=this._resetButton)),i},t.exportProperty(t,"AmxThematicMap",t.AmxThematicMap),t.exportProperty(t.AmxThematicMap,"newInstance",t.AmxThematicMap.newInstance),t.exportProperty(t.AmxThematicMap.prototype,"render",t.AmxThematicMap.prototype.render),t.exportProperty(t.AmxThematicMap.prototype,"getDomElementForSubId",t.AmxThematicMap.prototype.getDomElementForSubId),t.exportProperty(t.AmxThematicMap.prototype,"getSubIdForDomElement",t.AmxThematicMap.prototype.getSubIdForDomElement),t.exportProperty(t.AmxThematicMap.prototype,"getArea",t.AmxThematicMap.prototype.getArea),t.exportProperty(t.AmxThematicMap.prototype,"getMarker",t.AmxThematicMap.prototype.getMarker),t.exportProperty(s,"getLayerIds",s.getLayerIds),t.exportProperty(t,"ThematicMap",t.ThematicMap),t.exportProperty(t.ThematicMap,"newInstance",t.ThematicMap.newInstance),t.exportProperty(t.ThematicMap.prototype,"updateLayer",t.ThematicMap.prototype.updateLayer),t.exportProperty(t.ThematicMap.prototype,"destroy",t.ThematicMap.prototype.destroy),t.exportProperty(t.ThematicMap.prototype,"getAutomation",t.ThematicMap.prototype.getAutomation),t.exportProperty(t.ThematicMap.prototype,"highlight",t.ThematicMap.prototype.highlight),t.exportProperty(t.ThematicMap.prototype,"processDefaultHoverEffect",t.ThematicMap.prototype.processDefaultHoverEffect),t.exportProperty(t.ThematicMap.prototype,"processDefaultSelectionEffect",t.ThematicMap.prototype.processDefaultSelectionEffect),t.exportProperty(t.ThematicMap.prototype,"processDefaultFocusEffect",t.ThematicMap.prototype.processDefaultFocusEffect),t.exportProperty(n.prototype,"getDomElementForSubId",n.prototype.getDomElementForSubId),t.exportProperty(n.prototype,"getData",n.prototype.getData)}(t),t.DvtBaseMapManager||(t.DvtBaseMapManager=DvtBaseMapManager),t}),define("ojs/ojthematicmap",["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojdvt-base","ojs/internal-deps/dvt/DvtThematicMap"],function(t,e,i,n,o){t.__registerWidget("oj.ojThematicMap",e.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{load:null},_currentLocale:"",_loadedBasemaps:[],_basemapPath:"resources/internal-deps/dvt/thematicMap/basemaps/",_supportedLocales:{ar:"ar",cs:"cs",da:"da",de:"de",el:"el",es:"es",fi:"fi",fr:"fr","fr-ca":"fr_CA",he:"iw",hu:"hu",it:"it",ja:"ja",ko:"ko",nl:"nl",no:"no",pl:"pl",pt:"pt_BR","pt-pt":"pt",ro:"ro",ru:"ru",sk:"sk",sv:"sv",th:"th",tr:"tr","zh-hans":"zh_CN","zh-hant":"zh_TW"},_ComponentCreate:function(){this._super(),this._checkBasemaps=[],this._initiallyRendered=!1,this._dataLayersToUpdate=[]},_CreateDvtComponent:function(t,e,i){return o.ThematicMap.newInstance(t,e,i)},_ConvertLocatorToSubId:function(t){var e=t.subId;return"oj-thematicmap-area"==e?e=t.dataLayer+":area["+t.index+"]":"oj-thematicmap-marker"==e?e=t.dataLayer+":marker["+t.index+"]":"oj-thematicmap-link"==e?e=t.dataLayer+":link["+t.index+"]":"oj-thematicmap-tooltip"==e&&(e="tooltip"),e},_ConvertSubIdToLocator:function(t){var e={};return t.indexOf(":area")>0?(e.subId="oj-thematicmap-area",e.dataLayer=t.substring(0,t.indexOf(":")),e.index=this._GetFirstIndex(t)):t.indexOf(":marker")>0?(e.subId="oj-thematicmap-marker",e.dataLayer=t.substring(0,t.indexOf(":")),e.index=this._GetFirstIndex(t)):t.indexOf(":link")>0?(e.subId="oj-thematicmap-link",e.dataLayer=t.substring(0,t.indexOf(":")),e.index=this._GetFirstIndex(t)):"tooltip"==t&&(e.subId="oj-thematicmap-tooltip"),e},_GetComponentStyleClasses:function(){var t=this._super();return t.push("oj-thematicmap"),t},_GetChildStyleClasses:function(){var t=this._super();return t["oj-dvtbase oj-thematicmap"]={path:"animationDuration",property:"animation-duration"},t["oj-thematicmap-arealayer"]=[{path:"styleDefaults/areaStyle",property:"CSS_BACKGROUND_PROPERTIES"},{path:"styleDefaults/labelStyle",property:"CSS_TEXT_PROPERTIES"}],t["oj-thematicmap-area"]={path:"styleDefaults/dataAreaDefaults/borderColor",property:"border-top-color"},t["oj-thematicmap-area oj-hover"]={path:"styleDefaults/dataAreaDefaults/hoverColor",property:"border-top-color"},t["oj-thematicmap-area oj-selected"]=[{path:"styleDefaults/dataAreaDefaults/selectedInnerColor",property:"border-top-color"},{path:"styleDefaults/dataAreaDefaults/selectedOuterColor",property:"border-bottom-color"}],t["oj-thematicmap-marker"]=[{path:"styleDefaults/dataMarkerDefaults/labelStyle",property:"CSS_TEXT_PROPERTIES"},{path:"styleDefaults/dataMarkerDefaults/color",property:"background-color"},{path:"styleDefaults/dataMarkerDefaults/opacity",property:"opacity"},{path:"styleDefaults/dataMarkerDefaults/borderColor",property:"border-top-color"}],t["oj-thematicmap-link"]={path:"styleDefaults/linkDefaults/color",property:"color"},t["oj-thematicmap-link oj-hover"]={path:"styleDefaults/linkDefaults/_hoverColor",property:"color"},t["oj-thematicmap-link oj-selected"]={path:"styleDefaults/linkDefaults/_selectedColor",property:"border-color"},t},_GetEventTypes:function(){return["load","optionChange"]},_setOptions:function(e,i){var n=Object.keys(e).length,o=e.areaLayers,r=this.options.areaLayers,s=e.pointDataLayers;if(1==n&&o&&r&&r.length>0)for(var a=0;a<o.length;a++){var l=o[a],h=r[a],u=!0;for(var d in l)"areaDataLayer"!=d&&l[d]!=h[d]&&(u=u&&!1);u&&!t.Object.compareValues(h.areaDataLayer,l.areaDataLayer)&&this._dataLayersToUpdate.push({options:l.areaDataLayer,parentLayer:l.layer,isADL:!0})}else if(1==n&&s&&this.options.pointDataLayers&&this.options.pointDataLayers.length>0)for(var a=0;a<s.length;a++)t.Object.compareValues(this.options.pointDataLayers[a],s[a])||this._dataLayersToUpdate.push({options:s[a],parentLayer:s[a].id,isADL:!1});this._super(e,i)},_ProcessOptions:function(){this._super();var e=this.options.tooltip,i=e?e.renderer:null;i&&(this.options._tooltip={renderer:function(e){var n=e.tooltip;try{var o=i(e);return o||n}catch(e){return t.Logger.warn("Showing default tooltip. "+e),n}},_templateCleanup:e._templateCleanup});var n=this.options.areaLayers;if(n)for(var o=0;o<n.length;o++){var r=n[o].areaDataLayer;if(r){var s=r._templateRenderer;s&&(r.renderer=this._GetTemplateDataRenderer(s,"area"))}}var a=this.options.pointDataLayers;if(a)for(var o=0;o<a.length;o++){var l=a[o];if(l){var s=l._templateRenderer;s&&(l.renderer=this._GetTemplateDataRenderer(s,"point"))}}this.options._contextHandler=this._getContextHandler()},_Render:function(){this._NotReady();var t=this.options.areaLayers;if(!this.options.basemap||!t||t.length<1)return void this._MakeReady();this._loadBasemap();for(var e=0;e<this._checkBasemaps.length;e++)if(!this._loadedBasemaps[this._checkBasemaps[e]])return;if(this._checkBasemaps=[],this._updateDataLayerSelection(),this._initiallyRendered&&this._dataLayersToUpdate.length>0){if(this._context.isReadyToRender()){for(var e=0;e<this._dataLayersToUpdate.length;e++){var i=this._dataLayersToUpdate[e],n=i.isADL;n?this._CleanTemplate("area"):this._CleanTemplate("point"),this._component.updateLayer(i.options,i.parentLayer,n)}this._dataLayersToUpdate=[]}}else this._super(),this._initiallyRendered=!0;this._trigger("load",null,null)},_getContextHandler:function(){var e=this,i=function(i,n,o,r,s){var a={component:t.Components.getWidgetConstructor(e.element),parentElement:i,rootElement:n,data:o,state:r,previousState:s,id:o.id,label:o.label,color:o.color,location:o.location,x:o.x,y:o.y};return e._FixRendererContext(a)};return i},renderDefaultHover:function(t){t.previousState&&t.state.hovered==t.previousState.hovered||this._component.processDefaultHoverEffect(t.id,t.state.hovered)},renderDefaultSelection:function(t){t.previousState&&t.state.selected==t.previousState.selected||this._component.processDefaultSelectionEffect(t.id,t.state.selected)},renderDefaultFocus:function(t){t.previousState&&t.state.focused==t.previousState.focused||this._component.processDefaultFocusEffect(t.id,t.state.focused)},_loadBasemap:function(){var e=this.options.basemap;if(e){var i=t.Config.getLocale();i!==this._currentLocale&&(this._currentLocale=i,this._loadedBasemaps=[]);var n=this.options.areaLayers;if(n)for(var o=0;o<n.length;o++){var r=n[o].layer;r&&this._loadBasemapHelper(e,r,i)}var s=this.options.pointDataLayers;!this.options.mapProvider&&s&&s.length>0&&this._loadBasemapHelper(e,"cities",i)}},_loadResourceByUrl:function(i,n){if(!this._loadedBasemaps[i]){var o=this,r=function(){o._loadedBasemaps[i]=!0,o._Render()},s=e.getScript(t.Config.getResourceUrl(i),function(t,e){r()});n&&s.fail(function(t,e,i){r()})}},_loadBasemapHelper:function(e,i,n){var r=!0;try{r=Object.keys(o.DvtBaseMapManager.getLayerIds(e,i)).length>0}catch(t){r=!1}if(!r){var s=this.options.mapProvider;if(s)t.MapProviderUtils.geoJsonToBasemap(e,i,s);else{var a=this._basemapPath+"ojthematicmap-"+e+"-"+i+".js";this._checkBasemaps.indexOf(a)==-1&&(this._checkBasemaps.push(a),this._loadResourceByUrl(a,!1))}}if(n.indexOf("en")===-1){var l=n.toLowerCase().split("-"),h=[l[0]];l.length>1&&h.unshift(l[0]+"-"+l[1]),l.length>2&&h.unshift(l[0]+"-"+l[2],l[0]+"-"+l[1]+"-"+l[2]),e=e.charAt(0).toUpperCase()+e.slice(1),i=i.charAt(0).toUpperCase()+i.slice(1);for(var u=this._basemapPath+"resourceBundles/"+e+i+"Bundle_",d=0;d<h.length;d++)if(this._supportedLocales[h[d]]){var c=u+this._supportedLocales[h[d]]+".js";this._checkBasemaps.indexOf(c)==-1&&(this._checkBasemaps.push(c),this._loadResourceByUrl(c,!0));break}}},_HandleEvent:function(t){var e=t.type;if("selection"===e){var i={},n=t.clientId;if(i[n]=t.selection,this.options.selection)for(var o in this.options.selection)n!==o&&(i[o]=this.options.selection[o]);this._UserOptionChange("selection",i)}else this._super(t)},_GetTranslationMap:function(){var t=this.options.translations,e=this._super();return e["DvtUtilBundle.THEMATIC_MAP"]=t.componentName,e},_updateDataLayerSelection:function(){var t=this.options.selection;if(t){var e=this.options.pointDataLayers;if(e)for(var i=0;i<e.length;i++)t[e[i].id]&&(e[i].selection=t[e[i].id]);var n=this.options.areaLayers;if(n)for(var i=0;i<n.length;i++){var o=n[i].areaDataLayer;o&&t[o.id]&&(o.selection=t[o.id])}}},getArea:function(t,e){return this._component.getAutomation().getData(t,"area",e)},getMarker:function(t,e){return this._component.getAutomation().getData(t,"marker",e)},getLink:function(t,e){return this._component.getAutomation().getData(t,"link",e)},getContextByNode:function(t){var e=this.getSubIdByNode(t);return e&&"oj-thematicmap-tooltip"!==e.subId?e:null},_GetComponentDeferredDataPaths:function(){return{areaLayers:["areaDataLayer/areas","areaDataLayer/markers"],pointDataLayers:["markers","links"]}},_GetComponentNoClonePaths:function(){return{areaLayers:{areaDataLayer:{areas:!0,markers:!0}},pointDataLayers:{markers:!0,links:!0}}},_GetDataContext:function(t){var e=this.options.basemap,i=t.layer?t.layer:"cities";return{basemap:e,layer:i,ids:o.DvtBaseMapManager.getLayerIds(e,i)}}}),t.MapProviderUtils={},t.MapProviderUtils._MANAGER="DvtBaseMapManager",t.MapProviderUtils._UNPROCESSED="_UNPROCESSED_MAPS",t.MapProviderUtils._TYPE="type",t.MapProviderUtils._GEOMETRY="geometry",t.MapProviderUtils._COORDINATES="coordinates",t.MapProviderUtils._FEATURES="features",t.MapProviderUtils._PROPERTIES="properties",t.MapProviderUtils._TYPE_FEATURE_COLLECTION="FeatureCollection",t.MapProviderUtils._TYPE_GEOMETRY_COLLECTION="GeometryCollection",t.MapProviderUtils._TYPE_FEATURE="Feature",t.MapProviderUtils._TYPE_POLYGON="Polygon",t.MapProviderUtils._TYPE_MULTI_POLYGON="MultiPolygon",t.MapProviderUtils._ID="id",t.MapProviderUtils._SHORT_LABEL="shortLabel",t.MapProviderUtils._LONG_LABEL="longLabel",t.MapProviderUtils.geoJsonToBasemap=function(e,i,n){var o={},r={},s=n.geo,a=n.propertiesKeys||{},l=s[t.MapProviderUtils._TYPE];if(l===t.MapProviderUtils._TYPE_FEATURE_COLLECTION){var h=s[t.MapProviderUtils._FEATURES];h.forEach(function(e){t.MapProviderUtils.parseFeature(e,a,r,o)})}else{if(l!==t.MapProviderUtils._TYPE_FEATURE)return void t.Logger.error("GeoJSON type of "+l+" is not supported. Only Feature and FeatureCollection types are supported.");t.MapProviderUtils.parseFeature(s,a,r,o)}var u=Object.keys(r).length;return 0===u?void t.Logger.error("No valid Features found in GeoJSON."):(window[t.MapProviderUtils._MANAGER]||(window[t.MapProviderUtils._MANAGER]={},window[t.MapProviderUtils._MANAGER][t.MapProviderUtils._UNPROCESSED]=[[],[],[]]),void window[t.MapProviderUtils._MANAGER][t.MapProviderUtils._UNPROCESSED][0].push([e,i,o,r,null,null,0]))},t.MapProviderUtils.parseFeature=function(e,i,n,o){var r=e[t.MapProviderUtils._PROPERTIES],s=e[t.MapProviderUtils._GEOMETRY];if(!t.MapProviderUtils.isSupportedGeometry(s))return void t.Logger.warn("A geometry of type "+s[t.MapProviderUtils._TYPE]+" is not supported and will be skipped.");var a=r[i[t.MapProviderUtils._ID]];if(!a)return void t.Logger.warn("No 'id' value found in the mapProvider.propertiesKey object. A Feature's 'properties' object must have an id in the field specified by the mapProvider.propertiesKey.id value.");var l=r[i[t.MapProviderUtils._SHORT_LABEL]],h=r[i[t.MapProviderUtils._LONG_LABEL]];(l||h)&&(o[a]=[l,h]),n[a]=t.MapProviderUtils.geomToPath(s)},t.MapProviderUtils.isSupportedGeometry=function(e){var i=e[t.MapProviderUtils._TYPE];return i===t.MapProviderUtils._TYPE_POLYGON||i===t.MapProviderUtils._TYPE_MULTI_POLYGON},t.MapProviderUtils.geomToPath=function(e){var i="",n=e[t.MapProviderUtils._TYPE],o=e[t.MapProviderUtils._COORDINATES];return n===t.MapProviderUtils._TYPE_POLYGON?i=t.MapProviderUtils.polygonToPath(o):n===t.MapProviderUtils._TYPE_MULTI_POLYGON&&o.forEach(function(e){i+=t.MapProviderUtils.polygonToPath(e)}),i},t.MapProviderUtils.polygonToPath=function(e){var i="";return e.forEach(function(e){i+=t.MapProviderUtils.linearRingToPath(e)}),i},t.MapProviderUtils.linearRingToPath=function(t){var e,i,n,o="M";return t&&t.forEach(function(t){var r=t[0],s=-t[1];if("M"===o)return i=r,n=s,o="x",void(e="M"+r+" "+s);var a=r-i,l=s-n;if("l"==o){if(i==r)return o="v",n=s,void(e=e+o+l);if(n==s)return o="h",i=r,void(e=e+o+a);e=e+" "+a+" "+l}else o="l",e=e+"l"+a+" "+l;i=r,n=s}),e+"Z"},function(){var e={properties:{animationDuration:{type:"number|string"},animationOnDisplay:{type:"string"},animationOnMapChange:{type:"string"},areaLayers:{type:"Array<object>"},basemap:{type:"string"},hiddenCategories:{type:"Array<string>"},highlightedCategories:{type:"Array<string>"},highlightMatch:{type:"string"},hoverBehavior:{type:"string"},initialZooming:{type:"string"},mapProvider:{type:"object",properties:{geo:{type:"object"},propertiesKeys:{type:"object"}}},markerZoomBehavior:{type:"string"},maxZoom:{type:"number"},panning:{type:"string"},pointDataLayers:{type:"Array<object>"},selection:{type:"object"},styleDefaults:{type:"object",properties:{areaStyle:{type:"string|object"},dataAreaDefaults:{type:"object",properties:{dataAreaDefaults:{borderColor:{type:"string"},drilledInnerColor:{type:"string"},drilledOuterColor:{type:"string"},hoverColor:{type:"string"},selectedInnerColor:{type:"string"},selectedOuterColor:{type:"string"}}}},dataMarkerDefaults:{type:"object",properties:{dataMarkerDefaults:{borderColor:{type:"string"},borderStyle:{type:"string"},borderWidth:{type:"number"},color:{type:"string"},height:{type:"number"},labelStyle:{type:"string"},opacity:{type:"number"},shape:{type:"string"},width:{type:"number"}}}},hoverBehaviorDelay:{type:"number|string"
},labelStyle:{type:"string"},linkDefaults:{type:"object",properties:{linkDefaults:{color:{type:"string"},width:{type:"number"}}}}}},tooltip:{type:"object",properties:{renderer:{}}},tooltipDisplay:{type:"string"},touchResponse:{type:"string"},translations:{properties:{componentName:{type:"string"}}},zooming:{type:"string"}},methods:{getArea:{},getContextByNode:{},getLink:{},getMarker:{},renderDefaultFocus:{},renderDefaultHover:{},renderDefaultSelection:{}},extension:{_WIDGET_NAME:"ojThematicMap"}};t.CustomElementBridge.registerMetadata("oj-thematic-map","dvtBaseComponent",e),t.CustomElementBridge.register("oj-thematic-map",{metadata:t.CustomElementBridge.getMetadata("oj-thematic-map")})}()}),define("ojs/ojlegend",["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojdvt-base","ojs/internal-deps/dvt/DvtLegend"],function(t,e,i,n,o){t.__registerWidget("oj.ojLegend",e.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{drill:null},_CreateDvtComponent:function(t,e,i){return o.Legend.newInstance(t,e,i)},_ConvertLocatorToSubId:function(t){var e=t.subId;return"oj-legend-item"==e?(e="section"+this._GetStringFromIndexPath(t.sectionIndexPath),e+=":item["+t.itemIndex+"]"):"oj-legend-tooltip"==e&&(e="tooltip"),e},_ConvertSubIdToLocator:function(t){var e={};if(t.indexOf(":item")>0){var i=t.indexOf(":item"),n=t.substring(0,i),o=t.substring(i);e.subId="oj-legend-item",e.sectionIndexPath=this._GetIndexPath(n),e.itemIndex=this._GetFirstIndex(o)}else"tooltip"==t&&(e.subId="oj-legend-tooltip");return e},_GetComponentStyleClasses:function(){var t=this._super();return t.push("oj-legend"),t},_GetChildStyleClasses:function(){var t=this._super();return t["oj-legend"]={path:"textStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-legend-title"]={path:"titleStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-legend-section-title"]={path:"_sectionTitleStyle",property:"CSS_TEXT_PROPERTIES"},t},_GetTranslationMap:function(){var t=this.options.translations,e=this._super();return e["DvtUtilBundle.LEGEND"]=t.componentName,e},_GetEventTypes:function(){return["drill"]},_HandleEvent:function(t){var e=t.type;"drill"===e?this._trigger("drill",null,{id:t.id}):this._super(t)},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var t=this.options._resources;t.closedEnabled="oj-legend-section-close-icon",t.closedOver="oj-legend-section-close-icon oj-hover",t.closedDown="oj-legend-section-close-icon oj-active",t.openEnabled="oj-legend-section-open-icon",t.openOver="oj-legend-section-open-icon oj-hover",t.openDown="oj-legend-section-open-icon oj-active"},_Render:function(){this._super()},getTitle:function(){var t=this._component.getAutomation();return t.getTitle()},getSection:function(t){var e=this._component.getAutomation().getSection(t);return e&&(e.getSection=function(t){var i=e.sections?e.sections[t]:null;return i},e.getItem=function(t){var i=e.items?e.items[t]:null;return i}),e},getItem:function(t){return this._component.getAutomation().getItem(t)},getPreferredSize:function(t,e){for(var i=!1,n=this.options.sections?this.options.sections:[],o=0;o<n.length;o++){var r=n[o].items;r&&r.then&&(i=!0)}var s=i?null:this.options,a=this._component.getPreferredSize(s,t,e);return{width:a.getWidth(),height:a.getHeight()}},getContextByNode:function(t){var e=this.getSubIdByNode(t);return e&&"oj-legend-tooltip"!==e.subId?e:null},_GetComponentDeferredDataPaths:function(){return{sections:["items"]}},_GetComponentNoClonePaths:function(){return{sections:{items:!0}}}}),function(){var e={properties:{drilling:{type:"string",enumValues:["on","off"]},halign:{type:"string",enumValues:["center","end","start"]},hiddenCategories:{type:"Array<string>",writeback:!0},hideAndShowBehavior:{type:"string",enumValues:["on","off"]},highlightedCategories:{type:"Array<string>",writeback:!0},hoverBehavior:{type:"string",enumValues:["dim","none"]},hoverBehaviorDelay:{type:"number"},orientation:{type:"string",enumValues:["horizontal","vertical"]},scrolling:{type:"string",enumValues:["asNeeded","off"]},sections:{type:"Array<object>"},symbolHeight:{type:"number"},symbolWidth:{type:"number"},textStyle:{type:"object"},translations:{properties:{componentName:{type:"string"}}},valign:{type:"string"}},events:{drill:{}},methods:{getContextByNode:{},getItem:{},getPreferredSize:{},getSection:{}},extension:{_WIDGET_NAME:"ojLegend"}};t.CustomElementBridge.registerMetadata("oj-legend","dvtBaseComponent",e),t.CustomElementBridge.register("oj-legend",{metadata:t.CustomElementBridge.getMetadata("oj-legend")})}()}),define("ojs/internal-deps/dvt/DvtDiagram",["./DvtToolkit","./DvtPanZoomCanvas"],function(t){return function(t){var e=function(t){this.Init(t)};t.Obj.createSubclass(e,t.Obj,"DvtDiagramLayoutContext"),e.prototype.Init=function(t){if(this._layout=t?t._layout:null,this._layoutAttrs=t?t._layoutAttrs:null,this._nodeCount=t?t._nodeCount:0,this._linkCount=t?t._linkCount:0,this._bLocaleR2L=!!t&&t._bLocaleR2L,this._componentSize=t?t._componentSize:null,this._viewport=t?t._viewport:null,this._containerId=t?t._containerId:null,this._containerPadding=t?t._containerPadding:null,this._nodes={},this._links={},this._arNodes=[],this._arLinks=[],t){for(var e=0;e<this._nodeCount;e++){var o=new n(t._arNodes[e]);this._arNodes.push(o),this._nodes[o.getId()]=o}for(var r in t._nodes)this._nodes[r]||(this._nodes[r]=new n(t._nodes[r]));for(var e=0;e<this._linkCount;e++){var s=new i(t._arLinks[e]);this._arLinks.push(s),this._links[s.getId()]=s}for(var a in t._links)this._links[a]||(this._links[a]=new i(t._links[a]))}},e.prototype.setLayout=function(t){this._layout=t},e.prototype.getLayout=function(){return this._layout},e.prototype.setLayoutAttributes=function(t){this._layoutAttrs=t},e.prototype.getLayoutAttributes=function(){return this._layoutAttrs},e.prototype.addNode=function(t){this.getNodeById(t.getId())||(this._nodeCount++,this._arNodes.push(t)),this._nodes[t.getId()]=t},e.prototype.addNodeToMap=function(t){this._nodes[t.getId()]=t},e.prototype.getNodeById=function(t){return this._nodes[t]},e.prototype.getNodeByIndex=function(t){return this._arNodes[t]},e.prototype.getNodeCount=function(){return this._nodeCount},e.prototype.addLink=function(t){this.getLinkById(t.getId())||(this._linkCount++,this._arLinks.push(t)),this._links[t.getId()]=t},e.prototype.getLinkById=function(t){return this._links[t]},e.prototype.getLinkByIndex=function(t){return this._arLinks[t]},e.prototype.getLinkCount=function(){return this._linkCount},e.prototype.localToGlobal=function(e,i){var n=this.GetGlobalOffset(i);return new t.DiagramPoint(e.x+n.x,e.y+n.y)},e.prototype.GetGlobalOffset=function(e){for(var i=new t.DiagramPoint(0,0);e;){i.x+=e.ContentOffset.x+e.getPosition().x,i.y+=e.ContentOffset.y+e.getPosition().y;var n=e.getContainerId();if(n){if(e=this.getNodeById(n),e&&e.isDisclosed()){var o=e.getContainerPadding();o&&(i.x+=o.left,i.y+=o.top)}}else e=null}return i},e.prototype.setLocaleR2L=function(t){this._bLocaleR2L=t},e.prototype.isLocaleR2L=function(){return this._bLocaleR2L},e.prototype.setComponentSize=function(t){this._componentSize=t},e.prototype.getComponentSize=function(){return this._componentSize},e.prototype.setViewport=function(t){this._viewport=t},e.prototype.getViewport=function(){return this._viewport},e.prototype.setContainerId=function(t){this._containerId=t},e.prototype.getContainerId=function(){return this._containerId},e.prototype.setContainerPadding=function(t,e,i,n){this.getContainerId()&&(this._containerPadding={},"number"!=typeof t&&"string"!=typeof t&&(n=t.left,e=t.right,i=t.bottom,t=t.top),this._containerPadding.top=t,this._containerPadding.right=e,this._containerPadding.bottom=i,this._containerPadding.left=n)},e.prototype.getContainerPadding=function(){return this._containerPadding},e.prototype.setCurrentViewport=function(t){this._currentViewport=t},e.prototype.getCurrentViewport=function(){return this._currentViewport},e.prototype.getCommonContainer=function(t,e){for(var i=function(t,e){for(var i=[],n=e.getNodeById(t)?e.getNodeById(t).getContainerId():null;n;)i.push(n),n=e.getNodeById(n)?e.getNodeById(n).getContainerId():null;return i.reverse(),i},n=i(t,this),o=i(e,this),r=null,s=0;s<n.length&&s<o.length&&n[s]==o[s];s++)r=n[s];return r};var i=function(t){this.Init(t)};t.Obj.createSubclass(i,t.Obj,"DvtDiagramLayoutContextLink"),i.prototype.Init=function(t){this._id=t?t._id:null,this._startId=t?t._startId:null,this._endId=t?t._endId:null,this._points=t?t._points:null,this._labelPosition=t?t._labelPosition:null,this._labelValign=t?t._labelValign:null,this._labelHalign=t?t._labelHalign:null,this._labelBounds=t?t._labelBounds:null,this._layoutAttrs=t?t._layoutAttrs:null,this._startConnectorOffset=t?t._startConnectorOffset:0,this._endConnectorOffset=t?t._endConnectorOffset:0,this._linkWidth=t?t._linkWidth:1,this._selected=!!t&&t._selected,this._labelRotAngle=t?t._labelRotAngle:null,this._labelRotPoint=t?t._labelRotPoint:null,this._bPromoted=!!t&&t._bPromoted,this._containerId=t?t._containerId:null},i.prototype.setId=function(t){this._id=t},i.prototype.getId=function(){return this._id},i.prototype.setStartId=function(t){this._startId=t},i.prototype.getStartId=function(){return this._startId},i.prototype.setEndId=function(t){this._endId=t},i.prototype.getEndId=function(){return this._endId},i.prototype.setPoints=function(e){"string"==typeof e?this._points=t.PathUtils.createPathArray(e):this._points=e},i.prototype.getPoints=function(){return this._points},i.prototype.setLabelPosition=function(t){this._labelPosition=t},i.prototype.getLabelPosition=function(){return this._labelPosition},i.prototype.setLabelBounds=function(t){this._labelBounds=t},i.prototype.getLabelBounds=function(){return this._labelBounds},i.prototype.setStartConnectorOffset=function(t){this._startConnectorOffset=t},i.prototype.getStartConnectorOffset=function(){return this._startConnectorOffset},i.prototype.setEndConnectorOffset=function(t){this._endConnectorOffset=t},i.prototype.getEndConnectorOffset=function(){return this._endConnectorOffset},i.prototype.setLinkWidth=function(t){this._linkWidth=t},i.prototype.getLinkWidth=function(){return this._linkWidth},i.prototype.setLayoutAttributes=function(t){this._layoutAttrs=t},i.prototype.getLayoutAttributes=function(){return this._layoutAttrs},i.prototype.setSelected=function(t){this._selected=t},i.prototype.getSelected=function(){return this._selected},i.prototype.setLabelRotationAngle=function(t){this._labelRotAngle=t},i.prototype.getLabelRotationAngle=function(){return this._labelRotAngle},i.prototype.setLabelRotationPoint=function(t){this._labelRotPoint=t},i.prototype.getLabelRotationPoint=function(){return this._labelRotPoint},i.prototype.setPromoted=function(t){this._bPromoted=t},i.prototype.isPromoted=function(){return this._bPromoted},i.prototype.setLabelValign=function(t){this._labelValign=t},i.prototype.setLabelHalign=function(t){this._labelHalign=t},i.prototype.getLabelValign=function(){return this._labelValign},i.prototype.getLabelHalign=function(){return this._labelHalign},i.prototype.setCoordinateSpace=function(t){this._coordinateContainerId=t},i.prototype.getCoordinateSpace=function(){return this._coordinateContainerId},i.prototype.setData=function(t){this._data=t},i.prototype.getData=function(){return this._data};var n=function(t){this.Init(t)};t.Obj.createSubclass(n,t.Obj,"DvtDiagramLayoutContextNode"),n.prototype.Init=function(e){this._id=e?e._id:null,this._bounds=e?e._bounds:null,this._contentBounds=e?e._contentBounds:null,this._position=e?e._position:null,this._labelPosition=e?e._labelPosition:null,this._labelBounds=e?e._labelBounds:null,this._labelValign=e?e._labelValign:null,this._labelHalign=e?e._labelHalign:null,this._layoutAttrs=e?e._layoutAttrs:null,this._bReadOnly=!!e&&e._bReadOnly,this._containerId=e?e._containerId:null,this._selected=!!e&&e._selected,this._labelRotAngle=e?e._labelRotAngle:null,this._labelRotPoint=e?e._labelRotPoint:null,this._containerPadding=e?e._containerPadding:null,this._origBounds=e?e._origBounds:null,this._origContentBounds=e?e._origContentBounds:null,this._bDisclosed=!!e&&e._bDisclosed,this.Component=e?e.GetDiagram():null,this.IsRendered=!0,this.ContentOffset=new t.DiagramPoint(0,0)},n.prototype.setId=function(t){this._id=t},n.prototype.getId=function(){return this._id},n.prototype.setBounds=function(t){this._bounds=t,this._origBounds=t},n.prototype.getBounds=function(){return!this.IsRendered&&this.Component&&this.Component.renderNodeFromContext(this),this._bounds},n.prototype.setContentBounds=function(t){this._contentBounds=t,this._origContentBounds=t},n.prototype.getContentBounds=function(){return!this.IsRendered&&this.Component&&this.Component.renderNodeFromContext(this),this._contentBounds},n.prototype.setPosition=function(t){this._position=t,this._updateParentNodes(this)},n.prototype.getPosition=function(){return this._position},n.prototype.getRelativePosition=function(e){var i=this.LayoutContext;if(i){for(var n=new t.DiagramPoint(0,0),o=this,r=!1;o;){var s=o.getContainerId();if(s){var a=i.getNodeById(s);a&&this.Component&&!a.IsRendered&&this.Component.renderNodeFromContext(a)}if(n.x+=o.ContentOffset.x+o.getPosition().x,n.y+=o.ContentOffset.y+o.getPosition().y,s!=e)if(o=i.getNodeById(s),o&&o.isDisclosed()){var l=o.getContainerPadding();l&&(n.x+=l.left,n.y+=l.top)}else o=null;else r=!0,o=null}return r||(n=null),n}},n.prototype.setLabelPosition=function(t){this._labelPosition=t},n.prototype.getLabelPosition=function(){return this._labelPosition},n.prototype.setLabelBounds=function(t){this._labelBounds=t},n.prototype.getLabelBounds=function(){return this._labelBounds},n.prototype.setLayoutAttributes=function(t){this._layoutAttrs=t},n.prototype.getLayoutAttributes=function(){return this._layoutAttrs},n.prototype.setReadOnly=function(t){this._bReadOnly=t},n.prototype.isReadOnly=function(){return this._bReadOnly},n.prototype.setContainerId=function(t){this._containerId=t},n.prototype.getContainerId=function(){return this._containerId},n.prototype.setSelected=function(t){this._selected=t},n.prototype.getSelected=function(){return this._selected},n.prototype.setLabelRotationAngle=function(t){this._labelRotAngle=t},n.prototype.getLabelRotationAngle=function(){return this._labelRotAngle},n.prototype.setLabelRotationPoint=function(t){this._labelRotPoint=t},n.prototype.getLabelRotationPoint=function(){return this._labelRotPoint},n.prototype.SetContainerPaddingObj=function(e){this.isDisclosed()&&(this._containerPadding=e,e&&(this._origBounds&&(this._origBounds=new t.DiagramRectangle(this._origBounds.x,this._origBounds.y,this._origBounds.w-(e.left+e.right),this._origBounds.h-(e.top+e.bottom))),this._origContentBounds&&(this._origContentBounds=new t.DiagramRectangle(this._origContentBounds.x,this._origContentBounds.y,this._origContentBounds.w-(e.left+e.right),this._origContentBounds.h-(e.top+e.bottom)))))},n.prototype.setContainerPadding=function(e,i,n,o){this.isDisclosed()&&(this._containerPadding={},"number"!=typeof e&&"string"!=typeof e&&(o=e.left,i=e.right,n=e.bottom,e=e.top),this._containerPadding.top=e,this._containerPadding.right=i,this._containerPadding.bottom=n,this._containerPadding.left=o,this._origBounds&&(this._bounds=new t.DiagramRectangle(this._origBounds.x,this._origBounds.y,this._origBounds.w+o+i,this._origBounds.h+e+n)),this._origContentBounds&&(this._contentBounds=new t.DiagramRectangle(this._origContentBounds.x,this._origContentBounds.y,this._origContentBounds.w+o+i,this._origContentBounds.h+e+n)))},n.prototype.getContainerPadding=function(){return this._containerPadding},n.prototype.setDisclosed=function(t){this._bDisclosed=t},n.prototype.isDisclosed=function(){return this._bDisclosed},n.prototype.setChildNodes=function(t){this._childNodes=t},n.prototype.getChildNodes=function(){return this._childNodes},n.prototype.setParentNode=function(t){this._parentNode=t},n.prototype.getParentNode=function(){return this._parentNode},n.prototype._updateParentNodes=function(t){var e=t.getParentNode();e&&e.IsRendered&&(e.IsRendered=!1,this._updateParentNodes(e))},n.prototype.setLabelValign=function(t){this._labelValign=t},n.prototype.setLabelHalign=function(t){this._labelHalign=t},n.prototype.getLabelValign=function(){return this._labelValign},n.prototype.getLabelHalign=function(){return this._labelHalign},n.prototype.setData=function(t){this._data=t},n.prototype.getData=function(){return this._data};var o=function(t,e){this.Init(t,e)};t.Obj.createSubclass(o,t.Obj,"DvtDiagramPoint"),o.prototype.Init=function(t,e){this.x=null===t||isNaN(t)?0:t,this.y=null===e||isNaN(e)?0:e};var r=function(t,e,i,n){this.Init(t,e,i,n)};t.Obj.createSubclass(r,t.Obj,"DvtDiagramRectangle"),r.prototype.Init=function(t,e,i,n){this.x=null===t||isNaN(t)?0:t,this.y=null===e||isNaN(e)?0:e,this.w=null===i||isNaN(i)?0:i,this.h=null===n||isNaN(n)?0:n},t.DiagramPoint=o,t.DiagramRectangle=r,t.ShapeAnimationUtils={},t.Obj.createSubclass(t.ShapeAnimationUtils,t.Obj),t.ShapeAnimationUtils.transitionShapes=function(e,i,n){e&&i&&e instanceof t.Text&&i instanceof t.Text?t.ShapeAnimationUtils.TransitionTextToText(e,i,n):e&&i&&e instanceof t.Shape&&i instanceof t.Shape?t.ShapeAnimationUtils.TransitionShapeToShapeUsingPaths(e,i,n):e&&i&&t.ShapeAnimationUtils.TransitionShapeToShape(e,i,n)},t.ShapeAnimationUtils.TransitionTextToText=function(e,i,n){t.ShapeAnimationUtils._transitionMatrix(e,i,n);var o=e.getFill?e.getFill():null,r=i.getFill?i.getFill():null;n&&(e.getX()!=i.getX()&&n.addProp(t.Animator.TYPE_NUMBER,e,e.getX,e.setX,i.getX()),e.getY()!=i.getY()&&n.addProp(t.Animator.TYPE_NUMBER,e,e.getY,e.setY,i.getY()),o&&r&&o instanceof t.SolidFill&&r instanceof t.SolidFill&&o.getColor()!=r.getColor()&&n.addProp(t.Animator.TYPE_FILL,e,e.getFill,e.setFill,r))},t.ShapeAnimationUtils.TransitionShapeToShape=function(e,i,n){var o=e.getDimensions(e.getCtx().getStage()),r=i.getDimensions(i.getCtx().getStage()),s=e.getFill?e.getFill():null,a=i.getFill?i.getFill():null,l=e.getStroke?e.getStroke():null,h=i.getStroke?i.getStroke():null;if(n){var u=1,d=1;o.w!=r.w&&(u=r.w/o.w),o.h!=r.h&&(d=r.h/o.h);var c=0,p=0;if(o.x!=r.x&&(c=r.x-o.x),o.y!=r.y&&(p=r.y-o.y),s&&a&&s instanceof t.SolidFill&&a instanceof t.SolidFill&&s.getColor()!=a.getColor()&&n.addProp(t.Animator.TYPE_FILL,e,e.getFill,e.setFill,a),l&&h&&l instanceof t.SolidStroke&&h instanceof t.SolidStroke&&l.getColor()!=h.getColor()&&n.addProp(t.Animator.TYPE_STROKE,e,e.getStroke,e.setStroke,h),0!=c||0!=p||1!=u||1!=d){var _=new t.Matrix;_.translate(-o.x,-o.y),_.scale(u,d),_.translate(o.x,o.y),_.translate(c,p);var g=e.getMatrix().clone();g.concat(_),n.addProp(t.Animator.TYPE_MATRIX,e,e.getMatrix,e.setMatrix,g)}}},t.ShapeAnimationUtils._transitionMatrix=function(e,i,n){if(n){var o=t.ShapeAnimationUtils._getCurrentTransformationMatrix(e),r=t.ShapeAnimationUtils._getCurrentTransformationMatrix(i);if(!o.equals(r)){var s=t.ShapeAnimationUtils._getCurrentTransformationMatrix(e.getParent());s.invert(),r.concat(s),n.addProp(t.Animator.TYPE_MATRIX,e,e.getMatrix,e.setMatrix,r)}}},t.ShapeAnimationUtils._getCurrentTransformationMatrix=function(e){for(var i=[e],n=e.getParent();n;)i.push(n),n=n.getParent();for(var o=new t.Matrix,r=0;r<i.length;r++){var s=i[r];o.concat(s.getMatrix())}return o},t.ShapeAnimationUtils.TransitionShapeToShapeUsingPaths=function(e,i,n){var o=t.ShapeAnimationUtils._convertShapeToPath(e),r=t.ShapeAnimationUtils._convertShapeToPath(i);if(!o||!r)return void t.ShapeAnimationUtils.TransitionShapeToShape(e,i,n);e!=o&&(t.ShapeAnimationUtils._replaceShape(e,o),e=o);var s=e.getFill?e.getFill():null,a=i.getFill?i.getFill():null;if(n){s&&a&&s instanceof t.SolidFill&&a instanceof t.SolidFill&&s.getColor()!=a.getColor()&&n.addProp(t.Animator.TYPE_FILL,e,e.getFill,e.setFill,a);var l=t.ShapeAnimationUtils._getCurrentTransformationMatrix(i);t.ShapeAnimationUtils._assimilatePaths(e,r,n,l)}},t.ShapeAnimationUtils._convertShapeToPath=function(e){if(e instanceof t.Path)return e;var i=t.ShapeAnimationUtils._getPathPoints(e);if(i){var n=new t.Path(e.getCtx(),i);return n}return null},t.ShapeAnimationUtils._replaceShape=function(t,e){var i=t.getFill(),n=t.getStroke(),o=t.getMatrix(),r=t.getParent().getChildIndex(t);t.getParent().addChildAt(e,r),t.setFill(null),t.setStroke(null),t.setMatrix(null),e.setFill(i),e.setStroke(n),e.setMatrix(o);for(var s=t.getNumChildren(),a=0;a<s;a++)e.addChild(t.getChildAt(0));t.getParent().removeChild(t),t.destroy&&t.destroy()},t.ShapeAnimationUtils._getPathPoints=function(e){var i;if(e instanceof t.Rect){var n=e.getRx(),o=e.getRy(),r=e.getX(),s=e.getY(),a=e.getWidth(),l=e.getHeight();if(n&&o){var h=.5*Math.PI,u=Math.cos(.5*h),d=Math.sin(.5*h),c=u,p=-d,_=(4-u)/3,g=(1-u)*(3-u)/(3*d),m=_,f=-g,y=new t.Point(u,d),v=new t.Point(c,p),S=new t.Point(_,g),C=new t.Point(m,f),E=new t.Matrix;E.rotate(.5*h),E.scale(n,o);var b=E.transformPoint(S),T=E.transformPoint(C),A=r+a-n,O=s+o;i=["M",r+n,s,"L",r+a-n,s,"C",A+b.x,O-b.y,A+T.x,O-T.y,r+a,s+o],O=s+l-o,i.push("L",r+a,s+l-o,"C",A+T.x,O+T.y,A+b.x,O+b.y,r+a-n,s+l),A=r+n,i.push("L",r+n,s+l,"C",A-b.x,O+b.y,A-T.x,O+T.y,r,s+l-o),O=s+o,i.push("L",r,s+o,"C",A-T.x,O-T.y,A-b.x,O-b.y,r+n,s,"Z")}else i=["M",r,s,"L",r+a,s,"L",r+a,s+l,"L",r,s+l,"Z"]}else if(e instanceof t.Polyline||e instanceof t.Polygon){var P=e.getPoints();if(P){i=[];for(var I=0;I<P.length;I+=2)0==I?i.push("M",P[I],P[I+1]):i.push("L",P[I],P[I+1]);e instanceof t.Polygon&&i.push("Z")}}else if(e instanceof t.Line)i=["M",e.getX1(),e.getY1(),"L",e.getX2(),e.getY2()];else if(e instanceof t.Circle){var A=e.getCx(),O=e.getCy(),n=0,o=0;e instanceof t.Oval?(n=e.getRx(),o=e.getRy()):(n=e.getRadius(),o=n);var D=4,x=-.5*Math.PI,h=2*Math.PI/D,u=Math.cos(.5*h),d=Math.sin(.5*h),c=u,p=-d,_=(4-u)/3,g=(1-u)*(3-u)/(3*d),m=_,f=-g,y=new t.Point(u,d),v=new t.Point(c,p),S=new t.Point(_,g),C=new t.Point(m,f);i=[];for(var I=0;I<D;I++){var E=new t.Matrix;if(E.rotate(x+I*h),E.scale(n,o),0==I){var M=E.transformPoint(v);i.push("M",A+M.x,O+M.y)}var L=E.transformPoint(C),R=E.transformPoint(S),w=E.transformPoint(y);i.push("C",A+L.x,O+L.y,A+R.x,O+R.y,A+w.x,O+w.y)}i.push("Z")}else if(e instanceof t.Arc){var N=e.getAngleStart()*t.Math.RADS_PER_DEGREE,U=e.getAngleExtent()*t.Math.RADS_PER_DEGREE,B=e.getCx()+e.getRx()*Math.cos(N),H=e.getCy()-e.getRy()*Math.sin(N),k=e.getCx()+e.getRx()*Math.cos(N+U),F=e.getCy()-e.getRy()*Math.sin(N+U),G=Math.abs(e.getAngleExtent())>180?"1":"0",j=e.getAngleExtent()>0?"0":"1";i=["M",B,H,"A",e.getRx(),e.getRy(),"0",G,j,k,F],e.getClosure()===t.Arc.CHORD?i.push("Z"):e.getClosure()===t.Arc.PIE&&i.push("L",e.getCx(),e.getCy(),"Z")}return i},t.ShapeAnimationUtils._getNextCommandIndex=function(t,e){for(;e<t.length&&!isNaN(t[e]);)e++;return e},t.ShapeAnimationUtils._getPrevCommandIndex=function(t,e){for(;e>-1&&!isNaN(t[e]);)e--;return e},t.ShapeAnimationUtils._countCommands=function(t){for(var e=0,i=0;i<t.length;i++)isNaN(t[i])&&e++;return e},t.ShapeAnimationUtils._makePathsSameLength=function(e,i){var n=t.ShapeAnimationUtils._countCommands(e),o=t.ShapeAnimationUtils._countCommands(i);if(n!=o){var r,s,a=0,l=0,h=0;n>o?(a=n-o,l=o,h=n,r=i,s=e):(a=o-n,l=n,h=o,r=e,s=i);var u=Math.floor(l/a);u<1&&(u=1);var d=Math.floor(a/l);d<1&&(d=1);for(var c=-1,p=0;p<r.length;p++)if(isNaN(r[p])){if(c==u){c=0;for(var _=0;_<d;_++)r.splice(p++,0,"tmp"),a--}c++}for(var p=0;p<a;p++)"Z"==r[r.length-1]?r.splice(r.length-1,0,"tmp"):r.push("tmp")}},t.ShapeAnimationUtils._modifyClosePath=function(t){return t.length>2&&"Z"==t[t.length-1]&&(t.splice(t.length-1,1),t.push("L",t[1],t[2]),!0)},t.ShapeAnimationUtils._assimilatePaths=function(e,i,n,o){var r=t.ShapeAnimationUtils.getAssimilatedPaths(e.getCommands(),i.getCommands()),s=t.ShapeAnimationUtils._getCurrentTransformationMatrix(e);s&&t.ShapeAnimationUtils._transformPathCoords(r.updatedOldPath,s),e.setMatrix(null);var a=o;a&&t.ShapeAnimationUtils._transformPathCoords(r.updatedNewPath,a),e.setCommands(r.updatedOldPath),n.addProp(t.Animator.TYPE_PATH,e,e.getCommands,e.setCommands,r.updatedNewPath)},t.ShapeAnimationUtils.getAssimilatedPaths=function(e,i){var n=t.ArrayUtils.copy(e),o=t.ArrayUtils.copy(i),r=[],s=[];t.ShapeAnimationUtils._makeImplicitCommandsExplicit(n),t.ShapeAnimationUtils._makeImplicitCommandsExplicit(o),t.ShapeAnimationUtils._makeRelativeCommandsAbsolute(n),t.ShapeAnimationUtils._makeRelativeCommandsAbsolute(o),t.ShapeAnimationUtils._makeShorthandCommandsVerbose(n),t.ShapeAnimationUtils._makeShorthandCommandsVerbose(o),t.ShapeAnimationUtils._makeSubpathsExplicit(n),t.ShapeAnimationUtils._makeSubpathsExplicit(o);var a=t.ShapeAnimationUtils._breakIntoSubpaths(n),l=t.ShapeAnimationUtils._breakIntoSubpaths(o);t.ShapeAnimationUtils._sortSubpaths(a),t.ShapeAnimationUtils._sortSubpaths(l);for(var h=0;h<Math.max(a.length,l.length);h++){var u=[],d=[],c=null,p=null;h<a.length?c=a[h]:(c=["M",n[1],n[2]],"Z"==l[h][l[h].length-1]&&c.push("Z")),h<l.length?p=l[h]:(p=["M",o[1],o[2]],"Z"==a[h][a[h].length-1]&&p.push("Z")),t.ShapeAnimationUtils._assimilateSubpaths(c,p,u,d),s=s.concat(u),r=r.concat(d)}return{updatedOldPath:s,updatedNewPath:r}},t.ShapeAnimationUtils._breakIntoSubpaths=function(t){for(var e=[],i=0,n=1;n<t.length;n++)"M"!=t[n]&&"m"!=t[n]||(e.push(t.slice(i,n)),i=n);return e.length<1?e.push(t):i<t.length&&e.push(t.slice(i)),e},t.ShapeAnimationUtils._sortSubpaths=function(e){e.sort(t.ShapeAnimationUtils._compareSubpaths)},t.ShapeAnimationUtils._compareSubpaths=function(e,i){var n=t.ShapeAnimationUtils._calcSubpathLength(e),o=t.ShapeAnimationUtils._calcSubpathLength(i);return n>o?-1:o>n?1:0},t.ShapeAnimationUtils._calcSubpathLength=function(e){for(var i=0,n=0,o=0,r=0,s=0,a=0,l=0,h=0;h<e.length;){var u=e[h];switch(u){case"M":s=e[h+1],a=e[h+2];break;case"L":i=e[h+1],n=e[h+2];break;case"C":i=e[h+5],n=e[h+6];break;case"Q":i=e[h+3],n=e[h+4];break;case"A":i=e[h+6],n=e[h+7];break;case"Z":i=s,n=a}l+=Math.sqrt((i-o)*(i-o)+(n-r)*(n-r)),h=t.ShapeAnimationUtils._getNextCommandIndex(e,h+1),o=i,r=n}return l},t.ShapeAnimationUtils._assimilateSubpaths=function(e,i,n,o){var r=t.ShapeAnimationUtils._modifyClosePath(e),s=t.ShapeAnimationUtils._modifyClosePath(i);(r||e[e.length-2]==e[1]&&e[e.length-1]==e[2])&&(e=t.ShapeAnimationUtils._makePathStartAtTopLeft(e),e=t.ShapeAnimationUtils._makePathClockwise(e)),(s||i[i.length-2]==i[1]&&i[i.length-1]==i[2])&&(i=t.ShapeAnimationUtils._makePathStartAtTopLeft(i),i=t.ShapeAnimationUtils._makePathClockwise(i)),t.ShapeAnimationUtils._makePathsSameLength(e,i),t.ShapeAnimationUtils._assimilatePathCommands(e,i,n,o),r&&e.push("Z"),s&&i.push("Z")},t.ShapeAnimationUtils._assimilatePathCommands=function(e,i,n,o){for(var r=0,s=0,a=0,l=0,h=0,u=0,d=!1,c=!1;r>-1||s>-1;){var p=r>-1?e[r]:null,_=s>-1?i[s]:null,g=r>-1?t.ShapeAnimationUtils._getNextCommandIndex(e,r+1):-1,m=s>-1?t.ShapeAnimationUtils._getNextCommandIndex(i,s+1):-1;if(p==_){for(var f=s;f<m;f++)o.push(i[f]);for(var f=r;f<g;f++)n.push(e[f])}else p&&"tmp"!=p?_&&"tmp"!=_?"L"==p?"Q"==_?(o.push("Q",i[s+1],i[s+2],i[s+3],i[s+4]),n.push("Q",a+.5*(e[r+1]-a),l+.5*(e[r+2]-l),e[r+1],e[r+2])):"C"==_?(o.push("C",i[s+1],i[s+2],i[s+3],i[s+4],i[s+5],i[s+6]),n.push("C",a+.5*(e[r+1]-a),l+.5*(e[r+2]-l),a+.5*(e[r+1]-a),l+.5*(e[r+2]-l),e[r+1],e[r+2])):"A"==_?(o.push("L",h,u,"A",i[s+1],i[s+2],i[s+3],i[s+4],i[s+5],i[s+6],i[s+7]),n.push("L",e[r+1],e[r+2],"A",0,0,i[s+3],i[s+4],i[s+5],e[r+1],e[r+2])):"Z"==_&&(d=!0,o.push("L",h,u),n.push("L",e[r+1],e[r+2])):"Q"==p?"L"==_?(o.push("Q",h+.5*(i[s+1]-h),u+.5*(i[s+2]-u),i[s+1],i[s+2]),n.push("Q",e[r+1],e[r+2],e[r+3],e[r+4])):"C"==_?(o.push("C",i[s+1],i[s+2],i[s+3],i[s+4],i[s+5],i[s+6]),n.push("C",e[r+1],e[r+2],e[r+1],e[r+2],e[r+3],e[r+4])):"A"==_?(o.push("Q",h,u,h,u,"A",i[s+1],i[s+2],i[s+3],i[s+4],i[s+5],i[s+6],i[s+7]),n.push("Q",e[r+1],e[r+2],e[r+3],e[r+4],"A",0,0,i[s+3],i[s+4],i[s+5],e[r+3],e[r+4])):"Z"==_&&(d=!0,o.push("Q",h,u,h,u),n.push("Q",e[r+1],e[r+2],e[r+3],e[r+4])):"C"==p?"L"==_?(o.push("C",h+.5*(i[s+1]-h),u+.5*(i[s+2]-u),h+.5*(i[s+1]-h),u+.5*(i[s+2]-u),i[s+1],i[s+2]),n.push("C",e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],e[r+6])):"Q"==_?(o.push("C",i[s+1],i[s+2],i[s+1],i[s+2],i[s+3],i[s+4]),n.push("C",e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],e[r+6])):"A"==_?(o.push("C",h,u,h,u,h,u,"A",i[s+1],i[s+2],i[s+3],i[s+4],i[s+5],i[s+6],i[s+7]),n.push("C",e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],e[r+6],"A",0,0,i[s+3],i[s+4],i[s+5],e[r+5],e[r+6])):"Z"==_&&(d=!0,o.push("C",h,u,h,u,h,u),n.push("C",e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],e[r+6])):"A"==p?"L"==_?(o.push("L",i[s+1],i[s+2],"A",0,0,e[r+3],e[r+4],e[r+5],i[s+1],i[s+2]),n.push("L",a,l,"A",e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],e[r+6],e[r+7])):"Q"==_?(o.push("Q",i[s+1],i[s+2],i[s+3],i[s+4],"A",0,0,e[r+3],e[r+4],e[r+5],i[s+3],i[s+4]),n.push("Q",a,l,a,l,"A",e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],e[r+6],e[r+7])):"C"==_?(o.push("C",i[s+1],i[s+2],i[s+3],i[s+4],i[s+5],i[s+6],"A",0,0,e[r+3],e[r+4],e[r+5],i[s+5],i[s+6]),n.push("C",a,l,a,l,a,l,"A",e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],e[r+6],e[r+7])):"Z"==_&&(d=!0,o.push("A",0,0,e[r+3],e[r+4],e[r+5],h,u),n.push("A",e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],e[r+6],e[r+7])):"Z"==p&&(c=!0,"L"==_?(o.push("L",i[s+1],i[s+2]),n.push("L",a,l)):"Q"==_?(o.push("Q",i[s+1],i[s+2],i[s+3],i[s+4]),n.push("Q",a,l,a,l)):"C"==_?(o.push("C",i[s+1],i[s+2],i[s+3],i[s+4],i[s+5],i[s+6]),n.push("C",a,l,a,l,a,l)):"A"==_&&(o.push("A",i[s+1],i[s+2],i[s+3],i[s+4],i[s+5],i[s+6],i[s+7]),n.push("A",0,0,i[s+3],i[s+4],i[s+5],a,l))):"L"==p?(o.push("L",h,u),n.push("L",e[r+1],e[r+2])):"Q"==p?(o.push("Q",h,u,h,u),n.push("Q",e[r+1],e[r+2],e[r+3],e[r+4])):"C"==p?(o.push("C",h,u,h,u,h,u),n.push("C",e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],e[r+6])):"A"==p?(o.push("A",0,0,e[r+3],e[r+4],e[r+5],h,u),n.push("A",e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],e[r+6],e[r+7])):"Z"==p&&(o.push("Z"),n.push("Z")):"L"==_?(o.push("L",i[s+1],i[s+2]),n.push("L",a,l)):"Q"==_?(o.push("Q",i[s+1],i[s+2],i[s+3],i[s+4]),n.push("Q",a,l,a,l)):"C"==_?(o.push("C",i[s+1],i[s+2],i[s+3],i[s+4],i[s+5],i[s+6]),n.push("C",a,l,a,l,a,l)):"A"==_?(o.push("A",i[s+1],i[s+2],i[s+3],i[s+4],i[s+5],i[s+6],i[s+7]),n.push("A",0,0,i[s+3],i[s+4],i[s+5],a,l)):"Z"==_&&(o.push("Z"),n.push("Z"));g>-1&&"Z"!=p&&"tmp"!=p&&(a=e[g-2],l=e[g-1]),m>-1&&"Z"!=_&&"tmp"!=_&&(h=i[m-2],u=i[m-1]),r=g,s=m,(r>=e.length||r<0)&&(r=-1),(s>=i.length||s<0)&&(s=-1)}(c||d)&&(o.push("Z"),n.push("Z"))},t.ShapeAnimationUtils._makePathClockwise=function(e){var i=t.ShapeAnimationUtils._isPathClockwise(e);if(!i){for(var n=["M"],o=t.ShapeAnimationUtils._getPrevCommandIndex(e,e.length-1);o>-1;){var r=e[o];switch(r){case"M":n.push(e[o+1],e[o+2]);break;case"L":n.push(e[o+1],e[o+2]),n.push(r);break;case"Q":n.push(e[o+3],e[o+4]),n.push(r),n.push(e[o+1],e[o+2]);break;case"C":n.push(e[o+5],e[o+6]),n.push(r),n.push(e[o+3],e[o+4]),n.push(e[o+1],e[o+2]);break;case"A":n.push(e[o+6],e[o+7]),n.push(r),n.push(e[o+1],e[o+2],e[o+3],e[o+4]),n.push(0==e[o+5]?1:0)}o=t.ShapeAnimationUtils._getPrevCommandIndex(e,o-1)}return n}return e},t.ShapeAnimationUtils._isPathClockwise=function(e){for(var i=[],n=0,o=Number.MAX_VALUE,r=Number.MAX_VALUE,s=t.ShapeAnimationUtils._getPrevCommandIndex(e,e.length-1),a=1;a<s;){var l=t.ShapeAnimationUtils._getNextCommandIndex(e,a);if(l-2>0&&"Z"!=e[l-1]){var h=e[l-2],u=e[l-1];i.push(h,u),(u<r||u==r&&h<o)&&(o=h,r=u,n=i.length-2)}a=l+1}var d=0,c=0,p=o,_=r,g=0,m=0;n>0?(d=i[n-2],c=i[n-1]):(d=i[i.length-2],c=i[i.length-1]),n<i.length-2?(g=i[n+2],m=i[n+3]):(g=i[0],m=i[1]);var f=p*m+d*_+c*g-(c*p+_*g+d*m);return!(f<0)},t.ShapeAnimationUtils._makePathStartAtTopLeft=function(e){for(var i=0,n=Number.MAX_VALUE,o=Number.MAX_VALUE,r=0,s=t.ShapeAnimationUtils._getPrevCommandIndex(e,e.length-1),a=1;a<s;){var l=t.ShapeAnimationUtils._getNextCommandIndex(e,a);if(l-2>0&&"Z"!=e[l-1]){var h=e[l-2],u=e[l-1];(u<o||u==o&&h<n)&&(n=h,o=u,i=r)}a=l+1,r=l}if(i>0){var l=t.ShapeAnimationUtils._getNextCommandIndex(e,i+1),d=["M"],c=e.slice(l-2,e.length);return d=d.concat(c),c=e.slice(3,l),d=d.concat(c)}return e},t.ShapeAnimationUtils._getNumParamsForCommand=function(t){switch(t){case"H":case"h":case"V":case"v":return 1;case"M":case"m":case"L":case"l":case"T":case"t":return 2;case"Q":case"q":case"S":case"s":return 4;case"C":case"c":return 6;
case"A":case"a":return 7}return 0},t.ShapeAnimationUtils._makeImplicitCommandsExplicit=function(e){for(var i=0;i<e.length;){var n=e[i],o=t.ShapeAnimationUtils._getNumParamsForCommand(n);switch(n){case"M":i+o+1<e.length&&!isNaN(e[i+o+1])&&e.splice(i+o+1,0,"L");break;case"m":i+o+1<e.length&&!isNaN(e[i+o+1])&&e.splice(i+o+1,0,"l");break;case"Z":case"z":break;default:i+o+1<e.length&&!isNaN(e[i+o+1])&&e.splice(i+o+1,0,n)}i+=o+1}},t.ShapeAnimationUtils._makeRelativeCommandsAbsolute=function(e){for(var i=0,n=0,o=0,r=0,s=0;s<e.length;){var a=e[s];switch(a){case"m":e[s]="M",s>0&&(e[s+1]=i+e[s+1],e[s+2]=n+e[s+2]),i=e[s+1],n=e[s+2],o=i,r=n;break;case"l":e[s]="L",e[s+1]=i+e[s+1],e[s+2]=n+e[s+2],i=e[s+1],n=e[s+2];break;case"h":e[s]="H",e[s+1]=i+e[s+1],i=e[s+1];break;case"v":e[s]="V",e[s+1]=n+e[s+1],n=e[s+1];break;case"c":e[s]="C",e[s+1]=i+e[s+1],e[s+2]=n+e[s+2],e[s+3]=i+e[s+3],e[s+4]=n+e[s+4],e[s+5]=i+e[s+5],e[s+6]=n+e[s+6],i=e[s+5],n=e[s+6];break;case"s":e[s]="S",e[s+1]=i+e[s+1],e[s+2]=n+e[s+2],e[s+3]=i+e[s+3],e[s+4]=n+e[s+4],i=e[s+3],n=e[s+4];break;case"q":e[s]="Q",e[s+1]=i+e[s+1],e[s+2]=n+e[s+2],e[s+3]=i+e[s+3],e[s+4]=n+e[s+4],i=e[s+3],n=e[s+4];break;case"t":e[s]="T",e[s+1]=i+e[s+1],e[s+2]=n+e[s+2],i=e[s+1],n=e[s+2];break;case"a":e[s]="A",e[s+6]=i+e[s+6],e[s+7]=n+e[s+7],i=e[s+6],n=e[s+7];break;case"z":e[s]="Z",i=o,n=r;break;case"M":i=e[s+1],n=e[s+2],o=i,r=n;break;case"L":i=e[s+1],n=e[s+2];break;case"H":i=e[s+1];break;case"V":n=e[s+1];break;case"C":i=e[s+5],n=e[s+6];break;case"S":i=e[s+3],n=e[s+4];break;case"Q":i=e[s+3],n=e[s+4];break;case"T":i=e[s+1],n=e[s+2];break;case"A":i=e[s+6],n=e[s+7];break;case"Z":i=o,n=r}s=t.ShapeAnimationUtils._getNextCommandIndex(e,s+1)}},t.ShapeAnimationUtils._makeShorthandCommandsVerbose=function(e){for(var i=0,n=0,o=0,r=0,s=0;s<e.length;){var a=e[s];switch(a){case"M":i=e[s+1],n=e[s+2],o=i,r=n;break;case"L":i=e[s+1],n=e[s+2];break;case"H":i=e[s+1],e[s]="L",e.splice(s+2,0,n);break;case"V":n=e[s+1],e[s]="L",e.splice(s+1,0,i);break;case"C":i=e[s+5],n=e[s+6];break;case"S":var l=t.ShapeAnimationUtils._getPrevCommandIndex(e,s-1),h=i,u=n;if("C"==e[l]){var d=e[l+3],c=e[l+4];h=i+(i-d),u=n+(n-c)}e[s]="C",e.splice(s+1,0,h,u),i=e[s+5],n=e[s+6];break;case"Q":i=e[s+3],n=e[s+4];break;case"T":var l=t.ShapeAnimationUtils._getPrevCommandIndex(e,s-1),p=i,_=n;if("Q"==e[l]){var g=e[l+1],m=e[l+2];p=i+(i-g),_=n+(n-m)}e[s]="Q",e.splice(s+1,0,p,_),i=e[s+3],n=e[s+4];break;case"A":i=e[s+6],n=e[s+7];break;case"Z":i=o,n=r}s=t.ShapeAnimationUtils._getNextCommandIndex(e,s+1)}},t.ShapeAnimationUtils._makeSubpathsExplicit=function(t){for(var e=0,i=0,n=0;n<t.length;n++)"Z"==t[n]?n+1<t.length&&"M"!=t[n+1]&&"m"!=t[n+1]&&t.splice(n+1,0,"M",e,i):"M"==t[n]&&(e=t[n+1],i=t[n+2])},t.ShapeAnimationUtils._transformPathCoords=function(e,i){for(var n=null,o=0;o<e.length;){var r=e[o];switch(r){case"M":case"L":n=i.transformPoint(new t.Point(e[o+1],e[o+2])),e[o+1]=n.x,e[o+2]=n.y;break;case"Q":n=i.transformPoint(new t.Point(e[o+1],e[o+2])),e[o+1]=n.x,e[o+2]=n.y,n=i.transformPoint(new t.Point(e[o+3],e[o+4])),e[o+3]=n.x,e[o+4]=n.y;break;case"C":n=i.transformPoint(new t.Point(e[o+1],e[o+2])),e[o+1]=n.x,e[o+2]=n.y,n=i.transformPoint(new t.Point(e[o+3],e[o+4])),e[o+3]=n.x,e[o+4]=n.y,n=i.transformPoint(new t.Point(e[o+5],e[o+6])),e[o+5]=n.x,e[o+6]=n.y;break;case"A":var s=i.transformPoint(new t.Point(0,0)),a=i.transformPoint(new t.Point(e[o+1],0)),l=i.transformPoint(new t.Point(0,e[o+2])),h=Math.sqrt((a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y)),u=Math.sqrt((l.x-s.x)*(l.x-s.x)+(l.y-s.y)*(l.y-s.y));e[o+1]=h,e[o+2]=u,n=i.transformPoint(new t.Point(e[o+6],e[o+7])),e[o+6]=n.x,e[o+7]=n.y}o=t.ShapeAnimationUtils._getNextCommandIndex(e,o+1)}},t.BaseDiagram=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.BaseDiagram,t.PanZoomComponent,"dvt.BaseDiagram"),t.BaseDiagram.prototype.Init=function(e,i,n){t.BaseDiagram.superclass.Init.call(this,e,i,n),this.getCtx().getStage().getElem().setAttributeNS(null,"text-rendering","geometricPrecision"),this._layoutOffset,this._layoutViewport=null,this._layoutViewportContainerId=null,this._initAnim,this._bInitAnimEnabled=!0,this._linksPane=new t.Container(e),this._nodesPane=new t.Container(e),this._topPane=new t.Container(e),this._animationDuration=t.PanZoomCanvas.DEFAULT_ANIMATION_DURATION,this.InitializeZoomLimits()},t.BaseDiagram.prototype.InitComponentInternal=function(){var t=this.getPanZoomCanvas();t.setMinZoom(this.getMinZoom()),t.setMaxZoom(this.getMaxZoom()),t.setAnimationDuration(this.getAnimationDuration()),t.getContentPane().addChild(this._linksPane),t.getContentPane().addChild(this._nodesPane),t.getContentPane().addChild(this._topPane)},t.BaseDiagram.prototype.setAnimationDuration=function(t){this._animationDuration=t,this.getPanZoomCanvas()&&this.getPanZoomCanvas().setAnimationDuration(t)},t.BaseDiagram.prototype.getAnimationDuration=function(){return this._animationDuration},t.BaseDiagram.prototype.setMaxZoom=function(t){this._maxZoom=t,this.getPanZoomCanvas()&&this.getPanZoomCanvas().setMaxZoom(t)},t.BaseDiagram.prototype.getMaxZoom=function(){return this._maxZoom},t.BaseDiagram.prototype.setMinZoom=function(t){this._minZoom=t,this.getPanZoomCanvas()&&this.getPanZoomCanvas().setMinZoom(t)},t.BaseDiagram.prototype.getMinZoom=function(){return this._minZoom},t.BaseDiagram.prototype.InitializeZoomLimits=function(){this.setMaxZoom(2),this.setMinZoom(0)},t.BaseDiagram.prototype.getNodeById=function(t){return null},t.BaseDiagram.prototype.getLinkById=function(t){return null},t.BaseDiagram.prototype.GetAllLinks=function(){return[]},t.BaseDiagram.prototype.GetAllNodes=function(){return[]},t.BaseDiagram.prototype.getNodeCount=function(){return this.GetAllNodes().length},t.BaseDiagram.prototype.getLinkCount=function(){return this.GetAllLinks().length},t.BaseDiagram.prototype.RefreshEmptyText=function(e){if(e&&this.getEmptyText())this._emptyTextDisplay?(this._emptyTextDisplay.setX(this.Width/2),this._emptyTextDisplay.setY(this.Height/2),t.TextUtils.fitText(this._emptyTextDisplay,this.getWidth()-2*t.TextUtils.EMPTY_TEXT_BUFFER,1/0,this)):this._emptyTextDisplay=this.CreateEmptyText(this.getEmptyText());else if(this._emptyTextDisplay){var i=this._emptyTextDisplay.getParent();i&&i.removeChild(this._emptyTextDisplay),this._emptyTextDisplay=null}},t.BaseDiagram.prototype.CreateEmptyText=function(e){var i=this.getOptions();return t.TextUtils.renderEmptyText(this,e,new t.Rectangle(0,0,this.getWidth(),this.getHeight()),this.getEventManager(),i._statusMessageStyle)},t.BaseDiagram.prototype.setEmptyText=function(t){this._emptyText=t},t.BaseDiagram.prototype.getEmptyText=function(){return this._emptyText},t.BaseDiagram.prototype.SetPanningEnabled=function(t){this._panningEnabled=t},t.BaseDiagram.prototype.IsPanningEnabled=function(){return this._panningEnabled},t.BaseDiagram.prototype.setPanDirection=function(t){this._panDirection=t,this.getPanZoomCanvas()&&this.getPanZoomCanvas().setPanDirection(t)},t.BaseDiagram.prototype.getPanDirection=function(){return this._panDirection},t.BaseDiagram.prototype.SetZoomingEnabled=function(t){this._zoomingEnabled=t},t.BaseDiagram.prototype.IsZoomingEnabled=function(){return this._zoomingEnabled},t.BaseDiagram.prototype.setInitAnim=function(t){this._initAnim=t},t.BaseDiagram.prototype.getInitAnim=function(){return this._initAnim},t.BaseDiagram.prototype.setInitAnimEnabled=function(t){this._bInitAnimEnabled=t},t.BaseDiagram.prototype.IsInitAnimEnabled=function(){return this._bInitAnimEnabled},t.BaseDiagram.prototype.setDataChangeAnim=function(t){this._dataChangeAnim=t},t.BaseDiagram.prototype.getDataChangeAnim=function(){return this._dataChangeAnim},t.BaseDiagram.prototype.getSelectionHandler=function(){return this._selectionHandler},t.BaseDiagram.prototype.setSelectionMode=function(e){"single"==e?this._selectionHandler=new t.SelectionHandler(t.SelectionHandler.TYPE_SINGLE):"multiple"==e?this._selectionHandler=new t.SelectionHandler(t.SelectionHandler.TYPE_MULTIPLE):this._selectionHandler=null,this.getEventManager().setSelectionHandler(this._selectionHandler)},t.BaseDiagram.prototype.getSelectionMode=function(){return this._selectionHandler?this._selectionHandler.getType():null},t.BaseDiagram.prototype.isSelectionSupported=function(){return!!this._selectionHandler},t.BaseDiagram.prototype.getNodesPane=function(){return this._nodesPane},t.BaseDiagram.prototype.setNodesPane=function(t){this._nodesPane=t},t.BaseDiagram.prototype.getLinksPane=function(){return this._linksPane},t.BaseDiagram.prototype.setLinksPane=function(t){this._linksPane=t},t.BaseDiagram.prototype.getTopPane=function(){return this._topPane},t.BaseDiagram.prototype.setTopPane=function(t){this._topPane=t},t.BaseDiagram.prototype.CreateEmptyLayoutContext=function(){var i=new e;return i.setLocaleR2L(t.Agent.isRightToLeft(this.getCtx())),i.setComponentSize(new t.DiagramRectangle(0,0,this.getWidth(),this.getHeight())),i},t.BaseDiagram.prototype.CreateLayoutContextNode=function(e,i,o,r){var s=new n;s.setId(e.getId?e.getId():e.getData().getId()),s.setBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(e.getLayoutBounds())),s.setContentBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(e.getContentBounds()));var a=e.getLayoutAttributes?e.getLayoutAttributes(i):e.getData()._origData;return s.setLayoutAttributes(a),s.setData(a),s.setLabelBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(e.getLabelBounds())),s.setLabelPosition(t.DiagramLayoutUtils.convertPointToDiagramPoint(e.getLabelPosition())),s.setSelected(1==e.isSelected()),e.isDisclosed()&&(s.setDisclosed(!0),s.SetContainerPaddingObj(t.BaseDiagram.getLayoutContainerPadding(e.getContainerPadding()))),s.setContainerId(e.getGroupId()),s.Component=this,s.IsRendered=!o,s.LayoutContext=r,s},t.BaseDiagram.prototype.CreateLayoutContextLink=function(e,n,o,r,s){var a=new i;a.setId(e.getId?e.getId():e.getData().getId()),a.setStartId(n?n:e.getData().getStartId()),a.setEndId(o?o:e.getData().getEndId());var l=e.getLayoutAttributes?e.getLayoutAttributes(r):e.isPromoted()?e.getData()._links:e.getData()._origData;return a.setLayoutAttributes(l),a.setData(l),a.setLabelBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(e.getLabelBounds())),a.setLabelPosition(t.DiagramLayoutUtils.convertPointToDiagramPoint(e.getLabelPosition())),a.setStartConnectorOffset(e.getStartConnectorOffset()),a.setEndConnectorOffset(e.getEndConnectorOffset()),a.setLinkWidth(e.getLinkWidth()),a.setSelected(1==e.isSelected()),a.setPromoted(1==e.isPromoted()),a.LayoutContext=s,a},t.BaseDiagram.prototype.ApplyLayoutContext=function(e,i,n){var o=e.getContainerPadding();if(o){var r=e.getContainerId();if(r){var s=this.getNodeById(r);s&&s.setContainerPadding(t.BaseDiagram.getContainerPadding(o),i)}}for(var a=Number.MAX_VALUE,l=Number.MAX_VALUE,h=0;h<e.getNodeCount();h++){var u=e.getNodeByIndex(h),d=this.getNodeById(u.getId()),c=u.getPosition();c&&(a=Math.min(a,c.x),l=Math.min(l,c.y));var p=u.getLabelBounds(),_=u.getLabelPosition();p&&_&&(a=Math.min(a,_.x+p.x),l=Math.min(l,_.y+p.y))}for(var g=0;g<e.getLinkCount();g++){var m=e.getLinkByIndex(g),f=this.getLinkById(m.getId()),y=m.getPoints();if(y)for(var v=t.DiagramLinkUtils.GetControlPoints(y),S=0;S<v.length;S++){var C=v[S];a=Math.min(a,C.x),l=Math.min(l,C.y)}var p=m.getLabelBounds(),_=m.getLabelPosition();p&&_&&(a=Math.min(a,_.x+p.x),l=Math.min(l,_.y+p.y))}for(var E=this.CalcLayoutOffset(-a,-l),b=E.x,T=E.y,h=0;h<e.getNodeCount();h++){var u=e.getNodeByIndex(h);u.ContentOffset=new t.DiagramPoint(E.x,E.y);var d=this.getNodeById(u.getId()),c=u.getPosition();if(c&&d.SetPosition(c.x+b,c.y+T,i),this.ApplyLabelPosition(u,d,t.DiagramLayoutUtils.convertDiagramPointToPoint(c),i),d.isDisclosed()){var A=u.getContainerPadding();A&&d.setContainerPadding(t.BaseDiagram.getContainerPadding(A),i)}}if(!this._bCrossedZoomThreshold)for(var g=0;g<e.getLinkCount();g++){var m=e.getLinkByIndex(g),f=this.getLinkById(m.getId()),O=this.GetLinkTranslationOffset(f,m,E,i),P=O.x,I=O.y,y=m.getPoints();if(y){y.length>0&&!isNaN(y[0])&&(y=t.DiagramLinkUtils.ConvertToPath(y));for(var D=[],S=0;S<y.length;)isNaN(y[S])?(D.push(y[S]),S++):(D.push(y[S]+P),D.push(y[S+1]+I),S+=2);if(i&&f.getPoints())if(D.length>0&&isNaN(D[0])){var x=t.ShapeAnimationUtils.getAssimilatedPaths(f.getPoints(),D);f.setPoints(x.updatedOldPath),i.addProp(t.Animator.TYPE_PATH,f,f.getPoints,f.setPoints,x.updatedNewPath),t.Playable.appendOnEnd(i,function(){f.setPoints(D)})}else i.addProp(t.Animator.TYPE_POLYLINE,f,f.getPoints,f.setPoints,D);else f.setPoints(D)}this.ApplyLabelPosition(m,f,new t.Point(-P,-I),i)}var M=e.getViewport();M&&(this._layoutViewport=new t.Rectangle(M.x+b,M.y+T,M.w,M.h),this._layoutViewportContainerId=e.getContainerId()),n&&(this._layoutOffset=new t.Point(b,T))},t.BaseDiagram.prototype.GetLinkTranslationOffset=function(e,i,n,o){var r=new t.Point(0,0);if(e.getGroupId()){if(e.getGroupId()!=i.getCoordinateSpace()){for(var s=i.getCoordinateSpace(),a=this.getNodeById(e.getGroupId());a;){var l=a.getContainerPadding();r.x-=l.left-a.GetPosition(o).x,r.y-=l.top-a.GetPosition(o).y;var h=a.getGroupId();a=h!=s?this.getNodeById(h):null}s||(r.x+=n.x,r.y+=n.y)}}else r=n;return r},t.BaseDiagram.prototype.GetLayoutViewport=function(e){var i;if(this._layoutViewport&&(i=new t.Rectangle(this._layoutViewport.x,this._layoutViewport.y,this._layoutViewport.w,this._layoutViewport.h),this._layoutViewportContainerId))for(var n=this.getNodeById(this._layoutViewportContainerId);n;){var o=n.getTranslateX(),r=n.getTranslateY();if(e){var s=e.getDestVal(n,n.getTranslateX),a=e.getDestVal(n,n.getTranslateY);(s||0==s)&&(o=s),(a||0==a)&&(r=a)}i.x+=o,i.y+=r;var l=n.getGroupId();n=l?this.getNodeById(l):null}return i},t.BaseDiagram.prototype.IsLayoutViewport=function(){return!!this._layoutViewport},t.BaseDiagram.prototype.ClearLayoutViewport=function(){this._layoutViewport=null,this._layoutViewportContainerId=null},t.BaseDiagram.prototype.CalcLayoutOffset=function(e,i){return new t.Point(e,i)},t.BaseDiagram.prototype.AdjustMinZoom=function(t,e){if(0==this.getMinZoom()){var i=this.getPanZoomCanvas(),n=e?e:this.GetViewBounds(t),o=this.CalculateMinimumScale(n);return i.setMinZoom(this.GetMinZoomFactor()*Math.min(o,i.getMaxZoom())),n}return null},t.BaseDiagram.prototype.GetMinZoomFactor=function(){return 1},t.BaseDiagram.prototype.CalculateMinimumScale=function(t){if(!t)return 0;var e=this.getPanZoomCanvas(),i=(this.Width-2*e.getZoomToFitPadding())/t.w,n=(this.Height-2*e.getZoomToFitPadding())/t.h,o=Math.min(i,n);return o},t.BaseDiagram.prototype.GetViewBounds=function(t,e,i){return this.CalcViewBounds(t,e,i)},t.BaseDiagram.prototype.CalcViewBounds=function(e,i,n){var o,r,s,a,l,h,u,d,c,p,_,g,m,f,y,v=null,S=this.getPanZoomCanvas().getContentPane();i||(i=this.GetAllNodes());for(var C=0;C<i.length;C++)if(l=i[C],a=this.getNodeById(l),a&&a.getVisible()&&!a.isHiddenAncestor()){o=a.GetNodeBounds(e),r=null,s=null,e&&(r=e.getDestVal(a,a.getTranslateX),s=e.getDestVal(a,a.getTranslateY)),null==r&&(r=a.getTranslateX()),null==s&&(s=a.getTranslateY()),o.x+=r,o.y+=s;var E=a.getGroupId();E&&(f=a.getParent(),p=this.LocalToStage(new t.Point(o.x,o.y),f,e),_=this.StageToLocal(p,S,e),g=this.LocalToStage(new t.Point(o.x+o.w,o.y+o.h),f,e),m=this.StageToLocal(g,S,e),o.x=_.x,o.y=_.y,o.w=m.x-_.x,o.h=m.y-_.y),v?(d=v.x,c=v.y,v.x=Math.min(v.x,o.x),v.y=Math.min(v.y,o.y),v.w=Math.max(d+v.w,o.x+o.w)-v.x,v.h=Math.max(c+v.h,o.y+o.h)-v.y):v=o}n||(n=this.GetAllLinks());for(var C=0;C<n.length;C++)if(u=n[C],h=this.getLinkById(u),h&&h.getVisible()){o=h.GetLinkBounds(e);var E=h.getGroupId();E&&(y=h.getParent(),p=this.LocalToStage(new t.Point(o.x,o.y),y,e),_=this.StageToLocal(p,S,e),g=this.LocalToStage(new t.Point(o.x+o.w,o.y+o.h),y,e),m=this.StageToLocal(g,S,e),o.x=_.x,o.y=_.y,o.w=m.x-_.x,o.h=m.y-_.y),v?(d=v.x,c=v.y,v.x=Math.min(v.x,o.x),v.y=Math.min(v.y,o.y),v.w=Math.max(d+v.w,o.x+o.w)-v.x,v.h=Math.max(c+v.h,o.y+o.h)-v.y):v=o}return v},t.BaseDiagram.RotateBounds=function(e,i,n){if(null==i&&!n)return e;var o=new t.Point(e.x,e.y),r=new t.Point(e.x+e.w,e.y),s=new t.Point(e.x,e.y+e.h),a=new t.Point(e.x+e.w,e.y+e.h),l=new t.Matrix;null!=i&&(n&&l.translate(-n.x,-n.y),l.rotate(i),n&&l.translate(n.x,n.y));var h=l.transformPoint(o),u=l.transformPoint(r),d=l.transformPoint(s),c=l.transformPoint(a),p=Math.min(Math.min(h.x,u.x),Math.min(d.x,c.x)),_=Math.max(Math.max(h.x,u.x),Math.max(d.x,c.x)),g=Math.min(Math.min(h.y,u.y),Math.min(d.y,c.y)),m=Math.max(Math.max(h.y,u.y),Math.max(d.y,c.y));return new t.Rectangle(p,g,_-p,m-g)},t.BaseDiagram.prototype.StageToLocal=function(t,e,i){for(var n,o=e.getPathToStage(),r=t,s=o.length-1;s>=0;s--){e=o[s],n=e.getMatrix().clone();var a=null,l=null;i&&(a=i.getDestVal(e,e.getTranslateX),l=i.getDestVal(e,e.getTranslateY)),null!=a&&(n._tx=a),null!=l&&(n._ty=l),n.invert(),r=n.transformPoint(r)}return r},t.BaseDiagram.prototype.LocalToStage=function(t,e,i){for(var n,o=e.getPathToStage(),r=t,s=0;s<o.length;s++){e=o[s],n=e.getMatrix().clone();var a=null,l=null;i&&(a=i.getDestVal(e,e.getTranslateX),l=i.getDestVal(e,e.getTranslateY)),null!=a&&(n._tx=a),null!=l&&(n._ty=l),r=n.transformPoint(r)}return r},t.BaseDiagram.prototype.ConstrainPanning=function(t,e,i,n,o){var r=this.getPanZoomCanvas(),s=r.getSize().w/2,a=r.getSize().h/2,l=s-(i+t)*o,h=a-(n+e)*o,u=s-t*o,d=a-e*o;if(this.IsLayoutViewport()){var c,p,_=this.GetLayoutViewport();-_.x*o<l?(c=l+_.x*o,l-=c,u+=c):-_.x*o>u&&(c=-_.x*o-u,l-=c,u+=c),-_.y*o<h?(p=h+_.y*o,h-=p,d+=p):-_.y*o>d&&(p=-_.y*o-d,h-=p,d+=p)}r.setMinPanX(l),r.setMinPanY(h),r.setMaxPanX(u),r.setMaxPanY(d)},t.BaseDiagram.prototype.moveToDiagramFront=function(t){this._topPane.addChild(t)},t.BaseDiagram.prototype.moveToLinks=function(t){this._linksPane.addChild(t)},t.BaseDiagram.prototype.moveToNodes=function(t){this._nodesPane.addChild(t)},t.BaseDiagram.getContainerPadding=function(t){var e=new Object;return e.top=t.top,e.right=t.right,e.bottom=t.bottom,e.left=t.left,e},t.BaseDiagram.getLayoutContainerPadding=function(t){var e=new Object;return e.top=t.top,e.right=t.right,e.bottom=t.bottom,e.left=t.left,e},t.BaseDiagram.prototype.renderNodeFromContext=function(t){},t.BaseDiagram.prototype.UpdateNodeLayoutContext=function(e,i){var n=i.isDisclosed()?i.getContainerPadding():null;n&&e.setContainerPadding(n.top,n.right,n.bottom,n.left),e.setBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(i.getLayoutBounds())),e.setContentBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(i.getContentBounds())),e.setLabelBounds(t.DiagramLayoutUtils.convertRectToDiagramRect(i.getLabelBounds())),e.IsRendered=!0},t.BaseDiagram.prototype.ApplyLabelPosition=function(e,i,n,o){var r=e.getLabelBounds();r=t.DiagramLayoutUtils.convertDiagramRectToRect(r);var s=e.getLabelPosition();if(r&&s){var a=new t.Point(s.x-n.x,s.y-n.y),l=e.getLabelRotationAngle(),h=t.DiagramLayoutUtils.convertDiagramPointToPoint(e.getLabelRotationPoint());o?(o.addProp(t.Animator.TYPE_RECTANGLE,i,i.getLabelBounds,i.setLabelBounds,r),i.getLabelPosition()?o.addProp(t.Animator.TYPE_POINT,i,i.getLabelPosition,i.setLabelPosition,a):i.setLabelPosition(a),null!=l&&o.addProp(t.Animator.TYPE_NUMBER,i,i.getLabelRotationAngle,i.setLabelRotationAngle,l),h&&(i.getLabelRotationPoint()?o.addProp(t.Animator.TYPE_POINT,i,i.getLabelRotationPoint,i.setLabelRotationPoint,h):i.setLabelRotationPoint(h))):(i.setLabelBounds(r),i.setLabelPosition(a),i.setLabelAlignments(e.getLabelHalign(),e.getLabelValign()),null!=l&&i.setLabelRotationAngle(l),h&&i.setLabelRotationPoint(h))}},t.BaseDiagram.prototype.getLayoutOffset=function(){return this._layoutOffset?this._layoutOffset:new t.Point(0,0)},t.BaseDiagram.prototype.getCustomObjKeyboardBoundingBox=function(e){var i=e.getElem().getBoundingClientRect(),n=this.getPanZoomCanvas().getContentPane().getElem().getBoundingClientRect(),o=this.getPanZoomCanvas().getContentPane().getMatrix();return new t.Rectangle(i.left-n.left+o.getTx(),i.top-n.top+o.getTy(),i.width,i.height)},t.BaseDiagramKeyboardHandler=function(t,e){this.Init(t,e)},t.Obj.createSubclass(t.BaseDiagramKeyboardHandler,t.PanZoomCanvasKeyboardHandler,"dvt.BaseDiagramKeyboardHandler"),t.BaseDiagramKeyboardHandler._OUTGOING=0,t.BaseDiagramKeyboardHandler._INGOING=1,t.BaseDiagramKeyboardHandler.prototype.Init=function(e,i){t.BaseDiagramKeyboardHandler.superclass.Init.call(this,e,i),this._diagram=e},t.BaseDiagramKeyboardHandler.prototype.GetDiagram=function(){return this._diagram},t.BaseDiagramKeyboardHandler.prototype.isSelectionEvent=function(e){return e.keyCode!=t.KeyboardEvent.TAB&&(this.isNavigationEvent(e)&&!e.ctrlKey)},t.BaseDiagramKeyboardHandler.prototype.isMultiSelectEvent=function(e){return e.keyCode==t.KeyboardEvent.SPACE&&e.ctrlKey},t.BaseDiagramKeyboardHandler.prototype.getFirstNavigableLink=function(e,i,n){var o=i.keyCode;if(!n||n.length<1||!e)return null;for(var r=n[0],s=e.getKeyboardBoundingBox(),a=s.x+s.w/2,l=0;l<n.length;l++){var h=n[l],u=h.getKeyboardBoundingBox(),d=u.x+u.w/2;if(o==t.KeyboardEvent.OPEN_ANGLED_BRACKET&&d<=a||o==t.KeyboardEvent.CLOSE_ANGLED_BRACKET&&d>=a){r=h;break}}return r},t.BaseDiagramKeyboardHandler.prototype.getNextNavigableLink=function(e,i,n,o){if(!o)return null;if(!i)return o[0];if(!e)return i;this._addSortingAttributes(e,o),o.sort(this._getLinkComparator()),this._removeSortingAttributes(o);for(var r=n.keyCode==t.KeyboardEvent.DOWN_ARROW,s=0,a=0;a<o.length;a++){var l=o[a];if(l===i){s=r?a==o.length-1?0:a+1:0==a?o.length-1:a-1;break}}return o[s]},t.BaseDiagramKeyboardHandler.prototype.GetVisibleNode=function(t){return null},t.BaseDiagramKeyboardHandler.prototype._getClockwiseAngle=function(t,e){var i=this.GetVisibleNode(e.getStartId?e.getStartId():e.getData().getStartId()),n=this.GetVisibleNode(e.getEndId?e.getEndId():e.getData().getEndId()),o=t==i?n:i,r=this._getNodeCenter(t),s=this._getNodeCenter(o),a=Math.atan2(s.y-r.y,s.x-r.x);return a=a<0?a+2*Math.PI:a},t.BaseDiagramKeyboardHandler.prototype._getNodeCenter=function(e){var i=e.getKeyboardBoundingBox();return new t.Point(i.x+i.w/2,i.y+i.h/2)},t.BaseDiagramKeyboardHandler.prototype._getNodesDistance=function(t){var e=this.GetVisibleNode(t.getStartId?t.getStartId():t.getData().getStartId()),i=this.GetVisibleNode(t.getEndId?t.getEndId():t.getData().getEndId()),n=this._getNodeCenter(e),o=this._getNodeCenter(i);return Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2))},t.BaseDiagramKeyboardHandler.prototype._getLinkDirection=function(e,i){return e==this.GetVisibleNode(i.getEndId?i.getEndId():i.getData().getEndId())?t.BaseDiagramKeyboardHandler._INGOING:t.BaseDiagramKeyboardHandler._OUTGOING},t.BaseDiagramKeyboardHandler.prototype._getLinkComparator=function(){var e=function(e,i){var n=e.__angle,o=i.__angle,r=-1;return!t.BaseDiagramKeyboardHandler._anglesAreEqualWithinTolerance(n,o)&&n>o?r=1:t.BaseDiagramKeyboardHandler._anglesAreEqualWithinTolerance(n,o)&&(e.__distance>i.__distance?r=1:i.__distance==e.__distance&&e.__direction>i.__direction?r=1:i.__distance==e.__distance&&e.__direction==i.__direction&&(r=0)),r};return e},t.BaseDiagramKeyboardHandler.prototype._removeSortingAttributes=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.__angle=void 0,i.__distance=void 0,i.__direction=void 0}},t.BaseDiagramKeyboardHandler.prototype._addSortingAttributes=function(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.__angle=this._getClockwiseAngle(t,n),n.__distance=this._getNodesDistance(n),n.__direction=this._getLinkDirection(t,n)}},t.BaseDiagramKeyboardHandler._anglesAreEqualWithinTolerance=function(t,e){var i=Math.abs(t-e)<=1e-7;return i||(i=Math.abs(2*Math.PI+Math.min(t,e)-Math.max(t,e))<=1e-7),i},t.BaseDiagramNode=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.BaseDiagramNode,t.Container,"dvt.BaseDiagramNode"),t.BaseDiagramNode.prototype.Init=function(e,i,n){t.BaseDiagramNode.superclass.Init.call(this,e,null,i),this._diagram=n,this._bDisclosed=!1,this._selected=!1,this._selectable=!0,this._labelObj,this._labelPos,this._labelRotAngle,this._labelRotPoint,this._outLinkIds,this._inLinkIds},t.BaseDiagramNode.prototype.GetDiagram=function(){return this._diagram},t.BaseDiagramNode.prototype.getData=function(){return null},t.BaseDiagramNode.prototype.getLayoutBounds=function(){return this.getContentBounds()},t.BaseDiagramNode.prototype.getContentBounds=function(){return new t.Rectangle(0,0,this.getWidth(),this.getHeight())},t.BaseDiagramNode.prototype.setLabelPosition=function(e){e&&(this._labelPos=e,t.BaseDiagramNode.PositionLabel(this._labelObj,e,this.getLabelBounds(),this.getLabelRotationAngle(),this.getLabelRotationPoint()))},t.BaseDiagramNode.prototype.getLabelPosition=function(){return this._labelPos},t.BaseDiagramNode.prototype.getLabelBounds=function(){return null},t.BaseDiagramNode.prototype.setLabelBounds=function(t){},t.BaseDiagramNode.prototype.getContainerPadding=function(){return null},t.BaseDiagramNode.prototype.setContainerPadding=function(t,e,i,n,o){},t.BaseDiagramNode.prototype.isDisclosed=function(){return this._bDisclosed},t.BaseDiagramNode.prototype.setDisclosed=function(t){this._bDisclosed=t},t.BaseDiagramNode.prototype.isSelected=function(){return this._selected},t.BaseDiagramNode.prototype.setSelected=function(t){this._selected=t},t.BaseDiagramNode.prototype.setSelectable=function(t){this._selectable=t},t.BaseDiagramNode.prototype.isSelectable=function(){return this.GetDiagram().isSelectionSupported()&&this._selectable},t.BaseDiagramNode.prototype.setHiddenAncestor=function(t,e){this._bHiddenAncestor=t},t.BaseDiagramNode.prototype.isHiddenAncestor=function(){return this._bHiddenAncestor},t.BaseDiagramNode.prototype.setLabelRotationAngle=function(e){this._labelRotAngle=e,t.BaseDiagramNode.PositionLabel(this._labelObj,this.getLabelPosition(),this.getLabelBounds(),e,this.getLabelRotationPoint())},t.BaseDiagramNode.prototype.getLabelRotationAngle=function(){return this._labelRotAngle},t.BaseDiagramNode.prototype.setLabelRotationPoint=function(e){this._labelRotPoint=e,t.BaseDiagramNode.PositionLabel(this._labelObj,this.getLabelPosition(),this.getLabelBounds(),this.getLabelRotationAngle(),e)},t.BaseDiagramNode.prototype.getLabelRotationPoint=function(){return this._labelRotPoint},t.BaseDiagramNode.prototype.GetNodeBounds=function(e){var i=this.getLayoutBounds(),n=new t.Rectangle(i.x,i.y,i.w,i.h),o=null;e&&(o=e.getDestVal(this,this.getLabelPosition)),o||(o=this.getLabelPosition());var r=null,s=null;e&&(r=e.getDestVal(this,this.getLabelRotationAngle),s=e.getDestVal(this,this.getLabelRotationPoint)),null==r&&(r=this.getLabelRotationAngle()),s||(s=this.getLabelRotationPoint());var a=this.getLabelBounds();return o&&a&&(null!=r&&(a=t.BaseDiagram.RotateBounds(a,r,s)),n.x=Math.min(i.x,a.x+o.x),n.y=Math.min(i.y,a.y+o.y),n.w=Math.max(i.x+i.w,a.x+o.x+a.w)-n.x,n.h=Math.max(i.y+i.h,a.y+o.y+a.h)-n.y),n},t.BaseDiagramNode.CalcLabelMatrix=function(e,i,n,o){var r=new t.Matrix;return null!=n&&(o&&r.translate(-o.x,-o.y),r.rotate(n),o&&r.translate(o.x,o.y)),e&&r.translate(e.x,e.y),r},t.BaseDiagramNode.PositionLabel=function(e,i,n,o,r){if(e){var s=t.BaseDiagramNode.CalcLabelMatrix(i,n,o,r);e.setMatrix(s)}},t.BaseDiagramNode.prototype.SetPosition=function(e,i,n){n?(n.addProp(t.Animator.TYPE_NUMBER,this,this.getTranslateX,this.setTranslateX,e),n.addProp(t.Animator.TYPE_NUMBER,this,this.getTranslateY,this.setTranslateY,i)):this.setTranslate(e,i)},t.BaseDiagramNode.prototype.GetPosition=function(e){var i,n;return e&&(i=e.getDestVal(this,this.getTranslateX),n=e.getDestVal(this,this.getTranslateY)),null==i&&(i=this.getTranslateX()),null==n&&(n=this.getTranslateY()),new t.Point(i,n)},t.BaseDiagramNode.prototype.getNextNavigable=function(t){return null},t.BaseDiagramNode.prototype.getKeyboardBoundingBox=function(e){if(this._customNodeContent)return this._diagram.getCustomObjKeyboardBoundingBox(this);var i=this.getContentBounds(e),n=this.localToStage(new t.Point(i.x,i.y)),o=this.localToStage(new t.Point(i.x+i.w,i.y+i.h));return new t.Rectangle(n.x,n.y,o.x-n.x,o.y-n.y)},t.BaseDiagramNode.prototype.getTargetElem=function(){return this.getElem()},t.BaseDiagramNode.prototype.showKeyboardFocusEffect=function(){},t.BaseDiagramNode.prototype.hideKeyboardFocusEffect=function(){},t.BaseDiagramNode.prototype.isShowingKeyboardFocusEffect=function(){},t.BaseDiagramNode.prototype.getCategories=function(){return null},t.BaseDiagramNode.prototype.addOutLinkId=function(t){this._outLinkIds||(this._outLinkIds=[]),this._outLinkIds.push(t)},t.BaseDiagramNode.prototype.removeOutLinkId=function(e){if(this._outLinkIds){var i=t.ArrayUtils.getIndex(this._outLinkIds,e);i!=-1&&this._outLinkIds.splice(i,1)}},t.BaseDiagramNode.prototype.getOutLinkIds=function(){return this._outLinkIds},t.BaseDiagramNode.prototype.addInLinkId=function(t){this._inLinkIds||(this._inLinkIds=[]),this._inLinkIds.push(t)},t.BaseDiagramNode.prototype.removeInLinkId=function(e){if(this._inLinkIds){var i=t.ArrayUtils.getIndex(this._inLinkIds,e);i!=-1&&this._inLinkIds.splice(i,1)}},t.BaseDiagramNode.prototype.getInLinkIds=function(){return this._inLinkIds},t.BaseDiagramNode.prototype.setLabelAlignments=function(t,e){},t.BaseDiagramNode.prototype.getGroupId=function(){return null},t.BaseDiagramNode.prototype.GetChildNodePanePosition=function(e){if(this._childNodePane){var i=e?e.getDestVal(this._childNodePane,this._childNodePane.getTranslateX,!0):this._childNodePane.getTranslateX(),n=e?e.getDestVal(this._childNodePane,this._childNodePane.getTranslateY,!0):this._childNodePane.getTranslateY();return new t.Point(i,n)}return null},t.BaseDiagramLink=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.BaseDiagramLink,t.Container,"dvt.BaseDiagramLink"),t.BaseDiagramLink.prototype.Init=function(e,i,n){t.BaseDiagramLink.superclass.Init.call(this,e,null,i),this._diagram=n,this._arPoints,this._points,this._pathCmds,this._labelObj,this._labelPos,this._labelRotAngle,this._labelRotPoint,this._selected=!1,this._selectable=!0,this._shape,this._endConnector,this._startConnector},t.BaseDiagramLink.prototype.GetDiagram=function(){return this._diagram},t.BaseDiagramLink.prototype.setEndConnectorType=function(t){},t.BaseDiagramLink.prototype.getEndConnectorType=function(){return null},t.BaseDiagramLink.prototype.setStartConnectorType=function(t){},t.BaseDiagramLink.prototype.setStartConnector=function(t){this._startConnector=t},t.BaseDiagramLink.prototype.getStartConnector=function(){return this._startConnector},t.BaseDiagramLink.prototype.setEndConnector=function(t){this._endConnector=t},t.BaseDiagramLink.prototype.getEndConnector=function(){return this._endConnector},t.BaseDiagramLink.prototype.setShape=function(t){this._shape=t},t.BaseDiagramLink.prototype.getShape=function(){return this._shape},t.BaseDiagramLink.prototype.setLabelRotationAngle=function(e){this._labelRotAngle=e,t.BaseDiagramLink.PositionLabel(this._labelObj,this.getLabelPosition(),this.getLabelBounds(),e,this.getLabelRotationPoint())},t.BaseDiagramLink.prototype.getLabelRotationAngle=function(){return this._labelRotAngle},t.BaseDiagramLink.prototype.setLabelRotationPoint=function(e){this._labelRotPoint=e,t.BaseDiagramLink.PositionLabel(this._labelObj,this.getLabelPosition(),this.getLabelBounds(),this.getLabelRotationAngle(),e)},t.BaseDiagramLink.prototype.getLabelRotationPoint=function(){return this._labelRotPoint},t.BaseDiagramLink.prototype.getLabelPosition=function(){return this._labelPos},t.BaseDiagramLink.prototype.setLabelPosition=function(e){e&&(this._labelPos=e,t.BaseDiagramLink.PositionLabel(this._labelObj,e,this.getLabelBounds(),this.getLabelRotationAngle(),this.getLabelRotationPoint()))},t.BaseDiagramLink.prototype.getLabelBounds=function(){return null},t.BaseDiagramLink.prototype.setLabelBounds=function(t){},t.BaseDiagramLink.prototype.getStartConnectorOffset=function(){return 0},t.BaseDiagramLink.prototype.getEndConnectorOffset=function(){return 0},t.BaseDiagramLink.prototype.setSelectable=function(t){this._selectable=t},t.BaseDiagramLink.prototype.isSelectable=function(){return this.GetDiagram().isSelectionSupported()&&this._selectable},t.BaseDiagramLink.prototype.isSelected=function(){return this._selected},t.BaseDiagramLink.prototype.setSelected=function(t){
this._selected=t};t.BaseDiagramLink.prototype.setPromoted=function(t){this._bPromoted=t};t.BaseDiagramLink.prototype.isPromoted=function(){return this._bPromoted},t.BaseDiagramLink.prototype.setLinkWidth=function(t){},t.BaseDiagramLink.prototype.getLinkWidth=function(){return 1},t.BaseDiagramLink.prototype.setLinkStyle=function(t){},t.BaseDiagramLink.prototype.getLinkStyle=function(){return"solid"},t.BaseDiagramLink.prototype.setLinkColor=function(t){},t.BaseDiagramLink.prototype.getLinkColor=function(){return null},t.BaseDiagramLink.prototype.getConnectorTemplate=function(t){return null},t.BaseDiagramLink.prototype.GetAppliedLinkStyle=function(){return this.getLinkStyle()},t.BaseDiagramLink.prototype.GetAppliedLinkWidth=function(){return this.getLinkWidth()},t.BaseDiagramLink.prototype.GetAppliedLinkColor=function(){return this.getLinkColor()},t.BaseDiagramLink.prototype.CreateConnector=function(e,i,n,o){if(i||o){var r;o||(r=this._shape.getStroke().clone(),r.setType(t.Stroke.SOLID),r.setFixedWidth(!1));var s=t.DiagramLinkConnectorUtils.CreateConnectorShape(this.getCtx(),i,o,r,this);return s&&(this._shape.addChild(s),t.DiagramLinkConnectorUtils.TransformConnector(s,i,o,e,n)),s}},t.BaseDiagramLink.prototype.GetLinkBounds=function(e){var i=new t.Rectangle(Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),n=null;if(e&&(n=e.getDestVal(this,this.getPoints)),n||(n=this.getPoints()),n)for(var o,r,s,a,l,h=t.DiagramLinkUtils.GetControlPoints(n),u=0;u<h.length;u++)o=h[u],r=Math.max(i.x+i.w,o.x),s=Math.max(i.y+i.h,o.y),a=Math.min(i.x,o.x),l=Math.min(i.y,o.y),i.x=a,i.y=l,i.w=r-a,i.h=s-l;var d=new t.Rectangle(i.x,i.y,i.w,i.h),c=null;e&&(c=e.getDestVal(this,this.getLabelPosition)),null==c&&(c=this.getLabelPosition());var p=null,_=null;e&&(p=e.getDestVal(this,this.getLabelRotationAngle),_=e.getDestVal(this,this.getLabelRotationPoint)),null==p&&(p=this.getLabelRotationAngle()),_||(_=this.getLabelRotationPoint());var g=this.getLabelBounds();return c&&g&&(null!=p&&(g=t.BaseDiagram.RotateBounds(g,p,_)),d.x=Math.min(i.x,g.x+c.x),d.y=Math.min(i.y,g.y+c.y),d.w=Math.max(i.x+i.w,g.x+c.x+g.w)-d.x,d.h=Math.max(i.y+i.h,g.y+c.y+g.h)-d.y),d},t.BaseDiagramLink.prototype.setPoints=function(e){this._arPoints=e,t.DiagramLinkUtils.IsPath(e)?(this._pathCmds=e,this._points=t.DiagramLinkUtils.ConvertToPoints(e)):(this._points=e,this._pathCmds=t.DiagramLinkUtils.ConvertToPath(e)),this._shape&&this._shape instanceof t.Path&&(this._shape.setCommands(this._pathCmds),this._endConnector?t.DiagramLinkConnectorUtils.TransformConnector(this._endConnector,this.getEndConnectorType(),this.getConnectorTemplate(t.DiagramLinkConnectorUtils.END_CONNECTOR),this._points,1):this._endConnector=this.CreateConnector(this._points,this.getEndConnectorType(),1,this.getConnectorTemplate(t.DiagramLinkConnectorUtils.END_CONNECTOR)),this._startConnector?t.DiagramLinkConnectorUtils.TransformConnector(this._startConnector,this.getStartConnectorType(),this.getConnectorTemplate(t.DiagramLinkConnectorUtils.START_CONNECTOR),this._points,0):this._startConnector=this.CreateConnector(this._points,this.getStartConnectorType(),0,this.getConnectorTemplate(t.DiagramLinkConnectorUtils.START_CONNECTOR)));var i=null,n=null;this._linkUnderlay&&this._linkUnderlay.getUnderlay()instanceof t.Path&&this._linkUnderlay.getUnderlay().setCommands(this._pathCmds),this._linkUnderlay&&(i=this._linkUnderlay.getUnderlayStart())&&t.DiagramLinkConnectorUtils.TransformConnector(i,this.getStartConnectorType(),this.getConnectorTemplate(t.DiagramLinkConnectorUtils.START_CONNECTOR),this._points,0),this._linkUnderlay&&(n=this._linkUnderlay.getUnderlayEnd())&&t.DiagramLinkConnectorUtils.TransformConnector(n,this.getEndConnectorType(),this.getConnectorTemplate(t.DiagramLinkConnectorUtils.END_CONNECTOR),this._points,1),this._hitDetectionUnderlay&&this._hitDetectionUnderlay.getUnderlay()instanceof t.Path&&this._hitDetectionUnderlay.getUnderlay().setCommands(this._pathCmds),this._startHandle&&this._startHandle.setPosition(this.getLinkStart()),this._endHandle&&this._endHandle.setPosition(this.getLinkEnd())},t.BaseDiagramLink.prototype.getPoints=function(){return this._arPoints},t.BaseDiagramLink.prototype.getLinkStart=function(){if(!this._points)return null;var e=this._points[0],i=this._points[1];return new t.Point(e,i)},t.BaseDiagramLink.prototype.getLinkEnd=function(){if(!this._points)return null;var e=this._points.length,i=this._points[e-2],n=this._points[e-1];return new t.Point(i,n)},t.BaseDiagramLink.CalcLabelMatrix=function(e,i,n,o){var r=new t.Matrix;return null!=n&&(o&&r.translate(-o.x,-o.y),r.rotate(n),o&&r.translate(o.x,o.y)),e&&r.translate(e.x,e.y),r},t.BaseDiagramLink.PositionLabel=function(e,i,n,o,r){if(e){var s=t.BaseDiagramLink.CalcLabelMatrix(i,n,o,r);e.setMatrix(s)}},t.BaseDiagramLink.prototype.CreateUnderlay=function(e,i,n,o){i||0==i||(i=1),n||0==n||(n=0);var r=this.GetAppliedLinkWidth()+n,a=new t.SolidStroke(e,i,r);return new s(this.getCtx(),this._pathCmds,a,o)},t.BaseDiagramLink.prototype.CreateFeedbackUnderlay=function(e,i,n,o){var r=this.CreateUnderlay(e,i,n,o);return this._startConnector&&this.getStartConnectorType()&&r.addUnderlayStart(this._points,this.getStartConnectorType(),this.getConnectorTemplate(t.DiagramLinkConnectorUtils.START_CONNECTOR),this),this._endConnector&&this.getEndConnectorType()&&r.addUnderlayEnd(this._points,this.getEndConnectorType(),this.getConnectorTemplate(t.DiagramLinkConnectorUtils.END_CONNECTOR),this),r},t.BaseDiagramLink.prototype.ApplyLinkStyle=function(e,i){var n=this.GetAppliedLinkStyle(),o=t.DiagramLinkUtils.ConvertLinkStyleToStrokeType(n);e.setType(o,t.DiagramLinkUtils.GetStrokeDash(o,i),t.DiagramLinkUtils.GetStrokeDashOffset(o,i))},t.BaseDiagramLink.prototype.ReplaceConnectorColor=function(t,e){if(t){var i=null;if(e.getColor&&(i=e.getColor()),i){var n=t.getStroke()?t.getStroke().clone():null,o=t.getFill()?t.getFill().clone():null;n&&n.setColor&&(n.setColor(i),t.setStroke(n)),o&&o.setColor&&(o.setColor(i),t.setFill(o))}}},t.BaseDiagramLink.prototype.getNextNavigable=function(t){return null},t.BaseDiagramLink.prototype.getKeyboardBoundingBox=function(t){return this.getGroupId()&&this._diagram.getOptions().renderer?this._diagram.getCustomObjKeyboardBoundingBox(this):this.getDimensions(t)},t.BaseDiagramLink.prototype.getTargetElem=function(){return this.getElem()},t.BaseDiagramLink.prototype.showKeyboardFocusEffect=function(){},t.BaseDiagramLink.prototype.hideKeyboardFocusEffect=function(){},t.BaseDiagramLink.prototype.isShowingKeyboardFocusEffect=function(){},t.BaseDiagramLink.prototype.setKeyboardFocusNode=function(t){this._keyboardNavNode=t},t.BaseDiagramLink.prototype.getKeyboardFocusNode=function(){return this._keyboardNavNode},t.BaseDiagramLink.prototype.getCategories=function(){return null},t.BaseDiagramLink.prototype.setLabelAlignments=function(t,e){},t.BaseDiagramLink.prototype.getGroupId=function(){return null},t.DiagramLayoutUtils={},t.Obj.createSubclass(t.DiagramLayoutUtils,t.Obj,"dvt.DiagramLayoutUtils"),t.DiagramLayoutUtils.gridLayout=function(e){var i=t.DiagramLayoutUtils.getMaxNodeBounds(e),n=Math.max(i.w,i.h),o=e.getNodeCount(),r=e.getLinkCount(),s=Math.floor(Math.sqrt(o)),a=0,l=e.getLayoutAttributes();a=l&&l.padding?l.padding:r>0?n:.25*n;for(var h=n+a,u=Math.ceil(o/s),d=s,c=-(u-1)*h/2,p=-(d-1)*h/2,_=0;_<o;_++){var g=e.getNodeByIndex(_),m=Math.floor(_/s),f=_%s,y=c+h*m,v=p+h*f;t.DiagramLayoutUtils.centerNodeAndLabel(g,y,v)}},t.DiagramLayoutUtils.getMaxNodeBounds=function(e){for(var i=e.getNodeCount(),n=0,o=0,r=0;r<i;r++){var s=e.getNodeByIndex(r),a=s.getBounds();n=Math.max(a.w,n),o=Math.max(a.h,o);var l=s.getLabelBounds();l&&(n=Math.max(l.w,n),o=Math.max(a.h+l.h,o))}return new t.DiagramRectangle(0,0,n,o)},t.DiagramLayoutUtils.centerNodeAndLabel=function(e,i,n){var o=e.getContentBounds();e.setPosition(new t.DiagramPoint(i-o.x-.5*o.w,n-o.y-.5*o.h)),t.DiagramLayoutUtils.positionNodeLabel(e)},t.DiagramLayoutUtils.positionNodeLabel=function(e){var i=e.getBounds(),n=e.getPosition(),o=e.getLabelBounds();if(o){var r=i.x+n.x+.5*(i.w-o.w),s=i.y+n.y+i.h;e.setLabelPosition(new t.DiagramPoint(r,s))}},t.DiagramLayoutUtils.convertRectToDiagramRect=function(e){return void 0===e||null==e?null:new t.DiagramRectangle(e.x,e.y,e.w,e.h)},t.DiagramLayoutUtils.convertPointToDiagramPoint=function(e){return void 0===e||null==e?null:new t.DiagramPoint(e.x,e.y)},t.DiagramLayoutUtils.convertDiagramRectToRect=function(e){return e?new t.Rectangle(e.x,e.y,e.w,e.h):null},t.DiagramLayoutUtils.convertDiagramPointToPoint=function(e){return e?new t.Point(e.x,e.y):null};var s=function(t,e,i,n){s.superclass.Init.call(this,t),this.Init(t,e,i,n)};t.Obj.createSubclass(s,t.Container,"DvtDiagramLinkUnderlay"),s.prototype.Init=function(e,i,n,o){i||(i=["M",0,0,"L",1,0]),this._stroke=n,this._stroke||(this._stroke=new t.SolidStroke("#ffffff",1,1)),n.setFixedWidth(!0),this._underlay=new t.Path(e,i),this._underlay.setStroke(n),this._underlay.setFill(null),o&&(this._styleClass=o,this._underlay.setClassName(o)),this.addChild(this._underlay),this._underlayStart=null,this._underlayStartType=null,this._underlayEnd=null,this._underlayEndType=null},s.prototype.addUnderlayStart=function(t,e,i,n){var o=this.CreateConnectorUnderlay(t,e,i,n,0);this._underlayStart&&this.removeChild(this._underlayStart),this._underlayStart=o,this._underlayStartType=e,this.addChild(this._underlayStart)},s.prototype.addUnderlayEnd=function(t,e,i,n){var o=this.CreateConnectorUnderlay(t,e,i,n,1);this._underlayEnd&&this.removeChild(this._underlayEnd),this._underlayEnd=o,this._underlayEndType=e,this.addChild(this._underlayEnd)},s.prototype.CreateConnectorUnderlay=function(e,i,n,o,r){var s=this._stroke.clone();s.setFixedWidth(!1);var a=t.DiagramLinkConnectorUtils.CreateConnectorShape(this.getCtx(),i,n,s,o);return this._styleClass&&a.setClassName(this._styleClass),t.DiagramLinkConnectorUtils.TransformConnector(a,i,n,e,r),a},s.prototype.getUnderlay=function(){return this._underlay},s.prototype.getUnderlayStart=function(){return this._underlayStart},s.prototype.getUnderlayEnd=function(){return this._underlayEnd},s.prototype.setStroke=function(e,i){if(this._stroke=e,e.setFixedWidth(!0),this._underlay.setStroke(e),this._underlayStart){var n=e.clone();n.setType(t.Stroke.SOLID),n.setFixedWidth(!1),this._underlayStartType!=t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW&&this._underlayStartType!=t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW_CONCAVE||(n.setWidth(i),this._underlayStart.setSolidFill(e.getColor())),this._underlayStart.setStroke(n)}if(this._underlayEnd){var o=e.clone();o.setType(t.Stroke.SOLID),o.setFixedWidth(!1),this._underlayEndType!=t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW&&this._underlayEndType!=t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW_CONCAVE||(o.setWidth(i),this._underlayEnd.setSolidFill(e.getColor())),this._underlayEnd.setStroke(o)}},s.prototype.getStroke=function(){return this._stroke},s.prototype.hideUnderlayStart=function(){this._underlayStart&&this.removeChild(this._underlayStart)},s.prototype.hideUnderlayEnd=function(){this._underlayEnd&&this.removeChild(this._underlayEnd)},s.prototype.showUnderlayStart=function(){this._underlayStart&&this.addChild(this._underlayStart)},s.prototype.showUnderlayEnd=function(){this._underlayEnd&&this.addChild(this._underlayEnd)},t.DiagramLinkUtils={},t.Obj.createSubclass(t.DiagramLinkUtils,t.Obj,"dvt.DiagramLinkUtils"),t.DiagramLinkUtils.ConvertLinkStyleToStrokeType=function(e){var i=t.Stroke.SOLID;switch(e){case"dash":i=t.Stroke.DASHED;break;case"dot":i=t.Stroke.DOTTED;break;case"dashDot":i=t.Stroke.DASHED_DOTTED}return i},t.DiagramLinkUtils.GetStrokeDash=function(e,i){return t.Stroke.SOLID==e?null:t.Stroke.DASHED==e?i?"8,2":"6,4":t.Stroke.DOTTED==e?i?"4,1":"2,3":t.Stroke.DASHED_DOTTED==e?i?"10,1,4,1":"8,3,2,3":void 0},t.DiagramLinkUtils.GetStrokeDashOffset=function(e,i){return i&&t.Stroke.SOLID!=e?1:null},t.DiagramLinkUtils.getStrokeObject=function(e,i){var n=t.DiagramLinkUtils.ConvertLinkStyleToStrokeType(e);return{_type:e,strokeDasharray:t.DiagramLinkUtils.GetStrokeDash(n,i),strokeDashoffset:t.DiagramLinkUtils.GetStrokeDashOffset(n,i)}},t.DiagramLinkUtils.processStrokeDashArray=function(t){if(t){var e=t.split(/[\s,]+/);return e.length%2>0&&(e=e.concat(e)),e.toString()}return t},t.DiagramLinkUtils.getCustomUnderlay=function(e){if(e){for(var i=e.split(/[\s,]+/),n="",o=0;o<i.length;o++){var r=t.CSSStyle.toNumber(t.StringUtils.trim(i[o]));n+=o%2==0?r+2:r>=2?r-2:0,o<i.length-1&&(n+=", ")}return n}return null},t.DiagramLinkUtils.ConvertToPath=function(t){var e=[];if(t)for(var i=0;i<t.length;i+=2)0==i?e.push("M"):e.push("L"),e.push(t[i]),e.push(t[i+1]);return e},t.DiagramLinkUtils.ConvertToPoints=function(t){var e=[];if(t)for(var i=0;i<t.length;i++)isNaN(t[i])||e.push(t[i]);return e},t.DiagramLinkUtils.IsPath=function(t){return!!(t&&t.length>0)&&isNaN(t[0])},t.DiagramLinkUtils.GetControlPoints=function(e){var i,n=[];i=t.DiagramLinkUtils.IsPath(e)?t.DiagramLinkUtils.ConvertToPoints(e):e;for(var o=0;o<i.length;o+=2)n.push(new t.Point(i[o],i[o+1]));return n},t.DiagramLinkConnectorUtils={},t.Obj.createSubclass(t.DiagramLinkConnectorUtils,t.Obj,"dvt.DiagramLinkConnectorUtils"),t.DiagramLinkConnectorUtils.END_CONNECTOR="endConnector",t.DiagramLinkConnectorUtils.START_CONNECTOR="startConnector",t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW_OPEN="arrowOpen",t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW="arrow",t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW_CONCAVE="arrowConcave",t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_RECTANGLE="rectangle",t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_RECTANGLE_ROUNDED="rectangleRounded",t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_CIRCLE="circle",t.DiagramLinkConnectorUtils.CreateConnectorShape=function(e,i,n,o,r){if(n)return t.DiagramLinkConnectorUtils.CreateCustomConnector(e,n,r);var s=r.GetAppliedLinkWidth();switch(i){case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW:return t.DiagramLinkConnectorUtils.CreateFilledArrowConnector(e,s,r.getLinkColor());case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW_CONCAVE:return t.DiagramLinkConnectorUtils.CreateFilledConcaveArrowConnector(e,s,r.getLinkColor());case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW_OPEN:return t.DiagramLinkConnectorUtils.CreateOpenArrowConnector(e,s,o);case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_CIRCLE:return t.DiagramLinkConnectorUtils.CreateCircleConnector(e,s,o);case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_RECTANGLE:return t.DiagramLinkConnectorUtils.CreateRectangleConnector(e,s,o);case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_RECTANGLE_ROUNDED:return t.DiagramLinkConnectorUtils.CreateRoundedRectangleConnector(e,s,o)}return null},t.DiagramLinkConnectorUtils.TransformConnector=function(e,i,n,o,r){var s=t.DiagramLinkConnectorUtils.CalcConnectorTransform(e,i,n,o,r);e.setMatrix(s)},t.DiagramLinkConnectorUtils.CalcConnectorTransform=function(e,i,n,o,r){var s=-1,a=0,l=0,h=0;if(o){var u=o.length;1===r?(u>=2&&(l=o[u-2],h=o[u-1]),u>=4?(s=o[u-4],a=o[u-3]):(s=l-1e-4,a=h)):(u>=2&&(l=o[0],h=o[1]),u>=4?(s=o[2],a=o[3]):(s=l+1e-4,a=h))}else;var d=l,c=h,p=t.DiagramLinkConnectorUtils.CalcConnectorRotation(s,a,l,h),_=e._connectorOrigMat;_||(_=e.getMatrix().clone(),e._connectorOrigMat=_);var g=new t.Matrix;if(n){var m=t.DiagramLinkConnectorUtils._getCachedDims(e),f=e.getScaleX(),y=e.getScaleY(),v=-.5*(m.w*f),S=-.5*(m.h*y);g.translate(v,S)}return g.rotate(p),g.translate(d,c),g.concat(_),g},t.DiagramLinkConnectorUtils._getCachedDims=function(t){var e=t._cachedDims;return e||(e=t.getDimensions(),t._cachedDims=e),e},t.DiagramLinkConnectorUtils.CalcConnectorRotation=function(t,e,i,n){var o=n-e,r=i-t,s=Math.atan2(o,r);return s},t.DiagramLinkConnectorUtils.CreateFilledConcaveArrowConnector=function(e,i,n){var o=t.DiagramLinkConnectorUtils._getReduce(i,.5),r=6*o,s=.8*r,a=[-.22*r,-.5*s,.78*r,0,-.22*r,.5*s,0,0],l=new t.Polygon(e,a);return l.setSolidFill(n),l},t.DiagramLinkConnectorUtils.CreateFilledArrowConnector=function(e,i,n){var o=t.DiagramLinkConnectorUtils._getReduce(i,.5),r=5*o,s=.8*r,a=[0,-.5*s,r,0,0,.5*s],l=new t.Polygon(e,a);return l.setSolidFill(n),l},t.DiagramLinkConnectorUtils._getReduce=function(t,e){if(t<=1)return t;var i=t-1;return i*=e,1+i},t.DiagramLinkConnectorUtils.CreateOpenArrowConnector=function(e,i,n){var o=3*i,r=n.getWidth(),s=[-o+r*Math.sqrt(2)/2,-o,r*Math.sqrt(2)/2,0,-o+r*Math.sqrt(2)/2,o],a=new t.Polyline(e,s);return a.setStroke(n),a.setFill(null),a},t.DiagramLinkConnectorUtils.getCircleRadius=function(t){var e=2*t;return e},t.DiagramLinkConnectorUtils.getRectangleLength=function(t){var e=3*t;return e},t.DiagramLinkConnectorUtils.CreateCircleConnector=function(e,i,n){var o=t.DiagramLinkConnectorUtils.getCircleRadius(i),r=new t.Circle(e,o,0,o);return r.setStroke(n),r.setFill(null),r},t.DiagramLinkConnectorUtils.CreateRectangleConnector=function(e,i,n){var o=t.DiagramLinkConnectorUtils.getRectangleLength(i),r=new t.Rect(e,0,-o/2,o,o);return r.setStroke(n),r.setFill(null),r},t.DiagramLinkConnectorUtils.CreateRoundedRectangleConnector=function(e,i,n){var o=t.DiagramLinkConnectorUtils.CreateRectangleConnector(e,i,n);return o.setCornerRadius(i),o},t.DiagramLinkConnectorUtils.CreateCustomConnector=function(e,i,n){var o=n.GetDiagram().createAfContext();o.setELContext(n.getData().getElAttributes()),o.setContextCallback(n,n.eventContextCallback),o.setTabStopsArray(n.getTabStopsArray());var r=t.AfComponentFactory.parseAndLayout(o,i,n);return r},t.DiagramLinkConnectorUtils.GetConnectorOffset=function(e,i,n,o,r){if(n){var s=t.DiagramLinkConnectorUtils._getCachedDims(e),a=e.getScaleX(),l=.5*(s.w*a);return l}return t.DiagramLinkConnectorUtils.getStandardConnectorOffset(i,r.GetAppliedLinkWidth(),o.getWidth())},t.DiagramLinkConnectorUtils.getStandardConnectorOffset=function(e,i,n){switch(e){case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW_OPEN:return n*Math.sqrt(2);case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW:var o=t.DiagramLinkConnectorUtils._getReduce(i,.5),r=5*o;return r;case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_ARROW_CONCAVE:var o=t.DiagramLinkConnectorUtils._getReduce(i,.5),r=6*o;return.78*r;case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_CIRCLE:var s=t.DiagramLinkConnectorUtils.getCircleRadius(n);return 2*s+n/2;case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_RECTANGLE:case t.DiagramLinkConnectorUtils.CONNECTOR_TYPE_RECTANGLE_ROUNDED:var a=t.DiagramLinkConnectorUtils.getRectangleLength(n);return a+n/2;default:return 0}},t.exportProperty(t.BaseDiagram.prototype,"setInitAnim",t.BaseDiagram.prototype.setInitAnim),t.exportProperty(e.prototype,"getLayout",e.prototype.getLayout),t.exportProperty(e.prototype,"getLayoutAttributes",e.prototype.getLayoutAttributes),t.exportProperty(e.prototype,"getNodeById",e.prototype.getNodeById),t.exportProperty(e.prototype,"getNodeByIndex",e.prototype.getNodeByIndex),t.exportProperty(e.prototype,"getNodeCount",e.prototype.getNodeCount),t.exportProperty(e.prototype,"getLinkById",e.prototype.getLinkById),t.exportProperty(e.prototype,"getLinkByIndex",e.prototype.getLinkByIndex),t.exportProperty(e.prototype,"getLinkCount",e.prototype.getLinkCount),t.exportProperty(e.prototype,"localToGlobal",e.prototype.localToGlobal),t.exportProperty(e.prototype,"isLocaleR2L",e.prototype.isLocaleR2L),t.exportProperty(e.prototype,"getComponentSize",e.prototype.getComponentSize),t.exportProperty(e.prototype,"setViewport",e.prototype.setViewport),t.exportProperty(e.prototype,"getViewport",e.prototype.getViewport),t.exportProperty(e.prototype,"getContainerId",e.prototype.getContainerId),t.exportProperty(e.prototype,"setContainerPadding",e.prototype.setContainerPadding),t.exportProperty(e.prototype,"getContainerPadding",e.prototype.getContainerPadding),t.exportProperty(e.prototype,"getCurrentViewport",e.prototype.getCurrentViewport),t.exportProperty(e.prototype,"getCommonContainer",e.prototype.getCommonContainer),t.exportProperty(n.prototype,"getId",n.prototype.getId),t.exportProperty(n.prototype,"getBounds",n.prototype.getBounds),t.exportProperty(n.prototype,"getContentBounds",n.prototype.getContentBounds),t.exportProperty(n.prototype,"setPosition",n.prototype.setPosition),t.exportProperty(n.prototype,"getPosition",n.prototype.getPosition),t.exportProperty(n.prototype,"getRelativePosition",n.prototype.getRelativePosition),t.exportProperty(n.prototype,"setLabelPosition",n.prototype.setLabelPosition),t.exportProperty(n.prototype,"getLabelPosition",n.prototype.getLabelPosition),t.exportProperty(n.prototype,"getLabelBounds",n.prototype.getLabelBounds),t.exportProperty(n.prototype,"getLayoutAttributes",n.prototype.getLayoutAttributes),t.exportProperty(n.prototype,"isReadOnly",n.prototype.isReadOnly),t.exportProperty(n.prototype,"getContainerId",n.prototype.getContainerId),t.exportProperty(n.prototype,"getSelected",n.prototype.getSelected),t.exportProperty(n.prototype,"setLabelRotationAngle",n.prototype.setLabelRotationAngle),t.exportProperty(n.prototype,"getLabelRotationAngle",n.prototype.getLabelRotationAngle),t.exportProperty(n.prototype,"setLabelRotationPoint",n.prototype.setLabelRotationPoint),t.exportProperty(n.prototype,"getLabelRotationPoint",n.prototype.getLabelRotationPoint),t.exportProperty(n.prototype,"setContainerPadding",n.prototype.setContainerPadding),t.exportProperty(n.prototype,"getContainerPadding",n.prototype.getContainerPadding),t.exportProperty(n.prototype,"setDisclosed",n.prototype.setDisclosed),t.exportProperty(n.prototype,"isDisclosed",n.prototype.isDisclosed),t.exportProperty(n.prototype,"setChildNodes",n.prototype.setChildNodes),t.exportProperty(n.prototype,"getChildNodes",n.prototype.getChildNodes),t.exportProperty(n.prototype,"getParentNode",n.prototype.getParentNode),t.exportProperty(n.prototype,"setLabelValign",n.prototype.setLabelValign),t.exportProperty(n.prototype,"setLabelHalign",n.prototype.setLabelHalign),t.exportProperty(n.prototype,"getLabelValign",n.prototype.getLabelValign),t.exportProperty(n.prototype,"getLabelHalign",n.prototype.getLabelHalign),t.exportProperty(n.prototype,"getData",n.prototype.getData),t.exportProperty(i.prototype,"getId",i.prototype.getId),t.exportProperty(i.prototype,"getStartId",i.prototype.getStartId),t.exportProperty(i.prototype,"getEndId",i.prototype.getEndId),t.exportProperty(i.prototype,"setPoints",i.prototype.setPoints),t.exportProperty(i.prototype,"getPoints",i.prototype.getPoints),t.exportProperty(i.prototype,"setLabelPosition",i.prototype.setLabelPosition),t.exportProperty(i.prototype,"getLabelPosition",i.prototype.getLabelPosition),t.exportProperty(i.prototype,"getLabelBounds",i.prototype.getLabelBounds),t.exportProperty(i.prototype,"getStartConnectorOffset",i.prototype.getStartConnectorOffset),t.exportProperty(i.prototype,"getEndConnectorOffset",i.prototype.getEndConnectorOffset),t.exportProperty(i.prototype,"getLinkWidth",i.prototype.getLinkWidth),t.exportProperty(i.prototype,"getLayoutAttributes",i.prototype.getLayoutAttributes),t.exportProperty(i.prototype,"getSelected",i.prototype.getSelected),t.exportProperty(i.prototype,"setLabelRotationAngle",i.prototype.setLabelRotationAngle),t.exportProperty(i.prototype,"setLabelRotationAngle",i.prototype.getLabelRotationAngle),t.exportProperty(i.prototype,"setLabelRotationPoint",i.prototype.setLabelRotationPoint),t.exportProperty(i.prototype,"getLabelRotationPoint",i.prototype.getLabelRotationPoint),t.exportProperty(i.prototype,"isPromoted",i.prototype.isPromoted),t.exportProperty(i.prototype,"setLabelValign",i.prototype.setLabelValign),t.exportProperty(i.prototype,"setLabelHalign",i.prototype.setLabelHalign),t.exportProperty(i.prototype,"getLabelValign",i.prototype.getLabelValign),t.exportProperty(i.prototype,"getLabelHalign",i.prototype.getLabelHalign),t.exportProperty(i.prototype,"setCoordinateSpace",i.prototype.setCoordinateSpace),t.exportProperty(i.prototype,"getCoordinateSpace",i.prototype.getCoordinateSpace),t.exportProperty(i.prototype,"getData",i.prototype.getData),t.exportProperty(t,"DiagramPoint",t.DiagramPoint),t.exportProperty(t,"DiagramRectangle",t.DiagramRectangle)}(t),function(t){t.Diagram=function(t,e,i){this.Init(t,e,i)},t.Obj.createSubclass(t.Diagram,t.BaseDiagram),t.Diagram.prototype.Init=function(e,n,s){t.Diagram.superclass.Init.call(this,e,n,s),this.Defaults=new i,this.EventManager=new o(e,this.processEvent,this),this.EventManager.addListeners(this),t.Agent.isTouchDevice()||this.EventManager.setKeyboardHandler(new r(this,this.EventManager)),this._nodes={},this._arNodeIds=[],this._arRootIds=[],this._links={},this._arLinkIds=[],this._renderCount=0,this._deferredObjCount=0,this._allNodeIdsMap={},this._unresolvedNodeIds=[],this._nodesToResolve=[]},t.Diagram.newInstance=function(e,i,n){return new t.Diagram(e,i,n)},t.Diagram.prototype.PreRender=function(){!this.IsResize()&&this._bRendered&&("none"!=this.getDataChangeAnim()&&(this._oldDataAnimState={id:this.getId(),getId:function(){return this.id},options:this.getOptions(),getOptions:function(){return this.options},panZoomMatrix:this.getPanZoomCanvas().getContentPane().getMatrix(),getPanZoomMatrix:function(){return this.panZoomMatrix},nodes:this._nodes?this.GetAllNodesMap():{},roots:this._arRootIds?this.GetRootNodeObjects():[],links:this._links?this.GetAllLinkObjects():[],linkIds:this.GetAllLinks(),getNodes:function(){return this.nodes},getRoots:function(){return this.roots},getLinks:function(){return this.links},getLinkIds:function(){return this.linkIds}},this._oldDataAnimState.getOptions=this._oldDataAnimState.getOptions,this._oldDataAnimState.getPanZoomMatrix=this._oldDataAnimState.getPanZoomMatrix,this._oldDataAnimState.getId=this._oldDataAnimState.getId,this._oldDataAnimState.getNodes=this._oldDataAnimState.getNodes,this._oldDataAnimState.getRoots=this._oldDataAnimState.getRoots,this._oldDataAnimState.getLinks=this._oldDataAnimState.getLinks,this._oldDataAnimState.getLinkIds=this._oldDataAnimState.getLinkIds),this._currentViewport=this.getPanZoomCanvas().getViewport(),this._bRendered=!1,this._oldPanZoomCanvas=this.getPanZoomCanvas(),this._setDataSourceListeners(this.getOptions().data,!1)),this.IsResize()||this.ResetNodesAndLinks()},t.Diagram.prototype.ResetNodesAndLinks=function(){this.setLinksPane(new t.Container(this.getCtx())),this.setNodesPane(new t.Container(this.getCtx())),this.setTopPane(new t.Container(this.getCtx())),this._nodes={},this._arNodeIds=[],this._arRootIds=[],this._links={},this._arLinkIds=[],this._highlightedObjects=null,this._promotedLinksMap=null,this._collapsedNodes=null,this.getOptions().nodes=[],this.getOptions().links=[],this._allNodeIdsMap={},this._unresolvedNodeIds=[]},t.Diagram.prototype._onAnimationEnd=function(){this._deleteContainer&&(this.removeChild(this._deleteContainer),this._deleteContainer.destroy()),this._deleteContainer=null,this.Animation&&this.getEventManager().addListeners(this),this.AnimationStopped||this.RenderComplete(),this.Animation=null,this.AnimationStopped=!1,this._bRendered&&(this._oldDataAnimState=null)},t.Diagram.prototype.animateUpdate=function(e,i){var o=new t.CustomAnimation(this.getCtx(),null,e.getAnimationDuration()),r=i.getPanZoomMatrix(),s=this.getPanZoomCanvas().getContentPane().getMatrix();r.equals(s)||(this.getPanZoomCanvas().getContentPane().setMatrix(r),o.getAnimator().addProp(t.Animator.TYPE_MATRIX,this.getPanZoomCanvas().getContentPane(),this.getPanZoomCanvas().getContentPane().getMatrix,this.getPanZoomCanvas().getContentPane().setMatrix,s)),e.constructAnimation(i.getRoots(),this._arRootIds?this.GetRootNodeObjects():[]),e.constructAnimation(i.getLinks(),this._links?this.GetAllLinkObjects():[]),e.add(o,n.UPDATE)},t.Diagram.prototype._resolveDeferredData=function(t,e){if(null==e||this._isNodeDisclosed(e.id)||this._discoverLinks(t,e)){var i=t.getData(e);this._deferredObjCount++;var n=this,o=this._renderCount;i.then(function(i){n._renderDeferredData(o,t,e?e:n.getOptions(),i)},function(i){n._renderDeferredData(o,t,e?e:n.getOptions(),null)})}},t.Diagram.prototype._renderDeferredData=function(e,i,n,o){if(e===this._renderCount){if(null!=o){if(n.nodes=t.JsonUtils.clone(o.nodes),Array.isArray(o.links)&&(this.getOptions().links=this.getOptions().links.concat(o.links)),this._findUnresolvedLinks(o),Array.isArray(n.nodes))for(this._nodesToResolve=this._nodesToResolve.concat(n.nodes);this._nodesToResolve.length>0;)this._resolveDeferredData(i,this._nodesToResolve.shift())}else n.nodes=null;this._deferredObjCount--,0===this._deferredObjCount&&this.RenderComponentInternal()}},t.Diagram.prototype._findUnresolvedLinks=function(t){if("none"!==this.getOptions().promotedLinkBehavior){if(Array.isArray(t.nodes))for(var e=0;e<t.nodes.length;e++)this._allNodeIdsMap[t.nodes[e].id]=!0;for(var e=this._unresolvedNodeIds.length-1;e>=0;e--)this._allNodeIdsMap[this._unresolvedNodeIds[e]]&&this._unresolvedNodeIds.splice(e,1);if(Array.isArray(t.links))for(var e=0;e<t.links.length;e++){var i=t.links[e];this._allNodeIdsMap[i.startNode]||this._unresolvedNodeIds.push(i.startNode),this._allNodeIdsMap[i.endNode]||this._unresolvedNodeIds.push(i.endNode)}}},t.Diagram.prototype._discoverLinks=function(t,e){var i=this.getOptions().promotedLinkBehavior;return!("none"===i||0==this._unresolvedNodeIds.length||"lazy"==i&&t.getChildCount(e)<=0)&&"disjoint"!=t.getDescendantsConnectivity(e)},t.Diagram.prototype.handleDataSourceEvent=function(t){this.render(this.getOptions(),this.Width,this.Height)},t.Diagram.prototype._setDataSourceListeners=function(t,e){t&&(this._dataSourceEventHandler||(this._dataSourceEventHandler=this.handleDataSourceEvent.bind(this)),e?(t.on("ADD",this._dataSourceEventHandler),t.on("REMOVE",this._dataSourceEventHandler),t.on("CHANGE",this._dataSourceEventHandler)):(t.off("ADD",this._dataSourceEventHandler),t.off("REMOVE",this._dataSourceEventHandler),t.off("CHANGE",this._dataSourceEventHandler)))},t.Diagram.prototype.Render=function(){if(t.Diagram.superclass.Render.call(this),this.InitComponentInternal(),this._deferredObjCount=0,this._nodesToResolve=[],this._bRendered||this.IsResize())0===this._deferredObjCount&&this.RenderComponentInternal();else{this._renderCount++;var e=this.getOptions().data;e?(this._setDataSourceListeners(e,!1),this._resolveDeferredData(e,null)):this.RenderComponentInternal()}},t.Diagram.prototype.RenderComponentInternal=function(t){var e=!1;if(!this._bRendered&&!this.IsResize()){this._setDataSourceListeners(this.getOptions().data,!0),this.prepareNodes(),this.renderLinks();var i=[];for(var n in this._nodes)i.push(n);e=0===i.length,this.getCtx().setKeyboardFocusArray([this])}if(e)this._processContent(t,e);else{this.contains(this._oldPanZoomCanvas)||this.addChild(this._oldPanZoomCanvas);var o=this.layout(t),r=this,s=this._renderCount;o.then(function(){s===r._renderCount&&r._processContent(t,e)},function(){s===r._renderCount&&(r.removeChild(r._oldPanZoomCanvas),r._oldPanZoomCanvas=null,r._bRendered=!0,this._currentViewport=null)})}},t.Diagram.prototype._processContent=function(e,i){var o;if(i||(this.removeChild(this._oldPanZoomCanvas),this._processHighlighting(),this._processInitialSelections(),this._updateKeyboardFocusEffect(),o=null==this._cachedViewBounds,o&&(this._cachedViewBounds=this.GetViewBounds(e)),this._fitContent(e)),this._oldPanZoomCanvas=null,this.StopAnimation(!0),this._bRendered||!this.getInitAnim()||this._oldDataAnimState){if("none"!=this.getDataChangeAnim()&&this._oldDataAnimState){this._deleteContainer=new t.Container(this.getCtx(),"Delete Container"),this.addChild(this._deleteContainer);var r=new n(this.getCtx(),this._deleteContainer,this._oldDataAnimState,this);r.constructAnimation([this._oldDataAnimState],[this]),this.Animation=r.getAnimation()}}else this.Animation=t.BlackBoxAnimationHandler.getInAnimation(this.getCtx(),this.getInitAnim(),this,null,this.getAnimationDuration());if(this.Animation?(this.getEventManager().hideTooltip(),this.getEventManager().removeListeners(this),this.Animation.setOnEnd(this._onAnimationEnd,this),this.Animation.play()):this._onAnimationEnd(),this._bRendered=!0,this._currentViewport=null,this.RefreshEmptyText(i),
this.IsPanningEnabled()){var s=this._cachedViewBounds;if(null!=s){var a=this.getPanZoomCanvas().getZoom(e);this.ConstrainPanning(s.x,s.y,s.w,s.h,a)}}this.ClearLayoutViewport(),o&&(this._cachedViewBounds=null)},t.Diagram.prototype._fitContent=function(t){var e=this.getPanZoomCanvas();if(this._bRendered){if(this.IsResize()){var i=this.AdjustMinZoom(t,this._cachedViewBounds),n=this.IsLayoutViewport()?this.GetLayoutViewport():i?i:this._cachedViewBounds;e.setZoomToFitEnabled(!0),e.zoomToFit(null,n),e.setZoomToFitEnabled(this.IsZoomingEnabled())}}else{if(this.AdjustMinZoom(t,this._cachedViewBounds),!this.IsResize()){var o=this.IsLayoutViewport(),n=o?this.GetLayoutViewport():this._cachedViewBounds;o&&e.setZoomToFitPadding(0),e.zoomToFit(null,n)}e.setPanningEnabled(this.IsPanningEnabled()),e.setPanDirection(this.getPanDirection()),e.setZoomingEnabled(this.IsZoomingEnabled()),e.setZoomToFitEnabled(this.IsZoomingEnabled())}},t.Diagram.prototype.SetOptions=function(e){t.Diagram.superclass.SetOptions.call(this,e),this.Options.nodes=[],this.Options.links=[],this.parseComponentJson(this.Options),this.SetPanningEnabled("none"!=this.Options.panning),this.SetZoomingEnabled("none"!=this.Options.zooming),this.setControlPanelBehavior("hidden"),this.setDataChangeAnim(this.Options.animationOnDataChange),this.setInitAnim("auto"==this.Options.animationOnDisplay?t.BlackBoxAnimationHandler.ALPHA_FADE:null),this.setSelectionMode(this.Options.selectionMode),this.setEmptyText(this.Options.emptyText?this.Options.emptyText:t.Bundle.getTranslation(this.Options,"labelNoData",t.Bundle.UTIL_PREFIX,"NO_DATA"))},t.Diagram.getDefaults=function(t){return(new i).getDefaults(t)},t.Diagram.prototype.getMaxZoom=function(){var t=this.getOptions().maxZoom,e=parseFloat(t);return e>0?e:1},t.Diagram.prototype.getMinZoom=function(){var t=this.getOptions().minZoom;if(t){var e=parseFloat(t);return e>0&&(t=Math.min(e,this.getMaxZoom())),t}return 0},t.Diagram.prototype.getPanDirection=function(){return this.getOptions().panDirection},t.Diagram.prototype.getAnimationDuration=function(){return t.StyleUtils.getTimeMilliseconds(this.getOptions().styleDefaults.animationDuration)/1e3},t.Diagram.prototype.processEvent=function(t,e){var i=t.type;"categoryHighlight"==i?this._processHighlighting(!0):"selection"==i&&(this.getOptions().selection=t.selection),t&&this.dispatchEvent(t)},t.Diagram.prototype.prepareNodes=function(){var t=this.getOptions().nodes;if(t&&(this._prepareNodes(null,t),!this.DisclosedNodes)){var e=this.getOptions().expanded;this.DisclosedNodes=e?"all"===e?this._arNodeIds:e:[]}},t.Diagram.prototype.renderLinks=function(){var e=this.getOptions().links;if(e){var i=this.getOptions().styleDefaults.linkDefaults;this._prepareLinkStyle(i,"style"),i.style=t.JsonUtils.merge(i.style,i._style);for(var n=0;n<e.length;n++){var o=e[n];if(!this._isLinkPromoted(o)){var r=s.ConvertLinkData(o);if(this.getOptions().linkProperties){var a=t.JsonUtils.clone(this.getOptions().linkProperties(o));this._prepareLinkStyle(a,"style"),r=t.JsonUtils.merge(r,a)}o=t.JsonUtils.merge(r,i);var l=s.newInstance(this,o,!1),h=l.getId();if(this._arLinkIds.push(h),!l.isHidden()){var u=this.getNodeById(l.getStartId()),d=this.getNodeById(l.getEndId());u.addOutLinkId(h),d.addInLinkId(h),l.render(),this._links[h]=l}}}if(this._promotedLinksMap){var c=this.getOptions().styleDefaults.promotedLink;this._prepareLinkStyle(c,"style"),c.style=t.JsonUtils.merge(c.style,c._style);for(var p in this._promotedLinksMap){var o=this._promotedLinksMap[p];o=t.JsonUtils.merge(o,c);var l=s.newInstance(this,o,!0),h=l.getId(),u=this.getNodeById(l.getStartId()),d=this.getNodeById(l.getEndId());u.addOutLinkId(h),d.addInLinkId(h),l.render(),this._arLinkIds.push(h),this._links[h]=l}}}},t.Diagram.prototype._prepareLinkStyle=function(e,i){e&&null!=e[i]&&(e[i]instanceof Object?null==e[i]._type&&(e[i]._type=s.CUSTOM_STYLE):e[i]=t.DiagramLinkUtils.getStrokeObject(e[i]))},t.Diagram.prototype.layout=function(e){for(var i=this.getOptions().layout,n=this.CreateEmptyLayoutContext(),o={},r=0;r<this._arRootIds.length;r++){var s=this._arRootIds[r];if(this.getNodeById(s)){o[s]=!0;var a=this.CreateLayoutContextNode(this.getNodeById(s),null,!this._bRendered,n);this._addChildLayoutContext(this.getNodeById(s),a,n,o),n.addNode(a)}}for(var l in this._links){var h=this.getLinkById(l);if(h){var u=h.getData().startNode,d=h.getData().endNode;o[u]&&o[d]&&n.addLink(this.CreateLayoutContextLink(h,u,d,null,n))}}if(this._currentViewport){var c=this._currentViewport,p=this.getLayoutOffset(),_=new t.DiagramRectangle(c.x-p.x,c.y-p.y,c.w,c.h);n.setCurrentViewport(_)}if(i&&"function"==typeof i){var g=this,m=i(n);m||(m={then:function(t,e){t()}}),this.setAlphas(0);var f=this._renderCount;return m.then(function(t){if(g._renderCount===f||g.IsResize()){g.setAlphas(1);for(var i=n.getNodeCount(),o=0;o<i;o++){var r=n.getNodeByIndex(o);g.renderNodeFromContext(r)}g.ApplyLayoutContext(n,e,!0)}},function(t){}),m}this.Log("dvt.Diagram: Layout function is not defined",1)},t.Diagram.prototype.setAlphas=function(t){this._bRendered||(this.getLinksPane().setAlpha(t),this.getNodesPane().setAlpha(t))},t.Diagram.prototype.getNodeById=function(t){return this._nodes[t]},t.Diagram.prototype.getLinkById=function(t){return this._links[t]},t.Diagram.prototype.GetAllLinks=function(){return this._arLinkIds},t.Diagram.prototype.GetAllLinkObjects=function(){var t=[];for(var e in this._links)t.push(this._links[e]);return t},t.Diagram.prototype.GetAllNodes=function(){return this._arNodeIds},t.Diagram.prototype.GetAllNodesMap=function(){var t={};for(var e in this._nodes)t[e]=this._nodes[e];return t},t.Diagram.prototype.GetAllNodeObjects=function(){var t=[];for(var e in this._nodes)t.push(this._nodes[e]);return t},t.Diagram.prototype.GetRootNodeObjects=function(){for(var t=[],e=0;e<this._arRootIds.length;e++){var i=this._nodes[this._arRootIds[e]];i&&t.push(i)}return t},t.Diagram.prototype.HandleZoomEvent=function(e){t.Diagram.superclass.HandleZoomEvent.call(this,e);var i=e.getSubType();switch(i){case t.ZoomEvent.SUBTYPE_ADJUST_PAN_CONSTRAINTS:if(this.IsPanningEnabled()){var n=e.getNewZoom(),o=this._cachedViewBounds?this._cachedViewBounds:this.GetViewBounds(e.getAnimator());this.ConstrainPanning(o.x,o.y,o.w,o.h,n)}break;case t.ZoomEvent.SUBTYPE_ZOOM_TO_FIT_CALC_BOUNDS:if(!this.IsLayoutViewport()){var o=this._cachedViewBounds?this._cachedViewBounds:this.GetViewBounds(e.getAnimator());e.setZoomToFitBounds(o)}break;case t.ZoomEvent.SUBTYPE_ZOOMED:if(this.getOptions().zoomRenderer&&e.getOldZoom()!==e.getNewZoom())for(var r in this._nodes){var s=this.getNodeById(r);s.rerenderOnZoom(e)}}},t.Diagram.prototype.prepareForDataChange=function(){},t.Diagram.prototype.getNavigableLinksForNodeId=function(t){var e=[];for(var i in this._links){var n=this.getLinkById(i),o=n.getStartId(),r=n.getEndId();o!=t&&r!=t||!n.getVisible()||e.push(n)}return e},t.Diagram.prototype.GetComponentDescription=function(){return t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"DIAGRAM")},t.Diagram.prototype._processInitialSelections=function(){var t=this.Options.selection;if(t&&this.isSelectionSupported()){var e=[];for(var i in this._nodes)e.push(this.getNodeById(i));for(var n in this._links)e.push(this.getLinkById(n));this.getSelectionHandler().processInitialSelections(this.Options.selection,e)}},t.Diagram.prototype._processHighlighting=function(e){e&&this.EventManager.removeListeners(this,!0),this._highlightedObjects&&(this._updateAlphas(!1,this._highlightedObjects),this._highlightedObjects=null);var i=this.Options.highlightedCategories;if(!i||0===i.length)return void(e&&this.EventManager.addListeners(this));var n="any"==this.Options.highlightMatch;this._highlightedObjects={};var o=[];for(var r in this._nodes){var s=this.getNodeById(r),a=n?t.ArrayUtils.hasAnyItem(s.getCategories(),i):t.ArrayUtils.hasAllItems(s.getCategories(),i);a&&(this._highlightedObjects[s.getId()]=s,o.push(s))}this._processNodeConnections(o);var l=[];for(var h in this._links){var u=this.getLinkById(h),a=n?t.ArrayUtils.hasAnyItem(u.getCategories(),i):t.ArrayUtils.hasAllItems(u.getCategories(),i);a&&(this._highlightedObjects[u.getId()]=u,l.push(u))}if("linkAndNodes"==this.Options.linkHighlightMode&&this._processLinkConnections(l),this._updateAlphas(!0,this._highlightedObjects),e){var d=this;setTimeout(function(){d.getEventManager().addListeners(d)},0)}},t.Diagram.prototype._processNodeConnections=function(t){var e=this.Options.nodeHighlightMode;if("node"!=e){for(var i="nodeAndIncomingLinks"==e||"nodeAndLinks"==e,n="nodeAndOutgoingLinks"==e||"nodeAndLinks"==e,o=[],r=0;r<t.length;r++){var s=t[r],a=i&&s.getInLinkIds()?s.getInLinkIds():[];a=n&&s.getOutLinkIds()?a.concat(s.getOutLinkIds()):a;for(var l=0;l<a.length;l++){var h=a[l];this._highlightedObjects[h]=this.getLinkById(h),o.push(this.getLinkById(h))}}this._processLinkConnections(o)}},t.Diagram.prototype._processLinkConnections=function(t){for(var e=0;e<t.length;e++){var i=t[e],n=i.getStartId(),o=i.getEndId();this._highlightedObjects[n]=this.getNodeById(n),this._highlightedObjects[o]=this.getNodeById(o)}},t.Diagram.prototype._updateAlphas=function(t,e){var i;if(this._arNodeIds.length==this._arRootIds.length){i=t?this.Options.styleDefaults._highlightAlpha:1,this.getLinksPane().setAlpha(i),this.getNodesPane().setAlpha(i);for(var n in e)t?this.moveToDiagramFront(e[n]):e[n]instanceof s?this.moveToLinks(e[n]):e[n]instanceof a&&this.moveToNodes(e[n])}else if(t){i=this.Options.styleDefaults._highlightAlpha;var o={};for(var n in e)e[n].setAlpha(1),o[n]=!0;for(var r in this._nodes)o[r]||this.getNodeById(r).setAlpha(i);for(var l in this._links)o[l]||this.getLinkById(l).setAlpha(i)}else{for(var r in this._nodes)this.getNodeById(r).setAlpha(1);for(var l in this._links)this.getLinkById(l).setAlpha(1)}},t.Diagram.prototype.highlight=function(e){this.Options.highlightedCategories=t.JsonUtils.clone(e),this._processHighlighting()},t.Diagram.prototype.select=function(e){this.Options.selection=t.JsonUtils.clone(e),this._processInitialSelections()},t.Diagram.prototype.getAutomation=function(){return this.Automation||(this.Automation=new l(this)),this.Automation},t.Diagram.prototype.Log=function(t,e){var i=this.getOptions()._logger;if(i)switch(e){case 1:i.error&&i.error(t);break;case 2:i.warn&&i.warn(t);break;case 3:i.info&&i.info(t);break;default:i.log&&i.log(t)}},t.Diagram.prototype.processDefaultHoverEffect=function(t,e){var i=this.getNodeById(t);i&&i.processDefaultHoverEffect(e)},t.Diagram.prototype.processDefaultSelectionEffect=function(t,e){var i=this.getNodeById(t);i&&i.processDefaultSelectionEffect(e)},t.Diagram.prototype.processDefaultFocusEffect=function(t,e){var i=this.getNodeById(t);i&&i.processDefaultFocusEffect(e)},t.Diagram.prototype.renderNodeFromContext=function(t){if(!t.IsRendered){var e=this.getNodeById(t.getId());if(e.isDisclosed()){for(var i=this.CreateEmptyLayoutContext(),n=t.getChildNodes(),o=0;o<n.length;o++){var r=n[o];this.renderNodeFromContext(r),i.addNode(r)}this.ApplyLayoutContext(i)}e.render(),this.UpdateNodeLayoutContext(t,e)}},t.Diagram.prototype._prepareNodes=function(e,i){var n=this.getOptions().styleDefaults.nodeDefaults;this._prepareNodeStyle(n,"backgroundStyle"),this._prepareNodeStyle(n,"containerStyle");for(var o=0;o<i.length;o++){var r=i[o],s=a.ConvertNodeData(r);if(this.getOptions().nodeProperties){var l=t.JsonUtils.clone(this.getOptions().nodeProperties(r));this._prepareNodeStyle(l,"backgroundStyle"),this._prepareNodeStyle(l,"containerStyle"),s=t.JsonUtils.merge(s,l)}r=t.JsonUtils.merge(s,n);var h=a.newInstance(this,r),u=h.getId();e?(e.addChildNodeId(u),h.setGroupId(e.getId())):this._arRootIds.push(u),this._arNodeIds.push(u),r.nodes&&(this._isNodeDisclosed(u)?(h.setDisclosed(!0),this._prepareNodes(h,r.nodes)):this._addToCollapsedArray(h)),h.isHidden()||(e&&e.GetChildNodePane()?e.GetChildNodePane().addChild(h):this.getNodesPane().addChild(h),this._nodes[u]=h)}},t.Diagram.prototype._prepareNodeStyle=function(e,i){!e||null==e[i]||e[i]instanceof Object||(e[i]=t.CSSStyle.cssStringToObject(e[i]))},t.Diagram.prototype.setNodeDisclosed=function(e,i){var n=-1;this.DisclosedNodes&&(n=t.ArrayUtils.getIndex(this.DisclosedNodes,e)),(!i&&n>-1||i&&n<0)&&this.dispatchEvent(new t.EventFactory.newEvent(i?"beforeExpand":"beforeCollapse",e))},t.Diagram.prototype.expand=function(e){this.DisclosedNodes||(this.DisclosedNodes=[]);var i=t.ArrayUtils.getIndex(this.DisclosedNodes,e);i<0&&(this.DisclosedNodes.push(e),this.render(this.getOptions(),this.Width,this.Height),this.dispatchEvent(new t.EventFactory.newEvent("expand",e)))},t.Diagram.prototype.collapse=function(e){var i=-1;this.DisclosedNodes&&(i=t.ArrayUtils.getIndex(this.DisclosedNodes,e)),i>-1&&(this.DisclosedNodes.splice(i,1),this.render(this.getOptions(),this.Width,this.Height),this.dispatchEvent(new t.EventFactory.newEvent("collapse",e)))},t.Diagram.prototype._addChildLayoutContext=function(t,e,i,n){if(t.isDisclosed()){for(var o=t.getChildNodeIds(),r=[],s=0;s<o.length;s++){var a=this.getNodeById(o[s]);if(a.getVisible()){n[a.getId()]=!0;var l=this.CreateLayoutContextNode(a,null,!this._bRendered,i);i.addNodeToMap(l),l.setParentNode(e),r.push(l),this._addChildLayoutContext(a,l,i,n)}}e.setChildNodes(r)}},t.Diagram.prototype._isNodeDisclosed=function(e){var i=this.DisclosedNodes?this.DisclosedNodes:this.getOptions().expanded;return i&&t.ArrayUtils.getIndex(i,e)>-1||i&&t.ArrayUtils.getIndex(i,"all")>-1},t.Diagram.prototype._isLinkPromoted=function(t){var e=this.getNodeById(t.startNode),i=this.getNodeById(t.endNode);if(e&&i||!this._collapsedNodes)return!1;if("none"===this.getOptions().promotedLinkBehavior)return!0;var n=e?e.getId():this._findFirstVisibleAncestor(t.startNode),o=i?i.getId():this._findFirstVisibleAncestor(t.endNode);if(!n||!o)return!1;if(n===o)return!1;var r=s.GetPromotedLinkId(n,o);return this._promotedLinksMap||(this._promotedLinksMap={}),this._promotedLinksMap[r]?this._promotedLinksMap[r]._links.push(t):this._promotedLinksMap[r]={id:r,startNode:n,endNode:o,_links:[t]},!0},t.Diagram.prototype._addToCollapsedArray=function(t){this._collapsedNodes||(this._collapsedNodes=[]),this._collapsedNodes.push(t)},t.Diagram.prototype._findFirstVisibleAncestor=function(t){for(var e=function(t,i){if(t)for(var n=0;n<t.length;n++)if(t[n].id===i||e(t[n].nodes,i))return!0;return!1},i=0;i<this._collapsedNodes.length;i++){var n=this._collapsedNodes[i];if(e(n.getData().nodes,t))return n.getId()}return null},t.Diagram.prototype._updateKeyboardFocusEffect=function(){var t=this.getEventManager().getFocus(),e=!1;if(t){var i;t instanceof a?i=this.getNodeById(t.getId()):t instanceof s&&(i=this.getLinkById(t.getId())),e=t.isShowingKeyboardFocusEffect(),i&&e&&i.showKeyboardFocusEffect(),this.getEventManager().setFocus(i)}},t.Diagram.prototype.clearDisclosedState=function(){this.DisclosedNodes=null},t.Diagram.prototype.ShowLinkCreationFeedback=function(e){if(this.getEventManager().LinkCreationStarted){var i=this._context.pageToStageCoords(e.pageX,e.pageY),n=this.getPanZoomCanvas().getContentPane().stageToLocal({x:i.x,y:i.y});if(this._linkCreationFeedBack){var o=this._linkCreationFeedBack.getPoints();this._linkCreationFeedBack.setPoints([o[0],o[1],n.x,n.y])}else{var r=this.getEventManager().DragSource.getDragObject();if(r instanceof a){var l=this.getEventManager().DragSource.getDragCoords(),h=this.getPanZoomCanvas().getContentPane().stageToLocal({x:l.x,y:l.y}),u=this.getOptions().styleDefaults.linkDefaults;this._prepareLinkStyle(u,"style");var d=this.getOptions().dnd.drag.ports.linkStyle;if(d&&"function"==typeof d){var c=d({dataContext:r.getDataContext(),portElement:r.__dragPort});c&&(u.style=t.JsonUtils.merge(c.svgStyle,u.style),u.svgClassName=c.svgClassName?c.svgClassName:u.svgClassName)}var p={id:"linkFeedback",startNode:r.getId(),endNode:r.getId()};p=t.JsonUtils.merge(p,u);var _=s.newInstance(this,p,!1);this.getNodesPane().addChild(_),_.setMouseEnabled(!1),_.setPoints([h.x,h.y,n.x,n.y]),this._linkCreationFeedBack=_}}}},t.Diagram.prototype.HideLinkCreationFeedback=function(){this.getNodesPane().removeChild(this._linkCreationFeedBack),this._linkCreationFeedBack=null},t.Bundle.addDefaultStrings(t.Bundle.DIAGRAM_PREFIX,{PROMOTED_LINK:"{0} link",PROMOTED_LINKS:"{0} links",PROMOTED_LINK_ARIA_DESC:"Indirect"});var e=function(t,i){e.superclass.constructor.call(this,t,i),this.setHoverDelay(e._HOVER_DELAY),this._diagram=i};t.Obj.createSubclass(e,t.CategoryRolloverHandler,"DvtDiagramCategoryRolloverHandler"),e._HOVER_DELAY=100,e.prototype.GetRolloverCallback=function(e,i,n,o){var r=function(){this.SetHighlightMode(!0),this._diagram.processEvent(e)};return t.Obj.createCallback(this,r)},e.prototype.GetRolloutCallback=function(e,i,n,o){var r=function(){this.SetHighlightModeTimeout(),this._diagram.processEvent(e)};return t.Obj.createCallback(this,r)};var i=function(){this.Init({skyros:i.VERSION_1,alta:i.SKIN_ALTA})};t.Obj.createSubclass(i,t.BaseComponentDefaults,"DvtDiagramDefaults"),i.VERSION_1={skin:t.CSSStyle.SKIN_ALTA,emptyText:null,selectionMode:"none",animationOnDataChange:"none",animationOnDisplay:"none",maxZoom:1,highlightMatch:"all",nodeHighlightMode:"node",linkHighlightMode:"link",panning:"none",touchResponse:"auto",zooming:"none",promotedLinkBehavior:"lazy",_statusMessageStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA),dnd:{drag:{nodes:{},ports:{}},drop:{background:{},nodes:{},links:{},ports:{}}},styleDefaults:{animationDuration:500,hoverBehaviorDelay:200,_highlightAlpha:.1,nodeDefaults:{_containerStyle:new t.CSSStyle("border-color:#abb3ba;background-color:#f9f9f9;border-width:.5px;border-radius:1px;padding-top:20px;padding-left:20px;padding-bottom:20px;padding-right:20px;"),labelStyle:t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_12+"color:#383A47",hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",icon:{width:10,height:10,fillPattern:"none",shape:"circle"}},linkDefaults:{startConnectorType:"none",endConnectorType:"none",width:1,_style:{_type:"solid"},hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",labelStyle:t.BaseComponentDefaults.FONT_FAMILY_ALTA_BOLD_12+"color:#383A47",_hitDetectionOffset:10},promotedLink:{startConnectorType:"none",endConnectorType:"none",width:1,_style:{_type:"dot",strokeDasharray:"2,3"},color:"#778999",hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",_hitDetectionOffset:10}}},i.SKIN_ALTA={};var n=function(t,e,i,n){this.Init(t,e,i,n)};t.Obj.createSubclass(n,t.DataAnimationHandler,"DvtDiagramDataAnimationHandler"),n.DELETE=0,n.UPDATE=1,n.INSERT=2,n.prototype.Init=function(t,e,i,o){n.superclass.Init.call(this,t,e),this._oldDiagram=i,this._newDiagram=o},n.prototype.getOldDiagram=function(){return this._oldDiagram},n.prototype.getNewDiagram=function(){return this._newDiagram},n.prototype.getAnimationDuration=function(){return t.StyleUtils.getTimeMilliseconds(this._oldDiagram.getOptions().styleDefaults.animationDuration)/1e3},n.prototype.constructAnimation=function(e,i){var o=!1;if(i&&i.length>0&&(o=i[0]instanceof s),o&&!this.getCtx().isOffscreen()){var r,a,l=n._expandLinksArrayToMap(e),h=n._expandLinksArrayToMap(i),u={};for(var d in l)if(r=l[d],a=h[d])if(!r.isPromoted()&&!a.isPromoted()||r.isPromoted()&&a.isPromoted()&&r.getId()==a.getId())a.animateUpdate(this,r);else{var c=r.isPromoted()?r.getData()._links.length:1,p=a.isPromoted()?a.getData()._links.length:1;c>p&&!u[r.getId()]?this._constructExpandCollapseAnimation(r,h,u,!0):c<p&&!u[a.getId()]&&this._constructExpandCollapseAnimation(a,l,u,!1)}else t.ArrayUtils.getIndex(this.getNewDiagram().GetAllLinks(),r.getId())==-1&&r.animateDelete(this);for(var d in h)r=l[d],a=h[d],r||t.ArrayUtils.getIndex(this.getOldDiagram().getLinkIds(),a.getId())!=-1||a.animateInsert(this)}else n.superclass.constructAnimation.call(this,e,i)},n.prototype._constructExpandCollapseAnimation=function(e,i,n,o){for(var r=[],s=e.getData()._links,a=0;a<s.length;a++){var l=i[s[a].id];l&&t.ArrayUtils.getIndex(r,l)===-1&&r.push(l)}r.length>0&&(o?e.animateExpand(this,r):e.animateCollapse(this,r),n[e.getId()]=!0)},n._expandLinksArrayToMap=function(t){for(var e={},i=0;i<t.length;i++){var n=t[i];if(n.isPromoted())for(var o=n.getData()._links,r=0;r<o.length;r++)e[o[r].id]=n;else e[n.getId()]=n}return e};var o=function(t,e,i){this.Init(t,e,i),this._diagram=i,this._linkDragSelector=null,this._linkDropSelector=null};t.Obj.createSubclass(o,t.EventManager,"DvtDiagramEventManager"),o.prototype.showFocusEffect=function(t,e){this.ShowFocusEffect(t,e)},o.prototype.ShowFocusEffect=function(t,e){this._diagram.isPanning()||o.superclass.ShowFocusEffect.call(this,t,e)},o.prototype.ProcessRolloverEvent=function(e,i,n){var o=this._diagram.getOptions();if("dim"==o.hoverBehavior){var r=i.getCategories?i.getCategories():[];o.highlightedCategories=n?r.slice():null;var s=t.EventFactory.newCategoryHighlightEvent(o.highlightedCategories,n),a=t.StyleUtils.getTimeMilliseconds(o.styleDefaults.hoverBehaviorDelay);this.RolloverHandler.processEvent(s,this._diagram.GetAllNodeObjects(),a,"any"==o.highlightMatch)}},o.prototype.CreateCategoryRolloverHandler=function(t,i){return new e(t,i)},o.prototype.ProcessKeyboardEvent=function(e){var i=!0,n=e.keyCode,r=this.getFocus(),s=r instanceof a?r._customNodeContent:null;return n!=t.KeyboardEvent.TAB&&this._bPassOnEvent?(s.fireKeyboardListener(e),e.preventDefault()):n==t.KeyboardEvent.TAB&&s instanceof t.BaseComponent?!e.shiftKey&&r.isShowingKeyboardFocusEffect()?(r.hideKeyboardFocusEffect(),s.fireKeyboardListener(e),e.preventDefault(),this._bPassOnEvent=!0):e.shiftKey&&this._bPassOnEvent?(this.ShowFocusEffect(e,r),e.preventDefault(),this._bPassOnEvent=!1):(this._bPassOnEvent&&r.showKeyboardFocusEffect(),i=o.superclass.ProcessKeyboardEvent.call(this,e),this._bPassOnEvent=!1):n==t.KeyboardEvent.SPACE&&e.ctrlKey&&e.shiftKey?r&&r.HandleKeyboardEvent&&r.HandleKeyboardEvent(e):(n==t.KeyboardEvent.TAB&&r&&this._diagram.ensureObjInViewport(e,r),i=o.superclass.ProcessKeyboardEvent.call(this,e)),i},o.prototype.GetTouchResponse=function(){var e=this._diagram.getOptions();return"none"!==e.panning||"none"!==e.zooming?t.EventManager.TOUCH_RESPONSE_TOUCH_HOLD:e.touchResponse===t.EventManager.TOUCH_RESPONSE_TOUCH_START?t.EventManager.TOUCH_RESPONSE_TOUCH_START:t.EventManager.TOUCH_RESPONSE_AUTO},o.prototype.HandleTouchClickInternal=function(e){return this.GetEventInfo(e,t.PanZoomCanvasEventManager.EVENT_INFO_PANNED_KEY)},o.prototype.StoreInfoByEventType=function(e){return e!=t.PanZoomCanvasEventManager.EVENT_INFO_PANNED_KEY&&o.superclass.StoreInfoByEventType.call(this,e)},o.prototype.getComponent=function(){return this._diagram},o.prototype.isDndSupported=function(){return!0},o.prototype.GetDragSourceType=function(t){var e=this.DragSource.getDragObject();if(e&&e.__dragType)return e.__dragType;if(e instanceof a){null===this._linkDragSelector&&(this._linkDragSelector=this._diagram.getOptions().dnd.drag.ports.selector);var i;if(this._linkDragSelector){var n=this.DragSource.getDragCoords(),o=this._context.stageToPageCoords(n.x,n.y);i=this._getPortElement(document.elementFromPoint(o.x,o.y),this._linkDragSelector),i&&(this.LinkCreationStarted=!0,e.__dragPort=i)}return e.__dragType=i?"ports":"nodes",e.__dragType}return null},o.prototype.GetDragDataContexts=function(){var e=this.DragSource.getDragObject();if(this._diagram.isSelectionSupported()&&this._diagram.getSelectionHandler().getSelectedCount()>1){for(var i=this._diagram.getSelectionHandler().getSelection(),n=this._getTopLeftContentCorner(i),o=this._diagram.getPanZoomCanvas().getZoom(),r=[],s=0;s<i.length;s++)if(i[s]instanceof a){var l=i[s].getDataContext(),h=i[s].getDimensions(this._context.getStage());l.nodeOffset=new t.Point((h.x-n.x)/o,(h.y-n.y)/o),r.push(l)}return r}if(e instanceof a){if("ports"===e.__dragType&&e.__dragPort)return{dataContext:e.getDataContext(),portElement:e.__dragPort};var l=e.getDataContext();return l.nodeOffset=new t.Point(0,0),[l]}return[]},o.prototype.GetDropOffset=function(e){var i;if(this._diagram.isSelectionSupported()&&this._diagram.getSelectionHandler().getSelectedCount()>1)i=this._getTopLeftContentCorner(this._diagram.getSelectionHandler().getSelection());else{var n=this.DragSource.getDragObject();n instanceof a&&(i=n.getDimensions(this._context.getStage()))}if(i){var o=this._context.pageToStageCoords(e.pageX,e.pageY),r=this._diagram.getPanZoomCanvas().getZoom();return new t.Point((i.x-o.x)/r,(i.y-o.y)/r)}return null},o.prototype._getTopLeftContentCorner=function(e){if(!e)return null;for(var i=Number.MAX_VALUE,n=Number.MAX_VALUE,o=0;o<e.length;o++)if(e[o]instanceof a){var r=e[o].getDimensions(this._context.getStage());i=r?Math.min(r.x,i):i,n=r?Math.min(r.y,n):n}return new t.Point(i,n)},o.prototype.OnDndDragStart=function(t){var e=this.DragSource.getDragObject();e&&e.__dragType&&(e.__dragType=null,e.__dragPort=null),this.LinkCreationStarted=!1,o.superclass.OnDndDragStart.call(this,t)},o.prototype.OnDndDragOver=function(t){o.superclass.OnDndDragOver.call(this,t),this.LinkCreationStarted&&this._diagram.ShowLinkCreationFeedback(t)},o.prototype.OnDndDragEnd=function(t){o.superclass.OnDndDragEnd.call(this,t),this.LinkCreationStarted&&(this._diagram.HideLinkCreationFeedback(),this.LinkCreationStarted=!1),this._diagram.getPanZoomCanvas().panZoomEnd(),this._setPanningEnabled(!0)},o.prototype._setPanningEnabled=function(t){this._diagram.IsPanningEnabled()&&this._diagram.getPanZoomCanvas().setPanningEnabled(t)},o.prototype.IsDragSupported=function(){if(!this._isDragSupported){var t=this._diagram.getOptions();this._isDragSupported=this.isDndSupported()&&(t.dnd.drag.nodes.dataTypes||t.dnd.drag.ports.dataTypes)}return this._isDragSupported},o.prototype.OnMouseDown=function(t){var e=this.GetLogicalObject(this.GetCurrentTargetForEvent(t));this.IsDragSupported()&&e instanceof a&&this._setPanningEnabled(!1),o.superclass.OnMouseDown.call(this,t)},o.prototype.OnMouseUp=function(t){o.superclass.OnMouseUp.call(this,t),this._setPanningEnabled(!0)},o.prototype.HandleImmediateTouchStartInternal=function(t){if(this.IsDragSupported()&&1==t.targetTouches.length){var e=this.GetLogicalObject(this.GetCurrentTargetForEvent(t));e instanceof a&&this._setPanningEnabled(!1)}},o.prototype.HandleImmediateTouchEndInternal=function(t){this.IsDragSupported()&&this._setPanningEnabled(!0)},o.prototype.GetDropTargetType=function(t){var e=this.GetLogicalObject(this.GetCurrentTargetForEvent(t));if(this._diagram.getCache().putToCache("dropTarget",e),null===e)return"background";if(e instanceof a){var i;return null===this._linkDropSelector&&(this._linkDropSelector=this._diagram.getOptions().dnd.drop.ports.selector),this._linkDropSelector&&(i=this._getPortElement(t.getNativeEvent().target,this._linkDropSelector)),e.__dropPort=i,i?"ports":"nodes"}return e instanceof s?"links":null},o.prototype.GetDropEventPayload=function(e){var i=e.getNativeEvent().dataTransfer,n=Number(i.getData(t.EventManager.DROP_OFFSET_X_DATA_TYPE))||0,o=Number(i.getData(t.EventManager.DROP_OFFSET_Y_DATA_TYPE))||0,r=this._diagram.getPanZoomCanvas().getContentPane().stageToLocal(this.getCtx().pageToStageCoords(e.pageX,e.pageY)),l=this._diagram.getLayoutOffset(),h={x:r.x-l.x+n,y:r.y-l.y+o},u=this.GetLogicalObject(this.GetCurrentTargetForEvent(e));if(u instanceof a){u.__dropPort?(h.dataContext=u.getDataContext(),h.portElement=u.__dropPort):h.nodeContext=u.getDataContext();var d=u.getDimensions(this._context.getStage()),c=d?this._diagram.getPanZoomCanvas().getContentPane().stageToLocal({x:d.x,y:d.y}):null;h.nodeX=c?r.x-c.x:null,h.nodeY=c?r.y-c.y:null}else u instanceof s&&(h.linkContext=u.getDataContext());return h},o.prototype.ShowDropEffect=function(e){var i=this.GetDropTargetType(e),n=this._diagram.getCache().getFromCache("dropTarget");if("background"===i){var o=this._diagram.getPanZoomCanvas().getBackgroundPane();o.setClassName("oj-active-drop")}else"nodes"===i||"links"===i?n&&n.ShowDropEffect&&n.ShowDropEffect():n&&"ports"===i&&n.__dropPort&&t.ToolkitUtils.addClassName(n.__dropPort,"oj-active-drop")},o.prototype.ShowRejectedDropEffect=function(e){var i=this.GetDropTargetType(e),n=this._diagram.getCache().getFromCache("dropTarget");if("background"===i){var o=this._diagram.getPanZoomCanvas().getBackgroundPane();o.setClassName("oj-invalid-drop")}else"nodes"===i||"links"===i?n&&n.ShowRejectedDropEffect&&n.ShowRejectedDropEffect():n&&"ports"===i&&n.__dropPort&&t.ToolkitUtils.addClassName(n.__dropPort,"oj-invalid-drop")},o.prototype.ClearDropEffect=function(){var e=this._diagram.getPanZoomCanvas().getBackgroundPane();e.setClassName(null);var i=this._diagram.getCache().getFromCache("dropTarget");i&&i.ClearDropEffect&&i.ClearDropEffect(),i&&i.__dropPort&&(t.ToolkitUtils.removeClassName(i.__dropPort,"oj-active-drop"),t.ToolkitUtils.removeClassName(i.__dropPort,"oj-invalid-drop")),this._diagram.getCache().putToCache("dropTarget",null)},o.prototype._getPortElement=function(t,e){return t&&t.closest?t.closest(e):null};var r=function(t,e){this.Init(t,e)};t.Obj.createSubclass(r,t.BaseDiagramKeyboardHandler,"DvtDiagramKeyboardHandler"),r.prototype.isNavigationEvent=function(e){var i=!1;switch(e.keyCode){case t.KeyboardEvent.OPEN_BRACKET:case t.KeyboardEvent.CLOSE_BRACKET:i=!0;break;case t.KeyboardEvent.OPEN_ANGLED_BRACKET:case t.KeyboardEvent.CLOSE_ANGLED_BRACKET:i=!!e.altKey;break;default:i=r.superclass.isNavigationEvent.call(this,e)}return i},r.prototype.processKeyDown=function(e){var i=e.keyCode;if(i==t.KeyboardEvent.TAB){var n=this._eventManager.getFocus();if(n)return t.EventManager.consumeEvent(e),n;var o=this.GetDiagram().GetRootNodeObjects();if(o.length>0){t.EventManager.consumeEvent(e);var s=this.getDefaultNavigable(o);return this.GetDiagram().ensureObjInViewport(e,s),s}}return r.superclass.processKeyDown.call(this,e)},r.prototype.GetVisibleNode=function(t){return this.GetDiagram().getNodeById(t)};var s=function(t,e,i,n){this.Init(t,e,i,n)};t.Obj.createSubclass(s,t.BaseDiagramLink,"DvtDiagramLink"),s.CUSTOM_STYLE="customStyle",s.newInstance=function(t,e,i){return new s(t.getCtx(),t,e,i)},s.prototype.Init=function(e,i,n,o){s.superclass.Init.call(this,e,n.id,i),this._data=n,this.setPromoted(o),this._diagram.isSelectionSupported()&&this.setCursor(t.SelectionEffectUtils.getSelectingCursor()),this.setGroupId(s._getCommonAncestorId(this,i))},s.prototype.getData=function(){return this._data},s.prototype.getId=function(){return this.getData().id},s.prototype.getActiveElementId=function(){return this._activeElementId||(this._activeElementId=this.getId()+Math.floor(1e9*Math.random())),this._activeElementId},s.prototype.getStartId=function(){return this.getData().startNode},s.prototype.getEndId=function(){return this.getData().endNode},s.prototype.getLabelBounds=function(){var t=null;return this._labelObj&&(t=this._labelObj.getDimensions()),t},s.prototype.getLinkStyle=function(){return this.getData().svgStyle||this.getData().style},s.prototype.getLinkWidth=function(){return this.getData().width},s.prototype.getLinkColor=function(){return this.getData().color},s.prototype.getStartConnectorType=function(){return this.getData().startConnectorType},s.prototype.getEndConnectorType=function(){return this.getData().endConnectorType},s.prototype.getStartConnectorOffset=function(){return this.getStartConnectorType()?t.DiagramLinkConnectorUtils.getStandardConnectorOffset(this.getStartConnectorType(),this.GetAppliedLinkWidth(),this.GetAppliedLinkWidth()):0},s.prototype.getEndConnectorOffset=function(){return this.getEndConnectorType()?t.DiagramLinkConnectorUtils.getStandardConnectorOffset(this.getEndConnectorType(),this.GetAppliedLinkWidth(),this.GetAppliedLinkWidth()):0},s.prototype.render=function(){var t=this.GetDiagram(),e=this.getGroupId(),i=t.getNodeById(this.getStartId()).getGroupId(),n=t.getNodeById(this.getEndId()).getGroupId();if(e){var o=t.getNodeById(e).GetChildNodePane();e==i&&e==n?o.addChildAt(this,0):o.addChild(this)}else i||n?t.getNodesPane().addChild(this):t.getLinksPane().addChild(this);
s._renderLinkLabels(t,this.getData(),this),this.setAriaRole("img"),this.UpdateAriaLabel(),this._diagram.getEventManager().associate(this,this)},s.prototype.setPoints=function(t){!this._pathCmds&&t&&s._renderLinkShape(this.GetDiagram(),this.getData(),this),s.superclass.setPoints.call(this,t)},s._renderLinkShape=function(e,i,n){var o=n._pathCmds;o||(o=["M",0,0,"L",0,0]);var r=i.id,a=i.color,l=i.width,h=i.svgStyle||i.style,u=i._hitDetectionOffset;n._hitDetectionUnderlay=n.CreateUnderlay("#000000",0,u),n.addChildAt(n._hitDetectionUnderlay,0);var d=new t.SolidStroke(a,1,l);d.setFixedWidth(!0);var c=new t.Path(n.getCtx(),o,r),p=i.svgClassName||i.className;if(c.setFill(null),c.setClassName(p),h&&h instanceof Object){var _=t.Stroke.SOLID;h._type==s.CUSTOM_STYLE?h.strokeDasharray&&(_=t.Stroke.DASHED,h.strokeDasharray=t.DiagramLinkUtils.processStrokeDashArray(h.strokeDasharray)):_=t.DiagramLinkUtils.ConvertLinkStyleToStrokeType(h._type),d.setType(_,h.strokeDasharray,h.strokeDashoffset);var g=t.JsonUtils.clone(h);t.ArrayUtils.forEach(["_type","strokeDasharray","strokeDashoffset"],function(t){delete g[t]}),c.setStyle(g)}else{var _=t.DiagramLinkUtils.ConvertLinkStyleToStrokeType(h);d.setType(_,t.DiagramLinkUtils.GetStrokeDash(_),t.DiagramLinkUtils.GetStrokeDashOffset(_))}c.setStroke(d),n.setShape(c),n.addChildAt(c,1)},s._renderLinkLabels=function(e,i,n){var o=t.Agent.isRightToLeft(e.getCtx()),r=o?t.OutputText.H_ALIGN_RIGHT:t.OutputText.H_ALIGN_LEFT;if(i.label){var a=s.createText(e.getCtx(),i.label,i.labelStyle,r,t.OutputText.V_ALIGN_TOP),l=t.CSSStyle.toNumber(new t.CSSStyle(i.labelStyle).getWidth());l>0&&t.TextUtils.fitText(a,l,1/0,n)?n._labelObj=a:(n.addChild(a),n._labelObj=a)}},s.createText=function(e,i,n,o,r){var s=new t.OutputText(e,i,0,0);return s.setCSSStyle(new t.CSSStyle(n)),s.setHorizAlignment(o),s.setVertAlignment(r),s},s.prototype.setSelected=function(t){s.superclass.setSelected.call(this,t),t?this._showFeedback(this._isShowingHoverEffect,!0):this._hideFeedback(),this.UpdateAriaLabel()},s.prototype.isSelectable=function(){return this.GetDiagram().isSelectionSupported()&&"off"!=this.getData().selectable},s.prototype._showFeedback=function(t,e){if(t){this._savedStroke||(this._savedStroke=this.getShape().getStroke());var i=this.getShape().getStroke().clone();i.setColor&&i.setColor(this.getData().hoverInnerColor),this.getShape().setStroke(i),this.ReplaceConnectorColor(this.getStartConnector(),i),this.ReplaceConnectorColor(this.getEndConnector(),i)}else this._savedStroke&&(this.getShape().setStroke(this._savedStroke),this.ReplaceConnectorColor(this.getStartConnector(),this._savedStroke),this.ReplaceConnectorColor(this.getEndConnector(),this._savedStroke),this._savedStroke=null);this._linkUnderlay||(this._linkUnderlay=this.CreateFeedbackUnderlay("#000000",1,0),this.addChildAt(this._linkUnderlay,0));var n=e?this.getData().selectionColor:this.getData().hoverOuterColor,o=2,r=this._linkUnderlay.getStroke().clone();r.setColor(n),r.setWidth(o+this.GetAppliedLinkWidth()),this.ApplyLinkStyle(r,!0),this._linkUnderlay.setStroke(r,o)},s.prototype._hideFeedback=function(){this._savedStroke&&(this.getShape().setStroke(this._savedStroke),this.ReplaceConnectorColor(this.getStartConnector(),this._savedStroke),this.ReplaceConnectorColor(this.getEndConnector(),this._savedStroke),this._savedStroke=null),this._linkUnderlay&&(this.removeChild(this._linkUnderlay),this._linkUnderlay.destroy&&this._linkUnderlay.destroy(),this._linkUnderlay=null)},s.prototype.ApplyLinkStyle=function(e,i){var n=this.GetAppliedLinkStyle();if(n&&n instanceof Object)if(n._type==s.CUSTOM_STYLE){var o=null!=n.strokeDashoffset?t.CSSStyle.toNumber(n.strokeDashoffset)+1:1;e.setType(t.Stroke.DASHED,t.DiagramLinkUtils.getCustomUnderlay(n.strokeDasharray),o)}else{var r=t.DiagramLinkUtils.ConvertLinkStyleToStrokeType(n._type);e.setType(r,t.DiagramLinkUtils.GetStrokeDash(r,i),t.DiagramLinkUtils.GetStrokeDashOffset(r,i))}else s.superclass.ApplyLinkStyle.call(this,e,i)},s.prototype.showHoverEffect=function(){this._isShowingHoverEffect||(this._isShowingHoverEffect=!0,this._showFeedback(!0,this.isSelected()))},s.prototype.hideHoverEffect=function(){this.isSelected()?this._showFeedback(!1,!0):this._hideFeedback(),this._isShowingHoverEffect=!1},s.prototype.getDatatip=function(t,e,i){var n=this.GetDiagram().getOptions().tooltip,o=n?n.renderer:null;return o?this.GetDiagram().getCtx().getTooltipManager().getCustomTooltip(o,this.getDataContext()):this.getShortDesc()},s.prototype.getShortDesc=function(){return this.isPromoted()?this.getData()._links.length>1?t.Bundle.getTranslation(this.GetDiagram().getOptions(),"promotedLinks",t.Bundle.DIAGRAM_PREFIX,"PROMOTED_LINKS",this.getData()._links.length):t.Bundle.getTranslation(this.GetDiagram().getOptions(),"promotedLink",t.Bundle.DIAGRAM_PREFIX,"PROMOTED_LINK",this.getData()._links.length):this.getData().shortDesc},s.prototype.getDataContext=function(){return{id:this.getId(),type:this.isPromoted()?"promotedLink":"link",label:this.getData().label,data:this.isPromoted()?this.getData()._links:this.getData()._origData,component:this.GetDiagram().getOptions()._widgetConstructor}},s.prototype.getAriaLabel=function(){var e=[];return this.isSelectable()&&e.push(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,this.isSelected()?"STATE_SELECTED":"STATE_UNSELECTED")),this.isPromoted()&&e.push(t.Bundle.getTranslatedString(t.Bundle.DIAGRAM_PREFIX,"PROMOTED_LINK_ARIA_DESC")),t.Displayable.generateAriaLabel(this.getShortDesc(),e)},s.prototype.UpdateAriaLabel=function(){if(!t.Agent.deferAriaCreation()){var e=this.getAriaLabel();e&&this.setAriaProperty("label",e)}},s.prototype.getNextNavigable=function(e){if(e.keyCode==t.KeyboardEvent.SPACE&&e.ctrlKey)return this;if(e.keyCode==t.KeyboardEvent.UP_ARROW||e.keyCode==t.KeyboardEvent.DOWN_ARROW){var i=this.getKeyboardFocusNode();i||(i=this.GetDiagram().getNodeById(this.getStartId(this)));var n=this,o=this.GetDiagram().getNavigableLinksForNodeId(i.getId()),r=this.GetDiagram().getEventManager().getKeyboardHandler();return r&&r.getNextNavigableLink&&(n=r.getNextNavigableLink(i,this,e,o)),n.setKeyboardFocusNode(i),this._diagram.ensureObjInViewport(e,n),n}if(e.keyCode==t.KeyboardEvent.RIGHT_ARROW||e.keyCode==t.KeyboardEvent.LEFT_ARROW){var s;s=this._movingToStart(e.keyCode)?this.getStartId():this.getEndId();var i=this.GetDiagram().getNodeById(s);return this._diagram.ensureObjInViewport(e,i),i}return e.type==t.MouseEvent.CLICK?this:null},s.prototype._movingToStart=function(e){var i=this.getLinkStart(),n=this.getLinkEnd(),o=i.x<n.x;return!(e==t.KeyboardEvent.RIGHT_ARROW&&o||e==t.KeyboardEvent.LEFT_ARROW&&!o)},s.prototype.showKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!0,this.showHoverEffect()},s.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1,this.hideHoverEffect()},s.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},s.prototype.getCategories=function(){return this.getData().categories?this.getData().categories:[this.getId()]},s.prototype.isHidden=function(){var e=this.GetDiagram().getOptions().hiddenCategories;return!(!e||!t.ArrayUtils.hasAnyItem(e,this.getCategories()))||(!this.GetDiagram().getNodeById(this.getStartId())||!this.GetDiagram().getNodeById(this.getEndId()))},s.prototype.animateUpdate=function(e,i,o){var r=i.getPoints(),s=this.getPoints(),a=new t.CustomAnimation(this.getCtx(),null,e.getAnimationDuration());if(!t.ArrayUtils.equals(r,s)){this.setPoints(r);var l=t.Animator.TYPE_POLYLINE;s.length>0&&isNaN(s[0])&&(l=t.Animator.TYPE_PATH),a.getAnimator().addProp(l,this,this.getPoints,this.setPoints,s)}if(i._labelObj&&this._labelObj){var h=i._labelObj.getMatrix(),u=this._labelObj.getMatrix();h.equals(u)||(this._labelObj.setMatrix(h),a.getAnimator().addProp(t.Animator.TYPE_MATRIX,this._labelObj,this._labelObj.getMatrix,this._labelObj.setMatrix,u))}if(i.getShape()&&this.getShape()){var d=i.getShape().getStroke(),c=this.getShape().getStroke();d&&c&&d instanceof t.SolidStroke&&c instanceof t.SolidStroke&&(d.getColor()!=c.getColor()||d.getWidth()!=c.getWidth())&&(this.getShape().setStroke(d),a.getAnimator().addProp(t.Animator.TYPE_STROKE,this.getShape(),this.getShape().getStroke,this.getShape().setStroke,c))}if(o){var p=this;t.Playable.appendOnEnd(a,function(){p.getParent().removeChild(p)})}e.add(a,n.UPDATE)},s.prototype.animateDelete=function(e,i){this.GetDiagram().getLinksPane().addChild(this);var o=this,r=function(){o.getParent().removeChild(o),o.destroy()},s=new t.AnimFadeOut(this.getCtx(),this,e.getAnimationDuration());t.Playable.appendOnEnd(s,r),e.add(s,n.DELETE)},s.prototype.animateInsert=function(e){this.setAlpha(0),e.add(new t.AnimFadeIn(this.getCtx(),this,e.getAnimationDuration()),n.INSERT)},s.prototype.animateCollapse=function(e,i){if(i&&0!=i.length){var n=t.ArrayUtils.copy(this.getPoints());this.animateUpdate(e,i[0]);for(var o=1;o<i.length;o++){var r={id:"_fakeLink"+o+this.getId()};r=t.JsonUtils.merge(r,this.getData());var a=new s(this.GetDiagram().getCtx(),this.GetDiagram(),r,!0);a.render(),a.setPoints(n),a.animateUpdate(e,i[o],!0)}}},s.prototype.animateExpand=function(t,e){if(e&&0!=e.length)for(var i=0;i<e.length;i++)e[i].animateUpdate(t,this)},s.prototype.setLabelAlignments=function(e,i){e&&(e==t.OutputText.H_ALIGN_LEFT?this._labelObj.alignLeft():e==t.OutputText.H_ALIGN_CENTER?this._labelObj.alignCenter():e==t.OutputText.H_ALIGN_RIGHT&&this._labelObj.alignRight()),i&&(i==t.OutputText.V_ALIGN_TOP?this._labelObj.alignTop():i==t.OutputText.V_ALIGN_MIDDLE?this._labelObj.alignMiddle():i==t.OutputText.V_ALIGN_BOTTOM?this._labelObj.alignBottom():"baseline"==i&&this._labelObj.alignAuto())},s.prototype.setGroupId=function(t){this._groupId=t},s.prototype.getGroupId=function(){return this._groupId},s._getCommonAncestorId=function(e,i){for(var n=function(t,e){for(var i=[],n=e.getNodeById(t)?e.getNodeById(t).getGroupId():null;n;)i.push(n),n=e.getNodeById(n)?e.getNodeById(n).getGroupId():null;return i},o=n(e.getStartId(),i),r=n(e.getEndId(),i),s=0;s<o.length;s++)if(t.ArrayUtils.getIndex(r,o[s])>-1)return o[s];return null},s.GetPromotedLinkId=function(t,e){return"_plL"+t+"_L"+e},s.prototype.ShowDropEffect=function(){this._dropEffect||this._createDropEffect("oj-diagram-link oj-active-drop")},s.prototype.ShowRejectedDropEffect=function(){this._dropEffect||this._createDropEffect("oj-diagram-link oj-invalid-drop")},s.prototype.ClearDropEffect=function(){this._dropEffect&&(this.removeChild(this._dropEffect),this._dropEffect=null)},s.prototype._createDropEffect=function(t){var e=this.getData()._hitDetectionOffset;this._dropEffect=this.CreateFeedbackUnderlay("#000000",0,e,t),this._dropEffect.setMouseEnabled(!1),this.addChild(this._dropEffect)},s.ConvertLinkData=function(t){return{id:t.id,startNode:t.startNode,endNode:t.endNode,label:t.label,selectable:t.selectable,shortDesc:t.shortDesc,categories:t.categories,_origData:t}};var a=function(t,e,i){this.Init(t,e,i)};t.Obj.createSubclass(a,t.BaseDiagramNode,"DvtDiagramNode"),a.newInstance=function(t,e){return new a(t.getCtx(),t,e)},a.prototype.Init=function(e,i,n){a.superclass.Init.call(this,e,n.id,i),this._data=n,this._diagram.isSelectionSupported()&&this.setCursor(t.SelectionEffectUtils.getSelectingCursor())},a.prototype.getData=function(){return this._data},a.prototype.getId=function(){return this._data.id},a.prototype.getActiveElementId=function(){return this._activeElementId||(this._activeElementId=this.getId()+Math.floor(1e9*Math.random())),this._activeElementId},a.prototype.getContentBounds=function(){return this._contentDims},a.prototype.getLabelBounds=function(){var t=null;return this._labelObj&&(t=this._labelDims?this._labelDims:this._labelObj.getDimensions()),t},a.prototype.setSelected=function(t){var e=this._getState();a.superclass.setSelected.call(this,t),this._diagram.getOptions().selectionRenderer?this._applyCustomNodeContent(this._diagram.getOptions().selectionRenderer,this._getState(),e):this.processDefaultSelectionEffect(t),this.UpdateAriaLabel()},a.prototype.processDefaultSelectionEffect=function(t){this.getSelectionShape()&&this.getSelectionShape().setSelected(t)},a.prototype.isSelectable=function(){return this.GetDiagram().isSelectionSupported()&&"off"!=this.getData().selectable},a.prototype.GetIcon=function(){return this._shape},a.prototype.render=function(){var t=this.getData();if(this._diagram.getOptions().renderer){if(this._applyCustomNodeContent(this._diagram.getOptions().renderer,this._getState(),null),this.isDisclosed()){var e=this.getElem().getBoundingClientRect(),i=this._childNodePane?this._childNodePane.getElem().getBoundingClientRect():null;this._containerPadding={left:i.left-e.left,right:e.right-i.right,top:i.top-e.top,bottom:e.bottom-i.bottom}}}else this.isDisclosed()?a._renderContainer(this._diagram,t,this):(a._renderNodeBackground(this._diagram,t,this),a._renderNodeIcon(this._diagram,t,this)),a._addHoverSelectionStrokes(this.getSelectionShape(),t);a._renderNodeLabels(this._diagram,t,this),this._setDraggableStyleClass(),this._contentDims=this._calcContentDims(),a._renderContainerButton(this._diagram,t,this),this.setAriaRole("img"),this.UpdateAriaLabel(),this._diagram.getEventManager().associate(this,this)},a.prototype._applyCustomNodeContent=function(e,i,n){var o=this._diagram.getOptions()._contextHandler;if(!o)return void this._diagram.Log("dvt.Diagram: could not add custom node content - context handler is undefined",1);var r=this.getData()._origData,s=null;if(this.isDisclosed()){var a=this.GetChildNodePane(),l=a.getDimensions();s={element:a.getElem(),w:l?l.w-l.x:null,h:l?l.h-l.y:null}}var h=o(this.getElem(),this._customNodeContent,s,r,i,n),u=e(h);this._customNodeContent&&u!=this._customNodeContent&&(this._customNodeContent.namespaceURI===t.ToolkitUtils.SVG_NS?this.getContainerElem().removeChild(this._customNodeContent):this.removeChild(u),this._customNodeContent=null),u&&u.namespaceURI===t.ToolkitUtils.SVG_NS?this._customNodeContent||(t.ToolkitUtils.appendChildElem(this.getContainerElem(),u),this._customNodeContent=u):u instanceof t.BaseComponent?this._customNodeContent||(this.addChild(u),this._customNodeContent=u):u&&this._diagram.Log("dvt.Diagram: could not add custom node content for the node "+this.getId()+u,1)},a._renderNodeBackground=function(e,i,n){var o=i.backgroundSvgStyle||i.backgroundStyle,r=t.JsonUtils.clone(o),s=[t.CSSStyle.WIDTH,t.CSSStyle.HEIGHT,t.CSSStyle.BACKGROUND_COLOR,t.CSSStyle.BORDER_COLOR,t.CSSStyle.BORDER_WIDTH,t.CSSStyle.BORDER_RADIUS],o=a._getNodeCSSStyle(r,i._backgroundStyle,s);if(!o.isEmpty()){var l=t.CSSStyle.toNumber(o.getStyle(t.CSSStyle.WIDTH)),h=t.CSSStyle.toNumber(o.getStyle(t.CSSStyle.HEIGHT)),u=o.getStyle(t.CSSStyle.BACKGROUND_COLOR),d=o.getStyle(t.CSSStyle.BORDER_COLOR),c=t.CSSStyle.toNumber(o.getStyle(t.CSSStyle.BORDER_WIDTH)),p=t.CSSStyle.toNumber(o.getStyle(t.CSSStyle.BORDER_RADIUS)),_=new t.Rect(e.getCtx(),0,0,l,h);_.setSolidFill(u),p&&(_.setRx(p),_.setRy(p)),d&&_.setStroke(new t.SolidStroke(d,1,c)),r&&t.ArrayUtils.forEach(s,function(e){delete r[t.CSSStyle.cssStringToObjectProperty(e)]}),_.setStyle(r).setClassName(i.backgroundClassName),n.addChild(_),n.setSelectionShape(_),n._background=_}},a._renderNodeIcon=function(e,i,n){var o=i.icon;if(o){var r,s=o.width,l=o.height,h=o.color,u=o.borderRadius;r=o.source?new t.ImageMarker(e.getCtx(),s/2,l/2,s,l,u,o.source,o.sourceSelected,o.sourceHover,o.sourceHoverSelected):new t.SimpleMarker(e.getCtx(),o.shape,t.CSSStyle.SKIN_ALTA,s/2,l/2,s,l,u),"none"!=o.fillPattern?r.setFill(new t.PatternFill(o.fillPattern,h,h)):r.setSolidFill(h),null!=o.opacity&&r.setAlpha(o.opacity),o.borderColor&&r.setStroke(new t.SolidStroke(o.borderColor,o.borderWidth));var d=o.svgStyle||o.style,c=o.svgClassName||o.className;r.setStyle(d).setClassName(c),n.addChild(r),n._shape=r,a._setIconPosition(e,i,n),n._background||n.setSelectionShape(r)}},a._setIconPosition=function(e,i,n){if(n._background){var o=i.icon,r=n._background.getWidth(),s=n._background.getHeight(),a=o.width,l=o.height,h=.5*(r-a),u=.5*(s-l);if(void 0!==o.positionX)h=parseFloat(o.positionX),t.Agent.isRightToLeft(n.getCtx())&&(h=r-h-a);else{var d=o.halign;"start"==d?d=t.Agent.isRightToLeft(n.getCtx())?"right":"left":"end"==d&&(d=t.Agent.isRightToLeft(n.getCtx())?"left":"right"),h="left"==d?0:"right"==d?r-a:h}void 0!==o.positionY?u=parseFloat(o.positionY):"top"==o.valign?u=0:"bottom"==o.valign&&(u=s-l),n._shape.setTranslate(h,u)}},a._renderNodeLabels=function(e,i,n){n._labelObj&&(n.removeChild(n._labelObj),n._labelObj=null);var o=t.Agent.isRightToLeft(e.getCtx()),r=o?t.OutputText.H_ALIGN_RIGHT:t.OutputText.H_ALIGN_LEFT;if(i.label){var s=a.createText(e.getCtx(),i.label,i.labelStyle,r,t.OutputText.V_ALIGN_TOP),l=t.CSSStyle.toNumber(new t.CSSStyle(i.labelStyle).getWidth());l>0&&t.TextUtils.fitText(s,l,1/0,n)?n._labelObj=s:(n.addChild(s),n._labelObj=s)}},a.createText=function(e,i,n,o,r){var s=new t.OutputText(e,i,0,0);return s.setCSSStyle(new t.CSSStyle(n)),s.setHorizAlignment(o),s.setVertAlignment(r),s},a._addHoverSelectionStrokes=function(e,i){var n=i.hoverInnerColor,o=i.hoverOuterColor,r=i.selectionColor,s=new t.SolidStroke(n,1,4);s.setFixedWidth(!0);var a=new t.SolidStroke(o,1,8);a.setFixedWidth(!0);var l=new t.SolidStroke(r,1,2);l.setFixedWidth(!0);var h=new t.SolidStroke(r,1,4);h.setFixedWidth(!0);var u=new t.SolidStroke(n,1,4);u.setFixedWidth(!0);var d=new t.SolidStroke(r,1,8);d.setFixedWidth(!0),e.setHoverStroke(s,a).setSelectedStroke(l,h).setSelectedHoverStroke(u,d)},a.prototype.setSelectionShape=function(t){this._selectionShape=t},a.prototype.getSelectionShape=function(){if(!this._selectionShape&&this._contentDims){var e=new t.Rect(this._diagram.getCtx(),this._contentDims.x,this._contentDims.y,this._contentDims.w,this._contentDims.h);e.setInvisibleFill(),this.setSelectionShape(e),this.addChildAt(e,0),a._addHoverSelectionStrokes(e,this.getData()),this._selectionShape=e}return this._selectionShape},a.prototype.showHoverEffect=function(){if(!this._isShowingHoverEffect){var t=this._getState();this._isShowingHoverEffect=!0,this._diagram.getOptions().hoverRenderer?this._applyCustomNodeContent(this._diagram.getOptions().hoverRenderer,this._getState(),t):this.processDefaultHoverEffect(!0)}},a.prototype.hideHoverEffect=function(){if(this._isShowingHoverEffect){var t=this._getState();this._isShowingHoverEffect=!1,this._diagram.getOptions().hoverRenderer?this._applyCustomNodeContent(this._diagram.getOptions().hoverRenderer,this._getState(),t):this.processDefaultHoverEffect(!1)}},a.prototype.processDefaultHoverEffect=function(t){this.getSelectionShape()&&(t?this.getSelectionShape().showHoverEffect():this.getSelectionShape().hideHoverEffect())},a.prototype.getDatatip=function(t,e,i){var n=this.GetDiagram().getOptions().tooltip,o=n?n.renderer:null;return o?this.GetDiagram().getCtx().getTooltipManager().getCustomTooltip(o,this.getDataContext()):this.getShortDesc()},a.prototype.getShortDesc=function(){return this.getData().shortDesc},a.prototype.getDataContext=function(){return{id:this.getId(),type:"node",label:this.getData().label,data:this.getData()._origData,component:this.GetDiagram().getOptions()._widgetConstructor}},a.prototype.getAriaLabel=function(){var e=[];return this.isSelectable()&&e.push(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,this.isSelected()?"STATE_SELECTED":"STATE_UNSELECTED")),this.isContainer()&&e.push(this.isDisclosed()?t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"STATE_EXPANDED"):t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"STATE_COLLAPSED")),t.Displayable.generateAriaLabel(this.getShortDesc(),e)},a.prototype.UpdateAriaLabel=function(){if(!t.Agent.deferAriaCreation()){var e=this.getAriaLabel();e&&this.setAriaProperty("label",e)}},a.prototype.getNextNavigable=function(e){var i=null;if(e.keyCode==t.KeyboardEvent.SPACE&&e.ctrlKey)i=this;else if((e.keyCode==t.KeyboardEvent.OPEN_ANGLED_BRACKET||t.KeyboardEvent.CLOSE_ANGLED_BRACKET)&&e.altKey){var n=this.GetDiagram().getNavigableLinksForNodeId(this.getId()),o=this.GetDiagram().getEventManager().getKeyboardHandler();o&&o.getFirstNavigableLink&&(i=o.getFirstNavigableLink(this,e,n)),i?i.setKeyboardFocusNode(this):i=this}else if(e.keyCode==t.KeyboardEvent.OPEN_BRACKET)if(this.isDisclosed()){var r=this.getChildNodes();i=r[0]}else i=this;else if(e.keyCode==t.KeyboardEvent.CLOSE_BRACKET){var s=this.getGroupId()?this.GetDiagram().getNodeById(this.getGroupId()):null;i=s?s:this}else if(e.type==t.MouseEvent.CLICK)i=this;else{var s=this.getGroupId()?this.GetDiagram().getNodeById(this.getGroupId()):null,a=s?s.getChildNodes():this.GetDiagram().GetRootNodeObjects();i=t.KeyboardHandler.getNextAdjacentNavigable(this,e,a)}return e instanceof t.KeyboardEvent&&this._diagram.ensureObjInViewport(e,i),i},a.prototype.HandleKeyboardEvent=function(e){e.keyCode==t.KeyboardEvent.SPACE&&e.ctrlKey&&e.shiftKey&&this.isContainer()&&this.GetDiagram().setNodeDisclosed(this.getId(),!this.isDisclosed())},a.prototype.isContainer=function(){var t=this.GetDiagram().getOptions().data;return 0!=t.getChildCount(this.getData())},a.prototype.showKeyboardFocusEffect=function(){if(!this.isShowingKeyboardFocusEffect()){var t=this._getState();this._isShowingKeyboardFocusEffect=!0,this._diagram.getOptions().focusRenderer?this._applyCustomNodeContent(this._diagram.getOptions().focusRenderer,this._getState(),t):this.processDefaultFocusEffect(!0)}},a.prototype.hideKeyboardFocusEffect=function(){if(this.isShowingKeyboardFocusEffect()){var t=this._getState();this._isShowingKeyboardFocusEffect=!1,this._diagram.getOptions().focusRenderer?this._applyCustomNodeContent(this._diagram.getOptions().focusRenderer,this._getState(),t):this.processDefaultFocusEffect(!1)}},a.prototype.processDefaultFocusEffect=function(t){this.processDefaultHoverEffect(t)},a.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect},a.prototype.getCategories=function(){return this.getData().categories?this.getData().categories:[this.getId()]},a.prototype.isHidden=function(){var e=this.GetDiagram().getOptions().hiddenCategories;return!(!e||!t.ArrayUtils.hasAnyItem(e,this.getCategories()))},a.prototype._calcContentDims=function(){var e=null;if(this._customNodeContent){var i;this._customNodeContent instanceof t.BaseComponent?(i=this._customNodeContent.getDimensions(),i&&(e=new t.Rectangle(i.x,i.y,i.w,i.h))):(i=this._customNodeContent.getBBox(),i&&(e=new t.Rectangle(i.x,i.y,i.width,i.height)))}else this.isDisclosed()?e=this._containerShape.GetDimensionsWithStroke(this):(e=this._background?this._background.GetDimensionsWithStroke(this):null,e&&this._shape?e=e.getUnion(this._shape.GetDimensionsWithStroke(this)):!e&&this._shape&&(e=this._shape.GetDimensionsWithStroke(this)));return e},a.prototype.animateUpdate=function(e,i){var o=new t.CustomAnimation(this.getCtx(),null,e.getAnimationDuration());if(this.isDisclosed()||i.isDisclosed())if(this.isDisclosed()&&i.isDisclosed())if(this._diagram.getOptions().renderer)this._animateCustomUpdate(e,i);else{if(a._animatePosition(o,i,this),a._animateContainer(o,i._containerShape,this._containerShape),t.Agent.isRightToLeft(this.getCtx())&&i._containerButton&&this._containerButton){var r=i._containerButton.getTranslateX(),s=this._containerButton.getTranslateX();r!=s&&(this._containerButton.setTranslateX(r),o.getAnimator().addProp(t.Animator.TYPE_NUMBER,this._containerButton,this._containerButton.getTranslateX,this._containerButton.setTranslateX,s))}for(var l=[],h=[],u=this.getChildNodeIds(),d=0;d<u.length;d++)l.push(this.GetDiagram().getNodeById(u[d]));for(var c=i.getChildNodeIds(),p=e.getOldDiagram().getNodes(),d=0;d<c.length;d++)h.push(p[c[d]]);e.constructAnimation(h,l)}else this._animateCustomUpdate(e,i);else{if(a._animatePosition(o,i,this),i._shape&&this._shape&&(o.getAnimator().addProp(t.Animator.TYPE_RECTANGLE,this._shape,this._shape.getCenterDimensions,this._shape.setCenterDimensions,this._shape.getCenterDimensions()),this._shape.setCenterDimensions(i._shape.getCenterDimensions())),i._labelObj&&this._labelObj){var _=i._labelObj.getMatrix(),g=this._labelObj.getMatrix();_.equals(g)||(this._labelObj.setMatrix(_),o.getAnimator().addProp(t.Animator.TYPE_MATRIX,this._labelObj,this._labelObj.getMatrix,this._labelObj.setMatrix,g))}a._animateFill(o,i._background,this._background),a._animateFill(o,i._shape,this._shape)}e.add(o,n.UPDATE)},a.prototype._animateCustomUpdate=function(e,i){var o=i.getContentBounds(),r=this.getContentBounds();if(o.equals(r)){var s=new t.CustomAnimation(this.getCtx(),null,e.getAnimationDuration());return a._animatePosition(s,i,this),void e.add(s,n.UPDATE)}this.getParent().addChild(i);var l=r.w/o.w,h=o.w/r.w,s=new t.CustomAnimation(this.getCtx(),null,e.getAnimationDuration()),u=new t.Point(this.getTranslateX()+.5*r.w,this.getTranslateY()+.5*r.h);s.getAnimator().addProp(t.Animator.TYPE_NUMBER,i,i.getTranslateX,i.setTranslateX,u.x-o.w*l*.5),s.getAnimator().addProp(t.Animator.TYPE_NUMBER,i,i.getTranslateY,i.setTranslateY,u.y-o.h*l*.5);var d=new t.Point(i.getTranslateX()+.5*o.w,i.getTranslateY()+.5*o.h),c=this.getTranslateX(),p=this.getTranslateY();this.setTranslateX(d.x-r.w*h*.5),this.setTranslateY(d.y-r.w*h*.5),s.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getTranslateX,this.setTranslateX,c),s.getAnimator().addProp(t.Animator.TYPE_NUMBER,this,this.getTranslateY,this.setTranslateY,p),e.add(s,n.UPDATE);var _=new t.AnimScaleTo(this.getCtx(),i,new t.Point(l,l),e.getAnimationDuration());e.add(_,n.UPDATE);var g=new t.AnimFadeOut(this.getCtx(),i,e.getAnimationDuration());e.add(g,n.UPDATE);var m=this;t.Playable.appendOnEnd(g,function(){m.getParent().removeChild(i)}),this.setScaleX(h),this.setScaleY(h);var f=new t.AnimScaleTo(this.getCtx(),this,new t.Point(1,1),e.getAnimationDuration());e.add(f,n.UPDATE),this.setAlpha(0);var y=new t.AnimFadeIn(this.getCtx(),this,e.getAnimationDuration());e.add(y,n.UPDATE)},a._animatePosition=function(e,i,n){if(n&&i){var o=i.getTranslateX(),r=i.getTranslateY(),s=n.getTranslateX(),a=n.getTranslateY();o!=s&&(n.setTranslateX(o),e.getAnimator().addProp(t.Animator.TYPE_NUMBER,n,n.getTranslateX,n.setTranslateX,s)),r!=a&&(n.setTranslateY(r),e.getAnimator().addProp(t.Animator.TYPE_NUMBER,n,n.getTranslateY,n.setTranslateY,a))}},a._animateContainer=function(e,i,n){n&&i&&(a._animateFill(e,i,n),e.getAnimator().addProp(t.Animator.TYPE_NUMBER,n,n.getWidth,n.setWidth,n.getWidth()),n.setWidth(i.getWidth()),e.getAnimator().addProp(t.Animator.TYPE_NUMBER,n,n.getHeight,n.setHeight,n.getHeight()),n.setHeight(i.getHeight()))},a._animateFill=function(e,i,n){i&&n&&n.getFill()instanceof t.SolidFill&&!n.getFill().equals(i.getFill())&&(e.getAnimator().addProp(t.Animator.TYPE_FILL,n,n.getFill,n.setFill,n.getFill()),n.setFill(i.getFill()))},a.prototype.animateDelete=function(e,i){this.GetDiagram().getNodesPane().addChild(this);var o=this,r=function(){o.getParent().removeChild(o),o.destroy()},s=new t.AnimFadeOut(this.getCtx(),this,e.getAnimationDuration());t.Playable.appendOnEnd(s,r),e.add(s,n.DELETE)},a.prototype.animateInsert=function(e){this.setAlpha(0),e.add(new t.AnimFadeIn(this.getCtx(),this,e.getAnimationDuration()),n.INSERT)},a.prototype._getState=function(t){return{hovered:this._isShowingHoverEffect,selected:this.isSelected(),focused:this._isShowingKeyboardFocusEffect,zoom:t?t:this.GetDiagram().getPanZoomCanvas().getZoom(),expanded:this.isDisclosed()}},a.prototype.rerenderOnZoom=function(t){if(this._diagram.getOptions().zoomRenderer){var e=this._getState(t.getOldZoom()),i=this._getState(t.getNewZoom());this._applyCustomNodeContent(this._diagram.getOptions().zoomRenderer,i,e)}},a.prototype.setLabelAlignments=function(e,i){e&&(e==t.OutputText.H_ALIGN_LEFT?this._labelObj.alignLeft():e==t.OutputText.H_ALIGN_CENTER?this._labelObj.alignCenter():e==t.OutputText.H_ALIGN_RIGHT&&this._labelObj.alignRight()),i&&(i==t.OutputText.V_ALIGN_TOP?this._labelObj.alignTop():i==t.OutputText.V_ALIGN_MIDDLE?this._labelObj.alignMiddle():i==t.OutputText.V_ALIGN_BOTTOM?this._labelObj.alignBottom():"baseline"==i&&this._labelObj.alignAuto())},a.prototype.getContainerPadding=function(){if(!this._containerPadding&&this._diagram.getOptions().renderer){var t=this.getElem().getBoundingClientRect(),e=this._childNodePane?this._childNodePane.getElem().getBoundingClientRect():null;this._containerPadding={left:e.left-t.left,right:t.right-e.right,top:e.top-t.top,bottom:t.bottom-e.bottom}}else if(!this._containerPadding){var i=["padding-left","padding-right","padding-top","padding-bottom"],n=this._data.containerSvgStyle||this._data.containerStyle,o=a._getNodeCSSStyle(n,this._data._containerStyle,i);this._containerPadding={left:o.getPadding("padding-left"),right:o.getPadding("padding-right"),top:o.getPadding("padding-top"),bottom:o.getPadding("padding-bottom")}}return this._containerPadding},a.prototype.getChildNodeIds=function(){return this._childNodeIds},a.prototype.addChildNodeId=function(t){this._childNodeIds||(this._childNodeIds=[]),this._childNodeIds.push(t)},a.prototype.getChildNodes=function(){for(var t=[],e=this._childNodeIds?this._childNodeIds.length:-1,i=0;i<e;i++){var n=this.GetDiagram().getNodeById(this._childNodeIds[i]);n&&t.push(n)}return t},a.prototype.setGroupId=function(t){this._groupId=t},a.prototype.getGroupId=function(){return this._groupId},a.prototype.GetChildNodePane=function(){return this._childNodePane||(this._childNodePane=new t.Container(this.getCtx()),this.addChild(this._childNodePane)),this._childNodePane},a.prototype.handleDisclosure=function(e){t.EventManager.consumeEvent(e),this._diagram.setNodeDisclosed(this.getId(),!this.isDisclosed())},a._renderContainer=function(e,i,n){n._containerShape&&(n.removeChild(n._containerShape),n._containerShape=null);var o=i.containerSvgStyle||i.containerStyle,r=t.JsonUtils.clone(o),s=[t.CSSStyle.BACKGROUND_COLOR,t.CSSStyle.BORDER_COLOR,t.CSSStyle.BORDER_WIDTH,t.CSSStyle.BORDER_RADIUS],l=a._getNodeCSSStyle(r,i._containerStyle,s),h=l.getStyle(t.CSSStyle.BACKGROUND_COLOR),u=l.getStyle(t.CSSStyle.BORDER_COLOR),d=t.CSSStyle.toNumber(l.getStyle(t.CSSStyle.BORDER_WIDTH)),c=t.CSSStyle.toNumber(l.getStyle(t.CSSStyle.BORDER_RADIUS)),p=n.GetChildNodePane(),_=n.getContainerPadding();p.setTranslate(_.left,_.top);var g=p.getDimensionsWithStroke(),m=new t.Rect(e.getCtx(),0,0,g.w+_.left+_.right,g.h+_.top+_.bottom);m.setSolidFill(h),c&&(m.setRx(c),m.setRy(c)),u&&m.setStroke(new t.SolidStroke(u,1,d)),r&&t.ArrayUtils.forEach(s,function(e){delete r[t.CSSStyle.cssStringToObjectProperty(e)]}),m.setStyle(r).setClassName(i.containerClassName),n.addChildAt(m,0),n.setSelectionShape(m),n._containerShape=m},a._getNodeCSSStyle=function(e,i,n){var o=new t.CSSStyle;return t.ArrayUtils.forEach(n,function(n){var r=null,s=t.CSSStyle.cssStringToObjectProperty(n);e&&null!=e[s]?r=e[s]:i&&(r=i.getStyle(n)),o.setStyle(n,r)}),o},a._renderContainerButton=function(e,i,n){if(n._containerButton&&(n.removeChild(n._containerButton),n._containerButton=null),n.isContainer()&&"off"!=i.showDisclosure){var o,r,s,a=e.getOptions();n.isDisclosed()?(o=a._resources.collapse_ena,r=a._resources.collapse_ovr,s=a._resources.collapse_dwn):(o=a._resources.expand_ena,r=a._resources.expand_ovr,s=a._resources.expand_dwn);var l=new t.Image(e.getCtx(),o.src,0,0,o.width,o.height),h=new t.Image(e.getCtx(),r.src,0,0,r.width,r.height),u=new t.Image(e.getCtx(),s.src,0,0,s.width,s.height),d=new t.Button(e.getCtx(),l,h,u,null,null,n.handleDisclosure,n);if(n.addChild(d),n._contentDims){var c=t.Agent.isRightToLeft(e.getCtx())?n._contentDims.x+n._contentDims.w-o.width:n._contentDims.x,p=n._contentDims.y;d.setTranslate(c,p)}n._containerButton=d}},a.prototype.isDragAvailable=function(t){return!0},a.prototype.getDragTransferable=function(t,e){return"off"===this.getData().draggable?null:[this.getId()]},a.prototype.getDragFeedback=function(t,e){if(this._diagram.getEventManager().LinkCreationStarted)return null;if(this._diagram.isSelectionSupported()&&this._diagram.getSelectionHandler().getSelectedCount()>1){for(var i=this._diagram.getSelectionHandler().getSelection(),n=[],o=0;o<i.length;o++)n.push(i[o]);
return n}return this},a.prototype.ShowDropEffect=function(){this._dropEffect||this._createDropEffect("oj-diagram-node oj-active-drop")},a.prototype.ShowRejectedDropEffect=function(){this._dropEffect||this._createDropEffect("oj-diagram-node oj-invalid-drop")},a.prototype.ClearDropEffect=function(){this._dropEffect&&(this.removeChild(this._dropEffect),this._dropEffect=null)},a.prototype._createDropEffect=function(e){var i;if(this._customNodeContent||this.isDisclosed()||this._background||this._shape&&this._shape instanceof t.ImageMarker){i=new t.Rect(this._diagram.getCtx(),this._contentDims.x,this._contentDims.y,this._contentDims.w,this._contentDims.h);var n=this._customNodeContent?null:this.isDisclosed()?this._containerShape.getRx():this._background?this._background.getRx():null;n&&(i.setRx(n),i.setRy(n))}else this._shape&&this._shape instanceof t.SimpleMarker&&(i=this._shape.copyShape());i.setInvisibleFill(),i.setClassName(e),i.setMouseEnabled(!1),this.addChild(i),this._dropEffect=i},a.prototype._setDraggableStyleClass=function(){if(this._diagram.getEventManager().IsDragSupported()&&"off"!=this.getData().draggable){var e=this._customNodeContent?this:this.isDisclosed()?this._containerShape:this._background?this._background:this._shape,i=e.getElem()?e.getElem():e;t.ToolkitUtils.addClassName(i,"oj-diagram-node"),t.ToolkitUtils.addClassName(i,"oj-draggable")}},a.ConvertNodeData=function(t){return{id:t.id,label:t.label,selectable:t.selectable,shortDesc:t.shortDesc,categories:t.categories,nodes:t.nodes,_origData:t}};var l=function(t){this.Init(t)};t.Obj.createSubclass(l,t.Automation,"DvtDiagramAutomation"),l.prototype.Init=function(t){this._diagram=t},l.prototype.GetSubIdForDomElement=function(t){var e=this._diagram.getEventManager().GetLogicalObject(t);return e&&e instanceof a?"node["+this._diagram.GetAllNodes().indexOf(e.getId())+"]":e&&e instanceof s?"link["+this._diagram.GetAllLinks().indexOf(e.getId())+"]":null},l.prototype.getDomElementForSubId=function(e){if(e==t.Automation.TOOLTIP_SUBID)return this.GetTooltipElement(this._diagram);var i=this._parseSubId(e),n=i.component,o=i.index,r=null;return"node"==n?r=this._getNode(o):"link"==n&&(r=this._getLink(o)),r?r.getElem():null},l.prototype._parseSubId=function(t){var e=t,i=-1,n=t.substring(0,t.indexOf("["));return n&&(e="node"==n||"link"==n?n:null,i=parseInt(t.substring(t.indexOf("[")+1,t.indexOf("]")))),{component:e,index:i}},l.prototype.getNodeCount=function(){return this._diagram.getNodeCount()},l.prototype.getLinkCount=function(){return this._diagram.getLinkCount()},l.prototype.getNode=function(e){var i=this._getNode(e);if(i){var n={};n.id=i.getId(),n.selected=i.isSelected(),n.tooltip=i.getShortDesc(),n.label=i.getData().label;var o=i.getData().backgroundStyle;return o&&o instanceof Object&&(o=t.CSSStyle.cssObjectToString(o)),n.background=o,n.icon=this._getMarkerData(i.GetIcon()),n.expanded=i.isDisclosed(),n}return null},l.prototype.getLink=function(t){var e=this._getLink(t);if(e){var i={};return i.id=e.getId(),i.selected=e.isSelected(),i.tooltip=e.getShortDesc(),i.label=e.getData().label,i.color=e.getLinkColor(),i.width=e.getLinkWidth(),i.style=this._getLinkStyleFromObject(e.getLinkStyle()),i.startNode=e.getStartId(),i.endNode=e.getEndId(),i.startConnectorType=e.getStartConnectorType(),i.endConnectorType=e.getEndConnectorType(),i}return null},l.prototype.getPromotedLink=function(t,e){var i=this._getNode(t),n=this._getNode(e);if(!i||!n)return null;var o=s.GetPromotedLinkId(i.getId(),n.getId()),r=this._diagram.getLinkById(o);if(r){var a={};return a.id=r.getId(),a.selected=r.isSelected(),a.tooltip=r.getShortDesc(),a.color=r.getLinkColor(),a.width=r.getLinkWidth(),a.style=this._getLinkStyleFromObject(r.getLinkStyle()),a.startNode=r.getStartId(),a.endNode=r.getEndId(),a.startConnectorType=r.getStartConnectorType(),a.endConnectorType=r.getEndConnectorType(),a.count=r.getData()._links.length,a}return null},l.prototype._getLinkStyleFromObject=function(e){if(e&&e instanceof Object){if(e._type==s.CUSTOM_STYLE){var i=t.JsonUtils.clone(e);return delete i._type,t.CSSStyle.cssObjectToString(i)}return e._type}return e},l.prototype.getExpanded=function(){return this._diagram.DisclosedNodes},l.prototype._getMarkerData=function(e){if(e){var i={};return i.shape=e instanceof t.SimpleMarker?e.getType():"none",e.getFill()&&(i.color=e.getFill().getColor()),i}return null},l.prototype._getNode=function(t){var e=this._diagram.GetAllNodes();return t>=0&&t<e.length?this._diagram.getNodeById(e[t]):null},l.prototype._getLink=function(t){var e=this._diagram.GetAllLinks();return t>=0&&t<e.length?this._diagram.getLinkById(e[t]):null},t.exportProperty(t,"Diagram",t.Diagram),t.exportProperty(t.Diagram,"newInstance",t.Diagram.newInstance),t.exportProperty(t.Diagram.prototype,"highlight",t.Diagram.prototype.highlight),t.exportProperty(t.Diagram.prototype,"select",t.Diagram.prototype.select),t.exportProperty(t.Diagram.prototype,"getAutomation",t.Diagram.prototype.getAutomation),t.exportProperty(t.Diagram.prototype,"processDefaultHoverEffect",t.Diagram.prototype.processDefaultHoverEffect),t.exportProperty(t.Diagram.prototype,"processDefaultSelectionEffect",t.Diagram.prototype.processDefaultSelectionEffect),t.exportProperty(t.Diagram.prototype,"processDefaultFocusEffect",t.Diagram.prototype.processDefaultFocusEffect),t.exportProperty(t.Diagram.prototype,"clearDisclosedState",t.Diagram.prototype.clearDisclosedState),t.exportProperty(t.Diagram.prototype,"expand",t.Diagram.prototype.expand),t.exportProperty(t.Diagram.prototype,"collapse",t.Diagram.prototype.collapse),t.exportProperty(l.prototype,"getDomElementForSubId",l.prototype.getDomElementForSubId),t.exportProperty(l.prototype,"getNodeCount",l.prototype.getNodeCount),t.exportProperty(l.prototype,"getLinkCount",l.prototype.getLinkCount),t.exportProperty(l.prototype,"getNode",l.prototype.getNode),t.exportProperty(l.prototype,"getLink",l.prototype.getLink),t.exportProperty(l.prototype,"getPromotedLink",l.prototype.getPromotedLink),t.exportProperty(l.prototype,"getExpanded",l.prototype.getExpanded)}(t),t}),define("ojs/ojdiagram",["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojdvt-base","ojs/internal-deps/dvt/DvtDiagram","ojs/ojdatasource-common"],function(t,e,i,n,o){t.ConversionDiagramDataSource=function(e,i){this.childDataCallback=i?i.childData:null,t.ConversionDiagramDataSource.superclass.constructor.call(this,e)},t.Object.createSubclass(t.ConversionDiagramDataSource,t.DiagramDataSource,"oj.ConversionDiagramDataSource"),t.ConversionDiagramDataSource.prototype.getData=function(t){if(t){var e=t.nodes;if(void 0===e&&this.childDataCallback){var i=this.childDataCallback(t);return Promise.resolve(i).then(function(t){return Promise.resolve({nodes:t})},function(t){return Promise.resolve({nodes:[]})})}return Promise.resolve({nodes:e})}if(this.data){var n=this.data.nodes,o=this.data.links;return n instanceof Function&&(n=n()),o instanceof Function&&(o=o()),Promise.all([n,o]).then(function(t){return Promise.resolve({nodes:t[0],links:t[1]})},function(t){return Promise.resolve({nodes:[],links:[]})})}return Promise.resolve(null)},t.ConversionDiagramDataSource.prototype.getChildCount=function(t){if(t){var e=t.nodes,i=Array.isArray(e)?e.length:void 0===e&&this.childDataCallback?-1:0;return i}return-1},t.ConversionDiagramDataSource.prototype.getDescendantsConnectivity=function(t){return"unknown"},t.__registerWidget("oj.ojDiagram",e.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{beforeExpand:null,expand:null,beforeCollapse:null,collapse:null},_ProcessOptions:function(){this._super(),this.options._logger=t.Logger,this.options._templateFunction&&(this.options.renderer=this._GetTemplateDataRenderer(this.options._templateFunction,"node")),this.options.renderer&&(this.options._contextHandler=this._getContextHandler()),this.options.nodes&&(this.options.nodeProperties=this.options.nodeProperties?this.options.nodeProperties:function(t){return t},this.options.linkProperties=this.options.linkProperties?this.options.linkProperties:function(t){return t},this.options.data=new t.ConversionDiagramDataSource({nodes:this.options.nodes,links:this.options.links},{childData:this.options.childNodes}))},_getContextHandler:function(){var e=this,i=function(i,n,o,r,s,a){var l={component:t.Components.getWidgetConstructor(e.element),parentElement:i,rootElement:n,content:o,data:r,state:s,previousState:a,id:r.id,type:"node",label:r.label};return e._FixRendererContext(l)};return i},renderDefaultHover:function(t){if(!t.previousState||t.state.hovered!=t.previousState.hovered){var e=this._GetDvtComponent(this.element);e.processDefaultHoverEffect(t.id,t.state.hovered)}},renderDefaultSelection:function(t){if(!t.previousState||t.state.selected!=t.previousState.selected){var e=this._GetDvtComponent(this.element);e.processDefaultSelectionEffect(t.id,t.state.selected)}},renderDefaultFocus:function(t){if(!t.previousState||t.state.focused!=t.previousState.focused){var e=this._GetDvtComponent(this.element);e.processDefaultFocusEffect(t.id,t.state.focused)}},_CreateDvtComponent:function(t,e,i){return o.Diagram.newInstance(t,e,i)},_ConvertLocatorToSubId:function(t){var e=t.subId;return"oj-diagram-link"==e?e="link["+t.index+"]":"oj-diagram-node"==e?e="node["+t.index+"]":"oj-diagram-tooltip"==e&&(e="tooltip"),e},_ConvertSubIdToLocator:function(t){var e={};return 0==t.indexOf("link")?(e.subId="oj-diagram-link",e.index=this._GetFirstIndex(t)):0==t.indexOf("node")?(e.subId="oj-diagram-node",e.index=this._GetFirstIndex(t)):"tooltip"==t&&(e.subId="oj-diagram-tooltip"),e},_GetComponentStyleClasses:function(){var t=this._super();return t.push("oj-diagram"),t},_GetChildStyleClasses:function(){var t=this._super();return t["oj-diagram-node-label"]={path:"styleDefaults/nodeDefaults/labelStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-diagram-node oj-selected"]={path:"styleDefaults/nodeDefaults/selectionColor",property:"border-color"},t["oj-diagram-node oj-hover"]=[{path:"styleDefaults/nodeDefaults/hoverOuterColor",property:"border-top-color"},{path:"styleDefaults/nodeDefaults/hoverInnerColor",property:"border-bottom-color"}],t["oj-diagram-link"]={path:"styleDefaults/linkDefaults/color",property:"color"},t["oj-diagram-link-label"]={path:"styleDefaults/linkDefaults/labelStyle",property:"CSS_TEXT_PROPERTIES"},t["oj-diagram-link oj-selected"]={path:"styleDefaults/linkDefaults/selectionColor",property:"border-color"},t["oj-diagram-link oj-hover"]=[{path:"styleDefaults/linkDefaults/hoverOuterColor",property:"border-top-color"},{path:"styleDefaults/linkDefaults/hoverInnerColor",property:"border-bottom-color"}],t},_GetEventTypes:function(){return["optionChange","beforeExpand","beforeCollapse","expand","collapse"]},_HandleEvent:function(t){var e=t.type;"beforeExpand"===e?this.expand(t.id,!0):"beforeCollapse"===e?this.collapse(t.id,!0):"expand"===e||"collapse"===e?this._trigger(e,null,{nodeId:t.id}):this._super(t)},_setOptions:function(t,e){t.expanded&&this._component.clearDisclosedState(),this._superApply(arguments)},_GetTranslationMap:function(){var t=this.options.translations,e=this._super();return e["DvtDiagramBundle.PROMOTED_LINK"]=t.promotedLink,e["DvtDiagramBundle.PROMOTED_LINKS"]=t.promotedLinks,e["DvtDiagramBundle.PROMOTED_LINK_ARIA_DESC"]=t.promotedLinkAriaDesc,e["DvtUtilBundle.DIAGRAM"]=t.componentName,e},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var e=this.options._resources;"rtl"===t.DomUtils.getReadingDirection()?(e.collapse_ena={src:t.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-ena_rtl.svg"),width:20,height:20},e.collapse_ovr={src:t.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-ovr_rtl.svg"),width:20,height:20},e.collapse_dwn={src:t.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-dwn_rtl.svg"),width:20,height:20},e.expand_ena={src:t.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-ena_rtl.svg"),width:20,height:20},e.expand_ovr={src:t.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-ovr_rtl.svg"),width:20,height:20},e.expand_dwn={src:t.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-dwn_rtl.svg"),width:20,height:20}):(e.collapse_ena={src:t.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-ena.svg"),width:20,height:20},e.collapse_ovr={src:t.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-ovr.svg"),width:20,height:20},e.collapse_dwn={src:t.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-collapse-button-dwn.svg"),width:20,height:20},e.expand_ena={src:t.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-ena.svg"),width:20,height:20},e.expand_ovr={src:t.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-ovr.svg"),width:20,height:20},e.expand_dwn={src:t.Config.getResourceUrl("resources/internal-deps/dvt/diagram/container-expand-button-dwn.svg"),width:20,height:20})},collapse:function(t,e){var i=this._trigger("beforeCollapse",null,{nodeId:t});e&&i===!1||(this._NotReady(),this._component.collapse(t))},expand:function(t,e){var i=this._trigger("beforeExpand",null,{nodeId:t});e&&i===!1||(this._NotReady(),this._component.expand(t))},getNodeCount:function(){var t=this._component.getAutomation();return t.getNodeCount()},getNode:function(t){var e=this._component.getAutomation();return e.getNode(t)},getLinkCount:function(){var t=this._component.getAutomation();return t.getLinkCount()},getLink:function(t){var e=this._component.getAutomation();return e.getLink(t)},getPromotedLink:function(t,e){var i=this._component.getAutomation();return i.getPromotedLink(t,e)},getContextByNode:function(t){var e=this.getSubIdByNode(t);return e&&"oj-diagram-tooltip"!==e.subId?e:null}}),t.DiagramUtils=function(){},t.DiagramUtils.getLayout=function(e){var i=function(i){if(e.nodes&&i.getNodeCount()>0)for(var n=t.DiagramUtils._dataArrayToMap(e.nodes),o=e.nodeDefaults&&e.nodeDefaults.labelLayout?e.nodeDefaults.labelLayout:null,r=0;r<i.getNodeCount();r++){var s=i.getNodeByIndex(r),a=n[s.getId()];t.DiagramUtils._positionChildNodes(s.getChildNodes(),a?a.nodes:null,i,o),t.DiagramUtils._positionNodeAndLabel(s,a,i,o)}if(e.links&&i.getLinkCount()>0)for(var l=t.DiagramUtils._dataArrayToMap(e.links),h=e.linkDefaults&&e.linkDefaults.path?e.linkDefaults.path:null,o=e.linkDefaults&&e.linkDefaults.labelLayout?e.linkDefaults.labelLayout:null,u=0;u<i.getLinkCount();u++){var d=i.getLinkByIndex(u),c=l[d.getId()];c&&c.path?d.setPoints(c.path):h&&h instanceof Function&&d.setPoints(h(i,d)),c&&c.coordinateSpace&&d.setCoordinateSpace(c.coordinateSpace),c.labelLayout?t.DiagramUtils._setLabelPosition(d,c.labelLayout):o&&o instanceof Function&&t.DiagramUtils._setLabelPosition(d,o(i,d))}if(e.viewport){var p=e.viewport;p instanceof Function?i.setViewport(p(i)):i.setViewport(p)}};return i},t.DiagramUtils._dataArrayToMap=function(t){var e={};if(t)for(var i=0;i<t.length;i++)e[t[i].id]=t[i];return e},t.DiagramUtils._positionChildNodes=function(e,i,n,o){if(e&&i)for(var r=t.DiagramUtils._dataArrayToMap(i),s=0;s<e.length;s++){var a=e[s],l=r[a.getId()];t.DiagramUtils._positionChildNodes(a.getChildNodes(),l?l.nodes:null,n,o),t.DiagramUtils._positionNodeAndLabel(a,l,n,o)}},t.DiagramUtils._positionNodeAndLabel=function(e,i,n,o){e&&i&&(e.setPosition({x:i.x,y:i.y}),i.labelLayout?t.DiagramUtils._setLabelPosition(e,i.labelLayout):o&&o instanceof Function?t.DiagramUtils._setLabelPosition(e,o(n,e)):o&&t.DiagramUtils._setLabelPosition(e,o,e.getPosition()))},t.DiagramUtils._setLabelPosition=function(t,e,i){i=i?i:{x:0,y:0},t.setLabelPosition({x:e.x+i.x,y:e.y+i.y});var n=e.rotationPointX,o=e.rotationPointY;isNaN(n)||isNaN(o)||t.setLabelRotationPoint({x:n+i.x,y:o+i.y}),t.setLabelRotationAngle(e.angle),t.setLabelHalign(e.halign),t.setLabelValign(e.valign)},function(){var e={properties:{animationOnDataChange:{type:"string",enumValues:["auto","none"]},animationOnDisplay:{type:"string",enumValues:["auto","none"]},data:{},dnd:{type:"object",properties:{drag:{type:"object",properties:{nodes:{type:"object",properties:{dataTypes:{type:"Array<string>"},drag:{},dragEnd:{},dragStart:{}}}},ports:{type:"object",properties:{dataTypes:{type:"Array<string>"},feedbackStyle:{},selector:"string",drag:{},dragEnd:{},dragStart:{}}}},drop:{type:"object",properties:{background:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}},nodes:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}},links:{type:"object",properties:{dataTypes:{type:"Array<string>"},dragEnter:{},dragLeave:{},dragOver:{},drop:{}}},ports:{type:"object",properties:{dataTypes:{type:"Array<string>"},feedbackStyle:{},selector:"string",dragEnter:{},dragLeave:{},dragOver:{},drop:{}}}}}}},expanded:{type:"Array<string>|string"},focusRenderer:{},hiddenCategories:{type:"Array<string>",writeback:!0},highlightedCategories:{type:"Array<string>",writeback:!0},highlightMatch:{type:"string",enumValues:["any","all"]},hoverBehavior:{type:"string",enumValues:["dim","none"]},hoverRenderer:{},layout:{},linkHighlightMode:{type:"string",enumValues:["linkAndNodes","link"]},linkProperties:{},maxZoom:{type:"number"},minZoom:{type:"number"},nodeHighlightMode:{type:"string",enumValues:["nodeAndIncomingLinks","nodeAndOutgoingLinks","nodeAndLinks","node"]},nodeProperties:{},panDirection:{type:"string",enumValues:["x","y","auto"]},panning:{type:"string",enumValues:["auto","none"]},promotedLinkBehavior:{type:"string",enumValues:["none","lazy","full"]},renderer:{},selection:{type:"Array<string>",writeback:!0},selectionMode:{type:"string",enumValues:["none","single","multiple"]},selectionRenderer:{},styleDefaults:{type:"object",properties:{animationDuration:{type:"number"},hoverBehaviorDelay:{type:"number"},linkDefaults:{type:"object",properties:{linkDefaults:{color:{type:"string"},endConnectorType:{type:"string",enumValues:["arrowOpen","arrow","arrowConcave","circle","rectangle","rectangleRounded","none"]},labelStyle:{type:"object"},startConnectorType:{type:"string",enumValues:["arrowOpen","arrow","arrowConcave","circle","rectangle","rectangleRounded","none"]},svgStyle:{type:"object"},width:{type:"number"}}}},nodeDefaults:{type:"object",properties:{nodeDefaults:{backgroundSvgStyle:{type:"object"},containerSvgStyle:{type:"object"},icon:{type:"object",properties:{icon:{borderColor:{type:"string"},borderWidth:{type:"number"},color:{type:"string"},halign:{type:"string",enumValues:["left","right","center"]},height:{type:"number"},pattern:{type:"string",enumValues:["smallChecker","smallCrosshatch","smallDiagonalLeft","smallDiagonalRight","smallDiamond","smallTriangle","largeChecker","largeCrosshatch","largeDiagonalLeft","largeDiagonalRight","largeDiamond","largeTriangle","none"]},shape:{type:"string",enumValues:["circle","square","plus","diamond","triangleUp","triangleDown","human","rectangle","star"]},source:{type:"string"},sourceHover:{type:"string"},sourceHoverSelected:{type:"string"},sourceSelected:{type:"string"},svgStyle:{type:"object"},valign:{type:"string",enumValues:["top","bottom","center"]},width:{type:"number"}}}},labelStyle:{type:"object"},showDisclosure:{type:"string",enumValues:["on","off"]}}}},promotedLink:{type:"object",properties:{promotedLink:{color:{type:"string"},endConnectorType:{type:"string",enumValues:["arrowOpen","arrow","arrowConcave","circle","rectangle","rectangleRounded","none"]},startConnectorType:{type:"string",enumValues:["arrowOpen","arrow","arrowConcave","circle","rectangle","rectangleRounded","none"]},svgStyle:{type:"object"},width:{type:"number"}}}}}},tooltip:{type:"object",properties:{renderer:{}}},touchResponse:{type:"string",enumValues:["touchStart","auto"]},translations:{properties:{componentName:{type:"string"},promotedLink:{type:"string"},promotedLinkAriaDesc:{type:"string"},promotedLinks:{type:"string"}}},zooming:{type:"string",enumValues:["auto","none"]},zoomRenderer:{}},events:{beforeCollapse:{},beforeExpand:{},collapse:{},expand:{}},methods:{collapse:{},expand:{},getContextByNode:{},getLink:{},getLinkCount:{},getNode:{},getNodeCount:{},getPromotedLink:{},renderDefaultFocus:{},renderDefaultHover:{},renderDefaultSelection:{}},extension:{_WIDGET_NAME:"ojDiagram"}},i=/^\[.*\]/,n=function(t,e,n,o){return"expanded"==e?i.test(t)?JSON.parse(t):t:o(t)};t.CustomElementBridge.registerMetadata("oj-diagram","dvtBaseComponent",e),t.CustomElementBridge.register("oj-diagram",{metadata:t.CustomElementBridge.getMetadata("oj-diagram"),parseFunction:n})}()}),define("ojs/ojjsondiagramdatasource",["ojs/ojcore","ojs/ojdatasource-common"],function(t){t.JsonDiagramDataSource=function(e,i){this.childDataCallback=i?i.childData:null,this._nodesMapById={},t.JsonDiagramDataSource.superclass.constructor.call(this,e)},t.Object.createSubclass(t.JsonDiagramDataSource,t.DiagramDataSource,"oj.JsonDiagramDataSource"),t.JsonDiagramDataSource.prototype.getData=function(t){if(t){var e=t.nodes;return void 0===e&&this.childDataCallback?(e=this.childDataCallback(t),this._updateLocalData(this._nodesMapById[t.id],e),e):(this._updateNodesMap({nodes:e}),Promise.resolve({nodes:e}))}if(this.data)return this._updateNodesMap(this.data),Promise.resolve(this.data);if(this.childDataCallback){var e=this.childDataCallback();return this._updateLocalData(null,e),e}return Promise.resolve(null)},t.JsonDiagramDataSource.prototype._updateNodesMap=function(t){if(this.childDataCallback&&t.nodes)for(var e=t.nodes,i=0;i<e.length;i++)this._nodesMapById[e[i].id]=e[i]},t.JsonDiagramDataSource.prototype._updateLocalData=function(t,e){if(e instanceof Promise){var i=this;e.then(function(e){Array.isArray(e.nodes)&&(t?t.nodes=e.nodes:i.data.nodes=e.nodes,i._updateNodesMap(e)),Array.isArray(e.links)&&(i.data.links=Array.isArray(i.data.links)?i.data.links.concat(e.links):e.links),i.handleEvent("ADD",{data:e,parentId:t?t.id:null,index:0})},function(t){})}},t.JsonDiagramDataSource.prototype.getChildCount=function(t){if(t){var e=t.nodes,i=Array.isArray(e)?e.length:void 0===e&&this.childDataCallback?-1:0;return i}return-1},t.JsonDiagramDataSource.prototype.getDescendantsConnectivity=function(t){return"unknown"}});